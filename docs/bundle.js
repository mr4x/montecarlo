(()=>{var Ns=Object.create;var ya=Object.defineProperty;var zs=Object.getOwnPropertyDescriptor;var Os=Object.getOwnPropertyNames;var Bs=Object.getPrototypeOf,Us=Object.prototype.hasOwnProperty;var Hs=bt=>ya(bt,"__esModule",{value:!0});var kn=(bt=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(bt,{get:(Tt,Xt)=>(typeof require!="undefined"?require:Tt)[Xt]}):bt)(function(bt){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+bt+'" is not supported')});var Gs=(bt,Tt)=>()=>(Tt||bt((Tt={exports:{}}).exports,Tt),Tt.exports);var Vs=(bt,Tt,Xt,z)=>{if(Tt&&typeof Tt=="object"||typeof Tt=="function")for(let le of Os(Tt))!Us.call(bt,le)&&(Xt||le!=="default")&&ya(bt,le,{get:()=>Tt[le],enumerable:!(z=zs(Tt,le))||z.enumerable});return bt},Ys=(bt,Tt)=>Vs(Hs(ya(bt!=null?Ns(Bs(bt)):{},"default",!Tt&&bt&&bt.__esModule?{get:()=>bt.default,enumerable:!0}:{value:bt,enumerable:!0})),bt);var Di=Gs((Ri,ma)=>{(function(bt){if(typeof Ri=="object"&&typeof ma<"u")ma.exports=bt();else if(typeof define=="function"&&define.amd)define([],bt);else{var Tt;typeof window<"u"?Tt=window:typeof global<"u"?Tt=global:typeof self<"u"?Tt=self:Tt=this,Tt.Plotly=bt()}})(function(){var bt,Tt,Xt;return function(){function z(le,ae,R){function L(p,w){if(!ae[p]){if(!le[p]){var k=typeof kn=="function"&&kn;if(!w&&k)return k(p,!0);if(N)return N(p,!0);var d=new Error("Cannot find module '"+p+"'");throw d.code="MODULE_NOT_FOUND",d}var e=ae[p]={exports:{}};le[p][0].call(e.exports,function(u){var s=le[p][1][u];return L(s||u)},e,e.exports,z,le,ae,R)}return ae[p].exports}for(var N=typeof kn=="function"&&kn,D=0;D<R.length;D++)L(R[D]);return L}return z}()({1:[function(z,le,ae){"use strict";var R=z("../src/lib"),L={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var N in L){var D=N.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");R.addStyleRule(D,L[N])}},{"../src/lib":252}],2:[function(z,le,ae){"use strict";le.exports=z("../src/transforms/aggregate")},{"../src/transforms/aggregate":429}],3:[function(z,le,ae){"use strict";le.exports=z("../src/components/calendars")},{"../src/components/calendars":117}],4:[function(z,le,ae){"use strict";le.exports=z("../src/traces/cone")},{"../src/traces/cone":365}],5:[function(z,le,ae){"use strict";le.exports=z("../src/core")},{"../src/core":233}],6:[function(z,le,ae){"use strict";le.exports=z("../src/transforms/filter")},{"../src/transforms/filter":430}],7:[function(z,le,ae){"use strict";le.exports=z("../src/transforms/groupby")},{"../src/transforms/groupby":431}],8:[function(z,le,ae){"use strict";var R=z("./core");R.register([z("./scatter3d"),z("./surface"),z("./isosurface"),z("./volume"),z("./mesh3d"),z("./cone"),z("./streamtube"),z("./aggregate"),z("./filter"),z("./groupby"),z("./sort"),z("./calendars")]),le.exports=R},{"./aggregate":2,"./calendars":3,"./cone":4,"./core":5,"./filter":6,"./groupby":7,"./isosurface":9,"./mesh3d":10,"./scatter3d":11,"./sort":12,"./streamtube":13,"./surface":14,"./volume":15}],9:[function(z,le,ae){"use strict";le.exports=z("../src/traces/isosurface")},{"../src/traces/isosurface":372}],10:[function(z,le,ae){"use strict";le.exports=z("../src/traces/mesh3d")},{"../src/traces/mesh3d":377}],11:[function(z,le,ae){"use strict";le.exports=z("../src/traces/scatter3d")},{"../src/traces/scatter3d":414}],12:[function(z,le,ae){"use strict";le.exports=z("../src/transforms/sort")},{"../src/transforms/sort":433}],13:[function(z,le,ae){"use strict";le.exports=z("../src/traces/streamtube")},{"../src/traces/streamtube":419}],14:[function(z,le,ae){"use strict";le.exports=z("../src/traces/surface")},{"../src/traces/surface":424}],15:[function(z,le,ae){"use strict";le.exports=z("../src/traces/volume")},{"../src/traces/volume":428}],16:[function(z,le,ae){(function(){var R={version:"3.8.0"},L=[].slice,N=function(F){return L.call(F)},D=self.document;function p(F){return F&&(F.ownerDocument||F.document||F).documentElement}function w(F){return F&&(F.ownerDocument&&F.ownerDocument.defaultView||F.document&&F||F.defaultView)}if(D)try{N(D.documentElement.childNodes)[0].nodeType}catch{N=function(J){for(var te=J.length,oe=new Array(te);te--;)oe[te]=J[te];return oe}}if(Date.now||(Date.now=function(){return+new Date}),D)try{D.createElement("DIV").style.setProperty("opacity",0,"")}catch{var k=this.Element.prototype,d=k.setAttribute,e=k.setAttributeNS,u=this.CSSStyleDeclaration.prototype,s=u.setProperty;k.setAttribute=function(J,te){d.call(this,J,te+"")},k.setAttributeNS=function(J,te,oe){e.call(this,J,te,oe+"")},u.setProperty=function(J,te,oe){s.call(this,J,te+"",oe)}}R.ascending=l;function l(F,J){return F<J?-1:F>J?1:F>=J?0:NaN}R.descending=function(F,J){return J<F?-1:J>F?1:J>=F?0:NaN},R.min=function(F,J){var te=-1,oe=F.length,se,he;if(arguments.length===1){for(;++te<oe;)if((he=F[te])!=null&&he>=he){se=he;break}for(;++te<oe;)(he=F[te])!=null&&se>he&&(se=he)}else{for(;++te<oe;)if((he=J.call(F,F[te],te))!=null&&he>=he){se=he;break}for(;++te<oe;)(he=J.call(F,F[te],te))!=null&&se>he&&(se=he)}return se},R.max=function(F,J){var te=-1,oe=F.length,se,he;if(arguments.length===1){for(;++te<oe;)if((he=F[te])!=null&&he>=he){se=he;break}for(;++te<oe;)(he=F[te])!=null&&he>se&&(se=he)}else{for(;++te<oe;)if((he=J.call(F,F[te],te))!=null&&he>=he){se=he;break}for(;++te<oe;)(he=J.call(F,F[te],te))!=null&&he>se&&(se=he)}return se},R.extent=function(F,J){var te=-1,oe=F.length,se,he,Te;if(arguments.length===1){for(;++te<oe;)if((he=F[te])!=null&&he>=he){se=Te=he;break}for(;++te<oe;)(he=F[te])!=null&&(se>he&&(se=he),Te<he&&(Te=he))}else{for(;++te<oe;)if((he=J.call(F,F[te],te))!=null&&he>=he){se=Te=he;break}for(;++te<oe;)(he=J.call(F,F[te],te))!=null&&(se>he&&(se=he),Te<he&&(Te=he))}return[se,Te]};function b(F){return F===null?NaN:+F}function v(F){return!isNaN(F)}R.sum=function(F,J){var te=0,oe=F.length,se,he=-1;if(arguments.length===1)for(;++he<oe;)v(se=+F[he])&&(te+=se);else for(;++he<oe;)v(se=+J.call(F,F[he],he))&&(te+=se);return te},R.mean=function(F,J){var te=0,oe=F.length,se,he=-1,Te=oe;if(arguments.length===1)for(;++he<oe;)v(se=b(F[he]))?te+=se:--Te;else for(;++he<oe;)v(se=b(J.call(F,F[he],he)))?te+=se:--Te;if(Te)return te/Te},R.quantile=function(F,J){var te=(F.length-1)*J+1,oe=Math.floor(te),se=+F[oe-1],he=te-oe;return he?se+he*(F[oe]-se):se},R.median=function(F,J){var te=[],oe=F.length,se,he=-1;if(arguments.length===1)for(;++he<oe;)v(se=b(F[he]))&&te.push(se);else for(;++he<oe;)v(se=b(J.call(F,F[he],he)))&&te.push(se);if(te.length)return R.quantile(te.sort(l),.5)},R.variance=function(F,J){var te=F.length,oe=0,se,he,Te=0,xe=-1,Ee=0;if(arguments.length===1)for(;++xe<te;)v(se=b(F[xe]))&&(he=se-oe,oe+=he/++Ee,Te+=he*(se-oe));else for(;++xe<te;)v(se=b(J.call(F,F[xe],xe)))&&(he=se-oe,oe+=he/++Ee,Te+=he*(se-oe));if(Ee>1)return Te/(Ee-1)},R.deviation=function(){var F=R.variance.apply(this,arguments);return F&&Math.sqrt(F)};function y(F){return{left:function(J,te,oe,se){for(arguments.length<3&&(oe=0),arguments.length<4&&(se=J.length);oe<se;){var he=oe+se>>>1;F(J[he],te)<0?oe=he+1:se=he}return oe},right:function(J,te,oe,se){for(arguments.length<3&&(oe=0),arguments.length<4&&(se=J.length);oe<se;){var he=oe+se>>>1;F(J[he],te)>0?se=he:oe=he+1}return oe}}}var T=y(l);R.bisectLeft=T.left,R.bisect=R.bisectRight=T.right,R.bisector=function(F){return y(F.length===1?function(J,te){return l(F(J),te)}:F)},R.shuffle=function(F,J,te){(oe=arguments.length)<3&&(te=F.length,oe<2&&(J=0));for(var oe=te-J,se,he;oe;)he=Math.random()*oe--|0,se=F[oe+J],F[oe+J]=F[he+J],F[he+J]=se;return F},R.permute=function(F,J){for(var te=J.length,oe=new Array(te);te--;)oe[te]=F[J[te]];return oe},R.pairs=function(F){for(var J=0,te=F.length-1,oe,se=F[0],he=new Array(te<0?0:te);J<te;)he[J]=[oe=se,se=F[++J]];return he},R.transpose=function(F){if(!(he=F.length))return[];for(var J=-1,te=R.min(F,_),oe=new Array(te);++J<te;)for(var se=-1,he,Te=oe[J]=new Array(he);++se<he;)Te[se]=F[se][J];return oe};function _(F){return F.length}R.zip=function(){return R.transpose(arguments)},R.keys=function(F){var J=[];for(var te in F)J.push(te);return J},R.values=function(F){var J=[];for(var te in F)J.push(F[te]);return J},R.entries=function(F){var J=[];for(var te in F)J.push({key:te,value:F[te]});return J},R.merge=function(F){for(var J=F.length,te,oe=-1,se=0,he,Te;++oe<J;)se+=F[oe].length;for(he=new Array(se);--J>=0;)for(Te=F[J],te=Te.length;--te>=0;)he[--se]=Te[te];return he};var f=Math.abs;R.range=function(F,J,te){if(arguments.length<3&&(te=1,arguments.length<2&&(J=F,F=0)),(J-F)/te===1/0)throw new Error("infinite range");var oe=[],se=g(f(te)),he=-1,Te;if(F*=se,J*=se,te*=se,te<0)for(;(Te=F+te*++he)>J;)oe.push(Te/se);else for(;(Te=F+te*++he)<J;)oe.push(Te/se);return oe};function g(F){for(var J=1;F*J%1;)J*=10;return J}function n(F,J){for(var te in J)Object.defineProperty(F.prototype,te,{value:J[te],enumerable:!1})}R.map=function(F,J){var te=new a;if(F instanceof a)F.forEach(function(xe,Ee){te.set(xe,Ee)});else if(Array.isArray(F)){var oe=-1,se=F.length,he;if(arguments.length===1)for(;++oe<se;)te.set(oe,F[oe]);else for(;++oe<se;)te.set(J.call(F,he=F[oe],oe),he)}else for(var Te in F)te.set(Te,F[Te]);return te};function a(){this._=Object.create(null)}var h="__proto__",c="\0";n(a,{has:t,get:function(F){return this._[m(F)]},set:function(F,J){return this._[m(F)]=J},remove:i,keys:r,values:function(){var F=[];for(var J in this._)F.push(this._[J]);return F},entries:function(){var F=[];for(var J in this._)F.push({key:o(J),value:this._[J]});return F},size:x,empty:A,forEach:function(F){for(var J in this._)F.call(this,o(J),this._[J])}});function m(F){return(F+="")===h||F[0]===c?c+F:F}function o(F){return(F+="")[0]===c?F.slice(1):F}function t(F){return m(F)in this._}function i(F){return(F=m(F))in this._&&delete this._[F]}function r(){var F=[];for(var J in this._)F.push(o(J));return F}function x(){var F=0;for(var J in this._)++F;return F}function A(){for(var F in this._)return!1;return!0}R.nest=function(){var F={},J=[],te=[],oe,se;function he(xe,Ee,De){if(De>=J.length)return se?se.call(F,Ee):oe?Ee.sort(oe):Ee;for(var Pe=-1,Qe=Ee.length,$e=J[De++],ct,yt,tt,it=new a,lt;++Pe<Qe;)(lt=it.get(ct=$e(yt=Ee[Pe])))?lt.push(yt):it.set(ct,[yt]);return xe?(yt=xe(),tt=function(gt,mt){yt.set(gt,he(xe,mt,De))}):(yt={},tt=function(gt,mt){yt[gt]=he(xe,mt,De)}),it.forEach(tt),yt}function Te(xe,Ee){if(Ee>=J.length)return xe;var De=[],Pe=te[Ee++];return xe.forEach(function(Qe,$e){De.push({key:Qe,values:Te($e,Ee)})}),Pe?De.sort(function(Qe,$e){return Pe(Qe.key,$e.key)}):De}return F.map=function(xe,Ee){return he(Ee,xe,0)},F.entries=function(xe){return Te(he(R.map,xe,0),0)},F.key=function(xe){return J.push(xe),F},F.sortKeys=function(xe){return te[J.length-1]=xe,F},F.sortValues=function(xe){return oe=xe,F},F.rollup=function(xe){return se=xe,F},F},R.set=function(F){var J=new E;if(F)for(var te=0,oe=F.length;te<oe;++te)J.add(F[te]);return J};function E(){this._=Object.create(null)}n(E,{has:t,add:function(F){return this._[m(F+="")]=!0,F},remove:i,values:r,size:x,empty:A,forEach:function(F){for(var J in this._)F.call(this,o(J))}}),R.behavior={};function P(F){return F}R.rebind=function(F,J){for(var te=1,oe=arguments.length,se;++te<oe;)F[se=arguments[te]]=S(F,J,J[se]);return F};function S(F,J,te){return function(){var oe=te.apply(J,arguments);return oe===J?F:oe}}function C(F,J){if(J in F)return J;J=J.charAt(0).toUpperCase()+J.slice(1);for(var te=0,oe=M.length;te<oe;++te){var se=M[te]+J;if(se in F)return se}}var M=["webkit","ms","moz","Moz","o","O"];function I(){}R.dispatch=function(){for(var F=new G,J=-1,te=arguments.length;++J<te;)F[arguments[J]]=V(F);return F};function G(){}G.prototype.on=function(F,J){var te=F.indexOf("."),oe="";if(te>=0&&(oe=F.slice(te+1),F=F.slice(0,te)),F)return arguments.length<2?this[F].on(oe):this[F].on(oe,J);if(arguments.length===2){if(J==null)for(F in this)this.hasOwnProperty(F)&&this[F].on(oe,null);return this}};function V(F){var J=[],te=new a;function oe(){for(var se=J,he=-1,Te=se.length,xe;++he<Te;)(xe=se[he].on)&&xe.apply(this,arguments);return F}return oe.on=function(se,he){var Te=te.get(se),xe;return arguments.length<2?Te&&Te.on:(Te&&(Te.on=null,J=J.slice(0,xe=J.indexOf(Te)).concat(J.slice(xe+1)),te.remove(se)),he&&J.push(te.set(se,{on:he})),F)},oe}R.event=null;function q(){R.event.preventDefault()}function ee(){for(var F=R.event,J;J=F.sourceEvent;)F=J;return F}function Q(F){for(var J=new G,te=0,oe=arguments.length;++te<oe;)J[arguments[te]]=V(J);return J.of=function(se,he){return function(Te){try{var xe=Te.sourceEvent=R.event;Te.target=F,R.event=Te,J[Te.type].apply(se,he)}finally{R.event=xe}}},J}R.requote=function(F){return F.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,O={}.__proto__?function(F,J){F.__proto__=J}:function(F,J){for(var te in J)F[te]=J[te]};function Z(F){return O(F,X),F}var B=function(F,J){return J.querySelector(F)},Y=function(F,J){return J.querySelectorAll(F)},j=function(F,J){var te=F.matches||F[C(F,"matchesSelector")];return j=function(oe,se){return te.call(oe,se)},j(F,J)};typeof Sizzle=="function"&&(B=function(F,J){return Sizzle(F,J)[0]||null},Y=Sizzle,j=Sizzle.matchesSelector),R.selection=function(){return R.select(D.documentElement)};var X=R.selection.prototype=[];X.select=function(F){var J=[],te,oe,se,he;F=H(F);for(var Te=-1,xe=this.length;++Te<xe;){J.push(te=[]),te.parentNode=(se=this[Te]).parentNode;for(var Ee=-1,De=se.length;++Ee<De;)(he=se[Ee])?(te.push(oe=F.call(he,he.__data__,Ee,Te)),oe&&"__data__"in he&&(oe.__data__=he.__data__)):te.push(null)}return Z(J)};function H(F){return typeof F=="function"?F:function(){return B(F,this)}}X.selectAll=function(F){var J=[],te,oe;F=K(F);for(var se=-1,he=this.length;++se<he;)for(var Te=this[se],xe=-1,Ee=Te.length;++xe<Ee;)(oe=Te[xe])&&(J.push(te=N(F.call(oe,oe.__data__,xe,se))),te.parentNode=oe);return Z(J)};function K(F){return typeof F=="function"?F:function(){return Y(F,this)}}var W="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};R.ns={prefix:$,qualify:function(F){var J=F.indexOf(":"),te=F;return J>=0&&(te=F.slice(0,J))!=="xmlns"&&(F=F.slice(J+1)),$.hasOwnProperty(te)?{space:$[te],local:F}:F}},X.attr=function(F,J){if(arguments.length<2){if(typeof F=="string"){var te=this.node();return F=R.ns.qualify(F),F.local?te.getAttributeNS(F.space,F.local):te.getAttribute(F)}for(J in F)this.each(re(J,F[J]));return this}return this.each(re(F,J))};function re(F,J){F=R.ns.qualify(F);function te(){this.removeAttribute(F)}function oe(){this.removeAttributeNS(F.space,F.local)}function se(){this.setAttribute(F,J)}function he(){this.setAttributeNS(F.space,F.local,J)}function Te(){var Ee=J.apply(this,arguments);Ee==null?this.removeAttribute(F):this.setAttribute(F,Ee)}function xe(){var Ee=J.apply(this,arguments);Ee==null?this.removeAttributeNS(F.space,F.local):this.setAttributeNS(F.space,F.local,Ee)}return J==null?F.local?oe:te:typeof J=="function"?F.local?xe:Te:F.local?he:se}function de(F){return F.trim().replace(/\s+/g," ")}X.classed=function(F,J){if(arguments.length<2){if(typeof F=="string"){var te=this.node(),oe=(F=ue(F)).length,se=-1;if(J=te.classList){for(;++se<oe;)if(!J.contains(F[se]))return!1}else for(J=te.getAttribute("class");++se<oe;)if(!ve(F[se]).test(J))return!1;return!0}for(J in F)this.each(ce(J,F[J]));return this}return this.each(ce(F,J))};function ve(F){return new RegExp("(?:^|\\s+)"+R.requote(F)+"(?:\\s+|$)","g")}function ue(F){return(F+"").trim().split(/^|\s+/)}function ce(F,J){F=ue(F).map(_e);var te=F.length;function oe(){for(var he=-1;++he<te;)F[he](this,J)}function se(){for(var he=-1,Te=J.apply(this,arguments);++he<te;)F[he](this,Te)}return typeof J=="function"?se:oe}function _e(F){var J=ve(F);return function(te,oe){if(se=te.classList)return oe?se.add(F):se.remove(F);var se=te.getAttribute("class")||"";oe?(J.lastIndex=0,J.test(se)||te.setAttribute("class",de(se+" "+F))):te.setAttribute("class",de(se.replace(J," ")))}}X.style=function(F,J,te){var oe=arguments.length;if(oe<3){if(typeof F!="string"){oe<2&&(J="");for(te in F)this.each(fe(te,F[te],J));return this}if(oe<2){var se=this.node();return w(se).getComputedStyle(se,null).getPropertyValue(F)}te=""}return this.each(fe(F,J,te))};function fe(F,J,te){function oe(){this.style.removeProperty(F)}function se(){this.style.setProperty(F,J,te)}function he(){var Te=J.apply(this,arguments);Te==null?this.style.removeProperty(F):this.style.setProperty(F,Te,te)}return J==null?oe:typeof J=="function"?he:se}X.property=function(F,J){if(arguments.length<2){if(typeof F=="string")return this.node()[F];for(J in F)this.each(ne(J,F[J]));return this}return this.each(ne(F,J))};function ne(F,J){function te(){delete this[F]}function oe(){this[F]=J}function se(){var he=J.apply(this,arguments);he==null?delete this[F]:this[F]=he}return J==null?te:typeof J=="function"?se:oe}X.text=function(F){return arguments.length?this.each(typeof F=="function"?function(){var J=F.apply(this,arguments);this.textContent=J??""}:F==null?function(){this.textContent=""}:function(){this.textContent=F}):this.node().textContent},X.html=function(F){return arguments.length?this.each(typeof F=="function"?function(){var J=F.apply(this,arguments);this.innerHTML=J??""}:F==null?function(){this.innerHTML=""}:function(){this.innerHTML=F}):this.node().innerHTML},X.append=function(F){return F=ie(F),this.select(function(){return this.appendChild(F.apply(this,arguments))})};function ie(F){function J(){var oe=this.ownerDocument,se=this.namespaceURI;return se===W&&oe.documentElement.namespaceURI===W?oe.createElement(F):oe.createElementNS(se,F)}function te(){return this.ownerDocument.createElementNS(F.space,F.local)}return typeof F=="function"?F:(F=R.ns.qualify(F)).local?te:J}X.insert=function(F,J){return F=ie(F),J=H(J),this.select(function(){return this.insertBefore(F.apply(this,arguments),J.apply(this,arguments)||null)})},X.remove=function(){return this.each(me)};function me(){var F=this.parentNode;F&&F.removeChild(this)}X.data=function(F,J){var te=-1,oe=this.length,se,he;if(!arguments.length){for(F=new Array(oe=(se=this[0]).length);++te<oe;)(he=se[te])&&(F[te]=he.__data__);return F}function Te(Pe,Qe){var $e,ct=Pe.length,yt=Qe.length,tt=Math.min(ct,yt),it=new Array(yt),lt=new Array(yt),gt=new Array(ct),mt,ft;if(J){var Nt=new a,Kt=new Array(ct),qt;for($e=-1;++$e<ct;)(mt=Pe[$e])&&(Nt.has(qt=J.call(mt,mt.__data__,$e))?gt[$e]=mt:Nt.set(qt,mt),Kt[$e]=qt);for($e=-1;++$e<yt;)(mt=Nt.get(qt=J.call(Qe,ft=Qe[$e],$e)))?mt!==!0&&(it[$e]=mt,mt.__data__=ft):lt[$e]=we(ft),Nt.set(qt,!0);for($e=-1;++$e<ct;)$e in Kt&&Nt.get(Kt[$e])!==!0&&(gt[$e]=Pe[$e])}else{for($e=-1;++$e<tt;)mt=Pe[$e],ft=Qe[$e],mt?(mt.__data__=ft,it[$e]=mt):lt[$e]=we(ft);for(;$e<yt;++$e)lt[$e]=we(Qe[$e]);for(;$e<ct;++$e)gt[$e]=Pe[$e]}lt.update=it,lt.parentNode=it.parentNode=gt.parentNode=Pe.parentNode,xe.push(lt),Ee.push(it),De.push(gt)}var xe=Ke([]),Ee=Z([]),De=Z([]);if(typeof F=="function")for(;++te<oe;)Te(se=this[te],F.call(se,se.parentNode.__data__,te));else for(;++te<oe;)Te(se=this[te],F);return Ee.enter=function(){return xe},Ee.exit=function(){return De},Ee};function we(F){return{__data__:F}}X.datum=function(F){return arguments.length?this.property("__data__",F):this.property("__data__")},X.filter=function(F){var J=[],te,oe,se;typeof F!="function"&&(F=be(F));for(var he=0,Te=this.length;he<Te;he++){J.push(te=[]),te.parentNode=(oe=this[he]).parentNode;for(var xe=0,Ee=oe.length;xe<Ee;xe++)(se=oe[xe])&&F.call(se,se.__data__,xe,he)&&te.push(se)}return Z(J)};function be(F){return function(){return j(this,F)}}X.order=function(){for(var F=-1,J=this.length;++F<J;)for(var te=this[F],oe=te.length-1,se=te[oe],he;--oe>=0;)(he=te[oe])&&(se&&se!==he.nextSibling&&se.parentNode.insertBefore(he,se),se=he);return this},X.sort=function(F){F=Me.apply(this,arguments);for(var J=-1,te=this.length;++J<te;)this[J].sort(F);return this.order()};function Me(F){return arguments.length||(F=l),function(J,te){return J&&te?F(J.__data__,te.__data__):!J-!te}}X.each=function(F){return Ie(this,function(J,te,oe){F.call(J,J.__data__,te,oe)})};function Ie(F,J){for(var te=0,oe=F.length;te<oe;te++)for(var se=F[te],he=0,Te=se.length,xe;he<Te;he++)(xe=se[he])&&J(xe,he,te);return F}X.call=function(F){var J=N(arguments);return F.apply(J[0]=this,J),this},X.empty=function(){return!this.node()},X.node=function(){for(var F=0,J=this.length;F<J;F++)for(var te=this[F],oe=0,se=te.length;oe<se;oe++){var he=te[oe];if(he)return he}return null},X.size=function(){var F=0;return Ie(this,function(){++F}),F};function Ke(F){return O(F,Oe),F}var Oe=[];R.selection.enter=Ke,R.selection.enter.prototype=Oe,Oe.append=X.append,Oe.empty=X.empty,Oe.node=X.node,Oe.call=X.call,Oe.size=X.size,Oe.select=function(F){for(var J=[],te,oe,se,he,Te,xe=-1,Ee=this.length;++xe<Ee;){se=(he=this[xe]).update,J.push(te=[]),te.parentNode=he.parentNode;for(var De=-1,Pe=he.length;++De<Pe;)(Te=he[De])?(te.push(se[De]=oe=F.call(he.parentNode,Te.__data__,De,xe)),oe.__data__=Te.__data__):te.push(null)}return Z(J)},Oe.insert=function(F,J){return arguments.length<2&&(J=We(this)),X.insert.call(this,F,J)};function We(F){var J,te;return function(oe,se,he){var Te=F[he].update,xe=Te.length,Ee;for(he!=te&&(te=he,J=0),se>=J&&(J=se+1);!(Ee=Te[J])&&++J<xe;);return Ee}}R.select=function(F){var J;return typeof F=="string"?(J=[B(F,D)],J.parentNode=D.documentElement):(J=[F],J.parentNode=p(F)),Z([J])},R.selectAll=function(F){var J;return typeof F=="string"?(J=N(Y(F,D)),J.parentNode=D.documentElement):(J=N(F),J.parentNode=null),Z([J])},X.on=function(F,J,te){var oe=arguments.length;if(oe<3){if(typeof F!="string"){oe<2&&(J=!1);for(te in F)this.each(Fe(te,F[te],J));return this}if(oe<2)return(oe=this.node()["__on"+F])&&oe._;te=!1}return this.each(Fe(F,J,te))};function Fe(F,J,te){var oe="__on"+F,se=F.indexOf("."),he=Xe;se>0&&(F=F.slice(0,se));var Te=Ge.get(F);Te&&(F=Te,he=ut);function xe(){var Pe=this[oe];Pe&&(this.removeEventListener(F,Pe,Pe.$),delete this[oe])}function Ee(){var Pe=he(J,N(arguments));xe.call(this),this.addEventListener(F,this[oe]=Pe,Pe.$=te),Pe._=J}function De(){var Pe=new RegExp("^__on([^.]+)"+R.requote(F)+"$"),Qe;for(var $e in this)if(Qe=$e.match(Pe)){var ct=this[$e];this.removeEventListener(Qe[1],ct,ct.$),delete this[$e]}}return se?J?Ee:xe:J?I:De}var Ge=R.map({mouseenter:"mouseover",mouseleave:"mouseout"});D&&Ge.forEach(function(F){"on"+F in D&&Ge.remove(F)});function Xe(F,J){return function(te){var oe=R.event;R.event=te,J[0]=this.__data__;try{F.apply(this,J)}finally{R.event=oe}}}function ut(F,J){var te=Xe(F,J);return function(oe){var se=this,he=oe.relatedTarget;(!he||he!==se&&!(he.compareDocumentPosition(se)&8))&&te.call(se,oe)}}var rt,dt=0;function st(F){var J=".dragsuppress-"+ ++dt,te="click"+J,oe=R.select(w(F)).on("touchmove"+J,q).on("dragstart"+J,q).on("selectstart"+J,q);if(rt==null&&(rt="onselectstart"in F?!1:C(F.style,"userSelect")),rt){var se=p(F).style,he=se[rt];se[rt]="none"}return function(Te){if(oe.on(J,null),rt&&(se[rt]=he),Te){var xe=function(){oe.on(te,null)};oe.on(te,function(){q(),xe()},!0),setTimeout(xe,0)}}}R.mouse=function(F){return Je(F,ee())};var Ve=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Je(F,J){J.changedTouches&&(J=J.changedTouches[0]);var te=F.ownerSVGElement||F;if(te.createSVGPoint){var oe=te.createSVGPoint();if(Ve<0){var se=w(F);if(se.scrollX||se.scrollY){te=R.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var he=te[0][0].getScreenCTM();Ve=!(he.f||he.e),te.remove()}}return Ve?(oe.x=J.pageX,oe.y=J.pageY):(oe.x=J.clientX,oe.y=J.clientY),oe=oe.matrixTransform(F.getScreenCTM().inverse()),[oe.x,oe.y]}var Te=F.getBoundingClientRect();return[J.clientX-Te.left-F.clientLeft,J.clientY-Te.top-F.clientTop]}R.touch=function(F,J,te){if(arguments.length<3&&(te=J,J=ee().changedTouches),J){for(var oe=0,se=J.length,he;oe<se;++oe)if((he=J[oe]).identifier===te)return Je(F,he)}},R.behavior.drag=function(){var F=Q(se,"drag","dragstart","dragend"),J=null,te=he(I,R.mouse,w,"mousemove","mouseup"),oe=he(ke,R.touch,P,"touchmove","touchend");function se(){this.on("mousedown.drag",te).on("touchstart.drag",oe)}function he(Te,xe,Ee,De,Pe){return function(){var Qe=this,$e=R.event.target.correspondingElement||R.event.target,ct=Qe.parentNode,yt=F.of(Qe,arguments),tt=0,it=Te(),lt=".drag"+(it==null?"":"-"+it),gt,mt=R.select(Ee($e)).on(De+lt,Kt).on(Pe+lt,qt),ft=st($e),Nt=xe(ct,it);J?(gt=J.apply(Qe,arguments),gt=[gt.x-Nt[0],gt.y-Nt[1]]):gt=[0,0],yt({type:"dragstart"});function Kt(){var jt=xe(ct,it),nr,ar;!jt||(nr=jt[0]-Nt[0],ar=jt[1]-Nt[1],tt|=nr|ar,Nt=jt,yt({type:"drag",x:jt[0]+gt[0],y:jt[1]+gt[1],dx:nr,dy:ar}))}function qt(){!xe(ct,it)||(mt.on(De+lt,null).on(Pe+lt,null),ft(tt),yt({type:"dragend"}))}}}return se.origin=function(Te){return arguments.length?(J=Te,se):J},R.rebind(se,F,"on")};function ke(){return R.event.changedTouches[0].identifier}R.touches=function(F,J){return arguments.length<2&&(J=ee().touches),J?N(J).map(function(te){var oe=Je(F,te);return oe.identifier=te.identifier,oe}):[]};var Le=1e-6,Be=Le*Le,pe=Math.PI,Ae=2*pe,Ce=Ae-Le,Se=pe/2,He=pe/180,Ne=180/pe;function qe(F){return F>0?1:F<0?-1:0}function at(F,J,te){return(J[0]-F[0])*(te[1]-F[1])-(J[1]-F[1])*(te[0]-F[0])}function nt(F){return F>1?0:F<-1?pe:Math.acos(F)}function Ze(F){return F>1?Se:F<-1?-Se:Math.asin(F)}function ht(F){return((F=Math.exp(F))-1/F)/2}function kt(F){return((F=Math.exp(F))+1/F)/2}function xt(F){return((F=Math.exp(2*F))-1)/(F+1)}function Bt(F){return(F=Math.sin(F/2))*F}var Zt=Math.SQRT2,Gt=2,Rt=4;R.interpolateZoom=function(F,J){var te=F[0],oe=F[1],se=F[2],he=J[0],Te=J[1],xe=J[2],Ee=he-te,De=Te-oe,Pe=Ee*Ee+De*De,Qe,$e;if(Pe<Be)$e=Math.log(xe/se)/Zt,Qe=function(gt){return[te+gt*Ee,oe+gt*De,se*Math.exp(Zt*gt*$e)]};else{var ct=Math.sqrt(Pe),yt=(xe*xe-se*se+Rt*Pe)/(2*se*Gt*ct),tt=(xe*xe-se*se-Rt*Pe)/(2*xe*Gt*ct),it=Math.log(Math.sqrt(yt*yt+1)-yt),lt=Math.log(Math.sqrt(tt*tt+1)-tt);$e=(lt-it)/Zt,Qe=function(gt){var mt=gt*$e,ft=kt(it),Nt=se/(Gt*ct)*(ft*xt(Zt*mt+it)-ht(it));return[te+Nt*Ee,oe+Nt*De,se*ft/kt(Zt*mt+it)]}}return Qe.duration=$e*1e3,Qe},R.behavior.zoom=function(){var F={x:0,y:0,k:1},J,te,oe,se=[960,500],he=Wt,Te=250,xe=0,Ee="mousedown.zoom",De="mousemove.zoom",Pe="mouseup.zoom",Qe,$e="touchstart.zoom",ct,yt=Q(mt,"zoomstart","zoom","zoomend"),tt,it,lt,gt;vt||(vt="onwheel"in D?(It=function(){return-R.event.deltaY*(R.event.deltaMode?120:1)},"wheel"):"onmousewheel"in D?(It=function(){return R.event.wheelDelta},"mousewheel"):(It=function(){return-R.event.detail},"MozMousePixelScroll"));function mt(Jt){Jt.on(Ee,lr).on(vt+".zoom",Mr).on("dblclick.zoom",gr).on($e,dr)}mt.event=function(Jt){Jt.each(function(){var fr=yt.of(this,arguments),hr=F;sn?R.select(this).transition().each("start.zoom",function(){F=this.__chart__||{x:0,y:0,k:1},ar(fr)}).tween("zoom:zoom",function(){var pr=se[0],xr=se[1],kr=te?te[0]:pr/2,Lr=te?te[1]:xr/2,Ir=R.interpolateZoom([(kr-F.x)/F.k,(Lr-F.y)/F.k,pr/F.k],[(kr-hr.x)/hr.k,(Lr-hr.y)/hr.k,pr/hr.k]);return function(Nr){var Fr=Ir(Nr),Ur=pr/Fr[2];this.__chart__=F={x:kr-Fr[0]*Ur,y:Lr-Fr[1]*Ur,k:Ur},ur(fr)}}).each("interrupt.zoom",function(){or(fr)}).each("end.zoom",function(){or(fr)}):(this.__chart__=F,ar(fr),ur(fr),or(fr))})},mt.translate=function(Jt){return arguments.length?(F={x:+Jt[0],y:+Jt[1],k:F.k},nr(),mt):[F.x,F.y]},mt.scale=function(Jt){return arguments.length?(F={x:F.x,y:F.y,k:null},Kt(+Jt),nr(),mt):F.k},mt.scaleExtent=function(Jt){return arguments.length?(he=Jt==null?Wt:[+Jt[0],+Jt[1]],mt):he},mt.center=function(Jt){return arguments.length?(oe=Jt&&[+Jt[0],+Jt[1]],mt):oe},mt.size=function(Jt){return arguments.length?(se=Jt&&[+Jt[0],+Jt[1]],mt):se},mt.duration=function(Jt){return arguments.length?(Te=+Jt,mt):Te},mt.x=function(Jt){return arguments.length?(it=Jt,tt=Jt.copy(),F={x:0,y:0,k:1},mt):it},mt.y=function(Jt){return arguments.length?(gt=Jt,lt=Jt.copy(),F={x:0,y:0,k:1},mt):gt};function ft(Jt){return[(Jt[0]-F.x)/F.k,(Jt[1]-F.y)/F.k]}function Nt(Jt){return[Jt[0]*F.k+F.x,Jt[1]*F.k+F.y]}function Kt(Jt){F.k=Math.max(he[0],Math.min(he[1],Jt))}function qt(Jt,fr){fr=Nt(fr),F.x+=Jt[0]-fr[0],F.y+=Jt[1]-fr[1]}function jt(Jt,fr,hr,pr){Jt.__chart__={x:F.x,y:F.y,k:F.k},Kt(Math.pow(2,pr)),qt(te=fr,hr),Jt=R.select(Jt),Te>0&&(Jt=Jt.transition().duration(Te)),Jt.call(mt.event)}function nr(){it&&it.domain(tt.range().map(function(Jt){return(Jt-F.x)/F.k}).map(tt.invert)),gt&&gt.domain(lt.range().map(function(Jt){return(Jt-F.y)/F.k}).map(lt.invert))}function ar(Jt){xe++||Jt({type:"zoomstart"})}function ur(Jt){nr(),Jt({type:"zoom",scale:F.k,translate:[F.x,F.y]})}function or(Jt){--xe||(Jt({type:"zoomend"}),te=null)}function lr(){var Jt=this,fr=yt.of(Jt,arguments),hr=0,pr=R.select(w(Jt)).on(De,Lr).on(Pe,Ir),xr=ft(R.mouse(Jt)),kr=st(Jt);Gn.call(Jt),ar(fr);function Lr(){hr=1,qt(R.mouse(Jt),xr),ur(fr)}function Ir(){pr.on(De,null).on(Pe,null),kr(hr),or(fr)}}function dr(){var Jt=this,fr=yt.of(Jt,arguments),hr={},pr=0,xr,kr=".zoom-"+R.event.changedTouches[0].identifier,Lr="touchmove"+kr,Ir="touchend"+kr,Nr=[],Fr=R.select(Jt),Ur=st(Jt);Hr(),ar(fr),Fr.on(Ee,null).on($e,Hr);function Dr(){var Xr=R.touches(Jt);return xr=F.k,Xr.forEach(function(Rr){Rr.identifier in hr&&(hr[Rr.identifier]=ft(Rr))}),Xr}function Hr(){var Xr=R.event.target;R.select(Xr).on(Lr,ln).on(Ir,Fs),Nr.push(Xr);for(var Rr=R.event.changedTouches,Vr=0,Jr=Rr.length;Vr<Jr;++Vr)hr[Rr[Vr].identifier]=null;var Yr=Dr(),gn=Date.now();if(Yr.length===1){if(gn-ct<500){var un=Yr[0];jt(Jt,un,hr[un.identifier],Math.floor(Math.log(F.k)/Math.LN2)+1),q()}ct=gn}else if(Yr.length>1){var un=Yr[0],nn=Yr[1],Wn=un[0]-nn[0],Li=un[1]-nn[1];pr=Wn*Wn+Li*Li}}function ln(){var Xr=R.touches(Jt),Rr,Vr,Jr,Yr;Gn.call(Jt);for(var gn=0,un=Xr.length;gn<un;++gn,Yr=null)if(Jr=Xr[gn],Yr=hr[Jr.identifier]){if(Vr)break;Rr=Jr,Vr=Yr}if(Yr){var nn=(nn=Jr[0]-Rr[0])*nn+(nn=Jr[1]-Rr[1])*nn,Wn=pr&&Math.sqrt(nn/pr);Rr=[(Rr[0]+Jr[0])/2,(Rr[1]+Jr[1])/2],Vr=[(Vr[0]+Yr[0])/2,(Vr[1]+Yr[1])/2],Kt(Wn*xr)}ct=null,qt(Rr,Vr),ur(fr)}function Fs(){if(R.event.touches.length){for(var Xr=R.event.changedTouches,Rr=0,Vr=Xr.length;Rr<Vr;++Rr)delete hr[Xr[Rr].identifier];for(var Jr in hr)return void Dr()}R.selectAll(Nr).on(kr,null),Fr.on(Ee,lr).on($e,dr),Ur(),or(fr)}}function Mr(){var Jt=yt.of(this,arguments);Qe?clearTimeout(Qe):(Gn.call(this),J=ft(te=oe||R.mouse(this)),ar(Jt)),Qe=setTimeout(function(){Qe=null,or(Jt)},50),q(),Kt(Math.pow(2,It()*.002)*F.k),qt(te,J),ur(Jt)}function gr(){var Jt=R.mouse(this),fr=Math.log(F.k)/Math.LN2;jt(this,Jt,ft(Jt),R.event.shiftKey?Math.ceil(fr)-1:Math.floor(fr)+1)}return R.rebind(mt,yt,"on")};var Wt=[0,1/0],It,vt;R.color=Yt;function Yt(){}Yt.prototype.toString=function(){return this.rgb()+""},R.hsl=Ft;function Ft(F,J,te){return this instanceof Ft?(this.h=+F,this.s=+J,void(this.l=+te)):arguments.length<2?F instanceof Ft?new Ft(F.h,F.s,F.l):Ct(""+F,Lt,Ft):new Ft(F,J,te)}var ye=Ft.prototype=new Yt;ye.brighter=function(F){return F=Math.pow(.7,arguments.length?F:1),new Ft(this.h,this.s,this.l/F)},ye.darker=function(F){return F=Math.pow(.7,arguments.length?F:1),new Ft(this.h,this.s,F*this.l)},ye.rgb=function(){return ge(this.h,this.s,this.l)};function ge(F,J,te){var oe,se;F=isNaN(F)?0:(F%=360)<0?F+360:F,J=isNaN(J)||J<0?0:J>1?1:J,te=te<0?0:te>1?1:te,se=te<=.5?te*(1+J):te+J-te*J,oe=2*te-se;function he(xe){return xe>360?xe-=360:xe<0&&(xe+=360),xe<60?oe+(se-oe)*xe/60:xe<180?se:xe<240?oe+(se-oe)*(240-xe)/60:oe}function Te(xe){return Math.round(he(xe)*255)}return new wt(Te(F+120),Te(F),Te(F-120))}R.hcl=Re;function Re(F,J,te){return this instanceof Re?(this.h=+F,this.c=+J,void(this.l=+te)):arguments.length<2?F instanceof Re?new Re(F.h,F.c,F.l):F instanceof je?Dt(F.l,F.a,F.b):Dt((F=At((F=R.rgb(F)).r,F.g,F.b)).l,F.a,F.b):new Re(F,J,te)}var ze=Re.prototype=new Yt;ze.brighter=function(F){return new Re(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?F:1)))},ze.darker=function(F){return new Re(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?F:1)))},ze.rgb=function(){return Ue(this.h,this.c,this.l).rgb()};function Ue(F,J,te){return isNaN(F)&&(F=0),isNaN(J)&&(J=0),new je(te,Math.cos(F*=He)*J,Math.sin(F)*J)}R.lab=je;function je(F,J,te){return this instanceof je?(this.l=+F,this.a=+J,void(this.b=+te)):arguments.length<2?F instanceof je?new je(F.l,F.a,F.b):F instanceof Re?Ue(F.h,F.c,F.l):At((F=wt(F)).r,F.g,F.b):new je(F,J,te)}var Ye=18,et=.95047,ot=1,_t=1.08883,Mt=je.prototype=new Yt;Mt.brighter=function(F){return new je(Math.min(100,this.l+Ye*(arguments.length?F:1)),this.a,this.b)},Mt.darker=function(F){return new je(Math.max(0,this.l-Ye*(arguments.length?F:1)),this.a,this.b)},Mt.rgb=function(){return St(this.l,this.a,this.b)};function St(F,J,te){var oe=(F+16)/116,se=oe+J/500,he=oe-te/200;return se=Ot(se)*et,oe=Ot(oe)*ot,he=Ot(he)*_t,new wt(er(3.2404542*se-1.5371385*oe-.4985314*he),er(-.969266*se+1.8760108*oe+.041556*he),er(.0556434*se-.2040259*oe+1.0572252*he))}function Dt(F,J,te){return F>0?new Re(Math.atan2(te,J)*Ne,Math.sqrt(J*J+te*te),F):new Re(NaN,NaN,F)}function Ot(F){return F>.206893034?F*F*F:(F-4/29)/7.787037}function Ht(F){return F>.008856?Math.pow(F,1/3):7.787037*F+4/29}function er(F){return Math.round(255*(F<=.00304?12.92*F:1.055*Math.pow(F,1/2.4)-.055))}R.rgb=wt;function wt(F,J,te){return this instanceof wt?(this.r=~~F,this.g=~~J,void(this.b=~~te)):arguments.length<2?F instanceof wt?new wt(F.r,F.g,F.b):Ct(""+F,wt,ge):new wt(F,J,te)}function Et(F){return new wt(F>>16,F>>8&255,F&255)}function zt(F){return Et(F)+""}var Ut=wt.prototype=new Yt;Ut.brighter=function(F){F=Math.pow(.7,arguments.length?F:1);var J=this.r,te=this.g,oe=this.b,se=30;return!J&&!te&&!oe?new wt(se,se,se):(J&&J<se&&(J=se),te&&te<se&&(te=se),oe&&oe<se&&(oe=se),new wt(Math.min(255,J/F),Math.min(255,te/F),Math.min(255,oe/F)))},Ut.darker=function(F){return F=Math.pow(.7,arguments.length?F:1),new wt(F*this.r,F*this.g,F*this.b)},Ut.hsl=function(){return Lt(this.r,this.g,this.b)},Ut.toString=function(){return"#"+pt(this.r)+pt(this.g)+pt(this.b)};function pt(F){return F<16?"0"+Math.max(0,F).toString(16):Math.min(255,F).toString(16)}function Ct(F,J,te){var oe=0,se=0,he=0,Te,xe,Ee;if(Te=/([a-z]+)\((.*)\)/.exec(F=F.toLowerCase()),Te)switch(xe=Te[2].split(","),Te[1]){case"hsl":return te(parseFloat(xe[0]),parseFloat(xe[1])/100,parseFloat(xe[2])/100);case"rgb":return J(Qt(xe[0]),Qt(xe[1]),Qt(xe[2]))}return(Ee=$t.get(F))?J(Ee.r,Ee.g,Ee.b):(F!=null&&F.charAt(0)==="#"&&!isNaN(Ee=parseInt(F.slice(1),16))&&(F.length===4?(oe=(Ee&3840)>>4,oe=oe>>4|oe,se=Ee&240,se=se>>4|se,he=Ee&15,he=he<<4|he):F.length===7&&(oe=(Ee&16711680)>>16,se=(Ee&65280)>>8,he=Ee&255)),J(oe,se,he))}function Lt(F,J,te){var oe=Math.min(F/=255,J/=255,te/=255),se=Math.max(F,J,te),he=se-oe,Te,xe,Ee=(se+oe)/2;return he?(xe=Ee<.5?he/(se+oe):he/(2-se-oe),F==se?Te=(J-te)/he+(J<te?6:0):J==se?Te=(te-F)/he+2:Te=(F-J)/he+4,Te*=60):(Te=NaN,xe=Ee>0&&Ee<1?0:Te),new Ft(Te,xe,Ee)}function At(F,J,te){F=Vt(F),J=Vt(J),te=Vt(te);var oe=Ht((.4124564*F+.3575761*J+.1804375*te)/et),se=Ht((.2126729*F+.7151522*J+.072175*te)/ot),he=Ht((.0193339*F+.119192*J+.9503041*te)/_t);return je(116*se-16,500*(oe-se),200*(se-he))}function Vt(F){return(F/=255)<=.04045?F/12.92:Math.pow((F+.055)/1.055,2.4)}function Qt(F){var J=parseFloat(F);return F.charAt(F.length-1)==="%"?Math.round(J*2.55):J}var $t=R.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$t.forEach(function(F,J){$t.set(F,Et(J))});function Pt(F){return typeof F=="function"?F:function(){return F}}R.functor=Pt,R.xhr=rr(P);function rr(F){return function(J,te,oe){return arguments.length===2&&typeof te=="function"&&(oe=te,te=null),ir(J,te,F,oe)}}function ir(F,J,te,oe){var se={},he=R.dispatch("beforesend","progress","load","error"),Te={},xe=new XMLHttpRequest,Ee=null;self.XDomainRequest&&!("withCredentials"in xe)&&/^(http(s)?:)?\/\//.test(F)&&(xe=new XDomainRequest),"onload"in xe?xe.onload=xe.onerror=De:xe.onreadystatechange=function(){xe.readyState>3&&De()};function De(){var Pe=xe.status,Qe;if(!Pe&&sr(xe)||Pe>=200&&Pe<300||Pe===304){try{Qe=te.call(se,xe)}catch($e){he.error.call(se,$e);return}he.load.call(se,Qe)}else he.error.call(se,xe)}return xe.onprogress=function(Pe){var Qe=R.event;R.event=Pe;try{he.progress.call(se,xe)}finally{R.event=Qe}},se.header=function(Pe,Qe){return Pe=(Pe+"").toLowerCase(),arguments.length<2?Te[Pe]:(Qe==null?delete Te[Pe]:Te[Pe]=Qe+"",se)},se.mimeType=function(Pe){return arguments.length?(J=Pe==null?null:Pe+"",se):J},se.responseType=function(Pe){return arguments.length?(Ee=Pe,se):Ee},se.response=function(Pe){return te=Pe,se},["get","post"].forEach(function(Pe){se[Pe]=function(){return se.send.apply(se,[Pe].concat(N(arguments)))}}),se.send=function(Pe,Qe,$e){if(arguments.length===2&&typeof Qe=="function"&&($e=Qe,Qe=null),xe.open(Pe,F,!0),J!=null&&!("accept"in Te)&&(Te.accept=J+",*/*"),xe.setRequestHeader)for(var ct in Te)xe.setRequestHeader(ct,Te[ct]);return J!=null&&xe.overrideMimeType&&xe.overrideMimeType(J),Ee!=null&&(xe.responseType=Ee),$e!=null&&se.on("error",$e).on("load",function(yt){$e(null,yt)}),he.beforesend.call(se,xe),xe.send(Qe??null),se},se.abort=function(){return xe.abort(),se},R.rebind(se,he,"on"),oe==null?se:se.get(tr(oe))}function tr(F){return F.length===1?function(J,te){F(J==null?te:null)}:F}function sr(F){var J=F.responseType;return J&&J!=="text"?F.response:F.responseText}R.dsv=function(F,J){var te=new RegExp('["'+F+`
]`),oe=F.charCodeAt(0);function se(De,Pe,Qe){arguments.length<3&&(Qe=Pe,Pe=null);var $e=ir(De,J,Pe==null?he:Te(Pe),Qe);return $e.row=function(ct){return arguments.length?$e.response((Pe=ct)==null?he:Te(ct)):Pe},$e}function he(De){return se.parse(De.responseText)}function Te(De){return function(Pe){return se.parse(Pe.responseText,De)}}se.parse=function(De,Pe){var Qe;return se.parseRows(De,function($e,ct){if(Qe)return Qe($e,ct-1);var yt=function(tt){for(var it={},lt=$e.length,gt=0;gt<lt;++gt)it[$e[gt]]=tt[gt];return it};Qe=Pe?function(tt,it){return Pe(yt(tt),it)}:yt})},se.parseRows=function(De,Pe){var Qe={},$e={},ct=[],yt=De.length,tt=0,it=0,lt,gt;function mt(){if(tt>=yt)return $e;if(gt)return gt=!1,Qe;var Nt=tt;if(De.charCodeAt(Nt)===34){for(var Kt=Nt;Kt++<yt;)if(De.charCodeAt(Kt)===34){if(De.charCodeAt(Kt+1)!==34)break;++Kt}tt=Kt+2;var qt=De.charCodeAt(Kt+1);return qt===13?(gt=!0,De.charCodeAt(Kt+2)===10&&++tt):qt===10&&(gt=!0),De.slice(Nt+1,Kt).replace(/""/g,'"')}for(;tt<yt;){var qt=De.charCodeAt(tt++),jt=1;if(qt===10)gt=!0;else if(qt===13)gt=!0,De.charCodeAt(tt)===10&&(++tt,++jt);else if(qt!==oe)continue;return De.slice(Nt,tt-jt)}return De.slice(Nt)}for(;(lt=mt())!==$e;){for(var ft=[];lt!==Qe&&lt!==$e;)ft.push(lt),lt=mt();Pe&&(ft=Pe(ft,it++))==null||ct.push(ft)}return ct},se.format=function(De){if(Array.isArray(De[0]))return se.formatRows(De);var Pe=new E,Qe=[];return De.forEach(function($e){for(var ct in $e)Pe.has(ct)||Qe.push(Pe.add(ct))}),[Qe.map(Ee).join(F)].concat(De.map(function($e){return Qe.map(function(ct){return Ee($e[ct])}).join(F)})).join(`
`)},se.formatRows=function(De){return De.map(xe).join(`
`)};function xe(De){return De.map(Ee).join(F)}function Ee(De){return te.test(De)?'"'+De.replace(/\"/g,'""')+'"':De}return se},R.csv=R.dsv(",","text/csv"),R.tsv=R.dsv("	","text/tab-separated-values");var cr,vr,mr,_r,wr=this[C(this,"requestAnimationFrame")]||function(F){setTimeout(F,17)};R.timer=function(){br.apply(this,arguments)};function br(F,J,te){var oe=arguments.length;oe<2&&(J=0),oe<3&&(te=Date.now());var se=te+J,he={c:F,t:se,n:null};return vr?vr.n=he:cr=he,vr=he,mr||(_r=clearTimeout(_r),mr=1,wr(Cr)),he}function Cr(){var F=Er(),J=jr()-F;J>24?(isFinite(J)&&(clearTimeout(_r),_r=setTimeout(Cr,J)),mr=0):(mr=1,wr(Cr))}R.timer.flush=function(){Er(),jr()};function Er(){for(var F=Date.now(),J=cr;J;)F>=J.t&&J.c(F-J.t)&&(J.c=null),J=J.n;return F}function jr(){for(var F,J=cr,te=1/0;J;)J.c?(J.t<te&&(te=J.t),J=(F=J).n):J=F?F.n=J.n:cr=J.n;return vr=F,te}R.round=function(F,J){return J?Math.round(F*(J=Math.pow(10,J)))/J:Math.round(F)},R.geom={};function zr(F){return F[0]}function an(F){return F[1]}R.geom.hull=function(F){var J=zr,te=an;if(arguments.length)return oe(F);function oe(se){if(se.length<3)return[];var he=Pt(J),Te=Pt(te),xe,Ee=se.length,De=[],Pe=[];for(xe=0;xe<Ee;xe++)De.push([+he.call(this,se[xe],xe),+Te.call(this,se[xe],xe),xe]);for(De.sort(Pr),xe=0;xe<Ee;xe++)Pe.push([De[xe][0],-De[xe][1]]);var Qe=cn(De),$e=cn(Pe),ct=$e[0]===Qe[0],yt=$e[$e.length-1]===Qe[Qe.length-1],tt=[];for(xe=Qe.length-1;xe>=0;--xe)tt.push(se[De[Qe[xe]][2]]);for(xe=+ct;xe<$e.length-yt;++xe)tt.push(se[De[$e[xe]][2]]);return tt}return oe.x=function(se){return arguments.length?(J=se,oe):J},oe.y=function(se){return arguments.length?(te=se,oe):te},oe};function cn(F){for(var J=F.length,te=[0,1],oe=2,se=2;se<J;se++){for(;oe>1&&at(F[te[oe-2]],F[te[oe-1]],F[se])<=0;)--oe;te[oe++]=se}return te.slice(0,oe)}function Pr(F,J){return F[0]-J[0]||F[1]-J[1]}R.geom.polygon=function(F){return O(F,Or),F};var Or=R.geom.polygon.prototype=[];Or.area=function(){for(var F=-1,J=this.length,te,oe=this[J-1],se=0;++F<J;)te=oe,oe=this[F],se+=te[1]*oe[0]-te[0]*oe[1];return se*.5},Or.centroid=function(F){var J=-1,te=this.length,oe=0,se=0,he,Te=this[te-1],xe;for(arguments.length||(F=-1/(6*this.area()));++J<te;)he=Te,Te=this[J],xe=he[0]*Te[1]-Te[0]*he[1],oe+=(he[0]+Te[0])*xe,se+=(he[1]+Te[1])*xe;return[oe*F,se*F]},Or.clip=function(F){for(var J,te=Sr(F),oe=-1,se=this.length-Sr(this),he,Te,xe=this[se-1],Ee,De,Pe;++oe<se;){for(J=F.slice(),F.length=0,Ee=this[oe],De=J[(Te=J.length-te)-1],he=-1;++he<Te;)Pe=J[he],qr(Pe,xe,Ee)?(qr(De,xe,Ee)||F.push(Kr(De,Pe,xe,Ee)),F.push(Pe)):qr(De,xe,Ee)&&F.push(Kr(De,Pe,xe,Ee)),De=Pe;te&&F.push(F[0]),xe=Ee}return F};function qr(F,J,te){return(te[0]-J[0])*(F[1]-J[1])<(te[1]-J[1])*(F[0]-J[0])}function Kr(F,J,te,oe){var se=F[0],he=te[0],Te=J[0]-se,xe=oe[0]-he,Ee=F[1],De=te[1],Pe=J[1]-Ee,Qe=oe[1]-De,$e=(xe*(Ee-De)-Qe*(se-he))/(Qe*Te-xe*Pe);return[se+$e*Te,Ee+$e*Pe]}function Sr(F){var J=F[0],te=F[F.length-1];return!(J[0]-te[0]||J[1]-te[1])}var Tr,Br,Qr,en=[],hn,tn,mn=[];function Sn(){Rn(this),this.edge=this.site=this.circle=null}function Ta(F){var J=en.pop()||new Sn;return J.site=F,J}function Zn(F){dn(F),Qr.remove(F),en.push(F),Rn(F)}function Bi(F){var J=F.circle,te=J.x,oe=J.cy,se={x:te,y:oe},he=F.P,Te=F.N,xe=[F];Zn(F);for(var Ee=he;Ee.circle&&f(te-Ee.circle.x)<Le&&f(oe-Ee.circle.cy)<Le;)he=Ee.P,xe.unshift(Ee),Zn(Ee),Ee=he;xe.unshift(Ee),dn(Ee);for(var De=Te;De.circle&&f(te-De.circle.x)<Le&&f(oe-De.circle.cy)<Le;)Te=De.N,xe.push(De),Zn(De),De=Te;xe.push(De),dn(De);var Pe=xe.length,Qe;for(Qe=1;Qe<Pe;++Qe)De=xe[Qe],Ee=xe[Qe-1],En(De.edge,Ee.site,De.site,se);Ee=xe[0],De=xe[Pe-1],De.edge=bn(Ee.site,De.site,null,se),vn(Ee),vn(De)}function Ui(F){for(var J=F.x,te=F.y,oe,se,he,Te,xe=Qr._;xe;)if(he=Ma(xe,te)-J,he>Le)xe=xe.L;else if(Te=J-Hi(xe,te),Te>Le){if(!xe.R){oe=xe;break}xe=xe.R}else{he>-Le?(oe=xe.P,se=xe):Te>-Le?(oe=xe,se=xe.N):oe=se=xe;break}var Ee=Ta(F);if(Qr.insert(oe,Ee),!(!oe&&!se)){if(oe===se){dn(oe),se=Ta(oe.site),Qr.insert(Ee,se),Ee.edge=se.edge=bn(oe.site,Ee.site),vn(oe),vn(se);return}if(!se){Ee.edge=bn(oe.site,Ee.site);return}dn(oe),dn(se);var De=oe.site,Pe=De.x,Qe=De.y,$e=F.x-Pe,ct=F.y-Qe,yt=se.site,tt=yt.x-Pe,it=yt.y-Qe,lt=2*($e*it-ct*tt),gt=$e*$e+ct*ct,mt=tt*tt+it*it,ft={x:(it*gt-ct*mt)/lt+Pe,y:($e*mt-tt*gt)/lt+Qe};En(se.edge,De,yt,ft),Ee.edge=bn(De,F,null,ft),se.edge=bn(F,yt,null,ft),vn(oe),vn(se)}}function Ma(F,J){var te=F.site,oe=te.x,se=te.y,he=se-J;if(!he)return oe;var Te=F.P;if(!Te)return-1/0;te=Te.site;var xe=te.x,Ee=te.y,De=Ee-J;if(!De)return xe;var Pe=xe-oe,Qe=1/he-1/De,$e=Pe/De;return Qe?(-$e+Math.sqrt($e*$e-2*Qe*(Pe*Pe/(-2*De)-Ee+De/2+se-he/2)))/Qe+oe:(oe+xe)/2}function Hi(F,J){var te=F.N;if(te)return Ma(te,J);var oe=F.site;return oe.y===J?oe.x:1/0}function Aa(F){this.site=F,this.edges=[]}Aa.prototype.prepare=function(){for(var F=this.edges,J=F.length,te;J--;)te=F[J].edge,(!te.b||!te.a)&&F.splice(J,1);return F.sort(ka),F.length};function Gi(F){for(var J=F[0][0],te=F[1][0],oe=F[0][1],se=F[1][1],he,Te,xe,Ee,De=Br,Pe=De.length,Qe,$e,ct,yt,tt,it;Pe--;)if(Qe=De[Pe],!(!Qe||!Qe.prepare()))for(ct=Qe.edges,yt=ct.length,$e=0;$e<yt;)it=ct[$e].end(),xe=it.x,Ee=it.y,tt=ct[++$e%yt].start(),he=tt.x,Te=tt.y,(f(xe-he)>Le||f(Ee-Te)>Le)&&(ct.splice($e,0,new Ln(Zi(Qe.site,it,f(xe-J)<Le&&se-Ee>Le?{x:J,y:f(he-J)<Le?Te:se}:f(Ee-se)<Le&&te-xe>Le?{x:f(Te-se)<Le?he:te,y:se}:f(xe-te)<Le&&Ee-oe>Le?{x:te,y:f(he-te)<Le?Te:oe}:f(Ee-oe)<Le&&xe-J>Le?{x:f(Te-oe)<Le?he:J,y:oe}:null),Qe.site,null)),++yt)}function ka(F,J){return J.angle-F.angle}function Vi(){Rn(this),this.x=this.y=this.arc=this.site=this.cy=null}function vn(F){var J=F.P,te=F.N;if(!(!J||!te)){var oe=J.site,se=F.site,he=te.site;if(oe!==he){var Te=se.x,xe=se.y,Ee=oe.x-Te,De=oe.y-xe,Pe=he.x-Te,it=he.y-xe,Qe=2*(Ee*it-De*Pe);if(!(Qe>=-Be)){var $e=Ee*Ee+De*De,ct=Pe*Pe+it*it,yt=(it*$e-De*ct)/Qe,tt=(Ee*ct-Pe*$e)/Qe,it=tt+xe,lt=mn.pop()||new Vi;lt.arc=F,lt.site=se,lt.x=yt+Te,lt.y=it+Math.sqrt(yt*yt+tt*tt),lt.cy=it,F.circle=lt;for(var gt=null,mt=tn._;mt;)if(lt.y<mt.y||lt.y===mt.y&&lt.x<=mt.x)if(mt.L)mt=mt.L;else{gt=mt.P;break}else if(mt.R)mt=mt.R;else{gt=mt;break}tn.insert(gt,lt),gt||(hn=lt)}}}}function dn(F){var J=F.circle;J&&(J.P||(hn=J.N),tn.remove(J),mn.push(J),Rn(J),F.circle=null)}function Yi(F,J,te,oe){return function(se){var he=se.a,Te=se.b,xe=he.x,Ee=he.y,De=Te.x,Pe=Te.y,Qe=0,$e=1,ct=De-xe,yt=Pe-Ee,tt;if(tt=F-xe,!(!ct&&tt>0)){if(tt/=ct,ct<0){if(tt<Qe)return;tt<$e&&($e=tt)}else if(ct>0){if(tt>$e)return;tt>Qe&&(Qe=tt)}if(tt=te-xe,!(!ct&&tt<0)){if(tt/=ct,ct<0){if(tt>$e)return;tt>Qe&&(Qe=tt)}else if(ct>0){if(tt<Qe)return;tt<$e&&($e=tt)}if(tt=J-Ee,!(!yt&&tt>0)){if(tt/=yt,yt<0){if(tt<Qe)return;tt<$e&&($e=tt)}else if(yt>0){if(tt>$e)return;tt>Qe&&(Qe=tt)}if(tt=oe-Ee,!(!yt&&tt<0)){if(tt/=yt,yt<0){if(tt>$e)return;tt>Qe&&(Qe=tt)}else if(yt>0){if(tt<Qe)return;tt<$e&&($e=tt)}return Qe>0&&(se.a={x:xe+Qe*ct,y:Ee+Qe*yt}),$e<1&&(se.b={x:xe+$e*ct,y:Ee+$e*yt}),se}}}}}}function Wi(F){for(var J=Tr,te=Yi(F[0][0],F[0][1],F[1][0],F[1][1]),oe=J.length,se;oe--;)se=J[oe],(!Xi(se,F)||!te(se)||f(se.a.x-se.b.x)<Le&&f(se.a.y-se.b.y)<Le)&&(se.a=se.b=null,J.splice(oe,1))}function Xi(F,J){var te=F.b;if(te)return!0;var oe=F.a,se=J[0][0],he=J[1][0],Te=J[0][1],xe=J[1][1],Ee=F.l,De=F.r,Pe=Ee.x,Qe=Ee.y,$e=De.x,ct=De.y,yt=(Pe+$e)/2,tt=(Qe+ct)/2,it,lt;if(ct===Qe){if(yt<se||yt>=he)return;if(Pe>$e){if(!oe)oe={x:yt,y:Te};else if(oe.y>=xe)return;te={x:yt,y:xe}}else{if(!oe)oe={x:yt,y:xe};else if(oe.y<Te)return;te={x:yt,y:Te}}}else if(it=(Pe-$e)/(ct-Qe),lt=tt-it*yt,it<-1||it>1)if(Pe>$e){if(!oe)oe={x:(Te-lt)/it,y:Te};else if(oe.y>=xe)return;te={x:(xe-lt)/it,y:xe}}else{if(!oe)oe={x:(xe-lt)/it,y:xe};else if(oe.y<Te)return;te={x:(Te-lt)/it,y:Te}}else if(Qe<ct){if(!oe)oe={x:se,y:it*se+lt};else if(oe.x>=he)return;te={x:he,y:it*he+lt}}else{if(!oe)oe={x:he,y:it*he+lt};else if(oe.x<se)return;te={x:se,y:it*se+lt}}return F.a=oe,F.b=te,!0}function Ca(F,J){this.l=F,this.r=J,this.a=this.b=null}function bn(F,J,te,oe){var se=new Ca(F,J);return Tr.push(se),te&&En(se,F,J,te),oe&&En(se,J,F,oe),Br[F.i].edges.push(new Ln(se,F,J)),Br[J.i].edges.push(new Ln(se,J,F)),se}function Zi(F,J,te){var oe=new Ca(F,null);return oe.a=J,oe.b=te,Tr.push(oe),oe}function En(F,J,te,oe){!F.a&&!F.b?(F.a=oe,F.l=J,F.r=te):F.l===te?F.b=oe:F.a=oe}function Ln(F,J,te){var oe=F.a,se=F.b;this.edge=F,this.site=J,this.angle=te?Math.atan2(te.y-J.y,te.x-J.x):F.l===J?Math.atan2(se.x-oe.x,oe.y-se.y):Math.atan2(oe.x-se.x,se.y-oe.y)}Ln.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Jn(){this._=null}function Rn(F){F.U=F.C=F.L=F.R=F.P=F.N=null}Jn.prototype={insert:function(F,J){var te,oe,se;if(F){if(J.P=F,J.N=F.N,F.N&&(F.N.P=J),F.N=J,F.R){for(F=F.R;F.L;)F=F.L;F.L=J}else F.R=J;te=F}else this._?(F=Sa(this._),J.P=null,J.N=F,F.P=F.L=J,te=F):(J.P=J.N=null,this._=J,te=null);for(J.L=J.R=null,J.U=te,J.C=!0,F=J;te&&te.C;)oe=te.U,te===oe.L?(se=oe.R,se&&se.C?(te.C=se.C=!1,oe.C=!0,F=oe):(F===te.R&&(xn(this,te),F=te,te=F.U),te.C=!1,oe.C=!0,_n(this,oe))):(se=oe.L,se&&se.C?(te.C=se.C=!1,oe.C=!0,F=oe):(F===te.L&&(_n(this,te),F=te,te=F.U),te.C=!1,oe.C=!0,xn(this,oe))),te=F.U;this._.C=!1},remove:function(F){F.N&&(F.N.P=F.P),F.P&&(F.P.N=F.N),F.N=F.P=null;var J=F.U,te,oe=F.L,se=F.R,he,Te;if(oe?se?he=Sa(se):he=oe:he=se,J?J.L===F?J.L=he:J.R=he:this._=he,oe&&se?(Te=he.C,he.C=F.C,he.L=oe,oe.U=he,he!==se?(J=he.U,he.U=F.U,F=he.R,J.L=F,he.R=se,se.U=he):(he.U=J,J=he,F=he.R)):(Te=F.C,F=he),F&&(F.U=J),!Te){if(F&&F.C){F.C=!1;return}do{if(F===this._)break;if(F===J.L){if(te=J.R,te.C&&(te.C=!1,J.C=!0,xn(this,J),te=J.R),te.L&&te.L.C||te.R&&te.R.C){(!te.R||!te.R.C)&&(te.L.C=!1,te.C=!0,_n(this,te),te=J.R),te.C=J.C,J.C=te.R.C=!1,xn(this,J),F=this._;break}}else if(te=J.L,te.C&&(te.C=!1,J.C=!0,_n(this,J),te=J.L),te.L&&te.L.C||te.R&&te.R.C){(!te.L||!te.L.C)&&(te.R.C=!1,te.C=!0,xn(this,te),te=J.L),te.C=J.C,J.C=te.L.C=!1,_n(this,J),F=this._;break}te.C=!0,F=J,J=J.U}while(!F.C);F&&(F.C=!1)}}};function xn(F,J){var te=J,oe=J.R,se=te.U;se?se.L===te?se.L=oe:se.R=oe:F._=oe,oe.U=se,te.U=oe,te.R=oe.L,te.R&&(te.R.U=te),oe.L=te}function _n(F,J){var te=J,oe=J.L,se=te.U;se?se.L===te?se.L=oe:se.R=oe:F._=oe,oe.U=se,te.U=oe,te.L=oe.R,te.L&&(te.L.U=te),oe.R=te}function Sa(F){for(;F.L;)F=F.L;return F}function Kn(F,J){var te=F.sort(Ji).pop(),oe,se,he;for(Tr=[],Br=new Array(F.length),Qr=new Jn,tn=new Jn;;)if(he=hn,te&&(!he||te.y<he.y||te.y===he.y&&te.x<he.x))(te.x!==oe||te.y!==se)&&(Br[te.i]=new Aa(te),Ui(te),oe=te.x,se=te.y),te=F.pop();else if(he)Bi(he.arc);else break;J&&(Wi(J),Gi(J));var Te={cells:Br,edges:Tr};return Qr=tn=Tr=Br=null,Te}function Ji(F,J){return J.y-F.y||J.x-F.x}R.geom.voronoi=function(F){var J=zr,te=an,oe=J,se=te,he=Dn;if(F)return Te(F);function Te(Ee){var De=new Array(Ee.length),Pe=he[0][0],Qe=he[0][1],$e=he[1][0],ct=he[1][1];return Kn(xe(Ee),he).cells.forEach(function(yt,tt){var it=yt.edges,lt=yt.site,gt=De[tt]=it.length?it.map(function(mt){var ft=mt.start();return[ft.x,ft.y]}):lt.x>=Pe&&lt.x<=$e&&lt.y>=Qe&&lt.y<=ct?[[Pe,ct],[$e,ct],[$e,Qe],[Pe,Qe]]:[];gt.point=Ee[tt]}),De}function xe(Ee){return Ee.map(function(De,Pe){return{x:Math.round(oe(De,Pe)/Le)*Le,y:Math.round(se(De,Pe)/Le)*Le,i:Pe}})}return Te.links=function(Ee){return Kn(xe(Ee)).edges.filter(function(De){return De.l&&De.r}).map(function(De){return{source:Ee[De.l.i],target:Ee[De.r.i]}})},Te.triangles=function(Ee){var De=[];return Kn(xe(Ee)).cells.forEach(function(Pe,Qe){for(var $e=Pe.site,ct=Pe.edges.sort(ka),yt=-1,tt=ct.length,it,lt,gt=ct[tt-1].edge,mt=gt.l===$e?gt.r:gt.l;++yt<tt;)it=gt,lt=mt,gt=ct[yt].edge,mt=gt.l===$e?gt.r:gt.l,Qe<lt.i&&Qe<mt.i&&Ki($e,lt,mt)<0&&De.push([Ee[Qe],Ee[lt.i],Ee[mt.i]])}),De},Te.x=function(Ee){return arguments.length?(oe=Pt(J=Ee),Te):J},Te.y=function(Ee){return arguments.length?(se=Pt(te=Ee),Te):te},Te.clipExtent=function(Ee){return arguments.length?(he=Ee??Dn,Te):he===Dn?null:he},Te.size=function(Ee){return arguments.length?Te.clipExtent(Ee&&[[0,0],Ee]):he===Dn?null:he&&he[1]},Te};var Dn=[[-1e6,-1e6],[1e6,1e6]];function Ki(F,J,te){return(F.x-te.x)*(J.y-F.y)-(F.x-J.x)*(te.y-F.y)}R.geom.delaunay=function(F){return R.geom.voronoi().triangles(F)},R.geom.quadtree=function(F,J,te,oe,se){var he=zr,Te=an,xe;if(xe=arguments.length)return he=Qi,Te=$i,xe===3&&(se=te,oe=J,te=J=0),Ee(F);function Ee(De){var Pe,Qe=Pt(he),$e=Pt(Te),ct,yt,tt,it,lt,gt,mt,ft;if(J!=null)lt=J,gt=te,mt=oe,ft=se;else if(mt=ft=-(lt=gt=1/0),ct=[],yt=[],it=De.length,xe)for(tt=0;tt<it;++tt)Pe=De[tt],Pe.x<lt&&(lt=Pe.x),Pe.y<gt&&(gt=Pe.y),Pe.x>mt&&(mt=Pe.x),Pe.y>ft&&(ft=Pe.y),ct.push(Pe.x),yt.push(Pe.y);else for(tt=0;tt<it;++tt){var Nt=+Qe(Pe=De[tt],tt),Kt=+$e(Pe,tt);Nt<lt&&(lt=Nt),Kt<gt&&(gt=Kt),Nt>mt&&(mt=Nt),Kt>ft&&(ft=Kt),ct.push(Nt),yt.push(Kt)}var qt=mt-lt,jt=ft-gt;qt>jt?ft=gt+qt:mt=lt+jt;function nr(or,lr,dr,Mr,gr,Jt,fr,hr){if(!(isNaN(dr)||isNaN(Mr)))if(or.leaf){var pr=or.x,xr=or.y;if(pr!=null)if(f(pr-dr)+f(xr-Mr)<.01)ar(or,lr,dr,Mr,gr,Jt,fr,hr);else{var kr=or.point;or.x=or.y=or.point=null,ar(or,kr,pr,xr,gr,Jt,fr,hr),ar(or,lr,dr,Mr,gr,Jt,fr,hr)}else or.x=dr,or.y=Mr,or.point=lr}else ar(or,lr,dr,Mr,gr,Jt,fr,hr)}function ar(or,lr,dr,Mr,gr,Jt,fr,hr){var pr=(gr+fr)*.5,xr=(Jt+hr)*.5,kr=dr>=pr,Lr=Mr>=xr,Ir=Lr<<1|kr;or.leaf=!1,or=or.nodes[Ir]||(or.nodes[Ir]=Ea()),kr?gr=pr:fr=pr,Lr?Jt=xr:hr=xr,nr(or,lr,dr,Mr,gr,Jt,fr,hr)}var ur=Ea();if(ur.add=function(or){nr(ur,or,+Qe(or,++tt),+$e(or,tt),lt,gt,mt,ft)},ur.visit=function(or){wn(or,ur,lt,gt,mt,ft)},ur.find=function(or){return ji(ur,or[0],or[1],lt,gt,mt,ft)},tt=-1,J==null){for(;++tt<it;)nr(ur,De[tt],ct[tt],yt[tt],lt,gt,mt,ft);--tt}else De.forEach(ur.add);return ct=yt=De=Pe=null,ur}return Ee.x=function(De){return arguments.length?(he=De,Ee):he},Ee.y=function(De){return arguments.length?(Te=De,Ee):Te},Ee.extent=function(De){return arguments.length?(De==null?J=te=oe=se=null:(J=+De[0][0],te=+De[0][1],oe=+De[1][0],se=+De[1][1]),Ee):J==null?null:[[J,te],[oe,se]]},Ee.size=function(De){return arguments.length?(De==null?J=te=oe=se=null:(J=te=0,oe=+De[0],se=+De[1]),Ee):J==null?null:[oe-J,se-te]},Ee};function Qi(F){return F.x}function $i(F){return F.y}function Ea(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function wn(F,J,te,oe,se,he){if(!F(J,te,oe,se,he)){var Te=(te+se)*.5,xe=(oe+he)*.5,Ee=J.nodes;Ee[0]&&wn(F,Ee[0],te,oe,Te,xe),Ee[1]&&wn(F,Ee[1],Te,oe,se,xe),Ee[2]&&wn(F,Ee[2],te,xe,Te,he),Ee[3]&&wn(F,Ee[3],Te,xe,se,he)}}function ji(F,J,te,oe,se,he,Te){var xe=1/0,Ee;return function De(Pe,Qe,$e,ct,yt){if(!(Qe>he||$e>Te||ct<oe||yt<se)){if(tt=Pe.point){var tt,it=J-Pe.x,lt=te-Pe.y,gt=it*it+lt*lt;if(gt<xe){var mt=Math.sqrt(xe=gt);oe=J-mt,se=te-mt,he=J+mt,Te=te+mt,Ee=tt}}for(var ft=Pe.nodes,Nt=(Qe+ct)*.5,Kt=($e+yt)*.5,qt=J>=Nt,jt=te>=Kt,nr=jt<<1|qt,ar=nr+4;nr<ar;++nr)if(Pe=ft[nr&3])switch(nr&3){case 0:De(Pe,Qe,$e,Nt,Kt);break;case 1:De(Pe,Nt,$e,ct,Kt);break;case 2:De(Pe,Qe,Kt,Nt,yt);break;case 3:De(Pe,Nt,Kt,ct,yt);break}}}(F,oe,se,he,Te),Ee}R.interpolateRgb=Qn;function Qn(F,J){F=R.rgb(F),J=R.rgb(J);var te=F.r,oe=F.g,se=F.b,he=J.r-te,Te=J.g-oe,xe=J.b-se;return function(Ee){return"#"+pt(Math.round(te+he*Ee))+pt(Math.round(oe+Te*Ee))+pt(Math.round(se+xe*Ee))}}R.interpolateObject=La;function La(F,J){var te={},oe={},se;for(se in F)se in J?te[se]=on(F[se],J[se]):oe[se]=F[se];for(se in J)se in F||(oe[se]=J[se]);return function(he){for(se in te)oe[se]=te[se](he);return oe}}R.interpolateNumber=$r;function $r(F,J){return F=+F,J=+J,function(te){return F*(1-te)+J*te}}R.interpolateString=Ra;function Ra(F,J){var te=$n.lastIndex=jn.lastIndex=0,oe,se,he,Te=-1,xe=[],Ee=[];for(F=F+"",J=J+"";(oe=$n.exec(F))&&(se=jn.exec(J));)(he=se.index)>te&&(he=J.slice(te,he),xe[Te]?xe[Te]+=he:xe[++Te]=he),(oe=oe[0])===(se=se[0])?xe[Te]?xe[Te]+=se:xe[++Te]=se:(xe[++Te]=null,Ee.push({i:Te,x:$r(oe,se)})),te=jn.lastIndex;return te<J.length&&(he=J.slice(te),xe[Te]?xe[Te]+=he:xe[++Te]=he),xe.length<2?Ee[0]?(J=Ee[0].x,function(De){return J(De)+""}):function(){return J}:(J=Ee.length,function(De){for(var Pe=0,Qe;Pe<J;++Pe)xe[(Qe=Ee[Pe]).i]=Qe.x(De);return xe.join("")})}var $n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jn=new RegExp($n.source,"g");R.interpolate=on;function on(F,J){for(var te=R.interpolators.length,oe;--te>=0&&!(oe=R.interpolators[te](F,J)););return oe}R.interpolators=[function(F,J){var te=typeof J;return(te==="string"?$t.has(J.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(J)?Qn:Ra:J instanceof Yt?Qn:Array.isArray(J)?Pn:te==="object"&&isNaN(J)?La:$r)(F,J)}],R.interpolateArray=Pn;function Pn(F,J){var te=[],oe=[],se=F.length,he=J.length,Te=Math.min(F.length,J.length),xe;for(xe=0;xe<Te;++xe)te.push(on(F[xe],J[xe]));for(;xe<se;++xe)oe[xe]=F[xe];for(;xe<he;++xe)oe[xe]=J[xe];return function(Ee){for(xe=0;xe<Te;++xe)oe[xe]=te[xe](Ee);return oe}}var Da=function(){return P},qi=R.map({linear:Da,poly:io,quad:function(){return ro},cubic:function(){return no},sin:function(){return oo},exp:function(){return so},circle:function(){return lo},elastic:uo,back:fo,bounce:function(){return co}}),eo=R.map({in:P,out:Pa,"in-out":Ia,"out-in":function(F){return Ia(Pa(F))}});R.ease=function(F){var J=F.indexOf("-"),te=J>=0?F.slice(0,J):F,oe=J>=0?F.slice(J+1):"in";return te=qi.get(te)||Da,oe=eo.get(oe)||P,to(oe(te.apply(null,L.call(arguments,1))))};function to(F){return function(J){return J<=0?0:J>=1?1:F(J)}}function Pa(F){return function(J){return 1-F(1-J)}}function Ia(F){return function(J){return .5*(J<.5?F(2*J):2-F(2-2*J))}}function ro(F){return F*F}function no(F){return F*F*F}function ao(F){if(F<=0)return 0;if(F>=1)return 1;var J=F*F,te=J*F;return 4*(F<.5?te:3*(F-J)+te-.75)}function io(F){return function(J){return Math.pow(J,F)}}function oo(F){return 1-Math.cos(F*Se)}function so(F){return Math.pow(2,10*(F-1))}function lo(F){return 1-Math.sqrt(1-F*F)}function uo(F,J){var te;return arguments.length<2&&(J=.45),arguments.length?te=J/Ae*Math.asin(1/F):(F=1,te=J/4),function(oe){return 1+F*Math.pow(2,-10*oe)*Math.sin((oe-te)*Ae/J)}}function fo(F){return F||(F=1.70158),function(J){return J*J*((F+1)*J-F)}}function co(F){return F<1/2.75?7.5625*F*F:F<2/2.75?7.5625*(F-=1.5/2.75)*F+.75:F<2.5/2.75?7.5625*(F-=2.25/2.75)*F+.9375:7.5625*(F-=2.625/2.75)*F+.984375}R.interpolateHcl=ho;function ho(F,J){F=R.hcl(F),J=R.hcl(J);var te=F.h,oe=F.c,se=F.l,he=J.h-te,Te=J.c-oe,xe=J.l-se;return isNaN(Te)&&(Te=0,oe=isNaN(oe)?J.c:oe),isNaN(he)?(he=0,te=isNaN(te)?J.h:te):he>180?he-=360:he<-180&&(he+=360),function(Ee){return Ue(te+he*Ee,oe+Te*Ee,se+xe*Ee)+""}}R.interpolateHsl=vo;function vo(F,J){F=R.hsl(F),J=R.hsl(J);var te=F.h,oe=F.s,se=F.l,he=J.h-te,Te=J.s-oe,xe=J.l-se;return isNaN(Te)&&(Te=0,oe=isNaN(oe)?J.s:oe),isNaN(he)?(he=0,te=isNaN(te)?J.h:te):he>180?he-=360:he<-180&&(he+=360),function(Ee){return ge(te+he*Ee,oe+Te*Ee,se+xe*Ee)+""}}R.interpolateLab=po;function po(F,J){F=R.lab(F),J=R.lab(J);var te=F.l,oe=F.a,se=F.b,he=J.l-te,Te=J.a-oe,xe=J.b-se;return function(Ee){return St(te+he*Ee,oe+Te*Ee,se+xe*Ee)+""}}R.interpolateRound=Fa;function Fa(F,J){return J-=F,function(te){return Math.round(F+J*te)}}R.transform=function(F){var J=D.createElementNS(R.ns.prefix.svg,"g");return(R.transform=function(te){if(te!=null){J.setAttribute("transform",te);var oe=J.transform.baseVal.consolidate()}return new Na(oe?oe.matrix:yo)})(F)};function Na(F){var J=[F.a,F.b],te=[F.c,F.d],oe=Oa(J),se=za(J,te),he=Oa(go(te,J,-se))||0;J[0]*te[1]<te[0]*J[1]&&(J[0]*=-1,J[1]*=-1,oe*=-1,se*=-1),this.rotate=(oe?Math.atan2(J[1],J[0]):Math.atan2(-te[0],te[1]))*Ne,this.translate=[F.e,F.f],this.scale=[oe,he],this.skew=he?Math.atan2(se,he)*Ne:0}Na.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function za(F,J){return F[0]*J[0]+F[1]*J[1]}function Oa(F){var J=Math.sqrt(za(F,F));return J&&(F[0]/=J,F[1]/=J),J}function go(F,J,te){return F[0]+=te*J[0],F[1]+=te*J[1],F}var yo={a:1,b:0,c:0,d:1,e:0,f:0};R.interpolateTransform=Ba;function pn(F){return F.length?F.pop()+",":""}function mo(F,J,te,oe){if(F[0]!==J[0]||F[1]!==J[1]){var se=te.push("translate(",null,",",null,")");oe.push({i:se-4,x:$r(F[0],J[0])},{i:se-2,x:$r(F[1],J[1])})}else(J[0]||J[1])&&te.push("translate("+J+")")}function bo(F,J,te,oe){F!==J?(F-J>180?J+=360:J-F>180&&(F+=360),oe.push({i:te.push(pn(te)+"rotate(",null,")")-2,x:$r(F,J)})):J&&te.push(pn(te)+"rotate("+J+")")}function xo(F,J,te,oe){F!==J?oe.push({i:te.push(pn(te)+"skewX(",null,")")-2,x:$r(F,J)}):J&&te.push(pn(te)+"skewX("+J+")")}function _o(F,J,te,oe){if(F[0]!==J[0]||F[1]!==J[1]){var se=te.push(pn(te)+"scale(",null,",",null,")");oe.push({i:se-4,x:$r(F[0],J[0])},{i:se-2,x:$r(F[1],J[1])})}else(J[0]!==1||J[1]!==1)&&te.push(pn(te)+"scale("+J+")")}function Ba(F,J){var te=[],oe=[];return F=R.transform(F),J=R.transform(J),mo(F.translate,J.translate,te,oe),bo(F.rotate,J.rotate,te,oe),xo(F.skew,J.skew,te,oe),_o(F.scale,J.scale,te,oe),F=J=null,function(se){for(var he=-1,Te=oe.length,xe;++he<Te;)te[(xe=oe[he]).i]=xe.x(se);return te.join("")}}function wo(F,J){return J=(J-=F=+F)||1/J,function(te){return(te-F)/J}}function To(F,J){return J=(J-=F=+F)||1/J,function(te){return Math.max(0,Math.min(1,(te-F)/J))}}R.layout={},R.layout.bundle=function(){return function(F){for(var J=[],te=-1,oe=F.length;++te<oe;)J.push(Mo(F[te]));return J}};function Mo(F){for(var J=F.source,te=F.target,oe=Ao(J,te),se=[J];J!==oe;)J=J.parent,se.push(J);for(var he=se.length;te!==oe;)se.splice(he,0,te),te=te.parent;return se}function Ua(F){for(var J=[],te=F.parent;te!=null;)J.push(F),F=te,te=te.parent;return J.push(F),J}function Ao(F,J){if(F===J)return F;for(var te=Ua(F),oe=Ua(J),se=te.pop(),he=oe.pop(),Te=null;se===he;)Te=se,se=te.pop(),he=oe.pop();return Te}R.layout.chord=function(){var F={},J,te,oe,se,he=0,Te,xe,Ee;function De(){var Qe={},$e=[],ct=R.range(se),yt=[],tt,it,lt,gt,mt;for(J=[],te=[],tt=0,gt=-1;++gt<se;){for(it=0,mt=-1;++mt<se;)it+=oe[gt][mt];$e.push(it),yt.push(R.range(se)),tt+=it}for(Te&&ct.sort(function(ur,or){return Te($e[ur],$e[or])}),xe&&yt.forEach(function(ur,or){ur.sort(function(lr,dr){return xe(oe[or][lr],oe[or][dr])})}),tt=(Ae-he*se)/tt,it=0,gt=-1;++gt<se;){for(lt=it,mt=-1;++mt<se;){var ft=ct[gt],Nt=yt[ft][mt],Kt=oe[ft][Nt],qt=it,jt=it+=Kt*tt;Qe[ft+"-"+Nt]={index:ft,subindex:Nt,startAngle:qt,endAngle:jt,value:Kt}}te[ft]={index:ft,startAngle:lt,endAngle:it,value:$e[ft]},it+=he}for(gt=-1;++gt<se;)for(mt=gt-1;++mt<se;){var nr=Qe[gt+"-"+mt],ar=Qe[mt+"-"+gt];(nr.value||ar.value)&&J.push(nr.value<ar.value?{source:ar,target:nr}:{source:nr,target:ar})}Ee&&Pe()}function Pe(){J.sort(function(Qe,$e){return Ee((Qe.source.value+Qe.target.value)/2,($e.source.value+$e.target.value)/2)})}return F.matrix=function(Qe){return arguments.length?(se=(oe=Qe)&&oe.length,J=te=null,F):oe},F.padding=function(Qe){return arguments.length?(he=Qe,J=te=null,F):he},F.sortGroups=function(Qe){return arguments.length?(Te=Qe,J=te=null,F):Te},F.sortSubgroups=function(Qe){return arguments.length?(xe=Qe,J=null,F):xe},F.sortChords=function(Qe){return arguments.length?(Ee=Qe,J&&Pe(),F):Ee},F.chords=function(){return J||De(),J},F.groups=function(){return te||De(),te},F},R.layout.force=function(){var F={},J=R.dispatch("start","tick","end"),te,oe=[1,1],se,he,Te=.9,xe=Lo,Ee=Ro,De=-30,Pe=Do,Qe=.1,$e=.64,ct=[],yt=[],tt,it,lt;function gt(ft){return function(Nt,Kt,qt,jt){if(Nt.point!==ft){var nr=Nt.cx-ft.x,ar=Nt.cy-ft.y,ur=jt-Kt,or=nr*nr+ar*ar;if(ur*ur/$e<or){if(or<Pe){var lr=Nt.charge/or;ft.px-=nr*lr,ft.py-=ar*lr}return!0}if(Nt.point&&or&&or<Pe){var lr=Nt.pointCharge/or;ft.px-=nr*lr,ft.py-=ar*lr}}return!Nt.charge}}F.tick=function(){if((he*=.99)<.005)return te=null,J.end({type:"end",alpha:he=0}),!0;var ft=ct.length,Nt=yt.length,Kt,qt,jt,nr,ar,ur,or,lr,dr;for(qt=0;qt<Nt;++qt)jt=yt[qt],nr=jt.source,ar=jt.target,lr=ar.x-nr.x,dr=ar.y-nr.y,(ur=lr*lr+dr*dr)&&(ur=he*it[qt]*((ur=Math.sqrt(ur))-tt[qt])/ur,lr*=ur,dr*=ur,ar.x-=lr*(or=nr.weight+ar.weight?nr.weight/(nr.weight+ar.weight):.5),ar.y-=dr*or,nr.x+=lr*(or=1-or),nr.y+=dr*or);if((or=he*Qe)&&(lr=oe[0]/2,dr=oe[1]/2,qt=-1,or))for(;++qt<ft;)jt=ct[qt],jt.x+=(lr-jt.x)*or,jt.y+=(dr-jt.y)*or;if(De)for(Ha(Kt=R.geom.quadtree(ct),he,lt),qt=-1;++qt<ft;)(jt=ct[qt]).fixed||Kt.visit(gt(jt));for(qt=-1;++qt<ft;)jt=ct[qt],jt.fixed?(jt.x=jt.px,jt.y=jt.py):(jt.x-=(jt.px-(jt.px=jt.x))*Te,jt.y-=(jt.py-(jt.py=jt.y))*Te);J.tick({type:"tick",alpha:he})},F.nodes=function(ft){return arguments.length?(ct=ft,F):ct},F.links=function(ft){return arguments.length?(yt=ft,F):yt},F.size=function(ft){return arguments.length?(oe=ft,F):oe},F.linkDistance=function(ft){return arguments.length?(xe=typeof ft=="function"?ft:+ft,F):xe},F.distance=F.linkDistance,F.linkStrength=function(ft){return arguments.length?(Ee=typeof ft=="function"?ft:+ft,F):Ee},F.friction=function(ft){return arguments.length?(Te=+ft,F):Te},F.charge=function(ft){return arguments.length?(De=typeof ft=="function"?ft:+ft,F):De},F.chargeDistance=function(ft){return arguments.length?(Pe=ft*ft,F):Math.sqrt(Pe)},F.gravity=function(ft){return arguments.length?(Qe=+ft,F):Qe},F.theta=function(ft){return arguments.length?($e=ft*ft,F):Math.sqrt($e)},F.alpha=function(ft){return arguments.length?(ft=+ft,he?ft>0?he=ft:(te.c=null,te.t=NaN,te=null,J.end({type:"end",alpha:he=0})):ft>0&&(J.start({type:"start",alpha:he=ft}),te=br(F.tick)),F):he},F.start=function(){var ft,Nt=ct.length,Kt=yt.length,qt=oe[0],jt=oe[1],nr,ar;for(ft=0;ft<Nt;++ft)(ar=ct[ft]).index=ft,ar.weight=0;for(ft=0;ft<Kt;++ft)ar=yt[ft],typeof ar.source=="number"&&(ar.source=ct[ar.source]),typeof ar.target=="number"&&(ar.target=ct[ar.target]),++ar.source.weight,++ar.target.weight;for(ft=0;ft<Nt;++ft)ar=ct[ft],isNaN(ar.x)&&(ar.x=ur("x",qt)),isNaN(ar.y)&&(ar.y=ur("y",jt)),isNaN(ar.px)&&(ar.px=ar.x),isNaN(ar.py)&&(ar.py=ar.y);if(tt=[],typeof xe=="function")for(ft=0;ft<Kt;++ft)tt[ft]=+xe.call(this,yt[ft],ft);else for(ft=0;ft<Kt;++ft)tt[ft]=xe;if(it=[],typeof Ee=="function")for(ft=0;ft<Kt;++ft)it[ft]=+Ee.call(this,yt[ft],ft);else for(ft=0;ft<Kt;++ft)it[ft]=Ee;if(lt=[],typeof De=="function")for(ft=0;ft<Nt;++ft)lt[ft]=+De.call(this,ct[ft],ft);else for(ft=0;ft<Nt;++ft)lt[ft]=De;function ur(or,lr){if(!nr){for(nr=new Array(Nt),gr=0;gr<Nt;++gr)nr[gr]=[];for(gr=0;gr<Kt;++gr){var dr=yt[gr];nr[dr.source.index].push(dr.target),nr[dr.target.index].push(dr.source)}}for(var Mr=nr[ft],gr=-1,Jt=Mr.length,fr;++gr<Jt;)if(!isNaN(fr=Mr[gr][or]))return fr;return Math.random()*lr}return F.resume()},F.resume=function(){return F.alpha(.1)},F.stop=function(){return F.alpha(0)},F.drag=function(){if(se||(se=R.behavior.drag().origin(P).on("dragstart.force",ko).on("drag.force",mt).on("dragend.force",Co)),!arguments.length)return se;this.on("mouseover.force",So).on("mouseout.force",Eo).call(se)};function mt(ft){ft.px=R.event.x,ft.py=R.event.y,F.resume()}return R.rebind(F,J,"on")};function ko(F){F.fixed|=2}function Co(F){F.fixed&=-7}function So(F){F.fixed|=4,F.px=F.x,F.py=F.y}function Eo(F){F.fixed&=-5}function Ha(F,J,te){var oe=0,se=0;if(F.charge=0,!F.leaf)for(var he=F.nodes,Te=he.length,xe=-1,Ee;++xe<Te;)Ee=he[xe],Ee!=null&&(Ha(Ee,J,te),F.charge+=Ee.charge,oe+=Ee.charge*Ee.cx,se+=Ee.charge*Ee.cy);if(F.point){F.leaf||(F.point.x+=Math.random()-.5,F.point.y+=Math.random()-.5);var De=J*te[F.point.index];F.charge+=F.pointCharge=De,oe+=De*F.point.x,se+=De*F.point.y}F.cx=oe/F.charge,F.cy=se/F.charge}var Lo=20,Ro=1,Do=1/0;R.layout.hierarchy=function(){var F=Fo,J=Po,te=Io;function oe(se){var he=[se],Te=[],xe;for(se.depth=0;(xe=he.pop())!=null;)if(Te.push(xe),(De=J.call(oe,xe,xe.depth))&&(Ee=De.length)){for(var Ee,De,Pe;--Ee>=0;)he.push(Pe=De[Ee]),Pe.parent=xe,Pe.depth=xe.depth+1;te&&(xe.value=0),xe.children=De}else te&&(xe.value=+te.call(oe,xe,xe.depth)||0),delete xe.children;return Zr(se,function(Qe){var $e,ct;F&&($e=Qe.children)&&$e.sort(F),te&&(ct=Qe.parent)&&(ct.value+=Qe.value)}),Te}return oe.sort=function(se){return arguments.length?(F=se,oe):F},oe.children=function(se){return arguments.length?(J=se,oe):J},oe.value=function(se){return arguments.length?(te=se,oe):te},oe.revalue=function(se){return te&&(Mn(se,function(he){he.children&&(he.value=0)}),Zr(se,function(he){var Te;he.children||(he.value=+te.call(oe,he,he.depth)||0),(Te=he.parent)&&(Te.value+=he.value)})),se},oe};function Tn(F,J){return R.rebind(F,J,"sort","children","value"),F.nodes=F,F.links=No,F}function Mn(F,J){for(var te=[F];(F=te.pop())!=null;)if(J(F),(se=F.children)&&(oe=se.length))for(var oe,se;--oe>=0;)te.push(se[oe])}function Zr(F,J){for(var te=[F],oe=[];(F=te.pop())!=null;)if(oe.push(F),(Te=F.children)&&(he=Te.length))for(var se=-1,he,Te;++se<he;)te.push(Te[se]);for(;(F=oe.pop())!=null;)J(F)}function Po(F){return F.children}function Io(F){return F.value}function Fo(F,J){return J.value-F.value}function No(F){return R.merge(F.map(function(J){return(J.children||[]).map(function(te){return{source:J,target:te}})}))}R.layout.partition=function(){var F=R.layout.hierarchy(),J=[1,1];function te(he,Te,xe,Ee){var De=he.children;if(he.x=Te,he.y=he.depth*Ee,he.dx=xe,he.dy=Ee,De&&(Qe=De.length)){var Pe=-1,Qe,$e,ct;for(xe=he.value?xe/he.value:0;++Pe<Qe;)te($e=De[Pe],Te,ct=$e.value*xe,Ee),Te+=ct}}function oe(he){var Te=he.children,xe=0;if(Te&&(De=Te.length))for(var Ee=-1,De;++Ee<De;)xe=Math.max(xe,oe(Te[Ee]));return 1+xe}function se(he,Te){var xe=F.call(this,he,Te);return te(xe[0],0,J[0],J[1]/oe(xe[0])),xe}return se.size=function(he){return arguments.length?(J=he,se):J},Tn(se,F)},R.layout.pie=function(){var F=Number,J=Ga,te=0,oe=Ae,se=0;function he(Te){var xe=Te.length,Ee=Te.map(function(gt,mt){return+F.call(he,gt,mt)}),De=+(typeof te=="function"?te.apply(this,arguments):te),Pe=(typeof oe=="function"?oe.apply(this,arguments):oe)-De,Qe=Math.min(Math.abs(Pe)/xe,+(typeof se=="function"?se.apply(this,arguments):se)),$e=Qe*(Pe<0?-1:1),ct=R.sum(Ee),yt=ct?(Pe-xe*$e)/ct:0,tt=R.range(xe),it=[],lt;return J!=null&&tt.sort(J===Ga?function(gt,mt){return Ee[mt]-Ee[gt]}:function(gt,mt){return J(Te[gt],Te[mt])}),tt.forEach(function(gt){it[gt]={data:Te[gt],value:lt=Ee[gt],startAngle:De,endAngle:De+=lt*yt+$e,padAngle:Qe}}),it}return he.value=function(Te){return arguments.length?(F=Te,he):F},he.sort=function(Te){return arguments.length?(J=Te,he):J},he.startAngle=function(Te){return arguments.length?(te=Te,he):te},he.endAngle=function(Te){return arguments.length?(oe=Te,he):oe},he.padAngle=function(Te){return arguments.length?(se=Te,he):se},he};var Ga={};R.layout.stack=function(){var F=P,J=qn,te=ea,oe=Bo,se=zo,he=Oo;function Te(xe,Ee){if(!(yt=xe.length))return xe;var De=xe.map(function(gt,mt){return F.call(Te,gt,mt)}),Pe=De.map(function(gt){return gt.map(function(mt,ft){return[se.call(Te,mt,ft),he.call(Te,mt,ft)]})}),Qe=J.call(Te,Pe,Ee);De=R.permute(De,Qe),Pe=R.permute(Pe,Qe);var $e=te.call(Te,Pe,Ee),ct=De[0].length,yt,tt,it,lt;for(it=0;it<ct;++it)for(oe.call(Te,De[0][it],lt=$e[it],Pe[0][it][1]),tt=1;tt<yt;++tt)oe.call(Te,De[tt][it],lt+=Pe[tt-1][it][1],Pe[tt][it][1]);return xe}return Te.values=function(xe){return arguments.length?(F=xe,Te):F},Te.order=function(xe){return arguments.length?(J=typeof xe=="function"?xe:Uo.get(xe)||qn,Te):J},Te.offset=function(xe){return arguments.length?(te=typeof xe=="function"?xe:Ho.get(xe)||ea,Te):te},Te.x=function(xe){return arguments.length?(se=xe,Te):se},Te.y=function(xe){return arguments.length?(he=xe,Te):he},Te.out=function(xe){return arguments.length?(oe=xe,Te):oe},Te};function zo(F){return F.x}function Oo(F){return F.y}function Bo(F,J,te){F.y0=J,F.y=te}var Uo=R.map({"inside-out":function(F){var J=F.length,te,oe,se=F.map(Go),he=F.map(Vo),Te=R.range(J).sort(function(Qe,$e){return se[Qe]-se[$e]}),xe=0,Ee=0,De=[],Pe=[];for(te=0;te<J;++te)oe=Te[te],xe<Ee?(xe+=he[oe],De.push(oe)):(Ee+=he[oe],Pe.push(oe));return Pe.reverse().concat(De)},reverse:function(F){return R.range(F.length).reverse()},default:qn}),Ho=R.map({silhouette:function(F){var J=F.length,te=F[0].length,oe=[],se=0,he,Te,xe,Ee=[];for(Te=0;Te<te;++Te){for(he=0,xe=0;he<J;he++)xe+=F[he][Te][1];xe>se&&(se=xe),oe.push(xe)}for(Te=0;Te<te;++Te)Ee[Te]=(se-oe[Te])/2;return Ee},wiggle:function(F){var J=F.length,te=F[0],oe=te.length,se,he,Te,xe,Ee,De,Pe,Qe,$e,ct=[];for(ct[0]=Qe=$e=0,he=1;he<oe;++he){for(se=0,xe=0;se<J;++se)xe+=F[se][he][1];for(se=0,Ee=0,Pe=te[he][0]-te[he-1][0];se<J;++se){for(Te=0,De=(F[se][he][1]-F[se][he-1][1])/(2*Pe);Te<se;++Te)De+=(F[Te][he][1]-F[Te][he-1][1])/Pe;Ee+=De*F[se][he][1]}ct[he]=Qe-=xe?Ee/xe*Pe:0,Qe<$e&&($e=Qe)}for(he=0;he<oe;++he)ct[he]-=$e;return ct},expand:function(F){var J=F.length,te=F[0].length,oe=1/J,se,he,Te,xe=[];for(he=0;he<te;++he){for(se=0,Te=0;se<J;se++)Te+=F[se][he][1];if(Te)for(se=0;se<J;se++)F[se][he][1]/=Te;else for(se=0;se<J;se++)F[se][he][1]=oe}for(he=0;he<te;++he)xe[he]=0;return xe},zero:ea});function qn(F){return R.range(F.length)}function ea(F){for(var J=-1,te=F[0].length,oe=[];++J<te;)oe[J]=0;return oe}function Go(F){for(var J=1,te=0,oe=F[0][1],se,he=F.length;J<he;++J)(se=F[J][1])>oe&&(te=J,oe=se);return te}function Vo(F){return F.reduce(Yo,0)}function Yo(F,J){return F+J[1]}R.layout.histogram=function(){var F=!0,J=Number,te=Xo,oe=Wo;function se(he,$e){for(var xe=[],Ee=he.map(J,this),De=te.call(this,Ee,$e),Pe=oe.call(this,De,Ee,$e),Qe,$e=-1,ct=Ee.length,yt=Pe.length-1,tt=F?1:1/ct,it;++$e<yt;)Qe=xe[$e]=[],Qe.dx=Pe[$e+1]-(Qe.x=Pe[$e]),Qe.y=0;if(yt>0)for($e=-1;++$e<ct;)it=Ee[$e],it>=De[0]&&it<=De[1]&&(Qe=xe[R.bisect(Pe,it,1,yt)-1],Qe.y+=tt,Qe.push(he[$e]));return xe}return se.value=function(he){return arguments.length?(J=he,se):J},se.range=function(he){return arguments.length?(te=Pt(he),se):te},se.bins=function(he){return arguments.length?(oe=typeof he=="number"?function(Te){return Va(Te,he)}:Pt(he),se):oe},se.frequency=function(he){return arguments.length?(F=!!he,se):F},se};function Wo(F,J){return Va(F,Math.ceil(Math.log(J.length)/Math.LN2+1))}function Va(F,J){for(var te=-1,oe=+F[0],se=(F[1]-oe)/J,he=[];++te<=J;)he[te]=se*te+oe;return he}function Xo(F){return[R.min(F),R.max(F)]}R.layout.pack=function(){var F=R.layout.hierarchy().sort(Zo),J=0,te=[1,1],oe;function se(he,Te){var xe=F.call(this,he,Te),Ee=xe[0],De=te[0],Pe=te[1],Qe=oe==null?Math.sqrt:typeof oe=="function"?oe:function(){return oe};if(Ee.x=Ee.y=0,Zr(Ee,function(ct){ct.r=+Qe(ct.value)}),Zr(Ee,Xa),J){var $e=J*(oe?1:Math.max(2*Ee.r/De,2*Ee.r/Pe))/2;Zr(Ee,function(ct){ct.r+=$e}),Zr(Ee,Xa),Zr(Ee,function(ct){ct.r-=$e})}return Za(Ee,De/2,Pe/2,oe?1:1/Math.max(2*Ee.r/De,2*Ee.r/Pe)),xe}return se.size=function(he){return arguments.length?(te=he,se):te},se.radius=function(he){return arguments.length?(oe=he==null||typeof he=="function"?he:+he,se):oe},se.padding=function(he){return arguments.length?(J=+he,se):J},Tn(se,F)};function Zo(F,J){return F.value-J.value}function ta(F,J){var te=F._pack_next;F._pack_next=J,J._pack_prev=F,J._pack_next=te,te._pack_prev=J}function Ya(F,J){F._pack_next=J,J._pack_prev=F}function Wa(F,J){var te=J.x-F.x,oe=J.y-F.y,se=F.r+J.r;return .999*se*se>te*te+oe*oe}function Xa(F){if(!(J=F.children)||!($e=J.length))return;var J,te=1/0,oe=-1/0,se=1/0,he=-1/0,Te,xe,Ee,De,Pe,Qe,$e;function ct(ft){te=Math.min(ft.x-ft.r,te),oe=Math.max(ft.x+ft.r,oe),se=Math.min(ft.y-ft.r,se),he=Math.max(ft.y+ft.r,he)}if(J.forEach(Jo),Te=J[0],Te.x=-Te.r,Te.y=0,ct(Te),$e>1&&(xe=J[1],xe.x=xe.r,xe.y=0,ct(xe),$e>2))for(Ee=J[2],Ja(Te,xe,Ee),ct(Ee),ta(Te,Ee),Te._pack_prev=Ee,ta(Ee,xe),xe=Te._pack_next,De=3;De<$e;De++){Ja(Te,xe,Ee=J[De]);var yt=0,tt=1,it=1;for(Pe=xe._pack_next;Pe!==xe;Pe=Pe._pack_next,tt++)if(Wa(Pe,Ee)){yt=1;break}if(yt==1)for(Qe=Te._pack_prev;Qe!==Pe._pack_prev&&!Wa(Qe,Ee);Qe=Qe._pack_prev,it++);yt?(tt<it||tt==it&&xe.r<Te.r?Ya(Te,xe=Pe):Ya(Te=Qe,xe),De--):(ta(Te,Ee),xe=Ee,ct(Ee))}var lt=(te+oe)/2,gt=(se+he)/2,mt=0;for(De=0;De<$e;De++)Ee=J[De],Ee.x-=lt,Ee.y-=gt,mt=Math.max(mt,Ee.r+Math.sqrt(Ee.x*Ee.x+Ee.y*Ee.y));F.r=mt,J.forEach(Ko)}function Jo(F){F._pack_next=F._pack_prev=F}function Ko(F){delete F._pack_next,delete F._pack_prev}function Za(F,J,te,oe){var se=F.children;if(F.x=J+=oe*F.x,F.y=te+=oe*F.y,F.r*=oe,se)for(var he=-1,Te=se.length;++he<Te;)Za(se[he],J,te,oe)}function Ja(F,J,te){var oe=F.r+te.r,se=J.x-F.x,he=J.y-F.y;if(oe&&(se||he)){var Te=J.r+te.r,xe=se*se+he*he;Te*=Te,oe*=oe;var Ee=.5+(oe-Te)/(2*xe),De=Math.sqrt(Math.max(0,2*Te*(oe+xe)-(oe-=xe)*oe-Te*Te))/(2*xe);te.x=F.x+Ee*se+De*he,te.y=F.y+Ee*he-De*se}else te.x=F.x+oe,te.y=F.y}R.layout.tree=function(){var F=R.layout.hierarchy().sort(null).value(null),J=Ka,te=[1,1],oe=null;function se(Pe,Qe){var $e=F.call(this,Pe,Qe),ct=$e[0],yt=he(ct);if(Zr(yt,Te),yt.parent.m=-yt.z,Mn(yt,xe),oe)Mn(ct,De);else{var tt=ct,it=ct,lt=ct;Mn(ct,function(Nt){Nt.x<tt.x&&(tt=Nt),Nt.x>it.x&&(it=Nt),Nt.depth>lt.depth&&(lt=Nt)});var gt=J(tt,it)/2-tt.x,mt=te[0]/(it.x+J(it,tt)/2+gt),ft=te[1]/(lt.depth||1);Mn(ct,function(Nt){Nt.x=(Nt.x+gt)*mt,Nt.y=Nt.depth*ft})}return $e}function he(Pe){for(var Qe={A:null,children:[Pe]},$e=[Qe],ct;(ct=$e.pop())!=null;)for(var yt=ct.children,tt,it=0,lt=yt.length;it<lt;++it)$e.push((yt[it]=tt={_:yt[it],parent:ct,children:(tt=yt[it].children)&&tt.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:it}).a=tt);return Qe.children[0]}function Te(Pe){var Qe=Pe.children,$e=Pe.parent.children,ct=Pe.i?$e[Pe.i-1]:null;if(Qe.length){$o(Pe);var yt=(Qe[0].z+Qe[Qe.length-1].z)/2;ct?(Pe.z=ct.z+J(Pe._,ct._),Pe.m=Pe.z-yt):Pe.z=yt}else ct&&(Pe.z=ct.z+J(Pe._,ct._));Pe.parent.A=Ee(Pe,ct,Pe.parent.A||$e[0])}function xe(Pe){Pe._.x=Pe.z+Pe.parent.m,Pe.m+=Pe.parent.m}function Ee(Pe,Qe,$e){if(Qe){for(var ct=Pe,yt=Pe,tt=Qe,it=ct.parent.children[0],lt=ct.m,gt=yt.m,mt=tt.m,ft=it.m,Nt;tt=na(tt),ct=ra(ct),tt&&ct;)it=ra(it),yt=na(yt),yt.a=Pe,Nt=tt.z+mt-ct.z-lt+J(tt._,ct._),Nt>0&&(Qo(jo(tt,Pe,$e),Pe,Nt),lt+=Nt,gt+=Nt),mt+=tt.m,lt+=ct.m,ft+=it.m,gt+=yt.m;tt&&!na(yt)&&(yt.t=tt,yt.m+=mt-gt),ct&&!ra(it)&&(it.t=ct,it.m+=lt-ft,$e=Pe)}return $e}function De(Pe){Pe.x*=te[0],Pe.y=Pe.depth*te[1]}return se.separation=function(Pe){return arguments.length?(J=Pe,se):J},se.size=function(Pe){return arguments.length?(oe=(te=Pe)==null?De:null,se):oe?null:te},se.nodeSize=function(Pe){return arguments.length?(oe=(te=Pe)==null?null:De,se):oe?te:null},Tn(se,F)};function Ka(F,J){return F.parent==J.parent?1:2}function ra(F){var J=F.children;return J.length?J[0]:F.t}function na(F){var J=F.children,te;return(te=J.length)?J[te-1]:F.t}function Qo(F,J,te){var oe=te/(J.i-F.i);J.c-=oe,J.s+=te,F.c+=oe,J.z+=te,J.m+=te}function $o(F){for(var J=0,te=0,oe=F.children,se=oe.length,he;--se>=0;)he=oe[se],he.z+=J,he.m+=J,J+=he.s+(te+=he.c)}function jo(F,J,te){return F.a.parent===J.parent?F.a:te}R.layout.cluster=function(){var F=R.layout.hierarchy().sort(null).value(null),J=Ka,te=[1,1],oe=!1;function se(he,Te){var xe=F.call(this,he,Te),Ee=xe[0],De,Pe=0;Zr(Ee,function(tt){var it=tt.children;it&&it.length?(tt.x=es(it),tt.y=qo(it)):(tt.x=De?Pe+=J(tt,De):0,tt.y=0,De=tt)});var Qe=Qa(Ee),$e=$a(Ee),ct=Qe.x-J(Qe,$e)/2,yt=$e.x+J($e,Qe)/2;return Zr(Ee,oe?function(tt){tt.x=(tt.x-Ee.x)*te[0],tt.y=(Ee.y-tt.y)*te[1]}:function(tt){tt.x=(tt.x-ct)/(yt-ct)*te[0],tt.y=(1-(Ee.y?tt.y/Ee.y:1))*te[1]}),xe}return se.separation=function(he){return arguments.length?(J=he,se):J},se.size=function(he){return arguments.length?(oe=(te=he)==null,se):oe?null:te},se.nodeSize=function(he){return arguments.length?(oe=(te=he)!=null,se):oe?te:null},Tn(se,F)};function qo(F){return 1+R.max(F,function(J){return J.y})}function es(F){return F.reduce(function(J,te){return J+te.x},0)/F.length}function Qa(F){var J=F.children;return J&&J.length?Qa(J[0]):F}function $a(F){var J=F.children,te;return J&&(te=J.length)?$a(J[te-1]):F}R.layout.treemap=function(){var F=R.layout.hierarchy(),J=Math.round,te=[1,1],oe=null,se=aa,he=!1,Te,xe="squarify",Ee=.5*(1+Math.sqrt(5));function De(tt,it){for(var lt=-1,gt=tt.length,mt,ft;++lt<gt;)ft=(mt=tt[lt]).value*(it<0?0:it),mt.area=isNaN(ft)||ft<=0?0:ft}function Pe(tt){var it=tt.children;if(it&&it.length){var lt=se(tt),gt=[],mt=it.slice(),ft,Nt=1/0,Kt,qt=xe==="slice"?lt.dx:xe==="dice"?lt.dy:xe==="slice-dice"?tt.depth&1?lt.dy:lt.dx:Math.min(lt.dx,lt.dy),jt;for(De(mt,lt.dx*lt.dy/tt.value),gt.area=0;(jt=mt.length)>0;)gt.push(ft=mt[jt-1]),gt.area+=ft.area,xe!=="squarify"||(Kt=$e(gt,qt))<=Nt?(mt.pop(),Nt=Kt):(gt.area-=gt.pop().area,ct(gt,qt,lt,!1),qt=Math.min(lt.dx,lt.dy),gt.length=gt.area=0,Nt=1/0);gt.length&&(ct(gt,qt,lt,!0),gt.length=gt.area=0),it.forEach(Pe)}}function Qe(tt){var it=tt.children;if(it&&it.length){var lt=se(tt),gt=it.slice(),mt,ft=[];for(De(gt,lt.dx*lt.dy/tt.value),ft.area=0;mt=gt.pop();)ft.push(mt),ft.area+=mt.area,mt.z!=null&&(ct(ft,mt.z?lt.dx:lt.dy,lt,!gt.length),ft.length=ft.area=0);it.forEach(Qe)}}function $e(tt,it){for(var lt=tt.area,gt,mt=0,ft=1/0,Nt=-1,Kt=tt.length;++Nt<Kt;)!(gt=tt[Nt].area)||(gt<ft&&(ft=gt),gt>mt&&(mt=gt));return lt*=lt,it*=it,lt?Math.max(it*mt*Ee/lt,lt/(it*ft*Ee)):1/0}function ct(tt,it,lt,gt){var mt=-1,ft=tt.length,Nt=lt.x,Kt=lt.y,qt=it?J(tt.area/it):0,jt;if(it==lt.dx){for((gt||qt>lt.dy)&&(qt=lt.dy);++mt<ft;)jt=tt[mt],jt.x=Nt,jt.y=Kt,jt.dy=qt,Nt+=jt.dx=Math.min(lt.x+lt.dx-Nt,qt?J(jt.area/qt):0);jt.z=!0,jt.dx+=lt.x+lt.dx-Nt,lt.y+=qt,lt.dy-=qt}else{for((gt||qt>lt.dx)&&(qt=lt.dx);++mt<ft;)jt=tt[mt],jt.x=Nt,jt.y=Kt,jt.dx=qt,Kt+=jt.dy=Math.min(lt.y+lt.dy-Kt,qt?J(jt.area/qt):0);jt.z=!1,jt.dy+=lt.y+lt.dy-Kt,lt.x+=qt,lt.dx-=qt}}function yt(tt){var it=Te||F(tt),lt=it[0];return lt.x=lt.y=0,lt.value?(lt.dx=te[0],lt.dy=te[1]):lt.dx=lt.dy=0,Te&&F.revalue(lt),De([lt],lt.dx*lt.dy/lt.value),(Te?Qe:Pe)(lt),he&&(Te=it),it}return yt.size=function(tt){return arguments.length?(te=tt,yt):te},yt.padding=function(tt){if(!arguments.length)return oe;function it(mt){var ft=tt.call(yt,mt,mt.depth);return ft==null?aa(mt):ja(mt,typeof ft=="number"?[ft,ft,ft,ft]:ft)}function lt(mt){return ja(mt,tt)}var gt;return se=(oe=tt)==null?aa:(gt=typeof tt)=="function"?it:(gt==="number"&&(tt=[tt,tt,tt,tt]),lt),yt},yt.round=function(tt){return arguments.length?(J=tt?Math.round:Number,yt):J!=Number},yt.sticky=function(tt){return arguments.length?(he=tt,Te=null,yt):he},yt.ratio=function(tt){return arguments.length?(Ee=tt,yt):Ee},yt.mode=function(tt){return arguments.length?(xe=tt+"",yt):xe},Tn(yt,F)};function aa(F){return{x:F.x,y:F.y,dx:F.dx,dy:F.dy}}function ja(F,J){var te=F.x+J[3],oe=F.y+J[0],se=F.dx-J[1]-J[3],he=F.dy-J[0]-J[2];return se<0&&(te+=se/2,se=0),he<0&&(oe+=he/2,he=0),{x:te,y:oe,dx:se,dy:he}}R.random={normal:function(F,J){var te=arguments.length;return te<2&&(J=1),te<1&&(F=0),function(){var oe,se,he;do oe=Math.random()*2-1,se=Math.random()*2-1,he=oe*oe+se*se;while(!he||he>1);return F+J*oe*Math.sqrt(-2*Math.log(he)/he)}},logNormal:function(){var F=R.random.normal.apply(R,arguments);return function(){return Math.exp(F())}},bates:function(F){var J=R.random.irwinHall(F);return function(){return J()/F}},irwinHall:function(F){return function(){for(var J=0,te=0;te<F;te++)J+=Math.random();return J}}},R.scale={};function In(F){var J=F[0],te=F[F.length-1];return J<te?[J,te]:[te,J]}function Fn(F){return F.rangeExtent?F.rangeExtent():In(F.range())}function ts(F,J,te,oe){var se=te(F[0],F[1]),he=oe(J[0],J[1]);return function(Te){return he(se(Te))}}function ia(F,J){var te=0,oe=F.length-1,se=F[te],he=F[oe],Te;return he<se&&(Te=te,te=oe,oe=Te,Te=se,se=he,he=Te),F[te]=J.floor(se),F[oe]=J.ceil(he),F}function qa(F){return F?{floor:function(J){return Math.floor(J/F)*F},ceil:function(J){return Math.ceil(J/F)*F}}:rs}var rs={floor:P,ceil:P};function ns(F,J,te,oe){var se=[],he=[],Te=0,xe=Math.min(F.length,J.length)-1;for(F[xe]<F[0]&&(F=F.slice().reverse(),J=J.slice().reverse());++Te<=xe;)se.push(te(F[Te-1],F[Te])),he.push(oe(J[Te-1],J[Te]));return function(Ee){var De=R.bisect(F,Ee,1,xe)-1;return he[De](se[De](Ee))}}R.scale.linear=function(){return ei([0,1],[0,1],on,!1)};function ei(F,J,te,oe){var se,he;function Te(){var Ee=Math.min(F.length,J.length)>2?ns:ts,De=oe?To:wo;return se=Ee(F,J,De,te),he=Ee(J,F,De,on),xe}function xe(Ee){return se(Ee)}return xe.invert=function(Ee){return he(Ee)},xe.domain=function(Ee){return arguments.length?(F=Ee.map(Number),Te()):F},xe.range=function(Ee){return arguments.length?(J=Ee,Te()):J},xe.rangeRound=function(Ee){return xe.range(Ee).interpolate(Fa)},xe.clamp=function(Ee){return arguments.length?(oe=Ee,Te()):oe},xe.interpolate=function(Ee){return arguments.length?(te=Ee,Te()):te},xe.ticks=function(Ee){return sa(F,Ee)},xe.tickFormat=function(Ee,De){return d3_scale_linearTickFormat(F,Ee,De)},xe.nice=function(Ee){return ri(F,Ee),Te()},xe.copy=function(){return ei(F,J,te,oe)},Te()}function ti(F,J){return R.rebind(F,J,"range","rangeRound","interpolate","clamp")}function ri(F,J){return ia(F,qa(oa(F,J)[2])),ia(F,qa(oa(F,J)[2])),F}function oa(F,J){J==null&&(J=10);var te=In(F),oe=te[1]-te[0],se=Math.pow(10,Math.floor(Math.log(oe/J)/Math.LN10)),he=J/oe*se;return he<=.15?se*=10:he<=.35?se*=5:he<=.75&&(se*=2),te[0]=Math.ceil(te[0]/se)*se,te[1]=Math.floor(te[1]/se)*se+se*.5,te[2]=se,te}function sa(F,J){return R.range.apply(R,oa(F,J))}var as={s:1,g:1,p:1,r:1,e:1};function ni(F){return-Math.floor(Math.log(F)/Math.LN10+.01)}function Xs(F,J){var te=ni(J[2]);return F in as?Math.abs(te-ni(Math.max(f(J[0]),f(J[1]))))+ +(F!=="e"):te-(F==="%")*2}R.scale.log=function(){return ai(R.scale.linear().domain([0,1]),10,!0,[1,10])};function ai(F,J,te,oe){function se(xe){return(te?Math.log(xe<0?0:xe):-Math.log(xe>0?0:-xe))/Math.log(J)}function he(xe){return te?Math.pow(J,xe):-Math.pow(J,-xe)}function Te(xe){return F(se(xe))}return Te.invert=function(xe){return he(F.invert(xe))},Te.domain=function(xe){return arguments.length?(te=xe[0]>=0,F.domain((oe=xe.map(Number)).map(se)),Te):oe},Te.base=function(xe){return arguments.length?(J=+xe,F.domain(oe.map(se)),Te):J},Te.nice=function(){var xe=ia(oe.map(se),te?Math:is);return F.domain(xe),oe=xe.map(he),Te},Te.ticks=function(){var xe=In(oe),Ee=[],De=xe[0],Pe=xe[1],Qe=Math.floor(se(De)),$e=Math.ceil(se(Pe)),ct=J%1?2:J;if(isFinite($e-Qe)){if(te){for(;Qe<$e;Qe++)for(var yt=1;yt<ct;yt++)Ee.push(he(Qe)*yt);Ee.push(he(Qe))}else for(Ee.push(he(Qe));Qe++<$e;)for(var yt=ct-1;yt>0;yt--)Ee.push(he(Qe)*yt);for(Qe=0;Ee[Qe]<De;Qe++);for($e=Ee.length;Ee[$e-1]>Pe;$e--);Ee=Ee.slice(Qe,$e)}return Ee},Te.copy=function(){return ai(F.copy(),J,te,oe)},ti(Te,F)}var is={floor:function(F){return-Math.ceil(-F)},ceil:function(F){return-Math.floor(-F)}};R.scale.pow=function(){return ii(R.scale.linear(),1,[0,1])};function ii(F,J,te){var oe=Nn(J),se=Nn(1/J);function he(Te){return F(oe(Te))}return he.invert=function(Te){return se(F.invert(Te))},he.domain=function(Te){return arguments.length?(F.domain((te=Te.map(Number)).map(oe)),he):te},he.ticks=function(Te){return sa(te,Te)},he.tickFormat=function(Te,xe){return d3_scale_linearTickFormat(te,Te,xe)},he.nice=function(Te){return he.domain(ri(te,Te))},he.exponent=function(Te){return arguments.length?(oe=Nn(J=Te),se=Nn(1/J),F.domain(te.map(oe)),he):J},he.copy=function(){return ii(F.copy(),J,te)},ti(he,F)}function Nn(F){return function(J){return J<0?-Math.pow(-J,F):Math.pow(J,F)}}R.scale.sqrt=function(){return R.scale.pow().exponent(.5)},R.scale.ordinal=function(){return oi([],{t:"range",a:[[]]})};function oi(F,J){var te,oe,se;function he(xe){return oe[((te.get(xe)||(J.t==="range"?te.set(xe,F.push(xe)):NaN))-1)%oe.length]}function Te(xe,Ee){return R.range(F.length).map(function(De){return xe+Ee*De})}return he.domain=function(xe){if(!arguments.length)return F;F=[],te=new a;for(var Ee=-1,De=xe.length,Pe;++Ee<De;)te.has(Pe=xe[Ee])||te.set(Pe,F.push(Pe));return he[J.t].apply(he,J.a)},he.range=function(xe){return arguments.length?(oe=xe,se=0,J={t:"range",a:arguments},he):oe},he.rangePoints=function(xe,Ee){arguments.length<2&&(Ee=0);var De=xe[0],Pe=xe[1],Qe=F.length<2?(De=(De+Pe)/2,0):(Pe-De)/(F.length-1+Ee);return oe=Te(De+Qe*Ee/2,Qe),se=0,J={t:"rangePoints",a:arguments},he},he.rangeRoundPoints=function(xe,Ee){arguments.length<2&&(Ee=0);var De=xe[0],Pe=xe[1],Qe=F.length<2?(De=Pe=Math.round((De+Pe)/2),0):(Pe-De)/(F.length-1+Ee)|0;return oe=Te(De+Math.round(Qe*Ee/2+(Pe-De-(F.length-1+Ee)*Qe)/2),Qe),se=0,J={t:"rangeRoundPoints",a:arguments},he},he.rangeBands=function(xe,Ee,De){arguments.length<2&&(Ee=0),arguments.length<3&&(De=Ee);var Pe=xe[1]<xe[0],Qe=xe[Pe-0],$e=xe[1-Pe],ct=($e-Qe)/(F.length-Ee+2*De);return oe=Te(Qe+ct*De,ct),Pe&&oe.reverse(),se=ct*(1-Ee),J={t:"rangeBands",a:arguments},he},he.rangeRoundBands=function(xe,Ee,De){arguments.length<2&&(Ee=0),arguments.length<3&&(De=Ee);var Pe=xe[1]<xe[0],Qe=xe[Pe-0],$e=xe[1-Pe],ct=Math.floor(($e-Qe)/(F.length-Ee+2*De));return oe=Te(Qe+Math.round(($e-Qe-(F.length-Ee)*ct)/2),ct),Pe&&oe.reverse(),se=Math.round(ct*(1-Ee)),J={t:"rangeRoundBands",a:arguments},he},he.rangeBand=function(){return se},he.rangeExtent=function(){return In(J.a[0])},he.copy=function(){return oi(F,J)},he.domain(F)}R.scale.category10=function(){return R.scale.ordinal().range(os)},R.scale.category20=function(){return R.scale.ordinal().range(ss)},R.scale.category20b=function(){return R.scale.ordinal().range(ls)},R.scale.category20c=function(){return R.scale.ordinal().range(us)};var os=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(zt),ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(zt),ls=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(zt),us=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(zt);R.scale.quantile=function(){return si([],[])};function si(F,J){var te;function oe(){var he=0,Te=J.length;for(te=[];++he<Te;)te[he-1]=R.quantile(F,he/Te);return se}function se(he){if(!isNaN(he=+he))return J[R.bisect(te,he)]}return se.domain=function(he){return arguments.length?(F=he.map(b).filter(v).sort(l),oe()):F},se.range=function(he){return arguments.length?(J=he,oe()):J},se.quantiles=function(){return te},se.invertExtent=function(he){return he=J.indexOf(he),he<0?[NaN,NaN]:[he>0?te[he-1]:F[0],he<te.length?te[he]:F[F.length-1]]},se.copy=function(){return si(F,J)},oe()}R.scale.quantize=function(){return li(0,1,[0,1])};function li(F,J,te){var oe,se;function he(xe){return te[Math.max(0,Math.min(se,Math.floor(oe*(xe-F))))]}function Te(){return oe=te.length/(J-F),se=te.length-1,he}return he.domain=function(xe){return arguments.length?(F=+xe[0],J=+xe[xe.length-1],Te()):[F,J]},he.range=function(xe){return arguments.length?(te=xe,Te()):te},he.invertExtent=function(xe){return xe=te.indexOf(xe),xe=xe<0?NaN:xe/oe+F,[xe,xe+1/oe]},he.copy=function(){return li(F,J,te)},Te()}R.scale.threshold=function(){return ui([.5],[0,1])};function ui(F,J){function te(oe){if(oe<=oe)return J[R.bisect(F,oe)]}return te.domain=function(oe){return arguments.length?(F=oe,te):F},te.range=function(oe){return arguments.length?(J=oe,te):J},te.invertExtent=function(oe){return oe=J.indexOf(oe),[F[oe-1],F[oe]]},te.copy=function(){return ui(F,J)},te}R.scale.identity=function(){return fi([0,1])};function fi(F){function J(te){return+te}return J.invert=J,J.domain=J.range=function(te){return arguments.length?(F=te.map(J),J):F},J.ticks=function(te){return sa(F,te)},J.tickFormat=function(te,oe){return d3_scale_linearTickFormat(F,te,oe)},J.copy=function(){return fi(F)},J}R.svg={};function fs(){return 0}R.svg.arc=function(){var F=cs,J=hs,te=fs,oe=zn,se=ci,he=hi,Te=vs;function xe(){var De=Math.max(0,+F.apply(this,arguments)),Pe=Math.max(0,+J.apply(this,arguments)),Qe=se.apply(this,arguments)-Se,$e=he.apply(this,arguments)-Se,ct=Math.abs($e-Qe),yt=Qe>$e?0:1;if(Pe<De&&(tt=Pe,Pe=De,De=tt),ct>=Ce)return Ee(Pe,yt)+(De?Ee(De,1-yt):"")+"Z";var tt,it,lt,gt,mt=0,ft=0,Nt,Kt,qt,jt,nr,ar,ur,or,lr=[];if((gt=(+Te.apply(this,arguments)||0)/2)&&(lt=oe===zn?Math.sqrt(De*De+Pe*Pe):+oe.apply(this,arguments),yt||(ft*=-1),Pe&&(ft=Ze(lt/Pe*Math.sin(gt))),De&&(mt=Ze(lt/De*Math.sin(gt)))),Pe){Nt=Pe*Math.cos(Qe+ft),Kt=Pe*Math.sin(Qe+ft),qt=Pe*Math.cos($e-ft),jt=Pe*Math.sin($e-ft);var dr=Math.abs($e-Qe-2*ft)<=pe?0:1;if(ft&&On(Nt,Kt,qt,jt)===yt^dr){var Mr=(Qe+$e)/2;Nt=Pe*Math.cos(Mr),Kt=Pe*Math.sin(Mr),qt=jt=null}}else Nt=Kt=0;if(De){nr=De*Math.cos($e-mt),ar=De*Math.sin($e-mt),ur=De*Math.cos(Qe+mt),or=De*Math.sin(Qe+mt);var gr=Math.abs(Qe-$e+2*mt)<=pe?0:1;if(mt&&On(nr,ar,ur,or)===1-yt^gr){var Jt=(Qe+$e)/2;nr=De*Math.cos(Jt),ar=De*Math.sin(Jt),ur=or=null}}else nr=ar=0;if(ct>Le&&(tt=Math.min(Math.abs(Pe-De)/2,+te.apply(this,arguments)))>.001){it=De<Pe^yt?0:1;var fr=tt,hr=tt;if(ct<pe){var pr=ur==null?[nr,ar]:qt==null?[Nt,Kt]:Kr([Nt,Kt],[ur,or],[qt,jt],[nr,ar]),xr=Nt-pr[0],kr=Kt-pr[1],Lr=qt-pr[0],Ir=jt-pr[1],Nr=1/Math.sin(Math.acos((xr*Lr+kr*Ir)/(Math.sqrt(xr*xr+kr*kr)*Math.sqrt(Lr*Lr+Ir*Ir)))/2),Fr=Math.sqrt(pr[0]*pr[0]+pr[1]*pr[1]);hr=Math.min(tt,(De-Fr)/(Nr-1)),fr=Math.min(tt,(Pe-Fr)/(Nr+1))}if(qt!=null){var Ur=Bn(ur==null?[nr,ar]:[ur,or],[Nt,Kt],Pe,fr,yt),Dr=Bn([qt,jt],[nr,ar],Pe,fr,yt);tt===fr?lr.push("M",Ur[0],"A",fr,",",fr," 0 0,",it," ",Ur[1],"A",Pe,",",Pe," 0 ",1-yt^On(Ur[1][0],Ur[1][1],Dr[1][0],Dr[1][1]),",",yt," ",Dr[1],"A",fr,",",fr," 0 0,",it," ",Dr[0]):lr.push("M",Ur[0],"A",fr,",",fr," 0 1,",it," ",Dr[0])}else lr.push("M",Nt,",",Kt);if(ur!=null){var Hr=Bn([Nt,Kt],[ur,or],De,-hr,yt),ln=Bn([nr,ar],qt==null?[Nt,Kt]:[qt,jt],De,-hr,yt);tt===hr?lr.push("L",ln[0],"A",hr,",",hr," 0 0,",it," ",ln[1],"A",De,",",De," 0 ",yt^On(ln[1][0],ln[1][1],Hr[1][0],Hr[1][1]),",",1-yt," ",Hr[1],"A",hr,",",hr," 0 0,",it," ",Hr[0]):lr.push("L",ln[0],"A",hr,",",hr," 0 0,",it," ",Hr[0])}else lr.push("L",nr,",",ar)}else lr.push("M",Nt,",",Kt),qt!=null&&lr.push("A",Pe,",",Pe," 0 ",dr,",",yt," ",qt,",",jt),lr.push("L",nr,",",ar),ur!=null&&lr.push("A",De,",",De," 0 ",gr,",",1-yt," ",ur,",",or);return lr.push("Z"),lr.join("")}function Ee(De,Pe){return"M0,"+De+"A"+De+","+De+" 0 1,"+Pe+" 0,"+-De+"A"+De+","+De+" 0 1,"+Pe+" 0,"+De}return xe.innerRadius=function(De){return arguments.length?(F=Pt(De),xe):F},xe.outerRadius=function(De){return arguments.length?(J=Pt(De),xe):J},xe.cornerRadius=function(De){return arguments.length?(te=Pt(De),xe):te},xe.padRadius=function(De){return arguments.length?(oe=De==zn?zn:Pt(De),xe):oe},xe.startAngle=function(De){return arguments.length?(se=Pt(De),xe):se},xe.endAngle=function(De){return arguments.length?(he=Pt(De),xe):he},xe.padAngle=function(De){return arguments.length?(Te=Pt(De),xe):Te},xe.centroid=function(){var De=(+F.apply(this,arguments)+ +J.apply(this,arguments))/2,Pe=(+se.apply(this,arguments)+ +he.apply(this,arguments))/2-Se;return[Math.cos(Pe)*De,Math.sin(Pe)*De]},xe};var zn="auto";function cs(F){return F.innerRadius}function hs(F){return F.outerRadius}function ci(F){return F.startAngle}function hi(F){return F.endAngle}function vs(F){return F&&F.padAngle}function On(F,J,te,oe){return(F-te)*J-(J-oe)*F>0?0:1}function Bn(F,J,te,oe,se){var he=F[0]-J[0],Te=F[1]-J[1],xe=(se?oe:-oe)/Math.sqrt(he*he+Te*Te),Ee=xe*Te,De=-xe*he,Pe=F[0]+Ee,Qe=F[1]+De,$e=J[0]+Ee,ct=J[1]+De,yt=(Pe+$e)/2,tt=(Qe+ct)/2,it=$e-Pe,lt=ct-Qe,gt=it*it+lt*lt,mt=te-oe,ft=Pe*ct-$e*Qe,Nt=(lt<0?-1:1)*Math.sqrt(Math.max(0,mt*mt*gt-ft*ft)),Kt=(ft*lt-it*Nt)/gt,qt=(-ft*it-lt*Nt)/gt,jt=(ft*lt+it*Nt)/gt,nr=(-ft*it+lt*Nt)/gt,ar=Kt-yt,ur=qt-tt,or=jt-yt,lr=nr-tt;return ar*ar+ur*ur>or*or+lr*lr&&(Kt=jt,qt=nr),[[Kt-Ee,qt-De],[Kt*te/mt,qt*te/mt]]}function vi(){return!0}function di(F){var J=zr,te=an,oe=vi,se=Wr,he=se.key,Te=.7;function xe(Ee){var De=[],Pe=[],Qe=-1,$e=Ee.length,ct,yt=Pt(J),tt=Pt(te);function it(){De.push("M",se(F(Pe),Te))}for(;++Qe<$e;)oe.call(this,ct=Ee[Qe],Qe)?Pe.push([+yt.call(this,ct,Qe),+tt.call(this,ct,Qe)]):Pe.length&&(it(),Pe=[]);return Pe.length&&it(),De.length?De.join(""):null}return xe.x=function(Ee){return arguments.length?(J=Ee,xe):J},xe.y=function(Ee){return arguments.length?(te=Ee,xe):te},xe.defined=function(Ee){return arguments.length?(oe=Ee,xe):oe},xe.interpolate=function(Ee){return arguments.length?(typeof Ee=="function"?he=se=Ee:he=(se=la.get(Ee)||Wr).key,xe):he},xe.tension=function(Ee){return arguments.length?(Te=Ee,xe):Te},xe}R.svg.line=function(){return di(P)};var la=R.map({linear:Wr,"linear-closed":pi,step:ds,"step-before":ua,"step-after":fa,basis:gi,"basis-open":ms,"basis-closed":bs,bundle:xs,cardinal:ys,"cardinal-open":ps,"cardinal-closed":gs,monotone:Ts});la.forEach(function(F,J){J.key=F,J.closed=/-closed$/.test(F)});function Wr(F){return F.length>1?F.join("L"):F+"Z"}function pi(F){return F.join("L")+"Z"}function ds(F){for(var J=0,te=F.length,oe=F[0],se=[oe[0],",",oe[1]];++J<te;)se.push("H",(oe[0]+(oe=F[J])[0])/2,"V",oe[1]);return te>1&&se.push("H",oe[0]),se.join("")}function ua(F){for(var J=0,te=F.length,oe=F[0],se=[oe[0],",",oe[1]];++J<te;)se.push("V",(oe=F[J])[1],"H",oe[0]);return se.join("")}function fa(F){for(var J=0,te=F.length,oe=F[0],se=[oe[0],",",oe[1]];++J<te;)se.push("H",(oe=F[J])[0],"V",oe[1]);return se.join("")}function ps(F,J){return F.length<4?Wr(F):F[1]+Un(F.slice(1,-1),ca(F,J))}function gs(F,J){return F.length<3?pi(F):F[0]+Un((F.push(F[0]),F),ca([F[F.length-2]].concat(F,[F[1]]),J))}function ys(F,J){return F.length<3?Wr(F):F[0]+Un(F,ca(F,J))}function Un(F,J){if(J.length<1||F.length!=J.length&&F.length!=J.length+2)return Wr(F);var te=F.length!=J.length,oe="",se=F[0],he=F[1],Te=J[0],xe=Te,Ee=1;if(te&&(oe+="Q"+(he[0]-Te[0]*2/3)+","+(he[1]-Te[1]*2/3)+","+he[0]+","+he[1],se=F[1],Ee=2),J.length>1){xe=J[1],he=F[Ee],Ee++,oe+="C"+(se[0]+Te[0])+","+(se[1]+Te[1])+","+(he[0]-xe[0])+","+(he[1]-xe[1])+","+he[0]+","+he[1];for(var De=2;De<J.length;De++,Ee++)he=F[Ee],xe=J[De],oe+="S"+(he[0]-xe[0])+","+(he[1]-xe[1])+","+he[0]+","+he[1]}if(te){var Pe=F[Ee];oe+="Q"+(he[0]+xe[0]*2/3)+","+(he[1]+xe[1]*2/3)+","+Pe[0]+","+Pe[1]}return oe}function ca(F,J){for(var te=[],oe=(1-J)/2,se,he=F[0],Te=F[1],xe=1,Ee=F.length;++xe<Ee;)se=he,he=Te,Te=F[xe],te.push([oe*(Te[0]-se[0]),oe*(Te[1]-se[1])]);return te}function gi(F){if(F.length<3)return Wr(F);var J=1,te=F.length,oe=F[0],se=oe[0],he=oe[1],Te=[se,se,se,(oe=F[1])[0]],xe=[he,he,he,oe[1]],Ee=[se,",",he,"L",Gr(rn,Te),",",Gr(rn,xe)];for(F.push(F[te-1]);++J<=te;)oe=F[J],Te.shift(),Te.push(oe[0]),xe.shift(),xe.push(oe[1]),ha(Ee,Te,xe);return F.pop(),Ee.push("L",oe),Ee.join("")}function ms(F){if(F.length<4)return Wr(F);for(var J=[],te=-1,oe=F.length,se,he=[0],Te=[0];++te<3;)se=F[te],he.push(se[0]),Te.push(se[1]);for(J.push(Gr(rn,he)+","+Gr(rn,Te)),--te;++te<oe;)se=F[te],he.shift(),he.push(se[0]),Te.shift(),Te.push(se[1]),ha(J,he,Te);return J.join("")}function bs(F){for(var J,te=-1,oe=F.length,se=oe+4,he,Te=[],xe=[];++te<4;)he=F[te%oe],Te.push(he[0]),xe.push(he[1]);for(J=[Gr(rn,Te),",",Gr(rn,xe)],--te;++te<se;)he=F[te%oe],Te.shift(),Te.push(he[0]),xe.shift(),xe.push(he[1]),ha(J,Te,xe);return J.join("")}function xs(F,J){var te=F.length-1;if(te)for(var oe=F[0][0],se=F[0][1],he=F[te][0]-oe,Te=F[te][1]-se,xe=-1,Ee,De;++xe<=te;)Ee=F[xe],De=xe/te,Ee[0]=J*Ee[0]+(1-J)*(oe+De*he),Ee[1]=J*Ee[1]+(1-J)*(se+De*Te);return gi(F)}function Gr(F,J){return F[0]*J[0]+F[1]*J[1]+F[2]*J[2]+F[3]*J[3]}var yi=[0,2/3,1/3,0],mi=[0,1/3,2/3,0],rn=[0,1/6,2/3,1/6];function ha(F,J,te){F.push("C",Gr(yi,J),",",Gr(yi,te),",",Gr(mi,J),",",Gr(mi,te),",",Gr(rn,J),",",Gr(rn,te))}function va(F,J){return(J[1]-F[1])/(J[0]-F[0])}function _s(F){for(var J=0,te=F.length-1,oe=[],se=F[0],he=F[1],Te=oe[0]=va(se,he);++J<te;)oe[J]=(Te+(Te=va(se=he,he=F[J+1])))/2;return oe[J]=Te,oe}function ws(F){for(var J=[],te,oe,se,he,Te=_s(F),xe=-1,Ee=F.length-1;++xe<Ee;)te=va(F[xe],F[xe+1]),f(te)<Le?Te[xe]=Te[xe+1]=0:(oe=Te[xe]/te,se=Te[xe+1]/te,he=oe*oe+se*se,he>9&&(he=te*3/Math.sqrt(he),Te[xe]=he*oe,Te[xe+1]=he*se));for(xe=-1;++xe<=Ee;)he=(F[Math.min(Ee,xe+1)][0]-F[Math.max(0,xe-1)][0])/(6*(1+Te[xe]*Te[xe])),J.push([he||0,Te[xe]*he||0]);return J}function Ts(F){return F.length<3?Wr(F):F[0]+Un(F,ws(F))}R.svg.line.radial=function(){var F=di(bi);return F.radius=F.x,delete F.x,F.angle=F.y,delete F.y,F};function bi(F){for(var J,te=-1,oe=F.length,se,he;++te<oe;)J=F[te],se=J[0],he=J[1]-Se,J[0]=se*Math.cos(he),J[1]=se*Math.sin(he);return F}function xi(F){var J=zr,te=zr,oe=0,se=an,he=vi,Te=Wr,xe=Te.key,Ee=Te,De="L",Pe=.7;function Qe($e){var ct=[],yt=[],tt=[],it=-1,lt=$e.length,gt,mt=Pt(J),ft=Pt(oe),Nt=J===te?function(){return qt}:Pt(te),Kt=oe===se?function(){return jt}:Pt(se),qt,jt;function nr(){ct.push("M",Te(F(tt),Pe),De,Ee(F(yt.reverse()),Pe),"Z")}for(;++it<lt;)he.call(this,gt=$e[it],it)?(yt.push([qt=+mt.call(this,gt,it),jt=+ft.call(this,gt,it)]),tt.push([+Nt.call(this,gt,it),+Kt.call(this,gt,it)])):yt.length&&(nr(),yt=[],tt=[]);return yt.length&&nr(),ct.length?ct.join(""):null}return Qe.x=function($e){return arguments.length?(J=te=$e,Qe):te},Qe.x0=function($e){return arguments.length?(J=$e,Qe):J},Qe.x1=function($e){return arguments.length?(te=$e,Qe):te},Qe.y=function($e){return arguments.length?(oe=se=$e,Qe):se},Qe.y0=function($e){return arguments.length?(oe=$e,Qe):oe},Qe.y1=function($e){return arguments.length?(se=$e,Qe):se},Qe.defined=function($e){return arguments.length?(he=$e,Qe):he},Qe.interpolate=function($e){return arguments.length?(typeof $e=="function"?xe=Te=$e:xe=(Te=la.get($e)||Wr).key,Ee=Te.reverse||Te,De=Te.closed?"M":"L",Qe):xe},Qe.tension=function($e){return arguments.length?(Pe=$e,Qe):Pe},Qe}ua.reverse=fa,fa.reverse=ua,R.svg.area=function(){return xi(P)},R.svg.area.radial=function(){var F=xi(bi);return F.radius=F.x,delete F.x,F.innerRadius=F.x0,delete F.x0,F.outerRadius=F.x1,delete F.x1,F.angle=F.y,delete F.y,F.startAngle=F.y0,delete F.y0,F.endAngle=F.y1,delete F.y1,F};function _i(F){return F.source}function wi(F){return F.target}R.svg.chord=function(){var F=_i,J=wi,te=Ms,oe=ci,se=hi;function he(Pe,Qe){var $e=Te(this,F,Pe,Qe),ct=Te(this,J,Pe,Qe);return"M"+$e.p0+Ee($e.r,$e.p1,$e.a1-$e.a0)+(xe($e,ct)?De($e.r,$e.p1,$e.r,$e.p0):De($e.r,$e.p1,ct.r,ct.p0)+Ee(ct.r,ct.p1,ct.a1-ct.a0)+De(ct.r,ct.p1,$e.r,$e.p0))+"Z"}function Te(Pe,Qe,$e,ct){var yt=Qe.call(Pe,$e,ct),tt=te.call(Pe,yt,ct),it=oe.call(Pe,yt,ct)-Se,lt=se.call(Pe,yt,ct)-Se;return{r:tt,a0:it,a1:lt,p0:[tt*Math.cos(it),tt*Math.sin(it)],p1:[tt*Math.cos(lt),tt*Math.sin(lt)]}}function xe(Pe,Qe){return Pe.a0==Qe.a0&&Pe.a1==Qe.a1}function Ee(Pe,Qe,$e){return"A"+Pe+","+Pe+" 0 "+ +($e>pe)+",1 "+Qe}function De(Pe,Qe,$e,ct){return"Q 0,0 "+ct}return he.radius=function(Pe){return arguments.length?(te=Pt(Pe),he):te},he.source=function(Pe){return arguments.length?(F=Pt(Pe),he):F},he.target=function(Pe){return arguments.length?(J=Pt(Pe),he):J},he.startAngle=function(Pe){return arguments.length?(oe=Pt(Pe),he):oe},he.endAngle=function(Pe){return arguments.length?(se=Pt(Pe),he):se},he};function Ms(F){return F.radius}R.svg.diagonal=function(){var F=_i,J=wi,te=Ti;function oe(se,he){var Te=F.call(this,se,he),xe=J.call(this,se,he),Ee=(Te.y+xe.y)/2,De=[Te,{x:Te.x,y:Ee},{x:xe.x,y:Ee},xe];return De=De.map(te),"M"+De[0]+"C"+De[1]+" "+De[2]+" "+De[3]}return oe.source=function(se){return arguments.length?(F=Pt(se),oe):F},oe.target=function(se){return arguments.length?(J=Pt(se),oe):J},oe.projection=function(se){return arguments.length?(te=se,oe):te},oe};function Ti(F){return[F.x,F.y]}R.svg.diagonal.radial=function(){var F=R.svg.diagonal(),J=Ti,te=F.projection;return F.projection=function(oe){return arguments.length?te(As(J=oe)):J},F};function As(F){return function(){var J=F.apply(this,arguments),te=J[0],oe=J[1]-Se;return[te*Math.cos(oe),te*Math.sin(oe)]}}R.svg.symbol=function(){var F=Cs,J=ks;function te(oe,se){return(Ai.get(F.call(this,oe,se))||Mi)(J.call(this,oe,se))}return te.type=function(oe){return arguments.length?(F=Pt(oe),te):F},te.size=function(oe){return arguments.length?(J=Pt(oe),te):J},te};function ks(){return 64}function Cs(){return"circle"}function Mi(F){var J=Math.sqrt(F/pe);return"M0,"+J+"A"+J+","+J+" 0 1,1 0,"+-J+"A"+J+","+J+" 0 1,1 0,"+J+"Z"}var Ai=R.map({circle:Mi,cross:function(F){var J=Math.sqrt(F/5)/2;return"M"+-3*J+","+-J+"H"+-J+"V"+-3*J+"H"+J+"V"+-J+"H"+3*J+"V"+J+"H"+J+"V"+3*J+"H"+-J+"V"+J+"H"+-3*J+"Z"},diamond:function(F){var J=Math.sqrt(F/(2*ki)),te=J*ki;return"M0,"+-J+"L"+te+",0 0,"+J+" "+-te+",0Z"},square:function(F){var J=Math.sqrt(F)/2;return"M"+-J+","+-J+"L"+J+","+-J+" "+J+","+J+" "+-J+","+J+"Z"},"triangle-down":function(F){var J=Math.sqrt(F/Hn),te=J*Hn/2;return"M0,"+te+"L"+J+","+-te+" "+-J+","+-te+"Z"},"triangle-up":function(F){var J=Math.sqrt(F/Hn),te=J*Hn/2;return"M0,"+-te+"L"+J+","+te+" "+-J+","+te+"Z"}});R.svg.symbolTypes=Ai.keys();var Hn=Math.sqrt(3),ki=Math.tan(30*He);X.transition=function(F){for(var J=sn||++Si,te=pa(F),oe=[],se,he,Te=Vn||{time:Date.now(),ease:ao,delay:0,duration:250},xe=-1,Ee=this.length;++xe<Ee;){oe.push(se=[]);for(var De=this[xe],Pe=-1,Qe=De.length;++Pe<Qe;)(he=De[Pe])&&Yn(he,Pe,te,J,Te),se.push(he)}return An(oe,te,J)},X.interrupt=function(F){return this.each(F==null?Gn:Ci(pa(F)))};var Gn=Ci(pa());function Ci(F){return function(){var J,te,oe;(J=this[F])&&(oe=J[te=J.active])&&(oe.timer.c=null,oe.timer.t=NaN,--J.count?delete J[te]:delete this[F],J.active+=.5,oe.event&&oe.event.interrupt.call(this,this.__data__,oe.index))}}function An(F,J,te){return O(F,Ar),F.namespace=J,F.id=te,F}var Ar=[],Si=0,sn,Vn;Ar.call=X.call,Ar.empty=X.empty,Ar.node=X.node,Ar.size=X.size,R.transition=function(F,J){return F&&F.transition?sn?F.transition(J):F:R.selection().transition(F)},R.transition.prototype=Ar,Ar.select=function(F){var J=this.id,te=this.namespace,oe=[],se,he,Te;F=H(F);for(var xe=-1,Ee=this.length;++xe<Ee;){oe.push(se=[]);for(var De=this[xe],Pe=-1,Qe=De.length;++Pe<Qe;)(Te=De[Pe])&&(he=F.call(Te,Te.__data__,Pe,xe))?("__data__"in Te&&(he.__data__=Te.__data__),Yn(he,Pe,te,J,Te[te][J]),se.push(he)):se.push(null)}return An(oe,te,J)},Ar.selectAll=function(F){var J=this.id,te=this.namespace,oe=[],se,he,Te,xe,Ee;F=K(F);for(var De=-1,Pe=this.length;++De<Pe;)for(var Qe=this[De],$e=-1,ct=Qe.length;++$e<ct;)if(Te=Qe[$e]){Ee=Te[te][J],he=F.call(Te,Te.__data__,$e,De),oe.push(se=[]);for(var yt=-1,tt=he.length;++yt<tt;)(xe=he[yt])&&Yn(xe,yt,te,J,Ee),se.push(xe)}return An(oe,te,J)},Ar.filter=function(F){var J=[],te,oe,se;typeof F!="function"&&(F=be(F));for(var he=0,Te=this.length;he<Te;he++){J.push(te=[]);for(var oe=this[he],xe=0,Ee=oe.length;xe<Ee;xe++)(se=oe[xe])&&F.call(se,se.__data__,xe,he)&&te.push(se)}return An(J,this.namespace,this.id)},Ar.tween=function(F,J){var te=this.id,oe=this.namespace;return arguments.length<2?this.node()[oe][te].tween.get(F):Ie(this,J==null?function(se){se[oe][te].tween.remove(F)}:function(se){se[oe][te].tween.set(F,J)})};function da(F,J,te,oe){var se=F.id,he=F.namespace;return Ie(F,typeof te=="function"?function(Te,xe,Ee){Te[he][se].tween.set(J,oe(te.call(Te,Te.__data__,xe,Ee)))}:(te=oe(te),function(Te){Te[he][se].tween.set(J,te)}))}Ar.attr=function(F,J){if(arguments.length<2){for(J in F)this.attr(J,F[J]);return this}var te=F=="transform"?Ba:on,oe=R.ns.qualify(F);function se(){this.removeAttribute(oe)}function he(){this.removeAttributeNS(oe.space,oe.local)}function Te(Ee){return Ee==null?se:(Ee+="",function(){var De=this.getAttribute(oe),Pe;return De!==Ee&&(Pe=te(De,Ee),function(Qe){this.setAttribute(oe,Pe(Qe))})})}function xe(Ee){return Ee==null?he:(Ee+="",function(){var De=this.getAttributeNS(oe.space,oe.local),Pe;return De!==Ee&&(Pe=te(De,Ee),function(Qe){this.setAttributeNS(oe.space,oe.local,Pe(Qe))})})}return da(this,"attr."+F,J,oe.local?xe:Te)},Ar.attrTween=function(F,J){var te=R.ns.qualify(F);function oe(he,Te){var xe=J.call(this,he,Te,this.getAttribute(te));return xe&&function(Ee){this.setAttribute(te,xe(Ee))}}function se(he,Te){var xe=J.call(this,he,Te,this.getAttributeNS(te.space,te.local));return xe&&function(Ee){this.setAttributeNS(te.space,te.local,xe(Ee))}}return this.tween("attr."+F,te.local?se:oe)},Ar.style=function(F,J,te){var oe=arguments.length;if(oe<3){if(typeof F!="string"){oe<2&&(J="");for(te in F)this.style(te,F[te],J);return this}te=""}function se(){this.style.removeProperty(F)}function he(Te){return Te==null?se:(Te+="",function(){var xe=w(this).getComputedStyle(this,null).getPropertyValue(F),Ee;return xe!==Te&&(Ee=on(xe,Te),function(De){this.style.setProperty(F,Ee(De),te)})})}return da(this,"style."+F,J,he)},Ar.styleTween=function(F,J,te){arguments.length<3&&(te="");function oe(se,he){var Te=J.call(this,se,he,w(this).getComputedStyle(this,null).getPropertyValue(F));return Te&&function(xe){this.style.setProperty(F,Te(xe),te)}}return this.tween("style."+F,oe)},Ar.text=function(F){return da(this,"text",F,Ss)};function Ss(F){return F==null&&(F=""),function(){this.textContent=F}}Ar.remove=function(){var F=this.namespace;return this.each("end.transition",function(){var J;this[F].count<2&&(J=this.parentNode)&&J.removeChild(this)})},Ar.ease=function(F){var J=this.id,te=this.namespace;return arguments.length<1?this.node()[te][J].ease:(typeof F!="function"&&(F=R.ease.apply(R,arguments)),Ie(this,function(oe){oe[te][J].ease=F}))},Ar.delay=function(F){var J=this.id,te=this.namespace;return arguments.length<1?this.node()[te][J].delay:Ie(this,typeof F=="function"?function(oe,se,he){oe[te][J].delay=+F.call(oe,oe.__data__,se,he)}:(F=+F,function(oe){oe[te][J].delay=F}))},Ar.duration=function(F){var J=this.id,te=this.namespace;return arguments.length<1?this.node()[te][J].duration:Ie(this,typeof F=="function"?function(oe,se,he){oe[te][J].duration=Math.max(1,F.call(oe,oe.__data__,se,he))}:(F=Math.max(1,F),function(oe){oe[te][J].duration=F}))},Ar.each=function(F,J){var te=this.id,oe=this.namespace;if(arguments.length<2){var se=Vn,he=sn;try{sn=te,Ie(this,function(Te,xe,Ee){Vn=Te[oe][te],F.call(Te,Te.__data__,xe,Ee)})}finally{Vn=se,sn=he}}else Ie(this,function(Te){var xe=Te[oe][te];(xe.event||(xe.event=R.dispatch("start","end","interrupt"))).on(F,J)});return this},Ar.transition=function(){for(var F=this.id,J=++Si,te=this.namespace,oe=[],se,he,Te,xe,Ee=0,De=this.length;Ee<De;Ee++){oe.push(se=[]);for(var he=this[Ee],Pe=0,Qe=he.length;Pe<Qe;Pe++)(Te=he[Pe])&&(xe=Te[te][F],Yn(Te,Pe,te,J,{time:xe.time,ease:xe.ease,delay:xe.delay+xe.duration,duration:xe.duration})),se.push(Te)}return An(oe,te,J)};function pa(F){return F==null?"__transition__":"__transition_"+F+"__"}function Yn(F,J,te,oe,se){var he=F[te]||(F[te]={active:0,count:0}),Te=he[oe],xe,Ee,De,Pe,Qe;function $e(tt){var it=Te.delay;if(Ee.t=it+xe,it<=tt)return ct(tt-it);Ee.c=ct}function ct(tt){var it=he.active,lt=he[it];lt&&(lt.timer.c=null,lt.timer.t=NaN,--he.count,delete he[it],lt.event&&lt.event.interrupt.call(F,F.__data__,lt.index));for(var gt in he)if(+gt<oe){var mt=he[gt];mt.timer.c=null,mt.timer.t=NaN,--he.count,delete he[gt]}Ee.c=yt,br(function(){return Ee.c&&yt(tt||1)&&(Ee.c=null,Ee.t=NaN),1},0,xe),he.active=oe,Te.event&&Te.event.start.call(F,F.__data__,J),Qe=[],Te.tween.forEach(function(ft,Nt){(Nt=Nt.call(F,F.__data__,J))&&Qe.push(Nt)}),Pe=Te.ease,De=Te.duration}function yt(tt){for(var it=tt/De,lt=Pe(it),gt=Qe.length;gt>0;)Qe[--gt].call(F,lt);if(it>=1)return Te.event&&Te.event.end.call(F,F.__data__,J),--he.count?delete he[oe]:delete F[te],1}Te||(xe=se.time,Ee=br($e,0,xe),Te=he[oe]={tween:new a,time:xe,timer:Ee,delay:se.delay,duration:se.duration,ease:se.ease,index:J},se=null,++he.count)}R.svg.axis=function(){var F=R.scale.linear(),J=Ei,te=6,oe=6,se=3,he=[10],Te=null,xe;function Ee(De){De.each(function(){var Pe=R.select(this),Qe=this.__chart__||F,$e=this.__chart__=F.copy(),ct=Te??($e.ticks?$e.ticks.apply($e,he):$e.domain()),yt=xe??($e.tickFormat?$e.tickFormat.apply($e,he):P),tt=Pe.selectAll(".tick").data(ct,$e),it=tt.enter().insert("g",".domain").attr("class","tick").style("opacity",Le),lt=R.transition(tt.exit()).style("opacity",Le).remove(),gt=R.transition(tt.order()).style("opacity",1),mt=Math.max(te,0)+se,ft,Nt=Fn($e),Kt=Pe.selectAll(".domain").data([0]),qt=(Kt.enter().append("path").attr("class","domain"),R.transition(Kt));it.append("line"),it.append("text");var jt=it.select("line"),nr=gt.select("line"),ar=tt.select("text").text(yt),ur=it.select("text"),or=gt.select("text"),lr=J==="top"||J==="left"?-1:1,dr,Mr,gr,Jt;if(J==="bottom"||J==="top"?(ft=Ls,dr="x",gr="y",Mr="x2",Jt="y2",ar.attr("dy",lr<0?"0em":".71em").style("text-anchor","middle"),qt.attr("d","M"+Nt[0]+","+lr*oe+"V0H"+Nt[1]+"V"+lr*oe)):(ft=Rs,dr="y",gr="x",Mr="y2",Jt="x2",ar.attr("dy",".32em").style("text-anchor",lr<0?"end":"start"),qt.attr("d","M"+lr*oe+","+Nt[0]+"H0V"+Nt[1]+"H"+lr*oe)),jt.attr(Jt,lr*te),ur.attr(gr,lr*mt),nr.attr(Mr,0).attr(Jt,lr*te),or.attr(dr,0).attr(gr,lr*mt),$e.rangeBand){var fr=$e,hr=fr.rangeBand()/2;Qe=$e=function(pr){return fr(pr)+hr}}else Qe.rangeBand?Qe=$e:lt.call(ft,$e,Qe);it.call(ft,Qe,$e),gt.call(ft,$e,$e)})}return Ee.scale=function(De){return arguments.length?(F=De,Ee):F},Ee.orient=function(De){return arguments.length?(J=De in Es?De+"":Ei,Ee):J},Ee.ticks=function(){return arguments.length?(he=N(arguments),Ee):he},Ee.tickValues=function(De){return arguments.length?(Te=De,Ee):Te},Ee.tickFormat=function(De){return arguments.length?(xe=De,Ee):xe},Ee.tickSize=function(De){var Pe=arguments.length;return Pe?(te=+De,oe=+arguments[Pe-1],Ee):te},Ee.innerTickSize=function(De){return arguments.length?(te=+De,Ee):te},Ee.outerTickSize=function(De){return arguments.length?(oe=+De,Ee):oe},Ee.tickPadding=function(De){return arguments.length?(se=+De,Ee):se},Ee.tickSubdivide=function(){return arguments.length&&Ee},Ee};var Ei="bottom",Es={top:1,right:1,bottom:1,left:1};function Ls(F,J,te){F.attr("transform",function(oe){var se=J(oe);return"translate("+(isFinite(se)?se:te(oe))+",0)"})}function Rs(F,J,te){F.attr("transform",function(oe){var se=J(oe);return"translate(0,"+(isFinite(se)?se:te(oe))+")"})}R.svg.brush=function(){var F=Q(Pe,"brushstart","brush","brushend"),J=null,te=null,oe=[0,0],se=[0,0],he,Te,xe=!0,Ee=!0,De=ga[0];function Pe(tt){tt.each(function(){var it=R.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",yt).on("touchstart.brush",yt),lt=it.selectAll(".background").data([0]);lt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),it.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var gt=it.selectAll(".resize").data(De,P);gt.exit().remove(),gt.enter().append("g").attr("class",function(Kt){return"resize "+Kt}).style("cursor",function(Kt){return Ds[Kt]}).append("rect").attr("x",function(Kt){return/[ew]$/.test(Kt)?-3:null}).attr("y",function(Kt){return/^[ns]/.test(Kt)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),gt.style("display",Pe.empty()?"none":null);var mt=R.transition(it),ft=R.transition(lt),Nt;J&&(Nt=Fn(J),ft.attr("x",Nt[0]).attr("width",Nt[1]-Nt[0]),$e(mt)),te&&(Nt=Fn(te),ft.attr("y",Nt[0]).attr("height",Nt[1]-Nt[0]),ct(mt)),Qe(mt)})}Pe.event=function(tt){tt.each(function(){var it=F.of(this,arguments),lt={x:oe,y:se,i:he,j:Te},gt=this.__chart__||lt;this.__chart__=lt,sn?R.select(this).transition().each("start.brush",function(){he=gt.i,Te=gt.j,oe=gt.x,se=gt.y,it({type:"brushstart"})}).tween("brush:brush",function(){var mt=Pn(oe,lt.x),ft=Pn(se,lt.y);return he=Te=null,function(Nt){oe=lt.x=mt(Nt),se=lt.y=ft(Nt),it({type:"brush",mode:"resize"})}}).each("end.brush",function(){he=lt.i,Te=lt.j,it({type:"brush",mode:"resize"}),it({type:"brushend"})}):(it({type:"brushstart"}),it({type:"brush",mode:"resize"}),it({type:"brushend"}))})};function Qe(tt){tt.selectAll(".resize").attr("transform",function(it){return"translate("+oe[+/e$/.test(it)]+","+se[+/^s/.test(it)]+")"})}function $e(tt){tt.select(".extent").attr("x",oe[0]),tt.selectAll(".extent,.n>rect,.s>rect").attr("width",oe[1]-oe[0])}function ct(tt){tt.select(".extent").attr("y",se[0]),tt.selectAll(".extent,.e>rect,.w>rect").attr("height",se[1]-se[0])}function yt(){var tt=this,it=R.select(R.event.target),lt=F.of(tt,arguments),gt=R.select(tt),mt=it.datum(),ft=!/^(n|s)$/.test(mt)&&J,Nt=!/^(e|w)$/.test(mt)&&te,Kt=it.classed("extent"),qt=st(tt),jt,nr=R.mouse(tt),ar,ur=R.select(w(tt)).on("keydown.brush",dr).on("keyup.brush",Mr);if(R.event.changedTouches?ur.on("touchmove.brush",gr).on("touchend.brush",fr):ur.on("mousemove.brush",gr).on("mouseup.brush",fr),gt.interrupt().selectAll("*").interrupt(),Kt)nr[0]=oe[0]-nr[0],nr[1]=se[0]-nr[1];else if(mt){var or=+/w$/.test(mt),lr=+/^n/.test(mt);ar=[oe[1-or]-nr[0],se[1-lr]-nr[1]],nr[0]=oe[or],nr[1]=se[lr]}else R.event.altKey&&(jt=nr.slice());gt.style("pointer-events","none").selectAll(".resize").style("display",null),R.select("body").style("cursor",it.style("cursor")),lt({type:"brushstart"}),gr();function dr(){R.event.keyCode==32&&(Kt||(jt=null,nr[0]-=oe[1],nr[1]-=se[1],Kt=2),q())}function Mr(){R.event.keyCode==32&&Kt==2&&(nr[0]+=oe[1],nr[1]+=se[1],Kt=0,q())}function gr(){var hr=R.mouse(tt),pr=!1;ar&&(hr[0]+=ar[0],hr[1]+=ar[1]),Kt||(R.event.altKey?(jt||(jt=[(oe[0]+oe[1])/2,(se[0]+se[1])/2]),nr[0]=oe[+(hr[0]<jt[0])],nr[1]=se[+(hr[1]<jt[1])]):jt=null),ft&&Jt(hr,J,0)&&($e(gt),pr=!0),Nt&&Jt(hr,te,1)&&(ct(gt),pr=!0),pr&&(Qe(gt),lt({type:"brush",mode:Kt?"move":"resize"}))}function Jt(hr,pr,xr){var kr=Fn(pr),Lr=kr[0],Ir=kr[1],Nr=nr[xr],Fr=xr?se:oe,Ur=Fr[1]-Fr[0],Dr,Hr;if(Kt&&(Lr-=Nr,Ir-=Ur+Nr),Dr=(xr?Ee:xe)?Math.max(Lr,Math.min(Ir,hr[xr])):hr[xr],Kt?Hr=(Dr+=Nr)+Ur:(jt&&(Nr=Math.max(Lr,Math.min(Ir,2*jt[xr]-Dr))),Nr<Dr?(Hr=Dr,Dr=Nr):Hr=Nr),Fr[0]!=Dr||Fr[1]!=Hr)return xr?Te=null:he=null,Fr[0]=Dr,Fr[1]=Hr,!0}function fr(){gr(),gt.style("pointer-events","all").selectAll(".resize").style("display",Pe.empty()?"none":null),R.select("body").style("cursor",null),ur.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),qt(),lt({type:"brushend"})}}return Pe.x=function(tt){return arguments.length?(J=tt,De=ga[!J<<1|!te],Pe):J},Pe.y=function(tt){return arguments.length?(te=tt,De=ga[!J<<1|!te],Pe):te},Pe.clamp=function(tt){return arguments.length?(J&&te?(xe=!!tt[0],Ee=!!tt[1]):J?xe=!!tt:te&&(Ee=!!tt),Pe):J&&te?[xe,Ee]:J?xe:te?Ee:null},Pe.extent=function(tt){var it,lt,gt,mt,ft;return arguments.length?(J&&(it=tt[0],lt=tt[1],te&&(it=it[0],lt=lt[0]),he=[it,lt],J.invert&&(it=J(it),lt=J(lt)),lt<it&&(ft=it,it=lt,lt=ft),(it!=oe[0]||lt!=oe[1])&&(oe=[it,lt])),te&&(gt=tt[0],mt=tt[1],J&&(gt=gt[1],mt=mt[1]),Te=[gt,mt],te.invert&&(gt=te(gt),mt=te(mt)),mt<gt&&(ft=gt,gt=mt,mt=ft),(gt!=se[0]||mt!=se[1])&&(se=[gt,mt])),Pe):(J&&(he?(it=he[0],lt=he[1]):(it=oe[0],lt=oe[1],J.invert&&(it=J.invert(it),lt=J.invert(lt)),lt<it&&(ft=it,it=lt,lt=ft))),te&&(Te?(gt=Te[0],mt=Te[1]):(gt=se[0],mt=se[1],te.invert&&(gt=te.invert(gt),mt=te.invert(mt)),mt<gt&&(ft=gt,gt=mt,mt=ft))),J&&te?[[it,gt],[lt,mt]]:J?[it,lt]:te&&[gt,mt])},Pe.clear=function(){return Pe.empty()||(oe=[0,0],se=[0,0],he=Te=null),Pe},Pe.empty=function(){return!!J&&oe[0]==oe[1]||!!te&&se[0]==se[1]},R.rebind(Pe,F,"on")};var Ds={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ga=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];R.text=rr(function(F){return F.responseText}),R.json=function(F,J){return ir(F,"application/json",Ps,J)};function Ps(F){return JSON.parse(F.responseText)}R.html=function(F,J){return ir(F,"text/html",Is,J)};function Is(F){var J=D.createRange();return J.selectNode(D.body),J.createContextualFragment(F.responseText)}R.xml=rr(function(F){return F.responseXML}),typeof bt=="function"&&bt.amd?(this.d3=R,bt(R)):typeof le=="object"&&le.exports?le.exports=R:this.d3=R}).apply(self)},{}],17:[function(z,le,ae){"use strict";var R=typeof Reflect=="object"?Reflect:null,L=R&&typeof R.apply=="function"?R.apply:function(n,a,h){return Function.prototype.apply.call(n,a,h)},N;R&&typeof R.ownKeys=="function"?N=R.ownKeys:Object.getOwnPropertySymbols?N=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:N=function(n){return Object.getOwnPropertyNames(n)};function D(g){console&&console.warn&&console.warn(g)}var p=Number.isNaN||function(n){return n!==n};function w(){w.init.call(this)}le.exports=w,le.exports.once=f,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var k=10;function d(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(g){if(typeof g!="number"||g<0||p(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");k=g}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||p(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function e(g){return g._maxListeners===void 0?w.defaultMaxListeners:g._maxListeners}w.prototype.getMaxListeners=function(){return e(this)},w.prototype.emit=function(n){for(var a=[],h=1;h<arguments.length;h++)a.push(arguments[h]);var c=n==="error",m=this._events;if(m!==void 0)c=c&&m.error===void 0;else if(!c)return!1;if(c){var o;if(a.length>0&&(o=a[0]),o instanceof Error)throw o;var t=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw t.context=o,t}var i=m[n];if(i===void 0)return!1;if(typeof i=="function")L(i,this,a);else for(var r=i.length,x=y(i,r),h=0;h<r;++h)L(x[h],this,a);return!0};function u(g,n,a,h){var c,m,o;if(d(a),m=g._events,m===void 0?(m=g._events=Object.create(null),g._eventsCount=0):(m.newListener!==void 0&&(g.emit("newListener",n,a.listener?a.listener:a),m=g._events),o=m[n]),o===void 0)o=m[n]=a,++g._eventsCount;else if(typeof o=="function"?o=m[n]=h?[a,o]:[o,a]:h?o.unshift(a):o.push(a),c=e(g),c>0&&o.length>c&&!o.warned){o.warned=!0;var t=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");t.name="MaxListenersExceededWarning",t.emitter=g,t.type=n,t.count=o.length,D(t)}return g}w.prototype.addListener=function(n,a){return u(this,n,a,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(n,a){return u(this,n,a,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(g,n,a){var h={fired:!1,wrapFn:void 0,target:g,type:n,listener:a},c=s.bind(h);return c.listener=a,h.wrapFn=c,c}w.prototype.once=function(n,a){return d(a),this.on(n,l(this,n,a)),this},w.prototype.prependOnceListener=function(n,a){return d(a),this.prependListener(n,l(this,n,a)),this},w.prototype.removeListener=function(n,a){var h,c,m,o,t;if(d(a),c=this._events,c===void 0)return this;if(h=c[n],h===void 0)return this;if(h===a||h.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete c[n],c.removeListener&&this.emit("removeListener",n,h.listener||a));else if(typeof h!="function"){for(m=-1,o=h.length-1;o>=0;o--)if(h[o]===a||h[o].listener===a){t=h[o].listener,m=o;break}if(m<0)return this;m===0?h.shift():T(h,m),h.length===1&&(c[n]=h[0]),c.removeListener!==void 0&&this.emit("removeListener",n,t||a)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(n){var a,h,c;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[n]),this;if(arguments.length===0){var m=Object.keys(h),o;for(c=0;c<m.length;++c)o=m[c],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=h[n],typeof a=="function")this.removeListener(n,a);else if(a!==void 0)for(c=a.length-1;c>=0;c--)this.removeListener(n,a[c]);return this};function b(g,n,a){var h=g._events;if(h===void 0)return[];var c=h[n];return c===void 0?[]:typeof c=="function"?a?[c.listener||c]:[c]:a?_(c):y(c,c.length)}w.prototype.listeners=function(n){return b(this,n,!0)},w.prototype.rawListeners=function(n){return b(this,n,!1)},w.listenerCount=function(g,n){return typeof g.listenerCount=="function"?g.listenerCount(n):v.call(g,n)},w.prototype.listenerCount=v;function v(g){var n=this._events;if(n!==void 0){var a=n[g];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?N(this._events):[]};function y(g,n){for(var a=new Array(n),h=0;h<n;++h)a[h]=g[h];return a}function T(g,n){for(;n+1<g.length;n++)g[n]=g[n+1];g.pop()}function _(g){for(var n=new Array(g.length),a=0;a<n.length;++a)n[a]=g[a].listener||g[a];return n}function f(g,n){return new Promise(function(a,h){function c(){m!==void 0&&g.removeListener("error",m),a([].slice.call(arguments))}var m;n!=="error"&&(m=function(t){g.removeListener(n,c),h(t)},g.once("error",m)),g.once(n,c)})}},{}],18:[function(z,le,ae){le.exports=R;function R(L,N,D){return N<D?L<N?N:L>D?D:L:L<D?D:L>N?N:L}},{}],19:[function(z,le,ae){"use strict";le.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],20:[function(z,le,ae){"use strict";var R=z("color-rgba"),L=z("clamp"),N=z("dtype");le.exports=function(w,k){(k==="float"||!k)&&(k="array"),k==="uint"&&(k="uint8"),k==="uint_clamped"&&(k="uint8_clamped");var d=N(k),e=new d(4),u=k!=="uint8"&&k!=="uint8_clamped";return(!w.length||typeof w=="string")&&(w=R(w),w[0]/=255,w[1]/=255,w[2]/=255),D(w)?(e[0]=w[0],e[1]=w[1],e[2]=w[2],e[3]=w[3]!=null?w[3]:255,u&&(e[0]/=255,e[1]/=255,e[2]/=255,e[3]/=255),e):(u?(e[0]=w[0],e[1]=w[1],e[2]=w[2],e[3]=w[3]!=null?w[3]:1):(e[0]=L(Math.floor(w[0]*255),0,255),e[1]=L(Math.floor(w[1]*255),0,255),e[2]=L(Math.floor(w[2]*255),0,255),e[3]=w[3]==null?255:L(Math.floor(w[3]*255),0,255)),e)};function D(p){return!!(p instanceof Uint8Array||p instanceof Uint8ClampedArray||Array.isArray(p)&&(p[0]>1||p[0]===0)&&(p[1]>1||p[1]===0)&&(p[2]>1||p[2]===0)&&(!p[3]||p[3]>1))}},{clamp:18,"color-rgba":22,dtype:30}],21:[function(z,le,ae){(function(R){(function(){"use strict";var L=z("color-name"),N=z("is-plain-obj"),D=z("defined");le.exports=w;var p={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function w(k){var d,e=[],u=1,s;if(typeof k=="string")if(L[k])e=L[k].slice(),s="rgb";else if(k==="transparent")u=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(k)){var l=k.slice(1),b=l.length,v=b<=4;u=1,v?(e=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],b===4&&(u=parseInt(l[3]+l[3],16)/255)):(e=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],b===8&&(u=parseInt(l[6]+l[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(k)){var y=d[1],T=y==="rgb",l=y.replace(/a$/,"");s=l;var b=l==="cmyk"?4:l==="gray"?1:3;e=d[2].trim().split(/\s*,\s*/).map(function(n,a){if(/%$/.test(n))return a===b?parseFloat(n)/100:l==="rgb"?parseFloat(n)*255/100:parseFloat(n);if(l[a]==="h"){if(/deg$/.test(n))return parseFloat(n);if(p[n]!==void 0)return p[n]}return parseFloat(n)}),y===l&&e.push(1),u=T||e[b]===void 0?1:e[b],e=e.slice(0,b)}else k.length>10&&/[0-9](?:\s|\/)/.test(k)&&(e=k.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),s=k.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(k))s="rgb",e=[k>>>16,(k&65280)>>>8,k&255];else if(N(k)){var _=D(k.r,k.red,k.R,null);_!==null?(s="rgb",e=[_,D(k.g,k.green,k.G),D(k.b,k.blue,k.B)]):(s="hsl",e=[D(k.h,k.hue,k.H),D(k.s,k.saturation,k.S),D(k.l,k.lightness,k.L,k.b,k.brightness)]),u=D(k.a,k.alpha,k.opacity,1),k.opacity!=null&&(u/=100)}else(Array.isArray(k)||R.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(k))&&(e=[k[0],k[1],k[2]],s="rgb",u=k.length===4?k[3]:1);return{space:s,values:e,alpha:u}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":19,defined:29,"is-plain-obj":67}],22:[function(z,le,ae){"use strict";var R=z("color-parse"),L=z("color-space/hsl"),N=z("clamp");le.exports=function(p){var w,k,d,e=R(p);return e.space?(w=Array(3),w[0]=N(e.values[0],0,255),w[1]=N(e.values[1],0,255),w[2]=N(e.values[2],0,255),e.space[0]==="h"&&(w=L.rgb(w)),w.push(N(e.alpha,0,1)),w):[]}},{clamp:18,"color-parse":21,"color-space/hsl":23}],23:[function(z,le,ae){"use strict";var R=z("./rgb");le.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(L){var N=L[0]/360,D=L[1]/100,p=L[2]/100,w,k,d,e,u;if(D===0)return u=p*255,[u,u,u];p<.5?k=p*(1+D):k=p+D-p*D,w=2*p-k,e=[0,0,0];for(var s=0;s<3;s++)d=N+1/3*-(s-1),d<0?d++:d>1&&d--,6*d<1?u=w+(k-w)*6*d:2*d<1?u=k:3*d<2?u=w+(k-w)*(2/3-d)*6:u=w,e[s]=u*255;return e}},R.hsl=function(L){var N=L[0]/255,D=L[1]/255,p=L[2]/255,w=Math.min(N,D,p),k=Math.max(N,D,p),d=k-w,e,u,s;return k===w?e=0:N===k?e=(D-p)/d:D===k?e=2+(p-N)/d:p===k&&(e=4+(N-D)/d),e=Math.min(e*60,360),e<0&&(e+=360),s=(w+k)/2,k===w?u=0:s<=.5?u=d/(k+w):u=d/(2-k-w),[e,u*100,s*100]}},{"./rgb":24}],24:[function(z,le,ae){"use strict";le.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],25:[function(z,le,ae){(function(R,L){typeof ae=="object"&&typeof le<"u"?L(ae):typeof bt=="function"&&bt.amd?bt(["exports"],L):(R=typeof globalThis<"u"?globalThis:R||self,L(R.d3=R.d3||{}))})(this,function(R){"use strict";function L(m){return Math.abs(m=Math.round(m))>=1e21?m.toLocaleString("en").replace(/,/g,""):m.toString(10)}function N(m,o){if((t=(m=o?m.toExponential(o-1):m.toExponential()).indexOf("e"))<0)return null;var t,i=m.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+m.slice(t+1)]}function D(m){return m=N(Math.abs(m)),m?m[1]:NaN}function p(m,o){return function(t,i){for(var r=t.length,x=[],A=0,E=m[0],P=0;r>0&&E>0&&(P+E+1>i&&(E=Math.max(1,i-P)),x.push(t.substring(r-=E,r+E)),!((P+=E+1)>i));)E=m[A=(A+1)%m.length];return x.reverse().join(o)}}function w(m){return function(o){return o.replace(/[0-9]/g,function(t){return m[+t]})}}var k=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d(m){if(!(o=k.exec(m)))throw new Error("invalid format: "+m);var o;return new e({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}d.prototype=e.prototype;function e(m){this.fill=m.fill===void 0?" ":m.fill+"",this.align=m.align===void 0?">":m.align+"",this.sign=m.sign===void 0?"-":m.sign+"",this.symbol=m.symbol===void 0?"":m.symbol+"",this.zero=!!m.zero,this.width=m.width===void 0?void 0:+m.width,this.comma=!!m.comma,this.precision=m.precision===void 0?void 0:+m.precision,this.trim=!!m.trim,this.type=m.type===void 0?"":m.type+""}e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u(m){e:for(var o=m.length,t=1,i=-1,r;t<o;++t)switch(m[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+m[t])break e;i>0&&(i=0);break}return i>0?m.slice(0,i)+m.slice(r+1):m}var s;function l(m,o){var t=N(m,o);if(!t)return m+"";var i=t[0],r=t[1],x=r-(s=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,A=i.length;return x===A?i:x>A?i+new Array(x-A+1).join("0"):x>0?i.slice(0,x)+"."+i.slice(x):"0."+new Array(1-x).join("0")+N(m,Math.max(0,o+x-1))[0]}function b(m,o){var t=N(m,o);if(!t)return m+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var v={"%":function(m,o){return(m*100).toFixed(o)},b:function(m){return Math.round(m).toString(2)},c:function(m){return m+""},d:L,e:function(m,o){return m.toExponential(o)},f:function(m,o){return m.toFixed(o)},g:function(m,o){return m.toPrecision(o)},o:function(m){return Math.round(m).toString(8)},p:function(m,o){return b(m*100,o)},r:b,s:l,X:function(m){return Math.round(m).toString(16).toUpperCase()},x:function(m){return Math.round(m).toString(16)}};function y(m){return m}var T=Array.prototype.map,_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function f(m){var o=m.grouping===void 0||m.thousands===void 0?y:p(T.call(m.grouping,Number),m.thousands+""),t=m.currency===void 0?"":m.currency[0]+"",i=m.currency===void 0?"":m.currency[1]+"",r=m.decimal===void 0?".":m.decimal+"",x=m.numerals===void 0?y:w(T.call(m.numerals,String)),A=m.percent===void 0?"%":m.percent+"",E=m.minus===void 0?"-":m.minus+"",P=m.nan===void 0?"NaN":m.nan+"";function S(M){M=d(M);var I=M.fill,G=M.align,V=M.sign,q=M.symbol,ee=M.zero,Q=M.width,U=M.comma,O=M.precision,Z=M.trim,B=M.type;B==="n"?(U=!0,B="g"):v[B]||(O===void 0&&(O=12),Z=!0,B="g"),(ee||I==="0"&&G==="=")&&(ee=!0,I="0",G="=");var Y=q==="$"?t:q==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",j=q==="$"?i:/[%p]/.test(B)?A:"",X=v[B],H=/[defgprs%]/.test(B);O=O===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function K(W){var $=Y,re=j,de,ve,ue;if(B==="c")re=X(W)+re,W="";else{W=+W;var ce=W<0||1/W<0;if(W=isNaN(W)?P:X(Math.abs(W),O),Z&&(W=u(W)),ce&&+W==0&&V!=="+"&&(ce=!1),$=(ce?V==="("?V:E:V==="-"||V==="("?"":V)+$,re=(B==="s"?_[8+s/3]:"")+re+(ce&&V==="("?")":""),H){for(de=-1,ve=W.length;++de<ve;)if(ue=W.charCodeAt(de),48>ue||ue>57){re=(ue===46?r+W.slice(de+1):W.slice(de))+re,W=W.slice(0,de);break}}}U&&!ee&&(W=o(W,1/0));var _e=$.length+W.length+re.length,fe=_e<Q?new Array(Q-_e+1).join(I):"";switch(U&&ee&&(W=o(fe+W,fe.length?Q-re.length:1/0),fe=""),G){case"<":W=$+W+re+fe;break;case"=":W=$+fe+W+re;break;case"^":W=fe.slice(0,_e=fe.length>>1)+$+W+re+fe.slice(_e);break;default:W=fe+$+W+re;break}return x(W)}return K.toString=function(){return M+""},K}function C(M,I){var G=S((M=d(M),M.type="f",M)),V=Math.max(-8,Math.min(8,Math.floor(D(I)/3)))*3,q=Math.pow(10,-V),ee=_[8+V/3];return function(Q){return G(q*Q)+ee}}return{format:S,formatPrefix:C}}var g;n({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function n(m){return g=f(m),R.format=g.format,R.formatPrefix=g.formatPrefix,g}function a(m){return Math.max(0,-D(Math.abs(m)))}function h(m,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(D(o)/3)))*3-D(Math.abs(m)))}function c(m,o){return m=Math.abs(m),o=Math.abs(o)-m,Math.max(0,D(o)-D(m))+1}R.FormatSpecifier=e,R.formatDefaultLocale=n,R.formatLocale=f,R.formatSpecifier=d,R.precisionFixed=a,R.precisionPrefix=h,R.precisionRound=c,Object.defineProperty(R,"__esModule",{value:!0})})},{}],26:[function(z,le,ae){(function(R,L){typeof ae=="object"&&typeof le<"u"?L(ae,z("d3-time")):typeof bt=="function"&&bt.amd?bt(["exports","d3-time"],L):(R=R||self,L(R.d3=R.d3||{},R.d3))})(this,function(R,L){"use strict";function N(ke){if(0<=ke.y&&ke.y<100){var Le=new Date(-1,ke.m,ke.d,ke.H,ke.M,ke.S,ke.L);return Le.setFullYear(ke.y),Le}return new Date(ke.y,ke.m,ke.d,ke.H,ke.M,ke.S,ke.L)}function D(ke){if(0<=ke.y&&ke.y<100){var Le=new Date(Date.UTC(-1,ke.m,ke.d,ke.H,ke.M,ke.S,ke.L));return Le.setUTCFullYear(ke.y),Le}return new Date(Date.UTC(ke.y,ke.m,ke.d,ke.H,ke.M,ke.S,ke.L))}function p(ke,Le,Be){return{y:ke,m:Le,d:Be,H:0,M:0,S:0,L:0}}function w(ke){var Le=ke.dateTime,Be=ke.date,pe=ke.time,Ae=ke.periods,Ce=ke.days,Se=ke.shortDays,He=ke.months,Ne=ke.shortMonths,qe=b(Ae),at=v(Ae),nt=b(Ce),Ze=v(Ce),ht=b(Se),kt=v(Se),xt=b(He),Bt=v(He),Zt=b(Ne),Gt=v(Ne),Rt={a:ot,A:_t,b:Mt,B:St,c:null,d:M,e:M,f:ee,H:I,I:G,j:V,L:q,m:Q,M:U,p:Dt,q:Ot,Q:Fe,s:Ge,S:O,u:Z,U:B,V:Y,w:j,W:X,x:null,X:null,y:H,Y:K,Z:W,"%":We},Wt={a:Ht,A:er,b:wt,B:Et,c:null,d:$,e:$,f:ce,H:re,I:de,j:ve,L:ue,m:_e,M:fe,p:zt,q:Ut,Q:Fe,s:Ge,S:ne,u:ie,U:me,V:we,w:be,W:Me,x:null,X:null,y:Ie,Y:Ke,Z:Oe,"%":We},It={a:ge,A:Re,b:ze,B:Ue,c:je,d:o,e:o,f:E,H:i,I:i,j:t,L:A,m,M:r,p:ye,q:c,Q:S,s:C,S:x,u:T,U:_,V:f,w:y,W:g,x:Ye,X:et,y:a,Y:n,Z:h,"%":P};Rt.x=vt(Be,Rt),Rt.X=vt(pe,Rt),Rt.c=vt(Le,Rt),Wt.x=vt(Be,Wt),Wt.X=vt(pe,Wt),Wt.c=vt(Le,Wt);function vt(pt,Ct){return function(Lt){var At=[],Vt=-1,Qt=0,$t=pt.length,Pt,rr,ir;for(Lt instanceof Date||(Lt=new Date(+Lt));++Vt<$t;)pt.charCodeAt(Vt)===37&&(At.push(pt.slice(Qt,Vt)),(rr=k[Pt=pt.charAt(++Vt)])!=null?Pt=pt.charAt(++Vt):rr=Pt==="e"?" ":"0",(ir=Ct[Pt])&&(Pt=ir(Lt,rr)),At.push(Pt),Qt=Vt+1);return At.push(pt.slice(Qt,Vt)),At.join("")}}function Yt(pt,Ct){return function(Lt){var At=p(1900,void 0,1),Vt=Ft(At,pt,Lt+="",0),Qt,$t;if(Vt!=Lt.length)return null;if("Q"in At)return new Date(At.Q);if("s"in At)return new Date(At.s*1e3+("L"in At?At.L:0));if(Ct&&!("Z"in At)&&(At.Z=0),"p"in At&&(At.H=At.H%12+At.p*12),At.m===void 0&&(At.m="q"in At?At.q:0),"V"in At){if(At.V<1||At.V>53)return null;"w"in At||(At.w=1),"Z"in At?(Qt=D(p(At.y,0,1)),$t=Qt.getUTCDay(),Qt=$t>4||$t===0?L.utcMonday.ceil(Qt):L.utcMonday(Qt),Qt=L.utcDay.offset(Qt,(At.V-1)*7),At.y=Qt.getUTCFullYear(),At.m=Qt.getUTCMonth(),At.d=Qt.getUTCDate()+(At.w+6)%7):(Qt=N(p(At.y,0,1)),$t=Qt.getDay(),Qt=$t>4||$t===0?L.timeMonday.ceil(Qt):L.timeMonday(Qt),Qt=L.timeDay.offset(Qt,(At.V-1)*7),At.y=Qt.getFullYear(),At.m=Qt.getMonth(),At.d=Qt.getDate()+(At.w+6)%7)}else("W"in At||"U"in At)&&("w"in At||(At.w="u"in At?At.u%7:"W"in At?1:0),$t="Z"in At?D(p(At.y,0,1)).getUTCDay():N(p(At.y,0,1)).getDay(),At.m=0,At.d="W"in At?(At.w+6)%7+At.W*7-($t+5)%7:At.w+At.U*7-($t+6)%7);return"Z"in At?(At.H+=At.Z/100|0,At.M+=At.Z%100,D(At)):N(At)}}function Ft(pt,Ct,Lt,At){for(var Vt=0,Qt=Ct.length,$t=Lt.length,Pt,rr;Vt<Qt;){if(At>=$t)return-1;if(Pt=Ct.charCodeAt(Vt++),Pt===37){if(Pt=Ct.charAt(Vt++),rr=It[Pt in k?Ct.charAt(Vt++):Pt],!rr||(At=rr(pt,Lt,At))<0)return-1}else if(Pt!=Lt.charCodeAt(At++))return-1}return At}function ye(pt,Ct,Lt){var At=qe.exec(Ct.slice(Lt));return At?(pt.p=at[At[0].toLowerCase()],Lt+At[0].length):-1}function ge(pt,Ct,Lt){var At=ht.exec(Ct.slice(Lt));return At?(pt.w=kt[At[0].toLowerCase()],Lt+At[0].length):-1}function Re(pt,Ct,Lt){var At=nt.exec(Ct.slice(Lt));return At?(pt.w=Ze[At[0].toLowerCase()],Lt+At[0].length):-1}function ze(pt,Ct,Lt){var At=Zt.exec(Ct.slice(Lt));return At?(pt.m=Gt[At[0].toLowerCase()],Lt+At[0].length):-1}function Ue(pt,Ct,Lt){var At=xt.exec(Ct.slice(Lt));return At?(pt.m=Bt[At[0].toLowerCase()],Lt+At[0].length):-1}function je(pt,Ct,Lt){return Ft(pt,Le,Ct,Lt)}function Ye(pt,Ct,Lt){return Ft(pt,Be,Ct,Lt)}function et(pt,Ct,Lt){return Ft(pt,pe,Ct,Lt)}function ot(pt){return Se[pt.getDay()]}function _t(pt){return Ce[pt.getDay()]}function Mt(pt){return Ne[pt.getMonth()]}function St(pt){return He[pt.getMonth()]}function Dt(pt){return Ae[+(pt.getHours()>=12)]}function Ot(pt){return 1+~~(pt.getMonth()/3)}function Ht(pt){return Se[pt.getUTCDay()]}function er(pt){return Ce[pt.getUTCDay()]}function wt(pt){return Ne[pt.getUTCMonth()]}function Et(pt){return He[pt.getUTCMonth()]}function zt(pt){return Ae[+(pt.getUTCHours()>=12)]}function Ut(pt){return 1+~~(pt.getUTCMonth()/3)}return{format:function(pt){var Ct=vt(pt+="",Rt);return Ct.toString=function(){return pt},Ct},parse:function(pt){var Ct=Yt(pt+="",!1);return Ct.toString=function(){return pt},Ct},utcFormat:function(pt){var Ct=vt(pt+="",Wt);return Ct.toString=function(){return pt},Ct},utcParse:function(pt){var Ct=Yt(pt+="",!0);return Ct.toString=function(){return pt},Ct}}}var k={"-":"",_:" ","0":"0"},d=/^\s*\d+/,e=/^%/,u=/[\\^$*+?|[\]().{}]/g;function s(ke,Le,Be){var pe=ke<0?"-":"",Ae=(pe?-ke:ke)+"",Ce=Ae.length;return pe+(Ce<Be?new Array(Be-Ce+1).join(Le)+Ae:Ae)}function l(ke){return ke.replace(u,"\\$&")}function b(ke){return new RegExp("^(?:"+ke.map(l).join("|")+")","i")}function v(ke){for(var Le={},Be=-1,pe=ke.length;++Be<pe;)Le[ke[Be].toLowerCase()]=Be;return Le}function y(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+1));return pe?(ke.w=+pe[0],Be+pe[0].length):-1}function T(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+1));return pe?(ke.u=+pe[0],Be+pe[0].length):-1}function _(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.U=+pe[0],Be+pe[0].length):-1}function f(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.V=+pe[0],Be+pe[0].length):-1}function g(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.W=+pe[0],Be+pe[0].length):-1}function n(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+4));return pe?(ke.y=+pe[0],Be+pe[0].length):-1}function a(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.y=+pe[0]+(+pe[0]>68?1900:2e3),Be+pe[0].length):-1}function h(ke,Le,Be){var pe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Le.slice(Be,Be+6));return pe?(ke.Z=pe[1]?0:-(pe[2]+(pe[3]||"00")),Be+pe[0].length):-1}function c(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+1));return pe?(ke.q=pe[0]*3-3,Be+pe[0].length):-1}function m(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.m=pe[0]-1,Be+pe[0].length):-1}function o(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.d=+pe[0],Be+pe[0].length):-1}function t(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+3));return pe?(ke.m=0,ke.d=+pe[0],Be+pe[0].length):-1}function i(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.H=+pe[0],Be+pe[0].length):-1}function r(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.M=+pe[0],Be+pe[0].length):-1}function x(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+2));return pe?(ke.S=+pe[0],Be+pe[0].length):-1}function A(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+3));return pe?(ke.L=+pe[0],Be+pe[0].length):-1}function E(ke,Le,Be){var pe=d.exec(Le.slice(Be,Be+6));return pe?(ke.L=Math.floor(pe[0]/1e3),Be+pe[0].length):-1}function P(ke,Le,Be){var pe=e.exec(Le.slice(Be,Be+1));return pe?Be+pe[0].length:-1}function S(ke,Le,Be){var pe=d.exec(Le.slice(Be));return pe?(ke.Q=+pe[0],Be+pe[0].length):-1}function C(ke,Le,Be){var pe=d.exec(Le.slice(Be));return pe?(ke.s=+pe[0],Be+pe[0].length):-1}function M(ke,Le){return s(ke.getDate(),Le,2)}function I(ke,Le){return s(ke.getHours(),Le,2)}function G(ke,Le){return s(ke.getHours()%12||12,Le,2)}function V(ke,Le){return s(1+L.timeDay.count(L.timeYear(ke),ke),Le,3)}function q(ke,Le){return s(ke.getMilliseconds(),Le,3)}function ee(ke,Le){return q(ke,Le)+"000"}function Q(ke,Le){return s(ke.getMonth()+1,Le,2)}function U(ke,Le){return s(ke.getMinutes(),Le,2)}function O(ke,Le){return s(ke.getSeconds(),Le,2)}function Z(ke){var Le=ke.getDay();return Le===0?7:Le}function B(ke,Le){return s(L.timeSunday.count(L.timeYear(ke)-1,ke),Le,2)}function Y(ke,Le){var Be=ke.getDay();return ke=Be>=4||Be===0?L.timeThursday(ke):L.timeThursday.ceil(ke),s(L.timeThursday.count(L.timeYear(ke),ke)+(L.timeYear(ke).getDay()===4),Le,2)}function j(ke){return ke.getDay()}function X(ke,Le){return s(L.timeMonday.count(L.timeYear(ke)-1,ke),Le,2)}function H(ke,Le){return s(ke.getFullYear()%100,Le,2)}function K(ke,Le){return s(ke.getFullYear()%1e4,Le,4)}function W(ke){var Le=ke.getTimezoneOffset();return(Le>0?"-":(Le*=-1,"+"))+s(Le/60|0,"0",2)+s(Le%60,"0",2)}function $(ke,Le){return s(ke.getUTCDate(),Le,2)}function re(ke,Le){return s(ke.getUTCHours(),Le,2)}function de(ke,Le){return s(ke.getUTCHours()%12||12,Le,2)}function ve(ke,Le){return s(1+L.utcDay.count(L.utcYear(ke),ke),Le,3)}function ue(ke,Le){return s(ke.getUTCMilliseconds(),Le,3)}function ce(ke,Le){return ue(ke,Le)+"000"}function _e(ke,Le){return s(ke.getUTCMonth()+1,Le,2)}function fe(ke,Le){return s(ke.getUTCMinutes(),Le,2)}function ne(ke,Le){return s(ke.getUTCSeconds(),Le,2)}function ie(ke){var Le=ke.getUTCDay();return Le===0?7:Le}function me(ke,Le){return s(L.utcSunday.count(L.utcYear(ke)-1,ke),Le,2)}function we(ke,Le){var Be=ke.getUTCDay();return ke=Be>=4||Be===0?L.utcThursday(ke):L.utcThursday.ceil(ke),s(L.utcThursday.count(L.utcYear(ke),ke)+(L.utcYear(ke).getUTCDay()===4),Le,2)}function be(ke){return ke.getUTCDay()}function Me(ke,Le){return s(L.utcMonday.count(L.utcYear(ke)-1,ke),Le,2)}function Ie(ke,Le){return s(ke.getUTCFullYear()%100,Le,2)}function Ke(ke,Le){return s(ke.getUTCFullYear()%1e4,Le,4)}function Oe(){return"+0000"}function We(){return"%"}function Fe(ke){return+ke}function Ge(ke){return Math.floor(+ke/1e3)}var Xe;ut({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ut(ke){return Xe=w(ke),R.timeFormat=Xe.format,R.timeParse=Xe.parse,R.utcFormat=Xe.utcFormat,R.utcParse=Xe.utcParse,Xe}var rt="%Y-%m-%dT%H:%M:%S.%LZ";function dt(ke){return ke.toISOString()}var st=Date.prototype.toISOString?dt:R.utcFormat(rt);function Ve(ke){var Le=new Date(ke);return isNaN(Le)?null:Le}var Je=+new Date("2000-01-01T00:00:00.000Z")?Ve:R.utcParse(rt);R.isoFormat=st,R.isoParse=Je,R.timeFormatDefaultLocale=ut,R.timeFormatLocale=w,Object.defineProperty(R,"__esModule",{value:!0})})},{"d3-time":27}],27:[function(z,le,ae){(function(R,L){typeof ae=="object"&&typeof le<"u"?L(ae):typeof bt=="function"&&bt.amd?bt(["exports"],L):(R=R||self,L(R.d3=R.d3||{}))})(this,function(R){"use strict";var L=new Date,N=new Date;function D(be,Me,Ie,Ke){function Oe(We){return be(We=arguments.length===0?new Date:new Date(+We)),We}return Oe.floor=function(We){return be(We=new Date(+We)),We},Oe.ceil=function(We){return be(We=new Date(We-1)),Me(We,1),be(We),We},Oe.round=function(We){var Fe=Oe(We),Ge=Oe.ceil(We);return We-Fe<Ge-We?Fe:Ge},Oe.offset=function(We,Fe){return Me(We=new Date(+We),Fe==null?1:Math.floor(Fe)),We},Oe.range=function(We,Fe,Ge){var Xe=[],ut;if(We=Oe.ceil(We),Ge=Ge==null?1:Math.floor(Ge),!(We<Fe)||!(Ge>0))return Xe;do Xe.push(ut=new Date(+We)),Me(We,Ge),be(We);while(ut<We&&We<Fe);return Xe},Oe.filter=function(We){return D(function(Fe){if(Fe>=Fe)for(;be(Fe),!We(Fe);)Fe.setTime(Fe-1)},function(Fe,Ge){if(Fe>=Fe)if(Ge<0)for(;++Ge<=0;)for(;Me(Fe,-1),!We(Fe););else for(;--Ge>=0;)for(;Me(Fe,1),!We(Fe););})},Ie&&(Oe.count=function(We,Fe){return L.setTime(+We),N.setTime(+Fe),be(L),be(N),Math.floor(Ie(L,N))},Oe.every=function(We){return We=Math.floor(We),!isFinite(We)||!(We>0)?null:We>1?Oe.filter(Ke?function(Fe){return Ke(Fe)%We===0}:function(Fe){return Oe.count(0,Fe)%We===0}):Oe}),Oe}var p=D(function(){},function(be,Me){be.setTime(+be+Me)},function(be,Me){return Me-be});p.every=function(be){return be=Math.floor(be),!isFinite(be)||!(be>0)?null:be>1?D(function(Me){Me.setTime(Math.floor(Me/be)*be)},function(Me,Ie){Me.setTime(+Me+Ie*be)},function(Me,Ie){return(Ie-Me)/be}):p};var w=p.range,k=1e3,d=6e4,e=36e5,u=864e5,s=6048e5,l=D(function(be){be.setTime(be-be.getMilliseconds())},function(be,Me){be.setTime(+be+Me*k)},function(be,Me){return(Me-be)/k},function(be){return be.getUTCSeconds()}),b=l.range,v=D(function(be){be.setTime(be-be.getMilliseconds()-be.getSeconds()*k)},function(be,Me){be.setTime(+be+Me*d)},function(be,Me){return(Me-be)/d},function(be){return be.getMinutes()}),y=v.range,T=D(function(be){be.setTime(be-be.getMilliseconds()-be.getSeconds()*k-be.getMinutes()*d)},function(be,Me){be.setTime(+be+Me*e)},function(be,Me){return(Me-be)/e},function(be){return be.getHours()}),_=T.range,f=D(function(be){be.setHours(0,0,0,0)},function(be,Me){be.setDate(be.getDate()+Me)},function(be,Me){return(Me-be-(Me.getTimezoneOffset()-be.getTimezoneOffset())*d)/u},function(be){return be.getDate()-1}),g=f.range;function n(be){return D(function(Me){Me.setDate(Me.getDate()-(Me.getDay()+7-be)%7),Me.setHours(0,0,0,0)},function(Me,Ie){Me.setDate(Me.getDate()+Ie*7)},function(Me,Ie){return(Ie-Me-(Ie.getTimezoneOffset()-Me.getTimezoneOffset())*d)/s})}var a=n(0),h=n(1),c=n(2),m=n(3),o=n(4),t=n(5),i=n(6),r=a.range,x=h.range,A=c.range,E=m.range,P=o.range,S=t.range,C=i.range,M=D(function(be){be.setDate(1),be.setHours(0,0,0,0)},function(be,Me){be.setMonth(be.getMonth()+Me)},function(be,Me){return Me.getMonth()-be.getMonth()+(Me.getFullYear()-be.getFullYear())*12},function(be){return be.getMonth()}),I=M.range,G=D(function(be){be.setMonth(0,1),be.setHours(0,0,0,0)},function(be,Me){be.setFullYear(be.getFullYear()+Me)},function(be,Me){return Me.getFullYear()-be.getFullYear()},function(be){return be.getFullYear()});G.every=function(be){return!isFinite(be=Math.floor(be))||!(be>0)?null:D(function(Me){Me.setFullYear(Math.floor(Me.getFullYear()/be)*be),Me.setMonth(0,1),Me.setHours(0,0,0,0)},function(Me,Ie){Me.setFullYear(Me.getFullYear()+Ie*be)})};var V=G.range,q=D(function(be){be.setUTCSeconds(0,0)},function(be,Me){be.setTime(+be+Me*d)},function(be,Me){return(Me-be)/d},function(be){return be.getUTCMinutes()}),ee=q.range,Q=D(function(be){be.setUTCMinutes(0,0,0)},function(be,Me){be.setTime(+be+Me*e)},function(be,Me){return(Me-be)/e},function(be){return be.getUTCHours()}),U=Q.range,O=D(function(be){be.setUTCHours(0,0,0,0)},function(be,Me){be.setUTCDate(be.getUTCDate()+Me)},function(be,Me){return(Me-be)/u},function(be){return be.getUTCDate()-1}),Z=O.range;function B(be){return D(function(Me){Me.setUTCDate(Me.getUTCDate()-(Me.getUTCDay()+7-be)%7),Me.setUTCHours(0,0,0,0)},function(Me,Ie){Me.setUTCDate(Me.getUTCDate()+Ie*7)},function(Me,Ie){return(Ie-Me)/s})}var Y=B(0),j=B(1),X=B(2),H=B(3),K=B(4),W=B(5),$=B(6),re=Y.range,de=j.range,ve=X.range,ue=H.range,ce=K.range,_e=W.range,fe=$.range,ne=D(function(be){be.setUTCDate(1),be.setUTCHours(0,0,0,0)},function(be,Me){be.setUTCMonth(be.getUTCMonth()+Me)},function(be,Me){return Me.getUTCMonth()-be.getUTCMonth()+(Me.getUTCFullYear()-be.getUTCFullYear())*12},function(be){return be.getUTCMonth()}),ie=ne.range,me=D(function(be){be.setUTCMonth(0,1),be.setUTCHours(0,0,0,0)},function(be,Me){be.setUTCFullYear(be.getUTCFullYear()+Me)},function(be,Me){return Me.getUTCFullYear()-be.getUTCFullYear()},function(be){return be.getUTCFullYear()});me.every=function(be){return!isFinite(be=Math.floor(be))||!(be>0)?null:D(function(Me){Me.setUTCFullYear(Math.floor(Me.getUTCFullYear()/be)*be),Me.setUTCMonth(0,1),Me.setUTCHours(0,0,0,0)},function(Me,Ie){Me.setUTCFullYear(Me.getUTCFullYear()+Ie*be)})};var we=me.range;R.timeDay=f,R.timeDays=g,R.timeFriday=t,R.timeFridays=S,R.timeHour=T,R.timeHours=_,R.timeInterval=D,R.timeMillisecond=p,R.timeMilliseconds=w,R.timeMinute=v,R.timeMinutes=y,R.timeMonday=h,R.timeMondays=x,R.timeMonth=M,R.timeMonths=I,R.timeSaturday=i,R.timeSaturdays=C,R.timeSecond=l,R.timeSeconds=b,R.timeSunday=a,R.timeSundays=r,R.timeThursday=o,R.timeThursdays=P,R.timeTuesday=c,R.timeTuesdays=A,R.timeWednesday=m,R.timeWednesdays=E,R.timeWeek=a,R.timeWeeks=r,R.timeYear=G,R.timeYears=V,R.utcDay=O,R.utcDays=Z,R.utcFriday=W,R.utcFridays=_e,R.utcHour=Q,R.utcHours=U,R.utcMillisecond=p,R.utcMilliseconds=w,R.utcMinute=q,R.utcMinutes=ee,R.utcMonday=j,R.utcMondays=de,R.utcMonth=ne,R.utcMonths=ie,R.utcSaturday=$,R.utcSaturdays=fe,R.utcSecond=l,R.utcSeconds=b,R.utcSunday=Y,R.utcSundays=re,R.utcThursday=K,R.utcThursdays=ce,R.utcTuesday=X,R.utcTuesdays=ve,R.utcWednesday=H,R.utcWednesdays=ue,R.utcWeek=Y,R.utcWeeks=re,R.utcYear=me,R.utcYears=we,Object.defineProperty(R,"__esModule",{value:!0})})},{}],28:[function(z,le,ae){arguments[4][27][0].apply(ae,arguments)},{dup:27}],29:[function(z,le,ae){le.exports=function(){for(var R=0;R<arguments.length;R++)if(arguments[R]!==void 0)return arguments[R]}},{}],30:[function(z,le,ae){le.exports=function(R){switch(R){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],31:[function(z,le,ae){"use strict";var R=z("is-string-blank");le.exports=function(L){var N=typeof L;if(N==="string"){var D=L;if(L=+L,L===0&&R(D))return!1}else if(N!=="number")return!1;return L-L<1}},{"is-string-blank":68}],32:[function(z,le,ae){le.exports=R;function R(L,N){if(typeof L!="string")throw new TypeError("must specify type string");if(N=N||{},typeof document>"u"&&!N.canvas)return null;var D=N.canvas||document.createElement("canvas");typeof N.width=="number"&&(D.width=N.width),typeof N.height=="number"&&(D.height=N.height);var p=N,w;try{var k=[L];L.indexOf("webgl")===0&&k.push("experimental-"+L);for(var d=0;d<k.length;d++)if(w=D.getContext(k[d],p),w)return w}catch{w=null}return w||null}},{}],33:[function(z,le,ae){le.exports=R;function R(L,N){var D=N[0],p=N[1],w=N[2],k=N[3],d=N[4],e=N[5],u=N[6],s=N[7],l=N[8],b=N[9],v=N[10],y=N[11],T=N[12],_=N[13],f=N[14],g=N[15];return L[0]=e*(v*g-y*f)-b*(u*g-s*f)+_*(u*y-s*v),L[1]=-(p*(v*g-y*f)-b*(w*g-k*f)+_*(w*y-k*v)),L[2]=p*(u*g-s*f)-e*(w*g-k*f)+_*(w*s-k*u),L[3]=-(p*(u*y-s*v)-e*(w*y-k*v)+b*(w*s-k*u)),L[4]=-(d*(v*g-y*f)-l*(u*g-s*f)+T*(u*y-s*v)),L[5]=D*(v*g-y*f)-l*(w*g-k*f)+T*(w*y-k*v),L[6]=-(D*(u*g-s*f)-d*(w*g-k*f)+T*(w*s-k*u)),L[7]=D*(u*y-s*v)-d*(w*y-k*v)+l*(w*s-k*u),L[8]=d*(b*g-y*_)-l*(e*g-s*_)+T*(e*y-s*b),L[9]=-(D*(b*g-y*_)-l*(p*g-k*_)+T*(p*y-k*b)),L[10]=D*(e*g-s*_)-d*(p*g-k*_)+T*(p*s-k*e),L[11]=-(D*(e*y-s*b)-d*(p*y-k*b)+l*(p*s-k*e)),L[12]=-(d*(b*f-v*_)-l*(e*f-u*_)+T*(e*v-u*b)),L[13]=D*(b*f-v*_)-l*(p*f-w*_)+T*(p*v-w*b),L[14]=-(D*(e*f-u*_)-d*(p*f-w*_)+T*(p*u-w*e)),L[15]=D*(e*v-u*b)-d*(p*v-w*b)+l*(p*u-w*e),L}},{}],34:[function(z,le,ae){le.exports=R;function R(L){var N=new Float32Array(16);return N[0]=L[0],N[1]=L[1],N[2]=L[2],N[3]=L[3],N[4]=L[4],N[5]=L[5],N[6]=L[6],N[7]=L[7],N[8]=L[8],N[9]=L[9],N[10]=L[10],N[11]=L[11],N[12]=L[12],N[13]=L[13],N[14]=L[14],N[15]=L[15],N}},{}],35:[function(z,le,ae){le.exports=R;function R(L,N){return L[0]=N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],L[4]=N[4],L[5]=N[5],L[6]=N[6],L[7]=N[7],L[8]=N[8],L[9]=N[9],L[10]=N[10],L[11]=N[11],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15],L}},{}],36:[function(z,le,ae){le.exports=R;function R(){var L=new Float32Array(16);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],37:[function(z,le,ae){le.exports=R;function R(L){var N=L[0],D=L[1],p=L[2],w=L[3],k=L[4],d=L[5],e=L[6],u=L[7],s=L[8],l=L[9],b=L[10],v=L[11],y=L[12],T=L[13],_=L[14],f=L[15],g=N*d-D*k,n=N*e-p*k,a=N*u-w*k,h=D*e-p*d,c=D*u-w*d,m=p*u-w*e,o=s*T-l*y,t=s*_-b*y,i=s*f-v*y,r=l*_-b*T,x=l*f-v*T,A=b*f-v*_;return g*A-n*x+a*r+h*i-c*t+m*o}},{}],38:[function(z,le,ae){le.exports=R;function R(L,N){var D=N[0],p=N[1],w=N[2],k=N[3],d=D+D,e=p+p,u=w+w,s=D*d,l=p*d,b=p*e,v=w*d,y=w*e,T=w*u,_=k*d,f=k*e,g=k*u;return L[0]=1-b-T,L[1]=l+g,L[2]=v-f,L[3]=0,L[4]=l-g,L[5]=1-s-T,L[6]=y+_,L[7]=0,L[8]=v+f,L[9]=y-_,L[10]=1-s-b,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],39:[function(z,le,ae){le.exports=R;function R(L,N,D){var p,w,k,d=D[0],e=D[1],u=D[2],s=Math.sqrt(d*d+e*e+u*u);return Math.abs(s)<1e-6?null:(s=1/s,d*=s,e*=s,u*=s,p=Math.sin(N),w=Math.cos(N),k=1-w,L[0]=d*d*k+w,L[1]=e*d*k+u*p,L[2]=u*d*k-e*p,L[3]=0,L[4]=d*e*k-u*p,L[5]=e*e*k+w,L[6]=u*e*k+d*p,L[7]=0,L[8]=d*u*k+e*p,L[9]=e*u*k-d*p,L[10]=u*u*k+w,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L)}},{}],40:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=N[0],w=N[1],k=N[2],d=N[3],e=p+p,u=w+w,s=k+k,l=p*e,b=p*u,v=p*s,y=w*u,T=w*s,_=k*s,f=d*e,g=d*u,n=d*s;return L[0]=1-(y+_),L[1]=b+n,L[2]=v-g,L[3]=0,L[4]=b-n,L[5]=1-(l+_),L[6]=T+f,L[7]=0,L[8]=v+g,L[9]=T-f,L[10]=1-(l+y),L[11]=0,L[12]=D[0],L[13]=D[1],L[14]=D[2],L[15]=1,L}},{}],41:[function(z,le,ae){le.exports=R;function R(L,N){return L[0]=N[0],L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=N[1],L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=N[2],L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],42:[function(z,le,ae){le.exports=R;function R(L,N){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=N[0],L[13]=N[1],L[14]=N[2],L[15]=1,L}},{}],43:[function(z,le,ae){le.exports=R;function R(L,N){var D=Math.sin(N),p=Math.cos(N);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=p,L[6]=D,L[7]=0,L[8]=0,L[9]=-D,L[10]=p,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],44:[function(z,le,ae){le.exports=R;function R(L,N){var D=Math.sin(N),p=Math.cos(N);return L[0]=p,L[1]=0,L[2]=-D,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=D,L[9]=0,L[10]=p,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],45:[function(z,le,ae){le.exports=R;function R(L,N){var D=Math.sin(N),p=Math.cos(N);return L[0]=p,L[1]=D,L[2]=0,L[3]=0,L[4]=-D,L[5]=p,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],46:[function(z,le,ae){le.exports=R;function R(L,N,D,p,w,k,d){var e=1/(D-N),u=1/(w-p),s=1/(k-d);return L[0]=k*2*e,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=k*2*u,L[6]=0,L[7]=0,L[8]=(D+N)*e,L[9]=(w+p)*u,L[10]=(d+k)*s,L[11]=-1,L[12]=0,L[13]=0,L[14]=d*k*2*s,L[15]=0,L}},{}],47:[function(z,le,ae){le.exports=R;function R(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},{}],48:[function(z,le,ae){le.exports={create:z("./create"),clone:z("./clone"),copy:z("./copy"),identity:z("./identity"),transpose:z("./transpose"),invert:z("./invert"),adjoint:z("./adjoint"),determinant:z("./determinant"),multiply:z("./multiply"),translate:z("./translate"),scale:z("./scale"),rotate:z("./rotate"),rotateX:z("./rotateX"),rotateY:z("./rotateY"),rotateZ:z("./rotateZ"),fromRotation:z("./fromRotation"),fromRotationTranslation:z("./fromRotationTranslation"),fromScaling:z("./fromScaling"),fromTranslation:z("./fromTranslation"),fromXRotation:z("./fromXRotation"),fromYRotation:z("./fromYRotation"),fromZRotation:z("./fromZRotation"),fromQuat:z("./fromQuat"),frustum:z("./frustum"),perspective:z("./perspective"),perspectiveFromFieldOfView:z("./perspectiveFromFieldOfView"),ortho:z("./ortho"),lookAt:z("./lookAt"),str:z("./str")}},{"./adjoint":33,"./clone":34,"./copy":35,"./create":36,"./determinant":37,"./fromQuat":38,"./fromRotation":39,"./fromRotationTranslation":40,"./fromScaling":41,"./fromTranslation":42,"./fromXRotation":43,"./fromYRotation":44,"./fromZRotation":45,"./frustum":46,"./identity":47,"./invert":49,"./lookAt":50,"./multiply":51,"./ortho":52,"./perspective":53,"./perspectiveFromFieldOfView":54,"./rotate":55,"./rotateX":56,"./rotateY":57,"./rotateZ":58,"./scale":59,"./str":60,"./translate":61,"./transpose":62}],49:[function(z,le,ae){le.exports=R;function R(L,N){var D=N[0],p=N[1],w=N[2],k=N[3],d=N[4],e=N[5],u=N[6],s=N[7],l=N[8],b=N[9],v=N[10],y=N[11],T=N[12],_=N[13],f=N[14],g=N[15],n=D*e-p*d,a=D*u-w*d,h=D*s-k*d,c=p*u-w*e,m=p*s-k*e,o=w*s-k*u,t=l*_-b*T,i=l*f-v*T,r=l*g-y*T,x=b*f-v*_,A=b*g-y*_,E=v*g-y*f,P=n*E-a*A+h*x+c*r-m*i+o*t;return P?(P=1/P,L[0]=(e*E-u*A+s*x)*P,L[1]=(w*A-p*E-k*x)*P,L[2]=(_*o-f*m+g*c)*P,L[3]=(v*m-b*o-y*c)*P,L[4]=(u*r-d*E-s*i)*P,L[5]=(D*E-w*r+k*i)*P,L[6]=(f*h-T*o-g*a)*P,L[7]=(l*o-v*h+y*a)*P,L[8]=(d*A-e*r+s*t)*P,L[9]=(p*r-D*A-k*t)*P,L[10]=(T*m-_*h+g*n)*P,L[11]=(b*h-l*m-y*n)*P,L[12]=(e*i-d*x-u*t)*P,L[13]=(D*x-p*i+w*t)*P,L[14]=(_*a-T*c-f*n)*P,L[15]=(l*c-b*a+v*n)*P,L):null}},{}],50:[function(z,le,ae){var R=z("./identity");le.exports=L;function L(N,D,p,w){var k,d,e,u,s,l,b,v,y,T,_=D[0],f=D[1],g=D[2],n=w[0],a=w[1],h=w[2],c=p[0],m=p[1],o=p[2];return Math.abs(_-c)<1e-6&&Math.abs(f-m)<1e-6&&Math.abs(g-o)<1e-6?R(N):(b=_-c,v=f-m,y=g-o,T=1/Math.sqrt(b*b+v*v+y*y),b*=T,v*=T,y*=T,k=a*y-h*v,d=h*b-n*y,e=n*v-a*b,T=Math.sqrt(k*k+d*d+e*e),T?(T=1/T,k*=T,d*=T,e*=T):(k=0,d=0,e=0),u=v*e-y*d,s=y*k-b*e,l=b*d-v*k,T=Math.sqrt(u*u+s*s+l*l),T?(T=1/T,u*=T,s*=T,l*=T):(u=0,s=0,l=0),N[0]=k,N[1]=u,N[2]=b,N[3]=0,N[4]=d,N[5]=s,N[6]=v,N[7]=0,N[8]=e,N[9]=l,N[10]=y,N[11]=0,N[12]=-(k*_+d*f+e*g),N[13]=-(u*_+s*f+l*g),N[14]=-(b*_+v*f+y*g),N[15]=1,N)}},{"./identity":47}],51:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=N[0],w=N[1],k=N[2],d=N[3],e=N[4],u=N[5],s=N[6],l=N[7],b=N[8],v=N[9],y=N[10],T=N[11],_=N[12],f=N[13],g=N[14],n=N[15],a=D[0],h=D[1],c=D[2],m=D[3];return L[0]=a*p+h*e+c*b+m*_,L[1]=a*w+h*u+c*v+m*f,L[2]=a*k+h*s+c*y+m*g,L[3]=a*d+h*l+c*T+m*n,a=D[4],h=D[5],c=D[6],m=D[7],L[4]=a*p+h*e+c*b+m*_,L[5]=a*w+h*u+c*v+m*f,L[6]=a*k+h*s+c*y+m*g,L[7]=a*d+h*l+c*T+m*n,a=D[8],h=D[9],c=D[10],m=D[11],L[8]=a*p+h*e+c*b+m*_,L[9]=a*w+h*u+c*v+m*f,L[10]=a*k+h*s+c*y+m*g,L[11]=a*d+h*l+c*T+m*n,a=D[12],h=D[13],c=D[14],m=D[15],L[12]=a*p+h*e+c*b+m*_,L[13]=a*w+h*u+c*v+m*f,L[14]=a*k+h*s+c*y+m*g,L[15]=a*d+h*l+c*T+m*n,L}},{}],52:[function(z,le,ae){le.exports=R;function R(L,N,D,p,w,k,d){var e=1/(N-D),u=1/(p-w),s=1/(k-d);return L[0]=-2*e,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*u,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*s,L[11]=0,L[12]=(N+D)*e,L[13]=(w+p)*u,L[14]=(d+k)*s,L[15]=1,L}},{}],53:[function(z,le,ae){le.exports=R;function R(L,N,D,p,w){var k=1/Math.tan(N/2),d=1/(p-w);return L[0]=k/D,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=k,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=(w+p)*d,L[11]=-1,L[12]=0,L[13]=0,L[14]=2*w*p*d,L[15]=0,L}},{}],54:[function(z,le,ae){le.exports=R;function R(L,N,D,p){var w=Math.tan(N.upDegrees*Math.PI/180),k=Math.tan(N.downDegrees*Math.PI/180),d=Math.tan(N.leftDegrees*Math.PI/180),e=Math.tan(N.rightDegrees*Math.PI/180),u=2/(d+e),s=2/(w+k);return L[0]=u,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=s,L[6]=0,L[7]=0,L[8]=-((d-e)*u*.5),L[9]=(w-k)*s*.5,L[10]=p/(D-p),L[11]=-1,L[12]=0,L[13]=0,L[14]=p*D/(D-p),L[15]=0,L}},{}],55:[function(z,le,ae){le.exports=R;function R(L,N,D,p){var w=p[0],k=p[1],d=p[2],e=Math.sqrt(w*w+k*k+d*d),u,s,l,b,v,y,T,_,f,g,n,a,h,c,m,o,t,i,r,x,A,E,P,S;return Math.abs(e)<1e-6?null:(e=1/e,w*=e,k*=e,d*=e,u=Math.sin(D),s=Math.cos(D),l=1-s,b=N[0],v=N[1],y=N[2],T=N[3],_=N[4],f=N[5],g=N[6],n=N[7],a=N[8],h=N[9],c=N[10],m=N[11],o=w*w*l+s,t=k*w*l+d*u,i=d*w*l-k*u,r=w*k*l-d*u,x=k*k*l+s,A=d*k*l+w*u,E=w*d*l+k*u,P=k*d*l-w*u,S=d*d*l+s,L[0]=b*o+_*t+a*i,L[1]=v*o+f*t+h*i,L[2]=y*o+g*t+c*i,L[3]=T*o+n*t+m*i,L[4]=b*r+_*x+a*A,L[5]=v*r+f*x+h*A,L[6]=y*r+g*x+c*A,L[7]=T*r+n*x+m*A,L[8]=b*E+_*P+a*S,L[9]=v*E+f*P+h*S,L[10]=y*E+g*P+c*S,L[11]=T*E+n*P+m*S,N!==L&&(L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L)}},{}],56:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=Math.sin(D),w=Math.cos(D),k=N[4],d=N[5],e=N[6],u=N[7],s=N[8],l=N[9],b=N[10],v=N[11];return N!==L&&(L[0]=N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L[4]=k*w+s*p,L[5]=d*w+l*p,L[6]=e*w+b*p,L[7]=u*w+v*p,L[8]=s*w-k*p,L[9]=l*w-d*p,L[10]=b*w-e*p,L[11]=v*w-u*p,L}},{}],57:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=Math.sin(D),w=Math.cos(D),k=N[0],d=N[1],e=N[2],u=N[3],s=N[8],l=N[9],b=N[10],v=N[11];return N!==L&&(L[4]=N[4],L[5]=N[5],L[6]=N[6],L[7]=N[7],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L[0]=k*w-s*p,L[1]=d*w-l*p,L[2]=e*w-b*p,L[3]=u*w-v*p,L[8]=k*p+s*w,L[9]=d*p+l*w,L[10]=e*p+b*w,L[11]=u*p+v*w,L}},{}],58:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=Math.sin(D),w=Math.cos(D),k=N[0],d=N[1],e=N[2],u=N[3],s=N[4],l=N[5],b=N[6],v=N[7];return N!==L&&(L[8]=N[8],L[9]=N[9],L[10]=N[10],L[11]=N[11],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L[0]=k*w+s*p,L[1]=d*w+l*p,L[2]=e*w+b*p,L[3]=u*w+v*p,L[4]=s*w-k*p,L[5]=l*w-d*p,L[6]=b*w-e*p,L[7]=v*w-u*p,L}},{}],59:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=D[0],w=D[1],k=D[2];return L[0]=N[0]*p,L[1]=N[1]*p,L[2]=N[2]*p,L[3]=N[3]*p,L[4]=N[4]*w,L[5]=N[5]*w,L[6]=N[6]*w,L[7]=N[7]*w,L[8]=N[8]*k,L[9]=N[9]*k,L[10]=N[10]*k,L[11]=N[11]*k,L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15],L}},{}],60:[function(z,le,ae){le.exports=R;function R(L){return"mat4("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+", "+L[9]+", "+L[10]+", "+L[11]+", "+L[12]+", "+L[13]+", "+L[14]+", "+L[15]+")"}},{}],61:[function(z,le,ae){le.exports=R;function R(L,N,D){var p=D[0],w=D[1],k=D[2],d,e,u,s,l,b,v,y,T,_,f,g;return N===L?(L[12]=N[0]*p+N[4]*w+N[8]*k+N[12],L[13]=N[1]*p+N[5]*w+N[9]*k+N[13],L[14]=N[2]*p+N[6]*w+N[10]*k+N[14],L[15]=N[3]*p+N[7]*w+N[11]*k+N[15]):(d=N[0],e=N[1],u=N[2],s=N[3],l=N[4],b=N[5],v=N[6],y=N[7],T=N[8],_=N[9],f=N[10],g=N[11],L[0]=d,L[1]=e,L[2]=u,L[3]=s,L[4]=l,L[5]=b,L[6]=v,L[7]=y,L[8]=T,L[9]=_,L[10]=f,L[11]=g,L[12]=d*p+l*w+T*k+N[12],L[13]=e*p+b*w+_*k+N[13],L[14]=u*p+v*w+f*k+N[14],L[15]=s*p+y*w+g*k+N[15]),L}},{}],62:[function(z,le,ae){le.exports=R;function R(L,N){if(L===N){var D=N[1],p=N[2],w=N[3],k=N[6],d=N[7],e=N[11];L[1]=N[4],L[2]=N[8],L[3]=N[12],L[4]=D,L[6]=N[9],L[7]=N[13],L[8]=p,L[9]=k,L[11]=N[14],L[12]=w,L[13]=d,L[14]=e}else L[0]=N[0],L[1]=N[4],L[2]=N[8],L[3]=N[12],L[4]=N[1],L[5]=N[5],L[6]=N[9],L[7]=N[13],L[8]=N[2],L[9]=N[6],L[10]=N[10],L[11]=N[14],L[12]=N[3],L[13]=N[7],L[14]=N[11],L[15]=N[15];return L}},{}],63:[function(z,le,ae){(function(R){(function(){"use strict";var L=z("is-browser"),N;typeof R.matchMedia=="function"?N=!R.matchMedia("(hover: none)").matches:N=L,le.exports=N}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":65}],64:[function(z,le,ae){"use strict";var R=z("is-browser");function L(){var N=!1;try{var D=Object.defineProperty({},"passive",{get:function(){N=!0}});window.addEventListener("test",null,D),window.removeEventListener("test",null,D)}catch{N=!1}return N}le.exports=R&&L()},{"is-browser":65}],65:[function(z,le,ae){le.exports=!0},{}],66:[function(z,le,ae){"use strict";le.exports=N,le.exports.isMobile=N,le.exports.default=N;var R=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,L=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function N(D){D||(D={});var p=D.ua;if(!p&&typeof navigator<"u"&&(p=navigator.userAgent),p&&p.headers&&typeof p.headers["user-agent"]=="string"&&(p=p.headers["user-agent"]),typeof p!="string")return!1;var w=D.tablet?L.test(p):R.test(p);return!w&&D.tablet&&D.featureDetect&&navigator&&navigator.maxTouchPoints>1&&p.indexOf("Macintosh")!==-1&&p.indexOf("Safari")!==-1&&(w=!0),w}},{}],67:[function(z,le,ae){"use strict";var R=Object.prototype.toString;le.exports=function(L){var N;return R.call(L)==="[object Object]"&&(N=Object.getPrototypeOf(L),N===null||N===Object.getPrototypeOf({}))}},{}],68:[function(z,le,ae){"use strict";le.exports=function(R){for(var L=R.length,N,D=0;D<L;D++)if(N=R.charCodeAt(D),(N<9||N>13)&&N!==32&&N!==133&&N!==160&&N!==5760&&N!==6158&&(N<8192||N>8205)&&N!==8232&&N!==8233&&N!==8239&&N!==8287&&N!==8288&&N!==12288&&N!==65279)return!1;return!0}},{}],69:[function(z,le,ae){var R={left:0,top:0};le.exports=L;function L(D,p,w){p=p||D.currentTarget||D.srcElement,Array.isArray(w)||(w=[0,0]);var k=D.clientX||0,d=D.clientY||0,e=N(p);return w[0]=k-e.left,w[1]=d-e.top,w}function N(D){return D===window||D===document||D===document.body?R:D.getBoundingClientRect()}},{}],70:[function(z,le,ae){(function(R,L){(function(){(function(D,p,w){p[D]=p[D]||w(),typeof le<"u"&&le.exports?le.exports=p[D]:typeof bt=="function"&&bt.amd&&bt(function(){return p[D]})})("Promise",typeof R<"u"?R:this,function(){"use strict";var D,p,w,k=Object.prototype.toString,d=typeof L<"u"?function(a){return L(a)}:setTimeout;try{Object.defineProperty({},"x",{}),D=function(a,h,c,m){return Object.defineProperty(a,h,{value:c,writable:!0,configurable:m!==!1})}}catch{D=function(h,c,m){return h[c]=m,h}}w=function(){var a,h,c;function m(o,t){this.fn=o,this.self=t,this.next=void 0}return{add:function(t,i){c=new m(t,i),h?h.next=c:a=c,h=c,c=void 0},drain:function(){var t=a;for(a=h=p=void 0;t;)t.fn.call(t.self),t=t.next}}}();function e(n,a){w.add(n,a),p||(p=d(w.drain))}function u(n){var a,h=typeof n;return n!=null&&(h=="object"||h=="function")&&(a=n.then),typeof a=="function"?a:!1}function s(){for(var n=0;n<this.chain.length;n++)l(this,this.state===1?this.chain[n].success:this.chain[n].failure,this.chain[n]);this.chain.length=0}function l(n,a,h){var c,m;try{a===!1?h.reject(n.msg):(a===!0?c=n.msg:c=a.call(void 0,n.msg),c===h.promise?h.reject(TypeError("Promise-chain cycle")):(m=u(c))?m.call(c,h.resolve,h.reject):h.resolve(c))}catch(o){h.reject(o)}}function b(n){var a,h=this;if(!h.triggered){h.triggered=!0,h.def&&(h=h.def);try{(a=u(n))?e(function(){var c=new T(h);try{a.call(n,function(){b.apply(c,arguments)},function(){v.apply(c,arguments)})}catch(m){v.call(c,m)}}):(h.msg=n,h.state=1,h.chain.length>0&&e(s,h))}catch(c){v.call(new T(h),c)}}}function v(n){var a=this;a.triggered||(a.triggered=!0,a.def&&(a=a.def),a.msg=n,a.state=2,a.chain.length>0&&e(s,a))}function y(n,a,h,c){for(var m=0;m<a.length;m++)(function(t){n.resolve(a[t]).then(function(r){h(t,r)},c)})(m)}function T(n){this.def=n,this.triggered=!1}function _(n){this.promise=n,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(n){if(typeof n!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var a=new _(this);this.then=function(c,m){var o={success:typeof c=="function"?c:!0,failure:typeof m=="function"?m:!1};return o.promise=new this.constructor(function(i,r){if(typeof i!="function"||typeof r!="function")throw TypeError("Not a function");o.resolve=i,o.reject=r}),a.chain.push(o),a.state!==0&&e(s,a),o.promise},this.catch=function(c){return this.then(void 0,c)};try{n.call(void 0,function(c){b.call(a,c)},function(c){v.call(a,c)})}catch(h){v.call(a,h)}}var g=D({},"constructor",f,!1);return f.prototype=g,D(g,"__NPO__",0,!1),D(f,"resolve",function(a){var h=this;return a&&typeof a=="object"&&a.__NPO__===1?a:new h(function(m,o){if(typeof m!="function"||typeof o!="function")throw TypeError("Not a function");m(a)})}),D(f,"reject",function(a){return new this(function(c,m){if(typeof c!="function"||typeof m!="function")throw TypeError("Not a function");m(a)})}),D(f,"all",function(a){var h=this;return k.call(a)!="[object Array]"?h.reject(TypeError("Not an array")):a.length===0?h.resolve([]):new h(function(m,o){if(typeof m!="function"||typeof o!="function")throw TypeError("Not a function");var t=a.length,i=Array(t),r=0;y(h,a,function(A,E){i[A]=E,++r===t&&m(i)},o)})}),D(f,"race",function(a){var h=this;return k.call(a)!="[object Array]"?h.reject(TypeError("Not an array")):new h(function(m,o){if(typeof m!="function"||typeof o!="function")throw TypeError("Not a function");y(h,a,function(i,r){m(r)},o)})}),f})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},z("timers").setImmediate)},{timers:82}],71:[function(z,le,ae){"use strict";var R=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;function D(w){if(w==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(w)}function p(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var k={},d=0;d<10;d++)k["_"+String.fromCharCode(d)]=d;var e=Object.getOwnPropertyNames(k).map(function(s){return k[s]});if(e.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(s){u[s]=s}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}le.exports=p()?Object.assign:function(w,k){for(var d,e=D(w),u,s=1;s<arguments.length;s++){d=Object(arguments[s]);for(var l in d)L.call(d,l)&&(e[l]=d[l]);if(R){u=R(d);for(var b=0;b<u.length;b++)N.call(d,u[b])&&(e[u[b]]=d[u[b]])}}return e}},{}],72:[function(z,le,ae){le.exports=N;var R={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},L=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function N(w){var k=[];return w.replace(L,function(d,e,u){var s=e.toLowerCase();for(u=p(u),s=="m"&&u.length>2&&(k.push([e].concat(u.splice(0,2))),s="l",e=e=="m"?"l":"L");;){if(u.length==R[s])return u.unshift(e),k.push(u);if(u.length<R[s])throw new Error("malformed path data");k.push([e].concat(u.splice(0,R[s])))}}),k}var D=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function p(w){var k=w.match(D);return k?k.map(Number):[]}},{}],73:[function(z,le,ae){var R=z("./lib/build-log"),L=z("./lib/epsilon"),N=z("./lib/intersecter"),D=z("./lib/segment-chainer"),p=z("./lib/segment-selector"),w=z("./lib/geojson"),k=!1,d=L(),e;e={buildLog:function(s){return s===!0?k=R():s===!1&&(k=!1),k===!1?!1:k.list},epsilon:function(s){return d.epsilon(s)},segments:function(s){var l=N(!0,d,k);return s.regions.forEach(l.addRegion),{segments:l.calculate(s.inverted),inverted:s.inverted}},combine:function(s,l){var b=N(!1,d,k);return{combined:b.calculate(s.segments,s.inverted,l.segments,l.inverted),inverted1:s.inverted,inverted2:l.inverted}},selectUnion:function(s){return{segments:p.union(s.combined,k),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:p.intersect(s.combined,k),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:p.difference(s.combined,k),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:p.differenceRev(s.combined,k),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:p.xor(s.combined,k),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:D(s.segments,d,k),inverted:s.inverted}},polygonFromGeoJSON:function(s){return w.toPolygon(e,s)},polygonToGeoJSON:function(s){return w.fromPolygon(e,d,s)},union:function(s,l){return u(s,l,e.selectUnion)},intersect:function(s,l){return u(s,l,e.selectIntersect)},difference:function(s,l){return u(s,l,e.selectDifference)},differenceRev:function(s,l){return u(s,l,e.selectDifferenceRev)},xor:function(s,l){return u(s,l,e.selectXor)}};function u(s,l,b){var v=e.segments(s),y=e.segments(l),T=e.combine(v,y),_=b(T);return e.polygon(_)}typeof window=="object"&&(window.PolyBool=e),le.exports=e},{"./lib/build-log":74,"./lib/epsilon":75,"./lib/geojson":76,"./lib/intersecter":77,"./lib/segment-chainer":79,"./lib/segment-selector":80}],74:[function(z,le,ae){function R(){var L,N=0,D=!1;function p(w,k){return L.list.push({type:w,data:k?JSON.parse(JSON.stringify(k)):void 0}),L}return L={list:[],segmentId:function(){return N++},checkIntersection:function(w,k){return p("check",{seg1:w,seg2:k})},segmentChop:function(w,k){return p("div_seg",{seg:w,pt:k}),p("chop",{seg:w,pt:k})},statusRemove:function(w){return p("pop_seg",{seg:w})},segmentUpdate:function(w){return p("seg_update",{seg:w})},segmentNew:function(w,k){return p("new_seg",{seg:w,primary:k})},segmentRemove:function(w){return p("rem_seg",{seg:w})},tempStatus:function(w,k,d){return p("temp_status",{seg:w,above:k,below:d})},rewind:function(w){return p("rewind",{seg:w})},status:function(w,k,d){return p("status",{seg:w,above:k,below:d})},vert:function(w){return w===D?L:(D=w,p("vert",{x:w}))},log:function(w){return typeof w!="string"&&(w=JSON.stringify(w,!1,"  ")),p("log",{txt:w})},reset:function(){return p("reset")},selected:function(w){return p("selected",{segs:w})},chainStart:function(w){return p("chain_start",{seg:w})},chainRemoveHead:function(w,k){return p("chain_rem_head",{index:w,pt:k})},chainRemoveTail:function(w,k){return p("chain_rem_tail",{index:w,pt:k})},chainNew:function(w,k){return p("chain_new",{pt1:w,pt2:k})},chainMatch:function(w){return p("chain_match",{index:w})},chainClose:function(w){return p("chain_close",{index:w})},chainAddHead:function(w,k){return p("chain_add_head",{index:w,pt:k})},chainAddTail:function(w,k){return p("chain_add_tail",{index:w,pt:k})},chainConnect:function(w,k){return p("chain_con",{index1:w,index2:k})},chainReverse:function(w){return p("chain_rev",{index:w})},chainJoin:function(w,k){return p("chain_join",{index1:w,index2:k})},done:function(){return p("done")}},L}le.exports=R},{}],75:[function(z,le,ae){function R(L){typeof L!="number"&&(L=1e-10);var N={epsilon:function(D){return typeof D=="number"&&(L=D),L},pointAboveOrOnLine:function(D,p,w){var k=p[0],d=p[1],e=w[0],u=w[1],s=D[0],l=D[1];return(e-k)*(l-d)-(u-d)*(s-k)>=-L},pointBetween:function(D,p,w){var k=D[1]-p[1],d=w[0]-p[0],e=D[0]-p[0],u=w[1]-p[1],s=e*d+k*u;if(s<L)return!1;var l=d*d+u*u;return!(s-l>-L)},pointsSameX:function(D,p){return Math.abs(D[0]-p[0])<L},pointsSameY:function(D,p){return Math.abs(D[1]-p[1])<L},pointsSame:function(D,p){return N.pointsSameX(D,p)&&N.pointsSameY(D,p)},pointsCompare:function(D,p){return N.pointsSameX(D,p)?N.pointsSameY(D,p)?0:D[1]<p[1]?-1:1:D[0]<p[0]?-1:1},pointsCollinear:function(D,p,w){var k=D[0]-p[0],d=D[1]-p[1],e=p[0]-w[0],u=p[1]-w[1];return Math.abs(k*u-e*d)<L},linesIntersect:function(D,p,w,k){var d=p[0]-D[0],e=p[1]-D[1],u=k[0]-w[0],s=k[1]-w[1],l=d*s-e*u;if(Math.abs(l)<L)return!1;var b=D[0]-w[0],v=D[1]-w[1],y=(u*v-s*b)/l,T=(d*v-e*b)/l,_={alongA:0,alongB:0,pt:[D[0]+y*d,D[1]+y*e]};return y<=-L?_.alongA=-2:y<L?_.alongA=-1:y-1<=-L?_.alongA=0:y-1<L?_.alongA=1:_.alongA=2,T<=-L?_.alongB=-2:T<L?_.alongB=-1:T-1<=-L?_.alongB=0:T-1<L?_.alongB=1:_.alongB=2,_},pointInsideRegion:function(D,p){for(var w=D[0],k=D[1],d=p[p.length-1][0],e=p[p.length-1][1],u=!1,s=0;s<p.length;s++){var l=p[s][0],b=p[s][1];b-k>L!=e-k>L&&(d-l)*(k-b)/(e-b)+l-w>L&&(u=!u),d=l,e=b}return u}};return N}le.exports=R},{}],76:[function(z,le,ae){var R={toPolygon:function(L,N){function D(k){if(k.length<=0)return L.segments({inverted:!1,regions:[]});function d(s){var l=s.slice(0,s.length-1);return L.segments({inverted:!1,regions:[l]})}for(var e=d(k[0]),u=1;u<k.length;u++)e=L.selectDifference(L.combine(e,d(k[u])));return e}if(N.type==="Polygon")return L.polygon(D(N.coordinates));if(N.type==="MultiPolygon"){for(var p=L.segments({inverted:!1,regions:[]}),w=0;w<N.coordinates.length;w++)p=L.selectUnion(L.combine(p,D(N.coordinates[w])));return L.polygon(p)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(L,N,D){D=L.polygon(L.segments(D));function p(y,T){return N.pointInsideRegion([(y[0][0]+y[1][0])*.5,(y[0][1]+y[1][1])*.5],T)}function w(y){return{region:y,children:[]}}var k=w(null);function d(y,T){for(var _=0;_<y.children.length;_++){var f=y.children[_];if(p(T,f.region)){d(f,T);return}}for(var g=w(T),_=0;_<y.children.length;_++){var f=y.children[_];p(f.region,T)&&(g.children.push(f),y.children.splice(_,1),_--)}y.children.push(g)}for(var e=0;e<D.regions.length;e++){var u=D.regions[e];u.length<3||d(k,u)}function s(y,T){for(var _=0,f=y[y.length-1][0],g=y[y.length-1][1],n=[],a=0;a<y.length;a++){var h=y[a][0],c=y[a][1];n.push([h,c]),_+=c*f-h*g,f=h,g=c}var m=_<0;return m!==T&&n.reverse(),n.push([n[0][0],n[0][1]]),n}var l=[];function b(y){var T=[s(y.region,!1)];l.push(T);for(var _=0;_<y.children.length;_++)T.push(v(y.children[_]))}function v(y){for(var T=0;T<y.children.length;T++)b(y.children[T]);return s(y.region,!0)}for(var e=0;e<k.children.length;e++)b(k.children[e]);return l.length<=0?{type:"Polygon",coordinates:[]}:l.length==1?{type:"Polygon",coordinates:l[0]}:{type:"MultiPolygon",coordinates:l}}};le.exports=R},{}],77:[function(z,le,ae){var R=z("./linked-list");function L(N,D,p){function w(_,f){return{id:p?p.segmentId():-1,start:_,end:f,myFill:{above:null,below:null},otherFill:null}}function k(_,f,g){return{id:p?p.segmentId():-1,start:_,end:f,myFill:{above:g.myFill.above,below:g.myFill.below},otherFill:null}}var d=R.create();function e(_,f,g,n,a,h){var c=D.pointsCompare(f,a);return c!==0?c:D.pointsSame(g,h)?0:_!==n?_?1:-1:D.pointAboveOrOnLine(g,n?a:h,n?h:a)?1:-1}function u(_,f){d.insertBefore(_,function(g){var n=e(_.isStart,_.pt,f,g.isStart,g.pt,g.other.pt);return n<0})}function s(_,f){var g=R.node({isStart:!0,pt:_.start,seg:_,primary:f,other:null,status:null});return u(g,_.end),g}function l(_,f,g){var n=R.node({isStart:!1,pt:f.end,seg:f,primary:g,other:_,status:null});_.other=n,u(n,_.pt)}function b(_,f){var g=s(_,f);return l(g,_,f),g}function v(_,f){p&&p.segmentChop(_.seg,f),_.other.remove(),_.seg.end=f,_.other.pt=f,u(_.other,_.pt)}function y(_,f){var g=k(f,_.seg.end,_.seg);return v(_,f),b(g,_.primary)}function T(_,f){var g=R.create();function n(C,M){var I=C.seg.start,G=C.seg.end,V=M.seg.start,q=M.seg.end;return D.pointsCollinear(I,V,q)?D.pointsCollinear(G,V,q)||D.pointAboveOrOnLine(G,V,q)?1:-1:D.pointAboveOrOnLine(I,V,q)?1:-1}function a(C){return g.findTransition(function(M){var I=n(C,M.ev);return I>0})}function h(C,M){var I=C.seg,G=M.seg,V=I.start,q=I.end,ee=G.start,Q=G.end;p&&p.checkIntersection(I,G);var U=D.linesIntersect(V,q,ee,Q);if(U===!1){if(!D.pointsCollinear(V,q,ee)||D.pointsSame(V,Q)||D.pointsSame(q,ee))return!1;var O=D.pointsSame(V,ee),Z=D.pointsSame(q,Q);if(O&&Z)return M;var B=!O&&D.pointBetween(V,ee,Q),Y=!Z&&D.pointBetween(q,ee,Q);if(O)return Y?y(M,q):y(C,Q),M;B&&(Z||(Y?y(M,q):y(C,Q)),y(M,V))}else U.alongA===0&&(U.alongB===-1?y(C,ee):U.alongB===0?y(C,U.pt):U.alongB===1&&y(C,Q)),U.alongB===0&&(U.alongA===-1?y(M,V):U.alongA===0?y(M,U.pt):U.alongA===1&&y(M,q));return!1}for(var c=[];!d.isEmpty();){var m=d.getHead();if(p&&p.vert(m.pt[0]),m.isStart){let C=function(){if(t){var M=h(m,t);if(M)return M}return i?h(m,i):!1};var S=C;p&&p.segmentNew(m.seg,m.primary);var o=a(m),t=o.before?o.before.ev:null,i=o.after?o.after.ev:null;p&&p.tempStatus(m.seg,t?t.seg:!1,i?i.seg:!1);var r=C();if(r){if(N){var x;m.seg.myFill.below===null?x=!0:x=m.seg.myFill.above!==m.seg.myFill.below,x&&(r.seg.myFill.above=!r.seg.myFill.above)}else r.seg.otherFill=m.seg.myFill;p&&p.segmentUpdate(r.seg),m.other.remove(),m.remove()}if(d.getHead()!==m){p&&p.rewind(m.seg);continue}if(N){var x;m.seg.myFill.below===null?x=!0:x=m.seg.myFill.above!==m.seg.myFill.below,i?m.seg.myFill.below=i.seg.myFill.above:m.seg.myFill.below=_,x?m.seg.myFill.above=!m.seg.myFill.below:m.seg.myFill.above=m.seg.myFill.below}else if(m.seg.otherFill===null){var A;i?m.primary===i.primary?A=i.seg.otherFill.above:A=i.seg.myFill.above:A=m.primary?f:_,m.seg.otherFill={above:A,below:A}}p&&p.status(m.seg,t?t.seg:!1,i?i.seg:!1),m.other.status=o.insert(R.node({ev:m}))}else{var E=m.status;if(E===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(g.exists(E.prev)&&g.exists(E.next)&&h(E.prev.ev,E.next.ev),p&&p.statusRemove(E.ev.seg),E.remove(),!m.primary){var P=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=P}c.push(m.seg)}d.getHead().remove()}return p&&p.done(),c}return N?{addRegion:function(_){for(var f,g=_[_.length-1],n=0;n<_.length;n++){f=g,g=_[n];var a=D.pointsCompare(f,g);a!==0&&b(w(a<0?f:g,a<0?g:f),!0)}},calculate:function(_){return T(_,!1)}}:{calculate:function(_,f,g,n){return _.forEach(function(a){b(k(a.start,a.end,a),!0)}),g.forEach(function(a){b(k(a.start,a.end,a),!1)}),T(f,n)}}}le.exports=L},{"./linked-list":78}],78:[function(z,le,ae){var R={create:function(){var L={root:{root:!0,next:null},exists:function(N){return!(N===null||N===L.root)},isEmpty:function(){return L.root.next===null},getHead:function(){return L.root.next},insertBefore:function(N,D){for(var p=L.root,w=L.root.next;w!==null;){if(D(w)){N.prev=w.prev,N.next=w,w.prev.next=N,w.prev=N;return}p=w,w=w.next}p.next=N,N.prev=p,N.next=null},findTransition:function(N){for(var D=L.root,p=L.root.next;p!==null&&!N(p);)D=p,p=p.next;return{before:D===L.root?null:D,after:p,insert:function(w){return w.prev=D,w.next=p,D.next=w,p!==null&&(p.prev=w),w}}}};return L},node:function(L){return L.prev=null,L.next=null,L.remove=function(){L.prev.next=L.next,L.next&&(L.next.prev=L.prev),L.prev=null,L.next=null},L}};le.exports=R},{}],79:[function(z,le,ae){function R(L,N,D){var p=[],w=[];return L.forEach(function(k){var d=k.start,e=k.end;if(N.pointsSame(d,e)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}D&&D.chainStart(k);var u={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},l=u;function b(P,S,C){return l.index=P,l.matches_head=S,l.matches_pt1=C,l===u?(l=s,!1):(l=null,!0)}for(var v=0;v<p.length;v++){var y=p[v],T=y[0],_=y[1],f=y[y.length-1],g=y[y.length-2];if(N.pointsSame(T,d)){if(b(v,!0,!0))break}else if(N.pointsSame(T,e)){if(b(v,!0,!1))break}else if(N.pointsSame(f,d)){if(b(v,!1,!0))break}else if(N.pointsSame(f,e)&&b(v,!1,!1))break}if(l===u){p.push([d,e]),D&&D.chainNew(d,e);return}if(l===s){D&&D.chainMatch(u.index);var n=u.index,a=u.matches_pt1?e:d,h=u.matches_head,y=p[n],c=h?y[0]:y[y.length-1],m=h?y[1]:y[y.length-2],o=h?y[y.length-1]:y[0],t=h?y[y.length-2]:y[1];if(N.pointsCollinear(m,c,a)&&(h?(D&&D.chainRemoveHead(u.index,a),y.shift()):(D&&D.chainRemoveTail(u.index,a),y.pop()),c=m),N.pointsSame(o,a)){p.splice(n,1),N.pointsCollinear(t,o,c)&&(h?(D&&D.chainRemoveTail(u.index,c),y.pop()):(D&&D.chainRemoveHead(u.index,c),y.shift())),D&&D.chainClose(u.index),w.push(y);return}h?(D&&D.chainAddHead(u.index,a),y.unshift(a)):(D&&D.chainAddTail(u.index,a),y.push(a));return}function i(P){D&&D.chainReverse(P),p[P].reverse()}function r(P,S){var C=p[P],M=p[S],I=C[C.length-1],G=C[C.length-2],V=M[0],q=M[1];N.pointsCollinear(G,I,V)&&(D&&D.chainRemoveTail(P,I),C.pop(),I=G),N.pointsCollinear(I,V,q)&&(D&&D.chainRemoveHead(S,V),M.shift()),D&&D.chainJoin(P,S),p[P]=C.concat(M),p.splice(S,1)}var x=u.index,A=s.index;D&&D.chainConnect(x,A);var E=p[x].length<p[A].length;u.matches_head?s.matches_head?E?(i(x),r(x,A)):(i(A),r(A,x)):r(A,x):s.matches_head?r(x,A):E?(i(x),r(A,x)):(i(A),r(x,A))}),w}le.exports=R},{}],80:[function(z,le,ae){function R(N,D,p){var w=[];return N.forEach(function(k){var d=(k.myFill.above?8:0)+(k.myFill.below?4:0)+(k.otherFill&&k.otherFill.above?2:0)+(k.otherFill&&k.otherFill.below?1:0);D[d]!==0&&w.push({id:p?p.segmentId():-1,start:k.start,end:k.end,myFill:{above:D[d]===1,below:D[d]===2},otherFill:null})}),p&&p.selected(w),w}var L={union:function(N,D){return R(N,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],D)},intersect:function(N,D){return R(N,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],D)},difference:function(N,D){return R(N,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],D)},differenceRev:function(N,D){return R(N,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],D)},xor:function(N,D){return R(N,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],D)}};le.exports=L},{}],81:[function(z,le,ae){var R=le.exports={},L,N;function D(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?L=setTimeout:L=D}catch{L=D}try{typeof clearTimeout=="function"?N=clearTimeout:N=p}catch{N=p}})();function w(T){if(L===setTimeout)return setTimeout(T,0);if((L===D||!L)&&setTimeout)return L=setTimeout,setTimeout(T,0);try{return L(T,0)}catch{try{return L.call(null,T,0)}catch{return L.call(this,T,0)}}}function k(T){if(N===clearTimeout)return clearTimeout(T);if((N===p||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(T);try{return N(T)}catch{try{return N.call(null,T)}catch{return N.call(this,T)}}}var d=[],e=!1,u,s=-1;function l(){!e||!u||(e=!1,u.length?d=u.concat(d):s=-1,d.length&&b())}function b(){if(!e){var T=w(l);e=!0;for(var _=d.length;_;){for(u=d,d=[];++s<_;)u&&u[s].run();s=-1,_=d.length}u=null,e=!1,k(T)}}R.nextTick=function(T){var _=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)_[f-1]=arguments[f];d.push(new v(T,_)),d.length===1&&!e&&w(b)};function v(T,_){this.fun=T,this.array=_}v.prototype.run=function(){this.fun.apply(null,this.array)},R.title="browser",R.browser=!0,R.env={},R.argv=[],R.version="",R.versions={};function y(){}R.on=y,R.addListener=y,R.once=y,R.off=y,R.removeListener=y,R.removeAllListeners=y,R.emit=y,R.prependListener=y,R.prependOnceListener=y,R.listeners=function(T){return[]},R.binding=function(T){throw new Error("process.binding is not supported")},R.cwd=function(){return"/"},R.chdir=function(T){throw new Error("process.chdir is not supported")},R.umask=function(){return 0}},{}],82:[function(z,le,ae){(function(R,L){(function(){var N=z("process/browser.js").nextTick,D=Function.prototype.apply,p=Array.prototype.slice,w={},k=0;ae.setTimeout=function(){return new d(D.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new d(D.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(e){e.close()};function d(e,u){this._id=e,this._clearFn=u}d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(e,u){clearTimeout(e._idleTimeoutId),e._idleTimeout=u},ae.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},ae._unrefActive=ae.active=function(e){clearTimeout(e._idleTimeoutId);var u=e._idleTimeout;u>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},u))},ae.setImmediate=typeof R=="function"?R:function(e){var u=k++,s=arguments.length<2?!1:p.call(arguments,1);return w[u]=!0,N(function(){w[u]&&(s?e.apply(null,s):e.call(null),ae.clearImmediate(u))}),u},ae.clearImmediate=typeof L=="function"?L:function(e){delete w[e]}}).call(this)}).call(this,z("timers").setImmediate,z("timers").clearImmediate)},{"process/browser.js":81,timers:82}],83:[function(z,le,ae){(function(R){var L=/^\s+/,N=/\s+$/,D=0,p=R.round,w=R.min,k=R.max,d=R.random;function e(H,K){if(H=H||"",K=K||{},H instanceof e)return H;if(!(this instanceof e))return new e(H,K);var W=u(H);this._originalInput=H,this._r=W.r,this._g=W.g,this._b=W.b,this._a=W.a,this._roundA=p(100*this._a)/100,this._format=K.format||W.format,this._gradientType=K.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=W.ok,this._tc_id=D++}e.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var H=this.toRgb();return(H.r*299+H.g*587+H.b*114)/1e3},getLuminance:function(){var H=this.toRgb(),K,W,$,re,de,ve;return K=H.r/255,W=H.g/255,$=H.b/255,K<=.03928?re=K/12.92:re=R.pow((K+.055)/1.055,2.4),W<=.03928?de=W/12.92:de=R.pow((W+.055)/1.055,2.4),$<=.03928?ve=$/12.92:ve=R.pow(($+.055)/1.055,2.4),.2126*re+.7152*de+.0722*ve},setAlpha:function(H){return this._a=M(H),this._roundA=p(100*this._a)/100,this},toHsv:function(){var H=v(this._r,this._g,this._b);return{h:H.h*360,s:H.s,v:H.v,a:this._a}},toHsvString:function(){var H=v(this._r,this._g,this._b),K=p(H.h*360),W=p(H.s*100),$=p(H.v*100);return this._a==1?"hsv("+K+", "+W+"%, "+$+"%)":"hsva("+K+", "+W+"%, "+$+"%, "+this._roundA+")"},toHsl:function(){var H=l(this._r,this._g,this._b);return{h:H.h*360,s:H.s,l:H.l,a:this._a}},toHslString:function(){var H=l(this._r,this._g,this._b),K=p(H.h*360),W=p(H.s*100),$=p(H.l*100);return this._a==1?"hsl("+K+", "+W+"%, "+$+"%)":"hsla("+K+", "+W+"%, "+$+"%, "+this._roundA+")"},toHex:function(H){return T(this._r,this._g,this._b,H)},toHexString:function(H){return"#"+this.toHex(H)},toHex8:function(H){return _(this._r,this._g,this._b,this._a,H)},toHex8String:function(H){return"#"+this.toHex8(H)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(I(this._r,255)*100)+"%",g:p(I(this._g,255)*100)+"%",b:p(I(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(I(this._r,255)*100)+"%, "+p(I(this._g,255)*100)+"%, "+p(I(this._b,255)*100)+"%)":"rgba("+p(I(this._r,255)*100)+"%, "+p(I(this._g,255)*100)+"%, "+p(I(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:S[T(this._r,this._g,this._b,!0)]||!1},toFilter:function(H){var K="#"+f(this._r,this._g,this._b,this._a),W=K,$=this._gradientType?"GradientType = 1, ":"";if(H){var re=e(H);W="#"+f(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+$+"startColorstr="+K+",endColorstr="+W+")"},toString:function(H){var K=!!H;H=H||this._format;var W=!1,$=this._a<1&&this._a>=0,re=!K&&$&&(H==="hex"||H==="hex6"||H==="hex3"||H==="hex4"||H==="hex8"||H==="name");return re?H==="name"&&this._a===0?this.toName():this.toRgbString():(H==="rgb"&&(W=this.toRgbString()),H==="prgb"&&(W=this.toPercentageRgbString()),(H==="hex"||H==="hex6")&&(W=this.toHexString()),H==="hex3"&&(W=this.toHexString(!0)),H==="hex4"&&(W=this.toHex8String(!0)),H==="hex8"&&(W=this.toHex8String()),H==="name"&&(W=this.toName()),H==="hsl"&&(W=this.toHslString()),H==="hsv"&&(W=this.toHsvString()),W||this.toHexString())},clone:function(){return e(this.toString())},_applyModification:function(H,K){var W=H.apply(null,[this].concat([].slice.call(K)));return this._r=W._r,this._g=W._g,this._b=W._b,this.setAlpha(W._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(n,arguments)},greyscale:function(){return this._applyModification(a,arguments)},spin:function(){return this._applyModification(o,arguments)},_applyCombination:function(H,K){return H.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(t,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(i,arguments)},tetrad:function(){return this._applyCombination(r,arguments)}},e.fromRatio=function(H,K){if(typeof H=="object"){var W={};for(var $ in H)H.hasOwnProperty($)&&($==="a"?W[$]=H[$]:W[$]=U(H[$]));H=W}return e(H,K)};function u(H){var K={r:0,g:0,b:0},W=1,$=null,re=null,de=null,ve=!1,ue=!1;return typeof H=="string"&&(H=j(H)),typeof H=="object"&&(Y(H.r)&&Y(H.g)&&Y(H.b)?(K=s(H.r,H.g,H.b),ve=!0,ue=String(H.r).substr(-1)==="%"?"prgb":"rgb"):Y(H.h)&&Y(H.s)&&Y(H.v)?($=U(H.s),re=U(H.v),K=y(H.h,$,re),ve=!0,ue="hsv"):Y(H.h)&&Y(H.s)&&Y(H.l)&&($=U(H.s),de=U(H.l),K=b(H.h,$,de),ve=!0,ue="hsl"),H.hasOwnProperty("a")&&(W=H.a)),W=M(W),{ok:ve,format:H.format||ue,r:w(255,k(K.r,0)),g:w(255,k(K.g,0)),b:w(255,k(K.b,0)),a:W}}function s(H,K,W){return{r:I(H,255)*255,g:I(K,255)*255,b:I(W,255)*255}}function l(H,K,W){H=I(H,255),K=I(K,255),W=I(W,255);var $=k(H,K,W),re=w(H,K,W),de,ve,ue=($+re)/2;if($==re)de=ve=0;else{var ce=$-re;switch(ve=ue>.5?ce/(2-$-re):ce/($+re),$){case H:de=(K-W)/ce+(K<W?6:0);break;case K:de=(W-H)/ce+2;break;case W:de=(H-K)/ce+4;break}de/=6}return{h:de,s:ve,l:ue}}function b(H,K,W){var $,re,de;H=I(H,360),K=I(K,100),W=I(W,100);function ve(_e,fe,ne){return ne<0&&(ne+=1),ne>1&&(ne-=1),ne<1/6?_e+(fe-_e)*6*ne:ne<1/2?fe:ne<2/3?_e+(fe-_e)*(2/3-ne)*6:_e}if(K===0)$=re=de=W;else{var ue=W<.5?W*(1+K):W+K-W*K,ce=2*W-ue;$=ve(ce,ue,H+1/3),re=ve(ce,ue,H),de=ve(ce,ue,H-1/3)}return{r:$*255,g:re*255,b:de*255}}function v(H,K,W){H=I(H,255),K=I(K,255),W=I(W,255);var $=k(H,K,W),re=w(H,K,W),de,ve,ue=$,ce=$-re;if(ve=$===0?0:ce/$,$==re)de=0;else{switch($){case H:de=(K-W)/ce+(K<W?6:0);break;case K:de=(W-H)/ce+2;break;case W:de=(H-K)/ce+4;break}de/=6}return{h:de,s:ve,v:ue}}function y(H,K,W){H=I(H,360)*6,K=I(K,100),W=I(W,100);var $=R.floor(H),re=H-$,de=W*(1-K),ve=W*(1-re*K),ue=W*(1-(1-re)*K),ce=$%6,_e=[W,ve,de,de,ue,W][ce],fe=[ue,W,W,ve,de,de][ce],ne=[de,de,ue,W,W,ve][ce];return{r:_e*255,g:fe*255,b:ne*255}}function T(H,K,W,$){var re=[Q(p(H).toString(16)),Q(p(K).toString(16)),Q(p(W).toString(16))];return $&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function _(H,K,W,$,re){var de=[Q(p(H).toString(16)),Q(p(K).toString(16)),Q(p(W).toString(16)),Q(O($))];return re&&de[0].charAt(0)==de[0].charAt(1)&&de[1].charAt(0)==de[1].charAt(1)&&de[2].charAt(0)==de[2].charAt(1)&&de[3].charAt(0)==de[3].charAt(1)?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0)+de[3].charAt(0):de.join("")}function f(H,K,W,$){var re=[Q(O($)),Q(p(H).toString(16)),Q(p(K).toString(16)),Q(p(W).toString(16))];return re.join("")}e.equals=function(H,K){return!H||!K?!1:e(H).toRgbString()==e(K).toRgbString()},e.random=function(){return e.fromRatio({r:d(),g:d(),b:d()})};function g(H,K){K=K===0?0:K||10;var W=e(H).toHsl();return W.s-=K/100,W.s=G(W.s),e(W)}function n(H,K){K=K===0?0:K||10;var W=e(H).toHsl();return W.s+=K/100,W.s=G(W.s),e(W)}function a(H){return e(H).desaturate(100)}function h(H,K){K=K===0?0:K||10;var W=e(H).toHsl();return W.l+=K/100,W.l=G(W.l),e(W)}function c(H,K){K=K===0?0:K||10;var W=e(H).toRgb();return W.r=k(0,w(255,W.r-p(255*-(K/100)))),W.g=k(0,w(255,W.g-p(255*-(K/100)))),W.b=k(0,w(255,W.b-p(255*-(K/100)))),e(W)}function m(H,K){K=K===0?0:K||10;var W=e(H).toHsl();return W.l-=K/100,W.l=G(W.l),e(W)}function o(H,K){var W=e(H).toHsl(),$=(W.h+K)%360;return W.h=$<0?360+$:$,e(W)}function t(H){var K=e(H).toHsl();return K.h=(K.h+180)%360,e(K)}function i(H){var K=e(H).toHsl(),W=K.h;return[e(H),e({h:(W+120)%360,s:K.s,l:K.l}),e({h:(W+240)%360,s:K.s,l:K.l})]}function r(H){var K=e(H).toHsl(),W=K.h;return[e(H),e({h:(W+90)%360,s:K.s,l:K.l}),e({h:(W+180)%360,s:K.s,l:K.l}),e({h:(W+270)%360,s:K.s,l:K.l})]}function x(H){var K=e(H).toHsl(),W=K.h;return[e(H),e({h:(W+72)%360,s:K.s,l:K.l}),e({h:(W+216)%360,s:K.s,l:K.l})]}function A(H,K,W){K=K||6,W=W||30;var $=e(H).toHsl(),re=360/W,de=[e(H)];for($.h=($.h-(re*K>>1)+720)%360;--K;)$.h=($.h+re)%360,de.push(e($));return de}function E(H,K){K=K||6;for(var W=e(H).toHsv(),$=W.h,re=W.s,de=W.v,ve=[],ue=1/K;K--;)ve.push(e({h:$,s:re,v:de})),de=(de+ue)%1;return ve}e.mix=function(H,K,W){W=W===0?0:W||50;var $=e(H).toRgb(),re=e(K).toRgb(),de=W/100,ve={r:(re.r-$.r)*de+$.r,g:(re.g-$.g)*de+$.g,b:(re.b-$.b)*de+$.b,a:(re.a-$.a)*de+$.a};return e(ve)},e.readability=function(H,K){var W=e(H),$=e(K);return(R.max(W.getLuminance(),$.getLuminance())+.05)/(R.min(W.getLuminance(),$.getLuminance())+.05)},e.isReadable=function(H,K,W){var $=e.readability(H,K),re,de;switch(de=!1,re=X(W),re.level+re.size){case"AAsmall":case"AAAlarge":de=$>=4.5;break;case"AAlarge":de=$>=3;break;case"AAAsmall":de=$>=7;break}return de},e.mostReadable=function(H,K,W){var $=null,re=0,de,ve,ue,ce;W=W||{},ve=W.includeFallbackColors,ue=W.level,ce=W.size;for(var _e=0;_e<K.length;_e++)de=e.readability(H,K[_e]),de>re&&(re=de,$=e(K[_e]));return e.isReadable(H,$,{level:ue,size:ce})||!ve?$:(W.includeFallbackColors=!1,e.mostReadable(H,["#fff","#000"],W))};var P=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=e.hexNames=C(P);function C(H){var K={};for(var W in H)H.hasOwnProperty(W)&&(K[H[W]]=W);return K}function M(H){return H=parseFloat(H),(isNaN(H)||H<0||H>1)&&(H=1),H}function I(H,K){q(H)&&(H="100%");var W=ee(H);return H=w(K,k(0,parseFloat(H))),W&&(H=parseInt(H*K,10)/100),R.abs(H-K)<1e-6?1:H%K/parseFloat(K)}function G(H){return w(1,k(0,H))}function V(H){return parseInt(H,16)}function q(H){return typeof H=="string"&&H.indexOf(".")!=-1&&parseFloat(H)===1}function ee(H){return typeof H=="string"&&H.indexOf("%")!=-1}function Q(H){return H.length==1?"0"+H:""+H}function U(H){return H<=1&&(H=H*100+"%"),H}function O(H){return R.round(parseFloat(H)*255).toString(16)}function Z(H){return V(H)/255}var B=function(){var H="[-\\+]?\\d+%?",K="[-\\+]?\\d*\\.\\d+%?",W="(?:"+K+")|(?:"+H+")",$="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",re="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?";return{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+$),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+$),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+$),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(H){return!!B.CSS_UNIT.exec(H)}function j(H){H=H.replace(L,"").replace(N,"").toLowerCase();var K=!1;if(P[H])H=P[H],K=!0;else if(H=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var W;return(W=B.rgb.exec(H))?{r:W[1],g:W[2],b:W[3]}:(W=B.rgba.exec(H))?{r:W[1],g:W[2],b:W[3],a:W[4]}:(W=B.hsl.exec(H))?{h:W[1],s:W[2],l:W[3]}:(W=B.hsla.exec(H))?{h:W[1],s:W[2],l:W[3],a:W[4]}:(W=B.hsv.exec(H))?{h:W[1],s:W[2],v:W[3]}:(W=B.hsva.exec(H))?{h:W[1],s:W[2],v:W[3],a:W[4]}:(W=B.hex8.exec(H))?{r:V(W[1]),g:V(W[2]),b:V(W[3]),a:Z(W[4]),format:K?"name":"hex8"}:(W=B.hex6.exec(H))?{r:V(W[1]),g:V(W[2]),b:V(W[3]),format:K?"name":"hex"}:(W=B.hex4.exec(H))?{r:V(W[1]+""+W[1]),g:V(W[2]+""+W[2]),b:V(W[3]+""+W[3]),a:Z(W[4]+""+W[4]),format:K?"name":"hex8"}:(W=B.hex3.exec(H))?{r:V(W[1]+""+W[1]),g:V(W[2]+""+W[2]),b:V(W[3]+""+W[3]),format:K?"name":"hex"}:!1}function X(H){var K,W;return H=H||{level:"AA",size:"small"},K=(H.level||"AA").toUpperCase(),W=(H.size||"small").toLowerCase(),K!=="AA"&&K!=="AAA"&&(K="AA"),W!=="small"&&W!=="large"&&(W="small"),{level:K,size:W}}typeof le<"u"&&le.exports?le.exports=e:typeof bt=="function"&&bt.amd?bt(function(){return e}):window.tinycolor=e})(Math)},{}],84:[function(z,le,ae){var R=z("get-canvas-context");le.exports=function(N){return R("webgl",N)}},{"get-canvas-context":32}],85:[function(z,le,ae){var R=z("../main"),L=z("object-assign"),N=R.instance();function D(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}D.prototype=new R.baseCalendar,L(D.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,v){if(typeof b=="string"){var y=b.match(w);return y?y[0]:""}var T=this._validateYear(b),_=b.month(),f=""+this.toChineseMonth(T,_);return v&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(T,_)&&(f+="i"),f},monthNames:function(b){if(typeof b=="string"){var v=b.match(k);return v?v[0]:""}var y=this._validateYear(b),T=b.month(),_=this.toChineseMonth(y,T),f=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][_-1];return this.isIntercalaryMonth(y,T)&&(f="\u95F0"+f),f},monthNamesShort:function(b){if(typeof b=="string"){var v=b.match(d);return v?v[0]:""}var y=this._validateYear(b),T=b.month(),_=this.toChineseMonth(y,T),f=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][_-1];return this.isIntercalaryMonth(y,T)&&(f="\u95F0"+f),f},parseMonth:function(b,v){b=this._validateYear(b);var y=parseInt(v),T;if(isNaN(y))v[0]==="\u95F0"&&(T=!0,v=v.substring(1)),v[v.length-1]==="\u6708"&&(v=v.substring(0,v.length-1)),y=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(v);else{var _=v[v.length-1];T=_==="i"||_==="I"}var f=this.toMonthIndex(b,y,T);return f},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,v){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw v.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,v,y){var T=this.intercalaryMonth(b),_=y&&v!==T;if(_||v<1||v>12)throw R.local.invalidMonth.replace(/\{0\}/,this.local.name);var f;return T?!y&&v<=T?f=v-1:f=v:f=v-1,f},toChineseMonth:function(b,v){b.year&&(b=b.year(),v=b.month());var y=this.intercalaryMonth(b),T=y?12:11;if(v<0||v>T)throw R.local.invalidMonth.replace(/\{0\}/,this.local.name);var _;return y?v<y?_=v+1:_=v:_=v+1,_},intercalaryMonth:function(b){b=this._validateYear(b);var v=e[b-e[0]],y=v>>13;return y},isIntercalaryMonth:function(b,v){b.year&&(b=b.year(),v=b.month());var y=this.intercalaryMonth(b);return!!y&&y===v},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,v,y){var T=this._validateYear(b,R.local.invalidyear),_=u[T-u[0]],f=_>>9&4095,g=_>>5&15,n=_&31,a;a=N.newDate(f,g,n),a.add(4-(a.dayOfWeek()||7),"d");var h=this.toJD(b,v,y)-a.toJD();return 1+Math.floor(h/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,v){b.year&&(v=b.month(),b=b.year()),b=this._validateYear(b);var y=e[b-e[0]],T=y>>13,_=T?12:11;if(v>_)throw R.local.invalidMonth.replace(/\{0\}/,this.local.name);var f=y&1<<12-v?30:29;return f},weekDay:function(b,v,y){return(this.dayOfWeek(b,v,y)||7)<6},toJD:function(b,v,y){var T=this._validate(b,f,y,R.local.invalidDate);b=this._validateYear(T.year()),v=T.month(),y=T.day();var _=this.isIntercalaryMonth(b,v),f=this.toChineseMonth(b,v),g=l(b,f,y,_);return N.toJD(g.year,g.month,g.day)},fromJD:function(b){var v=N.fromJD(b),y=s(v.year(),v.month(),v.day()),T=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,T,y.day)},fromString:function(b){var v=b.match(p),y=this._validateYear(+v[1]),T=+v[2],_=!!v[3],f=this.toMonthIndex(y,T,_),g=+v[4];return this.newDate(y,f,g)},add:function(b,v,y){var T=b.year(),_=b.month(),f=this.isIntercalaryMonth(T,_),g=this.toChineseMonth(T,_),n=Object.getPrototypeOf(D.prototype).add.call(this,b,v,y);if(y==="y"){var a=n.year(),h=n.month(),c=this.isIntercalaryMonth(a,g),m=f&&c?this.toMonthIndex(a,g,!0):this.toMonthIndex(a,g,!1);m!==h&&n.month(m)}return n}});var p=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,w=/^\d?\d[iI]?/m,k=/^闰?十?[一二三四五六七八九]?月/m,d=/^闰?十?[一二三四五六七八九]?/m;R.calendars.chinese=D;var e=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],u=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,v,y,T){var _,f;if(typeof b=="object")_=b,f=v||{};else{var g=typeof b=="number"&&b>=1888&&b<=2111;if(!g)throw new Error("Solar year outside range 1888-2111");var n=typeof v=="number"&&v>=1&&v<=12;if(!n)throw new Error("Solar month outside range 1 - 12");var a=typeof y=="number"&&y>=1&&y<=31;if(!a)throw new Error("Solar day outside range 1 - 31");_={year:b,month:v,day:y},f=T||{}}var h=u[_.year-u[0]],c=_.year<<9|_.month<<5|_.day;f.year=c>=h?_.year:_.year-1,h=u[f.year-u[0]];var m=h>>9&4095,o=h>>5&15,t=h&31,i,r=new Date(m,o-1,t),x=new Date(_.year,_.month-1,_.day);i=Math.round((x-r)/(24*3600*1e3));var A=e[f.year-e[0]],E;for(E=0;E<13;E++){var P=A&1<<12-E?30:29;if(i<P)break;i-=P}var S=A>>13;return!S||E<S?(f.isIntercalary=!1,f.month=1+E):E===S?(f.isIntercalary=!0,f.month=E):(f.isIntercalary=!1,f.month=E),f.day=1+i,f}function l(b,v,y,T,_){var f,g;if(typeof b=="object")g=b,f=v||{};else{var n=typeof b=="number"&&b>=1888&&b<=2111;if(!n)throw new Error("Lunar year outside range 1888-2111");var a=typeof v=="number"&&v>=1&&v<=12;if(!a)throw new Error("Lunar month outside range 1 - 12");var h=typeof y=="number"&&y>=1&&y<=30;if(!h)throw new Error("Lunar day outside range 1 - 30");var c;typeof T=="object"?(c=!1,f=T):(c=!!T,f=_||{}),g={year:b,month:v,day:y,isIntercalary:c}}var m;m=g.day-1;var o=e[g.year-e[0]],t=o>>13,i;t&&(g.month>t||g.isIntercalary)?i=g.month:i=g.month-1;for(var r=0;r<i;r++){var x=o&1<<12-r?30:29;m+=x}var A=u[g.year-u[0]],E=A>>9&4095,P=A>>5&15,S=A&31,C=new Date(E,P-1,S+m);return f.year=C.getFullYear(),f.month=1+C.getMonth(),f.day=C.getDate(),f}},{"../main":99,"object-assign":71}],86:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(D){this.local=this.regionalOptions[D||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var p=this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),w=p.year()+(p.year()<0?1:0);return w%4===3||w%4===-1},monthsInYear:function(D){return this._validate(D,this.minMonth,this.minDay,R.local.invalidYear||R.regionalOptions[""].invalidYear),13},weekOfYear:function(D,p,w){var k=this.newDate(D,p,w);return k.add(-k.dayOfWeek(),"d"),Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(D,p){var w=this._validate(D,p,this.minDay,R.local.invalidMonth);return this.daysPerMonth[w.month()-1]+(w.month()===13&&this.leapYear(w.year())?1:0)},weekDay:function(D,p,w){return(this.dayOfWeek(D,p,w)||7)<6},toJD:function(D,p,w){var k=this._validate(D,p,w,R.local.invalidDate);return D=k.year(),D<0&&D++,k.day()+(k.month()-1)*30+(D-1)*365+Math.floor(D/4)+this.jdEpoch-1},fromJD:function(D){var p=Math.floor(D)+.5-this.jdEpoch,w=Math.floor((p-Math.floor((p+366)/1461))/365)+1;w<=0&&w--,p=Math.floor(D)+.5-this.newDate(w,1,1).toJD();var k=Math.floor(p/30)+1,d=p-(k-1)*30+1;return this.newDate(w,k,d)}}),R.calendars.coptic=N},{"../main":99,"object-assign":71}],87:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,R.local.invalidYear),!1},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,R.local.invalidYear),13},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,R.local.invalidYear),400},weekOfYear:function(p,w,k){var d=this.newDate(p,w,k);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/8)+1},daysInMonth:function(p,w){var k=this._validate(p,w,this.minDay,R.local.invalidMonth);return this.daysPerMonth[k.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);return(d.day()+1)%8},weekDay:function(p,w,k){var d=this.dayOfWeek(p,w,k);return d>=2&&d<=6},extraInfo:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);return{century:D[Math.floor((d.year()-1)/100)+1]||""}},toJD:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);return p=d.year()+(d.year()<0?1:0),w=d.month(),k=d.day(),k+(w>1?16:0)+(w>2?(w-2)*32:0)+(p-1)*400+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p+.5)-Math.floor(this.jdEpoch)-1;var w=Math.floor(p/400)+1;p-=(w-1)*400,p+=p>15?16:0;var k=Math.floor(p/32)+1,d=p-(k-1)*32+1;return this.newDate(w<=0?w-1:w,k,d)}});var D={20:"Fruitbat",21:"Anchovy"};R.calendars.discworld=N},{"../main":99,"object-assign":71}],88:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(D){this.local=this.regionalOptions[D||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var p=this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),w=p.year()+(p.year()<0?1:0);return w%4===3||w%4===-1},monthsInYear:function(D){return this._validate(D,this.minMonth,this.minDay,R.local.invalidYear||R.regionalOptions[""].invalidYear),13},weekOfYear:function(D,p,w){var k=this.newDate(D,p,w);return k.add(-k.dayOfWeek(),"d"),Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(D,p){var w=this._validate(D,p,this.minDay,R.local.invalidMonth);return this.daysPerMonth[w.month()-1]+(w.month()===13&&this.leapYear(w.year())?1:0)},weekDay:function(D,p,w){return(this.dayOfWeek(D,p,w)||7)<6},toJD:function(D,p,w){var k=this._validate(D,p,w,R.local.invalidDate);return D=k.year(),D<0&&D++,k.day()+(k.month()-1)*30+(D-1)*365+Math.floor(D/4)+this.jdEpoch-1},fromJD:function(D){var p=Math.floor(D)+.5-this.jdEpoch,w=Math.floor((p-Math.floor((p+366)/1461))/365)+1;w<=0&&w--,p=Math.floor(D)+.5-this.newDate(w,1,1).toJD();var k=Math.floor(p/30)+1,d=p-(k-1)*30+1;return this.newDate(w,k,d)}}),R.calendars.ethiopian=N},{"../main":99,"object-assign":71}],89:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var w=this._validate(p,this.minMonth,this.minDay,R.local.invalidYear);return this._leapYear(w.year())},_leapYear:function(p){return p=p<0?p+1:p,D(p*7+1,19)<7},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,R.local.invalidYear),this._leapYear(p.year?p.year():p)?13:12},weekOfYear:function(p,w,k){var d=this.newDate(p,w,k);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(p){var w=this._validate(p,this.minMonth,this.minDay,R.local.invalidYear);return p=w.year(),this.toJD(p===-1?1:p+1,7,1)-this.toJD(p,7,1)},daysInMonth:function(p,w){return p.year&&(w=p.month(),p=p.year()),this._validate(p,w,this.minDay,R.local.invalidMonth),w===12&&this.leapYear(p)||w===8&&D(this.daysInYear(p),10)===5?30:w===9&&D(this.daysInYear(p),10)===3?29:this.daysPerMonth[w-1]},weekDay:function(p,w,k){return this.dayOfWeek(p,w,k)!==6},extraInfo:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);return{yearType:(this.leapYear(d)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(d)%10-3]}},toJD:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);p=d.year(),w=d.month(),k=d.day();var e=p<=0?p+1:p,u=this.jdEpoch+this._delay1(e)+this._delay2(e)+k+1;if(w<7){for(var s=7;s<=this.monthsInYear(p);s++)u+=this.daysInMonth(p,s);for(var s=1;s<w;s++)u+=this.daysInMonth(p,s)}else for(var s=7;s<w;s++)u+=this.daysInMonth(p,s);return u},_delay1:function(p){var w=Math.floor((235*p-234)/19),k=12084+13753*w,d=w*29+Math.floor(k/25920);return D(3*(d+1),7)<3&&d++,d},_delay2:function(p){var w=this._delay1(p-1),k=this._delay1(p),d=this._delay1(p+1);return d-k===356?2:k-w===382?1:0},fromJD:function(p){p=Math.floor(p)+.5;for(var w=Math.floor((p-this.jdEpoch)*98496/35975351)-1;p>=this.toJD(w===-1?1:w+1,7,1);)w++;for(var k=p<this.toJD(w,1,1)?7:1;p>this.toJD(w,k,this.daysInMonth(w,k));)k++;var d=p-this.toJD(w,k,1)+1;return this.newDate(w,k,d)}});function D(p,w){return p-w*Math.floor(p/w)}R.calendars.hebrew=N},{"../main":99,"object-assign":71}],90:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(D){this.local=this.regionalOptions[D||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(D){var p=this._validate(D,this.minMonth,this.minDay,R.local.invalidYear);return(p.year()*11+14)%30<11},weekOfYear:function(D,p,w){var k=this.newDate(D,p,w);return k.add(-k.dayOfWeek(),"d"),Math.floor((k.dayOfYear()-1)/7)+1},daysInYear:function(D){return this.leapYear(D)?355:354},daysInMonth:function(D,p){var w=this._validate(D,p,this.minDay,R.local.invalidMonth);return this.daysPerMonth[w.month()-1]+(w.month()===12&&this.leapYear(w.year())?1:0)},weekDay:function(D,p,w){return this.dayOfWeek(D,p,w)!==5},toJD:function(D,p,w){var k=this._validate(D,p,w,R.local.invalidDate);return D=k.year(),p=k.month(),w=k.day(),D=D<=0?D+1:D,w+Math.ceil(29.5*(p-1))+(D-1)*354+Math.floor((3+11*D)/30)+this.jdEpoch-1},fromJD:function(D){D=Math.floor(D)+.5;var p=Math.floor((30*(D-this.jdEpoch)+10646)/10631);p=p<=0?p-1:p;var w=Math.min(12,Math.ceil((D-29-this.toJD(p,1,1))/29.5)+1),k=D-this.toJD(p,w,1)+1;return this.newDate(p,w,k)}}),R.calendars.islamic=N},{"../main":99,"object-assign":71}],91:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(D){this.local=this.regionalOptions[D||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var p=this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),w=p.year()<0?p.year()+1:p.year();return w%4===0},weekOfYear:function(D,p,w){var k=this.newDate(D,p,w);return k.add(4-(k.dayOfWeek()||7),"d"),Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(D,p){var w=this._validate(D,p,this.minDay,R.local.invalidMonth);return this.daysPerMonth[w.month()-1]+(w.month()===2&&this.leapYear(w.year())?1:0)},weekDay:function(D,p,w){return(this.dayOfWeek(D,p,w)||7)<6},toJD:function(D,p,w){var k=this._validate(D,p,w,R.local.invalidDate);return D=k.year(),p=k.month(),w=k.day(),D<0&&D++,p<=2&&(D--,p+=12),Math.floor(365.25*(D+4716))+Math.floor(30.6001*(p+1))+w-1524.5},fromJD:function(D){var p=Math.floor(D+.5),w=p+1524,k=Math.floor((w-122.1)/365.25),d=Math.floor(365.25*k),e=Math.floor((w-d)/30.6001),u=e-Math.floor(e<14?1:13),s=k-Math.floor(u>2?4716:4715),l=w-d-Math.floor(30.6001*e);return s<=0&&s--,this.newDate(s,u,l)}}),R.calendars.julian=N},{"../main":99,"object-assign":71}],92:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(w){return this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),!1},formatYear:function(w){var k=this._validate(w,this.minMonth,this.minDay,R.local.invalidYear);w=k.year();var d=Math.floor(w/400);w=w%400,w+=w<0?400:0;var e=Math.floor(w/20);return d+"."+e+"."+w%20},forYear:function(w){if(w=w.split("."),w.length<3)throw"Invalid Mayan year";for(var k=0,d=0;d<w.length;d++){var e=parseInt(w[d],10);if(Math.abs(e)>19||d>0&&e<0)throw"Invalid Mayan year";k=k*20+e}return k},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),18},weekOfYear:function(w,k,d){return this._validate(w,k,d,R.local.invalidDate),0},daysInYear:function(w){return this._validate(w,this.minMonth,this.minDay,R.local.invalidYear),360},daysInMonth:function(w,k){return this._validate(w,k,this.minDay,R.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(w,k,d){var e=this._validate(w,k,d,R.local.invalidDate);return e.day()},weekDay:function(w,k,d){return this._validate(w,k,d,R.local.invalidDate),!0},extraInfo:function(w,k,d){var e=this._validate(w,k,d,R.local.invalidDate),u=e.toJD(),s=this._toHaab(u),l=this._toTzolkin(u);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(w){w-=this.jdEpoch;var k=D(w+8+(18-1)*20,365);return[Math.floor(k/20)+1,D(k,20)]},_toTzolkin:function(w){return w-=this.jdEpoch,[p(w+20,20),p(w+4,13)]},toJD:function(w,k,d){var e=this._validate(w,k,d,R.local.invalidDate);return e.day()+e.month()*20+e.year()*360+this.jdEpoch},fromJD:function(w){w=Math.floor(w)+.5-this.jdEpoch;var k=Math.floor(w/360);w=w%360,w+=w<0?360:0;var d=Math.floor(w/20),e=w%20;return this.newDate(k,d,e)}});function D(w,k){return w-k*Math.floor(w/k)}function p(w,k){return D(w-1,k)+1}R.calendars.mayan=N},{"../main":99,"object-assign":71}],93:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar;var D=R.instance("gregorian");L(N.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var w=this._validate(p,this.minMonth,this.minDay,R.local.invalidYear||R.regionalOptions[""].invalidYear);return D.leapYear(w.year()+(w.year()<1?1:0)+1469)},weekOfYear:function(p,w,k){var d=this.newDate(p,w,k);return d.add(1-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(p,w){var k=this._validate(p,w,this.minDay,R.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===12&&this.leapYear(k.year())?1:0)},weekDay:function(p,w,k){return(this.dayOfWeek(p,w,k)||7)<6},toJD:function(e,w,k){var d=this._validate(e,w,k,R.local.invalidMonth),e=d.year();e<0&&e++;for(var u=d.day(),s=1;s<d.month();s++)u+=this.daysPerMonth[s-1];return u+D.toJD(e+1468,3,13)},fromJD:function(p){p=Math.floor(p+.5);for(var w=Math.floor((p-(this.jdEpoch-1))/366);p>=this.toJD(w+1,1,1);)w++;for(var k=p-Math.floor(this.toJD(w,1,1)+.5)+1,d=1;k>this.daysInMonth(w,d);)k-=this.daysInMonth(w,d),d++;return this.newDate(w,d,k)}}),R.calendars.nanakshahi=N},{"../main":99,"object-assign":71}],94:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(D){this.local=this.regionalOptions[D||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(D){return this.daysInYear(D)!==this.daysPerYear},weekOfYear:function(D,p,w){var k=this.newDate(D,p,w);return k.add(-k.dayOfWeek(),"d"),Math.floor((k.dayOfYear()-1)/7)+1},daysInYear:function(D){var p=this._validate(D,this.minMonth,this.minDay,R.local.invalidYear);if(D=p.year(),typeof this.NEPALI_CALENDAR_DATA[D]>"u")return this.daysPerYear;for(var w=0,k=this.minMonth;k<=12;k++)w+=this.NEPALI_CALENDAR_DATA[D][k];return w},daysInMonth:function(D,p){return D.year&&(p=D.month(),D=D.year()),this._validate(D,p,this.minDay,R.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[D]>"u"?this.daysPerMonth[p-1]:this.NEPALI_CALENDAR_DATA[D][p]},weekDay:function(D,p,w){return this.dayOfWeek(D,p,w)!==6},toJD:function(D,p,w){var k=this._validate(D,p,w,R.local.invalidDate);D=k.year(),p=k.month(),w=k.day();var d=R.instance(),e=0,u=p,s=D;this._createMissingCalendarData(D);var l=D-(u>9||u===9&&w>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(p!==9&&(e=w,u--);u!==9;)u<=0&&(u=12,s--),e+=this.NEPALI_CALENDAR_DATA[s][u],u--;return p===9?(e+=w-this.NEPALI_CALENDAR_DATA[s][0],e<0&&(e+=d.daysInYear(l))):e+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],d.newDate(l,1,1).add(e,"d").toJD()},fromJD:function(D){var p=R.instance(),w=p.fromJD(D),k=w.year(),d=w.dayOfYear(),e=k+56;this._createMissingCalendarData(e);for(var u=9,s=this.NEPALI_CALENDAR_DATA[e][0],l=this.NEPALI_CALENDAR_DATA[e][u]-s+1;d>l;)u++,u>12&&(u=1,e++),l+=this.NEPALI_CALENDAR_DATA[e][u];var b=this.NEPALI_CALENDAR_DATA[e][u]-(l-d);return this.newDate(e,u,b)},_createMissingCalendarData:function(D){var p=this.daysPerMonth.slice(0);p.unshift(17);for(var w=D-1;w<D+2;w++)typeof this.NEPALI_CALENDAR_DATA[w]>"u"&&(this.NEPALI_CALENDAR_DATA[w]=p)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),R.calendars.nepali=N},{"../main":99,"object-assign":71}],95:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){var w=this._validate(p,this.minMonth,this.minDay,R.local.invalidYear);return((w.year()-(w.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(p,w,k){var d=this.newDate(p,w,k);return d.add(-((d.dayOfWeek()+1)%7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(p,w){var k=this._validate(p,w,this.minDay,R.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===12&&this.leapYear(k.year())?1:0)},weekDay:function(p,w,k){return this.dayOfWeek(p,w,k)!==5},toJD:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate);p=d.year(),w=d.month(),k=d.day();var e=p-(p>=0?474:473),u=474+D(e,2820);return k+(w<=7?(w-1)*31:(w-1)*30+6)+Math.floor((u*682-110)/2816)+(u-1)*365+Math.floor(e/2820)*1029983+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var w=p-this.toJD(475,1,1),k=Math.floor(w/1029983),d=D(w,1029983),e=2820;if(d!==1029982){var u=Math.floor(d/366),s=D(d,366);e=Math.floor((2134*u+2816*s+2815)/1028522)+u+1}var l=e+2820*k+474;l=l<=0?l-1:l;var b=p-this.toJD(l,1,1)+1,v=b<=186?Math.ceil(b/31):Math.ceil((b-6)/30),y=p-this.toJD(l,v,1)+1;return this.newDate(l,v,y)}});function D(p,w){return p-w*Math.floor(p/w)}R.calendars.persian=N,R.calendars.jalali=N},{"../main":99,"object-assign":71}],96:[function(z,le,ae){var R=z("../main"),L=z("object-assign"),N=R.instance();function D(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}D.prototype=new R.baseCalendar,L(D.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(k){var w=this._validate(k,this.minMonth,this.minDay,R.local.invalidYear),k=this._t2gYear(w.year());return N.leapYear(k)},weekOfYear:function(e,w,k){var d=this._validate(e,this.minMonth,this.minDay,R.local.invalidYear),e=this._t2gYear(d.year());return N.weekOfYear(e,d.month(),d.day())},daysInMonth:function(p,w){var k=this._validate(p,w,this.minDay,R.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===2&&this.leapYear(k.year())?1:0)},weekDay:function(p,w,k){return(this.dayOfWeek(p,w,k)||7)<6},toJD:function(e,w,k){var d=this._validate(e,w,k,R.local.invalidDate),e=this._t2gYear(d.year());return N.toJD(e,d.month(),d.day())},fromJD:function(p){var w=N.fromJD(p),k=this._g2tYear(w.year());return this.newDate(k,w.month(),w.day())},_t2gYear:function(p){return p+this.yearsOffset+(p>=-this.yearsOffset&&p<=-1?1:0)},_g2tYear:function(p){return p-this.yearsOffset-(p>=1&&p<=this.yearsOffset?1:0)}}),R.calendars.taiwan=D},{"../main":99,"object-assign":71}],97:[function(z,le,ae){var R=z("../main"),L=z("object-assign"),N=R.instance();function D(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}D.prototype=new R.baseCalendar,L(D.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var w=this._validate(k,this.minMonth,this.minDay,R.local.invalidYear),k=this._t2gYear(w.year());return N.leapYear(k)},weekOfYear:function(e,w,k){var d=this._validate(e,this.minMonth,this.minDay,R.local.invalidYear),e=this._t2gYear(d.year());return N.weekOfYear(e,d.month(),d.day())},daysInMonth:function(p,w){var k=this._validate(p,w,this.minDay,R.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===2&&this.leapYear(k.year())?1:0)},weekDay:function(p,w,k){return(this.dayOfWeek(p,w,k)||7)<6},toJD:function(e,w,k){var d=this._validate(e,w,k,R.local.invalidDate),e=this._t2gYear(d.year());return N.toJD(e,d.month(),d.day())},fromJD:function(p){var w=N.fromJD(p),k=this._g2tYear(w.year());return this.newDate(k,w.month(),w.day())},_t2gYear:function(p){return p-this.yearsOffset-(p>=1&&p<=this.yearsOffset?1:0)},_g2tYear:function(p){return p+this.yearsOffset+(p>=-this.yearsOffset&&p<=-1?1:0)}}),R.calendars.thai=D},{"../main":99,"object-assign":71}],98:[function(z,le,ae){var R=z("../main"),L=z("object-assign");function N(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}N.prototype=new R.baseCalendar,L(N.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(p){var w=this._validate(p,this.minMonth,this.minDay,R.local.invalidYear);return this.daysInYear(w.year())===355},weekOfYear:function(p,w,k){var d=this.newDate(p,w,k);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(p){for(var w=0,k=1;k<=12;k++)w+=this.daysInMonth(p,k);return w},daysInMonth:function(p,w){for(var k=this._validate(p,w,this.minDay,R.local.invalidMonth),d=k.toJD()-24e5+.5,e=0,u=0;u<D.length;u++){if(D[u]>d)return D[e]-D[e-1];e++}return 30},weekDay:function(p,w,k){return this.dayOfWeek(p,w,k)!==5},toJD:function(p,w,k){var d=this._validate(p,w,k,R.local.invalidDate),e=12*(d.year()-1)+d.month()-15292,u=d.day()+D[e-1]-1;return u+24e5-.5},fromJD:function(p){for(var w=p-24e5+.5,k=0,d=0;d<D.length&&!(D[d]>w);d++)k++;var e=k+15292,u=Math.floor((e-1)/12),s=u+1,l=e-12*u,b=w-D[k-1]+1;return this.newDate(s,l,b)},isValid:function(p,w,k){var d=R.baseCalendar.prototype.isValid.apply(this,arguments);return d&&(p=p.year!=null?p.year:p,d=p>=1276&&p<=1500),d},_validate:function(p,w,k,d){var e=R.baseCalendar.prototype._validate.apply(this,arguments);if(e.year<1276||e.year>1500)throw d.replace(/\{0\}/,this.local.name);return e}}),R.calendars.ummalqura=N;var D=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":99,"object-assign":71}],99:[function(z,le,ae){var R=z("object-assign");function L(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}R(L.prototype,{instance:function(d,e){d=(d||"gregorian").toLowerCase(),e=e||"";var u=this._localCals[d+"-"+e];if(!u&&this.calendars[d]&&(u=new this.calendars[d](e),this._localCals[d+"-"+e]=u),!u)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,d);return u},newDate:function(d,e,u,s,l){return s=(d!=null&&d.year?d.calendar():typeof s=="string"?this.instance(s,l):s)||this.instance(),s.newDate(d,e,u)},substituteDigits:function(d){return function(e){return(e+"").replace(/[0-9]/g,function(u){return d[u]})}},substituteChineseDigits:function(d,e){return function(u){for(var s="",l=0;u>0;){var b=u%10;s=(b===0?"":d[b]+e[l])+s,l++,u=Math.floor(u/10)}return s.indexOf(d[1]+e[1])===0&&(s=s.substr(1)),s||d[0]}}});function N(d,e,u,s){if(this._calendar=d,this._year=e,this._month=u,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(k.local.invalidDate||k.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function D(d,e){return d=""+d,"000000".substring(0,e-d.length)+d}R(N.prototype,{newDate:function(d,e,u){return this._calendar.newDate(d??this,e,u)},year:function(d){return arguments.length===0?this._year:this.set(d,"y")},month:function(d){return arguments.length===0?this._month:this.set(d,"m")},day:function(d){return arguments.length===0?this._day:this.set(d,"d")},date:function(d,e,u){if(!this._calendar.isValid(d,e,u))throw(k.local.invalidDate||k.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=d,this._month=e,this._day=u,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(d,e){return this._calendar.add(this,d,e)},set:function(d,e){return this._calendar.set(this,d,e)},compareTo:function(d){if(this._calendar.name!==d._calendar.name)throw(k.local.differentCalendars||k.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,d._calendar.local.name);var e=this._year!==d._year?this._year-d._year:this._month!==d._month?this.monthOfYear()-d.monthOfYear():this._day-d._day;return e===0?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(d){return this._calendar.fromJD(d)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(d){return this._calendar.fromJSDate(d)},toString:function(){return(this.year()<0?"-":"")+D(Math.abs(this.year()),4)+"-"+D(this.month(),2)+"-"+D(this.day(),2)}});function p(){this.shortYearCutoff="+10"}R(p.prototype,{_validateLevel:0,newDate:function(d,e,u){return d==null?this.today():(d.year&&(this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate),u=d.day(),e=d.month(),d=d.year()),new N(this,d,e,u))},today:function(){return this.fromJSDate(new Date)},epoch:function(d){var e=this._validate(d,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return e.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(d){var e=this._validate(d,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+D(Math.abs(e.year()),4)},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),12},monthOfYear:function(d,e){var u=this._validate(d,e,this.minDay,k.local.invalidMonth||k.regionalOptions[""].invalidMonth);return(u.month()+this.monthsInYear(u)-this.firstMonth)%this.monthsInYear(u)+this.minMonth},fromMonthOfYear:function(d,e){var u=(e+this.firstMonth-2*this.minMonth)%this.monthsInYear(d)+this.minMonth;return this._validate(d,u,this.minDay,k.local.invalidMonth||k.regionalOptions[""].invalidMonth),u},daysInYear:function(d){var e=this._validate(d,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(d,e,u){var s=this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(d,e,u){var s=this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(d,e,u){return this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate),{}},add:function(d,e,u){return this._validate(d,this.minMonth,this.minDay,k.local.invalidDate||k.regionalOptions[""].invalidDate),this._correctAdd(d,this._add(d,e,u),e,u)},_add:function(d,e,u){if(this._validateLevel++,u==="d"||u==="w"){var s=d.toJD()+e*(u==="w"?this.daysInWeek():1),l=d.calendar().fromJD(s);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var b=d.year()+(u==="y"?e:0),v=d.monthOfYear()+(u==="m"?e:0),l=d.day(),y=function(f){for(;v<f.minMonth;)b--,v+=f.monthsInYear(b);for(var g=f.monthsInYear(b);v>g-1+f.minMonth;)b++,v-=g,g=f.monthsInYear(b)};u==="y"?(d.month()!==this.fromMonthOfYear(b,v)&&(v=this.newDate(b,d.month(),this.minDay).monthOfYear()),v=Math.min(v,this.monthsInYear(b)),l=Math.min(l,this.daysInMonth(b,this.fromMonthOfYear(b,v)))):u==="m"&&(y(this),l=Math.min(l,this.daysInMonth(b,this.fromMonthOfYear(b,v))));var T=[b,this.fromMonthOfYear(b,v),l];return this._validateLevel--,T}catch(_){throw this._validateLevel--,_}},_correctAdd:function(d,e,u,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(e[0]===0||d.year()>0!=e[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],b=u<0?-1:1;e=this._add(d,u*l[0]+b*l[1],l[2])}return d.date(e[0],e[1],e[2])},set:function(d,e,u){this._validate(d,this.minMonth,this.minDay,k.local.invalidDate||k.regionalOptions[""].invalidDate);var s=u==="y"?e:d.year(),l=u==="m"?e:d.month(),b=u==="d"?e:d.day();return(u==="y"||u==="m")&&(b=Math.min(b,this.daysInMonth(s,l))),d.date(s,l,b)},isValid:function(d,e,u){this._validateLevel++;var s=this.hasYearZero||d!==0;if(s){var l=this.newDate(d,e,this.minDay);s=e>=this.minMonth&&e-this.minMonth<this.monthsInYear(l)&&u>=this.minDay&&u-this.minDay<this.daysInMonth(l)}return this._validateLevel--,s},toJSDate:function(d,e,u){var s=this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate);return k.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(d){return this.fromJD(k.instance().fromJSDate(d).toJD())},_validate:function(d,e,u,s){if(d.year){if(this._validateLevel===0&&this.name!==d.calendar().name)throw(k.local.differentCalendars||k.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,d.calendar().local.name);return d}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(d,e,u))throw s.replace(/\{0\}/,this.local.name);var l=this.newDate(d,e,u);return this._validateLevel--,l}catch(b){throw this._validateLevel--,b}}});function w(d){this.local=this.regionalOptions[d]||this.regionalOptions[""]}w.prototype=new p,R(w.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var e=this._validate(u,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),u=e.year()+(e.year()<0?1:0);return u%4===0&&(u%100!==0||u%400===0)},weekOfYear:function(d,e,u){var s=this.newDate(d,e,u);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(d,e){var u=this._validate(d,e,this.minDay,k.local.invalidMonth||k.regionalOptions[""].invalidMonth);return this.daysPerMonth[u.month()-1]+(u.month()===2&&this.leapYear(u.year())?1:0)},weekDay:function(d,e,u){return(this.dayOfWeek(d,e,u)||7)<6},toJD:function(d,e,u){var s=this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate);d=s.year(),e=s.month(),u=s.day(),d<0&&d++,e<3&&(e+=12,d--);var l=Math.floor(d/100),b=2-l+Math.floor(l/4);return Math.floor(365.25*(d+4716))+Math.floor(30.6001*(e+1))+u+b-1524.5},fromJD:function(d){var e=Math.floor(d+.5),u=Math.floor((e-186721625e-2)/36524.25);u=e+1+u-Math.floor(u/4);var s=u+1524,l=Math.floor((s-122.1)/365.25),b=Math.floor(365.25*l),v=Math.floor((s-b)/30.6001),y=s-b-Math.floor(v*30.6001),T=v-(v>13.5?13:1),_=l-(T>2.5?4716:4715);return _<=0&&_--,this.newDate(_,T,y)},toJSDate:function(d,e,u){var s=this._validate(d,e,u,k.local.invalidDate||k.regionalOptions[""].invalidDate),l=new Date(s.year(),s.month()-1,s.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(d){return this.newDate(d.getFullYear(),d.getMonth()+1,d.getDate())}});var k=le.exports=new L;k.cdate=N,k.baseCalendar=p,k.calendars.gregorian=w},{"object-assign":71}],100:[function(z,le,ae){var R=z("object-assign"),L=z("./main");R(L.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),L.local=L.regionalOptions[""],R(L.cdate.prototype,{formatDate:function(N,D){return typeof N!="string"&&(D=N,N=""),this._calendar.formatDate(N||"",this,D)}}),R(L.baseCalendar.prototype,{UNIX_EPOCH:L.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:L.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(N,D,p){if(typeof N!="string"&&(p=D,D=N,N=""),!D)return"";if(D.calendar()!==this)throw L.local.invalidFormat||L.regionalOptions[""].invalidFormat;N=N||this.local.dateFormat,p=p||{};for(var w=p.dayNamesShort||this.local.dayNamesShort,k=p.dayNames||this.local.dayNames,d=p.monthNumbers||this.local.monthNumbers,e=p.monthNamesShort||this.local.monthNamesShort,u=p.monthNames||this.local.monthNames,s=p.calculateWeek||this.local.calculateWeek,l=function(c,m){for(var o=1;h+o<N.length&&N.charAt(h+o)===c;)o++;return h+=o-1,Math.floor(o/(m||1))>1},b=function(c,m,o,t){var i=""+m;if(l(c,t))for(;i.length<o;)i="0"+i;return i},v=function(c,m,o,t){return l(c)?t[m]:o[m]},y=this,T=function(c){return typeof d=="function"?d.call(y,c,l("m")):g(b("m",c.month(),2))},_=function(c,m){return m?typeof u=="function"?u.call(y,c):u[c.month()-y.minMonth]:typeof e=="function"?e.call(y,c):e[c.month()-y.minMonth]},f=this.local.digits,g=function(c){return p.localNumbers&&f?f(c):c},n="",a=!1,h=0;h<N.length;h++)if(a)N.charAt(h)==="'"&&!l("'")?a=!1:n+=N.charAt(h);else switch(N.charAt(h)){case"d":n+=g(b("d",D.day(),2));break;case"D":n+=v("D",D.dayOfWeek(),w,k);break;case"o":n+=b("o",D.dayOfYear(),3);break;case"w":n+=b("w",D.weekOfYear(),2);break;case"m":n+=T(D);break;case"M":n+=_(D,l("M"));break;case"y":n+=l("y",2)?D.year():(D.year()%100<10?"0":"")+D.year()%100;break;case"Y":l("Y",2),n+=D.formatYear();break;case"J":n+=D.toJD();break;case"@":n+=(D.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":n+=(D.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?n+="'":a=!0;break;default:n+=N.charAt(h)}return n},parseDate:function(N,D,p){if(D==null)throw L.local.invalidArguments||L.regionalOptions[""].invalidArguments;if(D=typeof D=="object"?D.toString():D+"",D==="")return null;N=N||this.local.dateFormat,p=p||{};var w=p.shortYearCutoff||this.shortYearCutoff;w=typeof w!="string"?w:this.today().year()%100+parseInt(w,10);for(var k=p.dayNamesShort||this.local.dayNamesShort,d=p.dayNames||this.local.dayNames,e=p.parseMonth||this.local.parseMonth,u=p.monthNumbers||this.local.monthNumbers,s=p.monthNamesShort||this.local.monthNamesShort,l=p.monthNames||this.local.monthNames,b=-1,v=-1,y=-1,T=-1,_=-1,f=!1,g=!1,n=function(E,P){for(var S=1;r+S<N.length&&N.charAt(r+S)===E;)S++;return r+=S-1,Math.floor(S/(P||1))>1},a=function(E,P){var S=n(E,P),C=[2,3,S?4:2,S?4:2,10,11,20]["oyYJ@!".indexOf(E)+1],M=new RegExp("^-?\\d{1,"+C+"}"),I=D.substring(i).match(M);if(!I)throw(L.local.missingNumberAt||L.regionalOptions[""].missingNumberAt).replace(/\{0\}/,i);return i+=I[0].length,parseInt(I[0],10)},h=this,c=function(){if(typeof u=="function"){n("m");var E=u.call(h,D.substring(i));return i+=E.length,E}return a("m")},m=function(E,P,S,C){for(var M=n(E,C)?S:P,I=0;I<M.length;I++)if(D.substr(i,M[I].length).toLowerCase()===M[I].toLowerCase())return i+=M[I].length,I+h.minMonth;throw(L.local.unknownNameAt||L.regionalOptions[""].unknownNameAt).replace(/\{0\}/,i)},o=function(){if(typeof l=="function"){var E=n("M")?l.call(h,D.substring(i)):s.call(h,D.substring(i));return i+=E.length,E}return m("M",s,l)},t=function(){if(D.charAt(i)!==N.charAt(r))throw(L.local.unexpectedLiteralAt||L.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,i);i++},i=0,r=0;r<N.length;r++)if(g)N.charAt(r)==="'"&&!n("'")?g=!1:t();else switch(N.charAt(r)){case"d":T=a("d");break;case"D":m("D",k,d);break;case"o":_=a("o");break;case"w":a("w");break;case"m":y=c();break;case"M":y=o();break;case"y":var x=r;f=!n("y",2),r=x,v=a("y",2);break;case"Y":v=a("Y",2);break;case"J":b=a("J")+.5,D.charAt(i)==="."&&(i++,a("J"));break;case"@":b=a("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=a("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":i=D.length;break;case"'":n("'")?t():g=!0;break;default:t()}if(i<D.length)throw L.local.unexpectedText||L.regionalOptions[""].unexpectedText;if(v===-1?v=this.today().year():v<100&&f&&(v+=w===-1?1900:this.today().year()-this.today().year()%100-(v<=w?0:100)),typeof y=="string"&&(y=e.call(this,v,y)),_>-1){y=1,T=_;for(var A=this.daysInMonth(v,y);T>A;A=this.daysInMonth(v,y))y++,T-=A}return b>-1?this.fromJD(b):this.newDate(v,y,T)},determineDate:function(N,D,p,w,k){p&&typeof p!="object"&&(k=w,w=p,p=null),typeof w!="string"&&(k=w,w="");var d=this,e=function(u){try{return d.parseDate(w,u,k)}catch{}u=u.toLowerCase();for(var s=(u.match(/^c/)&&p?p.newDate():null)||d.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=l.exec(u);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=l.exec(u);return s};return D=D?D.newDate():null,N=N==null?D:typeof N=="string"?e(N):typeof N=="number"?isNaN(N)||N===1/0||N===-1/0?D:d.today().add(N,"d"):d.newDate(N),N}})},{"./main":99,"object-assign":71}],101:[function(z,le,ae){"use strict";le.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],102:[function(z,le,ae){"use strict";var R=z("./arrow_paths"),L=z("../../plots/font_attributes"),N=z("../../plots/cartesian/constants"),D=z("../../plot_api/plot_template").templatedArray,p=z("../../constants/axis_placeable_objects");function w(d){return["In order for absolute positioning of the arrow to work, *a"+d+"ref* must be exactly the same as *"+d+"ref*, otherwise *a"+d+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+d+"ref* can be set to *pixel*,","in which case the *a"+d+"* value is specified in pixels","relative to *"+d+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function k(d,e,u){return["Sets the",d,"component of the arrow tail about the arrow head.","If `a"+d+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",u,"to",e,"("+e,"to",u+").","If `a"+d+"ref` is not `pixel` and is exactly the same as `"+d+"ref`,","this is an absolute value on that axis,","like `"+d+"`, specified in the same coordinates as `"+d+"ref`."].join(" ")}le.exports=D("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:L({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:R.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:R.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",N.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",N.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",N.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",N.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:L({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":225,"../../plot_api/plot_template":290,"../../plots/cartesian/constants":308,"../../plots/font_attributes":332,"./arrow_paths":101}],103:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("./draw").draw;le.exports=function(k){var d=k._fullLayout,e=R.filterVisible(d.annotations);if(e.length&&k._fullData.length)return R.syncOrAsync([N,D],k)};function D(w){var k=w._fullLayout;R.filterVisible(k.annotations).forEach(function(d){var e=L.getFromId(w,d.xref),u=L.getFromId(w,d.yref),s=L.getRefType(d.xref),l=L.getRefType(d.yref);d._extremes={},s==="range"&&p(d,e),l==="range"&&p(d,u)})}function p(w,k){var d=k._id,e=d.charAt(0),u=w[e],s=w["a"+e],l=w[e+"ref"],b=w["a"+e+"ref"],v=w["_"+e+"padplus"],y=w["_"+e+"padminus"],T={x:1,y:-1}[e]*w[e+"shift"],_=3*w.arrowsize*w.arrowwidth||0,f=_+T,g=_-T,n=3*w.startarrowsize*w.arrowwidth||0,a=n+T,h=n-T,c;if(b===l){var m=L.findExtremes(k,[k.r2c(u)],{ppadplus:f,ppadminus:g}),o=L.findExtremes(k,[k.r2c(s)],{ppadplus:Math.max(v,a),ppadminus:Math.max(y,h)});c={min:[m.min[0],o.min[0]],max:[m.max[0],o.max[0]]}}else a=s?a+s:a,h=s?h-s:h,c=L.findExtremes(k,[k.r2c(u)],{ppadplus:Math.max(v,f,a),ppadminus:Math.max(y,g,h)});w._extremes[d]=c}},{"../../lib":252,"../../plots/cartesian/axes":301,"./draw":108}],104:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry"),N=z("../../plot_api/plot_template").arrayEditor;le.exports={hasClickToShow:D,onClick:p};function D(d,e){var u=w(d,e);return u.on.length>0||u.explicitOff.length>0}function p(d,e){var u=w(d,e),s=u.on,l=u.off.concat(u.explicitOff),b={},v=d._fullLayout.annotations,y,T;if(!!(s.length||l.length)){for(y=0;y<s.length;y++)T=N(d.layout,"annotations",v[s[y]]),T.modifyItem("visible",!0),R.extendFlat(b,T.getUpdateObj());for(y=0;y<l.length;y++)T=N(d.layout,"annotations",v[l[y]]),T.modifyItem("visible",!1),R.extendFlat(b,T.getUpdateObj());return L.call("update",d,{},b)}}function w(d,e){var u=d._fullLayout.annotations,s=[],l=[],b=[],v=(e||[]).length,y,T,_,f,g,n,a,h;for(y=0;y<u.length;y++)if(_=u[y],f=_.clicktoshow,f){for(T=0;T<v;T++)if(g=e[T],n=g.xaxis,a=g.yaxis,n._id===_.xref&&a._id===_.yref&&n.d2r(g.x)===k(_._xclick,n)&&a.d2r(g.y)===k(_._yclick,a)){_.visible?f==="onout"?h=l:h=b:h=s,h.push(y);break}T===v&&_.visible&&f==="onout"&&l.push(y)}return{on:s,off:l,explicitOff:b}}function k(d,e){return e.type==="log"?e.l2r(d):e.d2r(d)}},{"../../lib":252,"../../plot_api/plot_template":290,"../../registry":352}],105:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../color");le.exports=function(D,p,w,k){k("opacity");var d=k("bgcolor"),e=k("bordercolor"),u=L.opacity(e);k("borderpad");var s=k("borderwidth"),l=k("showarrow");k("text",l?" ":w._dfltTitle.annotation),k("textangle"),R.coerceFont(k,"font",w.font),k("width"),k("align");var b=k("height");if(b&&k("valign"),l){var v=k("arrowside"),y,T;v.indexOf("end")!==-1&&(y=k("arrowhead"),T=k("arrowsize")),v.indexOf("start")!==-1&&(k("startarrowhead",y),k("startarrowsize",T)),k("arrowcolor",u?p.bordercolor:L.defaultLine),k("arrowwidth",(u&&s||1)*2),k("standoff"),k("startstandoff")}var _=k("hovertext"),f=w.hoverlabel||{};if(_){var g=k("hoverlabel.bgcolor",f.bgcolor||(L.opacity(d)?L.rgb(d):L.defaultLine)),n=k("hoverlabel.bordercolor",f.bordercolor||L.contrast(g));R.coerceFont(k,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||n})}k("captureevents",!!_)}},{"../../lib":252,"../color":119}],106:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib/to_log_range");le.exports=function(D,p,w,k){p=p||{};var d=w==="log"&&p.type==="linear",e=w==="linear"&&p.type==="log";if(!(d||e))return;var u=D._fullLayout.annotations,s=p._id.charAt(0),l,b;function v(T){var _=l[T],f=null;d?f=L(_,p.range):f=Math.pow(10,_),R(f)||(f=null),k(b+T,f)}for(var y=0;y<u.length;y++)l=u[y],b="annotations["+y+"].",l[s+"ref"]===p._id&&v(s),l["a"+s+"ref"]===p._id&&v("a"+s)}},{"../../lib/to_log_range":279,"fast-isnumeric":31}],107:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("../../plots/array_container_defaults"),D=z("./common_defaults"),p=z("./attributes");le.exports=function(d,e){N(d,e,{name:"annotations",handleItemDefaults:w})};function w(k,d,e){function u(t,i){return R.coerce(k,d,p,t,i)}var s=u("visible"),l=u("clicktoshow");if(!!(s||l)){D(k,d,e,u);for(var b=d.showarrow,v=["x","y"],y=[-10,-30],T={_fullLayout:e},_=0;_<2;_++){var f=v[_],g=L.coerceRef(k,d,T,f,"","paper");if(g!=="paper"){var n=L.getFromId(T,g);n._annIndices.push(d._index)}if(L.coercePosition(d,T,u,g,f,.5),b){var a="a"+f,h=L.coerceRef(k,d,T,a,"pixel",["pixel","paper"]);h!=="pixel"&&h!==g&&(h=d[a]="pixel");var c=h==="pixel"?y[_]:.4;L.coercePosition(d,T,u,h,a,c)}u(f+"anchor"),u(f+"shift")}if(R.noneOrAll(k,d,["x","y"]),b&&R.noneOrAll(k,d,["ax","ay"]),l){var m=u("xclick"),o=u("yclick");d._xclick=m===void 0?d.x:L.cleanPosition(m,T,d.xref),d._yclick=o===void 0?d.y:L.cleanPosition(o,T,d.yref)}}}},{"../../lib":252,"../../plots/array_container_defaults":296,"../../plots/cartesian/axes":301,"./attributes":102,"./common_defaults":105}],108:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../plots/plots"),D=z("../../lib"),p=D.strTranslate,w=z("../../plots/cartesian/axes"),k=z("../color"),d=z("../drawing"),e=z("../fx"),u=z("../../lib/svg_text_utils"),s=z("../../lib/setcursor"),l=z("../dragelement"),b=z("../../plot_api/plot_template").arrayEditor,v=z("./draw_arrow_head");le.exports={draw:y,drawOne:T,drawRaw:f};function y(g){var n=g._fullLayout;n._infolayer.selectAll(".annotation").remove();for(var a=0;a<n.annotations.length;a++)n.annotations[a].visible&&T(g,a);return N.previousPromises(g)}function T(g,n){var a=g._fullLayout,h=a.annotations[n]||{},c=w.getFromId(g,h.xref),m=w.getFromId(g,h.yref);c&&c.setScale(),m&&m.setScale(),f(g,h,n,!1,c,m)}function _(g,n,a,h,c){var m=c[a],o=c[a+"ref"],t=a.indexOf("y")!==-1,i=w.getRefType(o)==="domain",r=t?h.h:h.w;return g?i?m+(t?-n:n)/g._length:g.p2r(g.r2p(m)+n):m+(t?-n:n)/r}function f(g,n,a,h,c,m){var o=g._fullLayout,t=g._fullLayout._size,i=g._context.edits,r,x;h?(r="annotation-"+h,x=h+".annotations"):(r="annotation",x="annotations");var A=b(g.layout,x,n),E=A.modifyBase,P=A.modifyItem,S=A.getUpdateObj;o._infolayer.selectAll("."+r+'[data-index="'+a+'"]').remove();var C="clip"+o._uid+"_ann"+a;if(!n._input||n.visible===!1){R.selectAll("#"+C).remove();return}var M={x:{},y:{}},I=+n.textangle||0,G=o._infolayer.append("g").classed(r,!0).attr("data-index",String(a)).style("opacity",n.opacity),V=G.append("g").classed("annotation-text-g",!0),q=i[n.showarrow?"annotationTail":"annotationPosition"],ee=n.captureevents||i.annotationText||q;function Q(de){var ve={index:a,annotation:n._input,fullAnnotation:n,event:de};return h&&(ve.subplotId=h),ve}var U=V.append("g").style("pointer-events",ee?"all":null).call(s,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",Q(R.event))});n.hovertext&&U.on("mouseover",function(){var de=n.hoverlabel,ve=de.font,ue=this.getBoundingClientRect(),ce=g.getBoundingClientRect();e.loneHover({x0:ue.left-ce.left,x1:ue.right-ce.left,y:(ue.top+ue.bottom)/2-ce.top,text:n.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:ve.family,fontSize:ve.size,fontColor:ve.color},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:g})}).on("mouseout",function(){e.loneUnhover(o._hoverlayer.node())});var O=n.borderwidth,Z=n.borderpad,B=O+Z,Y=U.append("rect").attr("class","bg").style("stroke-width",O+"px").call(k.stroke,n.bordercolor).call(k.fill,n.bgcolor),j=n.width||n.height,X=o._topclips.selectAll("#"+C).data(j?[0]:[]);X.enter().append("clipPath").classed("annclip",!0).attr("id",C).append("rect"),X.exit().remove();var H=n.font,K=o._meta?D.templateString(n.text,o._meta):n.text,W=U.append("text").classed("annotation-text",!0).text(K);function $(de){return de.call(d.font,H).attr({"text-anchor":{left:"start",right:"end"}[n.align]||"middle"}),u.convertToTspans(de,g,re),de}function re(){var de=W.selectAll("a");if(de.size()===1&&de.text()===W.text()){var ve=U.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"});ve.node().appendChild(Y.node())}var ue=U.select(".annotation-text-math-group"),ce=!ue.empty(),_e=d.bBox((ce?ue:W).node()),fe=_e.width,ne=_e.height,ie=n.width||fe,me=n.height||ne,we=Math.round(ie+2*B),be=Math.round(me+2*B);function Me(Wt,It){return It==="auto"&&(Wt<1/3?It="left":Wt>2/3?It="right":It="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[It]}for(var Ie=!1,Ke=["x","y"],Oe=0;Oe<Ke.length;Oe++){var We=Ke[Oe],Fe=n[We+"ref"]||We,Ge=n["a"+We+"ref"],Xe={x:c,y:m}[We],ut=(I+(We==="x"?0:-90))*Math.PI/180,rt=we*Math.cos(ut),dt=be*Math.sin(ut),st=Math.abs(rt)+Math.abs(dt),Ve=n[We+"anchor"],Je=n[We+"shift"]*(We==="x"?1:-1),ke=M[We],Le,Be,pe,Ae,Ce,Se=w.getRefType(Fe);if(Xe&&Se!=="domain"){var He=Xe.r2fraction(n[We]);(He<0||He>1)&&(Ge===Fe?(He=Xe.r2fraction(n["a"+We]),(He<0||He>1)&&(Ie=!0)):Ie=!0),Le=Xe._offset+Xe.r2p(n[We]),Ae=.5}else{var Ne=Se==="domain";We==="x"?(pe=n[We],Le=Ne?Xe._offset+Xe._length*pe:Le=t.l+t.w*pe):(pe=1-n[We],Le=Ne?Xe._offset+Xe._length*pe:Le=t.t+t.h*pe),Ae=n.showarrow?.5:pe}if(n.showarrow){ke.head=Le;var qe=n["a"+We];if(Ce=rt*Me(.5,n.xanchor)-dt*Me(.5,n.yanchor),Ge===Fe){var at=w.getRefType(Ge);at==="domain"?(We==="y"&&(qe=1-qe),ke.tail=Xe._offset+Xe._length*qe):at==="paper"?We==="y"?(qe=1-qe,ke.tail=t.t+t.h*qe):ke.tail=t.l+t.w*qe:ke.tail=Xe._offset+Xe.r2p(qe),Be=Ce}else ke.tail=Le+qe,Be=Ce+qe;ke.text=ke.tail+Ce;var nt=o[We==="x"?"width":"height"];if(Fe==="paper"&&(ke.head=D.constrain(ke.head,1,nt-1)),Ge==="pixel"){var Ze=-Math.max(ke.tail-3,ke.text),ht=Math.min(ke.tail+3,ke.text)-nt;Ze>0?(ke.tail+=Ze,ke.text+=Ze):ht>0&&(ke.tail-=ht,ke.text-=ht)}ke.tail+=Je,ke.head+=Je}else Ce=st*Me(Ae,Ve),Be=Ce,ke.text=Le+Ce;ke.text+=Je,Ce+=Je,Be+=Je,n["_"+We+"padplus"]=st/2+Be,n["_"+We+"padminus"]=st/2-Be,n["_"+We+"size"]=st,n["_"+We+"shift"]=Ce}if(Ie){U.remove();return}var kt=0,xt=0;if(n.align!=="left"&&(kt=(ie-fe)*(n.align==="center"?.5:1)),n.valign!=="top"&&(xt=(me-ne)*(n.valign==="middle"?.5:1)),ce)ue.select("svg").attr({x:B+kt-1,y:B+xt}).call(d.setClipUrl,j?C:null,g);else{var Bt=B+xt-_e.top,Zt=B+kt-_e.left;W.call(u.positionText,Zt,Bt).call(d.setClipUrl,j?C:null,g)}X.select("rect").call(d.setRect,B,B,ie,me),Y.call(d.setRect,O/2,O/2,we-O,be-O),U.call(d.setTranslate,Math.round(M.x.text-we/2),Math.round(M.y.text-be/2)),V.attr({transform:"rotate("+I+","+M.x.text+","+M.y.text+")"});var Gt=function(Wt,It){G.selectAll(".annotation-arrow-g").remove();var vt=M.x.head,Yt=M.y.head,Ft=M.x.tail+Wt,ye=M.y.tail+It,ge=M.x.text+Wt,Re=M.y.text+It,ze=D.rotationXYMatrix(I,ge,Re),Ue=D.apply2DTransform(ze),je=D.apply2DTransform2(ze),Ye=+Y.attr("width"),et=+Y.attr("height"),ot=ge-.5*Ye,_t=ot+Ye,Mt=Re-.5*et,St=Mt+et,Dt=[[ot,Mt,ot,St],[ot,St,_t,St],[_t,St,_t,Mt],[_t,Mt,ot,Mt]].map(je);if(!Dt.reduce(function(Vt,Qt){return Vt^!!D.segmentsIntersect(vt,Yt,vt+1e6,Yt+1e6,Qt[0],Qt[1],Qt[2],Qt[3])},!1)){Dt.forEach(function(Vt){var Qt=D.segmentsIntersect(Ft,ye,vt,Yt,Vt[0],Vt[1],Vt[2],Vt[3]);Qt&&(Ft=Qt.x,ye=Qt.y)});var Ot=n.arrowwidth,Ht=n.arrowcolor,er=n.arrowside,wt=G.append("g").style({opacity:k.opacity(Ht)}).classed("annotation-arrow-g",!0),Et=wt.append("path").attr("d","M"+Ft+","+ye+"L"+vt+","+Yt).style("stroke-width",Ot+"px").call(k.stroke,k.rgb(Ht));if(v(Et,er,n),i.annotationPosition&&Et.node().parentNode&&!h){var zt=vt,Ut=Yt;if(n.standoff){var pt=Math.sqrt(Math.pow(vt-Ft,2)+Math.pow(Yt-ye,2));zt+=n.standoff*(Ft-vt)/pt,Ut+=n.standoff*(ye-Yt)/pt}var Ct=wt.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ft-zt)+","+(ye-Ut),transform:p(zt,Ut)}).style("stroke-width",Ot+6+"px").call(k.stroke,"rgba(0,0,0,0)").call(k.fill,"rgba(0,0,0,0)"),Lt,At;l.init({element:Ct.node(),gd:g,prepFn:function(){var Vt=d.getTranslate(U);Lt=Vt.x,At=Vt.y,c&&c.autorange&&E(c._name+".autorange",!0),m&&m.autorange&&E(m._name+".autorange",!0)},moveFn:function(Vt,Qt){var $t=Ue(Lt,At),Pt=$t[0]+Vt,rr=$t[1]+Qt;U.call(d.setTranslate,Pt,rr),P("x",_(c,Vt,"x",t,n)),P("y",_(m,Qt,"y",t,n)),n.axref===n.xref&&P("ax",_(c,Vt,"ax",t,n)),n.ayref===n.yref&&P("ay",_(m,Qt,"ay",t,n)),wt.attr("transform",p(Vt,Qt)),V.attr({transform:"rotate("+I+","+Pt+","+rr+")"})},doneFn:function(){L.call("_guiRelayout",g,S());var Vt=document.querySelector(".js-notes-box-panel");Vt&&Vt.redraw(Vt.selectedObj)}})}}};if(n.showarrow&&Gt(0,0),q){var Rt;l.init({element:U.node(),gd:g,prepFn:function(){Rt=V.attr("transform")},moveFn:function(Wt,It){var vt="pointer";if(n.showarrow)n.axref===n.xref?P("ax",_(c,Wt,"ax",t,n)):P("ax",n.ax+Wt),n.ayref===n.yref?P("ay",_(m,It,"ay",t.w,n)):P("ay",n.ay+It),Gt(Wt,It);else{if(h)return;var Yt,Ft;if(c)Yt=_(c,Wt,"x",t,n);else{var ye=n._xsize/t.w,ge=n.x+(n._xshift-n.xshift)/t.w-ye/2;Yt=l.align(ge+Wt/t.w,ye,0,1,n.xanchor)}if(m)Ft=_(m,It,"y",t,n);else{var Re=n._ysize/t.h,ze=n.y-(n._yshift+n.yshift)/t.h-Re/2;Ft=l.align(ze-It/t.h,Re,0,1,n.yanchor)}P("x",Yt),P("y",Ft),(!c||!m)&&(vt=l.getCursor(c?.5:Yt,m?.5:Ft,n.xanchor,n.yanchor))}V.attr({transform:p(Wt,It)+Rt}),s(U,vt)},clickFn:function(Wt,It){n.captureevents&&g.emit("plotly_clickannotation",Q(It))},doneFn:function(){s(U),L.call("_guiRelayout",g,S());var Wt=document.querySelector(".js-notes-box-panel");Wt&&Wt.redraw(Wt.selectedObj)}})}}i.annotationText?W.call(u.makeEditable,{delegate:U,gd:g}).call($).on("edit",function(de){n.text=de,this.call($),P("text",de),c&&c.autorange&&E(c._name+".autorange",!0),m&&m.autorange&&E(m._name+".autorange",!0),L.call("_guiRelayout",g,S())}):W.call($)}},{"../../lib":252,"../../lib/setcursor":272,"../../lib/svg_text_utils":277,"../../plot_api/plot_template":290,"../../plots/cartesian/axes":301,"../../plots/plots":349,"../../registry":352,"../color":119,"../dragelement":138,"../drawing":141,"../fx":159,"./draw_arrow_head":109,"@plotly/d3":16}],109:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../color"),N=z("./arrow_paths"),D=z("../../lib"),p=D.strScale,w=D.strRotate,k=D.strTranslate;le.exports=function(e,u,s){var l=e.node(),b=N[s.arrowhead||0],v=N[s.startarrowhead||0],y=(s.arrowwidth||1)*(s.arrowsize||1),T=(s.arrowwidth||1)*(s.startarrowsize||1),_=u.indexOf("start")>=0,f=u.indexOf("end")>=0,g=b.backoff*y+s.standoff,n=v.backoff*T+s.startstandoff,a,h,c,m;if(l.nodeName==="line"){a={x:+e.attr("x1"),y:+e.attr("y1")},h={x:+e.attr("x2"),y:+e.attr("y2")};var o=a.x-h.x,t=a.y-h.y;if(c=Math.atan2(t,o),m=c+Math.PI,g&&n&&g+n>Math.sqrt(o*o+t*t)){V();return}if(g){if(g*g>o*o+t*t){V();return}var i=g*Math.cos(c),r=g*Math.sin(c);h.x+=i,h.y+=r,e.attr({x2:h.x,y2:h.y})}if(n){if(n*n>o*o+t*t){V();return}var x=n*Math.cos(c),A=n*Math.sin(c);a.x-=x,a.y-=A,e.attr({x1:a.x,y1:a.y})}}else if(l.nodeName==="path"){var E=l.getTotalLength(),P="";if(E<g+n){V();return}var S=l.getPointAtLength(0),C=l.getPointAtLength(.1);c=Math.atan2(S.y-C.y,S.x-C.x),a=l.getPointAtLength(Math.min(n,E)),P="0px,"+n+"px,";var M=l.getPointAtLength(E),I=l.getPointAtLength(E-.1);m=Math.atan2(M.y-I.y,M.x-I.x),h=l.getPointAtLength(Math.max(0,E-g));var G=P?n+g:g;P+=E-G+"px,"+E+"px",e.style("stroke-dasharray",P)}function V(){e.style("stroke-dasharray","0px,100px")}function q(ee,Q,U,O){!ee.path||(ee.noRotate&&(U=0),R.select(l.parentNode).append("path").attr({class:e.attr("class"),d:ee.path,transform:k(Q.x,Q.y)+w(U*180/Math.PI)+p(O)}).style({fill:L.rgb(s.arrowcolor),"stroke-width":0}))}_&&q(v,a,c,T),f&&q(b,h,m,y)}},{"../../lib":252,"../color":119,"./arrow_paths":101,"@plotly/d3":16}],110:[function(z,le,ae){"use strict";var R=z("./draw"),L=z("./click");le.exports={moduleType:"component",name:"annotations",layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),includeBasePlot:z("../../plots/cartesian/include_components")("annotations"),calcAutorange:z("./calc_autorange"),draw:R.draw,drawOne:R.drawOne,drawRaw:R.drawRaw,hasClickToShow:L.hasClickToShow,onClick:L.onClick,convertCoords:z("./convert_coords")}},{"../../plots/cartesian/include_components":314,"./attributes":102,"./calc_autorange":103,"./click":104,"./convert_coords":106,"./defaults":107,"./draw":108}],111:[function(z,le,ae){"use strict";var R=z("../annotations/attributes"),L=z("../../plot_api/edit_types").overrideAll,N=z("../../plot_api/plot_template").templatedArray;le.exports=L(N("annotation",{visible:R.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:R.xanchor,xshift:R.xshift,yanchor:R.yanchor,yshift:R.yshift,text:R.text,textangle:R.textangle,font:R.font,width:R.width,height:R.height,opacity:R.opacity,align:R.align,valign:R.valign,bgcolor:R.bgcolor,bordercolor:R.bordercolor,borderpad:R.borderpad,borderwidth:R.borderwidth,showarrow:R.showarrow,arrowcolor:R.arrowcolor,arrowhead:R.arrowhead,startarrowhead:R.startarrowhead,arrowside:R.arrowside,arrowsize:R.arrowsize,startarrowsize:R.startarrowsize,arrowwidth:R.arrowwidth,standoff:R.standoff,startstandoff:R.startstandoff,hovertext:R.hovertext,hoverlabel:R.hoverlabel,captureevents:R.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":283,"../../plot_api/plot_template":290,"../annotations/attributes":102}],112:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes");le.exports=function(p){for(var w=p.fullSceneLayout,k=w.annotations,d=0;d<k.length;d++)N(k[d],p);p.fullLayout._infolayer.selectAll(".annotation-"+p.id).remove()};function N(D,p){var w=p.fullSceneLayout,k=w.domain,d=p.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};D._xa={},R.extendFlat(D._xa,e),L.setConvert(D._xa),D._xa._offset=d.l+k.x[0]*d.w,D._xa.l2p=function(){return .5*(1+D._pdata[0]/D._pdata[3])*d.w*(k.x[1]-k.x[0])},D._ya={},R.extendFlat(D._ya,e),L.setConvert(D._ya),D._ya._offset=d.t+(1-k.y[1])*d.h,D._ya.l2p=function(){return .5*(1-D._pdata[1]/D._pdata[3])*d.h*(k.y[1]-k.y[0])}}},{"../../lib":252,"../../plots/cartesian/axes":301}],113:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("../../plots/array_container_defaults"),D=z("../annotations/common_defaults"),p=z("./attributes");le.exports=function(d,e,u){N(d,e,{name:"annotations",handleItemDefaults:w,fullLayout:u.fullLayout})};function w(k,d,e,u){function s(v,y){return R.coerce(k,d,p,v,y)}function l(v){var y=v+"axis",T={_fullLayout:{}};return T._fullLayout[y]=e[y],L.coercePosition(d,T,s,v,v,.5)}var b=s("visible");!b||(D(k,d,u.fullLayout,s),l("x"),l("y"),l("z"),R.noneOrAll(k,d,["x","y","z"]),d.xref="x",d.yref="y",d.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),d.showarrow&&(d.axref="pixel",d.ayref="pixel",s("ax",-10),s("ay",-30),R.noneOrAll(k,d,["ax","ay"])))}},{"../../lib":252,"../../plots/array_container_defaults":296,"../../plots/cartesian/axes":301,"../annotations/common_defaults":105,"./attributes":111}],114:[function(z,le,ae){"use strict";var R=z("../annotations/draw").drawRaw,L=z("../../plots/gl3d/project"),N=["x","y","z"];le.exports=function(p){for(var w=p.fullSceneLayout,k=p.dataScale,d=w.annotations,e=0;e<d.length;e++){for(var u=d[e],s=!1,l=0;l<3;l++){var b=N[l],v=u[b],y=w[b+"axis"],T=y.r2fraction(v);if(T<0||T>1){s=!0;break}}s?p.fullLayout._infolayer.select(".annotation-"+p.id+'[data-index="'+e+'"]').remove():(u._pdata=L(p.glplot.cameraParams,[w.xaxis.r2l(u.x)*k[0],w.yaxis.r2l(u.y)*k[1],w.zaxis.r2l(u.z)*k[2]]),R(p.graphDiv,u,e,p.id,u._xa,u._ya))}}},{"../../plots/gl3d/project":344,"../annotations/draw":108}],115:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib");le.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:z("./attributes")}}},layoutAttributes:z("./attributes"),handleDefaults:z("./defaults"),includeBasePlot:N,convert:z("./convert"),draw:z("./draw")};function N(D,p){var w=R.subplotsRegistry.gl3d;if(!!w)for(var k=w.attrRegex,d=Object.keys(D),e=0;e<d.length;e++){var u=d[e];k.test(u)&&(D[u].annotations||[]).length&&(L.pushUnique(p._basePlotModules,w),L.pushUnique(p._subplots.gl3d,u))}}},{"../../lib":252,"../../registry":352,"./attributes":111,"./convert":112,"./defaults":113,"./draw":114}],116:[function(z,le,ae){"use strict";le.exports=z("world-calendars/dist/main"),z("world-calendars/dist/plus"),z("world-calendars/dist/calendars/chinese"),z("world-calendars/dist/calendars/coptic"),z("world-calendars/dist/calendars/discworld"),z("world-calendars/dist/calendars/ethiopian"),z("world-calendars/dist/calendars/hebrew"),z("world-calendars/dist/calendars/islamic"),z("world-calendars/dist/calendars/julian"),z("world-calendars/dist/calendars/mayan"),z("world-calendars/dist/calendars/nanakshahi"),z("world-calendars/dist/calendars/nepali"),z("world-calendars/dist/calendars/persian"),z("world-calendars/dist/calendars/taiwan"),z("world-calendars/dist/calendars/thai"),z("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":85,"world-calendars/dist/calendars/coptic":86,"world-calendars/dist/calendars/discworld":87,"world-calendars/dist/calendars/ethiopian":88,"world-calendars/dist/calendars/hebrew":89,"world-calendars/dist/calendars/islamic":90,"world-calendars/dist/calendars/julian":91,"world-calendars/dist/calendars/mayan":92,"world-calendars/dist/calendars/nanakshahi":93,"world-calendars/dist/calendars/nepali":94,"world-calendars/dist/calendars/persian":95,"world-calendars/dist/calendars/taiwan":96,"world-calendars/dist/calendars/thai":97,"world-calendars/dist/calendars/ummalqura":98,"world-calendars/dist/main":99,"world-calendars/dist/plus":100}],117:[function(z,le,ae){"use strict";var R=z("./calendars"),L=z("../../lib"),N=z("../../constants/numerical"),D=N.EPOCHJD,p=N.ONEDAY,w={valType:"enumerated",values:L.sortObjectKeys(R.calendars),editType:"calc",dflt:"gregorian"},k=function(c,m,o,t){var i={};return i[o]=w,L.coerce(c,m,i,o,t)},d=function(c,m,o,t){for(var i=0;i<o.length;i++)k(c,m,o[i]+"calendar",t.calendar)},e={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},u={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},l="##",b={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:l,w:l,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function v(c,m,o){for(var t=Math.floor((m+.05)/p)+D,i=T(o).fromJD(t),r=0,x,A,E,P,S;(r=c.indexOf("%",r))!==-1;)x=c.charAt(r+1),x==="0"||x==="-"||x==="_"?(E=3,A=c.charAt(r+2),x==="_"&&(x="-")):(A=x,x="0",E=2),P=b[A],P?(P===l?S=l:S=i.formatDate(P[x]),c=c.substr(0,r)+S+c.substr(r+E),r+=S.length):r+=E;return c}var y={};function T(c){var m=y[c];return m||(m=y[c]=R.instance(c),m)}function _(c){return L.extendFlat({},w,{description:c})}function f(c){return"Sets the calendar system to use with `"+c+"` date data."}var g={xcalendar:_(f("x"))},n=L.extendFlat({},g,{ycalendar:_(f("y"))}),a=L.extendFlat({},n,{zcalendar:_(f("z"))}),h=_(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));le.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:n,bar:n,box:n,heatmap:n,contour:n,histogram:n,histogram2d:n,histogram2dcontour:n,scatter3d:a,surface:a,mesh3d:a,scattergl:n,ohlc:g,candlestick:g},layout:{calendar:_(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:h},yaxis:{calendar:h},scene:{xaxis:{calendar:h},yaxis:{calendar:h},zaxis:{calendar:h}},polar:{radialaxis:{calendar:h}}},transforms:{filter:{valuecalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:w,handleDefaults:k,handleTraceDefaults:d,CANONICAL_SUNDAY:u,CANONICAL_TICK:e,DFLTRANGE:s,getCal:T,worldCalFmt:v}},{"../../constants/numerical":231,"../../lib":252,"./calendars":116}],118:[function(z,le,ae){"use strict";ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=100*(14-4)/(15-4)},{}],119:[function(z,le,ae){"use strict";var R=z("tinycolor2"),L=z("fast-isnumeric"),N=z("../../lib/array").isTypedArray,D=le.exports={},p=z("./attributes");D.defaults=p.defaults;var w=D.defaultLine=p.defaultLine;D.lightLine=p.lightLine;var k=D.background=p.background;D.tinyRGB=function(e){var u=e.toRgb();return"rgb("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+")"},D.rgb=function(e){return D.tinyRGB(R(e))},D.opacity=function(e){return e?R(e).getAlpha():0},D.addOpacity=function(e,u){var s=R(e).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+u+")"},D.combine=function(e,u){var s=R(e).toRgb();if(s.a===1)return R(e).toRgbString();var l=R(u||k).toRgb(),b=l.a===1?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a},v={r:b.r*(1-s.a)+s.r*s.a,g:b.g*(1-s.a)+s.g*s.a,b:b.b*(1-s.a)+s.b*s.a};return R(v).toRgbString()},D.contrast=function(e,u,s){var l=R(e);l.getAlpha()!==1&&(l=R(D.combine(e,k)));var b=l.isDark()?u?l.lighten(u):k:s?l.darken(s):w;return b.toString()},D.stroke=function(e,u){var s=R(u);e.style({stroke:D.tinyRGB(s),"stroke-opacity":s.getAlpha()})},D.fill=function(e,u){var s=R(u);e.style({fill:D.tinyRGB(s),"fill-opacity":s.getAlpha()})},D.clean=function(e){if(!(!e||typeof e!="object")){var u=Object.keys(e),s,l,b,v;for(s=0;s<u.length;s++)if(b=u[s],v=e[b],b.substr(b.length-5)==="color")if(Array.isArray(v))for(l=0;l<v.length;l++)v[l]=d(v[l]);else e[b]=d(v);else if(b.substr(b.length-10)==="colorscale"&&Array.isArray(v))for(l=0;l<v.length;l++)Array.isArray(v[l])&&(v[l][1]=d(v[l][1]));else if(Array.isArray(v)){var y=v[0];if(!Array.isArray(y)&&y&&typeof y=="object")for(l=0;l<v.length;l++)D.clean(v[l])}else v&&typeof v=="object"&&!N(v)&&D.clean(v)}};function d(e){if(L(e)||typeof e!="string")return e;var u=e.trim();if(u.substr(0,3)!=="rgb")return e;var s=u.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return e;var l=s[1].trim().split(/\s*[\s,]\s*/),b=u.charAt(3)==="a"&&l.length===4;if(!b&&l.length!==3)return e;for(var v=0;v<l.length;v++){if(!l[v].length||(l[v]=Number(l[v]),!(l[v]>=0)))return e;if(v===3)l[v]>1&&(l[v]=1);else if(l[v]>=1)return e}var y=Math.round(l[0]*255)+", "+Math.round(l[1]*255)+", "+Math.round(l[2]*255);return b?"rgba("+y+", "+l[3]+")":"rgb("+y+")"}},{"../../lib/array":237,"./attributes":118,"fast-isnumeric":31,tinycolor2:83}],120:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/layout_attributes"),L=z("../../plots/font_attributes"),N=z("../../lib/extend").extendFlat,D=z("../../plot_api/edit_types").overrideAll;le.exports=D({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:R.linecolor,outlinewidth:R.linewidth,bordercolor:R.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:R.tickmode,nticks:R.nticks,tick0:R.tick0,dtick:R.dtick,tickvals:R.tickvals,ticktext:R.ticktext,ticks:N({},R.ticks,{dflt:""}),ticklabeloverflow:N({},R.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:R.ticklen,tickwidth:R.tickwidth,tickcolor:R.tickcolor,ticklabelstep:R.ticklabelstep,showticklabels:R.showticklabels,tickfont:L({}),tickangle:R.tickangle,tickformat:R.tickformat,tickformatstops:R.tickformatstops,tickprefix:R.tickprefix,showtickprefix:R.showtickprefix,ticksuffix:R.ticksuffix,showticksuffix:R.showticksuffix,separatethousands:R.separatethousands,exponentformat:R.exponentformat,minexponent:R.minexponent,showexponent:R.showexponent,title:{text:{valType:"string"},font:L({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:L({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plots/cartesian/layout_attributes":316,"../../plots/font_attributes":332}],121:[function(z,le,ae){"use strict";le.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],122:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plot_api/plot_template"),N=z("../../plots/cartesian/tick_value_defaults"),D=z("../../plots/cartesian/tick_mark_defaults"),p=z("../../plots/cartesian/tick_label_defaults"),w=z("../../plots/cartesian/prefix_suffix_defaults"),k=z("./attributes");le.exports=function(e,u,s){var l=L.newContainer(u,"colorbar"),b=e.colorbar||{};function v(i,r){return R.coerce(b,l,k,i,r)}var y=s.margin||{t:0,b:0,l:0,r:0},T=s.width-y.l-y.r,_=s.height-y.t-y.b,f=v("orientation"),g=f==="v",n=v("thicknessmode");v("thickness",n==="fraction"?30/(g?T:_):30);var a=v("lenmode");v("len",a==="fraction"?1:g?_:T),v("x",g?1.02:.5),v("xanchor",g?"left":"center"),v("xpad"),v("y",g?.5:1.02),v("yanchor",g?"middle":"bottom"),v("ypad"),R.noneOrAll(b,l,["x","y"]),v("outlinecolor"),v("outlinewidth"),v("bordercolor"),v("borderwidth"),v("bgcolor");var h=R.coerce(b,l,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");v("ticklabeloverflow",h.indexOf("inside")!==-1?"hide past domain":"hide past div"),N(b,l,v,"linear");var c=s.font,m={outerTicks:!1,font:c};h.indexOf("inside")!==-1&&(m.bgColor="black"),w(b,l,v,"linear",m),p(b,l,v,"linear",m),D(b,l,v,"linear",m),v("title.text",s._dfltTitle.colorbar);var o=l.tickfont,t=R.extendFlat({},o,{color:c.color,size:R.bigFont(o.size)});R.coerceFont(v,"title.font",t),v("title.side",g?"top":"right")}},{"../../lib":252,"../../plot_api/plot_template":290,"../../plots/cartesian/prefix_suffix_defaults":320,"../../plots/cartesian/tick_label_defaults":325,"../../plots/cartesian/tick_mark_defaults":326,"../../plots/cartesian/tick_value_defaults":327,"./attributes":120}],123:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("tinycolor2"),N=z("../../plots/plots"),D=z("../../registry"),p=z("../../plots/cartesian/axes"),w=z("../dragelement"),k=z("../../lib"),d=k.strTranslate,e=z("../../lib/extend").extendFlat,u=z("../../lib/setcursor"),s=z("../drawing"),l=z("../color"),b=z("../titles"),v=z("../../lib/svg_text_utils"),y=z("../colorscale/helpers").flipScale,T=z("../../plots/cartesian/axis_defaults"),_=z("../../plots/cartesian/position_defaults"),f=z("../../plots/cartesian/layout_attributes"),g=z("../../constants/alignment"),n=g.LINE_SPACING,a=g.FROM_TL,h=g.FROM_BR,c=z("./constants").cn;function m(A){var E=A._fullLayout,P=E._infolayer.selectAll("g."+c.colorbar).data(o(A),function(S){return S._id});P.enter().append("g").attr("class",function(S){return S._id}).classed(c.colorbar,!0),P.each(function(S){var C=R.select(this);k.ensureSingle(C,"rect",c.cbbg),k.ensureSingle(C,"g",c.cbfills),k.ensureSingle(C,"g",c.cblines),k.ensureSingle(C,"g",c.cbaxis,function(I){I.classed(c.crisp,!0)}),k.ensureSingle(C,"g",c.cbtitleunshift,function(I){I.append("g").classed(c.cbtitle,!0)}),k.ensureSingle(C,"rect",c.cboutline);var M=t(C,S,A);M&&M.then&&(A._promises||[]).push(M),A._context.edits.colorbarPosition&&i(C,S,A)}),P.exit().each(function(S){N.autoMargin(A,S._id)}).remove(),P.order()}function o(A){var E=A._fullLayout,P=A.calcdata,S=[],C,M,I,G;function V(H){return e(H,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function q(){typeof G.calc=="function"?G.calc(A,I,C):(C._fillgradient=M.reversescale?y(M.colorscale):M.colorscale,C._zrange=[M[G.min],M[G.max]])}for(var ee=0;ee<P.length;ee++){var Q=P[ee];I=Q[0].trace;var U=I._module.colorbar;if(I.visible===!0&&U)for(var O=Array.isArray(U),Z=O?U:[U],B=0;B<Z.length;B++){G=Z[B];var Y=G.container;M=Y?I[Y]:I,M&&M.showscale&&(C=V(M.colorbar),C._id="cb"+I.uid+(O&&Y?"-"+Y:""),C._traceIndex=I.index,C._propPrefix=(Y?Y+".":"")+"colorbar.",C._meta=I._meta,q(),S.push(C))}}for(var j in E._colorAxes)if(M=E[j],M.showscale){var X=E._colorAxes[j];C=V(M.colorbar),C._id="cb"+j,C._propPrefix=j+".colorbar.",C._meta=E._meta,G={min:"cmin",max:"cmax"},X[0]!=="heatmap"&&(I=X[1],G.calc=I._module.colorbar.calc),q(),S.push(C)}return S}function t(A,E,P){var S=E.orientation==="v",C=E.len,M=E.lenmode,I=E.thickness,G=E.thicknessmode,V=E.outlinewidth,q=E.borderwidth,ee=E.bgcolor,Q=E.xanchor,U=E.yanchor,O=E.xpad,Z=E.ypad,B=E.x,Y=S?E.y:1-E.y,j=P._fullLayout,X=j._size,H=E._fillcolor,K=E._line,W=E.title,$=W.side,re=E._zrange||R.extent((typeof H=="function"?H:K.color).domain()),de=typeof K.color=="function"?K.color:function(){return K.color},ve=typeof H=="function"?H:function(){return H},ue=E._levels,ce=r(P,E,re),_e=ce.fill,fe=ce.line,ne=Math.round(I*(G==="fraction"?S?X.w:X.h:1)),ie=ne/(S?X.w:X.h),me=Math.round(C*(M==="fraction"?S?X.h:X.w:1)),we=me/(S?X.h:X.w),be=Math.round(S?B*X.w+O:Y*X.h+Z),Me={center:.5,right:1}[Q]||0,Ie={top:1,middle:.5}[U]||0,Ke=S?B-Me*ie:Y-Ie*ie,Oe=S?Y-Ie*we:B-Me*we,We=Math.round(S?X.h*(1-Oe):X.w*Oe);E._lenFrac=we,E._thickFrac=ie,E._uFrac=Ke,E._vFrac=Oe;var Fe=E._axis=x(P,E,re);Fe.position=ie+(S?B+O/X.w:Y+Z/X.h);var Ge=["top","bottom"].indexOf($)!==-1;if(S&&Ge&&(Fe.title.side=$,Fe.titlex=B+O/X.w,Fe.titley=Oe+(W.side==="top"?we-Z/X.h:Z/X.h)),!S&&!Ge&&(Fe.title.side=$,Fe.titley=Y+Z/X.h,Fe.titlex=Oe+O/X.w),K.color&&E.tickmode==="auto"){Fe.tickmode="linear",Fe.tick0=ue.start;var Xe=ue.size,ut=k.constrain(me/50,4,15)+1,rt=(re[1]-re[0])/((E.nticks||ut)*Xe);if(rt>1){var dt=Math.pow(10,Math.floor(Math.log(rt)/Math.LN10));Xe*=dt*k.roundUp(rt/dt,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(Fe.tick0=0)}Fe.dtick=Xe}Fe.domain=S?[Oe+Z/X.h,Oe+we-Z/X.h]:[Oe+O/X.w,Oe+we-O/X.w],Fe.setScale(),A.attr("transform",d(Math.round(X.l),Math.round(X.t)));var st=A.select("."+c.cbtitleunshift).attr("transform",d(-Math.round(X.l),-Math.round(X.t))),Ve=Fe.ticklabelposition,Je=Fe.title.font.size,ke=A.select("."+c.cbaxis),Le,Be=0,pe=0;function Ae(qe,at){var nt={propContainer:Fe,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:j._dfltTitle.colorbar,containerGroup:A.select("."+c.cbtitle)},Ze=qe.charAt(0)==="h"?qe.substr(1):"h"+qe;A.selectAll("."+Ze+",."+Ze+"-math-group").remove(),b.draw(P,qe,e(nt,at||{}))}function Ce(){if(S&&Ge||!S&&!Ge){var qe,at;$==="top"&&(qe=O+X.l+X.w*B,at=Z+X.t+X.h*(1-Oe-we)+3+Je*.75),$==="bottom"&&(qe=O+X.l+X.w*B,at=Z+X.t+X.h*(1-Oe)-3-Je*.25),$==="right"&&(at=Z+X.t+X.h*Y+3+Je*.75,qe=O+X.l+X.w*Oe),Ae(Fe._id+"title",{attributes:{x:qe,y:at,"text-anchor":S?"start":"middle"}})}}function Se(){if(S&&!Ge||!S&&Ge){var qe=Fe.position||0,at=Fe._offset+Fe._length/2,nt,Ze;if($==="right")Ze=at,nt=X.l+X.w*qe+10+Je*(Fe.showticklabels?1:.5);else if(nt=at,$==="bottom"&&(Ze=X.t+X.h*qe+10+(Ve.indexOf("inside")===-1?Fe.tickfont.size:0)+(Fe.ticks!=="intside"&&E.ticklen||0)),$==="top"){var ht=W.text.split("<br>").length;Ze=X.t+X.h*qe+10-ne-n*Je*ht}Ae((S?"h":"v")+Fe._id+"title",{avoid:{selection:R.select(P).selectAll("g."+Fe._id+"tick"),side:$,offsetTop:S?0:X.t,offsetLeft:S?X.l:0,maxShift:S?j.width:j.height},attributes:{x:nt,y:Ze,"text-anchor":"middle"},transform:{rotate:S?-90:0,offset:0}})}}function He(){if(!S&&!Ge||S&&Ge){var qe=A.select("."+c.cbtitle),at=qe.select("text"),nt=[-V/2,V/2],Ze=qe.select(".h"+Fe._id+"title-math-group").node(),ht=15.6;at.node()&&(ht=parseInt(at.node().style.fontSize,10)*n);var kt;if(Ze?(kt=s.bBox(Ze),pe=kt.width,Be=kt.height,Be>ht&&(nt[1]-=(Be-ht)/2)):at.node()&&!at.classed(c.jsPlaceholder)&&(kt=s.bBox(at.node()),pe=kt.width,Be=kt.height),S){if(Be){if(Be+=5,$==="top")Fe.domain[1]-=Be/X.h,nt[1]*=-1;else{Fe.domain[0]+=Be/X.h;var xt=v.lineCount(at);nt[1]+=(1-xt)*ht}qe.attr("transform",d(nt[0],nt[1])),Fe.setScale()}}else pe&&($==="right"&&(Fe.domain[0]+=(pe+Je/2)/X.w),qe.attr("transform",d(nt[0],nt[1])),Fe.setScale())}A.selectAll("."+c.cbfills+",."+c.cblines).attr("transform",S?d(0,Math.round(X.h*(1-Fe.domain[1]))):d(Math.round(X.w*Fe.domain[0]),0)),ke.attr("transform",S?d(0,Math.round(-X.t)):d(Math.round(-X.l),0));var Bt=A.select("."+c.cbfills).selectAll("rect."+c.cbfill).attr("style","").data(_e);Bt.enter().append("rect").classed(c.cbfill,!0).style("stroke","none"),Bt.exit().remove();var Zt=re.map(Fe.c2p).map(Math.round).sort(function(vt,Yt){return vt-Yt});Bt.each(function(vt,Yt){var Ft=[Yt===0?re[0]:(_e[Yt]+_e[Yt-1])/2,Yt===_e.length-1?re[1]:(_e[Yt]+_e[Yt+1])/2].map(Fe.c2p).map(Math.round);S&&(Ft[1]=k.constrain(Ft[1]+(Ft[1]>Ft[0])?1:-1,Zt[0],Zt[1]));var ye=R.select(this).attr(S?"x":"y",be).attr(S?"y":"x",R.min(Ft)).attr(S?"width":"height",Math.max(ne,2)).attr(S?"height":"width",Math.max(R.max(Ft)-R.min(Ft),2));if(E._fillgradient)s.gradient(ye,P,E._id,S?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var ge=ve(vt).replace("e-","");ye.attr("fill",L(ge).toHexString())}});var Gt=A.select("."+c.cblines).selectAll("path."+c.cbline).data(K.color&&K.width?fe:[]);Gt.enter().append("path").classed(c.cbline,!0),Gt.exit().remove(),Gt.each(function(vt){var Yt=be,Ft=Math.round(Fe.c2p(vt))+K.width/2%1;R.select(this).attr("d","M"+(S?Yt+","+Ft:Ft+","+Yt)+(S?"h":"v")+ne).call(s.lineGroupStyle,K.width,de(vt),K.dash)}),ke.selectAll("g."+Fe._id+"tick,path").remove();var Rt=be+ne+(V||0)/2-(E.ticks==="outside"?1:0),Wt=p.calcTicks(Fe),It=p.getTickSigns(Fe)[2];return p.drawTicks(P,Fe,{vals:Fe.ticks==="inside"?p.clipEnds(Fe,Wt):Wt,layer:ke,path:p.makeTickPath(Fe,Rt,It),transFn:p.makeTransTickFn(Fe)}),p.drawLabels(P,Fe,{vals:Wt,layer:ke,transFn:p.makeTransTickLabelFn(Fe),labelFns:p.makeLabelFns(Fe,Rt)})}function Ne(){var qe,at=ne+V/2;Ve.indexOf("inside")===-1&&(qe=s.bBox(ke.node()),at+=S?qe.width:qe.height),Le=st.select("text");var nt=0,Ze=S&&$==="top",ht=!S&&$==="right",kt=0;if(Le.node()&&!Le.classed(c.jsPlaceholder)){var xt,Bt=st.select(".h"+Fe._id+"title-math-group").node();Bt&&(S&&Ge||!S&&!Ge)?(qe=s.bBox(Bt),nt=qe.width,xt=qe.height):(qe=s.bBox(st.node()),nt=qe.right-X.l-(S?be:We),xt=qe.bottom-X.t-(S?We:be),!S&&$==="top"&&(at+=qe.height,kt=qe.height)),ht&&(Le.attr("transform",d(nt/2+Je/2,0)),nt*=2),at=Math.max(at,S?nt:xt)}var Zt=(S?O:Z)*2+at+q+V/2,Gt=0;!S&&W.text&&U==="bottom"&&Y<=0&&(Gt=Zt/2,Zt+=Gt,kt+=Gt),j._hColorbarMoveTitle=Gt,j._hColorbarMoveCBTitle=kt;var Rt=q+V;A.select("."+c.cbbg).attr("x",(S?be:We)-Rt/2-(S?O:0)).attr("y",(S?We:be)-(S?me:Z+kt-Gt)).attr(S?"width":"height",Math.max(Zt-Gt,2)).attr(S?"height":"width",Math.max(me+Rt,2)).call(l.fill,ee).call(l.stroke,E.bordercolor).style("stroke-width",q);var Wt=ht?Math.max(nt-10,0):0;if(A.selectAll("."+c.cboutline).attr("x",(S?be:We+O)+Wt).attr("y",(S?We+Z-me:be)+(Ze?Be:0)).attr(S?"width":"height",Math.max(ne,2)).attr(S?"height":"width",Math.max(me-(S?2*Z+Be:2*O+Wt),2)).call(l.stroke,E.outlinecolor).style({fill:"none","stroke-width":V}),A.attr("transform",d(X.l-(S?Me*Zt:0),X.t-(S?0:(1-Ie)*Zt-kt))),!S&&(q||L(ee).getAlpha()&&!L.equals(j.paper_bgcolor,ee))){var It=ke.selectAll("text"),vt=It[0].length,Yt=A.select("."+c.cbbg).node(),Ft=s.bBox(Yt),ye=s.getTranslate(A),ge=2;It.each(function(ot,_t){var Mt=0,St=vt-1;if(_t===Mt||_t===St){var Dt=s.bBox(this),Ot=s.getTranslate(this),Ht;if(_t===St){var er=Dt.right+Ot.x,wt=Ft.right+ye.x+We-q-ge+B;Ht=wt-er,Ht>0&&(Ht=0)}else if(_t===Mt){var Et=Dt.left+Ot.x,zt=Ft.left+ye.x+We+q+ge;Ht=zt-Et,Ht<0&&(Ht=0)}Ht&&(vt<3?this.setAttribute("transform","translate("+Ht+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Re={},ze=a[Q],Ue=h[Q],je=a[U],Ye=h[U],et=Zt-ne;S?(M==="pixels"?(Re.y=Y,Re.t=me*je,Re.b=me*Ye):(Re.t=Re.b=0,Re.yt=Y+C*je,Re.yb=Y-C*Ye),G==="pixels"?(Re.x=B,Re.l=Zt*ze,Re.r=Zt*Ue):(Re.l=et*ze,Re.r=et*Ue,Re.xl=B-I*ze,Re.xr=B+I*Ue)):(M==="pixels"?(Re.x=B,Re.l=me*ze,Re.r=me*Ue):(Re.l=Re.r=0,Re.xl=B+C*ze,Re.xr=B-C*Ue),G==="pixels"?(Re.y=1-Y,Re.t=Zt*je,Re.b=Zt*Ye):(Re.t=et*je,Re.b=et*Ye,Re.yt=Y-I*je,Re.yb=Y+I*Ye)),N.autoMargin(P,E._id,Re)}return k.syncOrAsync([N.previousPromises,Ce,He,Se,N.previousPromises,Ne],P)}function i(A,E,P){var S=E.orientation==="v",C=P._fullLayout,M=C._size,I,G,V;w.init({element:A.node(),gd:P,prepFn:function(){I=A.attr("transform"),u(A)},moveFn:function(q,ee){A.attr("transform",I+d(q,ee)),G=w.align((S?E._uFrac:E._vFrac)+q/M.w,S?E._thickFrac:E._lenFrac,0,1,E.xanchor),V=w.align((S?E._vFrac:1-E._uFrac)-ee/M.h,S?E._lenFrac:E._thickFrac,0,1,E.yanchor);var Q=w.getCursor(G,V,E.xanchor,E.yanchor);u(A,Q)},doneFn:function(){if(u(A),G!==void 0&&V!==void 0){var q={};q[E._propPrefix+"x"]=G,q[E._propPrefix+"y"]=V,E._traceIndex!==void 0?D.call("_guiRestyle",P,q,E._traceIndex):D.call("_guiRelayout",P,q)}}})}function r(A,E,P){var S=E._levels,C=[],M=[],I,G,V=S.end+S.size/100,q=S.size,ee=1.001*P[0]-.001*P[1],Q=1.001*P[1]-.001*P[0];for(G=0;G<1e5&&(I=S.start+G*q,!(q>0?I>=V:I<=V));G++)I>ee&&I<Q&&C.push(I);if(E._fillgradient)M=[0];else if(typeof E._fillcolor=="function"){var U=E._filllevels;if(U)for(V=U.end+U.size/100,q=U.size,G=0;G<1e5&&(I=U.start+G*q,!(q>0?I>=V:I<=V));G++)I>P[0]&&I<P[1]&&M.push(I);else M=C.map(function(O){return O-S.size/2}),M.push(M[M.length-1]+S.size)}else E._fillcolor&&typeof E._fillcolor=="string"&&(M=[0]);return S.size<0&&(C.reverse(),M.reverse()),{line:C,fill:M}}function x(A,E,P){var S=A._fullLayout,C=E.orientation==="v",M={type:"linear",range:P,tickmode:E.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,showticklabels:E.showticklabels,ticklabelposition:E.ticklabelposition,ticklabeloverflow:E.ticklabeloverflow,ticklabelstep:E.ticklabelstep,tickfont:E.tickfont,tickangle:E.tickangle,tickformat:E.tickformat,exponentformat:E.exponentformat,minexponent:E.minexponent,separatethousands:E.separatethousands,showexponent:E.showexponent,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,title:E.title,showline:!0,anchor:"free",side:C?"right":"bottom",position:1},I=C?"y":"x",G={type:"linear",_id:I+E._id},V={letter:I,font:S.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:S.calendar};function q(ee,Q){return k.coerce(M,G,f,ee,Q)}return T(M,G,q,V,S),_(M,G,q,V),G}le.exports={draw:m}},{"../../constants/alignment":224,"../../lib":252,"../../lib/extend":245,"../../lib/setcursor":272,"../../lib/svg_text_utils":277,"../../plots/cartesian/axes":301,"../../plots/cartesian/axis_defaults":303,"../../plots/cartesian/layout_attributes":316,"../../plots/cartesian/position_defaults":319,"../../plots/plots":349,"../../registry":352,"../color":119,"../colorscale/helpers":130,"../dragelement":138,"../drawing":141,"../titles":217,"./constants":121,"@plotly/d3":16,tinycolor2:83}],124:[function(z,le,ae){"use strict";var R=z("../../lib");le.exports=function(N){return R.isPlainObject(N.colorbar)}},{"../../lib":252}],125:[function(z,le,ae){"use strict";le.exports={moduleType:"component",name:"colorbar",attributes:z("./attributes"),supplyDefaults:z("./defaults"),draw:z("./draw").draw,hasColorbar:z("./has_colorbar")}},{"./attributes":120,"./defaults":122,"./draw":123,"./has_colorbar":124}],126:[function(z,le,ae){"use strict";var R=z("../colorbar/attributes"),L=z("../../lib/regex").counter,N=z("../../lib/sort_object_keys"),D=z("./scales.js").scales,p=N(D);function w(k){return"`"+k+"`"}le.exports=function(d,e){d=d||"",e=e||{};var u=e.cLetter||"c",s="onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(d),l="noScale"in e?e.noScale:d==="marker.line",b="showScaleDflt"in e?e.showScaleDflt:u==="z",v=typeof e.colorscaleDflt=="string"?D[e.colorscaleDflt]:null,y=e.editTypeOverride||"",T=d?d+".":"",_,f;"colorAttr"in e?(_=e.colorAttr,f=e.colorAttr):(_={z:"z",c:"color"}[u],f="in "+w(T+_));var g=s?" Has an effect only if "+f+"is set to a numerical array.":"",n=u+"auto",a=u+"min",h=u+"max",c=u+"mid",m=w(T+n),o=w(T+a),t=w(T+h),i=o+" and "+t,r={};r[a]=r[h]=void 0;var x={};x[n]=!1;var A={};return _==="color"&&(A.color={valType:"color",arrayOk:!0,editType:y||"style"},e.anim&&(A.color.anim=!0)),A[n]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:r},A[a]={valType:"number",dflt:null,editType:y||"plot",impliedEdits:x},A[h]={valType:"number",dflt:null,editType:y||"plot",impliedEdits:x},A[c]={valType:"number",dflt:null,editType:"calc",impliedEdits:r},A.colorscale={valType:"colorscale",editType:"calc",dflt:v,impliedEdits:{autocolorscale:!1}},A.autocolorscale={valType:"boolean",dflt:e.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},A.reversescale={valType:"boolean",dflt:!1,editType:"plot"},l||(A.showscale={valType:"boolean",dflt:b,editType:"calc"},A.colorbar=R),e.noColorAxis||(A.coloraxis={valType:"subplotid",regex:L("coloraxis"),dflt:null,editType:"calc"}),A}},{"../../lib/regex":268,"../../lib/sort_object_keys":274,"../colorbar/attributes":120,"./scales.js":134}],127:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=z("./helpers").extractOpts;le.exports=function(p,w,k){var d=p._fullLayout,e=k.vals,u=k.containerStr,s=u?L.nestedProperty(w,u).get():w,l=N(s),b=l.auto!==!1,v=l.min,y=l.max,T=l.mid,_=function(){return L.aggNums(Math.min,null,e)},f=function(){return L.aggNums(Math.max,null,e)};if(v===void 0?v=_():b&&(s._colorAx&&R(v)?v=Math.min(v,_()):v=_()),y===void 0?y=f():b&&(s._colorAx&&R(y)?y=Math.max(y,f()):y=f()),b&&T!==void 0&&(y-T>T-v?v=T-(y-T):y-T<T-v&&(y=T+(T-v))),v===y&&(v-=.5,y+=.5),l._sync("min",v),l._sync("max",y),l.autocolorscale){var g;v*y<0?g=d.colorscale.diverging:v>=0?g=d.colorscale.sequential:g=d.colorscale.sequentialminus,l._sync("colorscale",g)}}},{"../../lib":252,"./helpers":130,"fast-isnumeric":31}],128:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./helpers").hasColorscale,N=z("./helpers").extractOpts;le.exports=function(p,w){function k(v,y){var T=v["_"+y];T!==void 0&&(v[y]=T)}function d(v,y){var T=y.container?R.nestedProperty(v,y.container).get():v;if(T)if(T.coloraxis)T._colorAx=w[T.coloraxis];else{var _=N(T),f=_.auto;(f||_.min===void 0)&&k(T,y.min),(f||_.max===void 0)&&k(T,y.max),_.autocolorscale&&k(T,"colorscale")}}for(var e=0;e<p.length;e++){var u=p[e],s=u._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)d(u,s[l]);else d(u,s);L(u,"marker.line")&&d(u,{container:"marker.line",min:"cmin",max:"cmax"})}for(var b in w._colorAxes)d(w[b],{min:"cmin",max:"cmax"})}},{"../../lib":252,"./helpers":130}],129:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=z("../colorbar/has_colorbar"),D=z("../colorbar/defaults"),p=z("./scales").isValid,w=z("../../registry").traceIs;function k(d,e){var u=e.slice(0,e.length-1);return e?L.nestedProperty(d,u).get()||{}:d}le.exports=function d(e,u,s,l,b){var v=b.prefix,y=b.cLetter,T="_module"in u,_=k(e,v),f=k(u,v),g=k(u._template||{},v)||{},n=function(){return delete e.coloraxis,delete u.coloraxis,d(e,u,s,l,b)};if(T){var a=s._colorAxes||{},h=l(v+"coloraxis");if(h){var c=w(u,"contour")&&L.nestedProperty(u,"contours.coloring").get()||"heatmap",m=a[h];m?(m[2].push(n),m[0]!==c&&(m[0]=!1,L.warn(["Ignoring coloraxis:",h,"setting","as it is linked to incompatible colorscales."].join(" ")))):a[h]=[c,u,[n]];return}}var o=_[y+"min"],t=_[y+"max"],i=R(o)&&R(t)&&o<t,r=l(v+y+"auto",!i);r?l(v+y+"mid"):(l(v+y+"min"),l(v+y+"max"));var x=_.colorscale,A=g.colorscale,E;if(x!==void 0&&(E=!p(x)),A!==void 0&&(E=!p(A)),l(v+"autocolorscale",E),l(v+"colorscale"),l(v+"reversescale"),v!=="marker.line."){var P;v&&T&&(P=N(_));var S=l(v+"showscale",P);S&&(v&&g&&(f._template=g),D(_,f,s))}}},{"../../lib":252,"../../registry":352,"../colorbar/defaults":122,"../colorbar/has_colorbar":124,"./scales":134,"fast-isnumeric":31}],130:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("tinycolor2"),N=z("fast-isnumeric"),D=z("../../lib"),p=z("../color"),w=z("./scales").isValid;function k(T,_,f){var g=_?D.nestedProperty(T,_).get()||{}:T,n=g[f||"color"],a=!1;if(D.isArrayOrTypedArray(n)){for(var h=0;h<n.length;h++)if(N(n[h])){a=!0;break}}return D.isPlainObject(g)&&(a||g.showscale===!0||N(g.cmin)&&N(g.cmax)||w(g.colorscale)||D.isPlainObject(g.colorbar))}var d=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function u(T){var _=T._colorAx,f=_||T,g={},n,a,h;for(a=0;a<d.length;a++)h=d[a],g[h]=f[h];if(_)for(n="c",a=0;a<e.length;a++)h=e[a],g[h]=f["c"+h];else{var c;for(a=0;a<e.length;a++){if(h=e[a],c="c"+h,c in f){g[h]=f[c];continue}c="z"+h,c in f&&(g[h]=f[c])}n=c.charAt(0)}return g._sync=function(m,o){var t=e.indexOf(m)!==-1?n+m:m;f[t]=f["_"+t]=o},g}function s(T){for(var _=u(T),f=_.min,g=_.max,n=_.reversescale?l(_.colorscale):_.colorscale,a=n.length,h=new Array(a),c=new Array(a),m=0;m<a;m++){var o=n[m];h[m]=f+o[0]*(g-f),c[m]=o[1]}return{domain:h,range:c}}function l(T){for(var _=T.length,f=new Array(_),g=_-1,n=0;g>=0;g--,n++){var a=T[g];f[n]=[1-a[0],a[1]]}return f}function b(T,_){_=_||{};for(var f=T.domain,g=T.range,n=g.length,a=new Array(n),h=0;h<n;h++){var c=L(g[h]).toRgb();a[h]=[c.r,c.g,c.b,c.a]}var m=R.scale.linear().domain(f).range(a).clamp(!0),o=_.noNumericCheck,t=_.returnArray,i;return o&&t?i=m:o?i=function(r){return y(m(r))}:t?i=function(r){return N(r)?m(r):L(r).isValid()?r:p.defaultLine}:i=function(r){return N(r)?y(m(r)):L(r).isValid()?r:p.defaultLine},i.domain=m.domain,i.range=function(){return g},i}function v(T,_){return b(s(T),_)}function y(T){var _={r:T[0],g:T[1],b:T[2],a:T[3]};return L(_).toRgbString()}le.exports={hasColorscale:k,extractOpts:u,extractScale:s,flipScale:l,makeColorScaleFunc:b,makeColorScaleFuncFromTrace:v}},{"../../lib":252,"../color":119,"./scales":134,"@plotly/d3":16,"fast-isnumeric":31,tinycolor2:83}],131:[function(z,le,ae){"use strict";var R=z("./scales"),L=z("./helpers");le.exports={moduleType:"component",name:"colorscale",attributes:z("./attributes"),layoutAttributes:z("./layout_attributes"),supplyLayoutDefaults:z("./layout_defaults"),handleDefaults:z("./defaults"),crossTraceDefaults:z("./cross_trace_defaults"),calc:z("./calc"),scales:R.scales,defaultScale:R.defaultScale,getScale:R.get,isValidScale:R.isValid,hasColorscale:L.hasColorscale,extractOpts:L.extractOpts,extractScale:L.extractScale,flipScale:L.flipScale,makeColorScaleFunc:L.makeColorScaleFunc,makeColorScaleFuncFromTrace:L.makeColorScaleFuncFromTrace}},{"./attributes":126,"./calc":127,"./cross_trace_defaults":128,"./defaults":129,"./helpers":130,"./layout_attributes":132,"./layout_defaults":133,"./scales":134}],132:[function(z,le,ae){"use strict";var R=z("../../lib/extend").extendFlat,L=z("./attributes"),N=z("./scales").scales,D="Note that `autocolorscale` must be true for this attribute to work.";le.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:N.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:N.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:N.RdBu,editType:"calc"}},coloraxis:R({_isSubplotObj:!0,editType:"calc"},L("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":245,"./attributes":126,"./scales":134}],133:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plot_api/plot_template"),N=z("./layout_attributes"),D=z("./defaults");le.exports=function(w,k){function d(T,_){return R.coerce(w,k,N,T,_)}d("colorscale.sequential"),d("colorscale.sequentialminus"),d("colorscale.diverging");var e=k._colorAxes,u,s;function l(T,_){return R.coerce(u,s,N.coloraxis,T,_)}for(var b in e){var v=e[b];if(v[0])u=w[b]||{},s=L.newContainer(k,b,"coloraxis"),s._name=b,D(u,s,k,l,{prefix:"",cLetter:"c"});else{for(var y=0;y<v[2].length;y++)v[2][y]();delete k._colorAxes[b]}}}},{"../../lib":252,"../../plot_api/plot_template":290,"./defaults":129,"./layout_attributes":132}],134:[function(z,le,ae){"use strict";var R=z("tinycolor2"),L={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},N=L.RdBu;function D(k,d){if(d||(d=N),!k)return d;function e(){try{k=L[k]||JSON.parse(k)}catch{k=d}}return typeof k=="string"&&(e(),typeof k=="string"&&e()),p(k)?k:d}function p(k){var d=0;if(!Array.isArray(k)||k.length<2||!k[0]||!k[k.length-1]||+k[0][0]!=0||+k[k.length-1][0]!=1)return!1;for(var e=0;e<k.length;e++){var u=k[e];if(u.length!==2||+u[0]<d||!R(u[1]).isValid())return!1;d=+u[0]}return!0}function w(k){return L[k]!==void 0?!0:p(k)}le.exports={scales:L,defaultScale:N,get:D,isValid:w}},{tinycolor2:83}],135:[function(z,le,ae){"use strict";le.exports=function(L,N,D,p,w){var k=(L-D)/(p-D),d=k+N/(p-D),e=(k+d)/2;return w==="left"||w==="bottom"?k:w==="center"||w==="middle"?e:w==="right"||w==="top"?d:k<2/3-e?k:d>4/3-e?d:e}},{}],136:[function(z,le,ae){"use strict";var R=z("../../lib"),L=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];le.exports=function(D,p,w,k){return w==="left"?D=0:w==="center"?D=1:w==="right"?D=2:D=R.constrain(Math.floor(D*3),0,2),k==="bottom"?p=0:k==="middle"?p=1:k==="top"?p=2:p=R.constrain(Math.floor(p*3),0,2),L[p][D]}},{"../../lib":252}],137:[function(z,le,ae){"use strict";ae.selectMode=function(R){return R==="lasso"||R==="select"},ae.drawMode=function(R){return R==="drawclosedpath"||R==="drawopenpath"||R==="drawline"||R==="drawrect"||R==="drawcircle"},ae.openMode=function(R){return R==="drawline"||R==="drawopenpath"},ae.rectMode=function(R){return R==="select"||R==="drawline"||R==="drawrect"||R==="drawcircle"},ae.freeMode=function(R){return R==="lasso"||R==="drawclosedpath"||R==="drawopenpath"},ae.selectingOrDrawing=function(R){return ae.freeMode(R)||ae.rectMode(R)}},{}],138:[function(z,le,ae){"use strict";var R=z("mouse-event-offset"),L=z("has-hover"),N=z("has-passive-events"),D=z("../../lib").removeElement,p=z("../../plots/cartesian/constants"),w=le.exports={};w.align=z("./align"),w.getCursor=z("./cursor");var k=z("./unhover");w.unhover=k.wrapped,w.unhoverRaw=k.raw,w.init=function(s){var l=s.gd,b=1,v=l._context.doubleClickDelay,y=s.element,T,_,f,g,n,a,h,c;l._mouseDownTime||(l._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=t,N?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=t,y.addEventListener("touchstart",t,{passive:!1})):y.ontouchstart=t;function m(x,A,E){return Math.abs(x)<E&&(x=0),Math.abs(A)<E&&(A=0),[x,A]}var o=s.clampFn||m;function t(x){l._dragged=!1,l._dragging=!0;var A=e(x);T=A[0],_=A[1],h=x.target,a=x,c=x.buttons===2||x.ctrlKey,typeof x.clientX>"u"&&typeof x.clientY>"u"&&(x.clientX=T,x.clientY=_),f=new Date().getTime(),f-l._mouseDownTime<v?b+=1:(b=1,l._mouseDownTime=f),s.prepFn&&s.prepFn(x,T,_),L&&!c?(n=d(),n.style.cursor=window.getComputedStyle(y).cursor):L||(n=document,g=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",r),document.addEventListener("touchend",r),s.dragmode!==!1&&(x.preventDefault(),document.addEventListener("mousemove",i),document.addEventListener("touchmove",i,{passive:!1}))}function i(x){x.preventDefault();var A=e(x),E=s.minDrag||p.MINDRAG,P=o(A[0]-T,A[1]-_,E),S=P[0],C=P[1];(S||C)&&(l._dragged=!0,w.unhover(l,x)),l._dragged&&s.moveFn&&!c&&(l._dragdata={element:y,dx:S,dy:C},s.moveFn(S,C))}function r(x){if(delete l._dragdata,s.dragmode!==!1&&(x.preventDefault(),document.removeEventListener("mousemove",i),document.removeEventListener("touchmove",i)),document.removeEventListener("mouseup",r),document.removeEventListener("touchend",r),L?D(n):g&&(n.documentElement.style.cursor=g,g=null),!l._dragging){l._dragged=!1;return}if(l._dragging=!1,new Date().getTime()-l._mouseDownTime>v&&(b=Math.max(b-1,1)),l._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(b,a),!c){var A;try{A=new MouseEvent("click",x)}catch{var E=e(x);A=document.createEvent("MouseEvents"),A.initMouseEvent("click",x.bubbles,x.cancelable,x.view,x.detail,x.screenX,x.screenY,E[0],E[1],x.ctrlKey,x.altKey,x.shiftKey,x.metaKey,x.button,x.relatedTarget)}h.dispatchEvent(A)}l._dragging=!1,l._dragged=!1}};function d(){var u=document.createElement("div");u.className="dragcover";var s=u.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(u),u}w.coverSlip=d;function e(u){return R(u.changedTouches?u.changedTouches[0]:u,document.body)}},{"../../lib":252,"../../plots/cartesian/constants":308,"./align":135,"./cursor":136,"./unhover":139,"has-hover":63,"has-passive-events":64,"mouse-event-offset":69}],139:[function(z,le,ae){"use strict";var R=z("../../lib/events"),L=z("../../lib/throttle"),N=z("../../lib/dom").getGraphDiv,D=z("../fx/constants"),p=le.exports={};p.wrapped=function(w,k,d){w=N(w),w._fullLayout&&L.clear(w._fullLayout._uid+D.HOVERID),p.raw(w,k,d)},p.raw=function(k,d){var e=k._fullLayout,u=k._hoverdata;d||(d={}),!(d.target&&!k._dragged&&R.triggerHandler(k,"plotly_beforehover",d)===!1)&&(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),k._hoverdata=void 0,d.target&&u&&k.emit("plotly_unhover",{event:d,points:u}))}},{"../../lib/dom":243,"../../lib/events":244,"../../lib/throttle":278,"../fx/constants":153}],140:[function(z,le,ae){"use strict";ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],141:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../lib"),N=L.numberFormat,D=z("fast-isnumeric"),p=z("tinycolor2"),w=z("../../registry"),k=z("../color"),d=z("../colorscale"),e=L.strTranslate,u=z("../../lib/svg_text_utils"),s=z("../../constants/xmlns_namespaces"),l=z("../../constants/alignment"),b=l.LINE_SPACING,v=z("../../constants/interactions").DESELECTDIM,y=z("../../traces/scatter/subtypes"),T=z("../../traces/scatter/make_bubble_size_func"),_=z("../../components/fx/helpers").appendArrayPointValue,f=le.exports={};f.font=function(Q,U,O,Z){L.isPlainObject(U)&&(Z=U.color,O=U.size,U=U.family),U&&Q.style("font-family",U),O+1&&Q.style("font-size",O+"px"),Z&&Q.call(k.fill,Z)},f.setPosition=function(Q,U,O){Q.attr("x",U).attr("y",O)},f.setSize=function(Q,U,O){Q.attr("width",U).attr("height",O)},f.setRect=function(Q,U,O,Z,B){Q.call(f.setPosition,U,O).call(f.setSize,Z,B)},f.translatePoint=function(Q,U,O,Z){var B=O.c2p(Q.x),Y=Z.c2p(Q.y);if(D(B)&&D(Y)&&U.node())U.node().nodeName==="text"?U.attr("x",B).attr("y",Y):U.attr("transform",e(B,Y));else return!1;return!0},f.translatePoints=function(Q,U,O){Q.each(function(Z){var B=R.select(this);f.translatePoint(Z,B,U,O)})},f.hideOutsideRangePoint=function(Q,U,O,Z,B,Y){U.attr("display",O.isPtWithinRange(Q,B)&&Z.isPtWithinRange(Q,Y)?null:"none")},f.hideOutsideRangePoints=function(Q,U){if(!!U._hasClipOnAxisFalse){var O=U.xaxis,Z=U.yaxis;Q.each(function(B){var Y=B[0].trace,j=Y.xcalendar,X=Y.ycalendar,H=w.traceIs(Y,"bar-like")?".bartext":".point,.textpoint";Q.selectAll(H).each(function(K){f.hideOutsideRangePoint(K,R.select(this),O,Z,j,X)})})}},f.crispRound=function(Q,U,O){return!U||!D(U)?O||0:Q._context.staticPlot?U:U<1?1:Math.round(U)},f.singleLineStyle=function(Q,U,O,Z,B){U.style("fill","none");var Y=(((Q||[])[0]||{}).trace||{}).line||{},j=O||Y.width||0,X=B||Y.dash||"";k.stroke(U,Z||Y.color),f.dashLine(U,X,j)},f.lineGroupStyle=function(Q,U,O,Z){Q.style("fill","none").each(function(B){var Y=(((B||[])[0]||{}).trace||{}).line||{},j=U||Y.width||0,X=Z||Y.dash||"";R.select(this).call(k.stroke,O||Y.color).call(f.dashLine,X,j)})},f.dashLine=function(Q,U,O){O=+O||0,U=f.dashStyle(U,O),Q.style({"stroke-dasharray":U,"stroke-width":O+"px"})},f.dashStyle=function(Q,U){U=+U||1;var O=Math.max(U,3);return Q==="solid"?Q="":Q==="dot"?Q=O+"px,"+O+"px":Q==="dash"?Q=3*O+"px,"+3*O+"px":Q==="longdash"?Q=5*O+"px,"+5*O+"px":Q==="dashdot"?Q=3*O+"px,"+O+"px,"+O+"px,"+O+"px":Q==="longdashdot"&&(Q=5*O+"px,"+2*O+"px,"+O+"px,"+2*O+"px"),Q};function g(Q,U,O){var Z=U.fillpattern,B=Z&&f.getPatternAttr(Z.shape,0,"");if(B){var Y=f.getPatternAttr(Z.bgcolor,0,null),j=f.getPatternAttr(Z.fgcolor,0,null),X=Z.fgopacity,H=f.getPatternAttr(Z.size,0,8),K=f.getPatternAttr(Z.solidity,0,.3),W=U.uid;f.pattern(Q,"point",O,W,B,H,K,void 0,Z.fillmode,Y,j,X)}else U.fillcolor&&Q.call(k.fill,U.fillcolor)}f.singleFillStyle=function(Q,U){var O=R.select(Q.node()),Z=O.data(),B=((Z[0]||[])[0]||{}).trace||{};g(Q,B,U)},f.fillGroupStyle=function(Q,U){Q.style("stroke-width",0).each(function(O){var Z=R.select(this);O[0].trace&&g(Z,O[0].trace,U)})};var n=z("./symbol_defs");f.symbolNames=[],f.symbolFuncs=[],f.symbolNeedLines={},f.symbolNoDot={},f.symbolNoFill={},f.symbolList=[],Object.keys(n).forEach(function(Q){var U=n[Q],O=U.n;f.symbolList.push(O,String(O),Q,O+100,String(O+100),Q+"-open"),f.symbolNames[O]=Q,f.symbolFuncs[O]=U.f,U.needLine&&(f.symbolNeedLines[O]=!0),U.noDot?f.symbolNoDot[O]=!0:f.symbolList.push(O+200,String(O+200),Q+"-dot",O+300,String(O+300),Q+"-open-dot"),U.noFill&&(f.symbolNoFill[O]=!0)});var a=f.symbolNames.length,h="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";f.symbolNumber=function(Q){if(D(Q))Q=+Q;else if(typeof Q=="string"){var U=0;Q.indexOf("-open")>0&&(U=100,Q=Q.replace("-open","")),Q.indexOf("-dot")>0&&(U+=200,Q=Q.replace("-dot","")),Q=f.symbolNames.indexOf(Q),Q>=0&&(Q+=U)}return Q%100>=a||Q>=400?0:Math.floor(Math.max(Q,0))};function c(Q,U){var O=Q%100;return f.symbolFuncs[O](U)+(Q>=200?h:"")}var m={x1:1,x2:0,y1:0,y2:0},o={x1:0,x2:0,y1:1,y2:0},t=N("~f"),i={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:o},verticalreversed:{node:"linearGradient",attrs:o,reversed:!0}};f.gradient=function(Q,U,O,Z,B,Y){for(var j=B.length,X=i[Z],H=new Array(j),K=0;K<j;K++)X.reversed?H[j-1-K]=[t((1-B[K][0])*100),B[K][1]]:H[K]=[t(B[K][0]*100),B[K][1]];var W=U._fullLayout,$="g"+W._uid+"-"+O,re=W._defs.select(".gradients").selectAll("#"+$).data([Z+H.join(";")],L.identity);re.exit().remove(),re.enter().append(X.node).each(function(){var de=R.select(this);X.attrs&&de.attr(X.attrs),de.attr("id",$);var ve=de.selectAll("stop").data(H);ve.exit().remove(),ve.enter().append("stop"),ve.each(function(ue){var ce=p(ue[1]);R.select(this).attr({offset:ue[0]+"%","stop-color":k.tinyRGB(ce),"stop-opacity":ce.getAlpha()})})}),Q.style(Y,V($,U)).style(Y+"-opacity",null),Q.classed("gradient_filled",!0)},f.pattern=function(Q,U,O,Z,B,Y,j,X,H,K,W,$){var re=U==="legend";X&&(H==="overlay"?(K=X,W=k.contrast(K)):(K=void 0,W=X));var de=O._fullLayout,ve="p"+de._uid+"-"+Z,ue,ce,_e=function(Ie,Ke,Oe,We,Fe){return We+(Fe-We)*(Ie-Ke)/(Oe-Ke)},fe,ne,ie,me,we={};switch(B){case"/":ue=Y*Math.sqrt(2),ce=Y*Math.sqrt(2),fe="M-"+ue/4+","+ce/4+"l"+ue/2+",-"+ce/2+"M0,"+ce+"L"+ue+",0M"+ue/4*3+","+ce/4*5+"l"+ue/2+",-"+ce/2,ne=j*Y,me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case"\\":ue=Y*Math.sqrt(2),ce=Y*Math.sqrt(2),fe="M"+ue/4*3+",-"+ce/4+"l"+ue/2+","+ce/2+"M0,0L"+ue+","+ce+"M-"+ue/4+","+ce/4*3+"l"+ue/2+","+ce/2,ne=j*Y,me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case"x":ue=Y*Math.sqrt(2),ce=Y*Math.sqrt(2),fe="M-"+ue/4+","+ce/4+"l"+ue/2+",-"+ce/2+"M0,"+ce+"L"+ue+",0M"+ue/4*3+","+ce/4*5+"l"+ue/2+",-"+ce/2+"M"+ue/4*3+",-"+ce/4+"l"+ue/2+","+ce/2+"M0,0L"+ue+","+ce+"M-"+ue/4+","+ce/4*3+"l"+ue/2+","+ce/2,ne=Y-Y*Math.sqrt(1-j),me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case"|":ue=Y,ce=Y,me="path",fe="M"+ue/2+",0L"+ue/2+","+ce,ne=j*Y,me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case"-":ue=Y,ce=Y,me="path",fe="M0,"+ce/2+"L"+ue+","+ce/2,ne=j*Y,me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case"+":ue=Y,ce=Y,me="path",fe="M"+ue/2+",0L"+ue/2+","+ce+"M0,"+ce/2+"L"+ue+","+ce/2,ne=Y-Y*Math.sqrt(1-j),me="path",we={d:fe,opacity:$,stroke:W,"stroke-width":ne+"px"};break;case".":ue=Y,ce=Y,j<Math.PI/4?ie=Math.sqrt(j*Y*Y/Math.PI):ie=_e(j,Math.PI/4,1,Y/2,Y/Math.sqrt(2)),me="circle",we={cx:ue/2,cy:ce/2,r:ie,opacity:$,fill:W};break}var be=[B||"noSh",K||"noBg",W||"noFg",Y,j].join(";"),Me=de._defs.select(".patterns").selectAll("#"+ve).data([be],L.identity);Me.exit().remove(),Me.enter().append("pattern").each(function(){var Ie=R.select(this);if(Ie.attr({id:ve,width:ue+"px",height:ce+"px",patternUnits:"userSpaceOnUse",patternTransform:re?"scale(0.8)":""}),K){var Ke=Ie.selectAll("rect").data([0]);Ke.exit().remove(),Ke.enter().append("rect").attr({width:ue+"px",height:ce+"px",fill:K})}var Oe=Ie.selectAll(me).data([0]);Oe.exit().remove(),Oe.enter().append(me).attr(we)}),Q.style("fill",V(ve,O)).style("fill-opacity",null),Q.classed("pattern_filled",!0)},f.initGradients=function(Q){var U=Q._fullLayout,O=L.ensureSingle(U._defs,"g","gradients");O.selectAll("linearGradient,radialGradient").remove(),R.select(Q).selectAll(".gradient_filled").classed("gradient_filled",!1)},f.initPatterns=function(Q){var U=Q._fullLayout,O=L.ensureSingle(U._defs,"g","patterns");O.selectAll("pattern").remove(),R.select(Q).selectAll(".pattern_filled").classed("pattern_filled",!1)},f.getPatternAttr=function(Q,U,O){return Q&&L.isArrayOrTypedArray(Q)?U<Q.length?Q[U]:O:Q},f.pointStyle=function(Q,U,O){if(!!Q.size()){var Z=f.makePointStyleFns(U);Q.each(function(B){f.singlePointStyle(B,R.select(this),U,Z,O)})}},f.singlePointStyle=function(Q,U,O,Z,B){var Y=O.marker,j=Y.line;if(U.style("opacity",Z.selectedOpacityFn?Z.selectedOpacityFn(Q):Q.mo===void 0?Y.opacity:Q.mo),Z.ms2mrc){var X;Q.ms==="various"||Y.size==="various"?X=3:X=Z.ms2mrc(Q.ms),Q.mrc=X,Z.selectedSizeFn&&(X=Q.mrc=Z.selectedSizeFn(Q));var H=f.symbolNumber(Q.mx||Y.symbol)||0;Q.om=H%200>=100,U.attr("d",c(H,X))}var K=!1,W,$,re;if(Q.so)re=j.outlierwidth,$=j.outliercolor,W=Y.outliercolor;else{var de=(j||{}).width;re=(Q.mlw+1||de+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Q?$=Q.mlcc=Z.lineScale(Q.mlc):L.isArrayOrTypedArray(j.color)?$=k.defaultLine:$=j.color,L.isArrayOrTypedArray(Y.color)&&(W=k.defaultLine,K=!0),"mc"in Q?W=Q.mcc=Z.markerScale(Q.mc):W=Y.color||"rgba(0,0,0,0)",Z.selectedColorFn&&(W=Z.selectedColorFn(Q))}if(Q.om)U.call(k.stroke,W).style({"stroke-width":(re||1)+"px",fill:"none"});else{U.style("stroke-width",(Q.isBlank?0:re)+"px");var ve=Y.gradient,ue=Q.mgt;ue?K=!0:ue=ve&&ve.type,L.isArrayOrTypedArray(ue)&&(ue=ue[0],i[ue]||(ue=0));var ce=Y.pattern,_e=ce&&f.getPatternAttr(ce.shape,Q.i,"");if(ue&&ue!=="none"){var fe=Q.mgc;fe?K=!0:fe=ve.color;var ne=O.uid;K&&(ne+="-"+Q.i),f.gradient(U,B,ne,ue,[[0,fe],[1,W]],"fill")}else if(_e){var ie=f.getPatternAttr(ce.bgcolor,Q.i,null),me=f.getPatternAttr(ce.fgcolor,Q.i,null),we=ce.fgopacity,be=f.getPatternAttr(ce.size,Q.i,8),Me=f.getPatternAttr(ce.solidity,Q.i,.3),Ie=Q.mcc||L.isArrayOrTypedArray(ce.shape)||L.isArrayOrTypedArray(ce.bgcolor)||L.isArrayOrTypedArray(ce.size)||L.isArrayOrTypedArray(ce.solidity),Ke=O.uid;Ie&&(Ke+="-"+Q.i),f.pattern(U,"point",B,Ke,_e,be,Me,Q.mcc,ce.fillmode,ie,me,we)}else k.fill(U,W);re&&k.stroke(U,$)}},f.makePointStyleFns=function(Q){var U={},O=Q.marker;return U.markerScale=f.tryColorscale(O,""),U.lineScale=f.tryColorscale(O,"line"),w.traceIs(Q,"symbols")&&(U.ms2mrc=y.isBubble(Q)?T(Q):function(){return(O.size||6)/2}),Q.selectedpoints&&L.extendFlat(U,f.makeSelectedPointStyleFns(Q)),U},f.makeSelectedPointStyleFns=function(Q){var U={},O=Q.selected||{},Z=Q.unselected||{},B=Q.marker||{},Y=O.marker||{},j=Z.marker||{},X=B.opacity,H=Y.opacity,K=j.opacity,W=H!==void 0,$=K!==void 0;(L.isArrayOrTypedArray(X)||W||$)&&(U.selectedOpacityFn=function(ie){var me=ie.mo===void 0?B.opacity:ie.mo;return ie.selected?W?H:me:$?K:v*me});var re=B.color,de=Y.color,ve=j.color;(de||ve)&&(U.selectedColorFn=function(ie){var me=ie.mcc||re;return ie.selected?de||me:ve||me});var ue=B.size,ce=Y.size,_e=j.size,fe=ce!==void 0,ne=_e!==void 0;return w.traceIs(Q,"symbols")&&(fe||ne)&&(U.selectedSizeFn=function(ie){var me=ie.mrc||ue/2;return ie.selected?fe?ce/2:me:ne?_e/2:me}),U},f.makeSelectedTextStyleFns=function(Q){var U={},O=Q.selected||{},Z=Q.unselected||{},B=Q.textfont||{},Y=O.textfont||{},j=Z.textfont||{},X=B.color,H=Y.color,K=j.color;return U.selectedTextColorFn=function(W){var $=W.tc||X;return W.selected?H||$:K||(H?$:k.addOpacity($,v))},U},f.selectedPointStyle=function(Q,U){if(!(!Q.size()||!U.selectedpoints)){var O=f.makeSelectedPointStyleFns(U),Z=U.marker||{},B=[];O.selectedOpacityFn&&B.push(function(Y,j){Y.style("opacity",O.selectedOpacityFn(j))}),O.selectedColorFn&&B.push(function(Y,j){k.fill(Y,O.selectedColorFn(j))}),O.selectedSizeFn&&B.push(function(Y,j){var X=j.mx||Z.symbol||0,H=O.selectedSizeFn(j);Y.attr("d",c(f.symbolNumber(X),H)),j.mrc2=H}),B.length&&Q.each(function(Y){for(var j=R.select(this),X=0;X<B.length;X++)B[X](j,Y)})}},f.tryColorscale=function(Q,U){var O=U?L.nestedProperty(Q,U).get():Q;if(O){var Z=O.color;if((O.colorscale||O._colorAx)&&L.isArrayOrTypedArray(Z))return d.makeColorScaleFuncFromTrace(O)}return L.identity};var r={start:1,end:-1,middle:0,bottom:1,top:-1};function x(Q,U,O,Z,B){var Y=R.select(Q.node().parentNode),j=U.indexOf("top")!==-1?"top":U.indexOf("bottom")!==-1?"bottom":"middle",X=U.indexOf("left")!==-1?"end":U.indexOf("right")!==-1?"start":"middle",H=Z?Z/.8+1:0,K=(u.lineCount(Q)-1)*b+1,W=r[X]*H,$=O*.75+r[j]*H+(r[j]-1)*K*O/2;Q.attr("text-anchor",X),B||Y.attr("transform",e(W,$))}function A(Q,U){var O=Q.ts||U.textfont.size;return D(O)&&O>0?O:0}f.textPointStyle=function(Q,U,O){if(!!Q.size()){var Z;if(U.selectedpoints){var B=f.makeSelectedTextStyleFns(U);Z=B.selectedTextColorFn}var Y=U.texttemplate,j=O._fullLayout;Q.each(function(X){var H=R.select(this),K=Y?L.extractOption(X,U,"txt","texttemplate"):L.extractOption(X,U,"tx","text");if(!K&&K!==0){H.remove();return}if(Y){var W=U._module.formatLabels,$=W?W(X,U,j):{},re={};_(re,U,X.i);var de=U._meta||{};K=L.texttemplateString(K,$,j._d3locale,re,X,de)}var ve=X.tp||U.textposition,ue=A(X,U),ce=Z?Z(X):X.tc||U.textfont.color;H.call(f.font,X.tf||U.textfont.family,ue,ce).text(K).call(u.convertToTspans,O).call(x,ve,ue,X.mrc)})}},f.selectedTextStyle=function(Q,U){if(!(!Q.size()||!U.selectedpoints)){var O=f.makeSelectedTextStyleFns(U);Q.each(function(Z){var B=R.select(this),Y=O.selectedTextColorFn(Z),j=Z.tp||U.textposition,X=A(Z,U);k.fill(B,Y);var H=w.traceIs(U,"bar-like");x(B,j,X,Z.mrc2||Z.mrc,H)})}};var E=.5;f.smoothopen=function(Q,U){if(Q.length<3)return"M"+Q.join("L");var O="M"+Q[0],Z=[],B;for(B=1;B<Q.length-1;B++)Z.push(P(Q[B-1],Q[B],Q[B+1],U));for(O+="Q"+Z[0][0]+" "+Q[1],B=2;B<Q.length-1;B++)O+="C"+Z[B-2][1]+" "+Z[B-1][0]+" "+Q[B];return O+="Q"+Z[Q.length-3][1]+" "+Q[Q.length-1],O},f.smoothclosed=function(Q,U){if(Q.length<3)return"M"+Q.join("L")+"Z";var O="M"+Q[0],Z=Q.length-1,B=[P(Q[Z],Q[0],Q[1],U)],Y;for(Y=1;Y<Z;Y++)B.push(P(Q[Y-1],Q[Y],Q[Y+1],U));for(B.push(P(Q[Z-1],Q[Z],Q[0],U)),Y=1;Y<=Z;Y++)O+="C"+B[Y-1][1]+" "+B[Y][0]+" "+Q[Y];return O+="C"+B[Z][1]+" "+B[0][0]+" "+Q[0]+"Z",O};function P(Q,U,O,Z){var B=Q[0]-U[0],Y=Q[1]-U[1],j=O[0]-U[0],X=O[1]-U[1],H=Math.pow(B*B+Y*Y,E/2),K=Math.pow(j*j+X*X,E/2),W=(K*K*B-H*H*j)*Z,$=(K*K*Y-H*H*X)*Z,re=3*K*(H+K),de=3*H*(H+K);return[[R.round(U[0]+(re&&W/re),2),R.round(U[1]+(re&&$/re),2)],[R.round(U[0]-(de&&W/de),2),R.round(U[1]-(de&&$/de),2)]]}var S={hv:function(Q,U){return"H"+R.round(U[0],2)+"V"+R.round(U[1],2)},vh:function(Q,U){return"V"+R.round(U[1],2)+"H"+R.round(U[0],2)},hvh:function(Q,U){return"H"+R.round((Q[0]+U[0])/2,2)+"V"+R.round(U[1],2)+"H"+R.round(U[0],2)},vhv:function(Q,U){return"V"+R.round((Q[1]+U[1])/2,2)+"H"+R.round(U[0],2)+"V"+R.round(U[1],2)}},C=function(Q,U){return"L"+R.round(U[0],2)+","+R.round(U[1],2)};f.steps=function(Q){var U=S[Q]||C;return function(O){for(var Z="M"+R.round(O[0][0],2)+","+R.round(O[0][1],2),B=1;B<O.length;B++)Z+=U(O[B-1],O[B]);return Z}},f.makeTester=function(){var Q=L.ensureSingleById(R.select("body"),"svg","js-plotly-tester",function(O){O.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),U=L.ensureSingle(Q,"path","js-reference-point",function(O){O.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});f.tester=Q,f.testref=U},f.savedBBoxes={};var M=0,I=1e4;f.bBox=function(Q,U,O){O||(O=G(Q));var Z;if(O){if(Z=f.savedBBoxes[O],Z)return L.extendFlat({},Z)}else if(Q.childNodes.length===1){var B=Q.childNodes[0];if(O=G(B),O){var Y=+B.getAttribute("x")||0,j=+B.getAttribute("y")||0,X=B.getAttribute("transform");if(!X){var H=f.bBox(B,!1,O);return Y&&(H.left+=Y,H.right+=Y),j&&(H.top+=j,H.bottom+=j),H}if(O+="~"+Y+"~"+j+"~"+X,Z=f.savedBBoxes[O],Z)return L.extendFlat({},Z)}}var K,W;U?K=Q:(W=f.tester.node(),K=Q.cloneNode(!0),W.appendChild(K)),R.select(K).attr("transform",null).call(u.positionText,0,0);var $=K.getBoundingClientRect(),re=f.testref.node().getBoundingClientRect();U||W.removeChild(K);var de={height:$.height,width:$.width,left:$.left-re.left,top:$.top-re.top,right:$.right-re.left,bottom:$.bottom-re.top};return M>=I&&(f.savedBBoxes={},M=0),O&&(f.savedBBoxes[O]=de),M++,L.extendFlat({},de)};function G(Q){var U=Q.getAttribute("data-unformatted");if(U!==null)return U+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}f.setClipUrl=function(Q,U,O){Q.attr("clip-path",V(U,O))};function V(Q,U){if(!Q)return null;var O=U._context,Z=O._exportedPlot?"":O._baseUrl||"";return Z?"url('"+Z+"#"+Q+"')":"url(#"+Q+")"}f.getTranslate=function(Q){var U=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,O=Q.attr?"attr":"getAttribute",Z=Q[O]("transform")||"",B=Z.replace(U,function(Y,j,X){return[j,X].join(" ")}).split(" ");return{x:+B[0]||0,y:+B[1]||0}},f.setTranslate=function(Q,U,O){var Z=/(\btranslate\(.*?\);?)/,B=Q.attr?"attr":"getAttribute",Y=Q.attr?"attr":"setAttribute",j=Q[B]("transform")||"";return U=U||0,O=O||0,j=j.replace(Z,"").trim(),j+=e(U,O),j=j.trim(),Q[Y]("transform",j),j},f.getScale=function(Q){var U=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,O=Q.attr?"attr":"getAttribute",Z=Q[O]("transform")||"",B=Z.replace(U,function(Y,j,X){return[j,X].join(" ")}).split(" ");return{x:+B[0]||1,y:+B[1]||1}},f.setScale=function(Q,U,O){var Z=/(\bscale\(.*?\);?)/,B=Q.attr?"attr":"getAttribute",Y=Q.attr?"attr":"setAttribute",j=Q[B]("transform")||"";return U=U||1,O=O||1,j=j.replace(Z,"").trim(),j+="scale("+U+","+O+")",j=j.trim(),Q[Y]("transform",j),j};var q=/\s*sc.*/;f.setPointGroupScale=function(Q,U,O){if(U=U||1,O=O||1,!!Q){var Z=U===1&&O===1?"":"scale("+U+","+O+")";Q.each(function(){var B=(this.getAttribute("transform")||"").replace(q,"");B+=Z,B=B.trim(),this.setAttribute("transform",B)})}};var ee=/translate\([^)]*\)\s*$/;f.setTextPointsScale=function(Q,U,O){!Q||Q.each(function(){var Z,B=R.select(this),Y=B.select("text");if(!!Y.node()){var j=parseFloat(Y.attr("x")||0),X=parseFloat(Y.attr("y")||0),H=(B.attr("transform")||"").match(ee);U===1&&O===1?Z=[]:Z=[e(j,X),"scale("+U+","+O+")",e(-j,-X)],H&&Z.push(H),B.attr("transform",Z.join(""))}})}},{"../../components/fx/helpers":155,"../../constants/alignment":224,"../../constants/interactions":230,"../../constants/xmlns_namespaces":232,"../../lib":252,"../../lib/svg_text_utils":277,"../../registry":352,"../../traces/scatter/make_bubble_size_func":398,"../../traces/scatter/subtypes":406,"../color":119,"../colorscale":131,"./symbol_defs":142,"@plotly/d3":16,"fast-isnumeric":31,tinycolor2:83}],142:[function(z,le,ae){"use strict";var R=z("@plotly/d3");le.exports={circle:{n:0,f:function(L){var N=R.round(L,2);return"M"+N+",0A"+N+","+N+" 0 1,1 0,-"+N+"A"+N+","+N+" 0 0,1 "+N+",0Z"}},square:{n:1,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"H-"+N+"V-"+N+"H"+N+"Z"}},diamond:{n:2,f:function(L){var N=R.round(L*1.3,2);return"M"+N+",0L0,"+N+"L-"+N+",0L0,-"+N+"Z"}},cross:{n:3,f:function(L){var N=R.round(L*.4,2),D=R.round(L*1.2,2);return"M"+D+","+N+"H"+N+"V"+D+"H-"+N+"V"+N+"H-"+D+"V-"+N+"H-"+N+"V-"+D+"H"+N+"V-"+N+"H"+D+"Z"}},x:{n:4,f:function(L){var N=R.round(L*.8/Math.sqrt(2),2),D="l"+N+","+N,p="l"+N+",-"+N,w="l-"+N+",-"+N,k="l-"+N+","+N;return"M0,"+N+D+p+w+p+w+k+w+k+D+k+D+"Z"}},"triangle-up":{n:5,f:function(L){var N=R.round(L*2/Math.sqrt(3),2),D=R.round(L/2,2),p=R.round(L,2);return"M-"+N+","+D+"H"+N+"L0,-"+p+"Z"}},"triangle-down":{n:6,f:function(L){var N=R.round(L*2/Math.sqrt(3),2),D=R.round(L/2,2),p=R.round(L,2);return"M-"+N+",-"+D+"H"+N+"L0,"+p+"Z"}},"triangle-left":{n:7,f:function(L){var N=R.round(L*2/Math.sqrt(3),2),D=R.round(L/2,2),p=R.round(L,2);return"M"+D+",-"+N+"V"+N+"L-"+p+",0Z"}},"triangle-right":{n:8,f:function(L){var N=R.round(L*2/Math.sqrt(3),2),D=R.round(L/2,2),p=R.round(L,2);return"M-"+D+",-"+N+"V"+N+"L"+p+",0Z"}},"triangle-ne":{n:9,f:function(L){var N=R.round(L*.6,2),D=R.round(L*1.2,2);return"M-"+D+",-"+N+"H"+N+"V"+D+"Z"}},"triangle-se":{n:10,f:function(L){var N=R.round(L*.6,2),D=R.round(L*1.2,2);return"M"+N+",-"+D+"V"+N+"H-"+D+"Z"}},"triangle-sw":{n:11,f:function(L){var N=R.round(L*.6,2),D=R.round(L*1.2,2);return"M"+D+","+N+"H-"+N+"V-"+D+"Z"}},"triangle-nw":{n:12,f:function(L){var N=R.round(L*.6,2),D=R.round(L*1.2,2);return"M-"+N+","+D+"V-"+N+"H"+D+"Z"}},pentagon:{n:13,f:function(L){var N=R.round(L*.951,2),D=R.round(L*.588,2),p=R.round(-L,2),w=R.round(L*-.309,2),k=R.round(L*.809,2);return"M"+N+","+w+"L"+D+","+k+"H-"+D+"L-"+N+","+w+"L0,"+p+"Z"}},hexagon:{n:14,f:function(L){var N=R.round(L,2),D=R.round(L/2,2),p=R.round(L*Math.sqrt(3)/2,2);return"M"+p+",-"+D+"V"+D+"L0,"+N+"L-"+p+","+D+"V-"+D+"L0,-"+N+"Z"}},hexagon2:{n:15,f:function(L){var N=R.round(L,2),D=R.round(L/2,2),p=R.round(L*Math.sqrt(3)/2,2);return"M-"+D+","+p+"H"+D+"L"+N+",0L"+D+",-"+p+"H-"+D+"L-"+N+",0Z"}},octagon:{n:16,f:function(L){var N=R.round(L*.924,2),D=R.round(L*.383,2);return"M-"+D+",-"+N+"H"+D+"L"+N+",-"+D+"V"+D+"L"+D+","+N+"H-"+D+"L-"+N+","+D+"V-"+D+"Z"}},star:{n:17,f:function(L){var N=L*1.4,D=R.round(N*.225,2),p=R.round(N*.951,2),w=R.round(N*.363,2),k=R.round(N*.588,2),d=R.round(-N,2),e=R.round(N*-.309,2),u=R.round(N*.118,2),s=R.round(N*.809,2),l=R.round(N*.382,2);return"M"+D+","+e+"H"+p+"L"+w+","+u+"L"+k+","+s+"L0,"+l+"L-"+k+","+s+"L-"+w+","+u+"L-"+p+","+e+"H-"+D+"L0,"+d+"Z"}},hexagram:{n:18,f:function(L){var N=R.round(L*.66,2),D=R.round(L*.38,2),p=R.round(L*.76,2);return"M-"+p+",0l-"+D+",-"+N+"h"+p+"l"+D+",-"+N+"l"+D+","+N+"h"+p+"l-"+D+","+N+"l"+D+","+N+"h-"+p+"l-"+D+","+N+"l-"+D+",-"+N+"h-"+p+"Z"}},"star-triangle-up":{n:19,f:function(L){var N=R.round(L*Math.sqrt(3)*.8,2),D=R.round(L*.8,2),p=R.round(L*1.6,2),w=R.round(L*4,2),k="A "+w+","+w+" 0 0 1 ";return"M-"+N+","+D+k+N+","+D+k+"0,-"+p+k+"-"+N+","+D+"Z"}},"star-triangle-down":{n:20,f:function(L){var N=R.round(L*Math.sqrt(3)*.8,2),D=R.round(L*.8,2),p=R.round(L*1.6,2),w=R.round(L*4,2),k="A "+w+","+w+" 0 0 1 ";return"M"+N+",-"+D+k+"-"+N+",-"+D+k+"0,"+p+k+N+",-"+D+"Z"}},"star-square":{n:21,f:function(L){var N=R.round(L*1.1,2),D=R.round(L*2,2),p="A "+D+","+D+" 0 0 1 ";return"M-"+N+",-"+N+p+"-"+N+","+N+p+N+","+N+p+N+",-"+N+p+"-"+N+",-"+N+"Z"}},"star-diamond":{n:22,f:function(L){var N=R.round(L*1.4,2),D=R.round(L*1.9,2),p="A "+D+","+D+" 0 0 1 ";return"M-"+N+",0"+p+"0,"+N+p+N+",0"+p+"0,-"+N+p+"-"+N+",0Z"}},"diamond-tall":{n:23,f:function(L){var N=R.round(L*.7,2),D=R.round(L*1.4,2);return"M0,"+D+"L"+N+",0L0,-"+D+"L-"+N+",0Z"}},"diamond-wide":{n:24,f:function(L){var N=R.round(L*1.4,2),D=R.round(L*.7,2);return"M0,"+D+"L"+N+",0L0,-"+D+"L-"+N+",0Z"}},hourglass:{n:25,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"H-"+N+"L"+N+",-"+N+"H-"+N+"Z"},noDot:!0},bowtie:{n:26,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"V-"+N+"L-"+N+","+N+"V-"+N+"Z"},noDot:!0},"circle-cross":{n:27,f:function(L){var N=R.round(L,2);return"M0,"+N+"V-"+N+"M"+N+",0H-"+N+"M"+N+",0A"+N+","+N+" 0 1,1 0,-"+N+"A"+N+","+N+" 0 0,1 "+N+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(L){var N=R.round(L,2),D=R.round(L/Math.sqrt(2),2);return"M"+D+","+D+"L-"+D+",-"+D+"M"+D+",-"+D+"L-"+D+","+D+"M"+N+",0A"+N+","+N+" 0 1,1 0,-"+N+"A"+N+","+N+" 0 0,1 "+N+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(L){var N=R.round(L,2);return"M0,"+N+"V-"+N+"M"+N+",0H-"+N+"M"+N+","+N+"H-"+N+"V-"+N+"H"+N+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"L-"+N+",-"+N+"M"+N+",-"+N+"L-"+N+","+N+"M"+N+","+N+"H-"+N+"V-"+N+"H"+N+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(L){var N=R.round(L*1.3,2);return"M"+N+",0L0,"+N+"L-"+N+",0L0,-"+N+"ZM0,-"+N+"V"+N+"M-"+N+",0H"+N},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(L){var N=R.round(L*1.3,2),D=R.round(L*.65,2);return"M"+N+",0L0,"+N+"L-"+N+",0L0,-"+N+"ZM-"+D+",-"+D+"L"+D+","+D+"M-"+D+","+D+"L"+D+",-"+D},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(L){var N=R.round(L*1.4,2);return"M0,"+N+"V-"+N+"M"+N+",0H-"+N},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"L-"+N+",-"+N+"M"+N+",-"+N+"L-"+N+","+N},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(L){var N=R.round(L*1.2,2),D=R.round(L*.85,2);return"M0,"+N+"V-"+N+"M"+N+",0H-"+N+"M"+D+","+D+"L-"+D+",-"+D+"M"+D+",-"+D+"L-"+D+","+D},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(L){var N=R.round(L/2,2),D=R.round(L,2);return"M"+N+","+D+"V-"+D+"m-"+D+",0V"+D+"M"+D+","+N+"H-"+D+"m0,-"+D+"H"+D},needLine:!0,noFill:!0},"y-up":{n:37,f:function(L){var N=R.round(L*1.2,2),D=R.round(L*1.6,2),p=R.round(L*.8,2);return"M-"+N+","+p+"L0,0M"+N+","+p+"L0,0M0,-"+D+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(L){var N=R.round(L*1.2,2),D=R.round(L*1.6,2),p=R.round(L*.8,2);return"M-"+N+",-"+p+"L0,0M"+N+",-"+p+"L0,0M0,"+D+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(L){var N=R.round(L*1.2,2),D=R.round(L*1.6,2),p=R.round(L*.8,2);return"M"+p+","+N+"L0,0M"+p+",-"+N+"L0,0M-"+D+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(L){var N=R.round(L*1.2,2),D=R.round(L*1.6,2),p=R.round(L*.8,2);return"M-"+p+","+N+"L0,0M-"+p+",-"+N+"L0,0M"+D+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(L){var N=R.round(L*1.4,2);return"M"+N+",0H-"+N},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(L){var N=R.round(L*1.4,2);return"M0,"+N+"V-"+N},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(L){var N=R.round(L,2);return"M"+N+",-"+N+"L-"+N+","+N},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(L){var N=R.round(L,2);return"M"+N+","+N+"L-"+N+",-"+N},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(L){var N=R.round(L,2),D=R.round(L*2,2);return"M0,0L-"+N+","+D+"H"+N+"Z"},noDot:!0},"arrow-down":{n:46,f:function(L){var N=R.round(L,2),D=R.round(L*2,2);return"M0,0L-"+N+",-"+D+"H"+N+"Z"},noDot:!0},"arrow-left":{n:47,f:function(L){var N=R.round(L*2,2),D=R.round(L,2);return"M0,0L"+N+",-"+D+"V"+D+"Z"},noDot:!0},"arrow-right":{n:48,f:function(L){var N=R.round(L*2,2),D=R.round(L,2);return"M0,0L-"+N+",-"+D+"V"+D+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(L){var N=R.round(L,2),D=R.round(L*2,2);return"M-"+N+",0H"+N+"M0,0L-"+N+","+D+"H"+N+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(L){var N=R.round(L,2),D=R.round(L*2,2);return"M-"+N+",0H"+N+"M0,0L-"+N+",-"+D+"H"+N+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(L){var N=R.round(L*2,2),D=R.round(L,2);return"M0,-"+D+"V"+D+"M0,0L"+N+",-"+D+"V"+D+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(L){var N=R.round(L*2,2),D=R.round(L,2);return"M0,-"+D+"V"+D+"M0,0L-"+N+",-"+D+"V"+D+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":16}],143:[function(z,le,ae){"use strict";le.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],144:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../registry"),N=z("../../plots/cartesian/axes"),D=z("../../lib"),p=z("./compute_error");le.exports=function(d){for(var e=d.calcdata,u=0;u<e.length;u++){var s=e[u],l=s[0].trace;if(l.visible===!0&&L.traceIs(l,"errorBarsOK")){var b=N.getFromId(d,l.xaxis),v=N.getFromId(d,l.yaxis);w(s,l,b,"x"),w(s,l,v,"y")}}};function w(k,d,e,u){var s=d["error_"+u]||{},l=s.visible&&["linear","log"].indexOf(e.type)!==-1,b=[];if(!!l){for(var v=p(s),y=0;y<k.length;y++){var T=k[y],_=T.i;if(_===void 0)_=y;else if(_===null)continue;var f=T[u];if(!!R(e.c2l(f))){var g=v(f,_);if(R(g[0])&&R(g[1])){var n=T[u+"s"]=f-g[0],a=T[u+"h"]=f+g[1];b.push(n,a)}}}var h=e._id,c=d._extremes[h],m=N.findExtremes(e,b,D.extendFlat({tozero:c.opts.tozero},{padded:!0}));c.min=c.min.concat(m.min),c.max=c.max.concat(m.max)}}},{"../../lib":252,"../../plots/cartesian/axes":301,"../../registry":352,"./compute_error":145,"fast-isnumeric":31}],145:[function(z,le,ae){"use strict";le.exports=function(N){var D=N.type,p=N.symmetric;if(D==="data"){var w=N.array||[];if(p)return function(s,l){var b=+w[l];return[b,b]};var k=N.arrayminus||[];return function(s,l){var b=+w[l],v=+k[l];return!isNaN(b)||!isNaN(v)?[v||0,b||0]:[NaN,NaN]}}else{var d=R(D,N.value),e=R(D,N.valueminus);return p||N.valueminus===void 0?function(s){var l=d(s);return[l,l]}:function(s){return[e(s),d(s)]}}};function R(L,N){if(L==="percent")return function(D){return Math.abs(D*N/100)};if(L==="constant")return function(){return Math.abs(N)};if(L==="sqrt")return function(D){return Math.sqrt(Math.abs(D))}}},{}],146:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../registry"),N=z("../../lib"),D=z("../../plot_api/plot_template"),p=z("./attributes");le.exports=function(w,k,d,e){var u="error_"+e.axis,s=D.newContainer(k,u),l=w[u]||{};function b(n,a){return N.coerce(l,s,p,n,a)}var v=l.array!==void 0||l.value!==void 0||l.type==="sqrt",y=b("visible",v);if(y!==!1){var T=b("type","array"in l?"data":"percent"),_=!0;T!=="sqrt"&&(_=b("symmetric",!((T==="data"?"arrayminus":"valueminus")in l))),T==="data"?(b("array"),b("traceref"),_||(b("arrayminus"),b("tracerefminus"))):(T==="percent"||T==="constant")&&(b("value"),_||b("valueminus"));var f="copy_"+e.inherit+"style";if(e.inherit){var g=k["error_"+e.inherit];(g||{}).visible&&b(f,!(l.color||R(l.thickness)||R(l.width)))}(!e.inherit||!s[f])&&(b("color",d),b("thickness"),b("width",L.traceIs(k,"gl3d")?0:4))}}},{"../../lib":252,"../../plot_api/plot_template":290,"../../registry":352,"./attributes":143,"fast-isnumeric":31}],147:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plot_api/edit_types").overrideAll,N=z("./attributes"),D={error_x:R.extendFlat({},N),error_y:R.extendFlat({},N)};delete D.error_x.copy_zstyle,delete D.error_y.copy_zstyle,delete D.error_y.copy_ystyle;var p={error_x:R.extendFlat({},N),error_y:R.extendFlat({},N),error_z:R.extendFlat({},N)};delete p.error_x.copy_ystyle,delete p.error_y.copy_ystyle,delete p.error_z.copy_ystyle,delete p.error_z.copy_zstyle,le.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:D,bar:D,histogram:D,scatter3d:L(p,"calc","nested"),scattergl:L(D,"calc","nested")}},supplyDefaults:z("./defaults"),calc:z("./calc"),makeComputeError:z("./compute_error"),plot:z("./plot"),style:z("./style"),hoverInfo:w};function w(k,d,e){(d.error_y||{}).visible&&(e.yerr=k.yh-k.y,d.error_y.symmetric||(e.yerrneg=k.y-k.ys)),(d.error_x||{}).visible&&(e.xerr=k.xh-k.x,d.error_x.symmetric||(e.xerrneg=k.x-k.xs))}},{"../../lib":252,"../../plot_api/edit_types":283,"./attributes":143,"./calc":144,"./compute_error":145,"./defaults":146,"./plot":148,"./style":149}],148:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("../drawing"),D=z("../../traces/scatter/subtypes");le.exports=function(k,d,e,u){var s,l=e.xaxis,b=e.yaxis,v=u&&u.duration>0;d.each(function(y){var T=y[0].trace,_=T.error_x||{},f=T.error_y||{},g;T.ids&&(g=function(c){return c.id});var n=D.hasMarkers(T)&&T.marker.maxdisplayed>0;!f.visible&&!_.visible&&(y=[]);var a=R.select(this).selectAll("g.errorbar").data(y,g);if(a.exit().remove(),!!y.length){_.visible||a.selectAll("path.xerror").remove(),f.visible||a.selectAll("path.yerror").remove(),a.style("opacity",1);var h=a.enter().append("g").classed("errorbar",!0);v&&h.style("opacity",0).transition().duration(u.duration).style("opacity",1),N.setClipUrl(a,e.layerClipId,k),a.each(function(c){var m=R.select(this),o=p(c,l,b);if(!(n&&!c.vis)){var t,i=m.select("path.yerror");if(f.visible&&L(o.x)&&L(o.yh)&&L(o.ys)){var r=f.width;t="M"+(o.x-r)+","+o.yh+"h"+2*r+"m-"+r+",0V"+o.ys,o.noYS||(t+="m-"+r+",0h"+2*r),s=!i.size(),s?i=m.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):v&&(i=i.transition().duration(u.duration).ease(u.easing)),i.attr("d",t)}else i.remove();var x=m.select("path.xerror");if(_.visible&&L(o.y)&&L(o.xh)&&L(o.xs)){var A=(_.copy_ystyle?f:_).width;t="M"+o.xh+","+(o.y-A)+"v"+2*A+"m0,-"+A+"H"+o.xs,o.noXS||(t+="m0,-"+A+"v"+2*A),s=!x.size(),s?x=m.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):v&&(x=x.transition().duration(u.duration).ease(u.easing)),x.attr("d",t)}else x.remove()}})}})};function p(w,k,d){var e={x:k.c2p(w.x),y:d.c2p(w.y)};return w.yh!==void 0&&(e.yh=d.c2p(w.yh),e.ys=d.c2p(w.ys),L(e.ys)||(e.noYS=!0,e.ys=d.c2p(w.ys,!0))),w.xh!==void 0&&(e.xh=k.c2p(w.xh),e.xs=k.c2p(w.xs),L(e.xs)||(e.noXS=!0,e.xs=k.c2p(w.xs,!0))),e}},{"../../traces/scatter/subtypes":406,"../drawing":141,"@plotly/d3":16,"fast-isnumeric":31}],149:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../color");le.exports=function(D){D.each(function(p){var w=p[0].trace,k=w.error_y||{},d=w.error_x||{},e=R.select(this);e.selectAll("path.yerror").style("stroke-width",k.thickness+"px").call(L.stroke,k.color),d.copy_ystyle&&(d=k),e.selectAll("path.xerror").style("stroke-width",d.thickness+"px").call(L.stroke,d.color)})}},{"../color":119,"@plotly/d3":16}],150:[function(z,le,ae){"use strict";var R=z("../../plots/font_attributes"),L=z("./layout_attributes").hoverlabel,N=z("../../lib/extend").extendFlat;le.exports={hoverlabel:{bgcolor:N({},L.bgcolor,{arrayOk:!0}),bordercolor:N({},L.bordercolor,{arrayOk:!0}),font:R({arrayOk:!0,editType:"none"}),align:N({},L.align,{arrayOk:!0}),namelength:N({},L.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":245,"../../plots/font_attributes":332,"./layout_attributes":160}],151:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry");le.exports=function(p){var w=p.calcdata,k=p._fullLayout;function d(b){return function(v){return R.coerceHoverinfo({hoverinfo:v},{_module:b._module},k)}}for(var e=0;e<w.length;e++){var u=w[e],s=u[0].trace;if(!L.traceIs(s,"pie-like")){var l=L.traceIs(s,"2dMap")?N:R.fillArray;l(s.hoverinfo,u,"hi",d(s)),s.hovertemplate&&l(s.hovertemplate,u,"ht"),s.hoverlabel&&(l(s.hoverlabel.bgcolor,u,"hbg"),l(s.hoverlabel.bordercolor,u,"hbc"),l(s.hoverlabel.font.size,u,"hts"),l(s.hoverlabel.font.color,u,"htc"),l(s.hoverlabel.font.family,u,"htf"),l(s.hoverlabel.namelength,u,"hnl"),l(s.hoverlabel.align,u,"hta"))}}};function N(D,p,w,k){k=k||R.identity,Array.isArray(D)&&(p[0][w]=k(D))}},{"../../lib":252,"../../registry":352}],152:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("./hover").hover;le.exports=function(D,p,w){var k=R.getComponentMethod("annotations","onClick")(D,D._hoverdata);w!==void 0&&L(D,p,w,!0);function d(){D.emit("plotly_click",{points:D._hoverdata,event:p})}D._hoverdata&&p&&p.target&&(k&&k.then?k.then(d):d(),p.stopImmediatePropagation&&p.stopImmediatePropagation())}},{"../../registry":352,"./hover":156}],153:[function(z,le,ae){"use strict";le.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],154:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./attributes"),N=z("./hoverlabel_defaults");le.exports=function(p,w,k,d){function e(s,l){return R.coerce(p,w,L,s,l)}var u=R.extendFlat({},d.hoverlabel);w.hovertemplate&&(u.namelength=-1),N(p,w,e,u)}},{"../../lib":252,"./attributes":150,"./hoverlabel_defaults":157}],155:[function(z,le,ae){"use strict";var R=z("../../lib");ae.getSubplot=function(k){return k.subplot||k.xaxis+k.yaxis||k.geo},ae.isTraceInSubplots=function(k,d){if(k.type==="splom"){for(var e=k.xaxes||[],u=k.yaxes||[],s=0;s<e.length;s++)for(var l=0;l<u.length;l++)if(d.indexOf(e[s]+u[l])!==-1)return!0;return!1}return d.indexOf(ae.getSubplot(k))!==-1},ae.flat=function(k,d){for(var e=new Array(k.length),u=0;u<k.length;u++)e[u]=d;return e},ae.p2c=function(k,d){for(var e=new Array(k.length),u=0;u<k.length;u++)e[u]=k[u].p2c(d);return e},ae.getDistanceFunction=function(k,d,e,u){return k==="closest"?u||ae.quadrature(d,e):k.charAt(0)==="x"?d:e},ae.getClosest=function(k,d,e){if(e.index!==!1)e.index>=0&&e.index<k.length?e.distance=0:e.index=!1;else for(var u=0;u<k.length;u++){var s=d(k[u]);s<=e.distance&&(e.index=u,e.distance=s)}return e},ae.inbox=function(k,d,e){return k*d<0||k===0?e:1/0},ae.quadrature=function(k,d){return function(e){var u=k(e),s=d(e);return Math.sqrt(u*u+s*s)}},ae.makeEventData=function(k,d,e){var u="index"in k?k.index:k.pointNumber,s={data:d._input,fullData:d,curveNumber:d.index,pointNumber:u};if(d._indexToPoints){var l=d._indexToPoints[u];l.length===1?s.pointIndex=l[0]:s.pointIndices=l}else s.pointIndex=u;return d._module.eventData?s=d._module.eventData(s,k,d,e,u):("xVal"in k?s.x=k.xVal:"x"in k&&(s.x=k.x),"yVal"in k?s.y=k.yVal:"y"in k&&(s.y=k.y),k.xa&&(s.xaxis=k.xa),k.ya&&(s.yaxis=k.ya),k.zLabelVal!==void 0&&(s.z=k.zLabelVal)),ae.appendArrayPointValue(s,d,u),s},ae.appendArrayPointValue=function(k,d,e){var u=d._arrayAttrs;if(!!u)for(var s=0;s<u.length;s++){var l=u[s],b=N(l);if(k[b]===void 0){var v=R.nestedProperty(d,l).get(),y=D(v,e);y!==void 0&&(k[b]=y)}}},ae.appendArrayMultiPointValues=function(k,d,e){var u=d._arrayAttrs;if(!!u)for(var s=0;s<u.length;s++){var l=u[s],b=N(l);if(k[b]===void 0){for(var v=R.nestedProperty(d,l).get(),y=new Array(e.length),T=0;T<e.length;T++)y[T]=D(v,e[T]);k[b]=y}}};var L={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function N(k){return L[k]||k}function D(k,d){if(Array.isArray(d)){if(Array.isArray(k)&&Array.isArray(k[d[0]]))return k[d[0]][d[1]]}else return k[d]}var p={x:!0,y:!0},w={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(k){return typeof k!="string"?!1:!!w[k]},ae.isXYhover=function(k){return typeof k!="string"?!1:!!p[k]}},{"../../lib":252}],156:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("tinycolor2"),D=z("../../lib"),p=D.strTranslate,w=D.strRotate,k=z("../../lib/events"),d=z("../../lib/svg_text_utils"),e=z("../../lib/override_cursor"),u=z("../drawing"),s=z("../color"),l=z("../dragelement"),b=z("../../plots/cartesian/axes"),v=z("../../registry"),y=z("./helpers"),T=z("./constants"),_=z("../legend/defaults"),f=z("../legend/draw"),g=T.YANGLE,n=Math.PI*g/180,a=1/Math.sin(n),h=Math.cos(n),c=Math.sin(n),m=T.HOVERARROWSIZE,o=T.HOVERTEXTPAD,t={box:!0,ohlc:!0,violin:!0,candlestick:!0},i={scatter:!0,scattergl:!0,splom:!0};ae.hover=function(Y,j,X,H){Y=D.getGraphDiv(Y);var K=j.target;D.throttle(Y._fullLayout._uid+T.HOVERID,T.HOVERMINTIME,function(){r(Y,j,X,H,K)})},ae.loneHover=function(Y,j){var X=!0;Array.isArray(Y)||(X=!1,Y=[Y]);var H=j.gd,K=U(H),W=O(H),$=Y.map(function(ne){var ie=ne._x0||ne.x0||ne.x||0,me=ne._x1||ne.x1||ne.x||0,we=ne._y0||ne.y0||ne.y||0,be=ne._y1||ne.y1||ne.y||0,Me=ne.eventData;if(Me){var Ie=Math.min(ie,me),Ke=Math.max(ie,me),Oe=Math.min(we,be),We=Math.max(we,be),Fe=ne.trace;if(v.traceIs(Fe,"gl3d")){var Ge=H._fullLayout[Fe.scene]._scene.container,Xe=Ge.offsetLeft,ut=Ge.offsetTop;Ie+=Xe,Ke+=Xe,Oe+=ut,We+=ut}Me.bbox={x0:Ie+W,x1:Ke+W,y0:Oe+K,y1:We+K},j.inOut_bbox&&j.inOut_bbox.push(Me.bbox)}else Me=!1;return{color:ne.color||s.defaultLine,x0:ne.x0||ne.x||0,x1:ne.x1||ne.x||0,y0:ne.y0||ne.y||0,y1:ne.y1||ne.y||0,xLabel:ne.xLabel,yLabel:ne.yLabel,zLabel:ne.zLabel,text:ne.text,name:ne.name,idealAlign:ne.idealAlign,borderColor:ne.borderColor,fontFamily:ne.fontFamily,fontSize:ne.fontSize,fontColor:ne.fontColor,nameLength:ne.nameLength,textAlign:ne.textAlign,trace:ne.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ne.hovertemplate||!1,hovertemplateLabels:ne.hovertemplateLabels||!1,eventData:Me}}),re=!1,de=E($,{gd:H,hovermode:"closest",rotateLabels:re,bgColor:j.bgColor||s.background,container:R.select(j.container),outerContainer:j.outerContainer||j.container}),ve=5,ue=0,ce=0;de.sort(function(ne,ie){return ne.y0-ie.y0}).each(function(ne,ie){var me=ne.y0-ne.by/2;me-ve<ue?ne.offset=ue-me+ve:ne.offset=0,ue=me+ne.by+ne.offset,ie===j.anchorIndex&&(ce=ne.offset)}).each(function(ne){ne.offset-=ce});var _e=H._fullLayout._invScaleX,fe=H._fullLayout._invScaleY;return C(de,re,_e,fe),X?de:de.node()};function r(B,Y,j,X,H){j||(j="xy");var K=Array.isArray(j)?j:[j],W=B._fullLayout,$=W._plots||[],re=$[j],de=W._has("cartesian");if(re){var ve=re.overlays.map(function(Pt){return Pt.id});K=K.concat(ve)}for(var ue=K.length,ce=new Array(ue),_e=new Array(ue),fe=!1,ne=0;ne<ue;ne++){var ie=K[ne];if($[ie])fe=!0,ce[ne]=$[ie].xaxis,_e[ne]=$[ie].yaxis;else if(W[ie]&&W[ie]._subplot){var me=W[ie]._subplot;ce[ne]=me.xaxis,_e[ne]=me.yaxis}else{D.warn("Unrecognized subplot: "+ie);return}}var we=Y.hovermode||W.hovermode;if(we&&!fe&&(we="closest"),["x","y","closest","x unified","y unified"].indexOf(we)===-1||!B.calcdata||B.querySelector(".zoombox")||B._dragging)return l.unhoverRaw(B,Y);var be=W.hoverdistance;be===-1&&(be=1/0);var Me=W.spikedistance;Me===-1&&(Me=1/0);var Ie=[],Ke=[],Oe,We,Fe,Ge,Xe,ut,rt,dt,st,Ve,Je,ke,Le,Be={hLinePoint:null,vLinePoint:null},pe=!1;if(Array.isArray(Y))for(we="array",Fe=0;Fe<Y.length;Fe++)Xe=B.calcdata[Y[Fe].curveNumber||0],Xe&&(ut=Xe[0].trace,Xe[0].trace.hoverinfo!=="skip"&&(Ke.push(Xe),ut.orientation==="h"&&(pe=!0)));else{for(Ge=0;Ge<B.calcdata.length;Ge++)Xe=B.calcdata[Ge],ut=Xe[0].trace,ut.hoverinfo!=="skip"&&y.isTraceInSubplots(ut,K)&&(Ke.push(Xe),ut.orientation==="h"&&(pe=!0));var Ae=!H,Ce,Se;if(Ae)"xpx"in Y?Ce=Y.xpx:Ce=ce[0]._length/2,"ypx"in Y?Se=Y.ypx:Se=_e[0]._length/2;else{if(k.triggerHandler(B,"plotly_beforehover",Y)===!1)return;var He=H.getBoundingClientRect();Ce=Y.clientX-He.left,Se=Y.clientY-He.top,W._calcInverseTransform(B);var Ne=D.apply3DTransform(W._invTransform)(Ce,Se);if(Ce=Ne[0],Se=Ne[1],Ce<0||Ce>ce[0]._length||Se<0||Se>_e[0]._length)return l.unhoverRaw(B,Y)}if(Y.pointerX=Ce+ce[0]._offset,Y.pointerY=Se+_e[0]._offset,"xval"in Y?Oe=y.flat(K,Y.xval):Oe=y.p2c(ce,Ce),"yval"in Y?We=y.flat(K,Y.yval):We=y.p2c(_e,Se),!L(Oe[0])||!L(We[0]))return D.warn("Fx.hover failed",Y,B),l.unhoverRaw(B,Y)}var qe=1/0;function at(Pt,rr){for(Ge=0;Ge<Ke.length;Ge++)if(Xe=Ke[Ge],!(!Xe||!Xe[0]||!Xe[0].trace)&&(ut=Xe[0].trace,!(ut.visible!==!0||ut._length===0)&&["carpet","contourcarpet"].indexOf(ut._module.name)===-1)){if(ut.type==="splom"?(dt=0,rt=K[dt]):(rt=y.getSubplot(ut),dt=K.indexOf(rt)),st=we,y.isUnifiedHover(st)&&(st=st.charAt(0)),ke={cd:Xe,trace:ut,xa:ce[dt],ya:_e[dt],maxHoverDistance:be,maxSpikeDistance:Me,index:!1,distance:Math.min(qe,be),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:ut.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},W[rt]&&(ke.subplot=W[rt]._subplot),W._splomScenes&&W._splomScenes[ut.uid]&&(ke.scene=W._splomScenes[ut.uid]),Le=Ie.length,st==="array"){var ir=Y[Ge];"pointNumber"in ir?(ke.index=ir.pointNumber,st="closest"):(st="","xval"in ir&&(Ve=ir.xval,st="x"),"yval"in ir&&(Je=ir.yval,st=st?"closest":"y"))}else Pt!==void 0&&rr!==void 0?(Ve=Pt,Je=rr):(Ve=Oe[dt],Je=We[dt]);if(be!==0)if(ut._module&&ut._module.hoverPoints){var tr=ut._module.hoverPoints(ke,Ve,Je,st,{finiteRange:!0,hoverLayer:W._hoverlayer});if(tr)for(var sr,cr=0;cr<tr.length;cr++)sr=tr[cr],L(sr.x0)&&L(sr.y0)&&Ie.push(M(sr,we))}else D.log("Unrecognized trace type in hover:",ut);if(we==="closest"&&Ie.length>Le&&(Ie.splice(0,Le),qe=Ie[0].distance),de&&Me!==0&&Ie.length===0){ke.distance=Me,ke.index=!1;var vr=ut._module.hoverPoints(ke,Ve,Je,"closest",{hoverLayer:W._hoverlayer});if(vr&&(vr=vr.filter(function(Er){return Er.spikeDistance<=Me})),vr&&vr.length){var mr,_r=vr.filter(function(Er){return Er.xa.showspikes&&Er.xa.spikesnap!=="hovered data"});if(_r.length){var wr=_r[0];L(wr.x0)&&L(wr.y0)&&(mr=Ze(wr),(!Be.vLinePoint||Be.vLinePoint.spikeDistance>mr.spikeDistance)&&(Be.vLinePoint=mr))}var br=vr.filter(function(Er){return Er.ya.showspikes&&Er.ya.spikesnap!=="hovered data"});if(br.length){var Cr=br[0];L(Cr.x0)&&L(Cr.y0)&&(mr=Ze(Cr),(!Be.hLinePoint||Be.hLinePoint.spikeDistance>mr.spikeDistance)&&(Be.hLinePoint=mr))}}}}}at();function nt(Pt,rr,ir){for(var tr=null,sr=1/0,cr,vr=0;vr<Pt.length;vr++)cr=Pt[vr].spikeDistance,ir&&vr===0&&(cr=-1/0),cr<=sr&&cr<=rr&&(tr=Pt[vr],sr=cr);return tr}function Ze(Pt){return Pt?{xa:Pt.xa,ya:Pt.ya,x:Pt.xSpike!==void 0?Pt.xSpike:(Pt.x0+Pt.x1)/2,y:Pt.ySpike!==void 0?Pt.ySpike:(Pt.y0+Pt.y1)/2,distance:Pt.distance,spikeDistance:Pt.spikeDistance,curveNumber:Pt.trace.index,color:Pt.color,pointNumber:Pt.index}:null}var ht={fullLayout:W,container:W._hoverlayer,event:Y},kt=B._spikepoints,xt={vLinePoint:Be.vLinePoint,hLinePoint:Be.hLinePoint};B._spikepoints=xt;var Bt=function(){Ie.sort(function(Pt,rr){return Pt.distance-rr.distance}),Ie=ee(Ie,we)};Bt();var Zt=we.charAt(0),Gt=(Zt==="x"||Zt==="y")&&Ie[0]&&i[Ie[0].trace.type];if(de&&Me!==0&&Ie.length!==0){var Rt=Ie.filter(function(Pt){return Pt.ya.showspikes}),Wt=nt(Rt,Me,Gt);Be.hLinePoint=Ze(Wt);var It=Ie.filter(function(Pt){return Pt.xa.showspikes}),vt=nt(It,Me,Gt);Be.vLinePoint=Ze(vt)}if(Ie.length===0){var Yt=l.unhoverRaw(B,Y);return de&&(Be.hLinePoint!==null||Be.vLinePoint!==null)&&V(kt)&&I(B,Be,ht),Yt}if(de&&V(kt)&&I(B,Be,ht),y.isXYhover(st)&&Ie[0].length!==0&&Ie[0].trace.type!=="splom"){var Ft=Ie[0];t[Ft.trace.type]?Ie=Ie.filter(function(Pt){return Pt.trace.index===Ft.trace.index}):Ie=[Ft];var ye=Ie.length,ge=Q("x",Ft,W),Re=Q("y",Ft,W);at(ge,Re);var ze=[],Ue={},je=0,Ye=function(Pt){var rr=t[Pt.trace.type]?x(Pt):Pt.trace.index;if(!Ue[rr])je++,Ue[rr]=je,ze.push(Pt);else{var ir=Ue[rr]-1,tr=ze[ir];ir>0&&Math.abs(Pt.distance)<Math.abs(tr.distance)&&(ze[ir]=Pt)}},et;for(et=0;et<ye;et++)Ye(Ie[et]);for(et=Ie.length-1;et>ye-1;et--)Ye(Ie[et]);Ie=ze,Bt()}var ot=B._hoverdata,_t=[],Mt=U(B),St=O(B);for(Fe=0;Fe<Ie.length;Fe++){var Dt=Ie[Fe],Ot=y.makeEventData(Dt,Dt.trace,Dt.cd);if(Dt.hovertemplate!==!1){var Ht=!1;Dt.cd[Dt.index]&&Dt.cd[Dt.index].ht&&(Ht=Dt.cd[Dt.index].ht),Dt.hovertemplate=Ht||Dt.trace.hovertemplate||!1}if(Dt.xa&&Dt.ya){var er=Dt.x0+Dt.xa._offset,wt=Dt.x1+Dt.xa._offset,Et=Dt.y0+Dt.ya._offset,zt=Dt.y1+Dt.ya._offset,Ut=Math.min(er,wt),pt=Math.max(er,wt),Ct=Math.min(Et,zt),Lt=Math.max(Et,zt);Ot.bbox={x0:Ut+St,x1:pt+St,y0:Ct+Mt,y1:Lt+Mt}}Dt.eventData=[Ot],_t.push(Ot)}B._hoverdata=_t;var At=we==="y"&&(Ke.length>1||Ie.length>1)||we==="closest"&&pe&&Ie.length>1,Vt=s.combine(W.plot_bgcolor||s.background,W.paper_bgcolor),Qt=E(Ie,{gd:B,hovermode:we,rotateLabels:At,bgColor:Vt,container:W._hoverlayer,outerContainer:W._paper.node(),commonLabelOpts:W.hoverlabel,hoverdistance:W.hoverdistance});if(y.isUnifiedHover(we)||(S(Qt,At?"xa":"ya",W),C(Qt,At,W._invScaleX,W._invScaleY)),H&&H.tagName){var $t=v.getComponentMethod("annotations","hasClickToShow")(B,_t);e(R.select(H),$t?"pointer":"")}!H||X||!G(B,Y,ot)||(ot&&B.emit("plotly_unhover",{event:Y,points:ot}),B.emit("plotly_hover",{event:Y,points:B._hoverdata,xaxes:ce,yaxes:_e,xvals:Oe,yvals:We}))}function x(B){return[B.trace.index,B.index,B.x0,B.y0,B.name,B.attr,B.xa?B.xa._id:"",B.ya?B.ya._id:""].join(",")}var A=/<extra>([\s\S]*)<\/extra>/;function E(B,Y){var j=Y.gd,X=j._fullLayout,H=Y.hovermode,K=Y.rotateLabels,W=Y.bgColor,$=Y.container,re=Y.outerContainer,de=Y.commonLabelOpts||{};if(B.length===0)return[[]];var ve=Y.fontFamily||T.HOVERFONT,ue=Y.fontSize||T.HOVERFONTSIZE,ce=B[0],_e=ce.xa,fe=ce.ya,ne=H.charAt(0),ie=ce[ne+"Label"],me=Z(j,re),we=me.top,be=me.width,Me=me.height,Ie=ie!==void 0&&ce.distance<=Y.hoverdistance&&(H==="x"||H==="y");if(Ie){var Ke=!0,Oe,We;for(Oe=0;Oe<B.length;Oe++)if(Ke&&B[Oe].zLabel===void 0&&(Ke=!1),We=B[Oe].hoverinfo||B[Oe].trace.hoverinfo,We){var Fe=Array.isArray(We)?We:We.split("+");if(Fe.indexOf("all")===-1&&Fe.indexOf(H)===-1){Ie=!1;break}}Ke&&(Ie=!1)}var Ge=$.selectAll("g.axistext").data(Ie?[0]:[]);if(Ge.enter().append("g").classed("axistext",!0),Ge.exit().remove(),Ge.each(function(){var vt=R.select(this),Yt=D.ensureSingle(vt,"path","",function(zt){zt.style({"stroke-width":"1px"})}),Ft=D.ensureSingle(vt,"text","",function(zt){zt.attr("data-notex",1)}),ye=de.bgcolor||s.defaultLine,ge=de.bordercolor||s.contrast(ye),Re=s.contrast(ye),ze={family:de.font.family||ve,size:de.font.size||ue,color:de.font.color||Re};Yt.style({fill:ye,stroke:ge}),Ft.text(ie).call(u.font,ze).call(d.positionText,0,0).call(d.convertToTspans,j),vt.attr("transform","");var Ue=Z(j,Ft.node()),je,Ye;if(H==="x"){var et=_e.side==="top"?"-":"";Ft.attr("text-anchor","middle").call(d.positionText,0,_e.side==="top"?we-Ue.bottom-m-o:we-Ue.top+m+o),je=_e._offset+(ce.x0+ce.x1)/2,Ye=fe._offset+(_e.side==="top"?0:fe._length);var ot=Ue.width/2+o;je<ot?(je=ot,Yt.attr("d","M-"+(ot-m)+",0L-"+(ot-m*2)+","+et+m+"H"+(o+Ue.width/2)+"v"+et+(o*2+Ue.height)+"H-"+ot+"V"+et+m+"Z")):je>X.width-ot?(je=X.width-ot,Yt.attr("d","M"+(ot-m)+",0L"+ot+","+et+m+"v"+et+(o*2+Ue.height)+"H-"+ot+"V"+et+m+"H"+(ot-m*2)+"Z")):Yt.attr("d","M0,0L"+m+","+et+m+"H"+(o+Ue.width/2)+"v"+et+(o*2+Ue.height)+"H-"+(o+Ue.width/2)+"V"+et+m+"H-"+m+"Z")}else{var _t,Mt,St;fe.side==="right"?(_t="start",Mt=1,St="",je=_e._offset+_e._length):(_t="end",Mt=-1,St="-",je=_e._offset),Ye=fe._offset+(ce.y0+ce.y1)/2,Ft.attr("text-anchor",_t),Yt.attr("d","M0,0L"+St+m+","+m+"V"+(o+Ue.height/2)+"h"+St+(o*2+Ue.width)+"V-"+(o+Ue.height/2)+"H"+St+m+"V-"+m+"Z");var Dt=Ue.height/2,Ot=we-Ue.top-Dt,Ht="clip"+X._uid+"commonlabel"+fe._id,er;if(je<Ue.width+2*o+m){er="M-"+(m+o)+"-"+Dt+"h-"+(Ue.width-o)+"V"+Dt+"h"+(Ue.width-o)+"Z";var wt=Ue.width-je+o;d.positionText(Ft,wt,Ot),_t==="end"&&Ft.selectAll("tspan").each(function(){var zt=R.select(this),Ut=u.tester.append("text").text(zt.text()).call(u.font,ze),pt=Z(j,Ut.node());Math.round(pt.width)<Math.round(Ue.width)&&zt.attr("x",wt-pt.width),Ut.remove()})}else d.positionText(Ft,Mt*(o+m),Ot),er=null;var Et=X._topclips.selectAll("#"+Ht).data(er?[0]:[]);Et.enter().append("clipPath").attr("id",Ht).append("path"),Et.exit().remove(),Et.select("path").attr("d",er),u.setClipUrl(Ft,er?Ht:null,j)}vt.attr("transform",p(je,Ye))}),y.isUnifiedHover(H)){$.selectAll("g.hovertext").remove();var Xe=B.filter(function(vt){return vt.hoverinfo!=="none"});if(Xe.length===0)return;var ut=X.hoverlabel,rt=ut.font,dt={showlegend:!0,legend:{title:{text:ie,font:rt},font:rt,bgcolor:ut.bgcolor,bordercolor:ut.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:X.legend?X.legend.traceorder:void 0,orientation:"v"}},st={font:rt};_(dt,st,j._fullData);var Ve=st.legend;Ve.entries=[];for(var Je=0;Je<Xe.length;Je++){var ke=Xe[Je];if(ke.hoverinfo!=="none"){var Le=P(ke,!0,H,X,ie),Be=Le[0],pe=Le[1];ke.name=pe,pe!==""?ke.text=pe+" : "+Be:ke.text=Be;var Ae=ke.cd[ke.index];Ae&&(Ae.mc&&(ke.mc=Ae.mc),Ae.mcc&&(ke.mc=Ae.mcc),Ae.mlc&&(ke.mlc=Ae.mlc),Ae.mlcc&&(ke.mlc=Ae.mlcc),Ae.mlw&&(ke.mlw=Ae.mlw),Ae.mrc&&(ke.mrc=Ae.mrc),Ae.dir&&(ke.dir=Ae.dir)),ke._distinct=!0,Ve.entries.push([ke])}}Ve.entries.sort(function(vt,Yt){return vt[0].trace.index-Yt[0].trace.index}),Ve.layer=$,Ve._inHover=!0,Ve._groupTitleFont=ut.grouptitlefont,f(j,Ve);var Ce=$.select("g.legend"),Se=Z(j,Ce.node()),He=Se.width+2*o,Ne=Se.height+2*o,qe=Xe[0],at=(qe.x0+qe.x1)/2,nt=(qe.y0+qe.y1)/2,Ze=!(v.traceIs(qe.trace,"bar-like")||v.traceIs(qe.trace,"box-violin")),ht,kt;ne==="y"?Ze?(kt=nt-o,ht=nt+o):(kt=Math.min.apply(null,Xe.map(function(vt){return Math.min(vt.y0,vt.y1)})),ht=Math.max.apply(null,Xe.map(function(vt){return Math.max(vt.y0,vt.y1)}))):kt=ht=D.mean(Xe.map(function(vt){return(vt.y0+vt.y1)/2}))-Ne/2;var xt,Bt;ne==="x"?Ze?(xt=at+o,Bt=at-o):(xt=Math.max.apply(null,Xe.map(function(vt){return Math.max(vt.x0,vt.x1)})),Bt=Math.min.apply(null,Xe.map(function(vt){return Math.min(vt.x0,vt.x1)}))):xt=Bt=D.mean(Xe.map(function(vt){return(vt.x0+vt.x1)/2}))-He/2;var Zt=_e._offset,Gt=fe._offset;ht+=Gt,xt+=Zt,Bt+=Zt-He,kt+=Gt-Ne;var Rt,Wt;return xt+He<be&&xt>=0?Rt=xt:Bt+He<be&&Bt>=0?Rt=Bt:Zt+He<be?Rt=Zt:xt-at<at-Bt+He?Rt=be-He:Rt=0,Rt+=o,ht+Ne<Me&&ht>=0?Wt=ht:kt+Ne<Me&&kt>=0?Wt=kt:Gt+Ne<Me?Wt=Gt:ht-nt<nt-kt+Ne?Wt=Me-Ne:Wt=0,Wt+=o,Ce.attr("transform",p(Rt-1,Wt-1)),Ce}var It=$.selectAll("g.hovertext").data(B,function(vt){return x(vt)});return It.enter().append("g").classed("hovertext",!0).each(function(){var vt=R.select(this);vt.append("rect").call(s.fill,s.addOpacity(W,.8)),vt.append("text").classed("name",!0),vt.append("path").style("stroke-width","1px"),vt.append("text").classed("nums",!0).call(u.font,ve,ue)}),It.exit().remove(),It.each(function(vt){var Yt=R.select(this).attr("transform",""),Ft=vt.color;Array.isArray(Ft)&&(Ft=Ft[vt.eventData[0].pointNumber]);var ye=vt.bgcolor||Ft,ge=s.combine(s.opacity(ye)?ye:s.defaultLine,W),Re=s.combine(s.opacity(Ft)?Ft:s.defaultLine,W),ze=vt.borderColor||s.contrast(ge),Ue=P(vt,Ie,H,X,ie,Yt),je=Ue[0],Ye=Ue[1],et=Yt.select("text.nums").call(u.font,vt.fontFamily||ve,vt.fontSize||ue,vt.fontColor||ze).text(je).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,j),ot=Yt.select("text.name"),_t=0,Mt=0;if(Ye&&Ye!==je){ot.call(u.font,vt.fontFamily||ve,vt.fontSize||ue,Re).text(Ye).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,j);var St=Z(j,ot.node());_t=St.width+2*o,Mt=St.height+2*o}else ot.remove(),Yt.select("rect").remove();Yt.select("path").style({fill:ge,stroke:ze});var Dt=vt.xa._offset+(vt.x0+vt.x1)/2,Ot=vt.ya._offset+(vt.y0+vt.y1)/2,Ht=Math.abs(vt.x1-vt.x0),er=Math.abs(vt.y1-vt.y0),wt=Z(j,et.node()),Et=wt.width/X._invScaleX,zt=wt.height/X._invScaleY;vt.ty0=(we-wt.top)/X._invScaleY,vt.bx=Et+2*o,vt.by=Math.max(zt+2*o,Mt),vt.anchor="start",vt.txwidth=Et,vt.tx2width=_t,vt.offset=0;var Ut=(Et+m+o+_t)*X._invScaleX,pt,Ct;if(K)vt.pos=Dt,pt=Ot+er/2+Ut<=Me,Ct=Ot-er/2-Ut>=0,(vt.idealAlign==="top"||!pt)&&Ct?(Ot-=er/2,vt.anchor="end"):pt?(Ot+=er/2,vt.anchor="start"):vt.anchor="middle";else if(vt.pos=Ot,pt=Dt+Ht/2+Ut<=be,Ct=Dt-Ht/2-Ut>=0,(vt.idealAlign==="left"||!pt)&&Ct)Dt-=Ht/2,vt.anchor="end";else if(pt)Dt+=Ht/2,vt.anchor="start";else{vt.anchor="middle";var Lt=Ut/2,At=Dt+Lt-be,Vt=Dt-Lt;At>0&&(Dt-=At),Vt<0&&(Dt+=-Vt)}et.attr("text-anchor",vt.anchor),_t&&ot.attr("text-anchor",vt.anchor),Yt.attr("transform",p(Dt,Ot)+(K?w(g):""))}),It}function P(B,Y,j,X,H,K){var W="",$="";B.nameOverride!==void 0&&(B.name=B.nameOverride),B.name&&(B.trace._meta&&(B.name=D.templateString(B.name,B.trace._meta)),W=q(B.name,B.nameLength));var re=j.charAt(0),de=re==="x"?"y":"x";B.zLabel!==void 0?(B.xLabel!==void 0&&($+="x: "+B.xLabel+"<br>"),B.yLabel!==void 0&&($+="y: "+B.yLabel+"<br>"),B.trace.type!=="choropleth"&&B.trace.type!=="choroplethmapbox"&&($+=($?"z: ":"")+B.zLabel)):Y&&B[re+"Label"]===H?$=B[de+"Label"]||"":B.xLabel===void 0?B.yLabel!==void 0&&B.trace.type!=="scattercarpet"&&($=B.yLabel):B.yLabel===void 0?$=B.xLabel:$="("+B.xLabel+", "+B.yLabel+")",(B.text||B.text===0)&&!Array.isArray(B.text)&&($+=($?"<br>":"")+B.text),B.extraText!==void 0&&($+=($?"<br>":"")+B.extraText),K&&$===""&&!B.hovertemplate&&(W===""&&K.remove(),$=W);var ve=B.hovertemplate||!1;if(ve){var ue=B.hovertemplateLabels||B;B[re+"Label"]!==H&&(ue[re+"other"]=ue[re+"Val"],ue[re+"otherLabel"]=ue[re+"Label"]),$=D.hovertemplateString(ve,ue,X._d3locale,B.eventData[0]||{},B.trace._meta),$=$.replace(A,function(ce,_e){return W=q(_e,B.nameLength),""})}return[$,W]}function S(B,Y,j){var X=0,H=1,K=B.size(),W=new Array(K),$=0;B.each(function(Oe){var We=Oe[Y],Fe=We._id.charAt(0)==="x",Ge=We.range;$===0&&Ge&&Ge[0]>Ge[1]!==Fe&&(H=-1),W[$++]=[{datum:Oe,traceIndex:Oe.trace.index,dp:0,pos:Oe.pos,posref:Oe.posref,size:Oe.by*(Fe?a:1)/2,pmin:0,pmax:Fe?j.width:j.height}]}),W.sort(function(Oe,We){return Oe[0].posref-We[0].posref||H*(We[0].traceIndex-Oe[0].traceIndex)});var re,de,ve,ue,ce,_e,fe;function ne(Oe){var We=Oe[0],Fe=Oe[Oe.length-1];if(de=We.pmin-We.pos-We.dp+We.size,ve=Fe.pos+Fe.dp+Fe.size-We.pmax,de>.01){for(ce=Oe.length-1;ce>=0;ce--)Oe[ce].dp+=de;re=!1}if(!(ve<.01)){if(de<-.01){for(ce=Oe.length-1;ce>=0;ce--)Oe[ce].dp-=ve;re=!1}if(!!re){var Ge=0;for(ue=0;ue<Oe.length;ue++)_e=Oe[ue],_e.pos+_e.dp+_e.size>We.pmax&&Ge++;for(ue=Oe.length-1;ue>=0&&!(Ge<=0);ue--)_e=Oe[ue],_e.pos>We.pmax-1&&(_e.del=!0,Ge--);for(ue=0;ue<Oe.length&&!(Ge<=0);ue++)if(_e=Oe[ue],_e.pos<We.pmin+1)for(_e.del=!0,Ge--,ve=_e.size*2,ce=Oe.length-1;ce>=0;ce--)Oe[ce].dp-=ve;for(ue=Oe.length-1;ue>=0&&!(Ge<=0);ue--)_e=Oe[ue],_e.pos+_e.dp+_e.size>We.pmax&&(_e.del=!0,Ge--)}}}for(;!re&&X<=K;){for(X++,re=!0,ue=0;ue<W.length-1;){var ie=W[ue],me=W[ue+1],we=ie[ie.length-1],be=me[0];if(de=we.pos+we.dp+we.size-be.pos-be.dp+be.size,de>.01&&we.pmin===be.pmin&&we.pmax===be.pmax){for(ce=me.length-1;ce>=0;ce--)me[ce].dp+=de;for(ie.push.apply(ie,me),W.splice(ue+1,1),fe=0,ce=ie.length-1;ce>=0;ce--)fe+=ie[ce].dp;for(ve=fe/ie.length,ce=ie.length-1;ce>=0;ce--)ie[ce].dp-=ve;re=!1}else ue++}W.forEach(ne)}for(ue=W.length-1;ue>=0;ue--){var Me=W[ue];for(ce=Me.length-1;ce>=0;ce--){var Ie=Me[ce],Ke=Ie.datum;Ke.offset=Ie.dp,Ke.del=Ie.del}}}function C(B,Y,j,X){var H=function(W){return W*j},K=function(W){return W*X};B.each(function(W){var $=R.select(this);if(W.del)return $.remove();var re=$.select("text.nums"),de=W.anchor,ve=de==="end"?-1:1,ue={start:1,end:-1,middle:0}[de],ce=ue*(m+o),_e=ce+ue*(W.txwidth+o),fe=0,ne=W.offset,ie=de==="middle";ie&&(ce-=W.tx2width/2,_e+=W.txwidth/2+o),Y&&(ne*=-c,fe=W.offset*h),$.select("path").attr("d",ie?"M-"+H(W.bx/2+W.tx2width/2)+","+K(ne-W.by/2)+"h"+H(W.bx)+"v"+K(W.by)+"h-"+H(W.bx)+"Z":"M0,0L"+H(ve*m+fe)+","+K(m+ne)+"v"+K(W.by/2-m)+"h"+H(ve*W.bx)+"v-"+K(W.by)+"H"+H(ve*m+fe)+"V"+K(ne-m)+"Z");var me=fe+ce,we=ne+W.ty0-W.by/2+o,be=W.textAlign||"auto";be!=="auto"&&(be==="left"&&de!=="start"?(re.attr("text-anchor","start"),me=ie?-W.bx/2-W.tx2width/2+o:-W.bx-o):be==="right"&&de!=="end"&&(re.attr("text-anchor","end"),me=ie?W.bx/2-W.tx2width/2-o:W.bx+o)),re.call(d.positionText,H(me),K(we)),W.tx2width&&($.select("text.name").call(d.positionText,H(_e+ue*o+fe),K(ne+W.ty0-W.by/2+o)),$.select("rect").call(u.setRect,H(_e+(ue-1)*W.tx2width/2+fe),K(ne-W.by/2-1),H(W.tx2width),K(W.by+2)))})}function M(B,Y){var j=B.index,X=B.trace||{},H=B.cd[0],K=B.cd[j]||{};function W(ce){return ce||L(ce)&&ce===0}var $=Array.isArray(j)?function(ce,_e){var fe=D.castOption(H,j,ce);return W(fe)?fe:D.extractOption({},X,"",_e)}:function(ce,_e){return D.extractOption(K,X,ce,_e)};function re(ce,_e,fe){var ne=$(_e,fe);W(ne)&&(B[ce]=ne)}if(re("hoverinfo","hi","hoverinfo"),re("bgcolor","hbg","hoverlabel.bgcolor"),re("borderColor","hbc","hoverlabel.bordercolor"),re("fontFamily","htf","hoverlabel.font.family"),re("fontSize","hts","hoverlabel.font.size"),re("fontColor","htc","hoverlabel.font.color"),re("nameLength","hnl","hoverlabel.namelength"),re("textAlign","hta","hoverlabel.align"),B.posref=Y==="y"||Y==="closest"&&X.orientation==="h"?B.xa._offset+(B.x0+B.x1)/2:B.ya._offset+(B.y0+B.y1)/2,B.x0=D.constrain(B.x0,0,B.xa._length),B.x1=D.constrain(B.x1,0,B.xa._length),B.y0=D.constrain(B.y0,0,B.ya._length),B.y1=D.constrain(B.y1,0,B.ya._length),B.xLabelVal!==void 0&&(B.xLabel="xLabel"in B?B.xLabel:b.hoverLabelText(B.xa,B.xLabelVal,X.xhoverformat),B.xVal=B.xa.c2d(B.xLabelVal)),B.yLabelVal!==void 0&&(B.yLabel="yLabel"in B?B.yLabel:b.hoverLabelText(B.ya,B.yLabelVal,X.yhoverformat),B.yVal=B.ya.c2d(B.yLabelVal)),B.zLabelVal!==void 0&&B.zLabel===void 0&&(B.zLabel=String(B.zLabelVal)),!isNaN(B.xerr)&&!(B.xa.type==="log"&&B.xerr<=0)){var de=b.tickText(B.xa,B.xa.c2l(B.xerr),"hover").text;B.xerrneg!==void 0?B.xLabel+=" +"+de+" / -"+b.tickText(B.xa,B.xa.c2l(B.xerrneg),"hover").text:B.xLabel+=" \xB1 "+de,Y==="x"&&(B.distance+=1)}if(!isNaN(B.yerr)&&!(B.ya.type==="log"&&B.yerr<=0)){var ve=b.tickText(B.ya,B.ya.c2l(B.yerr),"hover").text;B.yerrneg!==void 0?B.yLabel+=" +"+ve+" / -"+b.tickText(B.ya,B.ya.c2l(B.yerrneg),"hover").text:B.yLabel+=" \xB1 "+ve,Y==="y"&&(B.distance+=1)}var ue=B.hoverinfo||B.trace.hoverinfo;return ue&&ue!=="all"&&(ue=Array.isArray(ue)?ue:ue.split("+"),ue.indexOf("x")===-1&&(B.xLabel=void 0),ue.indexOf("y")===-1&&(B.yLabel=void 0),ue.indexOf("z")===-1&&(B.zLabel=void 0),ue.indexOf("text")===-1&&(B.text=void 0),ue.indexOf("name")===-1&&(B.name=void 0)),B}function I(B,Y,j){var X=j.container,H=j.fullLayout,K=H._size,W=j.event,$=!!Y.hLinePoint,re=!!Y.vLinePoint,de,ve;if(X.selectAll(".spikeline").remove(),!!(re||$)){var ue=s.combine(H.plot_bgcolor,H.paper_bgcolor);if($){var ce=Y.hLinePoint,_e,fe;de=ce&&ce.xa,ve=ce&&ce.ya;var ne=ve.spikesnap;ne==="cursor"?(_e=W.pointerX,fe=W.pointerY):(_e=de._offset+ce.x,fe=ve._offset+ce.y);var ie=N.readability(ce.color,ue)<1.5?s.contrast(ue):ce.color,me=ve.spikemode,we=ve.spikethickness,be=ve.spikecolor||ie,Me=b.getPxPosition(B,ve),Ie,Ke;if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(Ie=Me,Ke=_e),me.indexOf("across")!==-1){var Oe=ve._counterDomainMin,We=ve._counterDomainMax;ve.anchor==="free"&&(Oe=Math.min(Oe,ve.position),We=Math.max(We,ve.position)),Ie=K.l+Oe*K.w,Ke=K.l+We*K.w}X.insert("line",":first-child").attr({x1:Ie,x2:Ke,y1:fe,y2:fe,"stroke-width":we,stroke:be,"stroke-dasharray":u.dashStyle(ve.spikedash,we)}).classed("spikeline",!0).classed("crisp",!0),X.insert("line",":first-child").attr({x1:Ie,x2:Ke,y1:fe,y2:fe,"stroke-width":we+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&X.insert("circle",":first-child").attr({cx:Me+(ve.side!=="right"?we:-we),cy:fe,r:we,fill:be}).classed("spikeline",!0)}if(re){var Fe=Y.vLinePoint,Ge,Xe;de=Fe&&Fe.xa,ve=Fe&&Fe.ya;var ut=de.spikesnap;ut==="cursor"?(Ge=W.pointerX,Xe=W.pointerY):(Ge=de._offset+Fe.x,Xe=ve._offset+Fe.y);var rt=N.readability(Fe.color,ue)<1.5?s.contrast(ue):Fe.color,dt=de.spikemode,st=de.spikethickness,Ve=de.spikecolor||rt,Je=b.getPxPosition(B,de),ke,Le;if(dt.indexOf("toaxis")!==-1||dt.indexOf("across")!==-1){if(dt.indexOf("toaxis")!==-1&&(ke=Je,Le=Xe),dt.indexOf("across")!==-1){var Be=de._counterDomainMin,pe=de._counterDomainMax;de.anchor==="free"&&(Be=Math.min(Be,de.position),pe=Math.max(pe,de.position)),ke=K.t+(1-pe)*K.h,Le=K.t+(1-Be)*K.h}X.insert("line",":first-child").attr({x1:Ge,x2:Ge,y1:ke,y2:Le,"stroke-width":st,stroke:Ve,"stroke-dasharray":u.dashStyle(de.spikedash,st)}).classed("spikeline",!0).classed("crisp",!0),X.insert("line",":first-child").attr({x1:Ge,x2:Ge,y1:ke,y2:Le,"stroke-width":st+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}dt.indexOf("marker")!==-1&&X.insert("circle",":first-child").attr({cx:Ge,cy:Je-(de.side!=="top"?st:-st),r:st,fill:Ve}).classed("spikeline",!0)}}}function G(B,Y,j){if(!j||j.length!==B._hoverdata.length)return!0;for(var X=j.length-1;X>=0;X--){var H=j[X],K=B._hoverdata[X];if(H.curveNumber!==K.curveNumber||String(H.pointNumber)!==String(K.pointNumber)||String(H.pointNumbers)!==String(K.pointNumbers))return!0}return!1}function V(B,Y){return!Y||Y.vLinePoint!==B._spikepoints.vLinePoint||Y.hLinePoint!==B._spikepoints.hLinePoint}function q(B,Y){return d.plainText(B||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function ee(B,Y){for(var j=Y.charAt(0),X=[],H=[],K=[],W=0;W<B.length;W++){var $=B[W];v.traceIs($.trace,"bar-like")||v.traceIs($.trace,"box-violin")?K.push($):$.trace[j+"period"]?H.push($):X.push($)}return X.concat(H).concat(K)}function Q(B,Y,j){var X=Y[B+"a"],H=Y[B+"Val"],K=Y.cd[0];if(X.type==="category")H=X._categoriesMap[H];else if(X.type==="date"){var W=Y.trace[B+"periodalignment"];if(W){var $=Y.cd[Y.index],re=$[B+"Start"];re===void 0&&(re=$[B]);var de=$[B+"End"];de===void 0&&(de=$[B]);var ve=de-re;W==="end"?H+=ve:W==="middle"&&(H+=ve/2)}H=X.d2c(H)}return K&&K.t&&K.t.posLetter===X._id&&(j.boxmode==="group"||j.violinmode==="group")&&(H+=K.t.dPos),H}function U(B){return B.offsetTop+B.clientTop}function O(B){return B.offsetLeft+B.clientLeft}function Z(B,Y){var j=B._fullLayout,X=Y.getBoundingClientRect(),H=X.x,K=X.y,W=H+X.width,$=K+X.height,re=D.apply3DTransform(j._invTransform)(H,K),de=D.apply3DTransform(j._invTransform)(W,$),ve=re[0],ue=re[1],ce=de[0],_e=de[1];return{x:ve,y:ue,width:ce-ve,height:_e-ue,top:Math.min(ue,_e),left:Math.min(ve,ce),right:Math.max(ve,ce),bottom:Math.max(ue,_e)}}},{"../../lib":252,"../../lib/events":244,"../../lib/override_cursor":263,"../../lib/svg_text_utils":277,"../../plots/cartesian/axes":301,"../../registry":352,"../color":119,"../dragelement":138,"../drawing":141,"../legend/defaults":171,"../legend/draw":172,"./constants":153,"./helpers":155,"@plotly/d3":16,"fast-isnumeric":31,tinycolor2:83}],157:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../color"),N=z("./helpers").isUnifiedHover;le.exports=function(p,w,k,d){d=d||{};var e=w.legend;function u(s){d.font[s]||(d.font[s]=e?w.legend.font[s]:w.font[s])}w&&N(w.hovermode)&&(d.font||(d.font={}),u("size"),u("family"),u("color"),e?(d.bgcolor||(d.bgcolor=L.combine(w.legend.bgcolor,w.paper_bgcolor)),d.bordercolor||(d.bordercolor=w.legend.bordercolor)):d.bgcolor||(d.bgcolor=w.paper_bgcolor)),k("hoverlabel.bgcolor",d.bgcolor),k("hoverlabel.bordercolor",d.bordercolor),k("hoverlabel.namelength",d.namelength),R.coerceFont(k,"hoverlabel.font",d.font),k("hoverlabel.align",d.align)}},{"../../lib":252,"../color":119,"./helpers":155}],158:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./layout_attributes");le.exports=function(D,p){function w(k,d){return p[k]!==void 0?p[k]:R.coerce(D,p,L,k,d)}return w("clickmode"),w("hovermode")}},{"../../lib":252,"./layout_attributes":160}],159:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../lib"),N=z("../dragelement"),D=z("./helpers"),p=z("./layout_attributes"),w=z("./hover");le.exports={moduleType:"component",name:"fx",constants:z("./constants"),schema:{layout:p},attributes:z("./attributes"),layoutAttributes:p,supplyLayoutGlobalDefaults:z("./layout_global_defaults"),supplyDefaults:z("./defaults"),supplyLayoutDefaults:z("./layout_defaults"),calc:z("./calc"),getDistanceFunction:D.getDistanceFunction,getClosest:D.getClosest,inbox:D.inbox,quadrature:D.quadrature,appendArrayPointValue:D.appendArrayPointValue,castHoverOption:d,castHoverinfo:e,hover:w.hover,unhover:N.unhover,loneHover:w.loneHover,loneUnhover:k,click:z("./click")};function k(u){var s=L.isD3Selection(u)?u:R.select(u);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function d(u,s,l){return L.castOption(u,s,"hoverlabel."+l)}function e(u,s,l){function b(v){return L.coerceHoverinfo({hoverinfo:v},{_module:u._module},s)}return L.castOption(u,l,"hoverinfo",b)}},{"../../lib":252,"../dragelement":138,"./attributes":150,"./calc":151,"./click":152,"./constants":153,"./defaults":154,"./helpers":155,"./hover":156,"./layout_attributes":160,"./layout_defaults":161,"./layout_global_defaults":162,"@plotly/d3":16}],160:[function(z,le,ae){"use strict";var R=z("./constants"),L=z("../../plots/font_attributes"),N=L({editType:"none"});N.family.dflt=R.HOVERFONT,N.size.dflt=R.HOVERFONTSIZE,le.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:N,grouptitlefont:L({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":332,"./constants":153}],161:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./layout_attributes"),N=z("./hovermode_defaults"),D=z("./hoverlabel_defaults");le.exports=function(w,k){function d(v,y){return R.coerce(w,k,L,v,y)}var e=N(w,k);e&&(d("hoverdistance"),d("spikedistance"));var u=d("dragmode");u==="select"&&d("selectdirection");var s=k._has("mapbox"),l=k._has("geo"),b=k._basePlotModules.length;k.dragmode==="zoom"&&((s||l)&&b===1||s&&l&&b===2)&&(k.dragmode="pan"),D(w,k,d),R.coerceFont(d,"hoverlabel.grouptitlefont",k.hoverlabel.font)}},{"../../lib":252,"./hoverlabel_defaults":157,"./hovermode_defaults":158,"./layout_attributes":160}],162:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./hoverlabel_defaults"),N=z("./layout_attributes");le.exports=function(p,w){function k(d,e){return R.coerce(p,w,N,d,e)}L(p,w,k)}},{"../../lib":252,"./hoverlabel_defaults":157,"./layout_attributes":160}],163:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../lib/regex").counter,N=z("../../plots/domain").attributes,D=z("../../plots/cartesian/constants").idRegex,p=z("../../plot_api/plot_template"),w={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[L("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[D.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[D.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:N({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function k(l,b,v){var y=b[v+"axes"],T=Object.keys((l._splomAxes||{})[v]||{});if(Array.isArray(y))return y;if(T.length)return T}function d(l,b){var v=l.grid||{},y=k(b,v,"x"),T=k(b,v,"y");if(!l.grid&&!y&&!T)return;var _=Array.isArray(v.subplots)&&Array.isArray(v.subplots[0]),f=Array.isArray(y),g=Array.isArray(T),n=f&&y!==v.xaxes&&g&&T!==v.yaxes,a,h;_?(a=v.subplots.length,h=v.subplots[0].length):(g&&(a=T.length),f&&(h=y.length));var c=p.newContainer(b,"grid");function m(C,M){return R.coerce(v,c,w,C,M)}var o=m("rows",a),t=m("columns",h);if(!(o*t>1)){delete b.grid;return}if(!_&&!f&&!g){var i=m("pattern")==="independent";i&&(_=!0)}c._hasSubplotGrid=_;var r=m("roworder"),x=r==="top to bottom",A=_?.2:.1,E=_?.3:.1,P,S;n&&b._splomGridDflt&&(P=b._splomGridDflt.xside,S=b._splomGridDflt.yside),c._domains={x:e("x",m,A,P,t),y:e("y",m,E,S,o,x)}}function e(l,b,v,y,T,_){var f=b(l+"gap",v),g=b("domain."+l);b(l+"side",y);for(var n=new Array(T),a=g[0],h=(g[1]-a)/(T-f),c=h*(1-f),m=0;m<T;m++){var o=a+h*m;n[_?T-1-m:m]=[o,o+c]}return n}function u(l,b){var v=b.grid;if(!(!v||!v._domains)){var y=l.grid||{},T=b._subplots,_=v._hasSubplotGrid,f=v.rows,g=v.columns,n=v.pattern==="independent",a,h,c,m,o,t,i,r=v._axisMap={};if(_){var x=y.subplots||[];t=v.subplots=new Array(f);var A=1;for(a=0;a<f;a++){var E=t[a]=new Array(g),P=x[a]||[];for(h=0;h<g;h++)if(n?(o=A===1?"xy":"x"+A+"y"+A,A++):o=P[h],E[h]="",T.cartesian.indexOf(o)!==-1){if(i=o.indexOf("y"),c=o.slice(0,i),m=o.slice(i),r[c]!==void 0&&r[c]!==h||r[m]!==void 0&&r[m]!==a)continue;E[h]=o,r[c]=h,r[m]=a}}}else{var S=k(b,y,"x"),C=k(b,y,"y");v.xaxes=s(S,T.xaxis,g,r,"x"),v.yaxes=s(C,T.yaxis,f,r,"y")}var M=v._anchors={},I=v.roworder==="top to bottom";for(var G in r){var V=G.charAt(0),q=v[V+"side"],ee,Q,U;if(q.length<8)M[G]="free";else if(V==="x"){if(q.charAt(0)==="t"===I?(ee=0,Q=1,U=f):(ee=f-1,Q=-1,U=-1),_){var O=r[G];for(a=ee;a!==U;a+=Q)if(o=t[a][O],!!o&&(i=o.indexOf("y"),o.slice(0,i)===G)){M[G]=o.slice(i);break}}else for(a=ee;a!==U;a+=Q)if(m=v.yaxes[a],T.cartesian.indexOf(G+m)!==-1){M[G]=m;break}}else if(q.charAt(0)==="l"?(ee=0,Q=1,U=g):(ee=g-1,Q=-1,U=-1),_){var Z=r[G];for(a=ee;a!==U;a+=Q)if(o=t[Z][a],!!o&&(i=o.indexOf("y"),o.slice(i)===G)){M[G]=o.slice(0,i);break}}else for(a=ee;a!==U;a+=Q)if(c=v.xaxes[a],T.cartesian.indexOf(c+G)!==-1){M[G]=c;break}}}}function s(l,b,v,y,T){var _=new Array(v),f;function g(n,a){b.indexOf(a)!==-1&&y[a]===void 0?(_[n]=a,y[a]=n):_[n]=""}if(Array.isArray(l))for(f=0;f<v;f++)g(f,l[f]);else for(g(0,T),f=1;f<v;f++)g(f,T+(f+1));return _}le.exports={moduleType:"component",name:"grid",schema:{layout:{grid:w}},layoutAttributes:w,sizeDefaults:d,contentDefaults:u}},{"../../lib":252,"../../lib/regex":268,"../../plot_api/plot_template":290,"../../plots/cartesian/constants":308,"../../plots/domain":331}],164:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/constants"),L=z("../../plot_api/plot_template").templatedArray,N=z("../../constants/axis_placeable_objects");le.exports=L("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",R.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",R.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":225,"../../plot_api/plot_template":290,"../../plots/cartesian/constants":308}],165:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib/to_log_range");le.exports=function(D,p,w,k){p=p||{};var d=w==="log"&&p.type==="linear",e=w==="linear"&&p.type==="log";if(!!(d||e)){for(var u=D._fullLayout.images,s=p._id.charAt(0),l,b,v=0;v<u.length;v++)if(l=u[v],b="images["+v+"].",l[s+"ref"]===p._id){var y=l[s],T=l["size"+s],_=null,f=null;if(d){_=L(y,p.range);var g=T/Math.pow(10,_)/2;f=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else _=Math.pow(10,y),f=_*(Math.pow(10,T/2)-Math.pow(10,-T/2));R(_)?R(f)||(f=null):(_=null,f=null),k(b+s,_),k(b+"size"+s,f)}}}},{"../../lib/to_log_range":279,"fast-isnumeric":31}],166:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("../../plots/array_container_defaults"),D=z("./attributes"),p="images";le.exports=function(d,e){var u={name:p,handleItemDefaults:w};N(d,e,u)};function w(k,d,e){function u(g,n){return R.coerce(k,d,D,g,n)}var s=u("source"),l=u("visible",!!s);if(!l)return d;u("layer"),u("xanchor"),u("yanchor"),u("sizex"),u("sizey"),u("sizing"),u("opacity");for(var b={_fullLayout:e},v=["x","y"],y=0;y<2;y++){var T=v[y],_=L.coerceRef(k,d,b,T,"paper",void 0);if(_!=="paper"){var f=L.getFromId(b,_);f._imgIndices.push(d._index)}L.coercePosition(d,b,u,_,T,0)}return d}},{"../../lib":252,"../../plots/array_container_defaults":296,"../../plots/cartesian/axes":301,"./attributes":164}],167:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../drawing"),N=z("../../plots/cartesian/axes"),D=z("../../plots/cartesian/axis_ids"),p=z("../../constants/xmlns_namespaces");le.exports=function(k){var d=k._fullLayout,e=[],u={},s=[],l,b;for(b=0;b<d.images.length;b++){var v=d.images[b];if(v.visible)if(v.layer==="below"&&v.xref!=="paper"&&v.yref!=="paper"){l=D.ref2id(v.xref)+D.ref2id(v.yref);var y=d._plots[l];if(!y){s.push(v);continue}y.mainplot&&(l=y.mainplot.id),u[l]||(u[l]=[]),u[l].push(v)}else v.layer==="above"?e.push(v):s.push(v)}var T={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function _(m){var o=R.select(this);if(this._imgSrc!==m.source)if(o.attr("xmlns",p.svg),m.source&&m.source.slice(0,5)==="data:")o.attr("xlink:href",m.source),this._imgSrc=m.source;else{var t=new Promise(function(i){var r=new Image;this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=x,r.onload=function(){var A=document.createElement("canvas");A.width=this.width,A.height=this.height;var E=A.getContext("2d");E.drawImage(this,0,0);var P=A.toDataURL("image/png");o.attr("xlink:href",P),i()},o.on("error",x),r.src=m.source,this._imgSrc=m.source;function x(){o.remove(),i()}}.bind(this));k._promises.push(t)}}function f(m){var o=R.select(this),t=N.getFromId(k,m.xref),i=N.getFromId(k,m.yref),r=N.getRefType(m.xref)==="domain",x=N.getRefType(m.yref)==="domain",A=d._size,E,P;t!==void 0?E=typeof m.xref=="string"&&r?t._length*m.sizex:Math.abs(t.l2p(m.sizex)-t.l2p(0)):E=m.sizex*A.w,i!==void 0?P=typeof m.yref=="string"&&x?i._length*m.sizey:Math.abs(i.l2p(m.sizey)-i.l2p(0)):P=m.sizey*A.h;var S=E*T.x[m.xanchor].offset,C=P*T.y[m.yanchor].offset,M=T.x[m.xanchor].sizing+T.y[m.yanchor].sizing,I,G;switch(t!==void 0?I=typeof m.xref=="string"&&r?t._length*m.x+t._offset:t.r2p(m.x)+t._offset:I=m.x*A.w+A.l,I+=S,i!==void 0?G=typeof m.yref=="string"&&x?i._length*(1-m.y)+i._offset:i.r2p(m.y)+i._offset:G=A.h-m.y*A.h+A.t,G+=C,m.sizing){case"fill":M+=" slice";break;case"stretch":M="none";break}o.attr({x:I,y:G,width:E,height:P,preserveAspectRatio:M,opacity:m.opacity});var V=t&&N.getRefType(m.xref)!=="domain"?t._id:"",q=i&&N.getRefType(m.yref)!=="domain"?i._id:"",ee=V+q;L.setClipUrl(o,ee?"clip"+d._uid+ee:null,k)}var g=d._imageLowerLayer.selectAll("image").data(s),n=d._imageUpperLayer.selectAll("image").data(e);g.enter().append("image"),n.enter().append("image"),g.exit().remove(),n.exit().remove(),g.each(function(m){_.bind(this)(m),f.bind(this)(m)}),n.each(function(m){_.bind(this)(m),f.bind(this)(m)});var a=Object.keys(d._plots);for(b=0;b<a.length;b++){l=a[b];var h=d._plots[l];if(!!h.imagelayer){var c=h.imagelayer.selectAll("image").data(u[l]||[]);c.enter().append("image"),c.exit().remove(),c.each(function(m){_.bind(this)(m),f.bind(this)(m)})}}}},{"../../constants/xmlns_namespaces":232,"../../plots/cartesian/axes":301,"../../plots/cartesian/axis_ids":305,"../drawing":141,"@plotly/d3":16}],168:[function(z,le,ae){"use strict";le.exports={moduleType:"component",name:"images",layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),includeBasePlot:z("../../plots/cartesian/include_components")("images"),draw:z("./draw"),convertCoords:z("./convert_coords")}},{"../../plots/cartesian/include_components":314,"./attributes":164,"./convert_coords":165,"./defaults":166,"./draw":167}],169:[function(z,le,ae){"use strict";var R=z("../../plots/font_attributes"),L=z("../color/attributes");le.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:L.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:R({editType:"legend"}),grouptitlefont:R({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:R({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":332,"../color/attributes":118}],170:[function(z,le,ae){"use strict";le.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],171:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("../../plot_api/plot_template"),D=z("../../plots/attributes"),p=z("./attributes"),w=z("../../plots/layout_attributes"),k=z("./helpers");le.exports=function(e,u,s){var l=e.legend||{},b=N.newContainer(u,"legend");function v(P,S){return L.coerce(l,b,p,P,S)}for(var y,T=function(P,S){var C=y._input,M=y;return L.coerce(C,M,D,P,S)},_=u.font||{},f=L.coerceFont(v,"grouptitlefont",L.extendFlat({},_,{size:Math.round(_.size*1.1)})),g=0,n=!1,a="normal",h=0;h<s.length;h++)y=s[h],y.visible&&((y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&y._module.attributes.showlegend.dflt===!1))&&(g++,y.showlegend&&(n=!0,(R.traceIs(y,"pie-like")||y._input.showlegend===!0)&&g++),L.coerceFont(T,"legendgrouptitle.font",f)),(R.traceIs(y,"bar")&&u.barmode==="stack"||["tonextx","tonexty"].indexOf(y.fill)!==-1)&&(a=k.isGrouped({traceorder:a})?"grouped+reversed":"reversed"),y.legendgroup!==void 0&&y.legendgroup!==""&&(a=k.isReversed({traceorder:a})?"reversed+grouped":"grouped"));var c=L.coerce(e,u,w,"showlegend",n&&g>1);if(c===!1&&(u.legend=void 0),!(c===!1&&!l.uirevision)&&(v("uirevision",u.uirevision),c!==!1)){v("bgcolor",u.paper_bgcolor),v("bordercolor"),v("borderwidth");var m=L.coerceFont(v,"font",u.font),o=v("orientation"),t=o==="h",i,r,x;t?(i=0,R.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(r=1.1,x="bottom"):(r=-.1,x="top")):(i=1.02,r=1,x="auto"),v("traceorder",a),k.isGrouped(u.legend)&&v("tracegroupgap"),v("itemsizing"),v("itemwidth"),v("itemclick"),v("itemdoubleclick"),v("groupclick"),v("x",i),v("xanchor"),v("y",r),v("yanchor",x),v("valign"),L.noneOrAll(l,b,["x","y"]);var A=v("title.text");if(A){v("title.side",t?"left":"top");var E=L.extendFlat({},m,{size:L.bigFont(m.size)});L.coerceFont(v,"title.font",E)}}}},{"../../lib":252,"../../plot_api/plot_template":290,"../../plots/attributes":297,"../../plots/layout_attributes":347,"../../registry":352,"./attributes":169,"./helpers":175}],172:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../lib"),N=z("../../plots/plots"),D=z("../../registry"),p=z("../../lib/events"),w=z("../dragelement"),k=z("../drawing"),d=z("../color"),e=z("../../lib/svg_text_utils"),u=z("./handle_click"),s=z("./constants"),l=z("../../constants/alignment"),b=l.LINE_SPACING,v=l.FROM_TL,y=l.FROM_BR,T=z("./get_legend_data"),_=z("./style"),f=z("./helpers"),g=1;le.exports=function(S,C){return C||(C=S._fullLayout.legend||{}),n(S,C)};function n(P,S){var C=P._fullLayout,M="legend"+C._uid,I,G=S._inHover;if(G?(I=S.layer,M+="-hover"):I=C._infolayer,!!I){P._legendMouseDownTime||(P._legendMouseDownTime=0);var V;if(G){if(!S.entries)return;V=T(S.entries,S)}else{if(!P.calcdata)return;V=C.showlegend&&T(P.calcdata,S)}var q=C.hiddenlabels||[];if(!G&&(!C.showlegend||!V.length))return I.selectAll(".legend").remove(),C._topdefs.select("#"+M).remove(),N.autoMargin(P,"legend");var ee=L.ensureSingle(I,"g","legend",function(H){G||H.attr("pointer-events","all")}),Q=L.ensureSingleById(C._topdefs,"clipPath",M,function(H){H.append("rect")}),U=L.ensureSingle(ee,"rect","bg",function(H){H.attr("shape-rendering","crispEdges")});U.call(d.stroke,S.bordercolor).call(d.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var O=L.ensureSingle(ee,"g","scrollbox"),Z=S.title;if(S._titleWidth=0,S._titleHeight=0,Z.text){var B=L.ensureSingle(O,"text","legendtitletext");B.attr("text-anchor","start").call(k.font,Z.font).text(Z.text),o(B,O,P,S,g)}else O.selectAll(".legendtitletext").remove();var Y=L.ensureSingle(ee,"rect","scrollbar",function(H){H.attr(s.scrollBarEnterAttrs).call(d.fill,s.scrollBarColor)}),j=O.selectAll("g.groups").data(V);j.enter().append("g").attr("class","groups"),j.exit().remove();var X=j.selectAll("g.traces").data(L.identity);X.enter().append("g").attr("class","traces"),X.exit().remove(),X.style("opacity",function(H){var K=H[0].trace;return D.traceIs(K,"pie-like")?q.indexOf(H[0].label)!==-1?.5:1:K.visible==="legendonly"?.5:1}).each(function(){R.select(this).call(h,P,S)}).call(_,P,S).each(function(){G||R.select(this).call(m,P)}),L.syncOrAsync([N.previousPromises,function(){return r(P,j,X,S)},function(){var H=C._size,K=S.borderwidth;if(!G){var W=x(P);if(W)return;var $=H.l+H.w*S.x-v[A(S)]*S._width,re=H.t+H.h*(1-S.y)-v[E(S)]*S._effHeight;if(C.margin.autoexpand){var de=$,ve=re;$=L.constrain($,0,C.width-S._width),re=L.constrain(re,0,C.height-S._effHeight),$!==de&&L.log("Constrain legend.x to make legend fit inside graph"),re!==ve&&L.log("Constrain legend.y to make legend fit inside graph")}k.setTranslate(ee,$,re)}if(Y.on(".drag",null),ee.on("wheel",null),G||S._height<=S._maxHeight||P._context.staticPlot){var ue=S._effHeight;G&&(ue=S._height),U.attr({width:S._width-K,height:ue-K,x:K/2,y:K/2}),k.setTranslate(O,0,0),Q.select("rect").attr({width:S._width-2*K,height:ue-2*K,x:K,y:K}),k.setClipUrl(O,M,P),k.setRect(Y,0,0,0,0),delete S._scrollY}else{var ce=Math.max(s.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),_e=S._effHeight-ce-2*s.scrollBarMargin,fe=S._height-S._effHeight,ne=_e/fe,ie=Math.min(S._scrollY||0,fe);U.attr({width:S._width-2*K+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-K,x:K/2,y:K/2}),Q.select("rect").attr({width:S._width-2*K+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-2*K,x:K,y:K+ie}),k.setClipUrl(O,M,P),We(ie,ce,ne),ee.on("wheel",function(){ie=L.constrain(S._scrollY+R.event.deltaY/_e*fe,0,fe),We(ie,ce,ne),ie!==0&&ie!==fe&&R.event.preventDefault()});var me,we,be,Me=function(rt,dt,st){var Ve=(st-dt)/ne+rt;return L.constrain(Ve,0,fe)},Ie=function(rt,dt,st){var Ve=(dt-st)/ne+rt;return L.constrain(Ve,0,fe)},Ke=R.behavior.drag().on("dragstart",function(){var rt=R.event.sourceEvent;rt.type==="touchstart"?me=rt.changedTouches[0].clientY:me=rt.clientY,be=ie}).on("drag",function(){var rt=R.event.sourceEvent;rt.buttons===2||rt.ctrlKey||(rt.type==="touchmove"?we=rt.changedTouches[0].clientY:we=rt.clientY,ie=Me(be,me,we),We(ie,ce,ne))});Y.call(Ke);var Oe=R.behavior.drag().on("dragstart",function(){var rt=R.event.sourceEvent;rt.type==="touchstart"&&(me=rt.changedTouches[0].clientY,be=ie)}).on("drag",function(){var rt=R.event.sourceEvent;rt.type==="touchmove"&&(we=rt.changedTouches[0].clientY,ie=Ie(be,me,we),We(ie,ce,ne))});O.call(Oe)}function We(rt,dt,st){S._scrollY=P._fullLayout.legend._scrollY=rt,k.setTranslate(O,0,-rt),k.setRect(Y,S._width,s.scrollBarMargin+rt*st,s.scrollBarWidth,dt),Q.select("rect").attr("y",K+rt)}if(P._context.edits.legendPosition){var Fe,Ge,Xe,ut;ee.classed("cursor-move",!0),w.init({element:ee.node(),gd:P,prepFn:function(){var rt=k.getTranslate(ee);Xe=rt.x,ut=rt.y},moveFn:function(rt,dt){var st=Xe+rt,Ve=ut+dt;k.setTranslate(ee,st,Ve),Fe=w.align(st,0,H.l,H.l+H.w,S.xanchor),Ge=w.align(Ve,0,H.t+H.h,H.t,S.yanchor)},doneFn:function(){Fe!==void 0&&Ge!==void 0&&D.call("_guiRelayout",P,{"legend.x":Fe,"legend.y":Ge})},clickFn:function(rt,dt){var st=I.selectAll("g.traces").filter(function(){var Ve=this.getBoundingClientRect();return dt.clientX>=Ve.left&&dt.clientX<=Ve.right&&dt.clientY>=Ve.top&&dt.clientY<=Ve.bottom});st.size()>0&&a(P,ee,st,rt,dt)}})}}],P)}}function a(P,S,C,M,I){var G=C.data()[0][0].trace,V={event:I,node:C.node(),curveNumber:G.index,expandedIndex:G._expandedIndex,data:P.data,layout:P.layout,frames:P._transitionData._frames,config:P._context,fullData:P._fullData,fullLayout:P._fullLayout};G._group&&(V.group=G._group),D.traceIs(G,"pie-like")&&(V.label=C.datum()[0].label);var q=p.triggerHandler(P,"plotly_legendclick",V);if(q!==!1){if(M===1)S._clickTimeout=setTimeout(function(){!P._fullLayout||u(C,P,M)},P._context.doubleClickDelay);else if(M===2){S._clickTimeout&&clearTimeout(S._clickTimeout),P._legendMouseDownTime=0;var ee=p.triggerHandler(P,"plotly_legenddoubleclick",V);ee!==!1&&u(C,P,M)}}}function h(P,S,C){var M=P.data()[0][0],I=M.trace,G=D.traceIs(I,"pie-like"),V=!C._inHover&&S._context.edits.legendText&&!G,q=C._maxNameLength,ee,Q;M.groupTitle?(ee=M.groupTitle.text,Q=M.groupTitle.font):(Q=C.font,C.entries?ee=M.text:(ee=G?M.label:I.name,I._meta&&(ee=L.templateString(ee,I._meta))));var U=L.ensureSingle(P,"text","legendtext");U.attr("text-anchor","start").call(k.font,Q).text(V?c(ee,q):ee);var O=C.itemwidth+s.itemGap*2;e.positionText(U,O,0),V?U.call(e.makeEditable,{gd:S,text:ee}).call(o,P,S,C).on("edit",function(Z){this.text(c(Z,q)).call(o,P,S,C);var B=M.trace._fullInput||{},Y={};if(D.hasTransform(B,"groupby")){var j=D.getTransformIndices(B,"groupby"),X=j[j.length-1],H=L.keyedContainer(B,"transforms["+X+"].styles","target","value.name");H.set(M.trace._group,Z),Y=H.constructUpdate()}else Y.name=Z;return D.call("_guiRestyle",S,Y,I.index)}):o(U,P,S,C)}function c(P,S){var C=Math.max(4,S);if(P&&P.trim().length>=C/2)return P;P=P||"";for(var M=C-P.length;M>0;M--)P+=" ";return P}function m(P,S){var C=S._context.doubleClickDelay,M,I=1,G=L.ensureSingle(P,"rect","legendtoggle",function(V){S._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(d.fill,"rgba(0,0,0,0)")});S._context.staticPlot||(G.on("mousedown",function(){M=new Date().getTime(),M-S._legendMouseDownTime<C?I+=1:(I=1,S._legendMouseDownTime=M)}),G.on("mouseup",function(){if(!(S._dragged||S._editing)){var V=S._fullLayout.legend;new Date().getTime()-S._legendMouseDownTime>C&&(I=Math.max(I-1,1)),a(S,V,P,I,R.event)}}))}function o(P,S,C,M,I){M._inHover&&P.attr("data-notex",!0),e.convertToTspans(P,C,function(){t(S,C,M,I)})}function t(P,S,C,M){var I=P.data()[0][0];if(!C._inHover&&I&&!I.trace.showlegend){P.remove();return}var G=P.select("g[class*=math-group]"),V=G.node();C||(C=S._fullLayout.legend);var q=C.borderwidth,ee;M===g?ee=C.title.font:I.groupTitle?ee=I.groupTitle.font:ee=C.font;var Q=ee.size*b,U,O;if(V){var Z=k.bBox(V);U=Z.height,O=Z.width,M===g?k.setTranslate(G,q,q+U*.75):k.setTranslate(G,0,U*.25)}else{var B=P.select(M===g?".legendtitletext":".legendtext"),Y=e.lineCount(B),j=B.node();if(U=Q*Y,O=j?k.bBox(j).width:0,M===g)C.title.side==="left"&&(O+=s.itemGap*2),e.positionText(B,q+s.titlePad,q+Q);else{var X=s.itemGap*2+C.itemwidth;I.groupTitle&&(X=s.itemGap,O-=C.itemwidth),e.positionText(B,X,-Q*((Y-1)/2-.3))}}M===g?(C._titleWidth=O,C._titleHeight=U):(I.lineHeight=Q,I.height=Math.max(U,16)+3,I.width=O)}function i(P){var S=0,C=0,M=P.title.side;return M&&(M.indexOf("left")!==-1&&(S=P._titleWidth),M.indexOf("top")!==-1&&(C=P._titleHeight)),[S,C]}function r(P,S,C,M){var I=P._fullLayout;M||(M=I.legend);var G=I._size,V=f.isVertical(M),q=f.isGrouped(M),ee=M.borderwidth,Q=2*ee,U=s.itemGap,O=M.itemwidth+U*2,Z=2*(ee+U),B=E(M),Y=M.y<0||M.y===0&&B==="top",j=M.y>1||M.y===1&&B==="bottom",X=M.tracegroupgap;M._maxHeight=Math.max(Y||j?I.height/2:G.h,30);var H=0;M._width=0,M._height=0;var K=i(M);if(V)C.each(function(Fe){var Ge=Fe[0].height;k.setTranslate(this,ee+K[0],ee+K[1]+M._height+Ge/2+U),M._height+=Ge,M._width=Math.max(M._width,Fe[0].width)}),H=O+M._width,M._width+=U+O+Q,M._height+=Z,q&&(S.each(function(Fe,Ge){k.setTranslate(this,0,Ge*M.tracegroupgap)}),M._height+=(M._lgroupsLength-1)*M.tracegroupgap);else{var W=A(M),$=M.x<0||M.x===0&&W==="right",re=M.x>1||M.x===1&&W==="left",de=j||Y,ve=I.width/2;M._maxWidth=Math.max($?de&&W==="left"?G.l+G.w:ve:re?de&&W==="right"?G.r+G.w:ve:G.w,2*O);var ue=0,ce=0;C.each(function(Fe){var Ge=Fe[0].width+O;ue=Math.max(ue,Ge),ce+=Ge}),H=null;var _e=0;if(q){var fe=0,ne=0,ie=0;S.each(function(){var Fe=0,Ge=0;R.select(this).selectAll("g.traces").each(function(ut){var rt=ut[0].width,dt=ut[0].height;k.setTranslate(this,K[0],K[1]+ee+U+dt/2+Ge),Ge+=dt,Fe=Math.max(Fe,O+rt)});var Xe=Fe+U;ne>0&&Xe+ee+ne>M._maxWidth?(_e=Math.max(_e,ne),ne=0,ie+=fe+X,fe=Ge):fe=Math.max(fe,Ge),k.setTranslate(this,ne,ie),ne+=Xe}),M._width=Math.max(_e,ne)+ee,M._height=ie+fe+Z}else{var me=C.size(),we=ce+Q+(me-1)*U<M._maxWidth,be=0,Me=0,Ie=0,Ke=0;C.each(function(Fe){var Ge=Fe[0].height,Xe=O+Fe[0].width,ut=(we?Xe:ue)+U;ut+ee+Me-U>=M._maxWidth&&(_e=Math.max(_e,Ke),Me=0,Ie+=be,M._height+=be,be=0),k.setTranslate(this,K[0]+ee+Me,K[1]+ee+Ie+Ge/2+U),Ke=Me+Xe+U,Me+=ut,be=Math.max(be,Ge)}),we?(M._width=Me+Q,M._height=be+Z):(M._width=Math.max(_e,Ke)+Q,M._height+=be+Z)}}M._width=Math.ceil(Math.max(M._width+K[0],M._titleWidth+2*(ee+s.titlePad))),M._height=Math.ceil(Math.max(M._height+K[1],M._titleHeight+2*(ee+s.itemGap))),M._effHeight=Math.min(M._height,M._maxHeight);var Oe=P._context.edits,We=Oe.legendText||Oe.legendPosition;C.each(function(Fe){var Ge=R.select(this).select(".legendtoggle"),Xe=Fe[0].height,ut=We?O:H||O+Fe[0].width;V||(ut+=U/2),k.setRect(Ge,0,-Xe/2,ut,Xe)})}function x(P){var S=P._fullLayout,C=S.legend,M=A(C),I=E(C);return N.autoMargin(P,"legend",{x:C.x,y:C.y,l:C._width*v[M],r:C._width*y[M],b:C._effHeight*y[I],t:C._effHeight*v[I]})}function A(P){return L.isRightAnchor(P)?"right":L.isCenterAnchor(P)?"center":"left"}function E(P){return L.isBottomAnchor(P)?"bottom":L.isMiddleAnchor(P)?"middle":"top"}},{"../../constants/alignment":224,"../../lib":252,"../../lib/events":244,"../../lib/svg_text_utils":277,"../../plots/plots":349,"../../registry":352,"../color":119,"../dragelement":138,"../drawing":141,"./constants":170,"./get_legend_data":173,"./handle_click":174,"./helpers":175,"./style":177,"@plotly/d3":16}],173:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("./helpers");le.exports=function(D,p){var w=p._inHover,k=L.isGrouped(p),d=L.isReversed(p),e={},u=[],s=!1,l={},b=0,v=0,y,T;function _(C,M){if(C===""||!L.isGrouped(p)){var I="~~i"+b;u.push(I),e[I]=[M],b++}else u.indexOf(C)===-1?(u.push(C),s=!0,e[C]=[M]):e[C].push(M)}for(y=0;y<D.length;y++){var f=D[y],g=f[0],n=g.trace,a=n.legendgroup;if(!(!w&&(!n.visible||!n.showlegend)))if(R.traceIs(n,"pie-like"))for(l[a]||(l[a]={}),T=0;T<f.length;T++){var h=f[T].label;l[a][h]||(_(a,{label:h,color:f[T].color,i:f[T].i,trace:n,pts:f[T].pts}),l[a][h]=!0,v=Math.max(v,(h||"").length))}else _(a,g),v=Math.max(v,(n.name||"").length)}if(!u.length)return[];var c=!s||!k,m=[];for(y=0;y<u.length;y++){var o=e[u[y]];c?m.push(o[0]):m.push(o)}for(c&&(m=[m]),y=0;y<m.length;y++){var t=1/0;for(T=0;T<m[y].length;T++){var i=m[y][T].trace.legendrank;t>i&&(t=i)}m[y][0]._groupMinRank=t,m[y][0]._preGroupSort=y}var r=function(C,M){return C[0]._groupMinRank-M[0]._groupMinRank||C[0]._preGroupSort-M[0]._preGroupSort},x=function(C,M){return C.trace.legendrank-M.trace.legendrank||C._preSort-M._preSort};for(m.forEach(function(C,M){C[0]._preGroupSort=M}),m.sort(r),y=0;y<m.length;y++){m[y].forEach(function(C,M){C._preSort=M}),m[y].sort(x);var A=m[y][0].trace,E=null;for(T=0;T<m[y].length;T++){var P=m[y][T].trace.legendgrouptitle;if(P&&P.text){E=P,w&&(P.font=p._groupTitleFont);break}}if(d&&m[y].reverse(),E){var S=!1;for(T=0;T<m[y].length;T++)if(R.traceIs(m[y][T].trace,"pie-like")){S=!0;break}m[y].unshift({i:-1,groupTitle:E,noClick:S,trace:{showlegend:A.showlegend,legendgroup:A.legendgroup,visible:p.groupclick==="toggleitem"?!0:A.visible}})}for(T=0;T<m[y].length;T++)m[y][T]=[m[y][T]]}return p._lgroupsLength=m.length,p._maxNameLength=v,m}},{"../../registry":352,"./helpers":175}],174:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry"),N=!0;le.exports=function(p,w,k){var d=w._fullLayout;if(w._dragged||w._editing)return;var e=d.legend.itemclick,u=d.legend.itemdoubleclick,s=d.legend.groupclick;k===1&&e==="toggle"&&u==="toggleothers"&&N&&w.data&&w._context.showTips&&R.notifier(R._(w,"Double-click on legend to isolate one trace"),"long"),N=!1;var l;if(k===1?l=e:k===2&&(l=u),!l)return;var b=s==="togglegroup",v=d.hiddenlabels?d.hiddenlabels.slice():[],y=p.data()[0][0];if(y.groupTitle&&y.noClick)return;var T=w._fullData,_=y.trace,f=_.legendgroup,g,n,a,h,c,m,o={},t=[],i=[],r=[];function x(Z,B,Y){var j=t.indexOf(Z),X=o[B];return X||(X=o[B]=[]),t.indexOf(Z)===-1&&(t.push(Z),j=t.length-1),X[j]=Y,j}function A(Z,B){if(!(y.groupTitle&&!b)){var Y=Z._fullInput;if(L.hasTransform(Y,"groupby")){var j=i[Y.index];if(!j){var X=L.getTransformIndices(Y,"groupby"),H=X[X.length-1];j=R.keyedContainer(Y,"transforms["+H+"].styles","target","value.visible"),i[Y.index]=j}var K=j.get(Z._group);K===void 0&&(K=!0),K!==!1&&j.set(Z._group,B),r[Y.index]=x(Y.index,"visible",Y.visible!==!1)}else{var W=Y.visible===!1?!1:B;x(Y.index,"visible",W)}}}if(L.traceIs(_,"pie-like")){var E=y.label,P=v.indexOf(E);l==="toggle"?P===-1?v.push(E):v.splice(P,1):l==="toggleothers"&&(v=[],w.calcdata[0].forEach(function(Z){E!==Z.label&&v.push(Z.label)}),w._fullLayout.hiddenlabels&&w._fullLayout.hiddenlabels.length===v.length&&P===-1&&(v=[])),L.call("_guiRelayout",w,"hiddenlabels",v)}else{var S=f&&f.length,C=[],M;if(S)for(g=0;g<T.length;g++)M=T[g],!!M.visible&&M.legendgroup===f&&C.push(g);if(l==="toggle"){var I;switch(_.visible){case!0:I="legendonly";break;case!1:I=!1;break;case"legendonly":I=!0;break}if(S)if(b)for(g=0;g<T.length;g++)T[g].visible!==!1&&T[g].legendgroup===f&&A(T[g],I);else A(_,I);else A(_,I)}else if(l==="toggleothers"){var G,V,q,ee,Q=!0;for(g=0;g<T.length;g++)if(G=T[g]===_,q=T[g].showlegend!==!0,!(G||q)&&(V=S&&T[g].legendgroup===f,!V&&T[g].visible===!0&&!L.traceIs(T[g],"notLegendIsolatable"))){Q=!1;break}for(g=0;g<T.length;g++)if(T[g].visible!==!1&&!L.traceIs(T[g],"notLegendIsolatable"))switch(_.visible){case"legendonly":A(T[g],!0);break;case!0:ee=Q?!0:"legendonly",G=T[g]===_,q=T[g].showlegend!==!0&&!T[g].legendgroup,V=G||S&&T[g].legendgroup===f,A(T[g],V||q?!0:ee);break}}for(g=0;g<i.length;g++)if(a=i[g],!!a){var U=a.constructUpdate(),O=Object.keys(U);for(n=0;n<O.length;n++)h=O[n],m=o[h]=o[h]||[],m[r[g]]=U[h]}for(c=Object.keys(o),g=0;g<c.length;g++)for(h=c[g],n=0;n<t.length;n++)o[h].hasOwnProperty(n)||(o[h][n]=void 0);L.call("_guiRestyle",w,o,t)}}},{"../../lib":252,"../../registry":352}],175:[function(z,le,ae){"use strict";ae.isGrouped=function(L){return(L.traceorder||"").indexOf("grouped")!==-1},ae.isVertical=function(L){return L.orientation!=="h"},ae.isReversed=function(L){return(L.traceorder||"").indexOf("reversed")!==-1}},{}],176:[function(z,le,ae){"use strict";le.exports={moduleType:"component",name:"legend",layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),draw:z("./draw"),style:z("./style")}},{"./attributes":169,"./defaults":171,"./draw":172,"./style":177}],177:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../lib"),D=N.strTranslate,p=z("../drawing"),w=z("../color"),k=z("../colorscale/helpers").extractOpts,d=z("../../traces/scatter/subtypes"),e=z("../../traces/pie/style_one"),u=z("../../traces/pie/helpers").castOption,s=z("./constants"),l=12,b=5,v=2,y=10,T=5;le.exports=function(a,h,c){var m=h._fullLayout;c||(c=m.legend);var o=c.itemsizing==="constant",t=c.itemwidth,i=(t+s.itemGap*2)/2,r=D(i,0),x=function(O,Z,B,Y){var j;if(O+1)j=O;else if(Z&&Z.width>0)j=Z.width;else return 0;return o?Y:Math.min(j,B)};a.each(function(O){var Z=R.select(this),B=N.ensureSingle(Z,"g","layers");B.style("opacity",O[0].trace.opacity);var Y=c.valign,j=O[0].lineHeight,X=O[0].height;if(Y==="middle"||!j||!X)B.attr("transform",null);else{var H={top:1,bottom:-1}[Y],K=H*(.5*(j-X+3));B.attr("transform",D(0,K))}var W=B.selectAll("g.legendfill").data([O]);W.enter().append("g").classed("legendfill",!0);var $=B.selectAll("g.legendlines").data([O]);$.enter().append("g").classed("legendlines",!0);var re=B.selectAll("g.legendsymbols").data([O]);re.enter().append("g").classed("legendsymbols",!0),re.selectAll("g.legendpoints").data([O]).enter().append("g").classed("legendpoints",!0)}).each(U).each(P).each(C).each(S).each(I).each(ee).each(q).each(A).each(E).each(G).each(V);function A(O){var Z=f(O),B=Z.showFill,Y=Z.showLine,j=Z.showGradientLine,X=Z.showGradientFill,H=Z.anyFill,K=Z.anyLine,W=O[0],$=W.trace,re,de,ve=k($),ue=ve.colorscale,ce=ve.reversescale,_e=function(Me){if(Me.size())if(B)p.fillGroupStyle(Me,h);else{var Ie="legendfill-"+$.uid;p.gradient(Me,h,Ie,_(ce),ue,"fill")}},fe=function(Me){if(Me.size()){var Ie="legendline-"+$.uid;p.lineGroupStyle(Me),p.gradient(Me,h,Ie,_(ce),ue,"stroke")}},ne=d.hasMarkers($)||!H?"M5,0":K?"M5,-2":"M5,-3",ie=R.select(this),me=ie.select(".legendfill").selectAll("path").data(B||X?[O]:[]);if(me.enter().append("path").classed("js-fill",!0),me.exit().remove(),me.attr("d",ne+"h"+t+"v6h-"+t+"z").call(_e),Y||j){var we=x(void 0,$.line,y,b);de=N.minExtend($,{line:{width:we}}),re=[N.minExtend(W,{trace:de})]}var be=ie.select(".legendlines").selectAll("path").data(Y||j?[re]:[]);be.enter().append("path").classed("js-line",!0),be.exit().remove(),be.attr("d",ne+(j?"l"+t+",0.0001":"h"+t)).call(Y?p.lineGroupStyle:fe)}function E(O){var Z=f(O),B=Z.anyFill,Y=Z.anyLine,j=Z.showLine,X=Z.showMarker,H=O[0],K=H.trace,W=!X&&!Y&&!B&&d.hasText(K),$,re;function de(me,we,be,Me){var Ie=N.nestedProperty(K,me).get(),Ke=N.isArrayOrTypedArray(Ie)&&we?we(Ie):Ie;if(o&&Ke&&Me!==void 0&&(Ke=Me),be){if(Ke<be[0])return be[0];if(Ke>be[1])return be[1]}return Ke}function ve(me){return H._distinct&&H.index&&me[H.index]?me[H.index]:me[0]}if(X||W||j){var ue={},ce={};if(X){ue.mc=de("marker.color",ve),ue.mx=de("marker.symbol",ve),ue.mo=de("marker.opacity",N.mean,[.2,1]),ue.mlc=de("marker.line.color",ve),ue.mlw=de("marker.line.width",N.mean,[0,5],v),ce.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var _e=de("marker.size",N.mean,[2,16],l);ue.ms=_e,ce.marker.size=_e}j&&(ce.line={width:de("line.width",ve,[0,10],b)}),W&&(ue.tx="Aa",ue.tp=de("textposition",ve),ue.ts=10,ue.tc=de("textfont.color",ve),ue.tf=de("textfont.family",ve)),$=[N.minExtend(H,ue)],re=N.minExtend(K,ce),re.selectedpoints=null,re.texttemplate=null}var fe=R.select(this).select("g.legendpoints"),ne=fe.selectAll("path.scatterpts").data(X?$:[]);ne.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",r),ne.exit().remove(),ne.call(p.pointStyle,re,h),X&&($[0].mrc=3);var ie=fe.selectAll("g.pointtext").data(W?$:[]);ie.enter().append("g").classed("pointtext",!0).append("text").attr("transform",r),ie.exit().remove(),ie.selectAll("text").call(p.textPointStyle,re,h)}function P(O){var Z=O[0].trace,B=Z.type==="waterfall";if(O[0]._distinct&&B){var Y=O[0].trace[O[0].dir].marker;return O[0].mc=Y.color,O[0].mlw=Y.line.width,O[0].mlc=Y.line.color,M(O,this,"waterfall")}var j=[];Z.visible&&B&&(j=O[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var X=R.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(j);X.enter().append("path").classed("legendwaterfall",!0).attr("transform",r).style("stroke-miterlimit",1),X.exit().remove(),X.each(function(H){var K=R.select(this),W=Z[H[0]].marker,$=x(void 0,W.line,T,v);K.attr("d",H[1]).style("stroke-width",$+"px").call(w.fill,W.color),$&&K.call(w.stroke,W.line.color)})}function S(O){M(O,this)}function C(O){M(O,this,"funnel")}function M(O,Z,B){var Y=O[0].trace,j=Y.marker||{},X=j.line||{},H=B?Y.visible&&Y.type===B:L.traceIs(Y,"bar"),K=R.select(Z).select("g.legendpoints").selectAll("path.legend"+B).data(H?[O]:[]);K.enter().append("path").classed("legend"+B,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",r),K.exit().remove(),K.each(function(W){var $=R.select(this),re=W[0],de=x(re.mlw,j.line,T,v);$.style("stroke-width",de+"px");var ve=re.mcc;if(!c._inHover&&"mc"in re){var ue=k(j),ce=ue.mid;ce===void 0&&(ce=(ue.max+ue.min)/2),ve=p.tryColorscale(j,"")(ce)}var _e=ve||re.mc||j.color,fe=j.pattern,ne=fe&&p.getPatternAttr(fe.shape,0,"");if(ne){var ie=p.getPatternAttr(fe.bgcolor,0,null),me=p.getPatternAttr(fe.fgcolor,0,null),we=fe.fgopacity,be=g(fe.size,8,10),Me=g(fe.solidity,.5,1),Ie="legend-"+Y.uid;$.call(p.pattern,"legend",h,Ie,ne,be,Me,ve,fe.fillmode,ie,me,we)}else $.call(w.fill,_e);de&&w.stroke($,re.mlc||X.color)})}function I(O){var Z=O[0].trace,B=R.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Z.visible&&L.traceIs(Z,"box-violin")?[O]:[]);B.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",r),B.exit().remove(),B.each(function(){var Y=R.select(this);if((Z.boxpoints==="all"||Z.points==="all")&&w.opacity(Z.fillcolor)===0&&w.opacity((Z.line||{}).color)===0){var j=N.minExtend(Z,{marker:{size:o?l:N.constrain(Z.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});B.call(p.pointStyle,j,h)}else{var X=x(void 0,Z.line,T,v);Y.style("stroke-width",X+"px").call(w.fill,Z.fillcolor),X&&w.stroke(Y,Z.line.color)}})}function G(O){var Z=O[0].trace,B=R.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Z.visible&&Z.type==="candlestick"?[O,O]:[]);B.enter().append("path").classed("legendcandle",!0).attr("d",function(Y,j){return j?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",r).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(Y,j){var X=R.select(this),H=Z[j?"increasing":"decreasing"],K=x(void 0,H.line,T,v);X.style("stroke-width",K+"px").call(w.fill,H.fillcolor),K&&w.stroke(X,H.line.color)})}function V(O){var Z=O[0].trace,B=R.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Z.visible&&Z.type==="ohlc"?[O,O]:[]);B.enter().append("path").classed("legendohlc",!0).attr("d",function(Y,j){return j?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",r).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(Y,j){var X=R.select(this),H=Z[j?"increasing":"decreasing"],K=x(void 0,H.line,T,v);X.style("fill","none").call(p.dashLine,H.line.dash,K),K&&w.stroke(X,H.line.color)})}function q(O){Q(O,this,"pie")}function ee(O){Q(O,this,"funnelarea")}function Q(O,Z,B){var Y=O[0],j=Y.trace,X=B?j.visible&&j.type===B:L.traceIs(j,B),H=R.select(Z).select("g.legendpoints").selectAll("path.legend"+B).data(X?[O]:[]);if(H.enter().append("path").classed("legend"+B,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",r),H.exit().remove(),H.size()){var K=(j.marker||{}).line,W=x(u(K.width,Y.pts),K,T,v),$=N.minExtend(j,{marker:{line:{width:W}}});$.marker.line.color=K.color;var re=N.minExtend(Y,{trace:$});e(H,re,$)}}function U(O){var Z=O[0].trace,B,Y=[];if(Z.visible)switch(Z.type){case"histogram2d":case"heatmap":Y=[["M-15,-2V4H15V-2Z"]],B=!0;break;case"choropleth":case"choroplethmapbox":Y=[["M-6,-6V6H6V-6Z"]],B=!0;break;case"densitymapbox":Y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],B="radial";break;case"cone":Y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],B=!1;break;case"streamtube":Y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],B=!1;break;case"surface":Y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],B=!0;break;case"mesh3d":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],B=!1;break;case"volume":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],B=!0;break;case"isosurface":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],B=!1;break}var j=R.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Y);j.enter().append("path").classed("legend3dandfriends",!0).attr("transform",r).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(X,H){var K=R.select(this),W=k(Z),$=W.colorscale,re=W.reversescale,de=function(_e){if(_e.size()){var fe="legendfill-"+Z.uid;p.gradient(_e,h,fe,_(re,B==="radial"),$,"fill")}},ve;if($){if(!B){var ce=$.length;ve=H===0?$[re?ce-1:0][1]:H===1?$[re?0:ce-1][1]:$[Math.floor((ce-1)/2)][1]}}else{var ue=Z.vertexcolor||Z.facecolor||Z.color;ve=N.isArrayOrTypedArray(ue)?ue[H]||ue[0]:ue}K.attr("d",X[0]),ve?K.call(w.fill,ve):K.call(de)})}};function _(n,a){var h=a?"radial":"horizontal";return h+(n?"":"reversed")}function f(n){var a=n[0].trace,h=a.contours,c=d.hasLines(a),m=d.hasMarkers(a),o=a.visible&&a.fill&&a.fill!=="none",t=!1,i=!1;if(h){var r=h.coloring;r==="lines"?t=!0:c=r==="none"||r==="heatmap"||h.showlines,h.type==="constraint"?o=h._operation!=="=":(r==="fill"||r==="heatmap")&&(i=!0)}return{showMarker:m,showLine:c,showFill:o,showGradientLine:t,showGradientFill:i,anyLine:c||t,anyFill:o||i}}function g(n,a,h){return n&&N.isArrayOrTypedArray(n)?a:n>h?h:n}},{"../../lib":252,"../../registry":352,"../../traces/pie/helpers":378,"../../traces/pie/style_one":379,"../../traces/scatter/subtypes":406,"../color":119,"../colorscale/helpers":130,"../drawing":141,"./constants":170,"@plotly/d3":16}],178:[function(z,le,ae){"use strict";var R=z("./constants");le.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":180}],179:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../plots/plots"),N=z("../../plots/cartesian/axis_ids"),D=z("../../fonts/ploticon"),p=z("../shapes/draw").eraseActiveShape,w=z("../../lib"),k=w._,d=le.exports={};d.toImage={name:"toImage",title:function(n){var a=n._context.toImageButtonOptions||{},h=a.format||"png";return h==="png"?k(n,"Download plot as a png"):k(n,"Download plot")},icon:D.camera,click:function(n){var a=n._context.toImageButtonOptions,h={format:a.format||"png"};w.notifier(k(n,"Taking snapshot - this may take a few seconds"),"long"),h.format!=="svg"&&w.isIE()&&(w.notifier(k(n,"IE only supports svg.  Changing format to svg."),"long"),h.format="svg"),["filename","width","height","scale"].forEach(function(c){c in a&&(h[c]=a[c])}),R.call("downloadImage",n,h).then(function(c){w.notifier(k(n,"Snapshot succeeded")+" - "+c,"long")}).catch(function(){w.notifier(k(n,"Sorry, there was a problem downloading your snapshot!"),"long")})}},d.sendDataToCloud={name:"sendDataToCloud",title:function(n){return k(n,"Edit in Chart Studio")},icon:D.disk,click:function(n){L.sendDataToCloud(n)}},d.editInChartStudio={name:"editInChartStudio",title:function(n){return k(n,"Edit in Chart Studio")},icon:D.pencil,click:function(n){L.sendDataToCloud(n)}},d.zoom2d={name:"zoom2d",_cat:"zoom",title:function(n){return k(n,"Zoom")},attr:"dragmode",val:"zoom",icon:D.zoombox,click:e},d.pan2d={name:"pan2d",_cat:"pan",title:function(n){return k(n,"Pan")},attr:"dragmode",val:"pan",icon:D.pan,click:e},d.select2d={name:"select2d",_cat:"select",title:function(n){return k(n,"Box Select")},attr:"dragmode",val:"select",icon:D.selectbox,click:e},d.lasso2d={name:"lasso2d",_cat:"lasso",title:function(n){return k(n,"Lasso Select")},attr:"dragmode",val:"lasso",icon:D.lasso,click:e},d.drawclosedpath={name:"drawclosedpath",title:function(n){return k(n,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:D.drawclosedpath,click:e},d.drawopenpath={name:"drawopenpath",title:function(n){return k(n,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:D.drawopenpath,click:e},d.drawline={name:"drawline",title:function(n){return k(n,"Draw line")},attr:"dragmode",val:"drawline",icon:D.drawline,click:e},d.drawrect={name:"drawrect",title:function(n){return k(n,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:D.drawrect,click:e},d.drawcircle={name:"drawcircle",title:function(n){return k(n,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:D.drawcircle,click:e},d.eraseshape={name:"eraseshape",title:function(n){return k(n,"Erase active shape")},icon:D.eraseshape,click:p},d.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(n){return k(n,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:e},d.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(n){return k(n,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:e},d.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(n){return k(n,"Autoscale")},attr:"zoom",val:"auto",icon:D.autoscale,click:e},d.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(n){return k(n,"Reset axes")},attr:"zoom",val:"reset",icon:D.home,click:e},d.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(n){return k(n,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:D.tooltip_basic,gravity:"ne",click:e},d.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(n){return k(n,"Compare data on hover")},attr:"hovermode",val:function(n){return n._fullLayout._isHoriz?"y":"x"},icon:D.tooltip_compare,gravity:"ne",click:e};function e(n,a){var h=a.currentTarget,c=h.getAttribute("data-attr"),m=h.getAttribute("data-val")||!0,o=n._fullLayout,t={},i=N.list(n,null,!0),r=o._cartesianSpikesEnabled,x,A;if(c==="zoom"){var E=m==="in"?.5:2,P=(1+E)/2,S=(1-E)/2,C;for(A=0;A<i.length;A++)if(x=i[A],!x.fixedrange)if(C=x._name,m==="auto")t[C+".autorange"]=!0;else if(m==="reset"){if(x._rangeInitial===void 0)t[C+".autorange"]=!0;else{var M=x._rangeInitial.slice();t[C+".range[0]"]=M[0],t[C+".range[1]"]=M[1]}x._showSpikeInitial!==void 0&&(t[C+".showspikes"]=x._showSpikeInitial,r==="on"&&!x._showSpikeInitial&&(r="off"))}else{var I=[x.r2l(x.range[0]),x.r2l(x.range[1])],G=[P*I[0]+S*I[1],P*I[1]+S*I[0]];t[C+".range[0]"]=x.l2r(G[0]),t[C+".range[1]"]=x.l2r(G[1])}}else c==="hovermode"&&(m==="x"||m==="y")&&(m=o._isHoriz?"y":"x",h.setAttribute("data-val",m)),t[c]=m;o._cartesianSpikesEnabled=r,R.call("_guiRelayout",n,t)}d.zoom3d={name:"zoom3d",_cat:"zoom",title:function(n){return k(n,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:D.zoombox,click:u},d.pan3d={name:"pan3d",_cat:"pan",title:function(n){return k(n,"Pan")},attr:"scene.dragmode",val:"pan",icon:D.pan,click:u},d.orbitRotation={name:"orbitRotation",title:function(n){return k(n,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:D["3d_rotate"],click:u},d.tableRotation={name:"tableRotation",title:function(n){return k(n,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:D["z-axis"],click:u};function u(n,a){for(var h=a.currentTarget,c=h.getAttribute("data-attr"),m=h.getAttribute("data-val")||!0,o=n._fullLayout._subplots.gl3d||[],t={},i=c.split("."),r=0;r<o.length;r++)t[o[r]+"."+i[1]]=m;var x=m==="pan"?m:"zoom";t.dragmode=x,R.call("_guiRelayout",n,t)}d.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(n){return k(n,"Reset camera to default")},attr:"resetDefault",icon:D.home,click:s},d.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(n){return k(n,"Reset camera to last save")},attr:"resetLastSave",icon:D.movie,click:s};function s(n,a){for(var h=a.currentTarget,c=h.getAttribute("data-attr"),m=c==="resetLastSave",o=c==="resetDefault",t=n._fullLayout,i=t._subplots.gl3d||[],r={},x=0;x<i.length;x++){var A=i[x],E=A+".camera",P=A+".aspectratio",S=A+".aspectmode",C=t[A]._scene,M;m?(r[E+".up"]=C.viewInitial.up,r[E+".eye"]=C.viewInitial.eye,r[E+".center"]=C.viewInitial.center,M=!0):o&&(r[E+".up"]=null,r[E+".eye"]=null,r[E+".center"]=null,M=!0),M&&(r[P+".x"]=C.viewInitial.aspectratio.x,r[P+".y"]=C.viewInitial.aspectratio.y,r[P+".z"]=C.viewInitial.aspectratio.z,r[S]=C.viewInitial.aspectmode)}R.call("_guiRelayout",n,r)}d.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(n){return k(n,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:b};function l(n,a){var h=a.currentTarget,c=h._previousVal,m=n._fullLayout,o=m._subplots.gl3d||[],t=["xaxis","yaxis","zaxis"],i={},r={};if(c)r=c,h._previousVal=null;else{for(var x=0;x<o.length;x++){var A=o[x],E=m[A],P=A+".hovermode";i[P]=E.hovermode,r[P]=!1;for(var S=0;S<3;S++){var C=t[S],M=A+"."+C+".showspikes";r[M]=!1,i[M]=E[C].showspikes}}h._previousVal=i}return r}function b(n,a){var h=l(n,a);R.call("_guiRelayout",n,h)}d.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(n){return k(n,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:v},d.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(n){return k(n,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:v},d.resetGeo={name:"resetGeo",_cat:"reset",title:function(n){return k(n,"Reset")},attr:"reset",val:null,icon:D.autoscale,click:v},d.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(n){return k(n,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:T};function v(n,a){for(var h=a.currentTarget,c=h.getAttribute("data-attr"),m=h.getAttribute("data-val")||!0,o=n._fullLayout,t=o._subplots.geo||[],i=0;i<t.length;i++){var r=t[i],x=o[r];if(c==="zoom"){var A=x.projection.scale,E=m==="in"?2*A:.5*A;R.call("_guiRelayout",n,r+".projection.scale",E)}}c==="reset"&&g(n,"geo")}d.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(n){return k(n,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:T},d.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(n){return k(n,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:D.tooltip_basic,gravity:"ne",click:T};function y(n){var a=n._fullLayout;return a.hovermode?!1:a._has("cartesian")?a._isHoriz?"y":"x":"closest"}function T(n){var a=y(n);R.call("_guiRelayout",n,"hovermode",a)}d.resetViewSankey={name:"resetSankeyGroup",title:function(n){return k(n,"Reset view")},icon:D.home,click:function(n){for(var a={"node.groups":[],"node.x":[],"node.y":[]},h=0;h<n._fullData.length;h++){var c=n._fullData[h]._viewInitial;a["node.groups"].push(c.node.groups.slice()),a["node.x"].push(c.node.x.slice()),a["node.y"].push(c.node.y.slice())}R.call("restyle",n,a)}},d.toggleHover={name:"toggleHover",title:function(n){return k(n,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:function(n,a){var h=l(n,a);h.hovermode=y(n),R.call("_guiRelayout",n,h)}},d.resetViews={name:"resetViews",title:function(n){return k(n,"Reset views")},icon:D.home,click:function(n,a){var h=a.currentTarget;h.setAttribute("data-attr","zoom"),h.setAttribute("data-val","reset"),e(n,a),h.setAttribute("data-attr","resetLastSave"),s(n,a),g(n,"geo"),g(n,"mapbox")}},d.toggleSpikelines={name:"toggleSpikelines",title:function(n){return k(n,"Toggle Spike Lines")},icon:D.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(n){var a=n._fullLayout,h=a._cartesianSpikesEnabled;a._cartesianSpikesEnabled=h==="on"?"off":"on",R.call("_guiRelayout",n,_(n))}};function _(n){for(var a=n._fullLayout,h=a._cartesianSpikesEnabled==="on",c=N.list(n,null,!0),m={},o=0;o<c.length;o++){var t=c[o];m[t._name+".showspikes"]=h?!0:t._showSpikeInitial}return m}d.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(n){return k(n,"Reset view")},attr:"reset",icon:D.home,click:function(n){g(n,"mapbox")}},d.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(n){return k(n,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:f},d.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(n){return k(n,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:f};function f(n,a){for(var h=a.currentTarget,c=h.getAttribute("data-val"),m=n._fullLayout,o=m._subplots.mapbox||[],t=1.05,i={},r=0;r<o.length;r++){var x=o[r],A=m[x].zoom,E=c==="in"?t*A:A/t;i[x+".zoom"]=E}R.call("_guiRelayout",n,i)}function g(n,a){for(var h=n._fullLayout,c=h._subplots[a]||[],m={},o=0;o<c.length;o++)for(var t=c[o],i=h[t]._subplot,r=i.viewInitial,x=Object.keys(r),A=0;A<x.length;A++){var E=x[A];m[t+"."+E]=r[E]}R.call("_guiRelayout",n,m)}},{"../../fonts/ploticon":234,"../../lib":252,"../../plots/cartesian/axis_ids":305,"../../plots/plots":349,"../../registry":352,"../shapes/draw":203}],180:[function(z,le,ae){"use strict";var R=z("./buttons"),L=Object.keys(R),N=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],D=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(N),p=[],w=function(k){if(D.indexOf(k._cat||k.name)===-1){var d=k.name,e=(k._cat||k.name).toLowerCase();p.indexOf(d)===-1&&p.push(d),p.indexOf(e)===-1&&p.push(e)}};L.forEach(function(k){w(R[k])}),p.sort(),le.exports={DRAW_MODES:N,backButtons:D,foreButtons:p}},{"./buttons":179}],181:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../color"),N=z("../../plot_api/plot_template"),D=z("./attributes");le.exports=function(w,k){var d=w.modebar||{},e=N.newContainer(k,"modebar");function u(l,b){return R.coerce(d,e,D,l,b)}u("orientation"),u("bgcolor",L.addOpacity(k.paper_bgcolor,.5));var s=L.contrast(L.rgb(k.modebar.bgcolor));u("color",L.addOpacity(s,.3)),u("activecolor",L.addOpacity(s,.7)),u("uirevision",k.uirevision),u("add"),u("remove")}},{"../../lib":252,"../../plot_api/plot_template":290,"../color":119,"./attributes":178}],182:[function(z,le,ae){"use strict";le.exports={moduleType:"component",name:"modebar",layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),manage:z("./manage")}},{"./attributes":178,"./defaults":181,"./manage":183}],183:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/axis_ids"),L=z("../../traces/scatter/subtypes"),N=z("../../registry"),D=z("../fx/helpers").isUnifiedHover,p=z("./modebar"),w=z("./buttons"),k=z("./constants").DRAW_MODES;le.exports=function(y){var T=y._fullLayout,_=y._context,f=T._modeBar;if(!_.displayModeBar&&!_.watermark){f&&(f.destroy(),delete T._modeBar);return}if(!Array.isArray(_.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(_.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var g=_.modeBarButtons,n;Array.isArray(g)&&g.length?n=b(g):!_.displayModeBar&&_.watermark?n=[]:n=d(y),f?f.update(y,n):T._modeBar=p(y,n)};function d(v){var y=v._fullLayout,T=v._fullData,_=v._context;function f(X,H){if(typeof H=="string"){if(H.toLowerCase()===X.toLowerCase())return!0}else{var K=H.name,W=H._cat||H.name;if(K===X||W===X.toLowerCase())return!0}return!1}var g=y.modebar.add;typeof g=="string"&&(g=[g]);var n=y.modebar.remove;typeof n=="string"&&(n=[n]);var a=_.modeBarButtonsToAdd.concat(g.filter(function(X){for(var H=0;H<_.modeBarButtonsToRemove.length;H++)if(f(X,_.modeBarButtonsToRemove[H]))return!1;return!0})),h=_.modeBarButtonsToRemove.concat(n.filter(function(X){for(var H=0;H<_.modeBarButtonsToAdd.length;H++)if(f(X,_.modeBarButtonsToAdd[H]))return!1;return!0})),c=y._has("cartesian"),m=y._has("gl3d"),o=y._has("geo"),t=y._has("pie"),i=y._has("funnelarea"),r=y._has("gl2d"),x=y._has("ternary"),A=y._has("mapbox"),E=y._has("polar"),P=y._has("smith"),S=y._has("sankey"),C=e(y),M=D(y.hovermode),I=[];function G(X){if(!!X.length){for(var H=[],K=0;K<X.length;K++){for(var W=X[K],$=w[W],re=$.name.toLowerCase(),de=($._cat||$.name).toLowerCase(),ve=!1,ue=0;ue<h.length;ue++){var ce=h[ue].toLowerCase();if(ce===re||ce===de){ve=!0;break}}ve||H.push(w[W])}I.push(H)}}var V=["toImage"];_.showEditInChartStudio?V.push("editInChartStudio"):_.showSendToCloud&&V.push("sendDataToCloud"),G(V);var q=[],ee=[],Q=[],U=[];(c||r||t||i||x)+o+m+A+E+P>1?(ee=["toggleHover"],Q=["resetViews"]):o?(q=["zoomInGeo","zoomOutGeo"],ee=["hoverClosestGeo"],Q=["resetGeo"]):m?(ee=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):A?(q=["zoomInMapbox","zoomOutMapbox"],ee=["toggleHover"],Q=["resetViewMapbox"]):r?ee=["hoverClosestGl2d"]:t?ee=["hoverClosestPie"]:S?(ee=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):ee=["toggleHover"],c&&(ee=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(s(T)||M)&&(ee=[]),(c||r)&&!C&&(q=["zoomIn2d","zoomOut2d","autoScale2d"],Q[0]!=="resetViews"&&(Q=["resetScale2d"])),m?U=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||r)&&!C||x?U=["zoom2d","pan2d"]:A||o?U=["pan2d"]:E&&(U=["zoom2d"]),u(T)&&U.push("select2d","lasso2d");var O=[],Z=function(X){O.indexOf(X)===-1&&ee.indexOf(X)!==-1&&O.push(X)};if(Array.isArray(a)){for(var B=[],Y=0;Y<a.length;Y++){var j=a[Y];typeof j=="string"?(j=j.toLowerCase(),k.indexOf(j)!==-1?(y._has("mapbox")||y._has("cartesian"))&&U.push(j):j==="togglespikelines"?Z("toggleSpikelines"):j==="togglehover"?Z("toggleHover"):j==="hovercompare"?Z("hoverCompareCartesian"):j==="hoverclosest"?(Z("hoverClosestCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie")):j==="v1hovermode"&&(Z("toggleHover"),Z("hoverClosestCartesian"),Z("hoverCompareCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie"))):B.push(j)}a=B}return G(U),G(q.concat(Q)),G(O),l(I,a)}function e(v){for(var y=R.list({_fullLayout:v},null,!0),T=0;T<y.length;T++)if(!y[T].fixedrange)return!1;return!0}function u(v){for(var y=!1,T=0;T<v.length&&!y;T++){var _=v[T];!_._module||!_._module.selectPoints||(N.traceIs(_,"scatter-like")?(L.hasMarkers(_)||L.hasText(_))&&(y=!0):N.traceIs(_,"box-violin")?(_.boxpoints==="all"||_.points==="all")&&(y=!0):y=!0)}return y}function s(v){for(var y=0;y<v.length;y++)if(!N.traceIs(v[y],"noHover"))return!1;return!0}function l(v,y){if(y.length)if(Array.isArray(y[0]))for(var T=0;T<y.length;T++)v.push(y[T]);else v.push(y);return v}function b(v){for(var y=0;y<v.length;y++)for(var T=v[y],_=0;_<T.length;_++){var f=T[_];if(typeof f=="string")if(w[f]!==void 0)v[y][_]=w[f];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return v}},{"../../plots/cartesian/axis_ids":305,"../../registry":352,"../../traces/scatter/subtypes":406,"../fx/helpers":155,"./buttons":179,"./constants":180,"./modebar":184}],184:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("../../lib"),D=z("../../fonts/ploticon"),p=z("../../version").version,w=new DOMParser;function k(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var d=k.prototype;d.update=function(s,l){this.graphInfo=s;var b=this.graphInfo._context,v=this.graphInfo._fullLayout,y="modebar-"+v._uid;this.element.setAttribute("id",y),this._uid=y,this.element.className="modebar",b.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),v.modebar.orientation==="v"&&(this.element.className+=" vertical",l=l.reverse());var T=v.modebar,_=b.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";N.deleteRelatedStyleRule(y),N.addRelatedStyleRule(y,_+"#"+y+" .modebar-group","background-color: "+T.bgcolor),N.addRelatedStyleRule(y,"#"+y+" .modebar-btn .icon path","fill: "+T.color),N.addRelatedStyleRule(y,"#"+y+" .modebar-btn:hover .icon path","fill: "+T.activecolor),N.addRelatedStyleRule(y,"#"+y+" .modebar-btn.active .icon path","fill: "+T.activecolor);var f=!this.hasButtons(l),g=this.hasLogo!==b.displaylogo,n=this.locale!==b.locale;if(this.locale=b.locale,(f||g||n)&&(this.removeAllButtons(),this.updateButtons(l),b.watermark||b.displaylogo)){var a=this.getLogo();b.watermark&&(a.className=a.className+" watermark"),v.modebar.orientation==="v"?this.element.insertBefore(a,this.element.childNodes[0]):this.element.appendChild(a),this.hasLogo=!0}this.updateActiveButton()},d.updateButtons=function(s){var l=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(b){var v=l.createGroup();b.forEach(function(y){var T=y.name;if(!T)throw new Error("must provide button 'name' in button config");if(l.buttonsNames.indexOf(T)!==-1)throw new Error("button name '"+T+"' is taken");l.buttonsNames.push(T);var _=l.createButton(y);l.buttonElements.push(_),v.appendChild(_)}),l.element.appendChild(v)})},d.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},d.createButton=function(s){var l=this,b=document.createElement("a");b.setAttribute("rel","tooltip"),b.className="modebar-btn";var v=s.title;v===void 0?v=s.name:typeof v=="function"&&(v=v(this.graphInfo)),(v||v===0)&&b.setAttribute("data-title",v),s.attr!==void 0&&b.setAttribute("data-attr",s.attr);var y=s.val;y!==void 0&&(typeof y=="function"&&(y=y(this.graphInfo)),b.setAttribute("data-val",y));var T=s.click;if(typeof T!="function")throw new Error("must provide button 'click' function in button config");b.addEventListener("click",function(f){s.click(l.graphInfo,f),l.updateActiveButton(f.currentTarget)}),b.setAttribute("data-toggle",s.toggle||!1),s.toggle&&R.select(b).classed("active",!0);var _=s.icon;return typeof _=="function"?b.appendChild(_()):b.appendChild(this.createIcon(_||D.question)),b.setAttribute("data-gravity",s.gravity||"n"),b},d.createIcon=function(s){var l=L(s.height)?Number(s.height):s.ascent-s.descent,b="http://www.w3.org/2000/svg",v;if(s.path){v=document.createElementNS(b,"svg"),v.setAttribute("viewBox",[0,0,s.width,l].join(" ")),v.setAttribute("class","icon");var y=document.createElementNS(b,"path");y.setAttribute("d",s.path),s.transform?y.setAttribute("transform",s.transform):s.ascent!==void 0&&y.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),v.appendChild(y)}if(s.svg){var T=w.parseFromString(s.svg,"application/xml");v=T.childNodes[0]}return v.setAttribute("height","1em"),v.setAttribute("width","1em"),v},d.updateActiveButton=function(s){var l=this.graphInfo._fullLayout,b=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(v){var y=v.getAttribute("data-val")||!0,T=v.getAttribute("data-attr"),_=v.getAttribute("data-toggle")==="true",f=R.select(v);if(_)T===b&&f.classed("active",!f.classed("active"));else{var g=T===null?T:N.nestedProperty(l,T).get();f.classed("active",g===y)}})},d.hasButtons=function(s){var l=this.buttons;if(!l||s.length!==l.length)return!1;for(var b=0;b<s.length;++b){if(s[b].length!==l[b].length)return!1;for(var v=0;v<s[b].length;v++)if(s[b][v].name!==l[b][v].name)return!1}return!0};function e(s){return s+" (v"+p+")"}d.getLogo=function(){var s=this.createGroup(),l=document.createElement("a");return l.href="https://plotly.com/",l.target="_blank",l.setAttribute("data-title",e(N._(this.graphInfo,"Produced with Plotly.js"))),l.className="modebar-btn plotlyjsicon modebar-btn--logo",l.appendChild(this.createIcon(D.newplotlylogo)),s.appendChild(l),s},d.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},d.destroy=function(){N.removeElement(this.container.querySelector(".modebar")),N.deleteRelatedStyleRule(this._uid)};function u(s,l){var b=s._fullLayout,v=new k({graphInfo:s,container:b._modebardiv.node(),buttons:l});return b._privateplot&&R.select(v.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),v}le.exports=u},{"../../fonts/ploticon":234,"../../lib":252,"../../version":434,"@plotly/d3":16,"fast-isnumeric":31}],185:[function(z,le,ae){"use strict";var R=z("../../plots/font_attributes"),L=z("../color/attributes"),N=z("../../plot_api/plot_template").templatedArray,D=N("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});le.exports={visible:{valType:"boolean",editType:"plot"},buttons:D,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:R({editType:"plot"}),bgcolor:{valType:"color",dflt:L.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:L.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":290,"../../plots/font_attributes":332,"../color/attributes":118}],186:[function(z,le,ae){"use strict";le.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],187:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../color"),N=z("../../plot_api/plot_template"),D=z("../../plots/array_container_defaults"),p=z("./attributes"),w=z("./constants");le.exports=function(u,s,l,b,v){var y=u.rangeselector||{},T=N.newContainer(s,"rangeselector");function _(h,c){return R.coerce(y,T,p,h,c)}var f=D(y,T,{name:"buttons",handleItemDefaults:k,calendar:v}),g=_("visible",f.length>0);if(g){var n=d(s,l,b);_("x",n[0]),_("y",n[1]),R.noneOrAll(u,s,["x","y"]),_("xanchor"),_("yanchor"),R.coerceFont(_,"font",l.font);var a=_("bgcolor");_("activecolor",L.contrast(a,w.lightAmount,w.darkAmount)),_("bordercolor"),_("borderwidth")}};function k(e,u,s,l){var b=l.calendar;function v(_,f){return R.coerce(e,u,p.buttons,_,f)}var y=v("visible");if(y){var T=v("step");T!=="all"&&(b&&b!=="gregorian"&&(T==="month"||T==="year")?u.stepmode="backward":v("stepmode"),v("count")),v("label")}}function d(e,u,s){for(var l=s.filter(function(T){return u[T].anchor===e._id}),b=0,v=0;v<l.length;v++){var y=u[l[v]].domain;y&&(b=Math.max(y[1],b))}return[e.domain[0],b+w.yPad]}},{"../../lib":252,"../../plot_api/plot_template":290,"../../plots/array_container_defaults":296,"../color":119,"./attributes":185,"./constants":186}],188:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../plots/plots"),D=z("../color"),p=z("../drawing"),w=z("../../lib"),k=w.strTranslate,d=z("../../lib/svg_text_utils"),e=z("../../plots/cartesian/axis_ids"),u=z("../../constants/alignment"),s=u.LINE_SPACING,l=u.FROM_TL,b=u.FROM_BR,v=z("./constants"),y=z("./get_update_object");le.exports=function(o){var t=o._fullLayout,i=t._infolayer.selectAll(".rangeselector").data(T(o),_);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(r){var x=R.select(this),A=r,E=A.rangeselector,P=x.selectAll("g.button").data(w.filterVisible(E.buttons));P.enter().append("g").classed("button",!0),P.exit().remove(),P.each(function(S){var C=R.select(this),M=y(A,S);S._isActive=f(A,S,M),C.call(g,E,S),C.call(a,E,S,o),C.on("click",function(){o._dragged||L.call("_guiRelayout",o,M)}),C.on("mouseover",function(){S._isHovered=!0,C.call(g,E,S)}),C.on("mouseout",function(){S._isHovered=!1,C.call(g,E,S)})}),c(o,P,E,A._name,x)})};function T(m){for(var o=e.list(m,"x",!0),t=[],i=0;i<o.length;i++){var r=o[i];r.rangeselector&&r.rangeselector.visible&&t.push(r)}return t}function _(m){return m._id}function f(m,o,t){if(o.step==="all")return m.autorange===!0;var i=Object.keys(t);return m.range[0]===t[i[0]]&&m.range[1]===t[i[1]]}function g(m,o,t){var i=w.ensureSingle(m,"rect","selector-rect",function(r){r.attr("shape-rendering","crispEdges")});i.attr({rx:v.rx,ry:v.ry}),i.call(D.stroke,o.bordercolor).call(D.fill,n(o,t)).style("stroke-width",o.borderwidth+"px")}function n(m,o){return o._isActive||o._isHovered?m.activecolor:m.bgcolor}function a(m,o,t,i){function r(A){d.convertToTspans(A,i)}var x=w.ensureSingle(m,"text","selector-text",function(A){A.attr("text-anchor","middle")});x.call(p.font,o.font).text(h(t,i._fullLayout._meta)).call(r)}function h(m,o){return m.label?o?w.templateString(m.label,o):m.label:m.step==="all"?"all":m.count+m.step.charAt(0)}function c(m,o,t,i,r){var x=0,A=0,E=t.borderwidth;o.each(function(){var G=R.select(this),V=G.select(".selector-text"),q=t.font.size*s,ee=Math.max(q*d.lineCount(V),16)+3;A=Math.max(A,ee)}),o.each(function(){var G=R.select(this),V=G.select(".selector-rect"),q=G.select(".selector-text"),ee=q.node()&&p.bBox(q.node()).width,Q=t.font.size*s,U=d.lineCount(q),O=Math.max(ee+10,v.minButtonWidth);G.attr("transform",k(E+x,E)),V.attr({x:0,y:0,width:O,height:A}),d.positionText(q,O/2,A/2-(U-1)*Q/2+3),x+=O+5});var P=m._fullLayout._size,S=P.l+P.w*t.x,C=P.t+P.h*(1-t.y),M="left";w.isRightAnchor(t)&&(S-=x,M="right"),w.isCenterAnchor(t)&&(S-=x/2,M="center");var I="top";w.isBottomAnchor(t)&&(C-=A,I="bottom"),w.isMiddleAnchor(t)&&(C-=A/2,I="middle"),x=Math.ceil(x),A=Math.ceil(A),S=Math.round(S),C=Math.round(C),N.autoMargin(m,i+"-range-selector",{x:t.x,y:t.y,l:x*l[M],r:x*b[M],b:A*b[I],t:A*l[I]}),r.attr("transform",k(S,C))}},{"../../constants/alignment":224,"../../lib":252,"../../lib/svg_text_utils":277,"../../plots/cartesian/axis_ids":305,"../../plots/plots":349,"../../registry":352,"../color":119,"../drawing":141,"./constants":186,"./get_update_object":189,"@plotly/d3":16}],189:[function(z,le,ae){"use strict";var R=z("d3-time"),L=z("../../lib").titleCase;le.exports=function(p,w){var k=p._name,d={};if(w.step==="all")d[k+".autorange"]=!0;else{var e=N(p,w);d[k+".range[0]"]=e[0],d[k+".range[1]"]=e[1]}return d};function N(D,p){var w=D.range,k=new Date(D.r2l(w[1])),d=p.step,e=R["utc"+L(d)],u=p.count,s;switch(p.stepmode){case"backward":s=D.l2r(+e.offset(k,-u));break;case"todate":var l=e.offset(k,-u);s=D.l2r(+e.ceil(l));break}var b=w[1];return[s,b]}},{"../../lib":252,"d3-time":28}],190:[function(z,le,ae){"use strict";le.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:z("./attributes")}}},layoutAttributes:z("./attributes"),handleDefaults:z("./defaults"),draw:z("./draw")}},{"./attributes":185,"./defaults":187,"./draw":188}],191:[function(z,le,ae){"use strict";var R=z("../color/attributes");le.exports={bgcolor:{valType:"color",dflt:R.background,editType:"plot"},bordercolor:{valType:"color",dflt:R.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":118}],192:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/axis_ids").list,L=z("../../plots/cartesian/autorange").getAutoRange,N=z("./constants");le.exports=function(p){for(var w=R(p,"x",!0),k=0;k<w.length;k++){var d=w[k],e=d[N.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=L(p,d))}}},{"../../plots/cartesian/autorange":300,"../../plots/cartesian/axis_ids":305,"./constants":193}],193:[function(z,le,ae){"use strict";le.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],194:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plot_api/plot_template"),N=z("../../plots/cartesian/axis_ids"),D=z("./attributes"),p=z("./oppaxis_attributes");le.exports=function(k,d,e){var u=k[e],s=d[e];if(!(u.rangeslider||d._requestRangeslider[s._id]))return;R.isPlainObject(u.rangeslider)||(u.rangeslider={});var l=u.rangeslider,b=L.newContainer(s,"rangeslider");function v(i,r){return R.coerce(l,b,D,i,r)}var y,T;function _(i,r){return R.coerce(y,T,p,i,r)}var f=v("visible");if(!!f){v("bgcolor",d.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!s.isValidRange(l.range)),v("range");var g=d._subplots;if(g)for(var n=g.cartesian.filter(function(i){return i.substr(0,i.indexOf("y"))===N.name2id(e)}).map(function(i){return i.substr(i.indexOf("y"),i.length)}),a=R.simpleMap(n,N.id2name),h=0;h<a.length;h++){var c=a[h];y=l[c]||{},T=L.newContainer(b,c,"yaxis");var m=d[c],o;y.range&&m.isValidRange(y.range)&&(o="fixed");var t=_("rangemode",o);t!=="match"&&_("range",m.range.slice())}b._input=l}}},{"../../lib":252,"../../plot_api/plot_template":290,"../../plots/cartesian/axis_ids":305,"./attributes":191,"./oppaxis_attributes":198}],195:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../plots/plots"),D=z("../../lib"),p=D.strTranslate,w=z("../drawing"),k=z("../color"),d=z("../titles"),e=z("../../plots/cartesian"),u=z("../../plots/cartesian/axis_ids"),s=z("../dragelement"),l=z("../../lib/setcursor"),b=z("./constants");le.exports=function(m){for(var o=m._fullLayout,t=o._rangeSliderData,i=0;i<t.length;i++){var r=t[i][b.name];r._clipId=r._id+"-"+o._uid}function x(E){return E._name}var A=o._infolayer.selectAll("g."+b.containerClassName).data(t,x);A.exit().each(function(E){var P=E[b.name];o._topdefs.select("#"+P._clipId).remove()}).remove(),t.length!==0&&(A.enter().append("g").classed(b.containerClassName,!0).attr("pointer-events","all"),A.each(function(E){var P=R.select(this),S=E[b.name],C=o[u.id2name(E.anchor)],M=S[u.id2name(E.anchor)];if(S.range){var I=D.simpleMap(S.range,E.r2l),G=D.simpleMap(E.range,E.r2l),V;G[0]<G[1]?V=[Math.min(I[0],G[0]),Math.max(I[1],G[1])]:V=[Math.max(I[0],G[0]),Math.min(I[1],G[1])],S.range=S._input.range=D.simpleMap(V,E.l2r)}E.cleanRange("rangeslider.range");var q=o._size,ee=E.domain;S._width=q.w*(ee[1]-ee[0]);var Q=Math.round(q.l+q.w*ee[0]),U=Math.round(q.t+q.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+S._offsetShift+b.extraPad);P.attr("transform",p(Q,U)),S._rl=D.simpleMap(S.range,E.r2l);var O=S._rl[0],Z=S._rl[1],B=Z-O;if(S.p2d=function(ve){return ve/S._width*B+O},S.d2p=function(ve){return(ve-O)/B*S._width},E.rangebreaks){var Y=E.locateBreaks(O,Z);if(Y.length){var j,X,H=0;for(j=0;j<Y.length;j++)X=Y[j],H+=X.max-X.min;var K=S._width/(Z-O-H),W=[-K*O];for(j=0;j<Y.length;j++)X=Y[j],W.push(W[W.length-1]-K*(X.max-X.min));for(S.d2p=function(ve){for(var ue=W[0],ce=0;ce<Y.length;ce++){var _e=Y[ce];if(ve>=_e.max)ue=W[ce+1];else if(ve<_e.min)break}return ue+K*ve},j=0;j<Y.length;j++)X=Y[j],X.pmin=S.d2p(X.min),X.pmax=S.d2p(X.max);S.p2d=function(ve){for(var ue=W[0],ce=0;ce<Y.length;ce++){var _e=Y[ce];if(ve>=_e.pmax)ue=W[ce+1];else if(ve<_e.pmin)break}return(ve-ue)/K}}}if(M.rangemode!=="match"){var $=C.r2l(M.range[0]),re=C.r2l(M.range[1]),de=re-$;S.d2pOppAxis=function(ve){return(ve-$)/de*S._height}}P.call(_,m,E,S).call(f,m,E,S).call(g,m,E,S).call(a,m,E,S,M).call(h,m,E,S).call(c,m,E,S),v(P,m,E,S),T(P,m,E,S,C,M),E.side==="bottom"&&d.draw(m,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:o._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:U+S._height+S._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))};function v(m,o,t,i){if(o._context.staticPlot)return;var r=m.select("rect."+b.slideBoxClassName).node(),x=m.select("rect."+b.grabAreaMinClassName).node(),A=m.select("rect."+b.grabAreaMaxClassName).node();function E(){var P=R.event,S=P.target,C=P.clientX||P.touches[0].clientX,M=C-m.node().getBoundingClientRect().left,I=i.d2p(t._rl[0]),G=i.d2p(t._rl[1]),V=s.coverSlip();this.addEventListener("touchmove",q),this.addEventListener("touchend",ee),V.addEventListener("mousemove",q),V.addEventListener("mouseup",ee);function q(Q){var U=Q.clientX||Q.touches[0].clientX,O=+U-C,Z,B,Y;switch(S){case r:Y="ew-resize",Z=I+O,B=G+O;break;case x:Y="col-resize",Z=I+O,B=G;break;case A:Y="col-resize",Z=I,B=G+O;break;default:Y="ew-resize",Z=M,B=M+O;break}if(B<Z){var j=B;B=Z,Z=j}i._pixelMin=Z,i._pixelMax=B,l(R.select(V),Y),y(m,o,t,i)}function ee(){V.removeEventListener("mousemove",q),V.removeEventListener("mouseup",ee),this.removeEventListener("touchmove",q),this.removeEventListener("touchend",ee),D.removeElement(V)}}m.on("mousedown",E),m.on("touchstart",E)}function y(m,o,t,i){function r(E){return t.l2r(D.constrain(E,i._rl[0],i._rl[1]))}var x=r(i.p2d(i._pixelMin)),A=r(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){L.call("_guiRelayout",o,t._name+".range",[x,A])})}function T(m,o,t,i,r,x){var A=b.handleWidth/2;function E(Q){return D.constrain(Q,0,i._width)}function P(Q){return D.constrain(Q,0,i._height)}function S(Q){return D.constrain(Q,-A,i._width+A)}var C=E(i.d2p(t._rl[0])),M=E(i.d2p(t._rl[1]));if(m.select("rect."+b.slideBoxClassName).attr("x",C).attr("width",M-C),m.select("rect."+b.maskMinClassName).attr("width",C),m.select("rect."+b.maskMaxClassName).attr("x",M).attr("width",i._width-M),x.rangemode!=="match"){var I=i._height-P(i.d2pOppAxis(r._rl[1])),G=i._height-P(i.d2pOppAxis(r._rl[0]));m.select("rect."+b.maskMinOppAxisClassName).attr("x",C).attr("height",I).attr("width",M-C),m.select("rect."+b.maskMaxOppAxisClassName).attr("x",C).attr("y",G).attr("height",i._height-G).attr("width",M-C),m.select("rect."+b.slideBoxClassName).attr("y",I).attr("height",G-I)}var V=.5,q=Math.round(S(C-A))-V,ee=Math.round(S(M-A))+V;m.select("g."+b.grabberMinClassName).attr("transform",p(q,V)),m.select("g."+b.grabberMaxClassName).attr("transform",p(ee,V))}function _(m,o,t,i){var r=D.ensureSingle(m,"rect",b.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),x=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,A=-i._offsetShift,E=w.crispRound(o,i.borderwidth);r.attr({width:i._width+x,height:i._height+x,transform:p(A,A),fill:i.bgcolor,stroke:i.bordercolor,"stroke-width":E})}function f(m,o,t,i){var r=o._fullLayout,x=D.ensureSingleById(r._topdefs,"clipPath",i._clipId,function(A){A.append("rect").attr({x:0,y:0})});x.select("rect").attr({width:i._width,height:i._height})}function g(m,o,t,i){var r=o.calcdata,x=m.selectAll("g."+b.rangePlotClassName).data(t._subplotsWith,D.identity);x.enter().append("g").attr("class",function(E){return b.rangePlotClassName+" "+E}).call(w.setClipUrl,i._clipId,o),x.order(),x.exit().remove();var A;x.each(function(E,P){var S=R.select(this),C=P===0,M=u.getFromId(o,E,"y"),I=M._name,G=i[I],V={data:[],layout:{xaxis:{type:t.type,domain:[0,1],range:i.range.slice(),calendar:t.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:o._context};t.rangebreaks&&(V.layout.xaxis.rangebreaks=t.rangebreaks),V.layout[I]={type:M.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():M.range.slice(),calendar:M.calendar},M.rangebreaks&&(V.layout[I].rangebreaks=M.rangebreaks),N.supplyDefaults(V);var q=V._fullLayout.xaxis,ee=V._fullLayout[I];q.clearCalc(),q.setScale(),ee.clearCalc(),ee.setScale();var Q={id:E,plotgroup:S,xaxis:q,yaxis:ee,isRangePlot:!0};C?A=Q:(Q.mainplot="xy",Q.mainplotinfo=A),e.rangePlot(o,Q,n(r,E))})}function n(m,o){for(var t=[],i=0;i<m.length;i++){var r=m[i],x=r[0].trace;x.xaxis+x.yaxis===o&&t.push(r)}return t}function a(m,o,t,i,r){var x=D.ensureSingle(m,"rect",b.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})});x.attr("height",i._height).call(k.fill,b.maskColor);var A=D.ensureSingle(m,"rect",b.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})});if(A.attr("height",i._height).call(k.fill,b.maskColor),r.rangemode!=="match"){var E=D.ensureSingle(m,"rect",b.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})});E.attr("width",i._width).call(k.fill,b.maskOppAxisColor);var P=D.ensureSingle(m,"rect",b.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})});P.attr("width",i._width).style("border-top",b.maskOppBorder).call(k.fill,b.maskOppAxisColor)}}function h(m,o,t,i){if(!o._context.staticPlot){var r=D.ensureSingle(m,"rect",b.slideBoxClassName,function(x){x.attr({y:0,cursor:b.slideBoxCursor,"shape-rendering":"crispEdges"})});r.attr({height:i._height,fill:b.slideBoxFill})}}function c(m,o,t,i){var r=D.ensureSingle(m,"g",b.grabberMinClassName),x=D.ensureSingle(m,"g",b.grabberMaxClassName),A={x:0,width:b.handleWidth,rx:b.handleRadius,fill:k.background,stroke:k.defaultLine,"stroke-width":b.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(i._height/4),height:Math.round(i._height/2)},P=D.ensureSingle(r,"rect",b.handleMinClassName,function(G){G.attr(A)});P.attr(E);var S=D.ensureSingle(x,"rect",b.handleMaxClassName,function(G){G.attr(A)});S.attr(E);var C={width:b.grabAreaWidth,x:0,y:0,fill:b.grabAreaFill,cursor:o._context.staticPlot?void 0:b.grabAreaCursor},M=D.ensureSingle(r,"rect",b.grabAreaMinClassName,function(G){G.attr(C)});M.attr("height",i._height);var I=D.ensureSingle(x,"rect",b.grabAreaMaxClassName,function(G){G.attr(C)});I.attr("height",i._height)}},{"../../lib":252,"../../lib/setcursor":272,"../../plots/cartesian":315,"../../plots/cartesian/axis_ids":305,"../../plots/plots":349,"../../registry":352,"../color":119,"../dragelement":138,"../drawing":141,"../titles":217,"./constants":193,"@plotly/d3":16}],196:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/axis_ids"),L=z("../../lib/svg_text_utils"),N=z("./constants"),D=z("../../constants/alignment").LINE_SPACING,p=N.name;function w(k){var d=k&&k[p];return d&&d.visible}ae.isVisible=w,ae.makeData=function(k){var d=R.list({_fullLayout:k},"x",!0),e=k.margin,u=[];if(!k._has("gl2d"))for(var s=0;s<d.length;s++){var l=d[s];if(w(l)){u.push(l);var b=l[p];b._id=p+l._id,b._height=(k.height-e.b-e.t)*b.thickness,b._offsetShift=Math.floor(b.borderwidth/2)}}k._rangeSliderData=u},ae.autoMarginOpts=function(k,d){var e=k._fullLayout,u=d[p],s=d._id.charAt(0),l=0,b=0;if(d.side==="bottom"&&(l=d._depth,d.title.text!==e._dfltTitle[s])){b=1.5*d.title.font.size+10+u._offsetShift;var v=(d.title.text.match(L.BR_TAG_ALL)||[]).length;b+=v*d.title.font.size*D}return{x:0,y:d._counterDomainMin,l:0,r:0,t:0,b:u._height+l+Math.max(e.margin.b,b),pad:N.extraPad+u._offsetShift*2}}},{"../../constants/alignment":224,"../../lib/svg_text_utils":277,"../../plots/cartesian/axis_ids":305,"./constants":193}],197:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./attributes"),N=z("./oppaxis_attributes"),D=z("./helpers");le.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:R.extendFlat({},L,{yaxis:N})}}},layoutAttributes:z("./attributes"),handleDefaults:z("./defaults"),calcAutorange:z("./calc_autorange"),draw:z("./draw"),isVisible:D.isVisible,makeData:D.makeData,autoMarginOpts:D.autoMarginOpts}},{"../../lib":252,"./attributes":191,"./calc_autorange":192,"./defaults":194,"./draw":195,"./helpers":196,"./oppaxis_attributes":198}],198:[function(z,le,ae){"use strict";le.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],199:[function(z,le,ae){"use strict";var R=z("../annotations/attributes"),L=z("../../traces/scatter/attributes").line,N=z("../drawing/attributes").dash,D=z("../../lib/extend").extendFlat,p=z("../../plot_api/plot_template").templatedArray,w=z("../../constants/axis_placeable_objects");le.exports=p("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:D({},R.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:D({},R.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:D({},L.color,{editType:"arraydraw"}),width:D({},L.width,{editType:"calc+arraydraw"}),dash:D({},N,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":225,"../../lib/extend":245,"../../plot_api/plot_template":290,"../../traces/scatter/attributes":381,"../annotations/attributes":102,"../drawing/attributes":140}],200:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("./constants"),D=z("./helpers");le.exports=function(u){var s=u._fullLayout,l=R.filterVisible(s.shapes);if(!(!l.length||!u._fullData.length))for(var b=0;b<l.length;b++){var v=l[b];v._extremes={};var y,T,_=L.getRefType(v.xref),f=L.getRefType(v.yref);if(v.xref!=="paper"&&_!=="domain"){var g=v.xsizemode==="pixel"?v.xanchor:v.x0,n=v.xsizemode==="pixel"?v.xanchor:v.x1;y=L.getFromId(u,v.xref),T=d(y,g,n,v.path,N.paramIsX),T&&(v._extremes[y._id]=L.findExtremes(y,T,p(v)))}if(v.yref!=="paper"&&f!=="domain"){var a=v.ysizemode==="pixel"?v.yanchor:v.y0,h=v.ysizemode==="pixel"?v.yanchor:v.y1;y=L.getFromId(u,v.yref),T=d(y,a,h,v.path,N.paramIsY),T&&(v._extremes[y._id]=L.findExtremes(y,T,w(v)))}}};function p(e){return k(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function w(e){return k(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function k(e,u,s,l,b,v){var y=e/2,T=v;if(u==="pixel"){var _=b?D.extractPathCoords(b,v?N.paramIsY:N.paramIsX):[s,l],f=R.aggNums(Math.max,null,_),g=R.aggNums(Math.min,null,_),n=g<0?Math.abs(g)+y:y,a=f>0?f+y:y;return{ppad:y,ppadplus:T?n:a,ppadminus:T?a:n}}else return{ppad:y}}function d(e,u,s,l,b){var v=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(u!==void 0)return[v(u),v(s)];if(!!l){var y=1/0,T=-1/0,_=l.match(N.segmentRE),f,g,n,a,h;for(e.type==="date"&&(v=D.decodeDate(v)),f=0;f<_.length;f++)g=_[f],n=b[g.charAt(0)].drawn,n!==void 0&&(a=_[f].substr(1).match(N.paramRE),!(!a||a.length<n)&&(h=v(a[n]),h<y&&(y=h),h>T&&(T=h)));if(T>=y)return[y,T]}}},{"../../lib":252,"../../plots/cartesian/axes":301,"./constants":201,"./helpers":210}],201:[function(z,le,ae){"use strict";le.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],202:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/cartesian/axes"),N=z("../../plots/array_container_defaults"),D=z("./attributes"),p=z("./helpers");le.exports=function(d,e){N(d,e,{name:"shapes",handleItemDefaults:w})};function w(k,d,e){function u(I,G){return R.coerce(k,d,D,I,G)}var s=u("visible");if(!!s){var l=u("path"),b=l?"path":"rect",v=u("type",b);d.type!=="path"&&delete d.path,u("editable"),u("layer"),u("opacity"),u("fillcolor"),u("fillrule");var y=u("line.width");y&&(u("line.color"),u("line.dash"));for(var T=u("xsizemode"),_=u("ysizemode"),f=["x","y"],g=0;g<2;g++){var n=f[g],a=n+"anchor",h=n==="x"?T:_,c={_fullLayout:e},m,o,t,i=L.coerceRef(k,d,c,n,void 0,"paper"),r=L.getRefType(i);if(r==="range"?(m=L.getFromId(c,i),m._shapeIndices.push(d._index),t=p.rangeToShapePosition(m),o=p.shapePositionToRange(m)):o=t=R.identity,v!=="path"){var x=.25,A=.75,E=n+"0",P=n+"1",S=k[E],C=k[P];k[E]=o(k[E],!0),k[P]=o(k[P],!0),h==="pixel"?(u(E,0),u(P,10)):(L.coercePosition(d,c,u,i,E,x),L.coercePosition(d,c,u,i,P,A)),d[E]=t(d[E]),d[P]=t(d[P]),k[E]=S,k[P]=C}if(h==="pixel"){var M=k[a];k[a]=o(k[a],!0),L.coercePosition(d,c,u,i,a,.25),d[a]=t(d[a]),k[a]=M}}v==="path"?u("path"):R.noneOrAll(k,d,["x0","x1","y0","y1"])}}},{"../../lib":252,"../../plots/array_container_defaults":296,"../../plots/cartesian/axes":301,"./attributes":199,"./helpers":210}],203:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("../../plots/cartesian/axes"),D=z("./draw_newshape/helpers").readPaths,p=z("./draw_newshape/display_outlines"),w=z("../../plots/cartesian/handle_outline").clearOutlineControllers,k=z("../color"),d=z("../drawing"),e=z("../../plot_api/plot_template").arrayEditor,u=z("../dragelement"),s=z("../../lib/setcursor"),l=z("./constants"),b=z("./helpers");le.exports={draw:v,drawOne:_,eraseActiveShape:o};function v(t){var i=t._fullLayout;i._shapeUpperLayer.selectAll("path").remove(),i._shapeLowerLayer.selectAll("path").remove();for(var r in i._plots){var x=i._plots[r].shapelayer;x&&x.selectAll("path").remove()}for(var A=0;A<i.shapes.length;A++)i.shapes[A].visible&&_(t,A)}function y(t){return!!t._fullLayout._drawing}function T(t){return!t._context.edits.shapePosition}function _(t,i){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+i+'"]').remove();var r=b.makeOptionsAndPlotinfo(t,i),x=r.options,A=r.plotinfo;if(!x._input||x.visible===!1)return;if(x.layer!=="below")P(t._fullLayout._shapeUpperLayer);else if(x.xref==="paper"||x.yref==="paper")P(t._fullLayout._shapeLowerLayer);else if(A._hadPlotinfo){var E=A.mainplotinfo||A;P(E.shapelayer)}else P(t._fullLayout._shapeLowerLayer);function P(S){var C=n(t,x),M={"data-index":i,"fill-rule":x.fillrule,d:C},I=x.opacity,G=x.fillcolor,V=x.line.width?x.line.color:"rgba(0,0,0,0)",q=x.line.width,ee=x.line.dash;!q&&x.editable===!0&&(q=5,ee="solid");var Q=C[C.length-1]!=="Z",U=T(t)&&x.editable&&t._fullLayout._activeShapeIndex===i;U&&(G=Q?"rgba(0,0,0,0)":t._fullLayout.activeshape.fillcolor,I=t._fullLayout.activeshape.opacity);var O=S.append("path").attr(M).style("opacity",I).call(k.stroke,V).call(k.fill,G).call(d.dashLine,ee,q);f(O,t,x);var Z;if((U||t._context.edits.shapePosition)&&(Z=e(t.layout,"shapes",x)),U){O.style({cursor:"move"});var B={element:O.node(),plotinfo:A,gd:t,editHelpers:Z,isActiveShape:!0},Y=D(C,t);p(Y,O,B)}else t._context.edits.shapePosition?g(t,O,x,i,S,Z):x.editable===!0&&O.style("pointer-events",Q||k.opacity(G)*I<=.5?"stroke":"all");O.node().addEventListener("click",function(){return c(t,O)})}}function f(t,i,r){var x=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");d.setClipUrl(t,x?"clip"+i._fullLayout._uid+x:null,i)}function g(t,i,r,x,A,E){var P=10,S=10,C=r.xsizemode==="pixel",M=r.ysizemode==="pixel",I=r.type==="line",G=r.type==="path",V=E.modifyItem,q,ee,Q,U,O,Z,B,Y,j,X,H,K,W,$,re,de=N.getFromId(t,r.xref),ve=N.getRefType(r.xref),ue=N.getFromId(t,r.yref),ce=N.getRefType(r.yref),_e=b.getDataToPixel(t,de,!1,ve),fe=b.getDataToPixel(t,ue,!0,ce),ne=b.getPixelToData(t,de,!1,ve),ie=b.getPixelToData(t,ue,!0,ce),me=Me(),we={element:me.node(),gd:t,prepFn:Oe,doneFn:We,clickFn:Fe},be;u.init(we),me.node().onmousemove=Ke;function Me(){return I?Ie():i}function Ie(){var st=10,Ve=Math.max(r.line.width,st),Je=A.append("g").attr("data-index",x);Je.append("path").attr("d",i.attr("d")).style({cursor:"move","stroke-width":Ve,"stroke-opacity":"0"});var ke={"fill-opacity":"0"},Le=Math.max(Ve/2,st);return Je.append("circle").attr({"data-line-point":"start-point",cx:C?_e(r.xanchor)+r.x0:_e(r.x0),cy:M?fe(r.yanchor)-r.y0:fe(r.y0),r:Le}).style(ke).classed("cursor-grab",!0),Je.append("circle").attr({"data-line-point":"end-point",cx:C?_e(r.xanchor)+r.x1:_e(r.x1),cy:M?fe(r.yanchor)-r.y1:fe(r.y1),r:Le}).style(ke).classed("cursor-grab",!0),Je}function Ke(st){if(y(t)){be=null;return}if(I)st.target.tagName==="path"?be="move":be=st.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ve=we.element.getBoundingClientRect(),Je=Ve.right-Ve.left,ke=Ve.bottom-Ve.top,Le=st.clientX-Ve.left,Be=st.clientY-Ve.top,pe=!G&&Je>P&&ke>S&&!st.shiftKey?u.getCursor(Le/Je,1-Be/ke):"move";s(i,pe),be=pe.split("-")[0]}}function Oe(st){y(t)||(C&&(O=_e(r.xanchor)),M&&(Z=fe(r.yanchor)),r.type==="path"?re=r.path:(q=C?r.x0:_e(r.x0),ee=M?r.y0:fe(r.y0),Q=C?r.x1:_e(r.x1),U=M?r.y1:fe(r.y1)),q<Q?(j=q,W="x0",X=Q,$="x1"):(j=Q,W="x1",X=q,$="x0"),!M&&ee<U||M&&ee>U?(B=ee,H="y0",Y=U,K="y1"):(B=U,H="y1",Y=ee,K="y0"),Ke(st),ut(A,r),dt(i,r,t),we.moveFn=be==="move"?Ge:Xe,we.altKey=st.altKey)}function We(){y(t)||(s(i),rt(A),f(i,t,r),R.call("_guiRelayout",t,E.getUpdateObj()))}function Fe(){y(t)||rt(A)}function Ge(st,Ve){if(r.type==="path"){var Je=function(Be){return Be},ke=Je,Le=Je;C?V("xanchor",r.xanchor=ne(O+st)):(ke=function(pe){return ne(_e(pe)+st)},de&&de.type==="date"&&(ke=b.encodeDate(ke))),M?V("yanchor",r.yanchor=ie(Z+Ve)):(Le=function(pe){return ie(fe(pe)+Ve)},ue&&ue.type==="date"&&(Le=b.encodeDate(Le))),V("path",r.path=h(re,ke,Le))}else C?V("xanchor",r.xanchor=ne(O+st)):(V("x0",r.x0=ne(q+st)),V("x1",r.x1=ne(Q+st))),M?V("yanchor",r.yanchor=ie(Z+Ve)):(V("y0",r.y0=ie(ee+Ve)),V("y1",r.y1=ie(U+Ve)));i.attr("d",n(t,r)),ut(A,r)}function Xe(st,Ve){if(G){var Je=function(xt){return xt},ke=Je,Le=Je;C?V("xanchor",r.xanchor=ne(O+st)):(ke=function(Bt){return ne(_e(Bt)+st)},de&&de.type==="date"&&(ke=b.encodeDate(ke))),M?V("yanchor",r.yanchor=ie(Z+Ve)):(Le=function(Bt){return ie(fe(Bt)+Ve)},ue&&ue.type==="date"&&(Le=b.encodeDate(Le))),V("path",r.path=h(re,ke,Le))}else if(I){if(be==="resize-over-start-point"){var Be=q+st,pe=M?ee-Ve:ee+Ve;V("x0",r.x0=C?Be:ne(Be)),V("y0",r.y0=M?pe:ie(pe))}else if(be==="resize-over-end-point"){var Ae=Q+st,Ce=M?U-Ve:U+Ve;V("x1",r.x1=C?Ae:ne(Ae)),V("y1",r.y1=M?Ce:ie(Ce))}}else{var Se=function(xt){return be.indexOf(xt)!==-1},He=Se("n"),Ne=Se("s"),qe=Se("w"),at=Se("e"),nt=He?B+Ve:B,Ze=Ne?Y+Ve:Y,ht=qe?j+st:j,kt=at?X+st:X;M&&(He&&(nt=B-Ve),Ne&&(Ze=Y-Ve)),(!M&&Ze-nt>S||M&&nt-Ze>S)&&(V(H,r[H]=M?nt:ie(nt)),V(K,r[K]=M?Ze:ie(Ze))),kt-ht>P&&(V(W,r[W]=C?ht:ne(ht)),V($,r[$]=C?kt:ne(kt)))}i.attr("d",n(t,r)),ut(A,r)}function ut(st,Ve){(C||M)&&Je();function Je(){var ke=Ve.type!=="path",Le=st.selectAll(".visual-cue").data([0]),Be=1;Le.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Be}).classed("visual-cue",!0);var pe=_e(C?Ve.xanchor:L.midRange(ke?[Ve.x0,Ve.x1]:b.extractPathCoords(Ve.path,l.paramIsX))),Ae=fe(M?Ve.yanchor:L.midRange(ke?[Ve.y0,Ve.y1]:b.extractPathCoords(Ve.path,l.paramIsY)));if(pe=b.roundPositionForSharpStrokeRendering(pe,Be),Ae=b.roundPositionForSharpStrokeRendering(Ae,Be),C&&M){var Ce="M"+(pe-1-Be)+","+(Ae-1-Be)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Le.attr("d",Ce)}else if(C){var Se="M"+(pe-1-Be)+","+(Ae-9-Be)+"v18 h2 v-18 Z";Le.attr("d",Se)}else{var He="M"+(pe-9-Be)+","+(Ae-1-Be)+"h18 v2 h-18 Z";Le.attr("d",He)}}}function rt(st){st.selectAll(".visual-cue").remove()}function dt(st,Ve,Je){var ke=Ve.xref,Le=Ve.yref,Be=N.getFromId(Je,ke),pe=N.getFromId(Je,Le),Ae="";ke!=="paper"&&!Be.autorange&&(Ae+=ke),Le!=="paper"&&!pe.autorange&&(Ae+=Le),d.setClipUrl(st,Ae?"clip"+Je._fullLayout._uid+Ae:null,Je)}}function n(t,i){var r=i.type,x=N.getRefType(i.xref),A=N.getRefType(i.yref),E=N.getFromId(t,i.xref),P=N.getFromId(t,i.yref),S=t._fullLayout._size,C,M,I,G,V,q,ee,Q;if(E?x==="domain"?M=function(W){return E._offset+E._length*W}:(C=b.shapePositionToRange(E),M=function(W){return E._offset+E.r2p(C(W,!0))}):M=function(W){return S.l+S.w*W},P?A==="domain"?G=function(W){return P._offset+P._length*(1-W)}:(I=b.shapePositionToRange(P),G=function(W){return P._offset+P.r2p(I(W,!0))}):G=function(W){return S.t+S.h*(1-W)},r==="path")return E&&E.type==="date"&&(M=b.decodeDate(M)),P&&P.type==="date"&&(G=b.decodeDate(G)),a(i,M,G);if(i.xsizemode==="pixel"){var U=M(i.xanchor);V=U+i.x0,q=U+i.x1}else V=M(i.x0),q=M(i.x1);if(i.ysizemode==="pixel"){var O=G(i.yanchor);ee=O-i.y0,Q=O-i.y1}else ee=G(i.y0),Q=G(i.y1);if(r==="line")return"M"+V+","+ee+"L"+q+","+Q;if(r==="rect")return"M"+V+","+ee+"H"+q+"V"+Q+"H"+V+"Z";var Z=(V+q)/2,B=(ee+Q)/2,Y=Math.abs(Z-V),j=Math.abs(B-ee),X="A"+Y+","+j,H=Z+Y+","+B,K=Z+","+(B-j);return"M"+H+X+" 0 1,1 "+K+X+" 0 0,1 "+H+"Z"}function a(t,i,r){var x=t.path,A=t.xsizemode,E=t.ysizemode,P=t.xanchor,S=t.yanchor;return x.replace(l.segmentRE,function(C){var M=0,I=C.charAt(0),G=l.paramIsX[I],V=l.paramIsY[I],q=l.numParams[I],ee=C.substr(1).replace(l.paramRE,function(Q){return G[M]?A==="pixel"?Q=i(P)+Number(Q):Q=i(Q):V[M]&&(E==="pixel"?Q=r(S)-Number(Q):Q=r(Q)),M++,M>q&&(Q="X"),Q});return M>q&&(ee=ee.replace(/[\s,]*X.*/,""),L.log("Ignoring extra params in segment "+C)),I+ee})}function h(t,i,r){return t.replace(l.segmentRE,function(x){var A=0,E=x.charAt(0),P=l.paramIsX[E],S=l.paramIsY[E],C=l.numParams[E],M=x.substr(1).replace(l.paramRE,function(I){return A>=C||(P[A]?I=i(I):S[A]&&(I=r(I)),A++),I});return E+M})}function c(t,i){if(!!T(t)){var r=i.node(),x=+r.getAttribute("data-index");if(x>=0){if(x===t._fullLayout._activeShapeIndex){m(t);return}t._fullLayout._activeShapeIndex=x,t._fullLayout._deactivateShape=m,v(t)}}}function m(t){if(!!T(t)){var i=t._fullLayout._activeShapeIndex;i>=0&&(w(t),delete t._fullLayout._activeShapeIndex,v(t))}}function o(t){if(!!T(t)){w(t);var i=t._fullLayout._activeShapeIndex,r=(t.layout||{}).shapes||[];if(i<r.length){for(var x=[],A=0;A<r.length;A++)A!==i&&x.push(r[A]);delete t._fullLayout._activeShapeIndex,R.call("_guiRelayout",t,{shapes:x})}}}},{"../../lib":252,"../../lib/setcursor":272,"../../plot_api/plot_template":290,"../../plots/cartesian/axes":301,"../../plots/cartesian/handle_outline":312,"../../registry":352,"../color":119,"../dragelement":138,"../drawing":141,"./constants":201,"./draw_newshape/display_outlines":207,"./draw_newshape/helpers":208,"./helpers":210}],204:[function(z,le,ae){"use strict";var R=z("../../drawing/attributes").dash,L=z("../../../lib/extend").extendFlat;le.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:L({},R,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":245,"../../drawing/attributes":140}],205:[function(z,le,ae){"use strict";var R=32;le.exports={CIRCLE_SIDES:R,i000:0,i090:R/4,i180:R/2,i270:R/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],206:[function(z,le,ae){"use strict";var R=z("../../color");le.exports=function(N,D,p){p("newshape.drawdirection"),p("newshape.layer"),p("newshape.fillcolor"),p("newshape.fillrule"),p("newshape.opacity");var w=p("newshape.line.width");if(w){var k=(N||{}).plot_bgcolor||"#FFF";p("newshape.line.color",R.contrast(k)),p("newshape.line.dash")}p("activeshape.fillcolor"),p("activeshape.opacity")}},{"../../color":119}],207:[function(z,le,ae){"use strict";var R=z("../../dragelement"),L=z("../../dragelement/helpers"),N=L.drawMode,D=z("../../../registry"),p=z("./constants"),w=p.i000,k=p.i090,d=p.i180,e=p.i270,u=z("../../../plots/cartesian/handle_outline"),s=u.clearOutlineControllers,l=z("./helpers"),b=l.pointsShapeRectangle,v=l.pointsShapeEllipse,y=l.writePaths,T=z("./newshapes");le.exports=function f(g,n,a,h){h||(h=0);var c=a.gd;function m(){f(g,n,a,h++),v(g[0])&&o({redrawing:!0})}function o(X){a.isActiveShape=!1;var H=T(n,a);Object.keys(H).length&&D.call((X||{}).redrawing?"relayout":"_guiRelayout",c,H)}var t=a.isActiveShape,i=c._fullLayout,r=i._zoomlayer,x=a.dragmode,A=N(x);A?c._fullLayout._drawing=!0:c._fullLayout._activeShapeIndex>=0&&s(c),n.attr("d",y(g));var E,P,S,C,M;if(t&&!h){M=_([],g);var I=r.append("g").attr("class","outline-controllers");U(I),j()}function G(X){S=+X.srcElement.getAttribute("data-i"),C=+X.srcElement.getAttribute("data-j"),E[S][C].moveFn=V}function V(X,H){if(!!g.length){var K=M[S][C][1],W=M[S][C][2],$=g[S],re=$.length;if(b($)){for(var de=0;de<re;de++)if(de!==C){var ve=$[de];ve[1]===$[C][1]&&(ve[1]=K+X),ve[2]===$[C][2]&&(ve[2]=W+H)}if($[C][1]=K+X,$[C][2]=W+H,!b($))for(var ue=0;ue<re;ue++)for(var ce=0;ce<$[ue].length;ce++)$[ue][ce]=M[S][ue][ce]}else $[C][1]=K+X,$[C][2]=W+H;m()}}function q(){o()}function ee(){if(!!g.length&&!!g[S]&&!!g[S].length){for(var X=[],H=0;H<g[S].length;H++)H!==C&&X.push(g[S][H]);X.length>1&&!(X.length===2&&X[1][0]==="Z")&&(C===0&&(X[0][0]="M"),g[S]=X,m(),o())}}function Q(X,H){if(X===2){S=+H.srcElement.getAttribute("data-i"),C=+H.srcElement.getAttribute("data-j");var K=g[S];!b(K)&&!v(K)&&ee()}}function U(X){E=[];for(var H=0;H<g.length;H++){var K=g[H],W=b(K),$=!W&&v(K);E[H]=[];for(var re=0;re<K.length;re++)if(K[re][0]!=="Z"&&!($&&re!==w&&re!==k&&re!==d&&re!==e)){var de=K[re][1],ve=K[re][2],ue=X.append("circle").classed("cursor-grab",!0).attr("data-i",H).attr("data-j",re).attr("cx",de).attr("cy",ve).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});E[H][re]={element:ue.node(),gd:c,prepFn:G,doneFn:q,clickFn:Q},R.init(E[H][re])}}}function O(X,H){if(!!g.length)for(var K=0;K<g.length;K++)for(var W=0;W<g[K].length;W++)for(var $=0;$+2<g[K][W].length;$+=2)g[K][W][$+1]=M[K][W][$+1]+X,g[K][W][$+2]=M[K][W][$+2]+H}function Z(X,H){O(X,H),m()}function B(X){S=+X.srcElement.getAttribute("data-i"),S||(S=0),P[S].moveFn=Z}function Y(){o()}function j(){if(P=[],!!g.length){var X=0;P[X]={element:n[0][0],gd:c,prepFn:B,doneFn:Y},R.init(P[X])}}};function _(f,g){for(var n=0;n<g.length;n++){var a=g[n];f[n]=[];for(var h=0;h<a.length;h++){f[n][h]=[];for(var c=0;c<a[h].length;c++)f[n][h][c]=a[h][c]}}return f}},{"../../../plots/cartesian/handle_outline":312,"../../../registry":352,"../../dragelement":138,"../../dragelement/helpers":137,"./constants":205,"./helpers":208,"./newshapes":209}],208:[function(z,le,ae){"use strict";var R=z("parse-svg-path"),L=z("./constants"),N=L.CIRCLE_SIDES,D=L.SQRT2,p=z("../../../plots/cartesian/helpers"),w=p.p2r,k=p.r2p,d=[0,3,4,5,6,1,2],e=[0,3,4,1,2];ae.writePaths=function(l){var b=l.length;if(!b)return"M0,0Z";for(var v="",y=0;y<b;y++)for(var T=l[y].length,_=0;_<T;_++){var f=l[y][_][0];if(f==="Z")v+="Z";else for(var g=l[y][_].length,n=0;n<g;n++){var a=n;f==="Q"||f==="S"?a=e[n]:f==="C"&&(a=d[n]),v+=l[y][_][a],n>0&&n<g-1&&(v+=",")}}return v},ae.readPaths=function(l,b,v,y){var T=R(l),_=[],f=-1,g=function(){f++,_[f]=[]},n,a=0,h=0,c,m,o=function(){c=a,m=h};o();for(var t=0;t<T.length;t++){var i=[],r,x,A,E,P=T[t][0],S=P;switch(P){case"M":g(),a=+T[t][1],h=+T[t][2],i.push([S,a,h]),o();break;case"Q":case"S":r=+T[t][1],A=+T[t][2],a=+T[t][3],h=+T[t][4],i.push([S,a,h,r,A]);break;case"C":r=+T[t][1],A=+T[t][2],x=+T[t][3],E=+T[t][4],a=+T[t][5],h=+T[t][6],i.push([S,a,h,r,A,x,E]);break;case"T":case"L":a=+T[t][1],h=+T[t][2],i.push([S,a,h]);break;case"H":S="L",a=+T[t][1],i.push([S,a,h]);break;case"V":S="L",h=+T[t][1],i.push([S,a,h]);break;case"A":S="L";var C=+T[t][1],M=+T[t][2];+T[t][4]||(C=-C,M=-M);var I=a-C,G=h;for(n=1;n<=N/2;n++){var V=2*Math.PI*n/N;i.push([S,I+C*Math.cos(V),G+M*Math.sin(V)])}break;case"Z":(a!==c||h!==m)&&(a=c,h=m,i.push([S,a,h]));break}for(var q=(v||{}).domain,ee=b._fullLayout._size,Q=v&&v.xsizemode==="pixel",U=v&&v.ysizemode==="pixel",O=y===!1,Z=0;Z<i.length;Z++){for(n=0;n+2<7;n+=2){var B=i[Z][n+1],Y=i[Z][n+2];B===void 0||Y===void 0||(a=B,h=Y,v&&(v.xaxis&&v.xaxis.p2r?(O&&(B-=v.xaxis._offset),Q?B=k(v.xaxis,v.xanchor)+B:B=w(v.xaxis,B)):(O&&(B-=ee.l),q?B=q.x[0]+B/ee.w:B=B/ee.w),v.yaxis&&v.yaxis.p2r?(O&&(Y-=v.yaxis._offset),U?Y=k(v.yaxis,v.yanchor)-Y:Y=w(v.yaxis,Y)):(O&&(Y-=ee.t),q?Y=q.y[1]-Y/ee.h:Y=1-Y/ee.h)),i[Z][n+1]=B,i[Z][n+2]=Y)}_[f].push(i[Z].slice())}}return _};function u(l,b){return Math.abs(l-b)<=1e-6}function s(l,b){var v=b[1]-l[1],y=b[2]-l[2];return Math.sqrt(v*v+y*y)}ae.pointsShapeRectangle=function(l){var b=l.length;if(b!==5)return!1;for(var v=1;v<3;v++){var y=l[0][v]-l[1][v],T=l[3][v]-l[2][v];if(!u(y,T))return!1;var _=l[0][v]-l[3][v],f=l[1][v]-l[2][v];if(!u(_,f))return!1}return!u(l[0][1],l[1][1])&&!u(l[0][1],l[3][1])?!1:!!(s(l[0],l[1])*s(l[0],l[3]))},ae.pointsShapeEllipse=function(l){var b=l.length;if(b!==N+1)return!1;b=N;for(var v=0;v<b;v++){var y=(b*2-v)%b,T=(b/2+y)%b,_=(b/2+v)%b;if(!u(s(l[v],l[_]),s(l[y],l[T])))return!1}return!0},ae.handleEllipse=function(l,b,v){if(!l)return[b,v];var y=ae.ellipseOver({x0:b[0],y0:b[1],x1:v[0],y1:v[1]}),T=(y.x1+y.x0)/2,_=(y.y1+y.y0)/2,f=(y.x1-y.x0)/2,g=(y.y1-y.y0)/2;f||(f=g=g/D),g||(g=f=f/D);for(var n=[],a=0;a<N;a++){var h=a*2*Math.PI/N;n.push([T+f*Math.cos(h),_+g*Math.sin(h)])}return n},ae.ellipseOver=function(l){var b=l.x0,v=l.y0,y=l.x1,T=l.y1,_=y-b,f=T-v;b-=_,v-=f;var g=(b+y)/2,n=(v+T)/2,a=D;return _*=a,f*=a,{x0:g-_,y0:n-f,x1:g+_,y1:n+f}}},{"../../../plots/cartesian/helpers":313,"./constants":205,"parse-svg-path":72}],209:[function(z,le,ae){"use strict";var R=z("../../dragelement/helpers"),L=R.drawMode,N=R.openMode,D=z("./constants"),p=D.i000,w=D.i090,k=D.i180,d=D.i270,e=D.cos45,u=D.sin45,s=z("../../../plots/cartesian/helpers"),l=s.p2r,b=s.r2p,v=z("../../../plots/cartesian/handle_outline"),y=v.clearSelect,T=z("./helpers"),_=T.readPaths,f=T.writePaths,g=T.ellipseOver;le.exports=function(h,c){if(!!h.length){var m=h[0][0];if(!!m){var o=m.getAttribute("d"),t=c.gd,i=t._fullLayout.newshape,r=c.plotinfo,x=r.xaxis,A=r.yaxis,E=!!r.domain||!r.xaxis,P=!!r.domain||!r.yaxis,S=c.isActiveShape,C=c.dragmode,M=(t.layout||{}).shapes||[];if(!L(C)&&S!==void 0){var I=t._fullLayout._activeShapeIndex;if(I<M.length)switch(t._fullLayout.shapes[I].type){case"rect":C="drawrect";break;case"circle":C="drawcircle";break;case"line":C="drawline";break;case"path":var G=M[I].path||"";G[G.length-1]==="Z"?C="drawclosedpath":C="drawopenpath";break}}var V=N(C),q=_(o,t,r,S),ee={editable:!0,xref:E?"paper":x._id,yref:P?"paper":A._id,layer:i.layer,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};V||(ee.fillcolor=i.fillcolor,ee.fillrule=i.fillrule);var Q;if(q.length===1&&(Q=q[0]),Q&&C==="drawrect")ee.type="rect",ee.x0=Q[0][1],ee.y0=Q[0][2],ee.x1=Q[2][1],ee.y1=Q[2][2];else if(Q&&C==="drawline")ee.type="line",ee.x0=Q[0][1],ee.y0=Q[0][2],ee.x1=Q[1][1],ee.y1=Q[1][2];else if(Q&&C==="drawcircle"){ee.type="circle";var U=Q[p][1],O=Q[w][1],Z=Q[k][1],B=Q[d][1],Y=Q[p][2],j=Q[w][2],X=Q[k][2],H=Q[d][2],K=r.xaxis&&(r.xaxis.type==="date"||r.xaxis.type==="log"),W=r.yaxis&&(r.yaxis.type==="date"||r.yaxis.type==="log");K&&(U=b(r.xaxis,U),O=b(r.xaxis,O),Z=b(r.xaxis,Z),B=b(r.xaxis,B)),W&&(Y=b(r.yaxis,Y),j=b(r.yaxis,j),X=b(r.yaxis,X),H=b(r.yaxis,H));var $=(O+B)/2,re=(Y+X)/2,de=(B-O+Z-U)/2,ve=(H-j+X-Y)/2,ue=g({x0:$,y0:re,x1:$+de*e,y1:re+ve*u});K&&(ue.x0=l(r.xaxis,ue.x0),ue.x1=l(r.xaxis,ue.x1)),W&&(ue.y0=l(r.yaxis,ue.y0),ue.y1=l(r.yaxis,ue.y1)),ee.x0=ue.x0,ee.y0=ue.y0,ee.x1=ue.x1,ee.y1=ue.y1}else ee.type="path",x&&A&&n(q,x,A),ee.path=f(q),Q=null;y(t);for(var ce=c.editHelpers,_e=(ce||{}).modifyItem,fe=[],ne=0;ne<M.length;ne++){var ie=t._fullLayout.shapes[ne];if(fe[ne]=ie._input,S!==void 0&&ne===t._fullLayout._activeShapeIndex){var me=ee;switch(ie.type){case"line":case"rect":case"circle":_e("x0",me.x0),_e("x1",me.x1),_e("y0",me.y0),_e("y1",me.y1);break;case"path":_e("path",me.path);break}}}return S===void 0?(fe.push(ee),fe):ce?ce.getUpdateObj():{}}}};function n(a,h,c){var m=h.type==="date",o=c.type==="date";if(!m&&!o)return a;for(var t=0;t<a.length;t++)for(var i=0;i<a[t].length;i++)for(var r=0;r+2<a[t][i].length;r+=2)m&&(a[t][i][r+1]=a[t][i][r+1].replace(" ","_")),o&&(a[t][i][r+2]=a[t][i][r+2].replace(" ","_"));return a}},{"../../../plots/cartesian/handle_outline":312,"../../../plots/cartesian/helpers":313,"../../dragelement/helpers":137,"./constants":205,"./helpers":208}],210:[function(z,le,ae){"use strict";var R=z("./constants"),L=z("../../lib");ae.rangeToShapePosition=function(N){return N.type==="log"?N.r2d:function(D){return D}},ae.shapePositionToRange=function(N){return N.type==="log"?N.d2r:function(D){return D}},ae.decodeDate=function(N){return function(D){return D.replace&&(D=D.replace("_"," ")),N(D)}},ae.encodeDate=function(N){return function(D){return N(D).replace(" ","_")}},ae.extractPathCoords=function(N,D){var p=[],w=N.match(R.segmentRE);return w.forEach(function(k){var d=D[k.charAt(0)].drawn;if(d!==void 0){var e=k.substr(1).match(R.paramRE);!e||e.length<d||p.push(L.cleanNumber(e[d]))}}),p},ae.getDataToPixel=function(N,D,p,w){var k=N._fullLayout._size,d;if(D)if(w==="domain")d=function(u){return D._length*(p?1-u:u)+D._offset};else{var e=ae.shapePositionToRange(D);d=function(u){return D._offset+D.r2p(e(u,!0))},D.type==="date"&&(d=ae.decodeDate(d))}else p?d=function(u){return k.t+k.h*(1-u)}:d=function(u){return k.l+k.w*u};return d},ae.getPixelToData=function(N,D,p,w){var k=N._fullLayout._size,d;if(D)if(w==="domain")d=function(u){var s=(u-D._offset)/D._length;return p?1-s:s};else{var e=ae.rangeToShapePosition(D);d=function(u){return e(D.p2r(u-D._offset))}}else p?d=function(u){return 1-(u-k.t)/k.h}:d=function(u){return(u-k.l)/k.w};return d},ae.roundPositionForSharpStrokeRendering=function(N,D){var p=Math.round(D%2)===1,w=Math.round(N);return p?w+.5:w},ae.makeOptionsAndPlotinfo=function(N,D){var p=N._fullLayout.shapes[D]||{},w=N._fullLayout._plots[p.xref+p.yref],k=!!w;return k?w._hadPlotinfo=!0:(w={},p.xref&&p.xref!=="paper"&&(w.xaxis=N._fullLayout[p.xref+"axis"]),p.yref&&p.yref!=="paper"&&(w.yaxis=N._fullLayout[p.yref+"axis"])),w.xsizemode=p.xsizemode,w.ysizemode=p.ysizemode,w.xanchor=p.xanchor,w.yanchor=p.yanchor,{options:p,plotinfo:w}}},{"../../lib":252,"./constants":201}],211:[function(z,le,ae){"use strict";var R=z("./draw");le.exports={moduleType:"component",name:"shapes",layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),supplyDrawNewShapeDefaults:z("./draw_newshape/defaults"),includeBasePlot:z("../../plots/cartesian/include_components")("shapes"),calcAutorange:z("./calc_autorange"),draw:R.draw,drawOne:R.drawOne}},{"../../plots/cartesian/include_components":314,"./attributes":199,"./calc_autorange":200,"./defaults":202,"./draw":203,"./draw_newshape/defaults":206}],212:[function(z,le,ae){"use strict";var R=z("../../plots/font_attributes"),L=z("../../plots/pad_attributes"),N=z("../../lib/extend").extendDeepAll,D=z("../../plot_api/edit_types").overrideAll,p=z("../../plots/animation_attributes"),w=z("../../plot_api/plot_template").templatedArray,k=z("./constants"),d=w("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});le.exports=D(w("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:d,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:N(L({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:p.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:R({})},font:R({}),activebgcolor:{valType:"color",dflt:k.gripBgActiveColor},bgcolor:{valType:"color",dflt:k.railBgColor},bordercolor:{valType:"color",dflt:k.railBorderColor},borderwidth:{valType:"number",min:0,dflt:k.railBorderWidth},ticklen:{valType:"number",min:0,dflt:k.tickLength},tickcolor:{valType:"color",dflt:k.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:k.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plot_api/plot_template":290,"../../plots/animation_attributes":295,"../../plots/font_attributes":332,"../../plots/pad_attributes":348,"./constants":213}],213:[function(z,le,ae){"use strict";le.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],214:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/array_container_defaults"),N=z("./attributes"),D=z("./constants"),p=D.name,w=N.steps;le.exports=function(u,s){L(u,s,{name:p,handleItemDefaults:k})};function k(e,u,s){function l(n,a){return R.coerce(e,u,N,n,a)}for(var b=L(e,u,{name:"steps",handleItemDefaults:d}),v=0,y=0;y<b.length;y++)b[y].visible&&v++;var T;if(v<2?T=u.visible=!1:T=l("visible"),!!T){u._stepCount=v;var _=u._visibleSteps=R.filterVisible(b),f=l("active");(b[f]||{}).visible||(u.active=_[0]._index),l("x"),l("y"),R.noneOrAll(e,u,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),R.coerceFont(l,"font",s.font);var g=l("currentvalue.visible");g&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),R.coerceFont(l,"currentvalue.font",u.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function d(e,u){function s(v,y){return R.coerce(e,u,w,v,y)}var l;if(e.method!=="skip"&&!Array.isArray(e.args)?l=u.visible=!1:l=s("visible"),l){s("method"),s("args");var b=s("label","step-"+u._index);s("value",b),s("execute")}}},{"../../lib":252,"../../plots/array_container_defaults":296,"./attributes":212,"./constants":213}],215:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../plots/plots"),N=z("../color"),D=z("../drawing"),p=z("../../lib"),w=p.strTranslate,k=z("../../lib/svg_text_utils"),d=z("../../plot_api/plot_template").arrayEditor,e=z("./constants"),u=z("../../constants/alignment"),s=u.LINE_SPACING,l=u.FROM_TL,b=u.FROM_BR;le.exports=function(C){var M=C._fullLayout,I=y(M,C),G=M._infolayer.selectAll("g."+e.containerClassName).data(I.length>0?[0]:[]);G.enter().append("g").classed(e.containerClassName,!0).style("cursor","ew-resize");function V(U){U._commandObserver&&(U._commandObserver.remove(),delete U._commandObserver),L.autoMargin(C,v(U))}if(G.exit().each(function(){R.select(this).selectAll("g."+e.groupClassName).each(V)}).remove(),I.length!==0){var q=G.selectAll("g."+e.groupClassName).data(I,T);q.enter().append("g").classed(e.groupClassName,!0),q.exit().each(V).remove();for(var ee=0;ee<I.length;ee++){var Q=I[ee];_(C,Q)}q.each(function(U){var O=R.select(this);i(U),L.manageCommandObserver(C,U,U._visibleSteps,function(Z){var B=O.data()[0];B.active!==Z.index&&(B._dragging||m(C,O,B,Z.index,!1,!0))}),f(C,R.select(this),U)})}};function v(S){return e.autoMarginIdRoot+S._index}function y(S,C){for(var M=S[e.name],I=[],G=0;G<M.length;G++){var V=M[G];!V.visible||(V._gd=C,I.push(V))}return I}function T(S){return S._index}function _(S,C){var M=D.tester.selectAll("g."+e.labelGroupClass).data(C._visibleSteps);M.enter().append("g").classed(e.labelGroupClass,!0);var I=0,G=0;M.each(function(j){var X=R.select(this),H=a(X,{step:j},C),K=H.node();if(K){var W=D.bBox(K);G=Math.max(G,W.height),I=Math.max(I,W.width)}}),M.remove();var V=C._dims={};V.inputAreaWidth=Math.max(e.railWidth,e.gripHeight);var q=S._fullLayout._size;V.lx=q.l+q.w*C.x,V.ly=q.t+q.h*(1-C.y),C.lenmode==="fraction"?V.outerLength=Math.round(q.w*C.len):V.outerLength=C.len,V.inputAreaStart=0,V.inputAreaLength=Math.round(V.outerLength-C.pad.l-C.pad.r);var ee=V.inputAreaLength-2*e.stepInset,Q=ee/(C._stepCount-1),U=I+e.labelPadding;if(V.labelStride=Math.max(1,Math.ceil(U/Q)),V.labelHeight=G,V.currentValueMaxWidth=0,V.currentValueHeight=0,V.currentValueTotalHeight=0,V.currentValueMaxLines=1,C.currentvalue.visible){var O=D.tester.append("g");M.each(function(j){var X=g(O,C,j.label),H=X.node()&&D.bBox(X.node())||{width:0,height:0},K=k.lineCount(X);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(H.width)),V.currentValueHeight=Math.max(V.currentValueHeight,Math.ceil(H.height)),V.currentValueMaxLines=Math.max(V.currentValueMaxLines,K)}),V.currentValueTotalHeight=V.currentValueHeight+C.currentvalue.offset,O.remove()}V.height=V.currentValueTotalHeight+e.tickOffset+C.ticklen+e.labelOffset+V.labelHeight+C.pad.t+C.pad.b;var Z="left";p.isRightAnchor(C)&&(V.lx-=V.outerLength,Z="right"),p.isCenterAnchor(C)&&(V.lx-=V.outerLength/2,Z="center");var B="top";p.isBottomAnchor(C)&&(V.ly-=V.height,B="bottom"),p.isMiddleAnchor(C)&&(V.ly-=V.height/2,B="middle"),V.outerLength=Math.ceil(V.outerLength),V.height=Math.ceil(V.height),V.lx=Math.round(V.lx),V.ly=Math.round(V.ly);var Y={y:C.y,b:V.height*b[B],t:V.height*l[B]};C.lenmode==="fraction"?(Y.l=0,Y.xl=C.x-C.len*l[Z],Y.r=0,Y.xr=C.x+C.len*b[Z]):(Y.x=C.x,Y.l=V.outerLength*l[Z],Y.r=V.outerLength*b[Z]),L.autoMargin(S,v(C),Y)}function f(S,C,M){(M.steps[M.active]||{}).visible||(M.active=M._visibleSteps[0]._index),C.call(g,M).call(P,M).call(h,M).call(t,M).call(E,S,M).call(n,S,M);var I=M._dims;D.setTranslate(C,I.lx+M.pad.l,I.ly+M.pad.t),C.call(r,M,!1),C.call(g,M)}function g(S,C,M){if(!!C.currentvalue.visible){var I=C._dims,G,V;switch(C.currentvalue.xanchor){case"right":G=I.inputAreaLength-e.currentValueInset-I.currentValueMaxWidth,V="left";break;case"center":G=I.inputAreaLength*.5,V="middle";break;default:G=e.currentValueInset,V="left"}var q=p.ensureSingle(S,"text",e.labelClass,function(B){B.attr({"text-anchor":V,"data-notex":1})}),ee=C.currentvalue.prefix?C.currentvalue.prefix:"";if(typeof M=="string")ee+=M;else{var Q=C.steps[C.active].label,U=C._gd._fullLayout._meta;U&&(Q=p.templateString(Q,U)),ee+=Q}C.currentvalue.suffix&&(ee+=C.currentvalue.suffix),q.call(D.font,C.currentvalue.font).text(ee).call(k.convertToTspans,C._gd);var O=k.lineCount(q),Z=(I.currentValueMaxLines+1-O)*C.currentvalue.font.size*s;return k.positionText(q,G,Z),q}}function n(S,C,M){var I=p.ensureSingle(S,"rect",e.gripRectClass,function(G){G.call(o,C,S,M).style("pointer-events","all")});I.attr({width:e.gripWidth,height:e.gripHeight,rx:e.gripRadius,ry:e.gripRadius}).call(N.stroke,M.bordercolor).call(N.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px")}function a(S,C,M){var I=p.ensureSingle(S,"text",e.labelClass,function(q){q.attr({"text-anchor":"middle","data-notex":1})}),G=C.step.label,V=M._gd._fullLayout._meta;return V&&(G=p.templateString(G,V)),I.call(D.font,M.font).text(G).call(k.convertToTspans,M._gd),I}function h(S,C){var M=p.ensureSingle(S,"g",e.labelsClass),I=C._dims,G=M.selectAll("g."+e.labelGroupClass).data(I.labelSteps);G.enter().append("g").classed(e.labelGroupClass,!0),G.exit().remove(),G.each(function(V){var q=R.select(this);q.call(a,V,C),D.setTranslate(q,x(C,V.fraction),e.tickOffset+C.ticklen+C.font.size*s+e.labelOffset+I.currentValueTotalHeight)})}function c(S,C,M,I,G){var V=Math.round(I*(M._stepCount-1)),q=M._visibleSteps[V]._index;q!==M.active&&m(S,C,M,q,!0,G)}function m(S,C,M,I,G,V){var q=M.active;M.active=I,d(S.layout,e.name,M).applyUpdate("active",I);var ee=M.steps[M.active];C.call(r,M,V),C.call(g,M),S.emit("plotly_sliderchange",{slider:M,step:M.steps[M.active],interaction:G,previousActive:q}),ee&&ee.method&&G&&(C._nextMethod?(C._nextMethod.step=ee,C._nextMethod.doCallback=G,C._nextMethod.doTransition=V):(C._nextMethod={step:ee,doCallback:G,doTransition:V},C._nextMethodRaf=window.requestAnimationFrame(function(){var Q=C._nextMethod.step;!Q.method||(Q.execute&&L.executeAPICommand(S,Q.method,Q.args),C._nextMethod=null,C._nextMethodRaf=null)})))}function o(S,C,M){var I=M.node(),G=R.select(C);function V(){return M.data()[0]}function q(){var ee=V();C.emit("plotly_sliderstart",{slider:ee});var Q=M.select("."+e.gripRectClass);R.event.stopPropagation(),R.event.preventDefault(),Q.call(N.fill,ee.activebgcolor);var U=A(ee,R.mouse(I)[0]);c(C,M,ee,U,!0),ee._dragging=!0;function O(){var B=V(),Y=A(B,R.mouse(I)[0]);c(C,M,B,Y,!1)}G.on("mousemove",O),G.on("touchmove",O);function Z(){var B=V();B._dragging=!1,Q.call(N.fill,B.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),C.emit("plotly_sliderend",{slider:B,step:B.steps[B.active]})}G.on("mouseup",Z),G.on("touchend",Z)}S.on("mousedown",q),S.on("touchstart",q)}function t(S,C){var M=S.selectAll("rect."+e.tickRectClass).data(C._visibleSteps),I=C._dims;M.enter().append("rect").classed(e.tickRectClass,!0),M.exit().remove(),M.attr({width:C.tickwidth+"px","shape-rendering":"crispEdges"}),M.each(function(G,V){var q=V%I.labelStride===0,ee=R.select(this);ee.attr({height:q?C.ticklen:C.minorticklen}).call(N.fill,C.tickcolor),D.setTranslate(ee,x(C,V/(C._stepCount-1))-.5*C.tickwidth,(q?e.tickOffset:e.minorTickOffset)+I.currentValueTotalHeight)})}function i(S){var C=S._dims;C.labelSteps=[];for(var M=S._stepCount,I=0;I<M;I+=C.labelStride)C.labelSteps.push({fraction:I/(M-1),step:S._visibleSteps[I]})}function r(S,C,M){for(var I=S.select("rect."+e.gripRectClass),G=0,V=0;V<C._stepCount;V++)if(C._visibleSteps[V]._index===C.active){G=V;break}var q=x(C,G/(C._stepCount-1));if(!C._invokingCommand){var ee=I;M&&C.transition.duration>0&&(ee=ee.transition().duration(C.transition.duration).ease(C.transition.easing)),ee.attr("transform",w(q-e.gripWidth*.5,C._dims.currentValueTotalHeight))}}function x(S,C){var M=S._dims;return M.inputAreaStart+e.stepInset+(M.inputAreaLength-2*e.stepInset)*Math.min(1,Math.max(0,C))}function A(S,C){var M=S._dims;return Math.min(1,Math.max(0,(C-e.stepInset-M.inputAreaStart)/(M.inputAreaLength-2*e.stepInset-2*M.inputAreaStart)))}function E(S,C,M){var I=M._dims,G=p.ensureSingle(S,"rect",e.railTouchRectClass,function(V){V.call(o,C,S,M).style("pointer-events","all")});G.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,e.tickOffset+M.ticklen+I.labelHeight)}).call(N.fill,M.bgcolor).attr("opacity",0),D.setTranslate(G,0,I.currentValueTotalHeight)}function P(S,C){var M=C._dims,I=M.inputAreaLength-e.railInset*2,G=p.ensureSingle(S,"rect",e.railRectClass);G.attr({width:I,height:e.railWidth,rx:e.railRadius,ry:e.railRadius,"shape-rendering":"crispEdges"}).call(N.stroke,C.bordercolor).call(N.fill,C.bgcolor).style("stroke-width",C.borderwidth+"px"),D.setTranslate(G,e.railInset,(M.inputAreaWidth-e.railWidth)*.5+M.currentValueTotalHeight)}},{"../../constants/alignment":224,"../../lib":252,"../../lib/svg_text_utils":277,"../../plot_api/plot_template":290,"../../plots/plots":349,"../color":119,"../drawing":141,"./constants":213,"@plotly/d3":16}],216:[function(z,le,ae){"use strict";var R=z("./constants");le.exports={moduleType:"component",name:R.name,layoutAttributes:z("./attributes"),supplyLayoutDefaults:z("./defaults"),draw:z("./draw")}},{"./attributes":212,"./constants":213,"./defaults":214,"./draw":215}],217:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("../../plots/plots"),D=z("../../registry"),p=z("../../lib"),w=p.strTranslate,k=z("../drawing"),d=z("../color"),e=z("../../lib/svg_text_utils"),u=z("../../constants/interactions"),s=z("../../constants/alignment").OPPOSITE_SIDE,l=/ [XY][0-9]* /;function b(v,y,T){var _=T.propContainer,f=T.propName,g=T.placeholder,n=T.traceIndex,a=T.avoid||{},h=T.attributes,c=T.transform,m=T.containerGroup,o=v._fullLayout,t=1,i=!1,r=_.title,x=(r&&r.text?r.text:"").trim(),A=r&&r.font?r.font:{},E=A.family,P=A.size,S=A.color,C;f==="title.text"?C="titleText":f.indexOf("axis")!==-1?C="axisTitleText":f.indexOf("colorbar"!==-1)&&(C="colorbarTitleText");var M=v._context.edits[C];x===""?t=0:x.replace(l," % ")===g.replace(l," % ")&&(t=.2,i=!0,M||(x="")),T._meta?x=p.templateString(x,T._meta):o._meta&&(x=p.templateString(x,o._meta));var I=x||M,G;m||(m=p.ensureSingle(o._infolayer,"g","g-"+y),G=o._hColorbarMoveTitle);var V=m.selectAll("text").data(I?[0]:[]);if(V.enter().append("text"),V.text(x).attr("class",y),V.exit().remove(),!I)return m;function q(O){p.syncOrAsync([ee,Q],O)}function ee(O){var Z;return!c&&G&&(c={}),c?(Z="",c.rotate&&(Z+="rotate("+[c.rotate,h.x,h.y]+")"),(c.offset||G)&&(Z+=w(0,(c.offset||0)-(G||0)))):Z=null,O.attr("transform",Z),O.style({"font-family":E,"font-size":R.round(P,2)+"px",fill:d.rgb(S),opacity:t*d.opacity(S),"font-weight":N.fontWeight}).attr(h).call(e.convertToTspans,v),N.previousPromises(v)}function Q(O){var Z=R.select(O.node().parentNode);if(a&&a.selection&&a.side&&x){Z.attr("transform",null);var B=s[a.side],Y=a.side==="left"||a.side==="top"?-1:1,j=L(a.pad)?a.pad:2,X=k.bBox(Z.node()),H={left:0,top:0,right:o.width,bottom:o.height},K=a.maxShift||Y*(H[a.side]-X[a.side]),W=0;if(K<0)W=K;else{var $=a.offsetLeft||0,re=a.offsetTop||0;X.left-=$,X.right-=$,X.top-=re,X.bottom-=re,a.selection.each(function(){var ve=k.bBox(this);p.bBoxIntersect(X,ve,j)&&(W=Math.max(W,Y*(ve[a.side]-X[B])+j))}),W=Math.min(K,W)}if(W>0||K<0){var de={left:[-W,0],right:[W,0],top:[0,-W],bottom:[0,W]}[a.side];Z.attr("transform",w(de[0],de[1]))}}}V.call(q);function U(){t=0,i=!0,V.text(g).on("mouseover.opacity",function(){R.select(this).transition().duration(u.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){R.select(this).transition().duration(u.HIDE_PLACEHOLDER).style("opacity",0)})}return M&&(x?V.on(".opacity",null):U(),V.call(e.makeEditable,{gd:v}).on("edit",function(O){n!==void 0?D.call("_guiRestyle",v,f,O,n):D.call("_guiRelayout",v,f,O)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(O){this.text(O||" ").call(e.positionText,h.x,h.y)})),V.classed("js-placeholder",i),m}le.exports={draw:b}},{"../../constants/alignment":224,"../../constants/interactions":230,"../../lib":252,"../../lib/svg_text_utils":277,"../../plots/plots":349,"../../registry":352,"../color":119,"../drawing":141,"@plotly/d3":16,"fast-isnumeric":31}],218:[function(z,le,ae){"use strict";var R=z("../../plots/font_attributes"),L=z("../color/attributes"),N=z("../../lib/extend").extendFlat,D=z("../../plot_api/edit_types").overrideAll,p=z("../../plots/pad_attributes"),w=z("../../plot_api/plot_template").templatedArray,k=w("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});le.exports=D(w("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:k,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:N(p({editType:"arraydraw"}),{}),font:R({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:L.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plot_api/plot_template":290,"../../plots/font_attributes":332,"../../plots/pad_attributes":348,"../color/attributes":118}],219:[function(z,le,ae){"use strict";le.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],220:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../plots/array_container_defaults"),N=z("./attributes"),D=z("./constants"),p=D.name,w=N.buttons;le.exports=function(u,s){var l={name:p,handleItemDefaults:k};L(u,s,l)};function k(e,u,s){function l(y,T){return R.coerce(e,u,N,y,T)}var b=L(e,u,{name:"buttons",handleItemDefaults:d}),v=l("visible",b.length>0);!v||(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),R.noneOrAll(e,u,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),R.coerceFont(l,"font",s.font),l("bgcolor",s.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function d(e,u){function s(b,v){return R.coerce(e,u,w,b,v)}var l=s("visible",e.method==="skip"||Array.isArray(e.args));l&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":252,"../../plots/array_container_defaults":296,"./attributes":218,"./constants":219}],221:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../plots/plots"),N=z("../color"),D=z("../drawing"),p=z("../../lib"),w=z("../../lib/svg_text_utils"),k=z("../../plot_api/plot_template").arrayEditor,d=z("../../constants/alignment").LINE_SPACING,e=z("./constants"),u=z("./scrollbox");le.exports=function(A){var E=A._fullLayout,P=p.filterVisible(E[e.name]);function S(Q){L.autoMargin(A,t(Q))}var C=E._menulayer.selectAll("g."+e.containerClassName).data(P.length>0?[0]:[]);if(C.enter().append("g").classed(e.containerClassName,!0).style("cursor","pointer"),C.exit().each(function(){R.select(this).selectAll("g."+e.headerGroupClassName).each(S)}).remove(),P.length!==0){var M=C.selectAll("g."+e.headerGroupClassName).data(P,s);M.enter().append("g").classed(e.headerGroupClassName,!0);for(var I=p.ensureSingle(C,"g",e.dropdownButtonGroupClassName,function(Q){Q.style("pointer-events","all")}),G=0;G<P.length;G++){var V=P[G];o(A,V)}var q="updatemenus"+E._uid,ee=new u(A,I,q);M.enter().size()&&(I.node().parentNode.appendChild(I.node()),I.call(r)),M.exit().each(function(Q){I.call(r),S(Q)}).remove(),M.each(function(Q){var U=R.select(this),O=Q.type==="dropdown"?I:null;L.manageCommandObserver(A,Q,Q.buttons,function(Z){v(A,Q,Q.buttons[Z.index],U,O,ee,Z.index,!0)}),Q.type==="dropdown"?(y(A,U,I,ee,Q),b(I,Q)&&T(A,U,I,ee,Q)):T(A,U,null,null,Q)})}};function s(x){return x._index}function l(x){return+x.attr(e.menuIndexAttrName)==-1}function b(x,A){return+x.attr(e.menuIndexAttrName)===A._index}function v(x,A,E,P,S,C,M,I){A.active=M,k(x.layout,e.name,A).applyUpdate("active",M),A.type==="buttons"?T(x,P,null,null,A):A.type==="dropdown"&&(S.attr(e.menuIndexAttrName,"-1"),y(x,P,S,C,A),I||T(x,P,S,C,A))}function y(x,A,E,P,S){var C=p.ensureSingle(A,"g",e.headerClassName,function(Q){Q.style("pointer-events","all")}),M=S._dims,I=S.active,G=S.buttons[I]||e.blankHeaderOpts,V={y:S.pad.t,yPad:0,x:S.pad.l,xPad:0,index:0},q={width:M.headerWidth,height:M.headerHeight};C.call(g,S,G,x).call(i,S,V,q);var ee=p.ensureSingle(A,"text",e.headerArrowClassName,function(Q){Q.attr("text-anchor","end").call(D.font,S.font).text(e.arrowSymbol[S.direction])});ee.attr({x:M.headerWidth-e.arrowOffsetX+S.pad.l,y:M.headerHeight/2+e.textOffsetY+S.pad.t}),C.on("click",function(){E.call(r,String(b(E,S)?-1:S._index)),T(x,A,E,P,S)}),C.on("mouseover",function(){C.call(c)}),C.on("mouseout",function(){C.call(m,S)}),D.setTranslate(A,M.lx,M.ly)}function T(x,A,E,P,S){E||(E=A,E.attr("pointer-events","all"));var C=!l(E)||S.type==="buttons"?S.buttons:[],M=S.type==="dropdown"?e.dropdownButtonClassName:e.buttonClassName,I=E.selectAll("g."+M).data(p.filterVisible(C)),G=I.enter().append("g").classed(M,!0),V=I.exit();S.type==="dropdown"?(G.attr("opacity","0").transition().attr("opacity","1"),V.transition().attr("opacity","0").remove()):V.remove();var q=0,ee=0,Q=S._dims,U=["up","down"].indexOf(S.direction)!==-1;S.type==="dropdown"&&(U?ee=Q.headerHeight+e.gapButtonHeader:q=Q.headerWidth+e.gapButtonHeader),S.type==="dropdown"&&S.direction==="up"&&(ee=-e.gapButtonHeader+e.gapButton-Q.openHeight),S.type==="dropdown"&&S.direction==="left"&&(q=-e.gapButtonHeader+e.gapButton-Q.openWidth);var O={x:Q.lx+q+S.pad.l,y:Q.ly+ee+S.pad.t,yPad:e.gapButton,xPad:e.gapButton,index:0},Z={l:O.x+S.borderwidth,t:O.y+S.borderwidth};I.each(function(B,Y){var j=R.select(this);j.call(g,S,B,x).call(i,S,O),j.on("click",function(){R.event.defaultPrevented||(B.execute&&(B.args2&&S.active===Y?(v(x,S,B,A,E,P,-1),L.executeAPICommand(x,B.method,B.args2)):(v(x,S,B,A,E,P,Y),L.executeAPICommand(x,B.method,B.args))),x.emit("plotly_buttonclicked",{menu:S,button:B,active:S.active}))}),j.on("mouseover",function(){j.call(c)}),j.on("mouseout",function(){j.call(m,S),I.call(h,S)})}),I.call(h,S),U?(Z.w=Math.max(Q.openWidth,Q.headerWidth),Z.h=O.y-Z.t):(Z.w=O.x-Z.l,Z.h=Math.max(Q.openHeight,Q.headerHeight)),Z.direction=S.direction,P&&(I.size()?_(x,A,E,P,S,Z):f(P))}function _(x,A,E,P,S,C){var M=S.direction,I=M==="up"||M==="down",G=S._dims,V=S.active,q,ee,Q;if(I)for(ee=0,Q=0;Q<V;Q++)ee+=G.heights[Q]+e.gapButton;else for(q=0,Q=0;Q<V;Q++)q+=G.widths[Q]+e.gapButton;P.enable(C,q,ee),P.hbar&&P.hbar.attr("opacity","0").transition().attr("opacity","1"),P.vbar&&P.vbar.attr("opacity","0").transition().attr("opacity","1")}function f(x){var A=!!x.hbar,E=!!x.vbar;A&&x.hbar.transition().attr("opacity","0").each("end",function(){A=!1,E||x.disable()}),E&&x.vbar.transition().attr("opacity","0").each("end",function(){E=!1,A||x.disable()})}function g(x,A,E,P){x.call(n,A).call(a,A,E,P)}function n(x,A){var E=p.ensureSingle(x,"rect",e.itemRectClassName,function(P){P.attr({rx:e.rx,ry:e.ry,"shape-rendering":"crispEdges"})});E.call(N.stroke,A.bordercolor).call(N.fill,A.bgcolor).style("stroke-width",A.borderwidth+"px")}function a(x,A,E,P){var S=p.ensureSingle(x,"text",e.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),C=E.label,M=P._fullLayout._meta;M&&(C=p.templateString(C,M)),S.call(D.font,A.font).text(C).call(w.convertToTspans,P)}function h(x,A){var E=A.active;x.each(function(P,S){var C=R.select(this);S===E&&A.showactive&&C.select("rect."+e.itemRectClassName).call(N.fill,e.activeColor)})}function c(x){x.select("rect."+e.itemRectClassName).call(N.fill,e.hoverColor)}function m(x,A){x.select("rect."+e.itemRectClassName).call(N.fill,A.bgcolor)}function o(x,A){var E=A._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},P=D.tester.selectAll("g."+e.dropdownButtonClassName).data(p.filterVisible(A.buttons));P.enter().append("g").classed(e.dropdownButtonClassName,!0);var S=["up","down"].indexOf(A.direction)!==-1;P.each(function(q,ee){var Q=R.select(this);Q.call(g,A,q,x);var U=Q.select("."+e.itemTextClassName),O=U.node()&&D.bBox(U.node()).width,Z=Math.max(O+e.textPadX,e.minWidth),B=A.font.size*d,Y=w.lineCount(U),j=Math.max(B*Y,e.minHeight)+e.textOffsetY;j=Math.ceil(j),Z=Math.ceil(Z),E.widths[ee]=Z,E.heights[ee]=j,E.height1=Math.max(E.height1,j),E.width1=Math.max(E.width1,Z),S?(E.totalWidth=Math.max(E.totalWidth,Z),E.openWidth=E.totalWidth,E.totalHeight+=j+e.gapButton,E.openHeight+=j+e.gapButton):(E.totalWidth+=Z+e.gapButton,E.openWidth+=Z+e.gapButton,E.totalHeight=Math.max(E.totalHeight,j),E.openHeight=E.totalHeight)}),S?E.totalHeight-=e.gapButton:E.totalWidth-=e.gapButton,E.headerWidth=E.width1+e.arrowPadX,E.headerHeight=E.height1,A.type==="dropdown"&&(S?(E.width1+=e.arrowPadX,E.totalHeight=E.height1):E.totalWidth=E.width1,E.totalWidth+=e.arrowPadX),P.remove();var C=E.totalWidth+A.pad.l+A.pad.r,M=E.totalHeight+A.pad.t+A.pad.b,I=x._fullLayout._size;E.lx=I.l+I.w*A.x,E.ly=I.t+I.h*(1-A.y);var G="left";p.isRightAnchor(A)&&(E.lx-=C,G="right"),p.isCenterAnchor(A)&&(E.lx-=C/2,G="center");var V="top";p.isBottomAnchor(A)&&(E.ly-=M,V="bottom"),p.isMiddleAnchor(A)&&(E.ly-=M/2,V="middle"),E.totalWidth=Math.ceil(E.totalWidth),E.totalHeight=Math.ceil(E.totalHeight),E.lx=Math.round(E.lx),E.ly=Math.round(E.ly),L.autoMargin(x,t(A),{x:A.x,y:A.y,l:C*({right:1,center:.5}[G]||0),r:C*({left:1,center:.5}[G]||0),b:M*({top:1,middle:.5}[V]||0),t:M*({bottom:1,middle:.5}[V]||0)})}function t(x){return e.autoMarginIdRoot+x._index}function i(x,A,E,P){P=P||{};var S=x.select("."+e.itemRectClassName),C=x.select("."+e.itemTextClassName),M=A.borderwidth,I=E.index,G=A._dims;D.setTranslate(x,M+E.x,M+E.y);var V=["up","down"].indexOf(A.direction)!==-1,q=P.height||(V?G.heights[I]:G.height1);S.attr({x:0,y:0,width:P.width||(V?G.width1:G.widths[I]),height:q});var ee=A.font.size*d,Q=w.lineCount(C),U=(Q-1)*ee/2;w.positionText(C,e.textOffsetX,q/2-U+e.textOffsetY),V?E.y+=G.heights[I]+E.yPad:E.x+=G.widths[I]+E.xPad,E.index++}function r(x,A){x.attr(e.menuIndexAttrName,A||"-1").selectAll("g."+e.dropdownButtonClassName).remove()}},{"../../constants/alignment":224,"../../lib":252,"../../lib/svg_text_utils":277,"../../plot_api/plot_template":290,"../../plots/plots":349,"../color":119,"../drawing":141,"./constants":219,"./scrollbox":223,"@plotly/d3":16}],222:[function(z,le,ae){arguments[4][216][0].apply(ae,arguments)},{"./attributes":218,"./constants":219,"./defaults":220,"./draw":221,dup:216}],223:[function(z,le,ae){"use strict";le.exports=p;var R=z("@plotly/d3"),L=z("../color"),N=z("../drawing"),D=z("../../lib");function p(w,k,d){this.gd=w,this.container=k,this.id=d,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}p.barWidth=2,p.barLength=20,p.barRadius=2,p.barPad=1,p.barColor="#808BA4",p.prototype.enable=function(k,d,e){var u=this.gd._fullLayout,s=u.width,l=u.height;this.position=k;var b=this.position.l,v=this.position.w,y=this.position.t,T=this.position.h,_=this.position.direction,f=_==="down",g=_==="left",n=_==="right",a=_==="up",h=v,c=T,m,o,t,i;!f&&!g&&!n&&!a&&(this.position.direction="down",f=!0);var r=f||a;r?(m=b,o=m+h,f?(t=y,i=Math.min(t+c,l),c=i-t):(i=y+c,t=Math.max(i-c,0),c=i-t)):(t=y,i=t+c,g?(o=b+h,m=Math.max(o-h,0),h=o-m):(m=b,o=Math.min(m+h,s),h=o-m)),this._box={l:m,t,w:h,h:c};var x=v>h,A=p.barLength+2*p.barPad,E=p.barWidth+2*p.barPad,P=b,S=y+T;S+E>l&&(S=l-E);var C=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(L.fill,p.barColor),x?(this.hbar=C.attr({rx:p.barRadius,ry:p.barRadius,x:P,y:S,width:A,height:E}),this._hbarXMin=P+A/2,this._hbarTranslateMax=h-A):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var M=T>c,I=p.barWidth+2*p.barPad,G=p.barLength+2*p.barPad,V=b+v,q=y;V+I>s&&(V=s-I);var ee=this.container.selectAll("rect.scrollbar-vertical").data(M?[0]:[]);ee.exit().on(".drag",null).remove(),ee.enter().append("rect").classed("scrollbar-vertical",!0).call(L.fill,p.barColor),M?(this.vbar=ee.attr({rx:p.barRadius,ry:p.barRadius,x:V,y:q,width:I,height:G}),this._vbarYMin=q+G/2,this._vbarTranslateMax=c-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Q=this.id,U=m-.5,O=M?o+I+.5:o+.5,Z=t-.5,B=x?i+E+.5:i+.5,Y=u._topdefs.selectAll("#"+Q).data(x||M?[0]:[]);if(Y.exit().remove(),Y.enter().append("clipPath").attr("id",Q).append("rect"),x||M?(this._clipRect=Y.select("rect").attr({x:Math.floor(U),y:Math.floor(Z),width:Math.ceil(O)-Math.floor(U),height:Math.ceil(B)-Math.floor(Z)}),this.container.call(N.setClipUrl,Q,this.gd),this.bg.attr({x:b,y,width:v,height:T})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(N.setClipUrl,null),delete this._clipRect),x||M){var j=R.behavior.drag().on("dragstart",function(){R.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var X=R.behavior.drag().on("dragstart",function(){R.event.sourceEvent.preventDefault(),R.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(X),M&&this.vbar.on(".drag",null).call(X)}this.setTranslate(d,e)},p.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(N.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},p.prototype._onBoxDrag=function(){var k=this.translateX,d=this.translateY;this.hbar&&(k-=R.event.dx),this.vbar&&(d-=R.event.dy),this.setTranslate(k,d)},p.prototype._onBoxWheel=function(){var k=this.translateX,d=this.translateY;this.hbar&&(k+=R.event.deltaY),this.vbar&&(d+=R.event.deltaY),this.setTranslate(k,d)},p.prototype._onBarDrag=function(){var k=this.translateX,d=this.translateY;if(this.hbar){var e=k+this._hbarXMin,u=e+this._hbarTranslateMax,s=D.constrain(R.event.x,e,u),l=(s-e)/(u-e),b=this.position.w-this._box.w;k=l*b}if(this.vbar){var v=d+this._vbarYMin,y=v+this._vbarTranslateMax,T=D.constrain(R.event.y,v,y),_=(T-v)/(y-v),f=this.position.h-this._box.h;d=_*f}this.setTranslate(k,d)},p.prototype.setTranslate=function(k,d){var e=this.position.w-this._box.w,u=this.position.h-this._box.h;if(k=D.constrain(k||0,0,e),d=D.constrain(d||0,0,u),this.translateX=k,this.translateY=d,this.container.call(N.setTranslate,this._box.l-this.position.l-k,this._box.t-this.position.t-d),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+k-.5),y:Math.floor(this.position.t+d-.5)}),this.hbar){var s=k/e;this.hbar.call(N.setTranslate,k+s*this._hbarTranslateMax,d)}if(this.vbar){var l=d/u;this.vbar.call(N.setTranslate,k,d+l*this._vbarTranslateMax)}}},{"../../lib":252,"../color":119,"../drawing":141,"@plotly/d3":16}],224:[function(z,le,ae){"use strict";le.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],225:[function(z,le,ae){"use strict";le.exports={axisRefDescription:function(R,L,N){return["If set to a",R,"axis id (e.g. *"+R+"* or","*"+R+"2*), the `"+R+"` position refers to a",R,"coordinate. If set to *paper*, the `"+R+"`","position refers to the distance from the",L,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",L,"("+N+"). If set to a",R,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",L,"of the domain of that axis: e.g.,","*"+R+"2 domain* refers to the domain of the second",R," axis and a",R,"position of 0.5 refers to the","point between the",L,"and the",N,"of the domain of the","second",R,"axis."].join(" ")}}},{}],226:[function(z,le,ae){"use strict";le.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],227:[function(z,le,ae){"use strict";le.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],228:[function(z,le,ae){"use strict";le.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],229:[function(z,le,ae){"use strict";le.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],230:[function(z,le,ae){"use strict";le.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],231:[function(z,le,ae){"use strict";le.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],232:[function(z,le,ae){"use strict";ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],233:[function(z,le,ae){"use strict";ae.version=z("./version").version,z("native-promise-only"),z("../build/plotcss");for(var R=z("./registry"),L=ae.register=R.register,N=z("./plot_api"),D=Object.keys(N),p=0;p<D.length;p++){var w=D[p];w.charAt(0)!=="_"&&(ae[w]=N[w]),L({moduleType:"apiMethod",name:w,fn:N[w]})}L(z("./traces/scatter")),L([z("./components/legend"),z("./components/fx"),z("./components/annotations"),z("./components/annotations3d"),z("./components/shapes"),z("./components/images"),z("./components/updatemenus"),z("./components/sliders"),z("./components/rangeslider"),z("./components/rangeselector"),z("./components/grid"),z("./components/errorbars"),z("./components/colorscale"),z("./components/colorbar"),z("./components/modebar")]),L([z("./locale-en"),z("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(L(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=z("./fonts/ploticon");var k=z("./components/fx"),d=z("./plots/plots");ae.Plots={resize:d.resize,graphJson:d.graphJson,sendDataToCloud:d.sendDataToCloud},ae.Fx={hover:k.hover,unhover:k.unhover,loneHover:k.loneHover,loneUnhover:k.loneUnhover},ae.Snapshot=z("./snapshot"),ae.PlotSchema=z("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":110,"./components/annotations3d":115,"./components/colorbar":125,"./components/colorscale":131,"./components/errorbars":147,"./components/fx":159,"./components/grid":163,"./components/images":168,"./components/legend":176,"./components/modebar":182,"./components/rangeselector":190,"./components/rangeslider":197,"./components/shapes":211,"./components/sliders":216,"./components/updatemenus":222,"./fonts/ploticon":234,"./locale-en":281,"./locale-en-us":280,"./plot_api":285,"./plot_api/plot_schema":289,"./plots/plots":349,"./registry":352,"./snapshot":357,"./traces/scatter":393,"./version":434,"native-promise-only":70}],234:[function(z,le,ae){"use strict";le.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],235:[function(z,le,ae){"use strict";ae.isLeftAnchor=function(L){return L.xanchor==="left"||L.xanchor==="auto"&&L.x<=1/3},ae.isCenterAnchor=function(L){return L.xanchor==="center"||L.xanchor==="auto"&&L.x>1/3&&L.x<2/3},ae.isRightAnchor=function(L){return L.xanchor==="right"||L.xanchor==="auto"&&L.x>=2/3},ae.isTopAnchor=function(L){return L.yanchor==="top"||L.yanchor==="auto"&&L.y>=2/3},ae.isMiddleAnchor=function(L){return L.yanchor==="middle"||L.yanchor==="auto"&&L.y>1/3&&L.y<2/3},ae.isBottomAnchor=function(L){return L.yanchor==="bottom"||L.yanchor==="auto"&&L.y<=1/3}},{}],236:[function(z,le,ae){"use strict";var R=z("./mod"),L=R.mod,N=R.modHalf,D=Math.PI,p=2*D;function w(_){return _/180*D}function k(_){return _/D*180}function d(_){return Math.abs(_[1]-_[0])>p-1e-14}function e(_,f){return N(f-_,p)}function u(_,f){return Math.abs(e(_,f))}function s(_,f){if(d(f))return!0;var g,n;f[0]<f[1]?(g=f[0],n=f[1]):(g=f[1],n=f[0]),g=L(g,p),n=L(n,p),g>n&&(n+=p);var a=L(_,p),h=a+p;return a>=g&&a<=n||h>=g&&h<=n}function l(_,f,g,n){if(!s(f,n))return!1;var a,h;return g[0]<g[1]?(a=g[0],h=g[1]):(a=g[1],h=g[0]),_>=a&&_<=h}function b(_,f,g,n,a,h,c){a=a||0,h=h||0;var m=d([g,n]),o,t,i,r,x;m?(o=0,t=D,i=p):g<n?(o=g,i=n):(o=n,i=g),_<f?(r=_,x=f):(r=f,x=_);function A(C,M){return[C*Math.cos(M)+a,h-C*Math.sin(M)]}var E=Math.abs(i-o)<=D?0:1;function P(C,M,I){return"A"+[C,C]+" "+[0,E,I]+" "+A(C,M)}var S;return m?r===null?S="M"+A(x,o)+P(x,t,0)+P(x,i,0)+"Z":S="M"+A(r,o)+P(r,t,0)+P(r,i,0)+"ZM"+A(x,o)+P(x,t,1)+P(x,i,1)+"Z":r===null?(S="M"+A(x,o)+P(x,i,0),c&&(S+="L0,0Z")):S="M"+A(r,o)+"L"+A(x,o)+P(x,i,0)+"L"+A(r,i)+P(r,o,1)+"Z",S}function v(_,f,g,n,a){return b(null,_,f,g,n,a,0)}function y(_,f,g,n,a){return b(null,_,f,g,n,a,1)}function T(_,f,g,n,a,h){return b(_,f,g,n,a,h,1)}le.exports={deg2rad:w,rad2deg:k,angleDelta:e,angleDist:u,isFullCircle:d,isAngleInsideSector:s,isPtInsideSector:l,pathArc:v,pathSector:y,pathAnnulus:T}},{"./mod":259}],237:[function(z,le,ae){"use strict";var R=Array.isArray,L=ArrayBuffer,N=DataView;function D(d){return L.isView(d)&&!(d instanceof N)}ae.isTypedArray=D;function p(d){return R(d)||D(d)}ae.isArrayOrTypedArray=p;function w(d){return!p(d[0])}ae.isArray1D=w,ae.ensureArray=function(d,e){return R(d)||(d=[]),d.length=e,d},ae.concat=function(){var d=[],e=!0,u=0,s,l,b,v,y,T,_,f;for(b=0;b<arguments.length;b++)v=arguments[b],T=v.length,T&&(l?d.push(v):(l=v,y=T),R(v)?s=!1:(e=!1,u?s!==v.constructor&&(s=!1):s=v.constructor),u+=T);if(!u)return[];if(!d.length)return l;if(e)return l.concat.apply(l,d);if(s){for(_=new s(u),_.set(l),b=0;b<d.length;b++)v=d[b],_.set(v,y),y+=v.length;return _}for(_=new Array(u),f=0;f<l.length;f++)_[f]=l[f];for(b=0;b<d.length;b++){for(v=d[b],f=0;f<v.length;f++)_[y+f]=v[f];y+=f}return _},ae.maxRowLength=function(d){return k(d,Math.max,0)},ae.minRowLength=function(d){return k(d,Math.min,1/0)};function k(d,e,u){if(p(d))if(p(d[0])){for(var s=u,l=0;l<d.length;l++)s=e(s,d[l].length);return s}else return d.length;return 0}},{}],238:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../constants/numerical").BADNUM,N=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;le.exports=function(p){return typeof p=="string"&&(p=p.replace(N,"")),R(p)?Number(p):L}},{"../constants/numerical":231,"fast-isnumeric":31}],239:[function(z,le,ae){"use strict";le.exports=function(L){var N=L._fullLayout;N._glcanvas&&N._glcanvas.size()&&N._glcanvas.each(function(D){D.regl&&D.regl.clear({color:!0,depth:!0})})}},{}],240:[function(z,le,ae){"use strict";le.exports=function(L){L._responsiveChartHandler&&(window.removeEventListener("resize",L._responsiveChartHandler),delete L._responsiveChartHandler)}},{}],241:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("tinycolor2"),N=z("../plots/attributes"),D=z("../components/colorscale/scales"),p=z("../components/color"),w=z("../constants/interactions").DESELECTDIM,k=z("./nested_property"),d=z("./regex").counter,e=z("./mod").modHalf,u=z("./array").isArrayOrTypedArray;ae.valObjectMeta={data_array:{coerceFunction:function(l,b,v){u(l)?b.set(l):v!==void 0&&b.set(v)}},enumerated:{coerceFunction:function(l,b,v,y){y.coerceNumber&&(l=+l),y.values.indexOf(l)===-1?b.set(v):b.set(l)},validateFunction:function(l,b){b.coerceNumber&&(l=+l);for(var v=b.values,y=0;y<v.length;y++){var T=String(v[y]);if(T.charAt(0)==="/"&&T.charAt(T.length-1)==="/"){var _=new RegExp(T.substr(1,T.length-2));if(_.test(l))return!0}else if(l===v[y])return!0}return!1}},boolean:{coerceFunction:function(l,b,v){l===!0||l===!1?b.set(l):b.set(v)}},number:{coerceFunction:function(l,b,v,y){!R(l)||y.min!==void 0&&l<y.min||y.max!==void 0&&l>y.max?b.set(v):b.set(+l)}},integer:{coerceFunction:function(l,b,v,y){l%1||!R(l)||y.min!==void 0&&l<y.min||y.max!==void 0&&l>y.max?b.set(v):b.set(+l)}},string:{coerceFunction:function(l,b,v,y){if(typeof l!="string"){var T=typeof l=="number";y.strict===!0||!T?b.set(v):b.set(String(l))}else y.noBlank&&!l?b.set(v):b.set(l)}},color:{coerceFunction:function(l,b,v){L(l).isValid()?b.set(l):b.set(v)}},colorlist:{coerceFunction:function(l,b,v){function y(T){return L(T).isValid()}!Array.isArray(l)||!l.length?b.set(v):l.every(y)?b.set(l):b.set(v)}},colorscale:{coerceFunction:function(l,b,v){b.set(D.get(l,v))}},angle:{coerceFunction:function(l,b,v){l==="auto"?b.set("auto"):R(l)?b.set(e(+l,360)):b.set(v)}},subplotid:{coerceFunction:function(l,b,v,y){var T=y.regex||d(v);if(typeof l=="string"&&T.test(l)){b.set(l);return}b.set(v)},validateFunction:function(l,b){var v=b.dflt;return l===v?!0:typeof l!="string"?!1:!!d(v).test(l)}},flaglist:{coerceFunction:function(l,b,v,y){if(typeof l!="string"){b.set(v);return}if((y.extras||[]).indexOf(l)!==-1){b.set(l);return}for(var T=l.split("+"),_=0;_<T.length;){var f=T[_];y.flags.indexOf(f)===-1||T.indexOf(f)<_?T.splice(_,1):_++}T.length?b.set(T.join("+")):b.set(v)}},any:{coerceFunction:function(l,b,v){l===void 0?b.set(v):b.set(l)}},info_array:{coerceFunction:function(l,b,v,y){function T(A,E,P){var S,C={set:function(M){S=M}};return P===void 0&&(P=E.dflt),ae.valObjectMeta[E.valType].coerceFunction(A,C,P,E),S}var _=y.dimensions===2||y.dimensions==="1-2"&&Array.isArray(l)&&Array.isArray(l[0]);if(!Array.isArray(l)){b.set(v);return}var f=y.items,g=[],n=Array.isArray(f),a=n&&_&&Array.isArray(f[0]),h=_&&n&&!a,c=n&&!h?f.length:l.length,m,o,t,i,r,x;if(v=Array.isArray(v)?v:[],_)for(m=0;m<c;m++)for(g[m]=[],t=Array.isArray(l[m])?l[m]:[],h?r=f.length:n?r=f[m].length:r=t.length,o=0;o<r;o++)h?i=f[o]:n?i=f[m][o]:i=f,x=T(t[o],i,(v[m]||[])[o]),x!==void 0&&(g[m][o]=x);else for(m=0;m<c;m++)x=T(l[m],n?f[m]:f,v[m]),x!==void 0&&(g[m]=x);b.set(g)},validateFunction:function(l,b){if(!Array.isArray(l))return!1;var v=b.items,y=Array.isArray(v),T=b.dimensions===2;if(!b.freeLength&&l.length!==v.length)return!1;for(var _=0;_<l.length;_++)if(T){if(!Array.isArray(l[_])||!b.freeLength&&l[_].length!==v[_].length)return!1;for(var f=0;f<l[_].length;f++)if(!s(l[_][f],y?v[_][f]:v))return!1}else if(!s(l[_],y?v[_]:v))return!1;return!0}}},ae.coerce=function(l,b,v,y,T){var _=k(v,y).get(),f=k(l,y),g=k(b,y),n=f.get(),a=b._template;if(n===void 0&&a&&(n=k(a,y).get(),a=0),T===void 0&&(T=_.dflt),_.arrayOk&&u(n))return g.set(n),n;var h=ae.valObjectMeta[_.valType].coerceFunction;h(n,g,T,_);var c=g.get();return a&&c===T&&!s(n,_)&&(n=k(a,y).get(),h(n,g,T,_),c=g.get()),c},ae.coerce2=function(l,b,v,y,T){var _=k(l,y),f=ae.coerce(l,b,v,y,T),g=_.get();return g!=null?f:!1},ae.coerceFont=function(l,b,v){var y={};return v=v||{},y.family=l(b+".family",v.family),y.size=l(b+".size",v.size),y.color=l(b+".color",v.color),y},ae.coercePattern=function(l,b,v,y){var T=l(b+".shape");if(T){l(b+".solidity"),l(b+".size");var _=l(b+".fillmode"),f=_==="overlay";if(!y){var g=l(b+".bgcolor",f?v:void 0);l(b+".fgcolor",f?p.contrast(g):v)}l(b+".fgopacity",f?.5:1)}},ae.coerceHoverinfo=function(l,b,v){var y=b._module.attributes,T=y.hoverinfo?y:N,_=T.hoverinfo,f;if(v._dataLength===1){var g=_.dflt==="all"?_.flags.slice():_.dflt.split("+");g.splice(g.indexOf("name"),1),f=g.join("+")}return ae.coerce(l,b,T,"hoverinfo",f)},ae.coerceSelectionMarkerOpacity=function(l,b){if(!!l.marker){var v=l.marker.opacity;if(v!==void 0){var y,T;!u(v)&&!l.selected&&!l.unselected&&(y=v,T=w*v),b("selected.marker.opacity",y),b("unselected.marker.opacity",T)}}};function s(l,b){var v=ae.valObjectMeta[b.valType];if(b.arrayOk&&u(l))return!0;if(v.validateFunction)return v.validateFunction(l,b);var y={},T=y,_={set:function(f){T=f}};return v.coerceFunction(l,_,y,b),T!==y}ae.validate=s},{"../components/color":119,"../components/colorscale/scales":134,"../constants/interactions":230,"../plots/attributes":297,"./array":237,"./mod":259,"./nested_property":260,"./regex":268,"fast-isnumeric":31,tinycolor2:83}],242:[function(z,le,ae){"use strict";var R=z("d3-time-format").timeFormat,L=z("fast-isnumeric"),N=z("./loggers"),D=z("./mod").mod,p=z("../constants/numerical"),w=p.BADNUM,k=p.ONEDAY,d=p.ONEHOUR,e=p.ONEMIN,u=p.ONESEC,s=p.EPOCHJD,l=z("../registry"),b=z("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,T=new Date().getFullYear()-70;function _(S){return S&&l.componentsRegistry.calendars&&typeof S=="string"&&S!=="gregorian"}ae.dateTick0=function(S,C){var M=f(S,!!C);if(C<2)return M;var I=ae.dateTime2ms(M,S);return I+=k*(C-1),ae.ms2DateTime(I,0,S)};function f(S,C){return _(S)?C?l.getComponentMethod("calendars","CANONICAL_SUNDAY")[S]:l.getComponentMethod("calendars","CANONICAL_TICK")[S]:C?"2000-01-02":"2000-01-01"}ae.dfltRange=function(S){return _(S)?l.getComponentMethod("calendars","DFLTRANGE")[S]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(S){return typeof S=="object"&&S!==null&&typeof S.getTime=="function"};var g,n;ae.dateTime2ms=function(S,C){if(ae.isJSDate(S)){var M=S.getTimezoneOffset()*e,I=(S.getUTCMinutes()-S.getMinutes())*e+(S.getUTCSeconds()-S.getSeconds())*u+(S.getUTCMilliseconds()-S.getMilliseconds());if(I){var G=3*e;M=M-G/2+D(I-M+G/2,G)}return S=Number(S)-M,S>=g&&S<=n?S:w}if(typeof S!="string"&&typeof S!="number")return w;S=String(S);var V=_(C),q=S.charAt(0);V&&(q==="G"||q==="g")&&(S=S.substr(1),C="");var ee=V&&C.substr(0,7)==="chinese",Q=S.match(ee?y:v);if(!Q)return w;var U=Q[1],O=Q[3]||"1",Z=Number(Q[5]||1),B=Number(Q[7]||0),Y=Number(Q[9]||0),j=Number(Q[11]||0);if(V){if(U.length===2)return w;U=Number(U);var X;try{var H=l.getComponentMethod("calendars","getCal")(C);if(ee){var K=O.charAt(O.length-1)==="i";O=parseInt(O,10),X=H.newDate(U,H.toMonthIndex(U,O,K),Z)}else X=H.newDate(U,Number(O),Z)}catch{return w}return X?(X.toJD()-s)*k+B*d+Y*e+j*u:w}U.length===2?U=(Number(U)+2e3-T)%100+T:U=Number(U),O-=1;var W=new Date(Date.UTC(2e3,O,Z,B,Y));return W.setUTCFullYear(U),W.getUTCMonth()!==O||W.getUTCDate()!==Z?w:W.getTime()+j*u},g=ae.MIN_MS=ae.dateTime2ms("-9999"),n=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(S,C){return ae.dateTime2ms(S,C)!==w};function a(S,C){return String(S+Math.pow(10,C)).substr(1)}var h=90*k,c=3*d,m=5*e;ae.ms2DateTime=function(S,C,M){if(typeof S!="number"||!(S>=g&&S<=n))return w;C||(C=0);var I=Math.floor(D(S+.05,1)*10),G=Math.round(S-I/10),V,q,ee,Q,U,O;if(_(M)){var Z=Math.floor(G/k)+s,B=Math.floor(D(S,k));try{V=l.getComponentMethod("calendars","getCal")(M).fromJD(Z).formatDate("yyyy-mm-dd")}catch{V=b("G%Y-%m-%d")(new Date(G))}if(V.charAt(0)==="-")for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;q=C<h?Math.floor(B/d):0,ee=C<h?Math.floor(B%d/e):0,Q=C<c?Math.floor(B%e/u):0,U=C<m?B%u*10+I:0}else O=new Date(G),V=b("%Y-%m-%d")(O),q=C<h?O.getUTCHours():0,ee=C<h?O.getUTCMinutes():0,Q=C<c?O.getUTCSeconds():0,U=C<m?O.getUTCMilliseconds()*10+I:0;return o(V,q,ee,Q,U)},ae.ms2DateTimeLocal=function(S){if(!(S>=g+k&&S<=n-k))return w;var C=Math.floor(D(S+.05,1)*10),M=new Date(Math.round(S-C/10)),I=R("%Y-%m-%d")(M),G=M.getHours(),V=M.getMinutes(),q=M.getSeconds(),ee=M.getUTCMilliseconds()*10+C;return o(I,G,V,q,ee)};function o(S,C,M,I,G){if((C||M||I||G)&&(S+=" "+a(C,2)+":"+a(M,2),(I||G)&&(S+=":"+a(I,2),G))){for(var V=4;G%10===0;)V-=1,G/=10;S+="."+a(G,V)}return S}ae.cleanDate=function(S,C,M){if(S===w)return C;if(ae.isJSDate(S)||typeof S=="number"&&isFinite(S)){if(_(M))return N.error("JS Dates and milliseconds are incompatible with world calendars",S),C;if(S=ae.ms2DateTimeLocal(+S),!S&&C!==void 0)return C}else if(!ae.isDateTime(S,M))return N.error("unrecognized date",S),C;return S};var t=/%\d?f/g,i=/%h/g,r={"1":"1","2":"1","3":"2","4":"2"};function x(S,C,M,I){S=S.replace(t,function(V){var q=Math.min(+V.charAt(1)||6,6),ee=(C/1e3%1+2).toFixed(q).substr(2).replace(/0+$/,"")||"0";return ee});var G=new Date(Math.floor(C+.05));if(S=S.replace(i,function(){return r[M("%q")(G)]}),_(I))try{S=l.getComponentMethod("calendars","worldCalFmt")(S,C,I)}catch{return"Invalid"}return M(S)(G)}var A=[59,59.9,59.99,59.999,59.9999];function E(S,C){var M=D(S+.05,k),I=a(Math.floor(M/d),2)+":"+a(D(Math.floor(M/e),60),2);if(C!=="M"){L(C)||(C=0);var G=Math.min(D(S/u,60),A[C]),V=(100+G).toFixed(C).substr(1);C>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),I+=":"+V}return I}ae.formatDate=function(S,C,M,I,G,V){if(G=_(G)&&G,!C)if(M==="y")C=V.year;else if(M==="m")C=V.month;else if(M==="d")C=V.dayMonth+`
`+V.year;else return E(S,M)+`
`+x(V.dayMonthYear,S,I,G);return x(C,S,I,G)};var P=3*k;ae.incrementMonth=function(S,C,M){M=_(M)&&M;var I=D(S,k);if(S=Math.round(S-I),M)try{var G=Math.round(S/k)+s,V=l.getComponentMethod("calendars","getCal")(M),q=V.fromJD(G);return C%12?V.add(q,C,"m"):V.add(q,C/12,"y"),(q.toJD()-s)*k+I}catch{N.error("invalid ms "+S+" in calendar "+M)}var ee=new Date(S+P);return ee.setUTCMonth(ee.getUTCMonth()+C)+I-P},ae.findExactDates=function(S,C){for(var M=0,I=0,G=0,V=0,q,ee,Q=_(C)&&l.getComponentMethod("calendars","getCal")(C),U=0;U<S.length;U++){if(ee=S[U],!L(ee)){V++;continue}if(!(ee%k))if(Q)try{q=Q.fromJD(ee/k+s),q.day()===1?q.month()===1?M++:I++:G++}catch{}else q=new Date(ee),q.getUTCDate()===1?q.getUTCMonth()===0?M++:I++:G++}I+=M,G+=I;var O=S.length-V;return{exactYears:M/O,exactMonths:I/O,exactDays:G/O}}},{"../constants/numerical":231,"../registry":352,"./loggers":256,"./mod":259,"d3-time-format":26,"fast-isnumeric":31}],243:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("./loggers"),N=z("./matrix"),D=z("gl-mat4");function p(T){var _;if(typeof T=="string"){if(_=document.getElementById(T),_===null)throw new Error("No DOM element with id '"+T+"' exists on the page.");return _}else if(T==null)throw new Error("DOM element provided is null or undefined");return T}function w(T){var _=R.select(T);return _.node()instanceof HTMLElement&&_.size()&&_.classed("js-plotly-plot")}function k(T){var _=T&&T.parentNode;_&&_.removeChild(T)}function d(T,_){e("global",T,_)}function e(T,_,f){var g="plotly.js-style-"+T,n=document.getElementById(g);n||(n=document.createElement("style"),n.setAttribute("id",g),n.appendChild(document.createTextNode("")),document.head.appendChild(n));var a=n.sheet;a.insertRule?a.insertRule(_+"{"+f+"}",0):a.addRule?a.addRule(_,f,0):L.warn("addStyleRule failed")}function u(T){var _="plotly.js-style-"+T,f=document.getElementById(_);f&&k(f)}function s(T){var _=b(T),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return _.forEach(function(g){var n=l(g);if(n){var a=N.convertCssMatrix(n);f=D.multiply(f,f,a)}}),f}function l(T){var _=window.getComputedStyle(T,null),f=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("-moz-transform")||_.getPropertyValue("-ms-transform")||_.getPropertyValue("-o-transform")||_.getPropertyValue("transform");return f==="none"?null:f.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(g){return+g})}function b(T){for(var _=[];v(T);)_.push(T),T=T.parentNode;return _}function v(T){return T&&(T instanceof Element||T instanceof HTMLElement)}function y(T,_){return T&&_&&T.x===_.x&&T.y===_.y&&T.top===_.top&&T.left===_.left&&T.right===_.right&&T.bottom===_.bottom}le.exports={getGraphDiv:p,isPlotDiv:w,removeElement:k,addStyleRule:d,addRelatedStyleRule:e,deleteRelatedStyleRule:u,getFullTransformMatrix:s,getElementTransformMatrix:l,getElementAndAncestors:b,equalDomRects:y}},{"./loggers":256,"./matrix":258,"@plotly/d3":16,"gl-mat4":48}],244:[function(z,le,ae){"use strict";var R=z("events").EventEmitter,L={init:function(N){if(N._ev instanceof R)return N;var D=new R,p=new R;return N._ev=D,N._internalEv=p,N.on=D.on.bind(D),N.once=D.once.bind(D),N.removeListener=D.removeListener.bind(D),N.removeAllListeners=D.removeAllListeners.bind(D),N._internalOn=p.on.bind(p),N._internalOnce=p.once.bind(p),N._removeInternalListener=p.removeListener.bind(p),N._removeAllInternalListeners=p.removeAllListeners.bind(p),N.emit=function(w,k){typeof jQuery<"u"&&jQuery(N).trigger(w,k),D.emit(w,k),p.emit(w,k)},N},triggerHandler:function(N,D,p){var w,k;typeof jQuery<"u"&&(w=jQuery(N).triggerHandler(D,p));var d=N._ev;if(!d)return w;var e=d._events[D];if(!e)return w;function u(l){if(l.listener){if(d.removeListener(D,l.listener),!l.fired)return l.fired=!0,l.listener.apply(d,[p])}else return l.apply(d,[p])}e=Array.isArray(e)?e:[e];var s;for(s=0;s<e.length-1;s++)u(e[s]);return k=u(e[s]),w!==void 0?w:k},purge:function(N){return delete N._ev,delete N.on,delete N.once,delete N.removeListener,delete N.removeAllListeners,delete N.emit,delete N._ev,delete N._internalEv,delete N._internalOn,delete N._internalOnce,delete N._removeInternalListener,delete N._removeAllInternalListeners,N}};le.exports=L},{events:17}],245:[function(z,le,ae){"use strict";var R=z("./is_plain_object.js"),L=Array.isArray;function N(p,w){var k,d;for(k=0;k<p.length;k++){if(d=p[k],d!==null&&typeof d=="object")return!1;d!==void 0&&(w[k]=d)}return!0}ae.extendFlat=function(){return D(arguments,!1,!1,!1)},ae.extendDeep=function(){return D(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return D(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return D(arguments,!0,!1,!0)};function D(p,w,k,d){var e=p[0],u=p.length,s,l,b,v,y,T,_;if(u===2&&L(e)&&L(p[1])&&e.length===0){if(_=N(p[1],e),_)return e;e.splice(0,e.length)}for(var f=1;f<u;f++){s=p[f];for(l in s)b=e[l],v=s[l],d&&L(v)?e[l]=v:w&&v&&(R(v)||(y=L(v)))?(y?(y=!1,T=b&&L(b)?b:[]):T=b&&R(b)?b:{},e[l]=D([T,v],w,k,d)):(typeof v<"u"||k)&&(e[l]=v)}return e}},{"./is_plain_object.js":253}],246:[function(z,le,ae){"use strict";le.exports=function(L){for(var N={},D=[],p=0,w=0;w<L.length;w++){var k=L[w];N[k]!==1&&(N[k]=1,D[p++]=k)}return D}},{}],247:[function(z,le,ae){"use strict";le.exports=function(p){for(var w=N(p)?L:R,k=[],d=0;d<p.length;d++){var e=p[d];w(e)&&k.push(e)}return k};function R(D){return D.visible===!0}function L(D){var p=D[0].trace;return p.visible===!0&&p._length!==0}function N(D){return Array.isArray(D)&&Array.isArray(D[0])&&D[0][0]&&D[0][0].trace}},{}],248:[function(z,le,ae){"use strict";var R=z("./mod").mod;ae.segmentsIntersect=L;function L(k,d,e,u,s,l,b,v){var y=e-k,T=s-k,_=b-s,f=u-d,g=l-d,n=v-l,a=y*n-_*f;if(a===0)return null;var h=(T*n-_*g)/a,c=(T*f-y*g)/a;return c<0||c>1||h<0||h>1?null:{x:k+y*h,y:d+f*h}}ae.segmentDistance=function(d,e,u,s,l,b,v,y){if(L(d,e,u,s,l,b,v,y))return 0;var T=u-d,_=s-e,f=v-l,g=y-b,n=T*T+_*_,a=f*f+g*g,h=Math.min(N(T,_,n,l-d,b-e),N(T,_,n,v-d,y-e),N(f,g,a,d-l,e-b),N(f,g,a,u-l,s-b));return Math.sqrt(h)};function N(k,d,e,u,s){var l=u*k+s*d;if(l<0)return u*u+s*s;if(l>e){var b=u-k,v=s-d;return b*b+v*v}else{var y=u*d-s*k;return y*y/e}}var D,p,w;ae.getTextLocation=function(d,e,u,s){if((d!==p||s!==w)&&(D={},p=d,w=s),D[u])return D[u];var l=d.getPointAtLength(R(u-s/2,e)),b=d.getPointAtLength(R(u+s/2,e)),v=Math.atan((b.y-l.y)/(b.x-l.x)),y=d.getPointAtLength(R(u,e)),T=(y.x*4+l.x+b.x)/6,_=(y.y*4+l.y+b.y)/6,f={x:T,y:_,theta:v};return D[u]=f,f},ae.clearLocationCache=function(){p=null},ae.getVisibleSegment=function(d,e,u){var s=e.left,l=e.right,b=e.top,v=e.bottom,y=0,T=d.getTotalLength(),_=T,f,g;function n(h){var c=d.getPointAtLength(h);h===0?f=c:h===T&&(g=c);var m=c.x<s?s-c.x:c.x>l?c.x-l:0,o=c.y<b?b-c.y:c.y>v?c.y-v:0;return Math.sqrt(m*m+o*o)}for(var a=n(y);a;){if(y+=a+u,y>_)return;a=n(y)}for(a=n(_);a;){if(_-=a+u,y>_)return;a=n(_)}return{min:y,max:_,len:_-y,total:T,isClosed:y===0&&_===T&&Math.abs(f.x-g.x)<.1&&Math.abs(f.y-g.y)<.1}},ae.findPointOnPath=function(d,e,u,s){s=s||{};for(var l=s.pathLength||d.getTotalLength(),b=s.tolerance||.001,v=s.iterationLimit||30,y=d.getPointAtLength(0)[u]>d.getPointAtLength(l)[u]?-1:1,T=0,_=0,f=l,g,n,a;T<v;){if(g=(_+f)/2,n=d.getPointAtLength(g),a=n[u]-e,Math.abs(a)<b)return n;y*a>0?f=g:_=g,T++}return n}},{"./mod":259}],249:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("tinycolor2"),N=z("color-normalize"),D=z("../components/colorscale"),p=z("../components/color/attributes").defaultLine,w=z("./array").isArrayOrTypedArray,k=N(p),d=1;function e(v,y){var T=v;return T[3]*=y,T}function u(v){if(R(v))return k;var y=N(v);return y.length?y:k}function s(v){return R(v)?v:d}function l(v,y,T){var _=v.color,f=w(_),g=w(y),n=D.extractOpts(v),a=[],h,c,m,o,t;if(n.colorscale!==void 0?h=D.makeColorScaleFuncFromTrace(v):h=u,f?c=function(r,x){return r[x]===void 0?k:N(h(r[x]))}:c=u,g?m=function(r,x){return r[x]===void 0?d:s(r[x])}:m=s,f||g)for(var i=0;i<T;i++)o=c(_,i),t=m(y,i),a[i]=e(o,t);else a=e(N(_),y);return a}function b(v){var y=D.extractOpts(v),T=y.colorscale;return y.reversescale&&(T=D.flipScale(y.colorscale)),T.map(function(_){var f=_[0],g=L(_[1]),n=g.toRgb();return{index:f,rgb:[n.r,n.g,n.b,n.a]}})}le.exports={formatColor:l,parseColorScale:b}},{"../components/color/attributes":118,"../components/colorscale":131,"./array":237,"color-normalize":20,"fast-isnumeric":31,tinycolor2:83}],250:[function(z,le,ae){"use strict";le.exports=function(L){return L}},{}],251:[function(z,le,ae){"use strict";le.exports=function(L,N){if(!N)return L;var D=1/Math.abs(N),p=D>1?(D*L+D*N)/D:L+N,w=String(p).length;if(w>16){var k=String(N).length,d=String(L).length;if(w>=d+k){var e=parseFloat(p).toPrecision(12);e.indexOf("e+")===-1&&(p=+e)}}return p}},{}],252:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("d3-time-format").utcFormat,N=z("d3-format").format,D=z("fast-isnumeric"),p=z("../constants/numerical"),w=p.FP_SAFE,k=-w,d=p.BADNUM,e=le.exports={};e.adjustFormat=function(O){return!O||/^\d[.]\df/.test(O)||/[.]\d%/.test(O)?O:O==="0.f"?"~f":/^\d%/.test(O)?"~%":/^\ds/.test(O)?"~s":!/^[~,.0$]/.test(O)&&/[&fps]/.test(O)?"~"+O:O};var u={};e.warnBadFormat=function(U){var O=String(U);u[O]||(u[O]=1,e.warn('encountered bad format: "'+O+'"'))},e.noFormat=function(U){return String(U)},e.numberFormat=function(U){var O;try{O=N(e.adjustFormat(U))}catch{return e.warnBadFormat(U),e.noFormat}return O},e.nestedProperty=z("./nested_property"),e.keyedContainer=z("./keyed_container"),e.relativeAttr=z("./relative_attr"),e.isPlainObject=z("./is_plain_object"),e.toLogRange=z("./to_log_range"),e.relinkPrivateKeys=z("./relink_private");var s=z("./array");e.isTypedArray=s.isTypedArray,e.isArrayOrTypedArray=s.isArrayOrTypedArray,e.isArray1D=s.isArray1D,e.ensureArray=s.ensureArray,e.concat=s.concat,e.maxRowLength=s.maxRowLength,e.minRowLength=s.minRowLength;var l=z("./mod");e.mod=l.mod,e.modHalf=l.modHalf;var b=z("./coerce");e.valObjectMeta=b.valObjectMeta,e.coerce=b.coerce,e.coerce2=b.coerce2,e.coerceFont=b.coerceFont,e.coercePattern=b.coercePattern,e.coerceHoverinfo=b.coerceHoverinfo,e.coerceSelectionMarkerOpacity=b.coerceSelectionMarkerOpacity,e.validate=b.validate;var v=z("./dates");e.dateTime2ms=v.dateTime2ms,e.isDateTime=v.isDateTime,e.ms2DateTime=v.ms2DateTime,e.ms2DateTimeLocal=v.ms2DateTimeLocal,e.cleanDate=v.cleanDate,e.isJSDate=v.isJSDate,e.formatDate=v.formatDate,e.incrementMonth=v.incrementMonth,e.dateTick0=v.dateTick0,e.dfltRange=v.dfltRange,e.findExactDates=v.findExactDates,e.MIN_MS=v.MIN_MS,e.MAX_MS=v.MAX_MS;var y=z("./search");e.findBin=y.findBin,e.sorterAsc=y.sorterAsc,e.sorterDes=y.sorterDes,e.distinctVals=y.distinctVals,e.roundUp=y.roundUp,e.sort=y.sort,e.findIndexOfMin=y.findIndexOfMin,e.sortObjectKeys=z("./sort_object_keys");var T=z("./stats");e.aggNums=T.aggNums,e.len=T.len,e.mean=T.mean,e.median=T.median,e.midRange=T.midRange,e.variance=T.variance,e.stdev=T.stdev,e.interp=T.interp;var _=z("./matrix");e.init2dArray=_.init2dArray,e.transposeRagged=_.transposeRagged,e.dot=_.dot,e.translationMatrix=_.translationMatrix,e.rotationMatrix=_.rotationMatrix,e.rotationXYMatrix=_.rotationXYMatrix,e.apply3DTransform=_.apply3DTransform,e.apply2DTransform=_.apply2DTransform,e.apply2DTransform2=_.apply2DTransform2,e.convertCssMatrix=_.convertCssMatrix,e.inverseTransformMatrix=_.inverseTransformMatrix;var f=z("./angles");e.deg2rad=f.deg2rad,e.rad2deg=f.rad2deg,e.angleDelta=f.angleDelta,e.angleDist=f.angleDist,e.isFullCircle=f.isFullCircle,e.isAngleInsideSector=f.isAngleInsideSector,e.isPtInsideSector=f.isPtInsideSector,e.pathArc=f.pathArc,e.pathSector=f.pathSector,e.pathAnnulus=f.pathAnnulus;var g=z("./anchor_utils");e.isLeftAnchor=g.isLeftAnchor,e.isCenterAnchor=g.isCenterAnchor,e.isRightAnchor=g.isRightAnchor,e.isTopAnchor=g.isTopAnchor,e.isMiddleAnchor=g.isMiddleAnchor,e.isBottomAnchor=g.isBottomAnchor;var n=z("./geometry2d");e.segmentsIntersect=n.segmentsIntersect,e.segmentDistance=n.segmentDistance,e.getTextLocation=n.getTextLocation,e.clearLocationCache=n.clearLocationCache,e.getVisibleSegment=n.getVisibleSegment,e.findPointOnPath=n.findPointOnPath;var a=z("./extend");e.extendFlat=a.extendFlat,e.extendDeep=a.extendDeep,e.extendDeepAll=a.extendDeepAll,e.extendDeepNoArrays=a.extendDeepNoArrays;var h=z("./loggers");e.log=h.log,e.warn=h.warn,e.error=h.error;var c=z("./regex");e.counterRegex=c.counter;var m=z("./throttle");e.throttle=m.throttle,e.throttleDone=m.done,e.clearThrottle=m.clear;var o=z("./dom");e.getGraphDiv=o.getGraphDiv,e.isPlotDiv=o.isPlotDiv,e.removeElement=o.removeElement,e.addStyleRule=o.addStyleRule,e.addRelatedStyleRule=o.addRelatedStyleRule,e.deleteRelatedStyleRule=o.deleteRelatedStyleRule,e.getFullTransformMatrix=o.getFullTransformMatrix,e.getElementTransformMatrix=o.getElementTransformMatrix,e.getElementAndAncestors=o.getElementAndAncestors,e.equalDomRects=o.equalDomRects,e.clearResponsive=z("./clear_responsive"),e.preserveDrawingBuffer=z("./preserve_drawing_buffer"),e.makeTraceGroups=z("./make_trace_groups"),e._=z("./localize"),e.notifier=z("./notifier"),e.filterUnique=z("./filter_unique"),e.filterVisible=z("./filter_visible"),e.pushUnique=z("./push_unique"),e.increment=z("./increment"),e.cleanNumber=z("./clean_number"),e.ensureNumber=function(O){return D(O)?(O=Number(O),O>w||O<k?d:O):d},e.isIndex=function(U,O){return O!==void 0&&U>=O?!1:D(U)&&U>=0&&U%1===0},e.noop=z("./noop"),e.identity=z("./identity"),e.repeat=function(U,O){for(var Z=new Array(O),B=0;B<O;B++)Z[B]=U;return Z},e.swapAttrs=function(U,O,Z,B){Z||(Z="x"),B||(B="y");for(var Y=0;Y<O.length;Y++){var j=O[Y],X=e.nestedProperty(U,j.replace("?",Z)),H=e.nestedProperty(U,j.replace("?",B)),K=X.get();X.set(H.get()),H.set(K)}},e.raiseToTop=function(O){O.parentNode.appendChild(O)},e.cancelTransition=function(U){return U.transition().duration(0)},e.constrain=function(U,O,Z){return O>Z?Math.max(Z,Math.min(O,U)):Math.max(O,Math.min(Z,U))},e.bBoxIntersect=function(U,O,Z){return Z=Z||0,U.left<=O.right+Z&&O.left<=U.right+Z&&U.top<=O.bottom+Z&&O.top<=U.bottom+Z},e.simpleMap=function(U,O,Z,B,Y){for(var j=U.length,X=new Array(j),H=0;H<j;H++)X[H]=O(U[H],Z,B,Y);return X},e.randstr=function U(O,Z,B,Y){if(B||(B=16),Z===void 0&&(Z=24),Z<=0)return"0";var j=Math.log(Math.pow(2,Z))/Math.log(B),X="",H,K,W;for(H=2;j===1/0;H*=2)j=Math.log(Math.pow(2,Z/H))/Math.log(B)*H;var $=j-Math.floor(j);for(H=0;H<Math.floor(j);H++)W=Math.floor(Math.random()*B).toString(B),X=W+X;$&&(K=Math.pow(B,$),W=Math.floor(Math.random()*K).toString(B),X=W+X);var re=parseInt(X,B);return O&&O[X]||re!==1/0&&re>=Math.pow(2,Z)?Y>10?(e.warn("randstr failed uniqueness"),X):U(O,Z,B,(Y||0)+1):X},e.OptionControl=function(U,O){U||(U={}),O||(O="opt");var Z={};return Z.optionList=[],Z._newoption=function(B){B[O]=U,Z[B.name]=B,Z.optionList.push(B)},Z["_"+O]=U,Z},e.smooth=function(U,O){if(O=Math.round(O)||0,O<2)return U;var Z=U.length,B=2*Z,Y=2*O-1,j=new Array(Y),X=new Array(Z),H,K,W,$;for(H=0;H<Y;H++)j[H]=(1-Math.cos(Math.PI*(H+1)/O))/(2*O);for(H=0;H<Z;H++){for($=0,K=0;K<Y;K++)W=H+K+1-O,W<-Z?W-=B*Math.round(W/B):W>=B&&(W-=B*Math.floor(W/B)),W<0?W=-1-W:W>=Z&&(W=B-1-W),$+=U[W]*j[K];X[H]=$}return X},e.syncOrAsync=function(U,O,Z){var B,Y;function j(){return e.syncOrAsync(U,O,Z)}for(;U.length;)if(Y=U.splice(0,1)[0],B=Y(O),B&&B.then)return B.then(j);return Z&&Z(O)},e.stripTrailingSlash=function(U){return U.substr(-1)==="/"?U.substr(0,U.length-1):U},e.noneOrAll=function(U,O,Z){if(!!U){var B=!1,Y=!0,j,X;for(j=0;j<Z.length;j++)X=U[Z[j]],X!=null?B=!0:Y=!1;if(B&&!Y)for(j=0;j<Z.length;j++)U[Z[j]]=O[Z[j]]}},e.mergeArray=function(U,O,Z,B){var Y=typeof B=="function";if(e.isArrayOrTypedArray(U))for(var j=Math.min(U.length,O.length),X=0;X<j;X++){var H=U[X];O[X][Z]=Y?B(H):H}},e.mergeArrayCastPositive=function(U,O,Z){return e.mergeArray(U,O,Z,function(B){var Y=+B;return isFinite(Y)&&Y>0?Y:0})},e.fillArray=function(U,O,Z,B){if(B=B||e.identity,e.isArrayOrTypedArray(U))for(var Y=0;Y<O.length;Y++)O[Y][Z]=B(U[Y])},e.castOption=function(U,O,Z,B){B=B||e.identity;var Y=e.nestedProperty(U,Z).get();return e.isArrayOrTypedArray(Y)?Array.isArray(O)&&e.isArrayOrTypedArray(Y[O[0]])?B(Y[O[0]][O[1]]):B(Y[O]):Y},e.extractOption=function(U,O,Z,B){if(Z in U)return U[Z];var Y=e.nestedProperty(O,B).get();if(!Array.isArray(Y))return Y};function t(U){var O={};for(var Z in U)for(var B=U[Z],Y=0;Y<B.length;Y++)O[B[Y]]=+Z;return O}e.tagSelected=function(U,O,Z){var B=O.selectedpoints,Y=O._indexToPoints,j;Y&&(j=t(Y));function X(re){return re!==void 0&&re<U.length}for(var H=0;H<B.length;H++){var K=B[H];if(e.isIndex(K)||e.isArrayOrTypedArray(K)&&e.isIndex(K[0])&&e.isIndex(K[1])){var W=j?j[K]:K,$=Z?Z[W]:W;X($)&&(U[$].selected=1)}}},e.selIndices2selPoints=function(U){var O=U.selectedpoints,Z=U._indexToPoints;if(Z){for(var B=t(Z),Y=[],j=0;j<O.length;j++){var X=O[j];if(e.isIndex(X)){var H=B[X];e.isIndex(H)&&Y.push(H)}}return Y}else return O},e.getTargetArray=function(U,O){var Z=O.target;if(typeof Z=="string"&&Z){var B=e.nestedProperty(U,Z).get();return Array.isArray(B)?B:!1}else if(Array.isArray(Z))return Z;return!1},e.minExtend=function(U,O){var Z={};typeof O!="object"&&(O={});var B=3,Y=Object.keys(U),j,X,H;for(j=0;j<Y.length;j++)X=Y[j],H=U[X],!(X.charAt(0)==="_"||typeof H=="function")&&(X==="module"?Z[X]=H:Array.isArray(H)?X==="colorscale"?Z[X]=H.slice():Z[X]=H.slice(0,B):e.isTypedArray(H)?Z[X]=H.subarray(0,B):H&&typeof H=="object"?Z[X]=e.minExtend(U[X],O[X]):Z[X]=H);for(Y=Object.keys(O),j=0;j<Y.length;j++)X=Y[j],H=O[X],(typeof H!="object"||!(X in Z)||typeof Z[X]!="object")&&(Z[X]=H);return Z},e.titleCase=function(U){return U.charAt(0).toUpperCase()+U.substr(1)},e.containsAny=function(U,O){for(var Z=0;Z<O.length;Z++)if(U.indexOf(O[Z])!==-1)return!0;return!1},e.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var i=/Version\/[\d\.]+.*Safari/;e.isSafari=function(){return i.test(window.navigator.userAgent)};var r=/iPad|iPhone|iPod/;e.isIOS=function(){return r.test(window.navigator.userAgent)};var x=/Firefox\/(\d+)\.\d+/;e.getFirefoxVersion=function(){var U=x.exec(window.navigator.userAgent);if(U&&U.length===2){var O=parseInt(U[1]);if(!isNaN(O))return O}return null},e.isD3Selection=function(U){return U instanceof R.selection},e.ensureSingle=function(U,O,Z,B){var Y=U.select(O+(Z?"."+Z:""));if(Y.size())return Y;var j=U.append(O);return Z&&j.classed(Z,!0),B&&j.call(B),j},e.ensureSingleById=function(U,O,Z,B){var Y=U.select(O+"#"+Z);if(Y.size())return Y;var j=U.append(O).attr("id",Z);return B&&j.call(B),j},e.objectFromPath=function(U,O){for(var Z=U.split("."),B,Y=B={},j=0;j<Z.length;j++){var X=Z[j],H=null,K=Z[j].match(/(.*)\[([0-9]+)\]/);K?(X=K[1],H=K[2],B=B[X]=[],j===Z.length-1?B[H]=O:B[H]={},B=B[H]):(j===Z.length-1?B[X]=O:B[X]={},B=B[X])}return Y};var A=/^([^\[\.]+)\.(.+)?/,E=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;e.expandObjectPaths=function(U){var O,Z,B,Y,j,X,H;if(typeof U=="object"&&!Array.isArray(U))for(Z in U)U.hasOwnProperty(Z)&&((O=Z.match(A))?(Y=U[Z],B=O[1],delete U[Z],U[B]=e.extendDeepNoArrays(U[B]||{},e.objectFromPath(Z,e.expandObjectPaths(Y))[B])):(O=Z.match(E))?(Y=U[Z],B=O[1],j=parseInt(O[2]),delete U[Z],U[B]=U[B]||[],O[3]==="."?(H=O[4],X=U[B][j]=U[B][j]||{},e.extendDeepNoArrays(X,e.objectFromPath(H,e.expandObjectPaths(Y)))):U[B][j]=e.expandObjectPaths(Y)):U[Z]=e.expandObjectPaths(U[Z]));return U},e.numSeparate=function(U,O,Z){if(Z||(Z=!1),typeof O!="string"||O.length===0)throw new Error("Separator string required for formatting!");typeof U=="number"&&(U=String(U));var B=/(\d+)(\d{3})/,Y=O.charAt(0),j=O.charAt(1),X=U.split("."),H=X[0],K=X.length>1?Y+X[1]:"";if(j&&(X.length>1||H.length>4||Z))for(;B.test(H);)H=H.replace(B,"$1"+j+"$2");return H+K},e.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var P=/^\w*$/;e.templateString=function(U,O){var Z={};return U.replace(e.TEMPLATE_STRING_REGEX,function(B,Y){var j;return P.test(Y)?j=O[Y]:(Z[Y]=Z[Y]||e.nestedProperty(O,Y).get,j=Z[Y]()),e.isValidTextValue(j)?j:""})};var S={max:10,count:0,name:"hovertemplate"};e.hovertemplateString=function(){return I.apply(S,arguments)};var C={max:10,count:0,name:"texttemplate"};e.texttemplateString=function(){return I.apply(C,arguments)};var M=/^[:|\|]/;function I(U,O,Z){var B=this,Y=arguments;O||(O={});var j={};return U.replace(e.TEMPLATE_STRING_REGEX,function(X,H,K){var W=H==="xother"||H==="yother",$=H==="_xother"||H==="_yother",re=H==="_xother_"||H==="_yother_",de=H==="xother_"||H==="yother_",ve=W||$||de||re,ue=H;($||re)&&(ue=ue.substring(1)),(de||re)&&(ue=ue.substring(0,ue.length-1));var ce;if(ve){if(ce=O[ue],ce===void 0)return""}else{var _e,fe;for(fe=3;fe<Y.length;fe++)if(_e=Y[fe],!!_e){if(_e.hasOwnProperty(ue)){ce=_e[ue];break}if(P.test(ue)||(ce=e.nestedProperty(_e,ue).get(),ce=j[ue]||e.nestedProperty(_e,ue).get(),ce&&(j[ue]=ce)),ce!==void 0)break}}if(ce===void 0&&B)return B.count<B.max&&(e.warn("Variable '"+ue+"' in "+B.name+" could not be found!"),ce=X),B.count===B.max&&e.warn("Too many "+B.name+" warnings - additional warnings will be suppressed"),B.count++,X;if(K){var ne;if(K[0]===":"&&(ne=Z?Z.numberFormat:e.numberFormat,ce=ne(K.replace(M,""))(ce)),K[0]==="|"){ne=Z?Z.timeFormat:L;var ie=e.dateTime2ms(ce);ce=e.formatDate(ie,K.replace(M,""),!1,ne)}}else{var me=ue+"Label";O.hasOwnProperty(me)&&(ce=O[me])}return ve&&(ce="("+ce+")",($||re)&&(ce=" "+ce),(de||re)&&(ce=ce+" ")),ce})}var G=48,V=57;e.subplotSort=function(U,O){for(var Z=Math.min(U.length,O.length)+1,B=0,Y=0,j=0;j<Z;j++){var X=U.charCodeAt(j)||0,H=O.charCodeAt(j)||0,K=X>=G&&X<=V,W=H>=G&&H<=V;if(K&&(B=10*B+X-G),W&&(Y=10*Y+H-G),!K||!W){if(B!==Y)return B-Y;if(X!==H)return X-H}}return Y-B};var q=2e9;e.seedPseudoRandom=function(){q=2e9},e.pseudoRandom=function(){var U=q;return q=(69069*q+1)%4294967296,Math.abs(q-U)<429496729?e.pseudoRandom():q/4294967296},e.fillText=function(U,O,Z){var B=Array.isArray(Z)?function(X){Z.push(X)}:function(X){Z.text=X},Y=e.extractOption(U,O,"htx","hovertext");if(e.isValidTextValue(Y))return B(Y);var j=e.extractOption(U,O,"tx","text");if(e.isValidTextValue(j))return B(j)},e.isValidTextValue=function(U){return U||U===0},e.formatPercent=function(U,O){O=O||0;for(var Z=(Math.round(100*U*Math.pow(10,O))*Math.pow(.1,O)).toFixed(O)+"%",B=0;B<O;B++)Z.indexOf(".")!==-1&&(Z=Z.replace("0%","%"),Z=Z.replace(".%","%"));return Z},e.isHidden=function(U){var O=window.getComputedStyle(U).display;return!O||O==="none"},e.strTranslate=function(U,O){return U||O?"translate("+U+","+O+")":""},e.strRotate=function(U){return U?"rotate("+U+")":""},e.strScale=function(U){return U!==1?"scale("+U+")":""},e.getTextTransform=function(U){var O=U.noCenter,Z=U.textX,B=U.textY,Y=U.targetX,j=U.targetY,X=U.anchorX||0,H=U.anchorY||0,K=U.rotate,W=U.scale;return W?W>1&&(W=1):W=0,e.strTranslate(Y-W*(Z+X),j-W*(B+H))+e.strScale(W)+(K?"rotate("+K+(O?"":" "+Z+" "+B)+")":"")},e.ensureUniformFontSize=function(U,O){var Z=e.extendFlat({},O);return Z.size=Math.max(O.size,U._fullLayout.uniformtext.minsize||0),Z},e.join2=function(U,O,Z){var B=U.length;return B>1?U.slice(0,-1).join(O)+Z+U[B-1]:U.join(O)},e.bigFont=function(U){return Math.round(1.2*U)};var ee=e.getFirefoxVersion(),Q=ee!==null&&ee<86;e.getPositionFromD3Event=function(){return Q?[R.event.layerX,R.event.layerY]:[R.event.offsetX,R.event.offsetY]}},{"../constants/numerical":231,"./anchor_utils":235,"./angles":236,"./array":237,"./clean_number":238,"./clear_responsive":240,"./coerce":241,"./dates":242,"./dom":243,"./extend":245,"./filter_unique":246,"./filter_visible":247,"./geometry2d":248,"./identity":250,"./increment":251,"./is_plain_object":253,"./keyed_container":254,"./localize":255,"./loggers":256,"./make_trace_groups":257,"./matrix":258,"./mod":259,"./nested_property":260,"./noop":261,"./notifier":262,"./preserve_drawing_buffer":265,"./push_unique":266,"./regex":268,"./relative_attr":269,"./relink_private":270,"./search":271,"./sort_object_keys":274,"./stats":275,"./throttle":278,"./to_log_range":279,"@plotly/d3":16,"d3-format":25,"d3-time-format":26,"fast-isnumeric":31}],253:[function(z,le,ae){"use strict";le.exports=function(L){return window&&window.process&&window.process.versions?Object.prototype.toString.call(L)==="[object Object]":Object.prototype.toString.call(L)==="[object Object]"&&Object.getPrototypeOf(L).hasOwnProperty("hasOwnProperty")}},{}],254:[function(z,le,ae){"use strict";var R=z("./nested_property"),L=/^\w*$/,N=0,D=1,p=2,w=3,k=4;le.exports=function(e,u,s,l){s=s||"name",l=l||"value";var b,v,y,T={};u&&u.length?(y=R(e,u),v=y.get()):v=e,u=u||"";var _={};if(v)for(b=0;b<v.length;b++)_[v[b][s]]=b;var f=L.test(l),g={set:function(n,a){var h=a===null?k:N;if(!v){if(!y||h===k)return;v=[],y.set(v)}var c=_[n];if(c===void 0){if(h===k)return;h=h|w,c=v.length,_[n]=c}else a!==(f?v[c][l]:R(v[c],l).get())&&(h=h|p);var m=v[c]=v[c]||{};return m[s]=n,f?m[l]=a:R(m,l).set(a),a!==null&&(h=h&~k),T[c]=T[c]|h,g},get:function(n){if(!!v){var a=_[n];if(a!==void 0)return f?v[a][l]:R(v[a],l).get()}},rename:function(n,a){var h=_[n];return h===void 0||(T[h]=T[h]|D,_[a]=h,delete _[n],v[h][s]=a),g},remove:function(n){var a=_[n];if(a===void 0)return g;var h=v[a];if(Object.keys(h).length>2)return T[a]=T[a]|p,g.set(n,null);if(f){for(b=a;b<v.length;b++)T[b]=T[b]|w;for(b=a;b<v.length;b++)_[v[b][s]]--;v.splice(a,1),delete _[n]}else R(h,l).set(null),T[a]=T[a]|p|k;return g},constructUpdate:function(){for(var n,a,h={},c=Object.keys(T),m=0;m<c.length;m++)a=c[m],n=u+"["+a+"]",v[a]?(T[a]&D&&(h[n+"."+s]=v[a][s]),T[a]&p&&(f?h[n+"."+l]=T[a]&k?null:v[a][l]:h[n+"."+l]=T[a]&k?null:R(v[a],l).get())):h[n]=null;return h}};return g}},{"./nested_property":260}],255:[function(z,le,ae){"use strict";var R=z("../registry");le.exports=function(N,D){for(var p=N._context.locale,w=0;w<2;w++){for(var k=N._context.locales,d=0;d<2;d++){var e=(k[p]||{}).dictionary;if(e){var u=e[D];if(u)return u}k=R.localeRegistry}var s=p.split("-")[0];if(s===p)break;p=s}return D}},{"../registry":352}],256:[function(z,le,ae){"use strict";var R=z("../plot_api/plot_config").dfltConfig,L=z("./notifier"),N=le.exports={};N.log=function(){var D;if(R.logging>1){var p=["LOG:"];for(D=0;D<arguments.length;D++)p.push(arguments[D]);console.trace.apply(console,p)}if(R.notifyOnLogging>1){var w=[];for(D=0;D<arguments.length;D++)w.push(arguments[D]);L(w.join("<br>"),"long")}},N.warn=function(){var D;if(R.logging>0){var p=["WARN:"];for(D=0;D<arguments.length;D++)p.push(arguments[D]);console.trace.apply(console,p)}if(R.notifyOnLogging>0){var w=[];for(D=0;D<arguments.length;D++)w.push(arguments[D]);L(w.join("<br>"),"stick")}},N.error=function(){var D;if(R.logging>0){var p=["ERROR:"];for(D=0;D<arguments.length;D++)p.push(arguments[D]);console.error.apply(console,p)}if(R.notifyOnLogging>0){var w=[];for(D=0;D<arguments.length;D++)w.push(arguments[D]);L(w.join("<br>"),"stick")}}},{"../plot_api/plot_config":288,"./notifier":262}],257:[function(z,le,ae){"use strict";var R=z("@plotly/d3");le.exports=function(N,D,p){var w=N.selectAll("g."+p.replace(/\s/g,".")).data(D,function(d){return d[0].trace.uid});w.exit().remove(),w.enter().append("g").attr("class",p),w.order();var k=N.classed("rangeplot")?"nodeRangePlot3":"node3";return w.each(function(d){d[0][k]=R.select(this)}),w}},{"@plotly/d3":16}],258:[function(z,le,ae){"use strict";var R=z("gl-mat4");ae.init2dArray=function(L,N){for(var D=new Array(L),p=0;p<L;p++)D[p]=new Array(N);return D},ae.transposeRagged=function(L){var N=0,D=L.length,p,w;for(p=0;p<D;p++)N=Math.max(N,L[p].length);var k=new Array(N);for(p=0;p<N;p++)for(k[p]=new Array(D),w=0;w<D;w++)k[p][w]=L[w][p];return k},ae.dot=function(L,N){if(!(L.length&&N.length)||L.length!==N.length)return null;var D=L.length,p,w;if(L[0].length)for(p=new Array(D),w=0;w<D;w++)p[w]=ae.dot(L[w],N);else if(N[0].length){var k=ae.transposeRagged(N);for(p=new Array(k.length),w=0;w<k.length;w++)p[w]=ae.dot(L,k[w])}else for(p=0,w=0;w<D;w++)p+=L[w]*N[w];return p},ae.translationMatrix=function(L,N){return[[1,0,L],[0,1,N],[0,0,1]]},ae.rotationMatrix=function(L){var N=L*Math.PI/180;return[[Math.cos(N),-Math.sin(N),0],[Math.sin(N),Math.cos(N),0],[0,0,1]]},ae.rotationXYMatrix=function(L,N,D){return ae.dot(ae.dot(ae.translationMatrix(N,D),ae.rotationMatrix(L)),ae.translationMatrix(-N,-D))},ae.apply3DTransform=function(L){return function(){var N=arguments,D=arguments.length===1?N[0]:[N[0],N[1],N[2]||0];return ae.dot(L,[D[0],D[1],D[2],1]).slice(0,3)}},ae.apply2DTransform=function(L){return function(){var N=arguments;N.length===3&&(N=N[0]);var D=arguments.length===1?N[0]:[N[0],N[1]];return ae.dot(L,[D[0],D[1],1]).slice(0,2)}},ae.apply2DTransform2=function(L){var N=ae.apply2DTransform(L);return function(D){return N(D.slice(0,2)).concat(N(D.slice(2,4)))}},ae.convertCssMatrix=function(L){if(L){var N=L.length;if(N===16)return L;if(N===6)return[L[0],L[1],0,0,L[2],L[3],0,0,0,0,1,0,L[4],L[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(L){var N=[];return R.invert(N,L),[[N[0],N[1],N[2],N[3]],[N[4],N[5],N[6],N[7]],[N[8],N[9],N[10],N[11]],[N[12],N[13],N[14],N[15]]]}},{"gl-mat4":48}],259:[function(z,le,ae){"use strict";function R(N,D){var p=N%D;return p<0?p+D:p}function L(N,D){return Math.abs(N)>D/2?N-Math.round(N/D)*D:N}le.exports={mod:R,modHalf:L}},{}],260:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("./array").isArrayOrTypedArray;le.exports=function(l,b){if(R(b))b=String(b);else if(typeof b!="string"||b.substr(b.length-4)==="[-1]")throw"bad property string";for(var v=0,y=b.split("."),T,_,f;v<y.length;){if(T=String(y[v]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),T){if(T[1])y[v]=T[1];else if(v===0)y.splice(0,1);else throw"bad property string";for(_=T[2].substr(1,T[2].length-2).split("]["),f=0;f<_.length;f++)v++,y.splice(v,0,Number(_[f]))}v++}return typeof l!="object"?u(l,b,y):{set:w(l,y,b),get:N(l,y),astr:b,parts:y,obj:l}};function N(s,l){return function(){var b=s,v,y,T,_,f;for(_=0;_<l.length-1;_++){if(v=l[_],v===-1){for(y=!0,T=[],f=0;f<b.length;f++)T[f]=N(b[f],l.slice(_+1))(),T[f]!==T[0]&&(y=!1);return y?T[0]:T}if(typeof v=="number"&&!L(b)||(b=b[v],typeof b!="object"||b===null))return}if(!(typeof b!="object"||b===null)&&(T=b[l[_]],T!==null))return T}}var D=/(^|\.)args\[/;function p(s,l){return s===void 0||s===null&&!l.match(D)}function w(s,l,b){return function(v){var y=s,T="",_=[[s,T]],f=p(v,b),g,n;for(n=0;n<l.length-1;n++){if(g=l[n],typeof g=="number"&&!L(y))throw"array index but container is not an array";if(g===-1){if(f=!d(y,l.slice(n+1),v,b),f)break;return}if(!e(y,g,l[n+1],f))break;if(y=y[g],typeof y!="object"||y===null)throw"container is not an object";T=k(T,g),_.push([y,T])}if(f){if(n===l.length-1&&(delete y[l[n]],Array.isArray(y)&&+l[n]===y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[l[n]]=v}}function k(s,l){var b=l;return R(l)?b="["+l+"]":s&&(b="."+l),s+b}function d(s,l,b,v){var y=L(b),T=!0,_=b,f=v.replace("-1",0),g=y?!1:p(b,f),n=l[0],a;for(a=0;a<s.length;a++)f=v.replace("-1",a),y&&(_=b[a%b.length],g=p(_,f)),g&&(T=!1),e(s,a,n,g)&&w(s[a],l,v.replace("-1",a))(_);return T}function e(s,l,b,v){if(s[l]===void 0){if(v)return!1;typeof b=="number"?s[l]=[]:s[l]={}}return!0}function u(s,l,b){return{set:function(){throw"bad container"},get:function(){},astr:l,parts:b,obj:s}}},{"./array":237,"fast-isnumeric":31}],261:[function(z,le,ae){"use strict";le.exports=function(){}},{}],262:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=[];le.exports=function(D,p){if(N.indexOf(D)!==-1)return;N.push(D);var w=1e3;L(p)?w=p:p==="long"&&(w=3e3);var k=R.select("body").selectAll(".plotly-notifier").data([0]);k.enter().append("div").classed("plotly-notifier",!0);var d=k.selectAll(".notifier-note").data(N);function e(u){u.duration(700).style("opacity",0).each("end",function(s){var l=N.indexOf(s);l!==-1&&N.splice(l,1),R.select(this).remove()})}d.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(u){var s=R.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(e)});for(var l=s.append("p"),b=u.split(/<br\s*\/?>/g),v=0;v<b.length;v++)v&&l.append("br"),l.append("span").text(b[v]);p==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(w).call(e)})}},{"@plotly/d3":16,"fast-isnumeric":31}],263:[function(z,le,ae){"use strict";var R=z("./setcursor"),L="data-savedcursor",N="!!";le.exports=function(p,w){var k=p.attr(L);if(w){if(!k){for(var d=(p.attr("class")||"").split(" "),e=0;e<d.length;e++){var u=d[e];u.indexOf("cursor-")===0&&p.attr(L,u.substr(7)).classed(u,!1)}p.attr(L)||p.attr(L,N)}R(p,w)}else k&&(p.attr(L,null),k===N?R(p):R(p,k))}},{"./setcursor":272}],264:[function(z,le,ae){"use strict";var R=z("./matrix").dot,L=z("../constants/numerical").BADNUM,N=le.exports={};N.tester=function(p){var w=p.slice(),k=w[0][0],d=k,e=w[0][1],u=e,s;for(w.push(w[0]),s=1;s<w.length;s++)k=Math.min(k,w[s][0]),d=Math.max(d,w[s][0]),e=Math.min(e,w[s][1]),u=Math.max(u,w[s][1]);var l=!1,b;w.length===5&&(w[0][0]===w[1][0]?w[2][0]===w[3][0]&&w[0][1]===w[3][1]&&w[1][1]===w[2][1]&&(l=!0,b=function(f){return f[0]===w[0][0]}):w[0][1]===w[1][1]&&w[2][1]===w[3][1]&&w[0][0]===w[3][0]&&w[1][0]===w[2][0]&&(l=!0,b=function(f){return f[1]===w[0][1]}));function v(f,g){var n=f[0],a=f[1];return!(n===L||n<k||n>d||a===L||a<e||a>u||g&&b(f))}function y(f,g){var n=f[0],a=f[1];if(n===L||n<k||n>d||a===L||a<e||a>u)return!1;var h=w.length,c=w[0][0],m=w[0][1],o=0,t,i,r,x,A;for(t=1;t<h;t++)if(i=c,r=m,c=w[t][0],m=w[t][1],x=Math.min(i,c),!(n<x||n>Math.max(i,c)||a>Math.max(r,m)))if(a<Math.min(r,m))n!==x&&o++;else{if(c===i?A=a:A=r+(n-i)*(m-r)/(c-i),a===A)return!(t===1&&g);a<=A&&n!==x&&o++}return o%2===1}var T=!0,_=w[0];for(s=1;s<w.length;s++)if(_[0]!==w[s][0]||_[1]!==w[s][1]){T=!1;break}return{xmin:k,xmax:d,ymin:e,ymax:u,pts:w,contains:l?v:y,isRect:l,degenerate:T}},N.isSegmentBent=function(p,w,k,d){var e=p[w],u=[p[k][0]-e[0],p[k][1]-e[1]],s=R(u,u),l=Math.sqrt(s),b=[-u[1]/l,u[0]/l],v,y,T;for(v=w+1;v<k;v++)if(y=[p[v][0]-e[0],p[v][1]-e[1]],T=R(y,u),T<0||T>s||Math.abs(R(y,b))>d)return!0;return!1},N.filter=function(p,w){var k=[p[0]],d=0,e=0;function u(l){p.push(l);var b=k.length,v=d;k.splice(e+1);for(var y=v+1;y<p.length;y++)(y===p.length-1||N.isSegmentBent(p,v,y+1,w))&&(k.push(p[y]),k.length<b-2&&(d=y,e=k.length-1),v=y)}if(p.length>1){var s=p.pop();u(s)}return{addPt:u,raw:p,filtered:k}}},{"../constants/numerical":231,"./matrix":258}],265:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("is-mobile");le.exports=function(p){var w;if(p&&p.hasOwnProperty("userAgent")?w=p.userAgent:w=N(),typeof w!="string")return!0;var k=L({ua:{headers:{"user-agent":w}},tablet:!0,featureDetect:!1});if(!k)for(var d=w.split(" "),e=1;e<d.length;e++){var u=d[e];if(u.indexOf("Safari")!==-1)for(var s=e-1;s>-1;s--){var l=d[s];if(l.substr(0,8)==="Version/"){var b=l.substr(8).split(".")[0];if(R(b)&&(b=+b),b>=13)return!0}}}return k};function N(){var D;return typeof navigator<"u"&&(D=navigator.userAgent),D&&D.headers&&typeof D.headers["user-agent"]=="string"&&(D=D.headers["user-agent"]),D}},{"fast-isnumeric":31,"is-mobile":66}],266:[function(z,le,ae){"use strict";le.exports=function(L,N){if(N instanceof RegExp){for(var D=N.toString(),p=0;p<L.length;p++)if(L[p]instanceof RegExp&&L[p].toString()===D)return L;L.push(N)}else(N||N===0)&&L.indexOf(N)===-1&&L.push(N);return L}},{}],267:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plot_api/plot_config").dfltConfig;function N(p,w){for(var k=[],d,e=0;e<w.length;e++)d=w[e],d===p?k[e]=d:typeof d=="object"?k[e]=Array.isArray(d)?R.extendDeep([],d):R.extendDeepAll({},d):k[e]=d;return k}var D={};D.add=function(p,w,k,d,e){var u,s;if(p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},s=p.undoQueue.index,p.autoplay){p.undoQueue.inSequence||(p.autoplay=!1);return}!p.undoQueue.sequence||p.undoQueue.beginSequence?(u={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},p.undoQueue.queue.splice(s,p.undoQueue.queue.length-s,u),p.undoQueue.index+=1):u=p.undoQueue.queue[s-1],p.undoQueue.beginSequence=!1,u&&(u.undo.calls.unshift(w),u.undo.args.unshift(k),u.redo.calls.push(d),u.redo.args.push(e)),p.undoQueue.queue.length>L.queueLength&&(p.undoQueue.queue.shift(),p.undoQueue.index--)},D.startSequence=function(p){p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},p.undoQueue.sequence=!0,p.undoQueue.beginSequence=!0},D.stopSequence=function(p){p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},p.undoQueue.sequence=!1,p.undoQueue.beginSequence=!1},D.undo=function(w){var k,d;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index<=0)){for(w.undoQueue.index--,k=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,d=0;d<k.undo.calls.length;d++)D.plotDo(w,k.undo.calls[d],k.undo.args[d]);w.undoQueue.inSequence=!1,w.autoplay=!1}},D.redo=function(w){var k,d;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index>=w.undoQueue.queue.length)){for(k=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,d=0;d<k.redo.calls.length;d++)D.plotDo(w,k.redo.calls[d],k.redo.args[d]);w.undoQueue.inSequence=!1,w.autoplay=!1,w.undoQueue.index++}},D.plotDo=function(p,w,k){p.autoplay=!0,k=N(p,k),w.apply(null,k)},le.exports=D},{"../lib":252,"../plot_api/plot_config":288}],268:[function(z,le,ae){"use strict";ae.counter=function(R,L,N,D){var p=(L||"")+(N?"":"$"),w=D===!1?"":"^";return R==="xy"?new RegExp(w+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+p):new RegExp(w+R+"([2-9]|[1-9][0-9]+)?"+p)}},{}],269:[function(z,le,ae){"use strict";var R=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,L=/^[^\.\[\]]+$/;le.exports=function(N,D){for(;D;){var p=N.match(R);if(p)N=p[1];else if(N.match(L))N="";else throw new Error("bad relativeAttr call:"+[N,D]);if(D.charAt(0)==="^")D=D.slice(1);else break}return N&&D.charAt(0)!=="["?N+"."+D:N+D}},{}],270:[function(z,le,ae){"use strict";var R=z("./array").isArrayOrTypedArray,L=z("./is_plain_object");le.exports=function N(D,p){for(var w in p){var k=p[w],d=D[w];if(d!==k)if(w.charAt(0)==="_"||typeof k=="function"){if(w in D)continue;D[w]=k}else if(R(k)&&R(d)&&L(k[0])){if(w==="customdata"||w==="ids")continue;for(var e=Math.min(k.length,d.length),u=0;u<e;u++)d[u]!==k[u]&&L(k[u])&&L(d[u])&&N(d[u],k[u])}else L(k)&&L(d)&&(N(d,k),Object.keys(d).length||delete D[w])}}},{"./array":237,"./is_plain_object":253}],271:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("./loggers"),N=z("./identity"),D=z("../constants/numerical").BADNUM,p=1e-9;ae.findBin=function(u,s,l){if(R(s.start))return l?Math.ceil((u-s.start)/s.size-p)-1:Math.floor((u-s.start)/s.size+p);var b=0,v=s.length,y=0,T=v>1?(s[v-1]-s[0])/(v-1):1,_,f;for(T>=0?f=l?w:k:f=l?e:d,u+=T*p*(l?-1:1)*(T>=0?1:-1);b<v&&y++<100;)_=Math.floor((b+v)/2),f(s[_],u)?b=_+1:v=_;return y>90&&L.log("Long binary search..."),b-1};function w(u,s){return u<s}function k(u,s){return u<=s}function d(u,s){return u>s}function e(u,s){return u>=s}ae.sorterAsc=function(u,s){return u-s},ae.sorterDes=function(u,s){return s-u},ae.distinctVals=function(u){var s=u.slice();s.sort(ae.sorterAsc);var l;for(l=s.length-1;l>-1&&s[l]===D;l--);for(var b=s[l]-s[0]||1,v=b/(l||1)/1e4,y=[],T,_=0;_<=l;_++){var f=s[_],g=f-T;T===void 0?(y.push(f),T=f):g>v&&(b=Math.min(b,g),y.push(f),T=f)}return{vals:y,minDiff:b}},ae.roundUp=function(u,s,l){for(var b=0,v=s.length-1,y,T=0,_=l?0:1,f=l?1:0,g=l?Math.ceil:Math.floor;b<v&&T++<100;)y=g((b+v)/2),s[y]<=u?b=y+_:v=y-f;return s[b]},ae.sort=function(u,s){for(var l=0,b=0,v=1;v<u.length;v++){var y=s(u[v],u[v-1]);if(y<0?l=1:y>0&&(b=1),l&&b)return u.sort(s)}return b?u:u.reverse()},ae.findIndexOfMin=function(u,s){s=s||N;for(var l=1/0,b,v=0;v<u.length;v++){var y=s(u[v]);y<l&&(l=y,b=v)}return b}},{"../constants/numerical":231,"./identity":250,"./loggers":256,"fast-isnumeric":31}],272:[function(z,le,ae){"use strict";le.exports=function(L,N){(L.attr("class")||"").split(" ").forEach(function(D){D.indexOf("cursor-")===0&&L.classed(D,!1)}),N&&L.classed("cursor-"+N,!0)}},{}],273:[function(z,le,ae){"use strict";var R=z("../components/color"),L=function(){};le.exports=function(D){for(var p in D)typeof D[p]=="function"&&(D[p]=L);D.destroy=function(){D.container.parentNode.removeChild(D.container)};var w=document.createElement("div");w.className="no-webgl",w.style.cursor="pointer",w.style.fontSize="24px",w.style.color=R.defaults[0],w.style.position="absolute",w.style.left=w.style.top="0px",w.style.width=w.style.height="100%",w.style["background-color"]=R.lightLine,w.style["z-index"]=30;var k=document.createElement("p");return k.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",k.style.position="relative",k.style.top="50%",k.style.left="50%",k.style.height="30%",k.style.width="50%",k.style.margin="-15% 0 0 -25%",w.appendChild(k),D.container.appendChild(w),D.container.style.background="#FFFFFF",D.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":119}],274:[function(z,le,ae){"use strict";le.exports=function(L){return Object.keys(L).sort()}},{}],275:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("./array").isArrayOrTypedArray;ae.aggNums=function(N,D,p,w){var k,d;if((!w||w>p.length)&&(w=p.length),R(D)||(D=!1),L(p[0])){for(d=new Array(w),k=0;k<w;k++)d[k]=ae.aggNums(N,D,p[k]);p=d}for(k=0;k<w;k++)R(D)?R(p[k])&&(D=N(+D,+p[k])):D=p[k];return D},ae.len=function(N){return ae.aggNums(function(D){return D+1},0,N)},ae.mean=function(N,D){return D||(D=ae.len(N)),ae.aggNums(function(p,w){return p+w},0,N)/D},ae.midRange=function(N){if(!(N===void 0||N.length===0))return(ae.aggNums(Math.max,null,N)+ae.aggNums(Math.min,null,N))/2},ae.variance=function(N,D,p){return D||(D=ae.len(N)),R(p)||(p=ae.mean(N,D)),ae.aggNums(function(w,k){return w+Math.pow(k-p,2)},0,N)/D},ae.stdev=function(N,D,p){return Math.sqrt(ae.variance(N,D,p))},ae.median=function(N){var D=N.slice().sort();return ae.interp(D,.5)},ae.interp=function(N,D){if(!R(D))throw"n should be a finite number";if(D=D*N.length-.5,D<0)return N[0];if(D>N.length-1)return N[N.length-1];var p=D%1;return p*N[Math.ceil(D)]+(1-p)*N[Math.floor(D)]}},{"./array":237,"fast-isnumeric":31}],276:[function(z,le,ae){"use strict";var R=z("color-normalize");function L(N){return N?R(N):[0,0,0,1]}le.exports=L},{"color-normalize":20}],277:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../lib"),N=L.strTranslate,D=z("../constants/xmlns_namespaces"),p=z("../constants/alignment").LINE_SPACING,w=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(M,I,G){var V=M.text(),q=!M.attr("data-notex")&&I&&I._context.typesetMath&&typeof MathJax<"u"&&V.match(w),ee=R.select(M.node().parentNode);if(ee.empty())return;var Q=M.attr("class")?M.attr("class").split(" ")[0]:"text";Q+="-math",ee.selectAll("svg."+Q).remove(),ee.selectAll("g."+Q+"-group").remove(),M.style("display",null).attr({"data-unformatted":V,"data-math":"N"});function U(){ee.empty()||(Q=M.attr("class")+"-math",ee.select("svg."+Q).remove()),M.text("").style("white-space","pre");var O=E(M.node(),V);O&&M.style("pointer-events","all"),ae.positionText(M),G&&G.call(M)}return q?(I&&I._promises||[]).push(new Promise(function(O){M.style("display","none");var Z=parseInt(M.node().style.fontSize,10),B={fontSize:Z};s(q[2],B,function(Y,j,X){ee.selectAll("svg."+Q).remove(),ee.selectAll("g."+Q+"-group").remove();var H=Y&&Y.select("svg");if(!H||!H.node()){U(),O();return}var K=ee.append("g").classed(Q+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});K.node().appendChild(H.node()),j&&j.node()&&H.node().insertBefore(j.node().cloneNode(!0),H.node().firstChild);var W=X.width,$=X.height;H.attr({class:Q,height:$,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var re=M.node().style.fill||"black",de=H.select("g");de.attr({fill:re,stroke:re});var ve=de.node().getBoundingClientRect(),ue=ve.width,ce=ve.height;(ue>W||ce>$)&&(H.style("overflow","hidden"),ve=H.node().getBoundingClientRect(),ue=ve.width,ce=ve.height);var _e=+M.attr("x"),fe=+M.attr("y"),ne=Z||M.node().getBoundingClientRect().height,ie=-ne/4;if(Q[0]==="y")K.attr({transform:"rotate("+[-90,_e,fe]+")"+N(-ue/2,ie-ce/2)});else if(Q[0]==="l")fe=ie-ce/2;else if(Q[0]==="a"&&Q.indexOf("atitle")!==0)_e=0,fe=ie;else{var me=M.attr("text-anchor");_e=_e-ue*(me==="middle"?.5:me==="end"?1:0),fe=fe+ie-ce/2}H.attr({x:_e,y:fe}),G&&G.call(M,K),O(K)})})):U(),M};var k=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g;function e(M){return M.replace(k,"\\lt ").replace(d,"\\gt ")}var u=[["$","$"],["\\(","\\)"]];function s(M,I,G){var V=parseInt((MathJax.version||"").split(".")[0]);if(V!==2&&V!==3){L.warn("No MathJax version:",MathJax.version);return}var q,ee,Q,U,O=function(){return ee=L.extendDeepAll({},MathJax.Hub.config),Q=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:u},displayAlign:"left"})},Z=function(){ee=L.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=u},B=function(){if(q=MathJax.Hub.config.menuSettings.renderer,q!=="SVG")return MathJax.Hub.setRenderer("SVG")},Y=function(){q=MathJax.config.startup.output,q!=="svg"&&(MathJax.config.startup.output="svg")},j=function(){var re="math-output-"+L.randstr({},64);U=R.select("body").append("div").attr({id:re}).style({visibility:"hidden",position:"absolute","font-size":I.fontSize+"px"}).text(e(M));var de=U.node();return V===2?MathJax.Hub.Typeset(de):MathJax.typeset([de])},X=function(){var re=U.select(V===2?".MathJax_SVG":".MathJax"),de=!re.empty()&&U.select("svg").node();if(!de)L.log("There was an error in the tex syntax.",M),G();else{var ve=de.getBoundingClientRect(),ue;V===2?ue=R.select("body").select("#MathJax_SVG_glyphs"):ue=re.select("defs"),G(re,ue,ve)}U.remove()},H=function(){if(q!=="SVG")return MathJax.Hub.setRenderer(q)},K=function(){q!=="svg"&&(MathJax.config.startup.output=q)},W=function(){return Q!==void 0&&(MathJax.Hub.processSectionDelay=Q),MathJax.Hub.Config(ee)},$=function(){MathJax.config=ee};V===2?MathJax.Hub.Queue(O,B,j,X,H,W):V===3&&(Z(),Y(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){j(),X(),K(),$()}))}var l={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},b={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},y="\u200B",T=["http:","https:","mailto:","",void 0,":"],_=ae.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,n=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var a=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,h=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,c=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function o(M,I){if(!M)return null;var G=M.match(I),V=G&&(G[3]||G[4]);return V&&x(V)}var t=/(^|;)\s*color:/;ae.plainText=function(M,I){I=I||{};for(var G=I.len!==void 0&&I.len!==-1?I.len:1/0,V=I.allowedTags!==void 0?I.allowedTags:["br"],q="...",ee=q.length,Q=M.split(f),U=[],O="",Z=0,B=0;B<Q.length;B++){var Y=Q[B],j=Y.match(g),X=j&&j[2].toLowerCase();if(X)V.indexOf(X)!==-1&&(U.push(Y),O=X);else{var H=Y.length;if(Z+H<G)U.push(Y),Z+=H;else if(Z<G){var K=G-Z;O&&(O!=="br"||K<=ee||H<=ee)&&U.pop(),G>ee?U.push(Y.substr(0,K-ee)+q):U.push(Y.substr(0,K));break}O=""}}return U.join("")};var i={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},r=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function x(M){return M.replace(r,function(I,G){var V;return G.charAt(0)==="#"?V=A(G.charAt(1)==="x"?parseInt(G.substr(2),16):parseInt(G.substr(1),10)):V=i[G],V||I})}ae.convertEntities=x;function A(M){if(!(M>1114111)){var I=String.fromCodePoint;if(I)return I(M);var G=String.fromCharCode;return M<=65535?G(M):G((M>>10)+55232,M%1024+56320)}}function E(M,I){I=I.replace(_," ");var G=!1,V=[],q,ee=-1;function Q(){ee++;var ce=document.createElementNS(D.svg,"tspan");R.select(ce).attr({class:"line",dy:ee*p+"em"}),M.appendChild(ce),q=ce;var _e=V;if(V=[{node:ce}],_e.length>1)for(var fe=1;fe<_e.length;fe++)U(_e[fe])}function U(ce){var _e=ce.type,fe={},ne;if(_e==="a"){ne="a";var ie=ce.target,me=ce.href,we=ce.popup;me&&(fe={"xlink:xlink:show":ie==="_blank"||ie.charAt(0)!=="_"?"new":"replace",target:ie,"xlink:xlink:href":me},we&&(fe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+we+'");return false;'))}else ne="tspan";ce.style&&(fe.style=ce.style);var be=document.createElementNS(D.svg,ne);if(_e==="sup"||_e==="sub"){O(q,y),q.appendChild(be);var Me=document.createElementNS(D.svg,"tspan");O(Me,y),R.select(Me).attr("dy",v[_e]),fe.dy=b[_e],q.appendChild(be),q.appendChild(Me)}else q.appendChild(be);R.select(be).attr(fe),q=ce.node=be,V.push(ce)}function O(ce,_e){ce.appendChild(document.createTextNode(_e))}function Z(ce){if(V.length===1){L.log("Ignoring unexpected end tag </"+ce+">.",I);return}var _e=V.pop();ce!==_e.type&&L.log("Start tag <"+_e.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",I),q=V[V.length-1].node}var B=n.test(I);B?Q():(q=M,V=[{node:M}]);for(var Y=I.split(f),j=0;j<Y.length;j++){var X=Y[j],H=X.match(g),K=H&&H[2].toLowerCase(),W=l[K];if(K==="br")Q();else if(W===void 0)O(q,x(X));else if(H[1])Z(K);else{var $=H[4],re={type:K},de=o($,a);if(de?(de=de.replace(t,"$1 fill:"),W&&(de+=";"+W)):W&&(de=W),de&&(re.style=de),K==="a"){G=!0;var ve=o($,h);if(ve){var ue=P(ve);ue&&(re.href=ue,re.target=o($,c)||"_blank",re.popup=o($,m))}}U(re)}}return G}function P(M){var I=encodeURI(decodeURI(M)),G=document.createElement("a"),V=document.createElement("a");G.href=M,V.href=I;var q=G.protocol,ee=V.protocol;return T.indexOf(q)!==-1&&T.indexOf(ee)!==-1?I:""}ae.sanitizeHTML=function(I){I=I.replace(_," ");for(var G=document.createElement("p"),V=G,q=[],ee=I.split(f),Q=0;Q<ee.length;Q++){var U=ee[Q],O=U.match(g),Z=O&&O[2].toLowerCase();if(Z in l)if(O[1])q.length&&(V=q.pop());else{var B=O[4],Y=o(B,a),j=Y?{style:Y}:{};if(Z==="a"){var X=o(B,h);if(X){var H=P(X);if(H){j.href=H;var K=o(B,c);K&&(j.target=K)}}}var W=document.createElement(Z);V.appendChild(W),R.select(W).attr(j),V=W,q.push(W)}else V.appendChild(document.createTextNode(x(U)))}var $="innerHTML";return G[$]},ae.lineCount=function(I){return I.selectAll("tspan.line").size()||1},ae.positionText=function(I,G,V){return I.each(function(){var q=R.select(this);function ee(O,Z){return Z===void 0?(Z=q.attr(O),Z===null&&(q.attr(O,0),Z=0)):q.attr(O,Z),Z}var Q=ee("x",G),U=ee("y",V);this.nodeName==="text"&&q.selectAll("tspan.line").attr({x:Q,y:U})})};function S(M,I,G){var V=G.horizontalAlign,q=G.verticalAlign||"top",ee=M.node().getBoundingClientRect(),Q=I.node().getBoundingClientRect(),U,O,Z;return q==="bottom"?O=function(){return ee.bottom-U.height}:q==="middle"?O=function(){return ee.top+(ee.height-U.height)/2}:O=function(){return ee.top},V==="right"?Z=function(){return ee.right-U.width}:V==="center"?Z=function(){return ee.left+(ee.width-U.width)/2}:Z=function(){return ee.left},function(){U=this.node().getBoundingClientRect();var B=Z()-Q.left,Y=O()-Q.top,j=G.gd||{};if(G.gd){j._fullLayout._calcInverseTransform(j);var X=L.apply3DTransform(j._fullLayout._invTransform)(B,Y);B=X[0],Y=X[1]}return this.style({top:Y+"px",left:B+"px","z-index":1e3}),this}}var C="1px ";ae.makeTextShadow=function(M){var I=C,G=C,V=C;return I+G+V+M+", -"+I+"-"+G+V+M+", "+I+"-"+G+V+M+", -"+I+G+V+M},ae.makeEditable=function(M,I){var G=I.gd,V=I.delegate,q=R.dispatch("edit","input","cancel"),ee=V||M;if(M.style({"pointer-events":V?"none":"all"}),M.size()!==1)throw new Error("boo");function Q(){O(),M.style({opacity:0});var Z=ee.attr("class"),B;Z?B="."+Z.split(" ")[0]+"-math-group":B="[class*=-math-group]",B&&R.select(M.node().parentNode).select(B).style({opacity:0})}function U(Z){var B=Z.node(),Y=document.createRange();Y.selectNodeContents(B);var j=window.getSelection();j.removeAllRanges(),j.addRange(Y),B.focus()}function O(){var Z=R.select(G),B=Z.select(".svg-container"),Y=B.append("div"),j=M.node().style,X=parseFloat(j.fontSize||12),H=I.text;H===void 0&&(H=M.attr("data-unformatted")),Y.classed("plugin-editable editable",!0).style({position:"absolute","font-family":j.fontFamily||"Arial","font-size":X,color:I.fill||j.fill||"black",opacity:1,"background-color":I.background||"transparent",outline:"#ffffff33 1px solid",margin:[-X/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(H).call(S(M,B,I)).on("blur",function(){G._editing=!1,M.text(this.textContent).style({opacity:1});var K=R.select(this).attr("class"),W;K?W="."+K.split(" ")[0]+"-math-group":W="[class*=-math-group]",W&&R.select(M.node().parentNode).select(W).style({opacity:0});var $=this.textContent;R.select(this).transition().duration(0).remove(),R.select(document).on("mouseup",null),q.edit.call(M,$)}).on("focus",function(){var K=this;G._editing=!0,R.select(document).on("mouseup",function(){if(R.event.target===K)return!1;document.activeElement===Y.node()&&Y.node().blur()})}).on("keyup",function(){R.event.which===27?(G._editing=!1,M.style({opacity:1}),R.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),q.cancel.call(M,this.textContent)):(q.input.call(M,this.textContent),R.select(this).call(S(M,B,I)))}).on("keydown",function(){R.event.which===13&&this.blur()}).call(U)}return I.immediate?Q():ee.on("click",Q),R.rebind(M,q,"on")}},{"../constants/alignment":224,"../constants/xmlns_namespaces":232,"../lib":252,"@plotly/d3":16}],278:[function(z,le,ae){"use strict";var R={};ae.throttle=function(D,p,w){var k=R[D],d=Date.now();if(!k){for(var e in R)R[e].ts<d-6e4&&delete R[e];k=R[D]={ts:0,timer:null}}L(k);function u(){w(),k.ts=Date.now(),k.onDone&&(k.onDone(),k.onDone=null)}if(d>k.ts+p){u();return}k.timer=setTimeout(function(){u(),k.timer=null},p)},ae.done=function(N){var D=R[N];return!D||!D.timer?Promise.resolve():new Promise(function(p){var w=D.onDone;D.onDone=function(){w&&w(),p(),D.onDone=null}})},ae.clear=function(N){if(N)L(R[N]),delete R[N];else for(var D in R)ae.clear(D)};function L(N){N&&N.timer!==null&&(clearTimeout(N.timer),N.timer=null)}},{}],279:[function(z,le,ae){"use strict";var R=z("fast-isnumeric");le.exports=function(N,D){if(N>0)return Math.log(N)/Math.LN10;var p=Math.log(Math.min(D[0],D[1]))/Math.LN10;return R(p)||(p=Math.log(Math.max(D[0],D[1]))/Math.LN10-6),p}},{"fast-isnumeric":31}],280:[function(z,le,ae){"use strict";le.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],281:[function(z,le,ae){"use strict";le.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],282:[function(z,le,ae){"use strict";var R=z("../registry");le.exports=function(N){for(var D=R.layoutArrayContainers,p=R.layoutArrayRegexes,w=N.split("[")[0],k,d,e=0;e<p.length;e++)if(d=N.match(p[e]),d&&d.index===0){k=d[0];break}if(k||(k=D[D.indexOf(w)]),!k)return!1;var u=N.substr(k.length);return u?(d=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),d?{array:k,index:Number(d[1]),property:d[3]||""}:!1):{array:k,index:"",property:""}}},{"../registry":352}],283:[function(z,le,ae){"use strict";var R=z("../lib"),L=R.extendFlat,N=R.isPlainObject,D={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},p={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},w=D.flags.slice().concat(["fullReplot"]),k=p.flags.slice().concat("layoutReplot");le.exports={traces:D,layout:p,traceFlags:function(){return d(w)},layoutFlags:function(){return d(k)},update:function(s,l){var b=l.editType;if(b&&b!=="none")for(var v=b.split("+"),y=0;y<v.length;y++)s[v[y]]=!0},overrideAll:e};function d(s){for(var l={},b=0;b<s.length;b++)l[s[b]]=!1;return l}function e(s,l,b){var v=L({},s);for(var y in v){var T=v[y];N(T)&&(v[y]=u(T,l,b,y))}return b==="from-root"&&(v.editType=l),v}function u(s,l,b,v){if(s.valType){var y=L({},s);if(y.editType=l,Array.isArray(s.items)){y.items=new Array(s.items.length);for(var T=0;T<s.items.length;T++)y.items[T]=u(s.items[T],l,"from-root")}return y}else return e(s,l,v.charAt(0)==="_"?"nested":"from-root")}},{"../lib":252}],284:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("gl-mat4/fromQuat"),N=z("../registry"),D=z("../lib"),p=z("../plots/plots"),w=z("../plots/cartesian/axis_ids"),k=z("../components/color"),d=w.cleanId,e=w.getFromTrace,u=N.traceIs;ae.clearPromiseQueue=function(n){Array.isArray(n._promises)&&n._promises.length>0&&D.log("Clearing previous rejected promises from queue."),n._promises=[]},ae.cleanLayout=function(n){var a,h;n||(n={}),n.xaxis1&&(n.xaxis||(n.xaxis=n.xaxis1),delete n.xaxis1),n.yaxis1&&(n.yaxis||(n.yaxis=n.yaxis1),delete n.yaxis1),n.scene1&&(n.scene||(n.scene=n.scene1),delete n.scene1);var c=(p.subplotsRegistry.cartesian||{}).attrRegex,m=(p.subplotsRegistry.polar||{}).attrRegex,o=(p.subplotsRegistry.ternary||{}).attrRegex,t=(p.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(n);for(a=0;a<i.length;a++){var r=i[a];if(c&&c.test(r)){var x=n[r];x.anchor&&x.anchor!=="free"&&(x.anchor=d(x.anchor)),x.overlaying&&(x.overlaying=d(x.overlaying)),x.type||(x.isdate?x.type="date":x.islog?x.type="log":x.isdate===!1&&x.islog===!1&&(x.type="linear")),(x.autorange==="withzero"||x.autorange==="tozero")&&(x.autorange=!0,x.rangemode="tozero"),delete x.islog,delete x.isdate,delete x.categories,T(x,"domain")&&delete x.domain,x.autotick!==void 0&&(x.tickmode===void 0&&(x.tickmode=x.autotick?"auto":"linear"),delete x.autotick),l(x)}else if(m&&m.test(r)){var A=n[r];l(A.radialaxis)}else if(o&&o.test(r)){var E=n[r];l(E.aaxis),l(E.baxis),l(E.caxis)}else if(t&&t.test(r)){var P=n[r],S=P.cameraposition;if(Array.isArray(S)&&S[0].length===4){var C=S[0],M=S[1],I=S[2],G=L([],C),V=[];for(h=0;h<3;++h)V[h]=M[h]+I*G[2+4*h];P.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:M[0],y:M[1],z:M[2]},up:{x:0,y:0,z:1}},delete P.cameraposition}l(P.xaxis),l(P.yaxis),l(P.zaxis)}}var q=Array.isArray(n.annotations)?n.annotations.length:0;for(a=0;a<q;a++){var ee=n.annotations[a];!D.isPlainObject(ee)||(ee.ref&&(ee.ref==="paper"?(ee.xref="paper",ee.yref="paper"):ee.ref==="data"&&(ee.xref="x",ee.yref="y"),delete ee.ref),s(ee,"xref"),s(ee,"yref"))}var Q=Array.isArray(n.shapes)?n.shapes.length:0;for(a=0;a<Q;a++){var U=n.shapes[a];!D.isPlainObject(U)||(s(U,"xref"),s(U,"yref"))}var O=Array.isArray(n.images)?n.images.length:0;for(a=0;a<O;a++){var Z=n.images[a];!D.isPlainObject(Z)||(s(Z,"xref"),s(Z,"yref"))}var B=n.legend;return B&&(B.x>3?(B.x=1.02,B.xanchor="left"):B.x<-2&&(B.x=-.02,B.xanchor="right"),B.y>3?(B.y=1.02,B.yanchor="bottom"):B.y<-2&&(B.y=-.02,B.yanchor="top")),l(n),n.dragmode==="rotate"&&(n.dragmode="orbit"),k.clean(n),n.template&&n.template.layout&&ae.cleanLayout(n.template.layout),n};function s(n,a){var h=n[a],c=a.charAt(0);h&&h!=="paper"&&(n[a]=d(h,c,!0))}function l(n){n&&((typeof n.title=="string"||typeof n.title=="number")&&(n.title={text:n.title}),a("titlefont","font"),a("titleposition","position"),a("titleside","side"),a("titleoffset","offset"));function a(h,c){var m=n[h],o=n.title&&n.title[c];m&&!o&&(n.title||(n.title={}),n.title[c]=n[h],delete n[h])}}ae.cleanData=function(n){for(var a=0;a<n.length;a++){var h=n[a],c;if(h.type==="histogramy"&&"xbins"in h&&!("ybins"in h)&&(h.ybins=h.xbins,delete h.xbins),h.error_y&&"opacity"in h.error_y){var m=k.defaults,o=h.error_y.color||(u(h,"bar")?k.defaultLine:m[a%m.length]);h.error_y.color=k.addOpacity(k.rgb(o),k.opacity(o)*h.error_y.opacity),delete h.error_y.opacity}if("bardir"in h&&(h.bardir==="h"&&(u(h,"bar")||h.type.substr(0,9)==="histogram")&&(h.orientation="h",ae.swapXYData(h)),delete h.bardir),h.type==="histogramy"&&ae.swapXYData(h),(h.type==="histogramx"||h.type==="histogramy")&&(h.type="histogram"),"scl"in h&&!("colorscale"in h)&&(h.colorscale=h.scl,delete h.scl),"reversescl"in h&&!("reversescale"in h)&&(h.reversescale=h.reversescl,delete h.reversescl),h.xaxis&&(h.xaxis=d(h.xaxis,"x")),h.yaxis&&(h.yaxis=d(h.yaxis,"y")),u(h,"gl3d")&&h.scene&&(h.scene=p.subplotsRegistry.gl3d.cleanId(h.scene)),!u(h,"pie-like")&&!u(h,"bar-like"))if(Array.isArray(h.textposition))for(c=0;c<h.textposition.length;c++)h.textposition[c]=y(h.textposition[c]);else h.textposition&&(h.textposition=y(h.textposition));var t=N.getModule(h);if(t&&t.colorbar){var i=t.colorbar.container,r=i?h[i]:h;r&&r.colorscale&&(r.colorscale==="YIGnBu"&&(r.colorscale="YlGnBu"),r.colorscale==="YIOrRd"&&(r.colorscale="YlOrRd"))}if(h.type==="surface"&&D.isPlainObject(h.contours)){var x=["x","y","z"];for(c=0;c<x.length;c++){var A=h.contours[x[c]];!D.isPlainObject(A)||(A.highlightColor&&(A.highlightcolor=A.highlightColor,delete A.highlightColor),A.highlightWidth&&(A.highlightwidth=A.highlightWidth,delete A.highlightWidth))}}if(h.type==="candlestick"||h.type==="ohlc"){var E=(h.increasing||{}).showlegend!==!1,P=(h.decreasing||{}).showlegend!==!1,S=b(h.increasing),C=b(h.decreasing);if(S!==!1&&C!==!1){var M=v(S,C,E,P);M&&(h.name=M)}else(S||C)&&!h.name&&(h.name=S||C)}if(Array.isArray(h.transforms)){var I=h.transforms;for(c=0;c<I.length;c++){var G=I[c];if(!!D.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var V=G.styles,q=Object.keys(V);G.styles=[];for(var ee=0;ee<q.length;ee++)G.styles.push({target:q[ee],value:V[q[ee]]})}break}}}T(h,"line")&&delete h.line,"marker"in h&&(T(h.marker,"line")&&delete h.marker.line,T(h,"marker")&&delete h.marker),k.clean(h),h.autobinx&&(delete h.autobinx,delete h.xbins),h.autobiny&&(delete h.autobiny,delete h.ybins),l(h),h.colorbar&&l(h.colorbar),h.marker&&h.marker.colorbar&&l(h.marker.colorbar),h.line&&h.line.colorbar&&l(h.line.colorbar),h.aaxis&&l(h.aaxis),h.baxis&&l(h.baxis)}};function b(n){if(!D.isPlainObject(n))return!1;var a=n.name;return delete n.name,delete n.showlegend,(typeof a=="string"||typeof a=="number")&&String(a)}function v(n,a,h,c){if(h&&!c)return n;if(c&&!h||!n.trim())return a;if(!a.trim())return n;var m=Math.min(n.length,a.length),o;for(o=0;o<m&&n.charAt(o)===a.charAt(o);o++);var t=n.substr(0,o);return t.trim()}function y(n){var a="middle",h="center";return typeof n=="string"&&(n.indexOf("top")!==-1?a="top":n.indexOf("bottom")!==-1&&(a="bottom"),n.indexOf("left")!==-1?h="left":n.indexOf("right")!==-1&&(h="right")),a+" "+h}function T(n,a){return a in n&&typeof n[a]=="object"&&Object.keys(n[a]).length===0}ae.swapXYData=function(n){var a;if(D.swapAttrs(n,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(n.z)&&Array.isArray(n.z[0])&&(n.transpose?delete n.transpose:n.transpose=!0),n.error_x&&n.error_y){var h=n.error_y,c="copy_ystyle"in h?h.copy_ystyle:!(h.color||h.thickness||h.width);D.swapAttrs(n,["error_?.copy_ystyle"]),c&&D.swapAttrs(n,["error_?.color","error_?.thickness","error_?.width"])}if(typeof n.hoverinfo=="string"){var m=n.hoverinfo.split("+");for(a=0;a<m.length;a++)m[a]==="x"?m[a]="y":m[a]==="y"&&(m[a]="x");n.hoverinfo=m.join("+")}},ae.coerceTraceIndices=function(n,a){if(R(a))return[a];if(!Array.isArray(a)||!a.length)return n.data.map(function(m,o){return o});if(Array.isArray(a)){for(var h=[],c=0;c<a.length;c++)D.isIndex(a[c],n.data.length)?h.push(a[c]):D.warn("trace index (",a[c],") is not a number or is out of bounds");return h}return a},ae.manageArrayContainers=function(n,a,h){var c=n.obj,m=n.parts,o=m.length,t=m[o-1],i=R(t);if(i&&a===null){var r=m.slice(0,o-1).join("."),x=D.nestedProperty(c,r).get();x.splice(t,1)}else i&&n.get()===void 0&&n.get()===void 0&&(h[n.astr]=null),n.set(a)};var _=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function f(n){var a=n.search(_);if(a>0)return n.substr(0,a)}ae.hasParent=function(n,a){for(var h=f(a);h;){if(h in n)return!0;h=f(h)}return!1};var g=["x","y","z"];ae.clearAxisTypes=function(n,a,h){for(var c=0;c<a.length;c++)for(var m=n._fullData[c],o=0;o<3;o++){var t=e(n,m,g[o]);if(t&&t.type!=="log"){var i=t._name,r=t._id.substr(1);if(r.substr(0,5)==="scene"){if(h[r]!==void 0)continue;i=r+"."+i}var x=i+".type";h[i]===void 0&&h[x]===void 0&&D.nestedProperty(n.layout,x).set(null)}}}},{"../components/color":119,"../lib":252,"../plots/cartesian/axis_ids":305,"../plots/plots":349,"../registry":352,"fast-isnumeric":31,"gl-mat4/fromQuat":38}],285:[function(z,le,ae){"use strict";var R=z("./plot_api");ae._doPlot=R._doPlot,ae.newPlot=R.newPlot,ae.restyle=R.restyle,ae.relayout=R.relayout,ae.redraw=R.redraw,ae.update=R.update,ae._guiRestyle=R._guiRestyle,ae._guiRelayout=R._guiRelayout,ae._guiUpdate=R._guiUpdate,ae._storeDirectGUIEdit=R._storeDirectGUIEdit,ae.react=R.react,ae.extendTraces=R.extendTraces,ae.prependTraces=R.prependTraces,ae.addTraces=R.addTraces,ae.deleteTraces=R.deleteTraces,ae.moveTraces=R.moveTraces,ae.purge=R.purge,ae.addFrames=R.addFrames,ae.deleteFrames=R.deleteFrames,ae.animate=R.animate,ae.setPlotConfig=R.setPlotConfig,ae.toImage=z("./to_image"),ae.validate=z("./validate"),ae.downloadImage=z("../snapshot/download");var L=z("./template_api");ae.makeTemplate=L.makeTemplate,ae.validateTemplate=L.validateTemplate},{"../snapshot/download":354,"./plot_api":287,"./template_api":292,"./to_image":293,"./validate":294}],286:[function(z,le,ae){"use strict";var R=z("../lib/is_plain_object"),L=z("../lib/noop"),N=z("../lib/loggers"),D=z("../lib/search").sorterAsc,p=z("../registry");ae.containerArrayMatch=z("./container_array_match");var w=ae.isAddVal=function(e){return e==="add"||R(e)},k=ae.isRemoveVal=function(e){return e===null||e==="remove"};ae.applyContainerArrayChanges=function(e,u,s,l,b){var v=u.astr,y=p.getComponentMethod(v,"supplyLayoutDefaults"),T=p.getComponentMethod(v,"draw"),_=p.getComponentMethod(v,"drawOne"),f=l.replot||l.recalc||y===L||T===L,g=e.layout,n=e._fullLayout;if(s[""]){Object.keys(s).length>1&&N.warn("Full array edits are incompatible with other edits",v);var a=s[""][""];if(k(a))u.set(null);else if(Array.isArray(a))u.set(a);else return N.warn("Unrecognized full array edit value",v,a),!0;return f?!1:(y(g,n),T(e),!0)}var h=Object.keys(s).map(Number).sort(D),c=u.get(),m=c||[],o=b(n,v).get(),t=[],i=-1,r=m.length,x,A,E,P,S,C,M,I;for(x=0;x<h.length;x++){if(E=h[x],P=s[E],S=Object.keys(P),C=P[""],M=w(C),E<0||E>m.length-(M?0:1)){N.warn("index out of range",v,E);continue}if(C!==void 0)S.length>1&&N.warn("Insertion & removal are incompatible with edits to the same index.",v,E),k(C)?t.push(E):M?(C==="add"&&(C={}),m.splice(E,0,C),o&&o.splice(E,0,{})):N.warn("Unrecognized full object edit value",v,E,C),i===-1&&(i=E);else for(A=0;A<S.length;A++)I=v+"["+E+"].",b(m[E],S[A],I).set(P[S[A]])}for(x=t.length-1;x>=0;x--)m.splice(t[x],1),o&&o.splice(t[x],1);if(m.length?c||u.set(m):u.set(null),f)return!1;if(y(g,n),_!==L){var G;if(i===-1)G=h;else{for(r=Math.max(m.length,r),G=[],x=0;x<h.length&&(E=h[x],!(E>=i));x++)G.push(E);for(x=i;x<r;x++)G.push(x)}for(x=0;x<G.length;x++)_(e,G[x])}else T(e);return!0}},{"../lib/is_plain_object":253,"../lib/loggers":256,"../lib/noop":261,"../lib/search":271,"../registry":352,"./container_array_match":282}],287:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("has-hover"),D=z("../lib"),p=D.nestedProperty,w=z("../lib/events"),k=z("../lib/queue"),d=z("../registry"),e=z("./plot_schema"),u=z("../plots/plots"),s=z("../plots/cartesian/axes"),l=z("../components/drawing"),b=z("../components/color"),v=z("../plots/cartesian/graph_interact").initInteractions,y=z("../constants/xmlns_namespaces"),T=z("../plots/cartesian/select").clearSelect,_=z("./plot_config").dfltConfig,f=z("./manage_arrays"),g=z("./helpers"),n=z("./subroutines"),a=z("./edit_types"),h=z("../plots/cartesian/constants").AX_NAME_PATTERN,c=0,m=5;function o(pe,Ae,Ce,Se){var He;if(pe=D.getGraphDiv(pe),w.init(pe),D.isPlainObject(Ae)){var Ne=Ae;Ae=Ne.data,Ce=Ne.layout,Se=Ne.config,He=Ne.frames}var qe=w.triggerHandler(pe,"plotly_beforeplot",[Ae,Ce,Se]);if(qe===!1)return Promise.reject();!Ae&&!Ce&&!D.isPlotDiv(pe)&&D.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",pe);function at(){if(He)return ae.addFrames(pe,He)}A(pe,Se),Ce||(Ce={}),R.select(pe).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(pe._promises)||(pe._promises=[]);var nt=(pe.data||[]).length===0&&Array.isArray(Ae);Array.isArray(Ae)&&(g.cleanData(Ae),nt?pe.data=Ae:pe.data.push.apply(pe.data,Ae),pe.empty=!1),(!pe.layout||nt)&&(pe.layout=g.cleanLayout(Ce)),u.supplyDefaults(pe);var Ze=pe._fullLayout,ht=Ze._has("cartesian");Ze._replotting=!0,(nt||Ze._shouldCreateBgLayer)&&(Be(pe),Ze._shouldCreateBgLayer&&delete Ze._shouldCreateBgLayer),l.initGradients(pe),l.initPatterns(pe),nt&&s.saveShowSpikeInitial(pe);var kt=!pe.calcdata||pe.calcdata.length!==(pe._fullData||[]).length;kt&&u.doCalcdata(pe);for(var xt=0;xt<pe.calcdata.length;xt++)pe.calcdata[xt][0].trace=pe._fullData[xt];pe._context.responsive?pe._responsiveChartHandler||(pe._responsiveChartHandler=function(){D.isHidden(pe)||u.resize(pe)},window.addEventListener("resize",pe._responsiveChartHandler)):D.clearResponsive(pe);var Bt=D.extendFlat({},Ze._size),Zt=0;function Gt(){for(var Re=Ze._basePlotModules,ze=0;ze<Re.length;ze++)Re[ze].drawFramework&&Re[ze].drawFramework(pe);!Ze._glcanvas&&Ze._has("gl")&&(Ze._glcanvas=Ze._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(et){return et.key}),Ze._glcanvas.enter().append("canvas").attr("class",function(et){return"gl-canvas gl-canvas-"+et.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ue=pe._context.plotGlPixelRatio;if(Ze._glcanvas){Ze._glcanvas.attr("width",Ze.width*Ue).attr("height",Ze.height*Ue).style("width",Ze.width+"px").style("height",Ze.height+"px");var je=Ze._glcanvas.data()[0].regl;if(je&&(Math.floor(Ze.width*Ue)!==je._gl.drawingBufferWidth||Math.floor(Ze.height*Ue)!==je._gl.drawingBufferHeight)){var Ye="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Zt)D.error(Ye);else return D.log(Ye+" Clearing graph and plotting again."),u.cleanPlot([],{},pe._fullData,Ze),u.supplyDefaults(pe),Ze=pe._fullLayout,u.doCalcdata(pe),Zt++,Gt()}}return Ze.modebar.orientation==="h"?Ze._modebardiv.style("height",null).style("width","100%"):Ze._modebardiv.style("width",null).style("height",Ze.height+"px"),u.previousPromises(pe)}function Rt(){if(u.clearAutoMarginIds(pe),n.drawMarginPushers(pe),s.allowAutoMargin(pe),Ze._has("pie"))for(var Re=pe._fullData,ze=0;ze<Re.length;ze++){var Ue=Re[ze];Ue.type==="pie"&&Ue.automargin&&u.allowAutoMargin(pe,"pie."+Ue.uid+".automargin")}return u.doAutoMargin(pe),u.previousPromises(pe)}function Wt(){if(!!u.didMarginChange(Bt,Ze._size))return D.syncOrAsync([Rt,n.layoutStyles],pe)}function It(){if(!kt){vt();return}return D.syncOrAsync([d.getComponentMethod("shapes","calcAutorange"),d.getComponentMethod("annotations","calcAutorange"),vt],pe)}function vt(){pe._transitioning||(n.doAutoRangeAndConstraints(pe),nt&&s.saveRangeInitial(pe),d.getComponentMethod("rangeslider","calcAutorange")(pe))}function Yt(){return s.draw(pe,nt?"":"redraw")}var Ft=[u.previousPromises,at,Gt,Rt,Wt];ht&&Ft.push(It),Ft.push(n.layoutStyles),ht&&Ft.push(Yt,function(ze){ze._fullLayout._insideTickLabelsAutorange&&re(ze,ze._fullLayout._insideTickLabelsAutorange).then(function(){ze._fullLayout._insideTickLabelsAutorange=void 0})}),Ft.push(n.drawData,n.finalDraw,v,u.addLinks,u.rehover,u.redrag,u.doAutoMargin,ye,u.previousPromises);function ye(Re){Re._fullLayout._insideTickLabelsAutorange&&nt&&s.saveRangeInitial(Re,!0)}var ge=D.syncOrAsync(Ft,pe);return(!ge||!ge.then)&&(ge=Promise.resolve()),ge.then(function(){return t(pe),pe})}function t(pe){var Ae=pe._fullLayout;Ae._redrawFromAutoMarginCount?Ae._redrawFromAutoMarginCount--:pe.emit("plotly_afterplot")}function i(pe){return D.extendFlat(_,pe)}function r(pe,Ae){try{pe._fullLayout._paper.style("background",Ae)}catch(Ce){D.error(Ce)}}function x(pe,Ae){var Ce=b.combine(Ae,"white");r(pe,Ce)}function A(pe,Ae){if(!pe._context){pe._context=D.extendDeep({},_);var Ce=R.select("base");pe._context._baseUrl=Ce.size()&&Ce.attr("href")?window.location.href.split("#")[0]:""}var Se=pe._context,He,Ne,qe;if(Ae){for(Ne=Object.keys(Ae),He=0;He<Ne.length;He++)qe=Ne[He],!(qe==="editable"||qe==="edits")&&qe in Se&&(qe==="setBackground"&&Ae[qe]==="opaque"?Se[qe]=x:Se[qe]=Ae[qe]);Ae.plot3dPixelRatio&&!Se.plotGlPixelRatio&&(Se.plotGlPixelRatio=Se.plot3dPixelRatio);var at=Ae.editable;if(at!==void 0)for(Se.editable=at,Ne=Object.keys(Se.edits),He=0;He<Ne.length;He++)Se.edits[Ne[He]]=at;if(Ae.edits)for(Ne=Object.keys(Ae.edits),He=0;He<Ne.length;He++)qe=Ne[He],qe in Se.edits&&(Se.edits[qe]=Ae.edits[qe]);Se._exportedPlot=Ae._exportedPlot}Se.staticPlot&&(Se.editable=!1,Se.edits={},Se.autosizable=!1,Se.scrollZoom=!1,Se.doubleClick=!1,Se.showTips=!1,Se.showLink=!1,Se.displayModeBar=!1),Se.displayModeBar==="hover"&&!N&&(Se.displayModeBar=!0),(Se.setBackground==="transparent"||typeof Se.setBackground!="function")&&(Se.setBackground=r),Se._hasZeroHeight=Se._hasZeroHeight||pe.clientHeight===0,Se._hasZeroWidth=Se._hasZeroWidth||pe.clientWidth===0;var nt=Se.scrollZoom,Ze=Se._scrollZoom={};if(nt===!0)Ze.cartesian=1,Ze.gl3d=1,Ze.geo=1,Ze.mapbox=1;else if(typeof nt=="string"){var ht=nt.split("+");for(He=0;He<ht.length;He++)Ze[ht[He]]=1}else nt!==!1&&(Ze.gl3d=1,Ze.geo=1,Ze.mapbox=1)}function E(pe){if(pe=D.getGraphDiv(pe),!D.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe);return g.cleanData(pe.data),g.cleanLayout(pe.layout),pe.calcdata=void 0,ae._doPlot(pe).then(function(){return pe.emit("plotly_redraw"),pe})}function P(pe,Ae,Ce,Se){return pe=D.getGraphDiv(pe),u.cleanPlot([],{},pe._fullData||[],pe._fullLayout||{}),u.purge(pe),ae._doPlot(pe,Ae,Ce,Se)}function S(pe,Ae){var Ce=Ae+1,Se=[],He,Ne;for(He=0;He<pe.length;He++)Ne=pe[He],Ne<0?Se.push(Ce+Ne):Se.push(Ne);return Se}function C(pe,Ae,Ce){var Se,He;for(Se=0;Se<Ae.length;Se++){if(He=Ae[Se],He!==parseInt(He,10))throw new Error("all values in "+Ce+" must be integers");if(He>=pe.data.length||He<-pe.data.length)throw new Error(Ce+" must be valid indices for gd.data.");if(Ae.indexOf(He,Se+1)>-1||He>=0&&Ae.indexOf(-pe.data.length+He)>-1||He<0&&Ae.indexOf(pe.data.length+He)>-1)throw new Error("each index in "+Ce+" must be unique.")}}function M(pe,Ae,Ce){if(!Array.isArray(pe.data))throw new Error("gd.data must be an array.");if(typeof Ae>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ae)||(Ae=[Ae]),C(pe,Ae,"currentIndices"),typeof Ce<"u"&&!Array.isArray(Ce)&&(Ce=[Ce]),typeof Ce<"u"&&C(pe,Ce,"newIndices"),typeof Ce<"u"&&Ae.length!==Ce.length)throw new Error("current and new indices must be of equal length.")}function I(pe,Ae,Ce){var Se,He;if(!Array.isArray(pe.data))throw new Error("gd.data must be an array.");if(typeof Ae>"u")throw new Error("traces must be defined.");for(Array.isArray(Ae)||(Ae=[Ae]),Se=0;Se<Ae.length;Se++)if(He=Ae[Se],typeof He!="object"||Array.isArray(He)||He===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ce<"u"&&!Array.isArray(Ce)&&(Ce=[Ce]),typeof Ce<"u"&&Ce.length!==Ae.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function G(pe,Ae,Ce,Se){var He=D.isPlainObject(Se);if(!Array.isArray(pe.data))throw new Error("gd.data must be an array");if(!D.isPlainObject(Ae))throw new Error("update must be a key:value object");if(typeof Ce>"u")throw new Error("indices must be an integer or array of integers");C(pe,Ce,"indices");for(var Ne in Ae){if(!Array.isArray(Ae[Ne])||Ae[Ne].length!==Ce.length)throw new Error("attribute "+Ne+" must be an array of length equal to indices array length");if(He&&(!(Ne in Se)||!Array.isArray(Se[Ne])||Se[Ne].length!==Ae[Ne].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function V(pe,Ae,Ce,Se){var He=D.isPlainObject(Se),Ne=[],qe,at,nt,Ze,ht;Array.isArray(Ce)||(Ce=[Ce]),Ce=S(Ce,pe.data.length-1);for(var kt in Ae)for(var xt=0;xt<Ce.length;xt++){if(qe=pe.data[Ce[xt]],nt=p(qe,kt),at=nt.get(),Ze=Ae[kt][xt],!D.isArrayOrTypedArray(Ze))throw new Error("attribute: "+kt+" index: "+xt+" must be an array");if(!D.isArrayOrTypedArray(at))throw new Error("cannot extend missing or non-array attribute: "+kt);if(at.constructor!==Ze.constructor)throw new Error("cannot extend array with an array of a different type: "+kt);ht=He?Se[kt][xt]:Se,L(ht)||(ht=-1),Ne.push({prop:nt,target:at,insert:Ze,maxp:Math.floor(ht)})}return Ne}function q(pe,Ae,Ce,Se,He){G(pe,Ae,Ce,Se);for(var Ne=V(pe,Ae,Ce,Se),qe={},at={},nt=0;nt<Ne.length;nt++){var Ze=Ne[nt].prop,ht=Ne[nt].maxp,kt=He(Ne[nt].target,Ne[nt].insert,ht);Ze.set(kt[0]),Array.isArray(qe[Ze.astr])||(qe[Ze.astr]=[]),qe[Ze.astr].push(kt[1]),Array.isArray(at[Ze.astr])||(at[Ze.astr]=[]),at[Ze.astr].push(Ne[nt].target.length)}return{update:qe,maxPoints:at}}function ee(pe,Ae){var Ce=new pe.constructor(pe.length+Ae.length);return Ce.set(pe),Ce.set(Ae,pe.length),Ce}function Q(pe,Ae,Ce,Se){pe=D.getGraphDiv(pe);function He(nt,Ze,ht){var kt,xt;if(D.isTypedArray(nt))if(ht<0){var Bt=new nt.constructor(0),Zt=ee(nt,Ze);ht<0?(kt=Zt,xt=Bt):(kt=Bt,xt=Zt)}else if(kt=new nt.constructor(ht),xt=new nt.constructor(nt.length+Ze.length-ht),ht===Ze.length)kt.set(Ze),xt.set(nt);else if(ht<Ze.length){var Gt=Ze.length-ht;kt.set(Ze.subarray(Gt)),xt.set(nt),xt.set(Ze.subarray(0,Gt),nt.length)}else{var Rt=ht-Ze.length,Wt=nt.length-Rt;kt.set(nt.subarray(Wt)),kt.set(Ze,Rt),xt.set(nt.subarray(0,Wt))}else kt=nt.concat(Ze),xt=ht>=0&&ht<kt.length?kt.splice(0,kt.length-ht):[];return[kt,xt]}var Ne=q(pe,Ae,Ce,Se,He),qe=ae.redraw(pe),at=[pe,Ne.update,Ce,Ne.maxPoints];return k.add(pe,ae.prependTraces,at,Q,arguments),qe}function U(pe,Ae,Ce,Se){pe=D.getGraphDiv(pe);function He(nt,Ze,ht){var kt,xt;if(D.isTypedArray(nt))if(ht<=0){var Bt=new nt.constructor(0),Zt=ee(Ze,nt);ht<0?(kt=Zt,xt=Bt):(kt=Bt,xt=Zt)}else if(kt=new nt.constructor(ht),xt=new nt.constructor(nt.length+Ze.length-ht),ht===Ze.length)kt.set(Ze),xt.set(nt);else if(ht<Ze.length){var Gt=Ze.length-ht;kt.set(Ze.subarray(0,Gt)),xt.set(Ze.subarray(Gt)),xt.set(nt,Gt)}else{var Rt=ht-Ze.length;kt.set(Ze),kt.set(nt.subarray(0,Rt),Ze.length),xt.set(nt.subarray(Rt))}else kt=Ze.concat(nt),xt=ht>=0&&ht<kt.length?kt.splice(ht,kt.length):[];return[kt,xt]}var Ne=q(pe,Ae,Ce,Se,He),qe=ae.redraw(pe),at=[pe,Ne.update,Ce,Ne.maxPoints];return k.add(pe,ae.extendTraces,at,U,arguments),qe}function O(pe,Ae,Ce){pe=D.getGraphDiv(pe);var Se=[],He=ae.deleteTraces,Ne=O,qe=[pe,Se],at=[pe,Ae],nt,Ze;for(I(pe,Ae,Ce),Array.isArray(Ae)||(Ae=[Ae]),Ae=Ae.map(function(ht){return D.extendFlat({},ht)}),g.cleanData(Ae),nt=0;nt<Ae.length;nt++)pe.data.push(Ae[nt]);for(nt=0;nt<Ae.length;nt++)Se.push(-Ae.length+nt);if(typeof Ce>"u")return Ze=ae.redraw(pe),k.add(pe,He,qe,Ne,at),Ze;Array.isArray(Ce)||(Ce=[Ce]);try{M(pe,Se,Ce)}catch(ht){throw pe.data.splice(pe.data.length-Ae.length,Ae.length),ht}return k.startSequence(pe),k.add(pe,He,qe,Ne,at),Ze=ae.moveTraces(pe,Se,Ce),k.stopSequence(pe),Ze}function Z(pe,Ae){pe=D.getGraphDiv(pe);var Ce=[],Se=ae.addTraces,He=Z,Ne=[pe,Ce,Ae],qe=[pe,Ae],at,nt;if(typeof Ae>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ae)||(Ae=[Ae]),C(pe,Ae,"indices"),Ae=S(Ae,pe.data.length-1),Ae.sort(D.sorterDes),at=0;at<Ae.length;at+=1)nt=pe.data.splice(Ae[at],1)[0],Ce.push(nt);var Ze=ae.redraw(pe);return k.add(pe,Se,Ne,He,qe),Ze}function B(pe,Ae,Ce){pe=D.getGraphDiv(pe);var Se=[],He=[],Ne=B,qe=B,at=[pe,Ce,Ae],nt=[pe,Ae,Ce],Ze;if(M(pe,Ae,Ce),Ae=Array.isArray(Ae)?Ae:[Ae],typeof Ce>"u")for(Ce=[],Ze=0;Ze<Ae.length;Ze++)Ce.push(-Ae.length+Ze);for(Ce=Array.isArray(Ce)?Ce:[Ce],Ae=S(Ae,pe.data.length-1),Ce=S(Ce,pe.data.length-1),Ze=0;Ze<pe.data.length;Ze++)Ae.indexOf(Ze)===-1&&Se.push(pe.data[Ze]);for(Ze=0;Ze<Ae.length;Ze++)He.push({newIndex:Ce[Ze],trace:pe.data[Ae[Ze]]});for(He.sort(function(kt,xt){return kt.newIndex-xt.newIndex}),Ze=0;Ze<He.length;Ze+=1)Se.splice(He[Ze].newIndex,0,He[Ze].trace);pe.data=Se;var ht=ae.redraw(pe);return k.add(pe,Ne,at,qe,nt),ht}function Y(pe,Ae,Ce,Se){pe=D.getGraphDiv(pe),g.clearPromiseQueue(pe);var He={};if(typeof Ae=="string")He[Ae]=Ce;else if(D.isPlainObject(Ae))He=D.extendFlat({},Ae),Se===void 0&&(Se=Ce);else return D.warn("Restyle fail.",Ae,Ce,Se),Promise.reject();Object.keys(He).length&&(pe.changed=!0);var Ne=g.coerceTraceIndices(pe,Se),qe=W(pe,He,Ne),at=qe.flags;at.calc&&(pe.calcdata=void 0),at.clearAxisTypes&&g.clearAxisTypes(pe,Ne,{});var nt=[];at.fullReplot?nt.push(ae._doPlot):(nt.push(u.previousPromises),u.supplyDefaults(pe),at.markerSize&&(u.doCalcdata(pe),ve(nt)),at.style&&nt.push(n.doTraceStyle),at.colorbars&&nt.push(n.doColorBars),nt.push(t)),nt.push(u.rehover,u.redrag),k.add(pe,Y,[pe,qe.undoit,qe.traces],Y,[pe,qe.redoit,qe.traces]);var Ze=D.syncOrAsync(nt,pe);return(!Ze||!Ze.then)&&(Ze=Promise.resolve()),Ze.then(function(){return pe.emit("plotly_restyle",qe.eventData),pe})}function j(pe){return pe===void 0?null:pe}function X(pe,Ae){return Ae?function(Ce,Se,He){var Ne=p(Ce,Se),qe=Ne.set;return Ne.set=function(at){var nt=(He||"")+Se;H(nt,Ne.get(),at,pe),qe(at)},Ne}:p}function H(pe,Ae,Ce,Se){if(Array.isArray(Ae)||Array.isArray(Ce))for(var He=Array.isArray(Ae)?Ae:[],Ne=Array.isArray(Ce)?Ce:[],qe=Math.max(He.length,Ne.length),at=0;at<qe;at++)H(pe+"["+at+"]",He[at],Ne[at],Se);else if(D.isPlainObject(Ae)||D.isPlainObject(Ce)){var nt=D.isPlainObject(Ae)?Ae:{},Ze=D.isPlainObject(Ce)?Ce:{},ht=D.extendFlat({},nt,Ze);for(var kt in ht)H(pe+"."+kt,nt[kt],Ze[kt],Se)}else Se[pe]===void 0&&(Se[pe]=j(Ae))}function K(pe,Ae,Ce){for(var Se in Ce){var He=p(pe,Se);H(Se,He.get(),Ce[Se],Ae)}}function W(pe,Ae,Ce){var Se=pe._fullLayout,He=pe._fullData,Ne=pe.data,qe=Se._guiEditing,at=X(Se._preGUI,qe),nt=D.extendDeepAll({},Ae),Ze;$(Ae);var ht=a.traceFlags(),kt={},xt={},Bt;function Zt(){return Ce.map(function(){})}function Gt($t){var Pt=s.id2name($t);Bt.indexOf(Pt)===-1&&Bt.push(Pt)}function Rt($t){return"LAYOUT"+$t+".autorange"}function Wt($t){return"LAYOUT"+$t+".range"}function It($t){for(var Pt=$t;Pt<He.length;Pt++)if(He[Pt]._input===Ne[$t])return He[Pt]}function vt($t,Pt,rr){if(Array.isArray($t)){$t.forEach(function(cr){vt(cr,Pt,rr)});return}if(!($t in Ae||g.hasParent(Ae,$t))){var ir;if($t.substr(0,6)==="LAYOUT")ir=at(pe.layout,$t.replace("LAYOUT",""));else{var tr=Ce[rr],sr=Se._tracePreGUI[It(tr)._fullInput.uid];ir=X(sr,qe)(Ne[tr],$t)}$t in xt||(xt[$t]=Zt()),xt[$t][rr]===void 0&&(xt[$t][rr]=j(ir.get())),Pt!==void 0&&ir.set(Pt)}}function Yt($t){return function(Pt){return He[Pt][$t]}}function Ft($t){return function(Pt,rr){return Pt===!1?He[Ce[rr]][$t]:null}}for(var ye in Ae){if(g.hasParent(Ae,ye))throw new Error("cannot set "+ye+" and a parent attribute simultaneously");var ge=Ae[ye],Re,ze,Ue,je,Ye,et;if((ye==="autobinx"||ye==="autobiny")&&(ye=ye.charAt(ye.length-1)+"bins",Array.isArray(ge)?ge=ge.map(Ft(ye)):ge===!1?ge=Ce.map(Yt(ye)):ge=null),kt[ye]=ge,ye.substr(0,6)==="LAYOUT"){Ue=at(pe.layout,ye.replace("LAYOUT","")),xt[ye]=[j(Ue.get())],Ue.set(Array.isArray(ge)?ge[0]:ge),ht.calc=!0;continue}for(xt[ye]=Zt(),Ze=0;Ze<Ce.length;Ze++){Re=Ne[Ce[Ze]],ze=It(Ce[Ze]);var ot=Se._tracePreGUI[ze._fullInput.uid];if(Ue=X(ot,qe)(Re,ye),je=Ue.get(),Ye=Array.isArray(ge)?ge[Ze%ge.length]:ge,Ye!==void 0){var _t=Ue.parts[Ue.parts.length-1],Mt=ye.substr(0,ye.length-_t.length-1),St=Mt?Mt+".":"",Dt=Mt?p(ze,Mt).get():ze;if(et=e.getTraceValObject(ze,Ue.parts),et&&et.impliedEdits&&Ye!==null)for(var Ot in et.impliedEdits)vt(D.relativeAttr(ye,Ot),et.impliedEdits[Ot],Ze);else if((_t==="thicknessmode"||_t==="lenmode")&&je!==Ye&&(Ye==="fraction"||Ye==="pixels")&&Dt){var Ht=Se._size,er=Dt.orient,wt=er==="top"||er==="bottom";if(_t==="thicknessmode"){var Et=wt?Ht.h:Ht.w;vt(St+"thickness",Dt.thickness*(Ye==="fraction"?1/Et:Et),Ze)}else{var zt=wt?Ht.w:Ht.h;vt(St+"len",Dt.len*(Ye==="fraction"?1/zt:zt),Ze)}}else if(ye==="type"&&(Ye==="pie"!=(je==="pie")||Ye==="funnelarea"!=(je==="funnelarea"))){var Ut="x",pt="y";(Ye==="bar"||je==="bar")&&Re.orientation==="h"&&(Ut="y",pt="x"),D.swapAttrs(Re,["?","?src"],"labels",Ut),D.swapAttrs(Re,["d?","?0"],"label",Ut),D.swapAttrs(Re,["?","?src"],"values",pt),je==="pie"||je==="funnelarea"?(p(Re,"marker.color").set(p(Re,"marker.colors").get()),Se._pielayer.selectAll("g.trace").remove()):d.traceIs(Re,"cartesian")&&p(Re,"marker.colors").set(p(Re,"marker.color").get())}xt[ye][Ze]=j(je);var Ct=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ct.indexOf(ye)!==-1){if(ye==="orientation"){Ue.set(Ye);var Lt=Re.x&&!Re.y?"h":"v";if((Ue.get()||Lt)===ze.orientation)continue}else ye==="orientationaxes"&&(Re.orientation={v:"h",h:"v"}[ze.orientation]);g.swapXYData(Re),ht.calc=ht.clearAxisTypes=!0}else u.dataArrayContainers.indexOf(Ue.parts[0])!==-1?(g.manageArrayContainers(Ue,Ye,xt),ht.calc=!0):(et?et.arrayOk&&!d.traceIs(ze,"regl")&&(D.isArrayOrTypedArray(Ye)||D.isArrayOrTypedArray(je))?ht.calc=!0:a.update(ht,et):ht.calc=!0,Ue.set(Ye))}}if(["swapxyaxes","orientationaxes"].indexOf(ye)!==-1&&s.swap(pe,Ce),ye==="orientationaxes"){var At=p(pe.layout,"hovermode"),Vt=At.get();Vt==="x"?At.set("y"):Vt==="y"?At.set("x"):Vt==="x unified"?At.set("y unified"):Vt==="y unified"&&At.set("x unified")}if(["orientation","type"].indexOf(ye)!==-1){for(Bt=[],Ze=0;Ze<Ce.length;Ze++){var Qt=Ne[Ce[Ze]];d.traceIs(Qt,"cartesian")&&(Gt(Qt.xaxis||"x"),Gt(Qt.yaxis||"y"))}vt(Bt.map(Rt),!0,0),vt(Bt.map(Wt),[0,1],0)}}return(ht.calc||ht.plot)&&(ht.fullReplot=!0),{flags:ht,undoit:xt,redoit:kt,traces:Ce,eventData:D.extendDeepNoArrays([],[nt,Ce])}}function $(pe){var Ae=D.counterRegex("axis",".title",!1,!1),Ce=/colorbar\.title$/,Se=Object.keys(pe),He,Ne,qe;for(He=0;He<Se.length;He++)Ne=Se[He],qe=pe[Ne],(Ne==="title"||Ae.test(Ne)||Ce.test(Ne))&&(typeof qe=="string"||typeof qe=="number")?at(Ne,Ne.replace("title","title.text")):Ne.indexOf("titlefont")>-1&&Ne.indexOf("grouptitlefont")===-1?at(Ne,Ne.replace("titlefont","title.font")):Ne.indexOf("titleposition")>-1?at(Ne,Ne.replace("titleposition","title.position")):Ne.indexOf("titleside")>-1?at(Ne,Ne.replace("titleside","title.side")):Ne.indexOf("titleoffset")>-1&&at(Ne,Ne.replace("titleoffset","title.offset"));function at(nt,Ze){pe[Ze]=pe[nt],delete pe[nt]}}function re(pe,Ae,Ce){pe=D.getGraphDiv(pe),g.clearPromiseQueue(pe);var Se={};if(typeof Ae=="string")Se[Ae]=Ce;else if(D.isPlainObject(Ae))Se=D.extendFlat({},Ae);else return D.warn("Relayout fail.",Ae,Ce),Promise.reject();Object.keys(Se).length&&(pe.changed=!0);var He=fe(pe,Se),Ne=He.flags;Ne.calc&&(pe.calcdata=void 0);var qe=[u.previousPromises];Ne.layoutReplot?qe.push(n.layoutReplot):Object.keys(Se).length&&(de(pe,Ne,He)||u.supplyDefaults(pe),Ne.legend&&qe.push(n.doLegend),Ne.layoutstyle&&qe.push(n.layoutStyles),Ne.axrange&&ve(qe,He.rangesAltered),Ne.ticks&&qe.push(n.doTicksRelayout),Ne.modebar&&qe.push(n.doModeBar),Ne.camera&&qe.push(n.doCamera),Ne.colorbars&&qe.push(n.doColorBars),qe.push(t)),qe.push(u.rehover,u.redrag),k.add(pe,re,[pe,He.undoit],re,[pe,He.redoit]);var at=D.syncOrAsync(qe,pe);return(!at||!at.then)&&(at=Promise.resolve(pe)),at.then(function(){return pe.emit("plotly_relayout",He.eventData),pe})}function de(pe,Ae,Ce){var Se=pe._fullLayout;if(!Ae.axrange)return!1;for(var He in Ae)if(He!=="axrange"&&Ae[He])return!1;for(var Ne in Ce.rangesAltered){var qe=s.id2name(Ne),at=pe.layout[qe],nt=Se[qe];if(nt.autorange=at.autorange,at.range&&(nt.range=at.range.slice()),nt.cleanRange(),nt._matchGroup){for(var Ze in nt._matchGroup)if(Ze!==Ne){var ht=Se[s.id2name(Ze)];ht.autorange=nt.autorange,ht.range=nt.range.slice(),ht._input.range=nt.range.slice()}}}return!0}function ve(pe,Ae){var Ce=Ae?function(Se){var He=[],Ne=!0;for(var qe in Ae){var at=s.getFromId(Se,qe);if(He.push(qe),(at.ticklabelposition||"").indexOf("inside")!==-1&&at._anchorAxis&&He.push(at._anchorAxis._id),at._matchGroup)for(var nt in at._matchGroup)Ae[nt]||He.push(nt);at.automargin&&(Ne=!1)}return s.draw(Se,He,{skipTitle:Ne})}:function(Se){return s.draw(Se,"redraw")};pe.push(T,n.doAutoRangeAndConstraints,Ce,n.drawData,n.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ce=/^[xyz]axis[0-9]*\.autorange$/,_e=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function fe(pe,Ae){var Ce=pe.layout,Se=pe._fullLayout,He=Se._guiEditing,Ne=X(Se._preGUI,He),qe=Object.keys(Ae),at=s.list(pe),nt=D.extendDeepAll({},Ae),Ze={},ht,kt,xt;for($(Ae),qe=Object.keys(Ae),kt=0;kt<qe.length;kt++)if(qe[kt].indexOf("allaxes")===0){for(xt=0;xt<at.length;xt++){var Bt=at[xt]._id.substr(1),Zt=Bt.indexOf("scene")!==-1?Bt+".":"",Gt=qe[kt].replace("allaxes",Zt+at[xt]._name);Ae[Gt]||(Ae[Gt]=Ae[qe[kt]])}delete Ae[qe[kt]]}var Rt=a.layoutFlags(),Wt={},It={};function vt(tr,sr){if(Array.isArray(tr)){tr.forEach(function(vr){vt(vr,sr)});return}if(!(tr in Ae||g.hasParent(Ae,tr))){var cr=Ne(Ce,tr);tr in It||(It[tr]=j(cr.get())),sr!==void 0&&cr.set(sr)}}var Yt={},Ft;function ye(tr){var sr=s.name2id(tr.split(".")[0]);return Yt[sr]=1,sr}for(var ge in Ae){if(g.hasParent(Ae,ge))throw new Error("cannot set "+ge+" and a parent attribute simultaneously");for(var Re=Ne(Ce,ge),ze=Ae[ge],Ue=Re.parts.length,je=Ue-1;je>0&&typeof Re.parts[je]!="string";)je--;var Ye=Re.parts[je],et=Re.parts[je-1]+"."+Ye,ot=Re.parts.slice(0,je).join("."),_t=p(pe.layout,ot).get(),Mt=p(Se,ot).get(),St=Re.get();if(ze!==void 0){Wt[ge]=ze,It[ge]=Ye==="reverse"?ze:j(St);var Dt=e.getLayoutValObject(Se,Re.parts);if(Dt&&Dt.impliedEdits&&ze!==null)for(var Ot in Dt.impliedEdits)vt(D.relativeAttr(ge,Ot),Dt.impliedEdits[Ot]);if(["width","height"].indexOf(ge)!==-1)if(ze){vt("autosize",null);var Ht=ge==="height"?"width":"height";vt(Ht,Se[Ht])}else Se[ge]=pe._initialAutoSize[ge];else if(ge==="autosize")vt("width",ze?null:Se.width),vt("height",ze?null:Se.height);else if(et.match(ue))ye(et),p(Se,ot+"._inputRange").set(null);else if(et.match(ce)){ye(et),p(Se,ot+"._inputRange").set(null);var er=p(Se,ot).get();er._inputDomain&&(er._input.domain=er._inputDomain.slice())}else et.match(_e)&&p(Se,ot+"._inputDomain").set(null);if(Ye==="type"){Ft=_t;var wt=Mt.type==="linear"&&ze==="log",Et=Mt.type==="log"&&ze==="linear";if(wt||Et){if(!Ft||!Ft.range)vt(ot+".autorange",!0);else if(Mt.autorange)wt&&(Ft.range=Ft.range[1]>Ft.range[0]?[1,2]:[2,1]);else{var zt=Ft.range[0],Ut=Ft.range[1];wt?(zt<=0&&Ut<=0&&vt(ot+".autorange",!0),zt<=0?zt=Ut/1e6:Ut<=0&&(Ut=zt/1e6),vt(ot+".range[0]",Math.log(zt)/Math.LN10),vt(ot+".range[1]",Math.log(Ut)/Math.LN10)):(vt(ot+".range[0]",Math.pow(10,zt)),vt(ot+".range[1]",Math.pow(10,Ut)))}Array.isArray(Se._subplots.polar)&&Se._subplots.polar.length&&Se[Re.parts[0]]&&Re.parts[1]==="radialaxis"&&delete Se[Re.parts[0]]._subplot.viewInitial["radialaxis.range"],d.getComponentMethod("annotations","convertCoords")(pe,Mt,ze,vt),d.getComponentMethod("images","convertCoords")(pe,Mt,ze,vt)}else vt(ot+".autorange",!0),vt(ot+".range",null);p(Se,ot+"._inputRange").set(null)}else if(Ye.match(h)){var pt=p(Se,ge).get(),Ct=(ze||{}).type;(!Ct||Ct==="-")&&(Ct="linear"),d.getComponentMethod("annotations","convertCoords")(pe,pt,Ct,vt),d.getComponentMethod("images","convertCoords")(pe,pt,Ct,vt)}var Lt=f.containerArrayMatch(ge);if(Lt){ht=Lt.array,kt=Lt.index;var At=Lt.property,Vt=Dt||{editType:"calc"};kt!==""&&At===""&&(f.isAddVal(ze)?It[ge]=null:f.isRemoveVal(ze)?It[ge]=(p(Ce,ht).get()||[])[kt]:D.warn("unrecognized full object value",Ae)),a.update(Rt,Vt),Ze[ht]||(Ze[ht]={});var Qt=Ze[ht][kt];Qt||(Qt=Ze[ht][kt]={}),Qt[At]=ze,delete Ae[ge]}else Ye==="reverse"?(_t.range?_t.range.reverse():(vt(ot+".autorange",!0),_t.range=[1,0]),Mt.autorange?Rt.calc=!0:Rt.plot=!0):(Se._has("scatter-like")&&Se._has("regl")&&ge==="dragmode"&&(ze==="lasso"||ze==="select")&&!(St==="lasso"||St==="select")||Se._has("gl2d")?Rt.plot=!0:Dt?a.update(Rt,Dt):Rt.calc=!0,Re.set(ze))}}for(ht in Ze){var $t=f.applyContainerArrayChanges(pe,Ne(Ce,ht),Ze[ht],Rt,Ne);$t||(Rt.plot=!0)}for(var Pt in Yt){Ft=s.getFromId(pe,Pt);var rr=Ft&&Ft._constraintGroup;if(rr){Rt.calc=!0;for(var ir in rr)Yt[ir]||(s.getFromId(pe,ir)._constraintShrinkable=!0)}}return(ne(pe)||Ae.height||Ae.width)&&(Rt.plot=!0),(Rt.plot||Rt.calc)&&(Rt.layoutReplot=!0),{flags:Rt,rangesAltered:Yt,undoit:It,redoit:Wt,eventData:nt}}function ne(pe){var Ae=pe._fullLayout,Ce=Ae.width,Se=Ae.height;return pe.layout.autosize&&u.plotAutoSize(pe,pe.layout,Ae),Ae.width!==Ce||Ae.height!==Se}function ie(pe,Ae,Ce,Se){pe=D.getGraphDiv(pe),g.clearPromiseQueue(pe),D.isPlainObject(Ae)||(Ae={}),D.isPlainObject(Ce)||(Ce={}),Object.keys(Ae).length&&(pe.changed=!0),Object.keys(Ce).length&&(pe.changed=!0);var He=g.coerceTraceIndices(pe,Se),Ne=W(pe,D.extendFlat({},Ae),He),qe=Ne.flags,at=fe(pe,D.extendFlat({},Ce)),nt=at.flags;(qe.calc||nt.calc)&&(pe.calcdata=void 0),qe.clearAxisTypes&&g.clearAxisTypes(pe,He,Ce);var Ze=[];nt.layoutReplot?Ze.push(n.layoutReplot):qe.fullReplot?Ze.push(ae._doPlot):(Ze.push(u.previousPromises),de(pe,nt,at)||u.supplyDefaults(pe),qe.style&&Ze.push(n.doTraceStyle),(qe.colorbars||nt.colorbars)&&Ze.push(n.doColorBars),nt.legend&&Ze.push(n.doLegend),nt.layoutstyle&&Ze.push(n.layoutStyles),nt.axrange&&ve(Ze,at.rangesAltered),nt.ticks&&Ze.push(n.doTicksRelayout),nt.modebar&&Ze.push(n.doModeBar),nt.camera&&Ze.push(n.doCamera),Ze.push(t)),Ze.push(u.rehover,u.redrag),k.add(pe,ie,[pe,Ne.undoit,at.undoit,Ne.traces],ie,[pe,Ne.redoit,at.redoit,Ne.traces]);var ht=D.syncOrAsync(Ze,pe);return(!ht||!ht.then)&&(ht=Promise.resolve(pe)),ht.then(function(){return pe.emit("plotly_update",{data:Ne.eventData,layout:at.eventData}),pe})}function me(pe){return function(Ce){Ce._fullLayout._guiEditing=!0;var Se=pe.apply(null,arguments);return Ce._fullLayout._guiEditing=!1,Se}}var we=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],be=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Me(pe,Ae){for(var Ce=0;Ce<Ae.length;Ce++){var Se=Ae[Ce],He=pe.match(Se.pattern);if(He){var Ne=He[1]||"";return{head:Ne,tail:pe.substr(Ne.length+1),attr:Se.attr}}}}function Ie(pe,Ae){var Ce=p(Ae,pe).get();if(Ce!==void 0)return Ce;var Se=pe.split(".");for(Se.pop();Se.length>1;)if(Se.pop(),Ce=p(Ae,Se.join(".")+".uirevision").get(),Ce!==void 0)return Ce;return Ae.uirevision}function Ke(pe,Ae){for(var Ce=0;Ce<Ae.length;Ce++)if(Ae[Ce]._fullInput.uid===pe)return Ce;return-1}function Oe(pe,Ae,Ce){for(var Se=0;Se<Ae.length;Se++)if(Ae[Se].uid===pe)return Se;return!Ae[Ce]||Ae[Ce].uid?-1:Ce}function We(pe,Ae){var Ce=D.isPlainObject(pe),Se=Array.isArray(pe);return Ce||Se?(Ce&&D.isPlainObject(Ae)||Se&&Array.isArray(Ae))&&JSON.stringify(pe)===JSON.stringify(Ae):pe===Ae}function Fe(pe,Ae,Ce,Se){var He=Se._preGUI,Ne,qe,at,nt,Ze,ht,kt,xt,Bt,Zt,Gt=[],Rt={},Wt={};for(Ne in He){if(Ze=Me(Ne,we),Ze){if(Bt=Ze.head,Zt=Ze.tail,qe=Ze.attr||Bt+".uirevision",at=p(Se,qe).get(),nt=at&&Ie(qe,Ae),nt&&nt===at){if(ht=He[Ne],ht===null&&(ht=void 0),kt=p(Ae,Ne),xt=kt.get(),We(xt,ht)){xt===void 0&&Zt==="autorange"&&Gt.push(Bt),kt.set(j(p(Se,Ne).get()));continue}else if(Zt==="autorange"||Zt.substr(0,6)==="range["){var It=He[Bt+".range[0]"],vt=He[Bt+".range[1]"],Yt=He[Bt+".autorange"];if(Yt||Yt===null&&It===null&&vt===null){if(!(Bt in Rt)){var Ft=p(Ae,Bt).get();Rt[Bt]=Ft&&(Ft.autorange||Ft.autorange!==!1&&(!Ft.range||Ft.range.length!==2))}if(Rt[Bt]){kt.set(j(p(Se,Ne).get()));continue}}}}}else D.warn("unrecognized GUI edit: "+Ne);delete He[Ne],Ze&&Ze.tail.substr(0,6)==="range["&&(Wt[Ze.head]=1)}for(var ye=0;ye<Gt.length;ye++){var ge=Gt[ye];if(Wt[ge]){var Re=p(Ae,ge).get();Re&&delete Re.autorange}}var ze=Se._tracePreGUI;for(var Ue in ze){var je=ze[Ue],Ye=null,et;for(Ne in je){if(!Ye){var ot=Ke(Ue,Ce);if(ot<0){delete ze[Ue];break}var _t=Ce[ot];et=_t._fullInput;var Mt=Oe(Ue,pe,et.index);if(Mt<0){delete ze[Ue];break}Ye=pe[Mt]}if(Ze=Me(Ne,be),Ze){if(Ze.attr?(at=p(Se,Ze.attr).get(),nt=at&&Ie(Ze.attr,Ae)):(at=et.uirevision,nt=Ye.uirevision,nt===void 0&&(nt=Ae.uirevision)),nt&&nt===at&&(ht=je[Ne],ht===null&&(ht=void 0),kt=p(Ye,Ne),xt=kt.get(),We(xt,ht))){kt.set(j(p(et,Ne).get()));continue}}else D.warn("unrecognized GUI edit: "+Ne+" in trace uid "+Ue);delete je[Ne]}}}function Ge(pe,Ae,Ce,Se){var He,Ne;function qe(){return ae.addFrames(pe,He)}pe=D.getGraphDiv(pe),g.clearPromiseQueue(pe);var at=pe._fullData,nt=pe._fullLayout;if(!D.isPlotDiv(pe)||!at||!nt)Ne=ae.newPlot(pe,Ae,Ce,Se);else{if(D.isPlainObject(Ae)){var Ze=Ae;Ae=Ze.data,Ce=Ze.layout,Se=Ze.config,He=Ze.frames}var ht=!1;if(Se){var kt=D.extendDeep({},pe._context);pe._context=void 0,A(pe,Se),ht=dt(kt,pe._context)}pe.data=Ae||[],g.cleanData(pe.data),pe.layout=Ce||{},g.cleanLayout(pe.layout),Fe(pe.data,pe.layout,at,nt),u.supplyDefaults(pe,{skipUpdateCalc:!0});var xt=pe._fullData,Bt=pe._fullLayout,Zt=Bt.datarevision===void 0,Gt=Bt.transition,Rt=ut(pe,nt,Bt,Zt,Gt),Wt=Rt.newDataRevision,It=Xe(pe,at,xt,Zt,Gt,Wt);if(ne(pe)&&(Rt.layoutReplot=!0),It.calc||Rt.calc){pe.calcdata=void 0;for(var vt=Object.getOwnPropertyNames(Bt),Yt=0;Yt<vt.length;Yt++){var Ft=vt[Yt],ye=Ft.substring(0,5);if(ye==="xaxis"||ye==="yaxis"){var ge=Bt[Ft]._emptyCategories;ge&&ge()}}}else u.supplyDefaultsUpdateCalc(pe.calcdata,xt);var Re=[];if(He&&(pe._transitionData={},u.createTransitionData(pe),Re.push(qe)),Bt.transition&&!ht&&(It.anim||Rt.anim))Rt.ticks&&Re.push(n.doTicksRelayout),u.doCalcdata(pe),n.doAutoRangeAndConstraints(pe),Re.push(function(){return u.transitionFromReact(pe,It,Rt,nt)});else if(It.fullReplot||Rt.layoutReplot||ht)pe._fullLayout._skipDefaults=!0,Re.push(ae._doPlot);else{for(var ze in Rt.arrays){var Ue=Rt.arrays[ze];if(Ue.length){var je=d.getComponentMethod(ze,"drawOne");if(je!==D.noop)for(var Ye=0;Ye<Ue.length;Ye++)je(pe,Ue[Ye]);else{var et=d.getComponentMethod(ze,"draw");if(et===D.noop)throw new Error("cannot draw components: "+ze);et(pe)}}}Re.push(u.previousPromises),It.style&&Re.push(n.doTraceStyle),(It.colorbars||Rt.colorbars)&&Re.push(n.doColorBars),Rt.legend&&Re.push(n.doLegend),Rt.layoutstyle&&Re.push(n.layoutStyles),Rt.axrange&&ve(Re),Rt.ticks&&Re.push(n.doTicksRelayout),Rt.modebar&&Re.push(n.doModeBar),Rt.camera&&Re.push(n.doCamera),Re.push(t)}Re.push(u.rehover,u.redrag),Ne=D.syncOrAsync(Re,pe),(!Ne||!Ne.then)&&(Ne=Promise.resolve(pe))}return Ne.then(function(){return pe.emit("plotly_react",{data:Ae,layout:Ce}),pe})}function Xe(pe,Ae,Ce,Se,He,Ne){var qe=Ae.length===Ce.length;if(!He&&!qe)return{fullReplot:!0,calc:!0};var at=a.traceFlags();at.arrays={},at.nChanges=0,at.nChangesAnim=0;var nt,Ze;function ht(Bt){var Zt=e.getTraceValObject(Ze,Bt);return!Ze._module.animatable&&Zt.anim&&(Zt.anim=!1),Zt}var kt={getValObject:ht,flags:at,immutable:Se,transition:He,newDataRevision:Ne,gd:pe},xt={};for(nt=0;nt<Ae.length;nt++)if(Ce[nt]){if(Ze=Ce[nt]._fullInput,u.hasMakesDataTransform(Ze)&&(Ze=Ce[nt]),xt[Ze.uid])continue;xt[Ze.uid]=1,rt(Ae[nt]._fullInput,Ze,[],kt)}return(at.calc||at.plot)&&(at.fullReplot=!0),He&&at.nChanges&&at.nChangesAnim&&(at.anim=at.nChanges===at.nChangesAnim&&qe?"all":"some"),at}function ut(pe,Ae,Ce,Se,He){var Ne=a.layoutFlags();Ne.arrays={},Ne.rangesAltered={},Ne.nChanges=0,Ne.nChangesAnim=0;function qe(nt){return e.getLayoutValObject(Ce,nt)}var at={getValObject:qe,flags:Ne,immutable:Se,transition:He,gd:pe};return rt(Ae,Ce,[],at),(Ne.plot||Ne.calc)&&(Ne.layoutReplot=!0),He&&Ne.nChanges&&Ne.nChangesAnim&&(Ne.anim=Ne.nChanges===Ne.nChangesAnim?"all":"some"),Ne}function rt(pe,Ae,Ce,Se){var He,Ne,qe,at=Se.getValObject,nt=Se.flags,Ze=Se.immutable,ht=Se.inArray,kt=Se.arrayIndex;function xt(){var ot=He.editType;if(ht&&ot.indexOf("arraydraw")!==-1){D.pushUnique(nt.arrays[ht],kt);return}a.update(nt,He),ot!=="none"&&nt.nChanges++,Se.transition&&He.anim&&nt.nChangesAnim++,(ue.test(qe)||ce.test(qe))&&(nt.rangesAltered[Ce[0]]=1),_e.test(qe)&&p(Ae,"_inputDomain").set(null),Ne==="datarevision"&&(nt.newDataRevision=1)}function Bt(ot){return ot.valType==="data_array"||ot.arrayOk}for(Ne in pe){if(nt.calc&&!Se.transition)return;var Zt=pe[Ne],Gt=Ae[Ne],Rt=Ce.concat(Ne);if(qe=Rt.join("."),!(Ne.charAt(0)==="_"||typeof Zt=="function"||Zt===Gt)){if((Ne==="tick0"||Ne==="dtick")&&Ce[0]!=="geo"){var Wt=Ae.tickmode;if(Wt==="auto"||Wt==="array"||!Wt)continue}if(!(Ne==="range"&&Ae.autorange)&&!((Ne==="zmin"||Ne==="zmax")&&Ae.type==="contourcarpet")&&(He=at(Rt),!!He&&!(He._compareAsJSON&&JSON.stringify(Zt)===JSON.stringify(Gt)))){var It=He.valType,vt,Yt=Bt(He),Ft=Array.isArray(Zt),ye=Array.isArray(Gt);if(Ft&&ye){var ge="_input_"+Ne,Re=pe[ge],ze=Ae[ge];if(Array.isArray(Re)&&Re===ze)continue}if(Gt===void 0)Yt&&Ft?nt.calc=!0:xt();else if(He._isLinkedToArray){var Ue=[],je=!1;ht||(nt.arrays[Ne]=Ue);var Ye=Math.min(Zt.length,Gt.length),et=Math.max(Zt.length,Gt.length);if(Ye!==et)if(He.editType==="arraydraw")je=!0;else{xt();continue}for(vt=0;vt<Ye;vt++)rt(Zt[vt],Gt[vt],Rt.concat(vt),D.extendFlat({inArray:Ne,arrayIndex:vt},Se));if(je)for(vt=Ye;vt<et;vt++)Ue.push(vt)}else!It&&D.isPlainObject(Zt)?rt(Zt,Gt,Rt,Se):Yt?Ft&&ye?(Ze&&(nt.calc=!0),(Ze||Se.newDataRevision)&&xt()):Ft!==ye?nt.calc=!0:xt():Ft&&ye?(Zt.length!==Gt.length||String(Zt)!==String(Gt))&&xt():xt()}}}for(Ne in Ae)if(!(Ne in pe||Ne.charAt(0)==="_"||typeof Ae[Ne]=="function"))if(He=at(Ce.concat(Ne)),Bt(He)&&Array.isArray(Ae[Ne])){nt.calc=!0;return}else xt()}function dt(pe,Ae){var Ce;for(Ce in pe)if(Ce.charAt(0)!=="_"){var Se=pe[Ce],He=Ae[Ce];if(Se!==He)if(D.isPlainObject(Se)&&D.isPlainObject(He)){if(dt(Se,He))return!0}else if(Array.isArray(Se)&&Array.isArray(He)){if(Se.length!==He.length)return!0;for(var Ne=0;Ne<Se.length;Ne++)if(Se[Ne]!==He[Ne])if(D.isPlainObject(Se[Ne])&&D.isPlainObject(He[Ne])){if(dt(Se[Ne],He[Ne]))return!0}else return!0}else return!0}}function st(pe,Ae,Ce){if(pe=D.getGraphDiv(pe),!D.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Se=pe._transitionData;Se._frameQueue||(Se._frameQueue=[]),Ce=u.supplyAnimationDefaults(Ce);var He=Ce.transition,Ne=Ce.frame;Se._frameWaitingCnt===void 0&&(Se._frameWaitingCnt=0);function qe(Ze){return Array.isArray(He)?Ze>=He.length?He[0]:He[Ze]:He}function at(Ze){return Array.isArray(Ne)?Ze>=Ne.length?Ne[0]:Ne[Ze]:Ne}function nt(Ze,ht){var kt=0;return function(){if(Ze&&++kt===ht)return Ze()}}return new Promise(function(Ze,ht){function kt(){if(Se._frameQueue.length!==0){for(;Se._frameQueue.length;){var Ye=Se._frameQueue.pop();Ye.onInterrupt&&Ye.onInterrupt()}pe.emit("plotly_animationinterrupted",[])}}function xt(Ye){if(Ye.length!==0){for(var et=0;et<Ye.length;et++){var ot;Ye[et].type==="byname"?ot=u.computeFrame(pe,Ye[et].name):ot=Ye[et].data;var _t=at(et),Mt=qe(et);Mt.duration=Math.min(Mt.duration,_t.duration);var St={frame:ot,name:Ye[et].name,frameOpts:_t,transitionOpts:Mt};et===Ye.length-1&&(St.onComplete=nt(Ze,2),St.onInterrupt=ht),Se._frameQueue.push(St)}Ce.mode==="immediate"&&(Se._lastFrameAt=-1/0),Se._animationRaf||Gt()}}function Bt(){pe.emit("plotly_animated"),window.cancelAnimationFrame(Se._animationRaf),Se._animationRaf=null}function Zt(){Se._currentFrame&&Se._currentFrame.onComplete&&Se._currentFrame.onComplete();var Ye=Se._currentFrame=Se._frameQueue.shift();if(Ye){var et=Ye.name?Ye.name.toString():null;pe._fullLayout._currentFrame=et,Se._lastFrameAt=Date.now(),Se._timeToNext=Ye.frameOpts.duration,u.transition(pe,Ye.frame.data,Ye.frame.layout,g.coerceTraceIndices(pe,Ye.frame.traces),Ye.frameOpts,Ye.transitionOpts).then(function(){Ye.onComplete&&Ye.onComplete()}),pe.emit("plotly_animatingframe",{name:et,frame:Ye.frame,animation:{frame:Ye.frameOpts,transition:Ye.transitionOpts}})}else Bt()}function Gt(){pe.emit("plotly_animating"),Se._lastFrameAt=-1/0,Se._timeToNext=0,Se._runningTransitions=0,Se._currentFrame=null;var Ye=function(){Se._animationRaf=window.requestAnimationFrame(Ye),Date.now()-Se._lastFrameAt>Se._timeToNext&&Zt()};Ye()}var Rt=0;function Wt(Ye){return Array.isArray(He)?Rt>=He.length?Ye.transitionOpts=He[Rt]:Ye.transitionOpts=He[0]:Ye.transitionOpts=He,Rt++,Ye}var It,vt,Yt=[],Ft=Ae==null,ye=Array.isArray(Ae),ge=!Ft&&!ye&&D.isPlainObject(Ae);if(ge)Yt.push({type:"object",data:Wt(D.extendFlat({},Ae))});else if(Ft||["string","number"].indexOf(typeof Ae)!==-1)for(It=0;It<Se._frames.length;It++)vt=Se._frames[It],!!vt&&(Ft||String(vt.group)===String(Ae))&&Yt.push({type:"byname",name:String(vt.name),data:Wt({name:vt.name})});else if(ye)for(It=0;It<Ae.length;It++){var Re=Ae[It];["number","string"].indexOf(typeof Re)!==-1?(Re=String(Re),Yt.push({type:"byname",name:Re,data:Wt({name:Re})})):D.isPlainObject(Re)&&Yt.push({type:"object",data:Wt(D.extendFlat({},Re))})}for(It=0;It<Yt.length;It++)if(vt=Yt[It],vt.type==="byname"&&!Se._frameHash[vt.data.name]){D.warn('animate failure: frame not found: "'+vt.data.name+'"'),ht();return}["next","immediate"].indexOf(Ce.mode)!==-1&&kt(),Ce.direction==="reverse"&&Yt.reverse();var ze=pe._fullLayout._currentFrame;if(ze&&Ce.fromcurrent){var Ue=-1;for(It=0;It<Yt.length;It++)if(vt=Yt[It],vt.type==="byname"&&vt.name===ze){Ue=It;break}if(Ue>0&&Ue<Yt.length-1){var je=[];for(It=0;It<Yt.length;It++)vt=Yt[It],(Yt[It].type!=="byname"||It>Ue)&&je.push(vt);Yt=je}}Yt.length>0?xt(Yt):(pe.emit("plotly_animated"),Ze())})}function Ve(pe,Ae,Ce){if(pe=D.getGraphDiv(pe),Ae==null)return Promise.resolve();if(!D.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Se,He,Ne,qe,at=pe._transitionData._frames,nt=pe._transitionData._frameHash;if(!Array.isArray(Ae))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ae);var Ze=at.length+Ae.length*2,ht=[],kt={};for(Se=Ae.length-1;Se>=0;Se--)if(!!D.isPlainObject(Ae[Se])){var xt=Ae[Se].name,Bt=(nt[xt]||kt[xt]||{}).name,Zt=Ae[Se].name,Gt=nt[Bt]||kt[Bt];Bt&&Zt&&typeof Zt=="number"&&Gt&&c<m&&(c++,D.warn('addFrames: overwriting frame "'+(nt[Bt]||kt[Bt]).name+'" with a frame whose name of type "number" also equates to "'+Bt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),c===m&&D.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),kt[xt]={name:xt},ht.push({frame:u.supplyFrameDefaults(Ae[Se]),index:Ce&&Ce[Se]!==void 0&&Ce[Se]!==null?Ce[Se]:Ze+Se})}ht.sort(function(ge,Re){return ge.index>Re.index?-1:ge.index<Re.index?1:0});var Rt=[],Wt=[],It=at.length;for(Se=ht.length-1;Se>=0;Se--){if(He=ht[Se].frame,typeof He.name=="number"&&D.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!He.name)for(;nt[He.name="frame "+pe._transitionData._counter++];);if(nt[He.name]){for(Ne=0;Ne<at.length&&(at[Ne]||{}).name!==He.name;Ne++);Rt.push({type:"replace",index:Ne,value:He}),Wt.unshift({type:"replace",index:Ne,value:at[Ne]})}else qe=Math.max(0,Math.min(ht[Se].index,It)),Rt.push({type:"insert",index:qe,value:He}),Wt.unshift({type:"delete",index:qe}),It++}var vt=u.modifyFrames,Yt=u.modifyFrames,Ft=[pe,Wt],ye=[pe,Rt];return k&&k.add(pe,vt,Ft,Yt,ye),u.modifyFrames(pe,Rt)}function Je(pe,Ae){if(pe=D.getGraphDiv(pe),!D.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe);var Ce,Se,He=pe._transitionData._frames,Ne=[],qe=[];if(!Ae)for(Ae=[],Ce=0;Ce<He.length;Ce++)Ae.push(Ce);for(Ae=Ae.slice(),Ae.sort(),Ce=Ae.length-1;Ce>=0;Ce--)Se=Ae[Ce],Ne.push({type:"delete",index:Se}),qe.unshift({type:"insert",index:Se,value:He[Se]});var at=u.modifyFrames,nt=u.modifyFrames,Ze=[pe,qe],ht=[pe,Ne];return k&&k.add(pe,at,Ze,nt,ht),u.modifyFrames(pe,Ne)}function ke(pe){pe=D.getGraphDiv(pe);var Ae=pe._fullLayout||{},Ce=pe._fullData||[];return u.cleanPlot([],{},Ce,Ae),u.purge(pe),w.purge(pe),Ae._container&&Ae._container.remove(),delete pe._context,pe}function Le(pe){var Ae=pe._fullLayout,Ce=pe.getBoundingClientRect();if(!D.equalDomRects(Ce,Ae._lastBBox)){var Se=Ae._invTransform=D.inverseTransformMatrix(D.getFullTransformMatrix(pe));Ae._invScaleX=Math.sqrt(Se[0][0]*Se[0][0]+Se[0][1]*Se[0][1]+Se[0][2]*Se[0][2]),Ae._invScaleY=Math.sqrt(Se[1][0]*Se[1][0]+Se[1][1]*Se[1][1]+Se[1][2]*Se[1][2]),Ae._lastBBox=Ce}}function Be(pe){var Ae=R.select(pe),Ce=pe._fullLayout;if(Ce._calcInverseTransform=Le,Ce._calcInverseTransform(pe),Ce._container=Ae.selectAll(".plot-container").data([0]),Ce._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ce._paperdiv=Ce._container.selectAll(".svg-container").data([0]),Ce._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ce._glcontainer=Ce._paperdiv.selectAll(".gl-container").data([{}]),Ce._glcontainer.enter().append("div").classed("gl-container",!0),Ce._paperdiv.selectAll(".main-svg").remove(),Ce._paperdiv.select(".modebar-container").remove(),Ce._paper=Ce._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ce._toppaper=Ce._paperdiv.append("svg").classed("main-svg",!0),Ce._modebardiv=Ce._paperdiv.append("div"),delete Ce._modeBar,Ce._hoverpaper=Ce._paperdiv.append("svg").classed("main-svg",!0),!Ce._uid){var Se={};R.selectAll("defs").each(function(){this.id&&(Se[this.id.split("-")[1]]=1)}),Ce._uid=D.randstr(Se)}Ce._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),Ce._defs=Ce._paper.append("defs").attr("id","defs-"+Ce._uid),Ce._clips=Ce._defs.append("g").classed("clips",!0),Ce._topdefs=Ce._toppaper.append("defs").attr("id","topdefs-"+Ce._uid),Ce._topclips=Ce._topdefs.append("g").classed("clips",!0),Ce._bgLayer=Ce._paper.append("g").classed("bglayer",!0),Ce._draggers=Ce._paper.append("g").classed("draglayer",!0);var He=Ce._paper.append("g").classed("layer-below",!0);Ce._imageLowerLayer=He.append("g").classed("imagelayer",!0),Ce._shapeLowerLayer=He.append("g").classed("shapelayer",!0),Ce._cartesianlayer=Ce._paper.append("g").classed("cartesianlayer",!0),Ce._polarlayer=Ce._paper.append("g").classed("polarlayer",!0),Ce._smithlayer=Ce._paper.append("g").classed("smithlayer",!0),Ce._ternarylayer=Ce._paper.append("g").classed("ternarylayer",!0),Ce._geolayer=Ce._paper.append("g").classed("geolayer",!0),Ce._funnelarealayer=Ce._paper.append("g").classed("funnelarealayer",!0),Ce._pielayer=Ce._paper.append("g").classed("pielayer",!0),Ce._iciclelayer=Ce._paper.append("g").classed("iciclelayer",!0),Ce._treemaplayer=Ce._paper.append("g").classed("treemaplayer",!0),Ce._sunburstlayer=Ce._paper.append("g").classed("sunburstlayer",!0),Ce._indicatorlayer=Ce._toppaper.append("g").classed("indicatorlayer",!0),Ce._glimages=Ce._paper.append("g").classed("glimages",!0);var Ne=Ce._toppaper.append("g").classed("layer-above",!0);Ce._imageUpperLayer=Ne.append("g").classed("imagelayer",!0),Ce._shapeUpperLayer=Ne.append("g").classed("shapelayer",!0),Ce._infolayer=Ce._toppaper.append("g").classed("infolayer",!0),Ce._menulayer=Ce._toppaper.append("g").classed("menulayer",!0),Ce._zoomlayer=Ce._toppaper.append("g").classed("zoomlayer",!0),Ce._hoverlayer=Ce._hoverpaper.append("g").classed("hoverlayer",!0),Ce._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),pe.emit("plotly_framework")}ae.animate=st,ae.addFrames=Ve,ae.deleteFrames=Je,ae.addTraces=O,ae.deleteTraces=Z,ae.extendTraces=Q,ae.moveTraces=B,ae.prependTraces=U,ae.newPlot=P,ae._doPlot=o,ae.purge=ke,ae.react=Ge,ae.redraw=E,ae.relayout=re,ae.restyle=Y,ae.setPlotConfig=i,ae.update=ie,ae._guiRelayout=me(re),ae._guiRestyle=me(Y),ae._guiUpdate=me(ie),ae._storeDirectGUIEdit=K},{"../components/color":119,"../components/drawing":141,"../constants/xmlns_namespaces":232,"../lib":252,"../lib/events":244,"../lib/queue":267,"../plots/cartesian/axes":301,"../plots/cartesian/constants":308,"../plots/cartesian/graph_interact":311,"../plots/cartesian/select":322,"../plots/plots":349,"../registry":352,"./edit_types":283,"./helpers":284,"./manage_arrays":286,"./plot_config":288,"./plot_schema":289,"./subroutines":291,"@plotly/d3":16,"fast-isnumeric":31,"has-hover":63}],288:[function(z,le,ae){"use strict";var R={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},L={};function N(D,p){for(var w in D){var k=D[w];k.valType?p[w]=k.dflt:(p[w]||(p[w]={}),N(k,p[w]))}}N(R,L),le.exports={configAttributes:R,dfltConfig:L}},{}],289:[function(z,le,ae){"use strict";var R=z("../registry"),L=z("../lib"),N=z("../plots/attributes"),D=z("../plots/layout_attributes"),p=z("../plots/frame_attributes"),w=z("../plots/animation_attributes"),k=z("./plot_config").configAttributes,d=z("./edit_types"),e=L.extendDeepAll,u=L.isPlainObject,s=L.isArrayOrTypedArray,l=L.nestedProperty,b=L.valObjectMeta,v="_isSubplotObj",y="_isLinkedToArray",T="_arrayAttrRegexps",_="_deprecated",f=[v,y,T,_];ae.IS_SUBPLOT_OBJ=v,ae.IS_LINKED_TO_ARRAY=y,ae.DEPRECATED=_,ae.UNDERSCORE_ATTRS=f,ae.get=function(){var P={};R.allTypes.forEach(function(C){P[C]=h(C)});var S={};return Object.keys(R.transformsRegistry).forEach(function(C){S[C]=m(C)}),{defs:{valObjects:b,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{}},traces:P,layout:c(),transforms:S,frames:o(),animation:t(w),config:t(k)}},ae.crawl=function(P,S,C,M){var I=C||0;M=M||"",Object.keys(P).forEach(function(G){var V=P[G];if(f.indexOf(G)===-1){var q=(M?M+".":"")+G;S(V,G,P,I,q),!ae.isValObject(V)&&u(V)&&G!=="impliedEdits"&&ae.crawl(V,S,I+1,q)}})},ae.isValObject=function(P){return P&&P.valType!==void 0},ae.findArrayAttributes=function(P){var S=[],C=[],M=[],I,G;function V(Z,B,Y,j){C=C.slice(0,j).concat([B]),M=M.slice(0,j).concat([Z&&Z._isLinkedToArray]);var X=Z&&(Z.valType==="data_array"||Z.arrayOk===!0)&&!(C[j-1]==="colorbar"&&(B==="ticktext"||B==="tickvals"));!X||q(I,0,"")}function q(Z,B,Y){var j=Z[C[B]],X=Y+C[B];if(B===C.length-1)s(j)&&S.push(G+X);else if(M[B]){if(Array.isArray(j))for(var H=0;H<j.length;H++)u(j[H])&&q(j[H],B+1,X+"["+H+"].")}else u(j)&&q(j,B+1,X+".")}I=P,G="",ae.crawl(N,V),P._module&&P._module.attributes&&ae.crawl(P._module.attributes,V);var ee=P.transforms;if(ee)for(var Q=0;Q<ee.length;Q++){var U=ee[Q],O=U._module;O&&(G="transforms["+Q+"].",I=U,ae.crawl(O.attributes,V))}return S},ae.getTraceValObject=function(P,S){var C=S[0],M=1,I,G;if(C==="transforms"){if(S.length===1)return N.transforms;var V=P.transforms;if(!Array.isArray(V)||!V.length)return!1;var q=S[1];if(!a(q)||q>=V.length)return!1;I=(R.transformsRegistry[V[q].type]||{}).attributes,G=I&&I[S[2]],M=3}else{var ee=P._module;if(ee||(ee=(R.modules[P.type||N.type.dflt]||{})._module),!ee)return!1;if(I=ee.attributes,G=I&&I[C],!G){var Q=ee.basePlotModule;Q&&Q.attributes&&(G=Q.attributes[C])}G||(G=N[C])}return n(G,S,M)},ae.getLayoutValObject=function(P,S){var C=g(P,S[0]);return n(C,S,1)};function g(P,S){var C,M,I,G,V=P._basePlotModules;if(V){var q;for(C=0;C<V.length;C++){if(I=V[C],I.attrRegex&&I.attrRegex.test(S)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;!q&&I.layoutAttributes&&(q=I.layoutAttributes)}var ee=I.baseLayoutAttrOverrides;if(ee&&S in ee)return ee[S]}if(q)return q}var Q=P._modules;if(Q){for(C=0;C<Q.length;C++)if(G=Q[C].layoutAttributes,G&&S in G)return G[S]}for(M in R.componentsRegistry){if(I=R.componentsRegistry[M],I.name==="colorscale"&&S.indexOf("coloraxis")===0)return I.layoutAttributes[S];if(!I.schema&&S===I.name)return I.layoutAttributes}return S in D?D[S]:!1}function n(P,S,C){if(!P)return!1;if(P._isLinkedToArray){if(a(S[C]))C++;else if(C<S.length)return!1}for(;C<S.length;C++){var M=P[S[C]];if(u(M))P=M;else break;if(C===S.length-1)break;if(P._isLinkedToArray){if(C++,!a(S[C]))return!1}else if(P.valType==="info_array"){C++;var I=S[C];if(!a(I))return!1;var G=P.items;if(Array.isArray(G)){if(I>=G.length)return!1;if(P.dimensions===2){if(C++,S.length===C)return P;var V=S[C];if(!a(V))return!1;P=G[I][V]}else P=G[I]}else P=G}}return P}function a(P){return P===Math.round(P)&&P>=0}function h(P){var S,C;S=R.modules[P]._module,C=S.basePlotModule;var M={};M.type=null;var I=e({},N),G=e({},S.attributes);ae.crawl(G,function(ee,Q,U,O,Z){l(I,Z).set(void 0),ee===void 0&&l(G,Z).set(void 0)}),e(M,I),R.traceIs(P,"noOpacity")&&delete M.opacity,R.traceIs(P,"showLegend")||(delete M.showlegend,delete M.legendgroup),R.traceIs(P,"noHover")&&(delete M.hoverinfo,delete M.hoverlabel),S.selectPoints||delete M.selectedpoints,e(M,G),C.attributes&&e(M,C.attributes),M.type=P;var V={meta:S.meta||{},categories:S.categories||{},animatable:Boolean(S.animatable),type:P,attributes:t(M)};if(S.layoutAttributes){var q={};e(q,S.layoutAttributes),V.layoutAttributes=t(q)}return S.animatable||ae.crawl(V,function(ee){ae.isValObject(ee)&&"anim"in ee&&delete ee.anim}),V}function c(){var P={},S,C;e(P,D);for(S in R.subplotsRegistry)if(C=R.subplotsRegistry[S],!!C.layoutAttributes)if(Array.isArray(C.attr))for(var M=0;M<C.attr.length;M++)A(P,C,C.attr[M]);else{var I=C.attr==="subplot"?C.name:C.attr;A(P,C,I)}for(S in R.componentsRegistry){C=R.componentsRegistry[S];var G=C.schema;if(G&&(G.subplots||G.layout)){var V=G.subplots;if(V&&V.xaxis&&!V.yaxis)for(var q in V.xaxis)delete P.yaxis[q]}else C.name==="colorscale"?e(P,C.layoutAttributes):C.layoutAttributes&&E(P,C.layoutAttributes,C.name)}return{layoutAttributes:t(P)}}function m(P){var S=R.transformsRegistry[P],C=e({},S.attributes);return Object.keys(R.componentsRegistry).forEach(function(M){var I=R.componentsRegistry[M];I.schema&&I.schema.transforms&&I.schema.transforms[P]&&Object.keys(I.schema.transforms[P]).forEach(function(G){E(C,I.schema.transforms[P][G],G)})}),{attributes:t(C)}}function o(){var P={frames:e({},p)};return t(P),P.frames}function t(P){return i(P),r(P),x(P),P}function i(P){function S(M){return{valType:"string",editType:"none"}}function C(M,I,G){ae.isValObject(M)?(M.arrayOk===!0||M.valType==="data_array")&&(G[I+"src"]=S(I)):u(M)&&(M.role="object")}ae.crawl(P,C)}function r(P){function S(C,M,I){if(!!C){var G=C[y];!G||(delete C[y],I[M]={items:{}},I[M].items[G]=C,I[M].role="object")}}ae.crawl(P,S)}function x(P){function S(C){for(var M in C)if(u(C[M]))S(C[M]);else if(Array.isArray(C[M]))for(var I=0;I<C[M].length;I++)S(C[M][I]);else C[M]instanceof RegExp&&(C[M]=C[M].toString())}S(P)}function A(P,S,C){var M=l(P,C),I=e({},S.layoutAttributes);I[v]=!0,M.set(I)}function E(P,S,C){var M=l(P,C);M.set(e(M.get()||{},S))}},{"../lib":252,"../plots/animation_attributes":295,"../plots/attributes":297,"../plots/frame_attributes":333,"../plots/layout_attributes":347,"../registry":352,"./edit_types":283,"./plot_config":288}],290:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plots/attributes"),N="templateitemname",D={name:{valType:"string",editType:"none"}};D[N]={valType:"string",editType:"calc"},ae.templatedArray=function(k,d){return d._isLinkedToArray=k,d.name=D.name,d[N]=D[N],d},ae.traceTemplater=function(k){var d={},e,u;for(e in k)u=k[e],Array.isArray(u)&&u.length&&(d[e]=0);function s(l){e=R.coerce(l,{},L,"type");var b={type:e,_template:null};if(e in d){u=k[e];var v=d[e]%u.length;d[e]++,b._template=u[v]}return b}return{newTrace:s}},ae.newContainer=function(k,d,e){var u=k._template,s=u&&(u[d]||e&&u[e]);R.isPlainObject(s)||(s=null);var l=k[d]={_template:s};return l},ae.arrayTemplater=function(k,d,e){var u=k._template,s=u&&u[w(d)],l=u&&u[d];(!Array.isArray(l)||!l.length)&&(l=[]);var b={};function v(T){var _={name:T.name,_input:T},f=_[N]=T[N];if(!p(f))return _._template=s,_;for(var g=0;g<l.length;g++){var n=l[g];if(n.name===f)return b[f]=1,_._template=n,_}return _[e]=T[e]||!1,_._template=!1,_}function y(){for(var T=[],_=0;_<l.length;_++){var f=l[_],g=f.name;if(p(g)&&!b[g]){var n={_template:f,name:g,_input:{_templateitemname:g}};n[N]=f[N],T.push(n),b[g]=1}}return T}return{newItem:v,defaultItems:y}};function p(k){return k&&typeof k=="string"}function w(k){var d=k.length-1;return k.charAt(d)!=="s"&&R.warn("bad argument to arrayDefaultKey: "+k),k.substr(0,k.length-1)+"defaults"}ae.arrayDefaultKey=w,ae.arrayEditor=function(k,d,e){var u=(R.nestedProperty(k,d).get()||[]).length,s=e._index,l=s>=u&&(e._input||{})._templateitemname;l&&(s=u);var b=d+"["+s+"]",v;function y(){v={},l&&(v[b]={},v[b][N]=l)}y();function T(n,a){v[n]=a}function _(n,a){l?R.nestedProperty(v[b],n).set(a):v[b+"."+n]=a}function f(){var n=v;return y(),n}function g(n,a){n&&_(n,a);var h=f();for(var c in h)R.nestedProperty(k,c).set(h[c])}return{modifyBase:T,modifyItem:_,getUpdateObj:f,applyUpdate:g}}},{"../lib":252,"../plots/attributes":297}],291:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../registry"),N=z("../plots/plots"),D=z("../lib"),p=z("../lib/clear_gl_canvases"),w=z("../components/color"),k=z("../components/drawing"),d=z("../components/titles"),e=z("../components/modebar"),u=z("../plots/cartesian/axes"),s=z("../constants/alignment"),l=z("../plots/cartesian/constraints"),b=l.enforce,v=l.clean,y=z("../plots/cartesian/autorange").doAutoRange,T="start",_="middle",f="end";ae.layoutStyles=function(r){return D.syncOrAsync([N.doAutoMargin,n],r)};function g(r,x,A){for(var E=0;E<A.length;E++){var P=A[E][0],S=A[E][1];if(!(P[0]>=r[1]||P[1]<=r[0])&&S[0]<x[1]&&S[1]>x[0])return!0}return!1}function n(r){var x=r._fullLayout,A=x._size,E=A.p,P=u.list(r,"",!0),S,C,M,I,G,V;if(x._paperdiv.style({width:r._context.responsive&&x.autosize&&!r._context._hasZeroWidth&&!r.layout.width?"100%":x.width+"px",height:r._context.responsive&&x.autosize&&!r._context._hasZeroHeight&&!r.layout.height?"100%":x.height+"px"}).selectAll(".main-svg").call(k.setSize,x.width,x.height),r._context.setBackground(r,x.paper_bgcolor),ae.drawMainTitle(r),e.manage(r),!x._has("cartesian"))return N.previousPromises(r);function q(dt,st,Ve){var Je=dt._lw/2;if(dt._id.charAt(0)==="x"){if(st){if(Ve==="top")return st._offset-E-Je}else return A.t+A.h*(1-(dt.position||0))+Je%1;return st._offset+st._length+E+Je}if(st){if(Ve==="right")return st._offset+st._length+E+Je}else return A.l+A.w*(dt.position||0)+Je%1;return st._offset-E-Je}for(S=0;S<P.length;S++){I=P[S];var ee=I._anchorAxis;I._linepositions={},I._lw=k.crispRound(r,I.linewidth,1),I._mainLinePosition=q(I,ee,I.side),I._mainMirrorPosition=I.mirror&&ee?q(I,ee,s.OPPOSITE_SIDE[I.side]):null}var Q=[],U=[],O=[],Z=w.opacity(x.paper_bgcolor)===1&&w.opacity(x.plot_bgcolor)===1&&x.paper_bgcolor===x.plot_bgcolor;for(C in x._plots)if(M=x._plots[C],M.mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var B=M.xaxis.domain,Y=M.yaxis.domain,j=M.plotgroup;if(g(B,Y,O)){var X=j.node(),H=M.bg=D.ensureSingle(j,"rect","bg");X.insertBefore(H.node(),X.childNodes[0]),U.push(C)}else j.select("rect.bg").remove(),O.push([B,Y]),Z||(Q.push(C),U.push(C))}var K=x._bgLayer.selectAll(".bg").data(Q);for(K.enter().append("rect").classed("bg",!0),K.exit().remove(),K.each(function(dt){x._plots[dt].bg=R.select(this)}),S=0;S<U.length;S++)M=x._plots[U[S]],G=M.xaxis,V=M.yaxis,M.bg&&G._offset!==void 0&&V._offset!==void 0&&M.bg.call(k.setRect,G._offset-E,V._offset-E,G._length+2*E,V._length+2*E).call(w.fill,x.plot_bgcolor).style("stroke-width",0);if(!x._hasOnlyLargeSploms)for(C in x._plots){M=x._plots[C],G=M.xaxis,V=M.yaxis;var W=M.clipId="clip"+x._uid+C+"plot",$=D.ensureSingleById(x._clips,"clipPath",W,function(dt){dt.classed("plotclip",!0).append("rect")});M.clipRect=$.select("rect").attr({width:G._length,height:V._length}),k.setTranslate(M.plot,G._offset,V._offset);var re,de;M._hasClipOnAxisFalse?(re=null,de=W):(re=W,de=null),k.setClipUrl(M.plot,re,r),M.layerClipId=de}var ve,ue,ce,_e,fe,ne,ie,me,we,be,Me,Ie,Ke;function Oe(dt){return"M"+ve+","+dt+"H"+ue}function We(dt){return"M"+G._offset+","+dt+"h"+G._length}function Fe(dt){return"M"+dt+","+me+"V"+ie}function Ge(dt){return"M"+dt+","+V._offset+"v"+V._length}function Xe(dt,st,Ve){if(!dt.showline||C!==dt._mainSubplot)return"";if(!dt._anchorAxis)return Ve(dt._mainLinePosition);var Je=st(dt._mainLinePosition);return dt.mirror&&(Je+=st(dt._mainMirrorPosition)),Je}for(C in x._plots){M=x._plots[C],G=M.xaxis,V=M.yaxis;var ut="M0,0";a(G,C)&&(fe=c(G,"left",V,P),ve=G._offset-(fe?E+fe:0),ne=c(G,"right",V,P),ue=G._offset+G._length+(ne?E+ne:0),ce=q(G,V,"bottom"),_e=q(G,V,"top"),Ke=!G._anchorAxis||C!==G._mainSubplot,Ke&&(G.mirror==="allticks"||G.mirror==="all")&&(G._linepositions[C]=[ce,_e]),ut=Xe(G,Oe,We),Ke&&G.showline&&(G.mirror==="all"||G.mirror==="allticks")&&(ut+=Oe(ce)+Oe(_e)),M.xlines.style("stroke-width",G._lw+"px").call(w.stroke,G.showline?G.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",ut);var rt="M0,0";a(V,C)&&(Me=c(V,"bottom",G,P),ie=V._offset+V._length+(Me?E:0),Ie=c(V,"top",G,P),me=V._offset-(Ie?E:0),we=q(V,G,"left"),be=q(V,G,"right"),Ke=!V._anchorAxis||C!==V._mainSubplot,Ke&&(V.mirror==="allticks"||V.mirror==="all")&&(V._linepositions[C]=[we,be]),rt=Xe(V,Fe,Ge),Ke&&V.showline&&(V.mirror==="all"||V.mirror==="allticks")&&(rt+=Fe(we)+Fe(be)),M.ylines.style("stroke-width",V._lw+"px").call(w.stroke,V.showline?V.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",rt)}return u.makeClipPaths(r),N.previousPromises(r)}function a(r,x){return(r.ticks||r.showline)&&(x===r._mainSubplot||r.mirror==="all"||r.mirror==="allticks")}function h(r,x,A){if(!A.showline||!A._lw)return!1;if(A.mirror==="all"||A.mirror==="allticks")return!0;var E=A._anchorAxis;if(!E)return!1;var P=s.FROM_BL[x];return A.side===x?E.domain[P]===r.domain[P]:A.mirror&&E.domain[1-P]===r.domain[1-P]}function c(r,x,A,E){if(h(r,x,A))return A._lw;for(var P=0;P<E.length;P++){var S=E[P];if(S._mainAxis===A._mainAxis&&h(r,x,S))return S._lw}return 0}ae.drawMainTitle=function(r){var x=r._fullLayout,A=t(x),E=i(x);d.draw(r,"gtitle",{propContainer:x,propName:"title.text",placeholder:x._dfltTitle.plot,attributes:{x:m(x,A),y:o(x,E),"text-anchor":A,dy:E}})};function m(r,x){var A=r.title,E=r._size,P=0;switch(x===T?P=A.pad.l:x===f&&(P=-A.pad.r),A.xref){case"paper":return E.l+E.w*A.x+P;case"container":default:return r.width*A.x+P}}function o(r,x){var A=r.title,E=r._size,P=0;if(x==="0em"||!x?P=-A.pad.b:x===s.CAP_SHIFT+"em"&&(P=A.pad.t),A.y==="auto")return E.t/2;switch(A.yref){case"paper":return E.t+E.h-E.h*A.y+P;case"container":default:return r.height-r.height*A.y+P}}function t(r){var x=r.title,A=_;return D.isRightAnchor(x)?A=f:D.isLeftAnchor(x)&&(A=T),A}function i(r){var x=r.title,A="0em";return D.isTopAnchor(x)?A=s.CAP_SHIFT+"em":D.isMiddleAnchor(x)&&(A=s.MID_SHIFT+"em"),A}ae.doTraceStyle=function(r){var x=r.calcdata,A=[],E;for(E=0;E<x.length;E++){var P=x[E],S=P[0]||{},C=S.trace||{},M=C._module||{},I=M.arraysToCalcdata;I&&I(P,C);var G=M.editStyle;G&&A.push({fn:G,cd0:S})}if(A.length){for(E=0;E<A.length;E++){var V=A[E];V.fn(r,V.cd0)}p(r),ae.redrawReglTraces(r)}return N.style(r),L.getComponentMethod("legend","draw")(r),N.previousPromises(r)},ae.doColorBars=function(r){return L.getComponentMethod("colorbar","draw")(r),N.previousPromises(r)},ae.layoutReplot=function(r){var x=r.layout;return r.layout=void 0,L.call("_doPlot",r,"",x)},ae.doLegend=function(r){return L.getComponentMethod("legend","draw")(r),N.previousPromises(r)},ae.doTicksRelayout=function(r){return u.draw(r,"redraw"),r._fullLayout._hasOnlyLargeSploms&&(L.subplotsRegistry.splom.updateGrid(r),p(r),ae.redrawReglTraces(r)),ae.drawMainTitle(r),N.previousPromises(r)},ae.doModeBar=function(r){var x=r._fullLayout;e.manage(r);for(var A=0;A<x._basePlotModules.length;A++){var E=x._basePlotModules[A].updateFx;E&&E(r)}return N.previousPromises(r)},ae.doCamera=function(r){for(var x=r._fullLayout,A=x._subplots.gl3d,E=0;E<A.length;E++){var P=x[A[E]],S=P._scene;S.setViewport(P)}},ae.drawData=function(r){var x=r._fullLayout;p(r);for(var A=x._basePlotModules,E=0;E<A.length;E++)A[E].plot(r);return ae.redrawReglTraces(r),N.style(r),L.getComponentMethod("shapes","draw")(r),L.getComponentMethod("annotations","draw")(r),L.getComponentMethod("images","draw")(r),x._replotting=!1,N.previousPromises(r)},ae.redrawReglTraces=function(r){var x=r._fullLayout;if(x._has("regl")){var A=r._fullData,E=[],P=[],S,C;for(x._hasOnlyLargeSploms&&x._splomGrid.draw(),S=0;S<A.length;S++){var M=A[S];M.visible===!0&&M._length!==0&&(M.type==="splom"?x._splomScenes[M.uid].draw():M.type==="scattergl"?D.pushUnique(E,M.xaxis+M.yaxis):M.type==="scatterpolargl"&&D.pushUnique(P,M.subplot))}for(S=0;S<E.length;S++)C=x._plots[E[S]],C._scene&&C._scene.draw();for(S=0;S<P.length;S++)C=x[P[S]]._subplot,C._scene&&C._scene.draw()}},ae.doAutoRangeAndConstraints=function(r){for(var x=u.list(r,"",!0),A,E={},P=0;P<x.length;P++)if(A=x[P],!E[A._id]){E[A._id]=1,v(r,A),y(r,A);var S=A._matchGroup;if(S)for(var C in S){var M=u.getFromId(r,C);y(r,M,A.range),E[C]=1}}b(r)},ae.finalDraw=function(r){L.getComponentMethod("rangeslider","draw")(r),L.getComponentMethod("rangeselector","draw")(r)},ae.drawMarginPushers=function(r){L.getComponentMethod("legend","draw")(r),L.getComponentMethod("rangeselector","draw")(r),L.getComponentMethod("sliders","draw")(r),L.getComponentMethod("updatemenus","draw")(r),L.getComponentMethod("colorbar","draw")(r)}},{"../components/color":119,"../components/drawing":141,"../components/modebar":182,"../components/titles":217,"../constants/alignment":224,"../lib":252,"../lib/clear_gl_canvases":239,"../plots/cartesian/autorange":300,"../plots/cartesian/axes":301,"../plots/cartesian/constraints":309,"../plots/plots":349,"../registry":352,"@plotly/d3":16}],292:[function(z,le,ae){"use strict";var R=z("../lib"),L=R.isPlainObject,N=z("./plot_schema"),D=z("../plots/plots"),p=z("../plots/attributes"),w=z("./plot_template"),k=z("./plot_config").dfltConfig;ae.makeTemplate=function(T){T=R.isPlainObject(T)?T:R.getGraphDiv(T),T=R.extendDeep({_context:k},{data:T.data,layout:T.layout}),D.supplyDefaults(T);var _=T.data||[],f=T.layout||{};f._basePlotModules=T._fullLayout._basePlotModules,f._modules=T._fullLayout._modules;var g={data:{},layout:{}};_.forEach(function(x){var A={};u(x,A,l.bind(null,x));var E=R.coerce(x,{},p,"type"),P=g.data[E];P||(P=g.data[E]=[]),P.push(A)}),u(f,g.layout,s.bind(null,f)),delete g.layout.template;var n=f.template;if(L(n)){var a=n.layout,h,c,m,o,t,i;L(a)&&d(a,g.layout);var r=n.data;if(L(r)){for(c in g.data)if(m=r[c],Array.isArray(m)){for(t=g.data[c],i=t.length,o=m.length,h=0;h<i;h++)d(m[h%o],t[h]);for(h=i;h<o;h++)t.push(R.extendDeep({},m[h]))}for(c in r)c in g.data||(g.data[c]=R.extendDeep([],r[c]))}}return g};function d(T,_){T=R.extendDeep({},T);var f=Object.keys(T).sort(),g,n;function a(t,i,r){if(L(i)&&L(t))d(t,i);else if(Array.isArray(i)&&Array.isArray(t)){var x=w.arrayTemplater({_template:T},r);for(n=0;n<i.length;n++){var A=i[n],E=x.newItem(A)._template;E&&d(E,A)}var P=x.defaultItems();for(n=0;n<P.length;n++)i.push(P[n]._template);for(n=0;n<i.length;n++)delete i[n].templateitemname}}for(g=0;g<f.length;g++){var h=f[g],c=T[h];if(h in _?a(c,_[h],h):_[h]=c,e(h)===h)for(var m in _){var o=e(m);m!==o&&o===h&&!(m in T)&&a(c,_[m],h)}}}function e(T){return T.replace(/[0-9]+$/,"")}function u(T,_,f,g,n){var a=n&&f(n);for(var h in T){var c=T[h],m=b(T,h,g),o=b(T,h,n),t=f(o);if(!t){var i=e(h);i!==h&&(o=b(T,i,n),t=f(o))}if(!(a&&a===t)&&!(!t||t._noTemplating||t.valType==="data_array"||t.arrayOk&&Array.isArray(c)))if(!t.valType&&L(c))u(c,_,f,m,o);else if(t._isLinkedToArray&&Array.isArray(c))for(var r=!1,x=0,A={},E=0;E<c.length;E++){var P=c[E];if(L(P)){var S=P.name;if(S)A[S]||(u(P,_,f,b(c,x,m),b(c,x,o)),x++,A[S]=1);else if(!r){var C=w.arrayDefaultKey(h),M=b(T,C,g),I=b(c,x,m);u(P,_,f,I,b(c,x,o));var G=R.nestedProperty(_,I),V=R.nestedProperty(_,M);V.set(G.get()),G.set(null),r=!0}}}else{var q=R.nestedProperty(_,m);q.set(c)}}}function s(T,_){return N.getLayoutValObject(T,R.nestedProperty({},_).parts)}function l(T,_){return N.getTraceValObject(T,R.nestedProperty({},_).parts)}function b(T,_,f){var g;return f?Array.isArray(T)?g=f+"["+_+"]":g=f+"."+_:g=_,g}ae.validateTemplate=function(T,_){var f=R.extendDeep({},{_context:k,data:T.data,layout:T.layout}),g=f.layout||{};L(_)||(_=g.template||{});var n=_.layout,a=_.data,h=[];f.layout=g,f.layout.template=_,D.supplyDefaults(f);var c=f._fullLayout,m=f._fullData,o={};function t(M,I){for(var G in M)if(G.charAt(0)!=="_"&&L(M[G])){var V=e(G),q=[],ee;for(ee=0;ee<I.length;ee++)q.push(b(M,G,I[ee])),V!==G&&q.push(b(M,V,I[ee]));for(ee=0;ee<q.length;ee++)o[q[ee]]=1;t(M[G],q)}}function i(M,I){for(var G in M)if(G.indexOf("defaults")===-1&&L(M[G])){var V=b(M,G,I);o[V]?i(M[G],V):h.push({code:"unused",path:V})}}if(L(n)?(t(c,["layout"]),i(n,"layout")):h.push({code:"layout"}),!L(a))h.push({code:"data"});else{for(var r={},x,A=0;A<m.length;A++){var E=m[A];x=E.type,r[x]=(r[x]||0)+1,E._fullInput._template||h.push({code:"missing",index:E._fullInput.index,traceType:x})}for(x in a){var P=a[x].length,S=r[x]||0;P>S?h.push({code:"unused",traceType:x,templateCount:P,dataCount:S}):S>P&&h.push({code:"reused",traceType:x,templateCount:P,dataCount:S})}}function C(M,I){for(var G in M)if(G.charAt(0)!=="_"){var V=M[G],q=b(M,G,I);L(V)?(Array.isArray(M)&&V._template===!1&&V.templateitemname&&h.push({code:"missing",path:q,templateitemname:V.templateitemname}),C(V,q)):Array.isArray(V)&&v(V)&&C(V,q)}}if(C({data:m,layout:c},""),h.length)return h.map(y)};function v(T){for(var _=0;_<T.length;_++)if(L(T[_]))return!0}function y(T){var _;switch(T.code){case"data":_="The template has no key data.";break;case"layout":_="The template has no key layout.";break;case"missing":T.path?_="There are no templates for item "+T.path+" with name "+T.templateitemname:_="There are no templates for trace "+T.index+", of type "+T.traceType+".";break;case"unused":T.path?_="The template item at "+T.path+" was not used in constructing the plot.":T.dataCount?_="Some of the templates of type "+T.traceType+" were not used. The template has "+T.templateCount+" traces, the data only has "+T.dataCount+" of this type.":_="The template has "+T.templateCount+" traces of type "+T.traceType+" but there are none in the data.";break;case"reused":_="Some of the templates of type "+T.traceType+" were used more than once. The template has "+T.templateCount+" traces, the data has "+T.dataCount+" of this type.";break}return T.msg=_,T}},{"../lib":252,"../plots/attributes":297,"../plots/plots":349,"./plot_config":288,"./plot_schema":289,"./plot_template":290}],293:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("./plot_api"),N=z("../plots/plots"),D=z("../lib"),p=z("../snapshot/helpers"),w=z("../snapshot/tosvg"),k=z("../snapshot/svgtoimg"),d=z("../version").version,e={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function u(s,l){l=l||{};var b,v,y,T;D.isPlainObject(s)?(b=s.data||[],v=s.layout||{},y=s.config||{},T={}):(s=D.getGraphDiv(s),b=D.extendDeep([],s.data),v=D.extendDeep({},s.layout),y=s._context,T=s._fullLayout||{});function _(S){return!(S in l)||D.validate(l[S],e[S])}if(!_("width")&&l.width!==null||!_("height")&&l.height!==null)throw new Error("Height and width should be pixel values.");if(!_("format"))throw new Error("Export format is not "+D.join2(e.format.values,", "," or ")+".");var f={};function g(S,C){return D.coerce(l,f,e,S,C)}var n=g("format"),a=g("width"),h=g("height"),c=g("scale"),m=g("setBackground"),o=g("imageDataOnly"),t=document.createElement("div");t.style.position="absolute",t.style.left="-5000px",document.body.appendChild(t);var i=D.extendFlat({},v);a?i.width=a:l.width===null&&R(T.width)&&(i.width=T.width),h?i.height=h:l.height===null&&R(T.height)&&(i.height=T.height);var r=D.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:m}),x=p.getRedrawFunc(t);function A(){return new Promise(function(S){setTimeout(S,p.getDelay(t._fullLayout))})}function E(){return new Promise(function(S,C){var M=w(t,n,c),I=t._fullLayout.width,G=t._fullLayout.height;function V(){L.purge(t),document.body.removeChild(t)}if(n==="full-json"){var q=N.graphJson(t,!1,"keepdata","object",!0,!0);return q.version=d,q=JSON.stringify(q),V(),S(o?q:p.encodeJSON(q))}if(V(),n==="svg")return S(o?M:p.encodeSVG(M));var ee=document.createElement("canvas");ee.id=D.randstr(),k({format:n,width:I,height:G,scale:c,canvas:ee,svg:M,promise:!0}).then(S).catch(C)})}function P(S){return o?S.replace(p.IMAGE_URL_PREFIX,""):S}return new Promise(function(S,C){L.newPlot(t,b,i,r).then(x).then(A).then(E).then(function(M){S(P(M))}).catch(function(M){C(M)})})}le.exports=u},{"../lib":252,"../plots/plots":349,"../snapshot/helpers":356,"../snapshot/svgtoimg":358,"../snapshot/tosvg":360,"../version":434,"./plot_api":287,"fast-isnumeric":31}],294:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plots/plots"),N=z("./plot_schema"),D=z("./plot_config").dfltConfig,p=R.isPlainObject,w=Array.isArray,k=R.isArrayOrTypedArray;le.exports=function(g,n){g===void 0&&(g=[]),n===void 0&&(n={});var a=N.get(),h=[],c={_context:R.extendFlat({},D)},m,o;w(g)?(c.data=R.extendDeep([],g),m=g):(c.data=[],m=[],h.push(l("array","data"))),p(n)?(c.layout=R.extendDeep({},n),o=n):(c.layout={},o={},arguments.length>1&&h.push(l("object","layout"))),L.supplyDefaults(c);for(var t=c._fullData,i=m.length,r=0;r<i;r++){var x=m[r],A=["data",r];if(!p(x)){h.push(l("object",A));continue}var E=t[r],P=E.type,S=a.traces[P].attributes;S.type={valType:"enumerated",values:[P]},E.visible===!1&&x.visible!==!1&&h.push(l("invisible",A)),d(x,E,S,h,A);var C=x.transforms,M=E.transforms;if(C){w(C)||h.push(l("array",A,["transforms"])),A.push("transforms");for(var I=0;I<C.length;I++){var G=["transforms",I],V=C[I].type;if(!p(C[I])){h.push(l("object",A,G));continue}var q=a.transforms[V]?a.transforms[V].attributes:{};q.type={valType:"enumerated",values:Object.keys(a.transforms)},d(C[I],M[I],q,h,A,G)}}}var ee=c._fullLayout,Q=e(a,t);return d(o,ee,Q,h,"layout"),h.length===0?void 0:h};function d(f,g,n,a,h,c){c=c||[];for(var m=Object.keys(f),o=0;o<m.length;o++){var t=m[o];if(t!=="transforms"){var i=c.slice();i.push(t);var r=f[t],x=g[t],A=v(n,t),E=(A||{}).valType,P=E==="info_array",S=E==="colorscale",C=(A||{}).items;if(!b(n,t))a.push(l("schema",h,i));else if(p(r)&&p(x)&&E!=="any")d(r,x,A,a,h,i);else if(P&&w(r)){r.length>x.length&&a.push(l("unused",h,i.concat(x.length)));var M=x.length,I=Array.isArray(C);I&&(M=Math.min(M,C.length));var G,V,q,ee,Q;if(A.dimensions===2)for(V=0;V<M;V++)if(w(r[V])){r[V].length>x[V].length&&a.push(l("unused",h,i.concat(V,x[V].length)));var U=x[V].length;for(G=0;G<(I?Math.min(U,C[V].length):U);G++)q=I?C[V][G]:C,ee=r[V][G],Q=x[V][G],R.validate(ee,q)?Q!==ee&&Q!==+ee&&a.push(l("dynamic",h,i.concat(V,G),ee,Q)):a.push(l("value",h,i.concat(V,G),ee))}else a.push(l("array",h,i.concat(V),r[V]));else for(V=0;V<M;V++)q=I?C[V]:C,ee=r[V],Q=x[V],R.validate(ee,q)?Q!==ee&&Q!==+ee&&a.push(l("dynamic",h,i.concat(V),ee,Q)):a.push(l("value",h,i.concat(V),ee))}else if(A.items&&!P&&w(r)){var O=C[Object.keys(C)[0]],Z=[],B,Y;for(B=0;B<x.length;B++){var j=x[B]._index||B;if(Y=i.slice(),Y.push(j),p(r[j])&&p(x[B])){Z.push(j);var X=r[j],H=x[B];p(X)&&X.visible!==!1&&H.visible===!1?a.push(l("invisible",h,Y)):d(X,H,O,a,h,Y)}}for(B=0;B<r.length;B++)Y=i.slice(),Y.push(B),p(r[B])?Z.indexOf(B)===-1&&a.push(l("unused",h,Y)):a.push(l("object",h,Y,r[B]))}else!p(r)&&p(x)?a.push(l("object",h,i,r)):!k(r)&&k(x)&&!P&&!S?a.push(l("array",h,i,r)):t in g?R.validate(r,A)?A.valType==="enumerated"&&(A.coerceNumber&&r!==+x||r!==x)&&a.push(l("dynamic",h,i,r,x)):a.push(l("value",h,i,r)):a.push(l("unused",h,i,r))}}return a}function e(f,g){for(var n=f.layout.layoutAttributes,a=0;a<g.length;a++){var h=g[a],c=f.traces[h.type],m=c.layoutAttributes;m&&(h.subplot?R.extendFlat(n[c.attributes.subplot.dflt],m):R.extendFlat(n,m))}return n}var u={object:function(f,g){var n;return f==="layout"&&g===""?n="The layout argument":f[0]==="data"&&g===""?n="Trace "+f[1]+" in the data argument":n=s(f)+"key "+g,n+" must be linked to an object container"},array:function(f,g){var n;return f==="data"?n="The data argument":n=s(f)+"key "+g,n+" must be linked to an array container"},schema:function(f,g){return s(f)+"key "+g+" is not part of the schema"},unused:function(f,g,n){var a=p(n)?"container":"key";return s(f)+a+" "+g+" did not get coerced"},dynamic:function(f,g,n,a){return[s(f)+"key",g,"(set to '"+n+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(f,g){return(g?s(f)+"item "+g:"Trace "+f[1])+" got defaulted to be not visible"},value:function(f,g,n){return[s(f)+"key "+g,"is set to an invalid value ("+n+")"].join(" ")}};function s(f){return w(f)?"In data trace "+f[1]+", ":"In "+f+", "}function l(f,g,n,a,h){n=n||"";var c,m;w(g)?(c=g[0],m=g[1]):(c=g,m=null);var o=_(n),t=u[f](g,o,a,h);return R.log(t),{code:f,container:c,trace:m,path:n,astr:o,msg:t}}function b(f,g){var n=T(g),a=n.keyMinusId,h=n.id;return a in f&&f[a]._isSubplotObj&&h?!0:g in f}function v(f,g){if(g in f)return f[g];var n=T(g);return f[n.keyMinusId]}var y=R.counterRegex("([a-z]+)");function T(f){var g=f.match(y);return{keyMinusId:g&&g[1],id:g&&g[2]}}function _(f){if(!w(f))return String(f);for(var g="",n=0;n<f.length;n++){var a=f[n];typeof a=="number"?g=g.substr(0,g.length-1)+"["+a+"]":g+=a,n<f.length-1&&(g+=".")}return g}},{"../lib":252,"../plots/plots":349,"./plot_config":288,"./plot_schema":289}],295:[function(z,le,ae){"use strict";le.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],296:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plot_api/plot_template");le.exports=function(D,p,w){var k=w.name,d=w.inclusionAttr||"visible",e=p[k],u=R.isArrayOrTypedArray(D[k])?D[k]:[],s=p[k]=[],l=L.arrayTemplater(p,k,d),b,v;for(b=0;b<u.length;b++){var y=u[b];R.isPlainObject(y)?v=l.newItem(y):(v=l.newItem({}),v[d]=!1),v._index=b,v[d]!==!1&&w.handleItemDefaults(y,v,p,w),s.push(v)}var T=l.defaultItems();for(b=0;b<T.length;b++)v=T[b],v._index=s.length,w.handleItemDefaults({},v,p,w,{}),s.push(v);if(R.isArrayOrTypedArray(e)){var _=Math.min(e.length,s.length);for(b=0;b<_;b++)R.relinkPrivateKeys(s[b],e[b])}return s}},{"../lib":252,"../plot_api/plot_template":290}],297:[function(z,le,ae){"use strict";var R=z("./font_attributes"),L=z("../components/fx/attributes");le.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:R({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:L.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":150,"./font_attributes":332}],298:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=L.dateTime2ms,D=L.incrementMonth,p=z("../../constants/numerical"),w=p.ONEAVGMONTH;le.exports=function(d,e,u,s){if(e.type!=="date")return{vals:s};var l=d[u+"periodalignment"];if(!l)return{vals:s};var b=d[u+"period"],v;if(R(b)){if(b=+b,b<=0)return{vals:s}}else if(typeof b=="string"&&b.charAt(0)==="M"){var y=+b.substring(1);if(y>0&&Math.round(y)===y)v=y;else return{vals:s}}for(var T=e.calendar,_=l==="start",f=l==="end",g=d[u+"period0"],n=N(g,T)||0,a=[],h=[],c=[],m=s.length,o=0;o<m;o++){var t=s[o],i,r,x;if(v){for(i=Math.round((t-n)/(v*w)),x=D(n,v*i,T);x>t;)x=D(x,-v,T);for(;x<=t;)x=D(x,v,T);r=D(x,-v,T)}else{for(i=Math.round((t-n)/b),x=n+i*b;x>t;)x-=b;for(;x<=t;)x+=b;r=x-b}a[o]=_?r:f?x:(r+x)/2,h[o]=r,c[o]=x}return{vals:a,starts:h,ends:c}}},{"../../constants/numerical":231,"../../lib":252,"fast-isnumeric":31}],299:[function(z,le,ae){"use strict";le.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],300:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("../../lib"),D=z("../../constants/numerical").FP_SAFE,p=z("../../registry"),w=z("../../components/drawing"),k=z("./axis_ids"),d=k.getFromId,e=k.isLinked;le.exports={getAutoRange:u,makePadFn:l,doAutoRange:T,findExtremes:_,concatExtremes:y};function u(m,o){var t,i,r=[],x=m._fullLayout,A=l(x,o,0),E=l(x,o,1),P=y(m,o),S=P.min,C=P.max;if(S.length===0||C.length===0)return N.simpleMap(o.range,o.r2l);var M=S[0].val,I=C[0].val;for(t=1;t<S.length&&M===I;t++)M=Math.min(M,S[t].val);for(t=1;t<C.length&&M===I;t++)I=Math.max(I,C[t].val);var G=!1;if(o.range){var V=N.simpleMap(o.range,o.r2l);G=V[1]<V[0]}o.autorange==="reversed"&&(G=!0,o.autorange=!0);var q=o.rangemode,ee=q==="tozero",Q=q==="nonnegative",U=o._length,O=U/10,Z=0,B,Y,j,X,H,K;for(t=0;t<S.length;t++)for(B=S[t],i=0;i<C.length;i++)Y=C[i],K=Y.val-B.val-s(o,B.val,Y.val),K>0&&(H=U-A(B)-E(Y),H>O?K/H>Z&&(j=B,X=Y,Z=K/H):K/U>Z&&(j={val:B.val,nopad:1},X={val:Y.val,nopad:1},Z=K/U));function W(ue,ce){return Math.max(ue,E(ce))}if(M===I){var $=M-1,re=M+1;if(ee)if(M===0)r=[0,1];else{var de=(M>0?C:S).reduce(W,0),ve=M/(1-Math.min(.5,de/U));r=M>0?[0,ve]:[ve,0]}else Q?r=[Math.max(0,$),Math.max(1,re)]:r=[$,re]}else ee?(j.val>=0&&(j={val:0,nopad:1}),X.val<=0&&(X={val:0,nopad:1})):Q&&(j.val-Z*A(j)<0&&(j={val:0,nopad:1}),X.val<=0&&(X={val:1,nopad:1})),Z=(X.val-j.val-s(o,B.val,Y.val))/(U-A(j)-E(X)),r=[j.val-Z*A(j),X.val+Z*E(X)];return G&&r.reverse(),N.simpleMap(r,o.l2r||Number)}function s(m,o,t){var i=0;if(m.rangebreaks)for(var r=m.locateBreaks(o,t),x=0;x<r.length;x++){var A=r[x];i+=A.max-A.min}return i}function l(m,o,t){var i=.05*o._length,r=o._anchorAxis||{};if((o.ticklabelposition||"").indexOf("inside")!==-1||(r.ticklabelposition||"").indexOf("inside")!==-1){var x=o.autorange==="reversed";if(!x){var A=N.simpleMap(o.range,o.r2l);x=A[1]<A[0]}x&&(t=!t)}var E=0;return e(m,o._id)||(E=v(m,o,t)),i=Math.max(E,i),o.constrain==="domain"&&o._inputDomain&&(i*=(o._inputDomain[1]-o._inputDomain[0])/(o.domain[1]-o.domain[0])),function(S){return S.nopad?0:S.pad+(S.extrapad?i:E)}}var b=3;function v(m,o,t){var i=0,r=o._id.charAt(0)==="x";for(var x in m._plots){var A=m._plots[x];if(!(o._id!==A.xaxis._id&&o._id!==A.yaxis._id)){var E=(r?A.yaxis:A.xaxis)||{};if((E.ticklabelposition||"").indexOf("inside")!==-1&&(!t&&(E.side==="left"||E.side==="bottom")||t&&(E.side==="top"||E.side==="right"))){if(E._vals){var P=N.deg2rad(E._tickAngles[E._id+"tick"]||0),S=Math.abs(Math.cos(P)),C=Math.abs(Math.sin(P));if(!E._vals[0].bb){var M=E._id+"tick",I=E._selections[M];I.each(function(U){var O=R.select(this),Z=O.select(".text-math-group");Z.empty()&&(U.bb=w.bBox(O.node()))})}for(var G=0;G<E._vals.length;G++){var V=E._vals[G],q=V.bb;if(q){var ee=2*b+q.width,Q=2*b+q.height;i=Math.max(i,r?Math.max(ee*S,Q*C):Math.max(Q*S,ee*C))}}}E.ticks==="inside"&&E.ticklabelposition==="inside"&&(i+=E.ticklen||0)}}}return i}function y(m,o,t){var i=o._id,r=m._fullData,x=m._fullLayout,A=[],E=[],P,S,C;function M(ee,Q){for(P=0;P<Q.length;P++){var U=ee[Q[P]],O=(U._extremes||{})[i];if(U.visible===!0&&O){for(S=0;S<O.min.length;S++)C=O.min[S],f(A,C.val,C.pad,{extrapad:C.extrapad});for(S=0;S<O.max.length;S++)C=O.max[S],g(E,C.val,C.pad,{extrapad:C.extrapad})}}}if(M(r,o._traceIndices),M(x.annotations||[],o._annIndices||[]),M(x.shapes||[],o._shapeIndices||[]),o._matchGroup&&!t){for(var I in o._matchGroup)if(I!==o._id){var G=d(m,I),V=y(m,G,!0),q=o._length/G._length;for(S=0;S<V.min.length;S++)C=V.min[S],f(A,C.val,C.pad*q,{extrapad:C.extrapad});for(S=0;S<V.max.length;S++)C=V.max[S],g(E,C.val,C.pad*q,{extrapad:C.extrapad})}}return{min:A,max:E}}function T(m,o,t){if(o.setScale(),o.autorange){o.range=t?t.slice():u(m,o),o._r=o.range.slice(),o._rl=N.simpleMap(o._r,o.r2l);var i=o._input,r={};r[o._attr+".range"]=o.range,r[o._attr+".autorange"]=o.autorange,p.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,r),i.range=o.range.slice(),i.autorange=o.autorange}var x=o._anchorAxis;if(x&&x.rangeslider){var A=x.rangeslider[o._name];A&&A.rangemode==="auto"&&(A.range=u(m,o)),x._input.rangeslider[o._name]=N.extendFlat({},A)}}function _(m,o,t){t||(t={}),m._m||m.setScale();var i=[],r=[],x=o.length,A=t.padded||!1,E=t.tozero&&(m.type==="linear"||m.type==="-"),P=m.type==="log",S=!1,C=t.vpadLinearized||!1,M,I,G,V,q,ee,Q,U,O;function Z($){if(Array.isArray($))return S=!0,function(de){return Math.max(Number($[de]||0),0)};var re=Math.max(Number($||0),0);return function(){return re}}var B=Z((m._m>0?t.ppadplus:t.ppadminus)||t.ppad||0),Y=Z((m._m>0?t.ppadminus:t.ppadplus)||t.ppad||0),j=Z(t.vpadplus||t.vpad),X=Z(t.vpadminus||t.vpad);if(!S){if(U=1/0,O=-1/0,P)for(M=0;M<x;M++)I=o[M],I<U&&I>0&&(U=I),I>O&&I<D&&(O=I);else for(M=0;M<x;M++)I=o[M],I<U&&I>-D&&(U=I),I>O&&I<D&&(O=I);o=[U,O],x=2}var H={tozero:E,extrapad:A};function K($){G=o[$],L(G)&&(ee=B($),Q=Y($),C?(V=m.c2l(G)-X($),q=m.c2l(G)+j($)):(U=G-X($),O=G+j($),P&&U<O/10&&(U=O/10),V=m.c2l(U),q=m.c2l(O)),E&&(V=Math.min(0,V),q=Math.max(0,q)),a(V)&&f(i,V,Q,H),a(q)&&g(r,q,ee,H))}var W=Math.min(6,x);for(M=0;M<W;M++)K(M);for(M=x-1;M>=W;M--)K(M);return{min:i,max:r,opts:t}}function f(m,o,t,i){n(m,o,t,i,h)}function g(m,o,t,i){n(m,o,t,i,c)}function n(m,o,t,i,r){for(var x=i.tozero,A=i.extrapad,E=!0,P=0;P<m.length&&E;P++){var S=m[P];if(r(S.val,o)&&S.pad>=t&&(S.extrapad||!A)){E=!1;break}else r(o,S.val)&&S.pad<=t&&(A||!S.extrapad)&&(m.splice(P,1),P--)}if(E){var C=x&&o===0;m.push({val:o,pad:C?0:t,extrapad:C?!1:A})}}function a(m){return L(m)&&Math.abs(m)<D}function h(m,o){return m<=o}function c(m,o){return m>=o}},{"../../components/drawing":141,"../../constants/numerical":231,"../../lib":252,"../../registry":352,"./axis_ids":305,"@plotly/d3":16,"fast-isnumeric":31}],301:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("fast-isnumeric"),N=z("../../plots/plots"),D=z("../../registry"),p=z("../../lib"),w=p.strTranslate,k=z("../../lib/svg_text_utils"),d=z("../../components/titles"),e=z("../../components/color"),u=z("../../components/drawing"),s=z("./layout_attributes"),l=z("./clean_ticks"),b=z("../../constants/numerical"),v=b.ONEMAXYEAR,y=b.ONEAVGYEAR,T=b.ONEMINYEAR,_=b.ONEMAXQUARTER,f=b.ONEAVGQUARTER,g=b.ONEMINQUARTER,n=b.ONEMAXMONTH,a=b.ONEAVGMONTH,h=b.ONEMINMONTH,c=b.ONEWEEK,m=b.ONEDAY,o=m/2,t=b.ONEHOUR,i=b.ONEMIN,r=b.ONESEC,x=b.MINUS_SIGN,A=b.BADNUM,E={K:"zeroline"},P={K:"gridline",L:"path"},S={K:"tick",L:"path"},C={K:"tick",L:"text"},M=z("../../constants/alignment"),I=M.MID_SHIFT,G=M.CAP_SHIFT,V=M.LINE_SPACING,q=M.OPPOSITE_SIDE,ee=3,Q=le.exports={};Q.setConvert=z("./set_convert");var U=z("./axis_autotype"),O=z("./axis_ids"),Z=O.idSort,B=O.isLinked;Q.id2name=O.id2name,Q.name2id=O.name2id,Q.cleanId=O.cleanId,Q.list=O.list,Q.listIds=O.listIds,Q.getFromId=O.getFromId,Q.getFromTrace=O.getFromTrace;var Y=z("./autorange");Q.getAutoRange=Y.getAutoRange,Q.findExtremes=Y.findExtremes;var j=1e-4;function X(ye){var ge=(ye[1]-ye[0])*j;return[ye[0]-ge,ye[1]+ge]}Q.coerceRef=function(ye,ge,Re,ze,Ue,je){var Ye=ze.charAt(ze.length-1),et=Re._fullLayout._subplots[Ye+"axis"],ot=ze+"ref",_t={};return Ue||(Ue=et[0]||(typeof je=="string"?je:je[0])),je||(je=Ue),et=et.concat(et.map(function(Mt){return Mt+" domain"})),_t[ot]={valType:"enumerated",values:et.concat(je?typeof je=="string"?[je]:je:[]),dflt:Ue},p.coerce(ye,ge,_t,ot)},Q.getRefType=function(ye){return ye===void 0?ye:ye==="paper"?"paper":ye==="pixel"?"pixel":/( domain)$/.test(ye)?"domain":"range"},Q.coercePosition=function(ye,ge,Re,ze,Ue,je){var Ye,et,ot=Q.getRefType(ze);if(ot!=="range")Ye=p.ensureNumber,et=Re(Ue,je);else{var _t=Q.getFromId(ge,ze);je=_t.fraction2r(je),et=Re(Ue,je),Ye=_t.cleanPos}ye[Ue]=Ye(et)},Q.cleanPosition=function(ye,ge,Re){var ze=Re==="paper"||Re==="pixel"?p.ensureNumber:Q.getFromId(ge,Re).cleanPos;return ze(ye)},Q.redrawComponents=function(ye,ge){ge=ge||Q.listIds(ye);var Re=ye._fullLayout;function ze(Ue,je,Ye,et){for(var ot=D.getComponentMethod(Ue,je),_t={},Mt=0;Mt<ge.length;Mt++)for(var St=Re[Q.id2name(ge[Mt])],Dt=St[Ye],Ot=0;Ot<Dt.length;Ot++){var Ht=Dt[Ot];if(!_t[Ht]&&(ot(ye,Ht),_t[Ht]=1,et))return}}ze("annotations","drawOne","_annIndices"),ze("shapes","drawOne","_shapeIndices"),ze("images","draw","_imgIndices",!0)};var H=Q.getDataConversions=function(ye,ge,Re,ze){var Ue,je=Re==="x"||Re==="y"||Re==="z"?Re:ze;if(Array.isArray(je)){if(Ue={type:U(ze,void 0,{autotypenumbers:ye._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(Ue),Ue.type==="category")for(var Ye=0;Ye<ze.length;Ye++)Ue.d2c(ze[Ye])}else Ue=Q.getFromTrace(ye,ge,je);return Ue?{d2c:Ue.d2c,c2d:Ue.c2d}:je==="ids"?{d2c:W,c2d:W}:{d2c:K,c2d:K}};function K(ye){return+ye}function W(ye){return String(ye)}Q.getDataToCoordFunc=function(ye,ge,Re,ze){return H(ye,ge,Re,ze).d2c},Q.counterLetter=function(ye){var ge=ye.charAt(0);if(ge==="x")return"y";if(ge==="y")return"x"},Q.minDtick=function(ye,ge,Re,ze){["log","category","multicategory"].indexOf(ye.type)!==-1||!ze?ye._minDtick=0:ye._minDtick===void 0?(ye._minDtick=ge,ye._forceTick0=Re):ye._minDtick&&((ye._minDtick/ge+1e-6)%1<2e-6&&((Re-ye._forceTick0)/ge%1+1.000001)%1<2e-6?(ye._minDtick=ge,ye._forceTick0=Re):((ge/ye._minDtick+1e-6)%1>2e-6||((Re-ye._forceTick0)/ye._minDtick%1+1.000001)%1>2e-6)&&(ye._minDtick=0))},Q.saveRangeInitial=function(ye,ge){for(var Re=Q.list(ye,"",!0),ze=!1,Ue=0;Ue<Re.length;Ue++){var je=Re[Ue],Ye=je._rangeInitial===void 0,et=Ye||!(je.range[0]===je._rangeInitial[0]&&je.range[1]===je._rangeInitial[1]);(Ye&&je.autorange===!1||ge&&et)&&(je._rangeInitial=je.range.slice(),ze=!0)}return ze},Q.saveShowSpikeInitial=function(ye,ge){for(var Re=Q.list(ye,"",!0),ze=!1,Ue="on",je=0;je<Re.length;je++){var Ye=Re[je],et=Ye._showSpikeInitial===void 0,ot=et||Ye.showspikes!==Ye._showspikes;(et||ge&&ot)&&(Ye._showSpikeInitial=Ye.showspikes,ze=!0),Ue==="on"&&!Ye.showspikes&&(Ue="off")}return ye._fullLayout._cartesianSpikesEnabled=Ue,ze},Q.autoBin=function(ye,ge,Re,ze,Ue,je){var Ye=p.aggNums(Math.min,null,ye),et=p.aggNums(Math.max,null,ye);if(ge.type==="category"||ge.type==="multicategory")return{start:Ye-.5,end:et+.5,size:Math.max(1,Math.round(je)||1),_dataSpan:et-Ye};Ue||(Ue=ge.calendar);var ot;if(ge.type==="log"?ot={type:"linear",range:[Ye,et]}:ot={type:ge.type,range:p.simpleMap([Ye,et],ge.c2r,0,Ue),calendar:Ue},Q.setConvert(ot),je=je&&l.dtick(je,ot.type),je)ot.dtick=je,ot.tick0=l.tick0(void 0,ot.type,Ue);else{var _t;if(Re)_t=(et-Ye)/Re;else{var Mt=p.distinctVals(ye),St=Math.pow(10,Math.floor(Math.log(Mt.minDiff)/Math.LN10)),Dt=St*p.roundUp(Mt.minDiff/St,[.9,1.9,4.9,9.9],!0);_t=Math.max(Dt,2*p.stdev(ye)/Math.pow(ye.length,ze?.25:.4)),L(_t)||(_t=1)}Q.autoTicks(ot,_t)}var Ot=ot.dtick,Ht=Q.tickIncrement(Q.tickFirst(ot),Ot,"reverse",Ue),er,wt;if(typeof Ot=="number")Ht=$(Ht,ye,ot,Ye,et),wt=1+Math.floor((et-Ht)/Ot),er=Ht+wt*Ot;else for(ot.dtick.charAt(0)==="M"&&(Ht=re(Ht,ye,Ot,Ye,Ue)),er=Ht,wt=0;er<=et;)er=Q.tickIncrement(er,Ot,!1,Ue),wt++;return{start:ge.c2r(Ht,0,Ue),end:ge.c2r(er,0,Ue),size:Ot,_dataSpan:et-Ye}};function $(ye,ge,Re,ze,Ue){var je=0,Ye=0,et=0,ot=0;function _t(Ot){return(1+(Ot-ye)*100/Re.dtick)%100<2}for(var Mt=0;Mt<ge.length;Mt++)ge[Mt]%1===0?et++:L(ge[Mt])||ot++,_t(ge[Mt])&&je++,_t(ge[Mt]+Re.dtick/2)&&Ye++;var St=ge.length-ot;if(et===St&&Re.type!=="date")Re.dtick<1?ye=ze-.5*Re.dtick:(ye-=.5,ye+Re.dtick<ze&&(ye+=Re.dtick));else if(Ye<St*.1&&(je>St*.3||_t(ze)||_t(Ue))){var Dt=Re.dtick/2;ye+=ye+Dt<ze?Dt:-Dt}return ye}function re(ye,ge,Re,ze,Ue){var je=p.findExactDates(ge,Ue),Ye=.8;if(je.exactDays>Ye){var et=Number(Re.substr(1));je.exactYears>Ye&&et%12===0?ye=Q.tickIncrement(ye,"M6","reverse")+m*1.5:je.exactMonths>Ye?ye=Q.tickIncrement(ye,"M1","reverse")+m*15.5:ye-=o;var ot=Q.tickIncrement(ye,Re);if(ot<=ze)return ot}return ye}Q.prepTicks=function(ye,ge){var Re=p.simpleMap(ye.range,ye.r2l,void 0,void 0,ge);if(ye._dtickInit=ye.dtick,ye._tick0Init=ye.tick0,ye.tickmode==="auto"||!ye.dtick){var ze=ye.nticks,Ue;ze||(ye.type==="category"||ye.type==="multicategory"?(Ue=ye.tickfont?p.bigFont(ye.tickfont.size||12):15,ze=ye._length/Ue):(Ue=ye._id.charAt(0)==="y"?40:80,ze=p.constrain(ye._length/Ue,4,9)+1),ye._name==="radialaxis"&&(ze*=2)),ye.tickmode==="array"&&(ze*=100),ye._roughDTick=Math.abs(Re[1]-Re[0])/ze,Q.autoTicks(ye,ye._roughDTick),ye._minDtick>0&&ye.dtick<ye._minDtick*2&&(ye.dtick=ye._minDtick,ye.tick0=ye.l2r(ye._forceTick0))}ye.ticklabelmode==="period"&&ve(ye),ye.tick0||(ye.tick0=ye.type==="date"?"2000-01-01":0),ye.type==="date"&&ye.dtick<.1&&(ye.dtick=.1),Ie(ye)};function de(ye){return+ye.substring(1)}function ve(ye){var ge;function Re(){return!(L(ye.dtick)||ye.dtick.charAt(0)!=="M")}var ze=Re(),Ue=Q.getTickFormat(ye);if(Ue){var je=ye._dtickInit!==ye.dtick;/%[fLQsSMX]/.test(Ue)||(/%[HI]/.test(Ue)?(ge=t,je&&!ze&&ye.dtick<t&&(ye.dtick=t)):/%p/.test(Ue)?(ge=o,je&&!ze&&ye.dtick<o&&(ye.dtick=o)):/%[Aadejuwx]/.test(Ue)?(ge=m,je&&!ze&&ye.dtick<m&&(ye.dtick=m)):/%[UVW]/.test(Ue)?(ge=c,je&&!ze&&ye.dtick<c&&(ye.dtick=c)):/%[Bbm]/.test(Ue)?(ge=a,je&&(ze?de(ye.dtick)<1:ye.dtick<h)&&(ye.dtick="M1")):/%[q]/.test(Ue)?(ge=f,je&&(ze?de(ye.dtick)<3:ye.dtick<g)&&(ye.dtick="M3")):/%[Yy]/.test(Ue)&&(ge=y,je&&(ze?de(ye.dtick)<12:ye.dtick<T)&&(ye.dtick="M12")))}ze=Re(),ze&&ye.tick0===ye._dowTick0&&(ye.tick0=ye._rawTick0),ye._definedDelta=ge}function ue(ye,ge,Re){for(var ze=0;ze<ye.length;ze++){var Ue=ye[ze].value,je=ze,Ye=ze+1;ze<ye.length-1?(je=ze,Ye=ze+1):ze>0?(je=ze-1,Ye=ze):(je=ze,Ye=ze);var et=ye[je].value,ot=ye[Ye].value,_t=Math.abs(ot-et),Mt=Re||_t,St=0;Mt>=T?_t>=T&&_t<=v?St=_t:St=y:Re===f&&Mt>=g?_t>=g&&_t<=_?St=_t:St=f:Mt>=h?_t>=h&&_t<=n?St=_t:St=a:Re===c&&Mt>=c?St=c:Mt>=m?St=m:Re===o&&Mt>=o?St=o:Re===t&&Mt>=t&&(St=t);var Dt;St>=_t&&(St=_t,Dt=!0);var Ot=Ue+St;if(ge.rangebreaks&&St>0){for(var Ht=84,er=0,wt=0;wt<Ht;wt++){var Et=(wt+.5)/Ht;ge.maskBreaks(Ue*(1-Et)+Et*Ot)!==A&&er++}St*=er/Ht,St||(ye[ze].drop=!0),Dt&&_t>c&&(St=_t)}(St>0||ze===0)&&(ye[ze].periodX=Ue+St/2)}}Q.calcTicks=function(ge,Re){Q.prepTicks(ge,Re);var ze=p.simpleMap(ge.range,ge.r2l,void 0,void 0,Re);if(ge.tickmode==="array")return ce(ge);var Ue=X(ze),je=Ue[0],Ye=Ue[1],et=ze[1]<ze[0],ot=Math.min(ze[0],ze[1]),_t=Math.max(ze[0],ze[1]),Mt=L(ge.dtick),St=ge.type==="log"&&!(Mt||ge.dtick.charAt(0)==="L"),Dt=ge.ticklabelmode==="period";if(ge._tmin=Q.tickFirst(ge,Re),ge._tmin<je!==et)return[];(ge.type==="category"||ge.type==="multicategory")&&(Ye=et?Math.max(-.5,Ye):Math.min(ge._categories.length-.5,Ye));var Ot=ge._tmin;ge.rangebreaks&&ge._tick0Init!==ge.tick0&&(Ot=vt(Ot,ge),et||(Ot=Q.tickIncrement(Ot,ge.dtick,!et,ge.calendar))),Dt&&(Ot=Q.tickIncrement(Ot,ge.dtick,!et,ge.calendar));var Ht=ge.ticklabelstep,er=Math.max(1e3,ge._length||0),wt=[],Et=null,zt;Mt?zt=ge.dtick:ge.type==="date"?typeof ge.dtick=="string"&&ge.dtick.charAt(0)==="M"&&(zt=a*ge.dtick.substring(1)):zt=ge._roughDTick;for(var Ut=Math.round((ge.r2l(Ot)-ge.r2l(ge.tick0))/zt)-1;et?Ot>=Ye:Ot<=Ye;Ot=Q.tickIncrement(Ot,ge.dtick,et,ge.calendar)){if(Ut++,ge.rangebreaks&&!et){if(Ot<je)continue;if(ge.maskBreaks(Ot)===A&&vt(Ot,ge)>=_t)break}if(wt.length>er||Ot===Et)break;Et=Ot;var pt=!1;St&&Ot!==(Ot|0)&&(pt=!0);var Ct={minor:pt,value:Ot};Ht>1&&Ut%Ht&&(Ct.skipLabel=!0),wt.push(Ct)}Dt&&ue(wt,ge,ge._definedDelta);var Lt;if(ge.rangebreaks){var At=ge._id.charAt(0)==="y",Vt=1;ge.tickmode==="auto"&&(Vt=ge.tickfont?ge.tickfont.size:12);var Qt=NaN;for(Lt=wt.length-1;Lt>-1;Lt--){if(wt[Lt].drop){wt.splice(Lt,1);continue}wt[Lt].value=vt(wt[Lt].value,ge);var $t=ge.c2p(wt[Lt].value);(At?Qt>$t-Vt:Qt<$t+Vt)?wt.splice(et?Lt+1:Lt,1):Qt=$t}}It(ge)&&Math.abs(ze[1]-ze[0])===360&&wt.pop(),ge._tmax=(wt[wt.length-1]||{}).value,ge._prevDateHead="",ge._inCalcTicks=!0;var Pt,rr=function(mr){mr.text=" ",ge._prevDateHead=Pt},ir=[],tr,sr;for(Lt=0;Lt<wt.length;Lt++){var cr=wt[Lt].minor,vr=wt[Lt].value;Pt=ge._prevDateHead,tr=Q.tickText(ge,vr,!1,cr),sr=wt[Lt].periodX,sr!==void 0&&(tr.periodX=sr,(sr>_t||sr<ot)&&(sr>_t&&(tr.periodX=_t),sr<ot&&(tr.periodX=ot),rr(tr))),wt[Lt].skipLabel&&rr(tr),ir.push(tr)}return ge._inCalcTicks=!1,ir};function ce(ye){var ge=ye.tickvals,Re=ye.ticktext,ze=new Array(ge.length),Ue=p.simpleMap(ye.range,ye.r2l),je=X(Ue),Ye=Math.min(je[0],je[1]),et=Math.max(je[0],je[1]),ot=0;Array.isArray(Re)||(Re=[]);var _t=ye.type==="category"?ye.d2l_noadd:ye.d2l;ye.type==="log"&&String(ye.dtick).charAt(0)!=="L"&&(ye.dtick="L"+Math.pow(10,Math.floor(Math.min(ye.range[0],ye.range[1]))-1));for(var Mt=0;Mt<ge.length;Mt++){var St=_t(ge[Mt]);St>Ye&&St<et&&(Re[Mt]===void 0?ze[ot]=Q.tickText(ye,St):ze[ot]=Ke(ye,St,String(Re[Mt])),ot++)}return ot<ge.length&&ze.splice(ot,ge.length-ot),ye.rangebreaks&&(ze=ze.filter(function(Dt){return ye.maskBreaks(Dt.x)!==A})),ze}var _e=[2,5,10],fe=[1,2,3,6,12],ne=[1,2,5,10,15,30],ie=[1,2,3,7,14],me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],we=[-.301,0,.301,.699,1],be=[15,30,45,90,180];function Me(ye,ge,Re){return ge*p.roundUp(ye/ge,Re)}Q.autoTicks=function(ye,ge){var Re;function ze(Mt){return Math.pow(Mt,Math.floor(Math.log(ge)/Math.LN10))}if(ye.type==="date"){ye.tick0=p.dateTick0(ye.calendar,0);var Ue=2*ge;if(Ue>y)ge/=y,Re=ze(10),ye.dtick="M"+12*Me(ge,Re,_e);else if(Ue>a)ge/=a,ye.dtick="M"+Me(ge,1,fe);else if(Ue>m){ye.dtick=Me(ge,m,ye._hasDayOfWeekBreaks?[1,2,7,14]:ie);var je=Q.getTickFormat(ye),Ye=ye.ticklabelmode==="period";Ye&&(ye._rawTick0=ye.tick0),/%[uVW]/.test(je)?ye.tick0=p.dateTick0(ye.calendar,2):ye.tick0=p.dateTick0(ye.calendar,1),Ye&&(ye._dowTick0=ye.tick0)}else Ue>t?ye.dtick=Me(ge,t,fe):Ue>i?ye.dtick=Me(ge,i,ne):Ue>r?ye.dtick=Me(ge,r,ne):(Re=ze(10),ye.dtick=Me(ge,Re,_e))}else if(ye.type==="log"){ye.tick0=0;var et=p.simpleMap(ye.range,ye.r2l);if(ge>.7)ye.dtick=Math.ceil(ge);else if(Math.abs(et[1]-et[0])<1){var ot=1.5*Math.abs((et[1]-et[0])/ge);ge=Math.abs(Math.pow(10,et[1])-Math.pow(10,et[0]))/ot,Re=ze(10),ye.dtick="L"+Me(ge,Re,_e)}else ye.dtick=ge>.3?"D2":"D1"}else ye.type==="category"||ye.type==="multicategory"?(ye.tick0=0,ye.dtick=Math.ceil(Math.max(ge,1))):It(ye)?(ye.tick0=0,Re=1,ye.dtick=Me(ge,Re,be)):(ye.tick0=0,Re=ze(10),ye.dtick=Me(ge,Re,_e));if(ye.dtick===0&&(ye.dtick=1),!L(ye.dtick)&&typeof ye.dtick!="string"){var _t=ye.dtick;throw ye.dtick=1,"ax.dtick error: "+String(_t)}};function Ie(ye){var ge=ye.dtick;if(ye._tickexponent=0,!L(ge)&&typeof ge!="string"&&(ge=1),(ye.type==="category"||ye.type==="multicategory")&&(ye._tickround=null),ye.type==="date"){var Re=ye.r2l(ye.tick0),ze=ye.l2r(Re).replace(/(^-|i)/g,""),Ue=ze.length;if(String(ge).charAt(0)==="M")Ue>10||ze.substr(5)!=="01-01"?ye._tickround="d":ye._tickround=+ge.substr(1)%12===0?"y":"m";else if(ge>=m&&Ue<=10||ge>=m*15)ye._tickround="d";else if(ge>=i&&Ue<=16||ge>=t)ye._tickround="M";else if(ge>=r&&Ue<=19||ge>=i)ye._tickround="S";else{var je=ye.l2r(Re+ge).replace(/^-/,"").length;ye._tickround=Math.max(Ue,je)-20,ye._tickround<0&&(ye._tickround=4)}}else if(L(ge)||ge.charAt(0)==="L"){var Ye=ye.range.map(ye.r2d||Number);L(ge)||(ge=Number(ge.substr(1))),ye._tickround=2-Math.floor(Math.log(ge)/Math.LN10+.01);var et=Math.max(Math.abs(Ye[0]),Math.abs(Ye[1])),ot=Math.floor(Math.log(et)/Math.LN10+.01),_t=ye.minexponent===void 0?3:ye.minexponent;Math.abs(ot)>_t&&(st(ye.exponentformat)&&!Ve(ot)?ye._tickexponent=3*Math.round((ot-1)/3):ye._tickexponent=ot)}else ye._tickround=null}Q.tickIncrement=function(ye,ge,Re,ze){var Ue=Re?-1:1;if(L(ge))return p.increment(ye,Ue*ge);var je=ge.charAt(0),Ye=Ue*Number(ge.substr(1));if(je==="M")return p.incrementMonth(ye,Ye,ze);if(je==="L")return Math.log(Math.pow(10,ye)+Ye)/Math.LN10;if(je==="D"){var et=ge==="D2"?we:me,ot=ye+Ue*.01,_t=p.roundUp(p.mod(ot,1),et,Re);return Math.floor(ot)+Math.log(R.round(Math.pow(10,_t),1))/Math.LN10}throw"unrecognized dtick "+String(ge)},Q.tickFirst=function(ye,ge){var Re=ye.r2l||Number,ze=p.simpleMap(ye.range,Re,void 0,void 0,ge),Ue=ze[1]<ze[0],je=Ue?Math.floor:Math.ceil,Ye=X(ze)[0],et=ye.dtick,ot=Re(ye.tick0);if(L(et)){var _t=je((Ye-ot)/et)*et+ot;return(ye.type==="category"||ye.type==="multicategory")&&(_t=p.constrain(_t,0,ye._categories.length-1)),_t}var Mt=et.charAt(0),St=Number(et.substr(1));if(Mt==="M"){for(var Dt=0,Ot=ot,Ht,er,wt;Dt<10;){if(Ht=Q.tickIncrement(Ot,et,Ue,ye.calendar),(Ht-Ye)*(Ot-Ye)<=0)return Ue?Math.min(Ot,Ht):Math.max(Ot,Ht);er=(Ye-(Ot+Ht)/2)/(Ht-Ot),wt=Mt+(Math.abs(Math.round(er))||1)*St,Ot=Q.tickIncrement(Ot,wt,er<0?!Ue:Ue,ye.calendar),Dt++}return p.error("tickFirst did not converge",ye),Ot}else{if(Mt==="L")return Math.log(je((Math.pow(10,Ye)-ot)/St)*St+ot)/Math.LN10;if(Mt==="D"){var Et=et==="D2"?we:me,zt=p.roundUp(p.mod(Ye,1),Et,Ue);return Math.floor(Ye)+Math.log(R.round(Math.pow(10,zt),1))/Math.LN10}else throw"unrecognized dtick "+String(et)}},Q.tickText=function(ye,ge,Re,ze){var Ue=Ke(ye,ge),je=ye.tickmode==="array",Ye=Re||je,et=ye.type,ot=et==="category"?ye.d2l_noadd:ye.d2l,_t;if(je&&Array.isArray(ye.ticktext)){var Mt=p.simpleMap(ye.range,ye.r2l),St=(Math.abs(Mt[1]-Mt[0])-(ye._lBreaks||0))/1e4;for(_t=0;_t<ye.ticktext.length&&!(Math.abs(ge-ot(ye.tickvals[_t]))<St);_t++);if(_t<ye.ticktext.length)return Ue.text=String(ye.ticktext[_t]),Ue}function Dt(er){if(er===void 0)return!0;if(Re)return er==="none";var wt={first:ye._tmin,last:ye._tmax}[er];return er!=="all"&&ge!==wt}var Ot=Re?"never":ye.exponentformat!=="none"&&Dt(ye.showexponent)?"hide":"";if(et==="date"?Oe(ye,Ue,Re,Ye):et==="log"?We(ye,Ue,Re,Ye,Ot):et==="category"?Fe(ye,Ue):et==="multicategory"?Ge(ye,Ue,Re):It(ye)?ut(ye,Ue,Re,Ye,Ot):Xe(ye,Ue,Re,Ye,Ot),ze||(ye.tickprefix&&!Dt(ye.showtickprefix)&&(Ue.text=ye.tickprefix+Ue.text),ye.ticksuffix&&!Dt(ye.showticksuffix)&&(Ue.text+=ye.ticksuffix)),ye.tickson==="boundaries"||ye.showdividers){var Ht=function(er){var wt=ye.l2p(er);return wt>=0&&wt<=ye._length?er:null};Ue.xbnd=[Ht(Ue.x-.5),Ht(Ue.x+ye.dtick-.5)]}return Ue},Q.hoverLabelText=function(ye,ge,Re){Re&&(ye=p.extendFlat({},ye,{hoverformat:Re}));var ze=Array.isArray(ge)?ge[0]:ge,Ue=Array.isArray(ge)?ge[1]:void 0;if(Ue!==void 0&&Ue!==ze)return Q.hoverLabelText(ye,ze,Re)+" - "+Q.hoverLabelText(ye,Ue,Re);var je=ye.type==="log"&&ze<=0,Ye=Q.tickText(ye,ye.c2l(je?-ze:ze),"hover").text;return je?ze===0?"0":x+Ye:Ye};function Ke(ye,ge,Re){var ze=ye.tickfont||{};return{x:ge,dx:0,dy:0,text:Re||"",fontSize:ze.size,font:ze.family,fontColor:ze.color}}function Oe(ye,ge,Re,ze){var Ue=ye._tickround,je=Re&&ye.hoverformat||Q.getTickFormat(ye);ze&&(L(Ue)?Ue=4:Ue={y:"m",m:"d",d:"M",M:"S",S:4}[Ue]);var Ye=p.formatDate(ge.x,je,Ue,ye._dateFormat,ye.calendar,ye._extraFormat),et,ot=Ye.indexOf(`
`);if(ot!==-1&&(et=Ye.substr(ot+1),Ye=Ye.substr(0,ot)),ze&&(Ye==="00:00:00"||Ye==="00:00"?(Ye=et,et=""):Ye.length===8&&(Ye=Ye.replace(/:00$/,""))),et)if(Re)Ue==="d"?Ye+=", "+et:Ye=et+(Ye?", "+Ye:"");else if(!ye._inCalcTicks||ye._prevDateHead!==et)ye._prevDateHead=et,Ye+="<br>"+et;else{var _t=Yt(ye),Mt=ye._trueSide||ye.side;(!_t&&Mt==="top"||_t&&Mt==="bottom")&&(Ye+="<br> ")}ge.text=Ye}function We(ye,ge,Re,ze,Ue){var je=ye.dtick,Ye=ge.x,et=ye.tickformat,ot=typeof je=="string"&&je.charAt(0);if(Ue==="never"&&(Ue=""),ze&&ot!=="L"&&(je="L3",ot="L"),et||ot==="L")ge.text=Je(Math.pow(10,Ye),ye,Ue,ze);else if(L(je)||ot==="D"&&p.mod(Ye+.01,1)<.1){var _t=Math.round(Ye),Mt=Math.abs(_t),St=ye.exponentformat;St==="power"||st(St)&&Ve(_t)?(_t===0?ge.text=1:_t===1?ge.text="10":ge.text="10<sup>"+(_t>1?"":x)+Mt+"</sup>",ge.fontSize*=1.25):(St==="e"||St==="E")&&Mt>2?ge.text="1"+St+(_t>0?"+":x)+Mt:(ge.text=Je(Math.pow(10,Ye),ye,"","fakehover"),je==="D1"&&ye._id.charAt(0)==="y"&&(ge.dy-=ge.fontSize/6))}else if(ot==="D")ge.text=String(Math.round(Math.pow(10,p.mod(Ye,1)))),ge.fontSize*=.75;else throw"unrecognized dtick "+String(je);if(ye.dtick==="D1"){var Dt=String(ge.text).charAt(0);(Dt==="0"||Dt==="1")&&(ye._id.charAt(0)==="y"?ge.dx-=ge.fontSize/4:(ge.dy+=ge.fontSize/2,ge.dx+=(ye.range[1]>ye.range[0]?1:-1)*ge.fontSize*(Ye<0?.5:.25)))}}function Fe(ye,ge){var Re=ye._categories[Math.round(ge.x)];Re===void 0&&(Re=""),ge.text=String(Re)}function Ge(ye,ge,Re){var ze=Math.round(ge.x),Ue=ye._categories[ze]||[],je=Ue[1]===void 0?"":String(Ue[1]),Ye=Ue[0]===void 0?"":String(Ue[0]);Re?ge.text=Ye+" - "+je:(ge.text=je,ge.text2=Ye)}function Xe(ye,ge,Re,ze,Ue){Ue==="never"?Ue="":ye.showexponent==="all"&&Math.abs(ge.x/ye.dtick)<1e-6&&(Ue="hide"),ge.text=Je(ge.x,ye,Ue,ze)}function ut(ye,ge,Re,ze,Ue){if(ye.thetaunit==="radians"&&!Re){var je=ge.x/180;if(je===0)ge.text="0";else{var Ye=rt(je);if(Ye[1]>=100)ge.text=Je(p.deg2rad(ge.x),ye,Ue,ze);else{var et=ge.x<0;Ye[1]===1?Ye[0]===1?ge.text="\u03C0":ge.text=Ye[0]+"\u03C0":ge.text=["<sup>",Ye[0],"</sup>","\u2044","<sub>",Ye[1],"</sub>","\u03C0"].join(""),et&&(ge.text=x+ge.text)}}}else ge.text=Je(ge.x,ye,Ue,ze)}function rt(ye){function ge(et,ot){return Math.abs(et-ot)<=1e-6}function Re(et,ot){return ge(ot,0)?et:Re(ot,et%ot)}function ze(et){for(var ot=1;!ge(Math.round(et*ot)/ot,et);)ot*=10;return ot}var Ue=ze(ye),je=ye*Ue,Ye=Math.abs(Re(je,Ue));return[Math.round(je/Ye),Math.round(Ue/Ye)]}var dt=["f","p","n","\u03BC","m","","k","M","G","T"];function st(ye){return ye==="SI"||ye==="B"}function Ve(ye){return ye>14||ye<-15}function Je(ye,ge,Re,ze){var Ue=ye<0,je=ge._tickround,Ye=Re||ge.exponentformat||"B",et=ge._tickexponent,ot=Q.getTickFormat(ge),_t=ge.separatethousands;if(ze){var Mt={exponentformat:Ye,minexponent:ge.minexponent,dtick:ge.showexponent==="none"?ge.dtick:L(ye)&&Math.abs(ye)||1,range:ge.showexponent==="none"?ge.range.map(ge.r2d):[0,ye||1]};Ie(Mt),je=(Number(Mt._tickround)||0)+4,et=Mt._tickexponent,ge.hoverformat&&(ot=ge.hoverformat)}if(ot)return ge._numFormat(ot)(ye).replace(/-/g,x);var St=Math.pow(10,-je)/2;if(Ye==="none"&&(et=0),ye=Math.abs(ye),ye<St)ye="0",Ue=!1;else{if(ye+=St,et&&(ye*=Math.pow(10,-et),je+=et),je===0)ye=String(Math.floor(ye));else if(je<0){ye=String(Math.round(ye)),ye=ye.substr(0,ye.length+je);for(var Dt=je;Dt<0;Dt++)ye+="0"}else{ye=String(ye);var Ot=ye.indexOf(".")+1;Ot&&(ye=ye.substr(0,Ot+je).replace(/\.?0+$/,""))}ye=p.numSeparate(ye,ge._separators,_t)}if(et&&Ye!=="hide"){st(Ye)&&Ve(et)&&(Ye="power");var Ht;et<0?Ht=x+-et:Ye!=="power"?Ht="+"+et:Ht=String(et),Ye==="e"||Ye==="E"?ye+=Ye+Ht:Ye==="power"?ye+="\xD710<sup>"+Ht+"</sup>":Ye==="B"&&et===9?ye+="B":st(Ye)&&(ye+=dt[et/3+5])}return Ue?x+ye:ye}Q.getTickFormat=function(ye){var ge;function Re(ot){return typeof ot!="string"?ot:Number(ot.replace("M",""))*a}function ze(ot,_t){var Mt=["L","D"];if(typeof ot==typeof _t){if(typeof ot=="number")return ot-_t;var St=Mt.indexOf(ot.charAt(0)),Dt=Mt.indexOf(_t.charAt(0));return St===Dt?Number(ot.replace(/(L|D)/g,""))-Number(_t.replace(/(L|D)/g,"")):St-Dt}else return typeof ot=="number"?1:-1}function Ue(ot,_t,Mt){var St=Mt||function(Ht){return Ht},Dt=_t[0],Ot=_t[1];return(!Dt&&typeof Dt!="number"||St(Dt)<=St(ot))&&(!Ot&&typeof Ot!="number"||St(Ot)>=St(ot))}function je(ot,_t){var Mt=_t[0]===null,St=_t[1]===null,Dt=ze(ot,_t[0])>=0,Ot=ze(ot,_t[1])<=0;return(Mt||Dt)&&(St||Ot)}var Ye,et;if(ye.tickformatstops&&ye.tickformatstops.length>0)switch(ye.type){case"date":case"linear":{for(ge=0;ge<ye.tickformatstops.length;ge++)if(et=ye.tickformatstops[ge],et.enabled&&Ue(ye.dtick,et.dtickrange,Re)){Ye=et;break}break}case"log":{for(ge=0;ge<ye.tickformatstops.length;ge++)if(et=ye.tickformatstops[ge],et.enabled&&je(ye.dtick,et.dtickrange)){Ye=et;break}break}default:}return Ye?Ye.value:ye.tickformat},Q.getSubplots=function(ye,ge){var Re=ye._fullLayout._subplots,ze=Re.cartesian.concat(Re.gl2d||[]),Ue=ge?Q.findSubplotsWithAxis(ze,ge):ze;return Ue.sort(function(je,Ye){var et=je.substr(1).split("y"),ot=Ye.substr(1).split("y");return et[0]===ot[0]?+et[1]-+ot[1]:+et[0]-+ot[0]}),Ue},Q.findSubplotsWithAxis=function(ye,ge){for(var Re=new RegExp(ge._id.charAt(0)==="x"?"^"+ge._id+"y":ge._id+"$"),ze=[],Ue=0;Ue<ye.length;Ue++){var je=ye[Ue];Re.test(je)&&ze.push(je)}return ze},Q.makeClipPaths=function(ye){var ge=ye._fullLayout;if(!ge._hasOnlyLargeSploms){var Re={_offset:0,_length:ge.width,_id:""},ze={_offset:0,_length:ge.height,_id:""},Ue=Q.list(ye,"x",!0),je=Q.list(ye,"y",!0),Ye=[],et,ot;for(et=0;et<Ue.length;et++)for(Ye.push({x:Ue[et],y:ze}),ot=0;ot<je.length;ot++)et===0&&Ye.push({x:Re,y:je[ot]}),Ye.push({x:Ue[et],y:je[ot]});var _t=ge._clips.selectAll(".axesclip").data(Ye,function(Mt){return Mt.x._id+Mt.y._id});_t.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Mt){return"clip"+ge._uid+Mt.x._id+Mt.y._id}).append("rect"),_t.exit().remove(),_t.each(function(Mt){R.select(this).select("rect").attr({x:Mt.x._offset||0,y:Mt.y._offset||0,width:Mt.x._length||1,height:Mt.y._length||1})})}},Q.draw=function(ye,ge,Re){var ze=ye._fullLayout;ge==="redraw"&&ze._paper.selectAll("g.subplot").each(function(je){var Ye=je[0],et=ze._plots[Ye];if(et){var ot=et.xaxis,_t=et.yaxis;et.xaxislayer.selectAll("."+ot._id+"tick").remove(),et.yaxislayer.selectAll("."+_t._id+"tick").remove(),et.xaxislayer.selectAll("."+ot._id+"tick2").remove(),et.yaxislayer.selectAll("."+_t._id+"tick2").remove(),et.xaxislayer.selectAll("."+ot._id+"divider").remove(),et.yaxislayer.selectAll("."+_t._id+"divider").remove(),et.gridlayer&&et.gridlayer.selectAll("path").remove(),et.zerolinelayer&&et.zerolinelayer.selectAll("path").remove(),ze._infolayer.select(".g-"+ot._id+"title").remove(),ze._infolayer.select(".g-"+_t._id+"title").remove()}});var Ue=!ge||ge==="redraw"?Q.listIds(ye):ge;return p.syncOrAsync(Ue.map(function(je){return function(){if(!!je){var Ye=Q.getFromId(ye,je),et=Q.drawOne(ye,Ye,Re);return Ye._r=Ye.range.slice(),Ye._rl=p.simpleMap(Ye._r,Ye.r2l),et}}}))},Q.drawOne=function(ye,ge,Re){Re=Re||{};var ze,Ue,je;ge.setScale();var Ye=ye._fullLayout,et=ge._id,ot=et.charAt(0),_t=Q.counterLetter(et),Mt=Ye._plots[ge._mainSubplot];if(!Mt)return;var St=Mt[ot+"axislayer"],Dt=ge._mainLinePosition,Ot=ge._mainMirrorPosition,Ht=ge._vals=Q.calcTicks(ge),er=[ge.mirror,Dt,Ot].join("_");for(ze=0;ze<Ht.length;ze++)Ht[ze].axInfo=er;ge._selections={},ge._tickAngles&&(ge._prevTickAngles=ge._tickAngles),ge._tickAngles={},ge._depth=null;var wt={};function Et(Pr){var Or=et+(Pr||"tick");return wt[Or]||(wt[Or]=pe(ge,Or)),wt[Or]}if(!!ge.visible){var zt=Q.makeTransTickFn(ge),Ut=Q.makeTransTickLabelFn(ge),pt,Ct,Lt=ge.ticks==="inside",At=ge.ticks==="outside";if(ge.tickson==="boundaries"){var Vt=ke(ge,Ht);Ct=Q.clipEnds(ge,Vt),pt=Lt?Ct:Vt}else Ct=Q.clipEnds(ge,Ht),pt=Lt&&ge.ticklabelmode!=="period"?Ct:Ht;var Qt=ge._gridVals=Ct,$t=Be(ge,Ht);if(!Ye._hasOnlyLargeSploms){var Pt=ge._subplotsWith,rr={};for(ze=0;ze<Pt.length;ze++){Ue=Pt[ze],je=Ye._plots[Ue];var ir=je[_t+"axis"],tr=ir._mainAxis._id;if(!rr[tr]){rr[tr]=1;var sr=ot==="x"?"M0,"+ir._offset+"v"+ir._length:"M"+ir._offset+",0h"+ir._length;Q.drawGrid(ye,ge,{vals:Qt,counterAxis:ir,layer:je.gridlayer.select("."+et),path:sr,transFn:zt}),Q.drawZeroLine(ye,ge,{counterAxis:ir,layer:je.zerolinelayer,path:sr,transFn:zt})}}}var cr=Q.getTickSigns(ge),vr=[];if(ge.ticks){var mr=Q.makeTickPath(ge,Dt,cr[2]),_r,wr;ge._anchorAxis&&ge.mirror&&ge.mirror!==!0?(_r=Q.makeTickPath(ge,Ot,cr[3]),wr=mr+_r):(_r="",wr=mr);var br;if(ge.showdividers&&At&&ge.tickson==="boundaries"){var Cr={};for(ze=0;ze<$t.length;ze++)Cr[$t[ze].x]=1;br=function(Pr){return Cr[Pr.x]?_r:wr}}else br=wr;Q.drawTicks(ye,ge,{vals:pt,layer:St,path:br,transFn:zt}),ge.mirror==="allticks"&&(vr=Object.keys(ge._linepositions||{}))}for(ze=0;ze<vr.length;ze++){Ue=vr[ze],je=Ye._plots[Ue];var Er=ge._linepositions[Ue]||[],jr=Q.makeTickPath(ge,Er[0],cr[0])+Q.makeTickPath(ge,Er[1],cr[1]);Q.drawTicks(ye,ge,{vals:pt,layer:je[ot+"axislayer"],path:jr,transFn:zt})}var zr=[];if(zr.push(function(){return Q.drawLabels(ye,ge,{vals:Ht,layer:St,plotinfo:je,transFn:Ut,labelFns:Q.makeLabelFns(ge,Dt)})}),ge.type==="multicategory"){var an={x:2,y:10}[ot];zr.push(function(){var Pr={x:"height",y:"width"}[ot],Or=Et()[Pr]+an+(ge._tickAngles[et+"tick"]?ge.tickfont.size*V:0);return Q.drawLabels(ye,ge,{vals:Le(ge,Ht),layer:St,cls:et+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:zt,labelFns:Q.makeLabelFns(ge,Dt+Or*cr[4])})}),zr.push(function(){return ge._depth=cr[4]*(Et("tick2")[ge.side]-Dt),He(ye,ge,{vals:$t,layer:St,path:Q.makeTickPath(ge,Dt,cr[4],ge._depth),transFn:zt})})}else ge.title.hasOwnProperty("standoff")&&zr.push(function(){ge._depth=cr[4]*(Et()[ge.side]-Dt)});var cn=D.getComponentMethod("rangeslider","isVisible")(ge);return zr.push(function(){var Pr=ge.side.charAt(0),Or=q[ge.side].charAt(0),qr=Q.getPxPosition(ye,ge),Kr=At?ge.ticklen:0,Sr,Tr,Br,Qr;if((ge.automargin||cn)&&(ge.type==="multicategory"?Sr=Et("tick2"):(Sr=Et(),ot==="x"&&Pr==="b"&&(ge._depth=Math.max(Sr.width>0?Sr.bottom-qr:0,Kr)))),ge.automargin){Tr={x:0,y:0,r:0,l:0,t:0,b:0};var en=[0,1];if(ot==="x"){if(Pr==="b"?Tr[Pr]=ge._depth:(Tr[Pr]=ge._depth=Math.max(Sr.width>0?qr-Sr.top:0,Kr),en.reverse()),Sr.width>0){var hn=Sr.right-(ge._offset+ge._length);hn>0&&(Tr.xr=1,Tr.r=hn);var tn=ge._offset-Sr.left;tn>0&&(Tr.xl=0,Tr.l=tn)}}else if(Pr==="l"?Tr[Pr]=ge._depth=Math.max(Sr.height>0?qr-Sr.left:0,Kr):(Tr[Pr]=ge._depth=Math.max(Sr.height>0?Sr.right-qr:0,Kr),en.reverse()),Sr.height>0){var mn=Sr.bottom-(ge._offset+ge._length);mn>0&&(Tr.yb=0,Tr.b=mn);var Sn=ge._offset-Sr.top;Sn>0&&(Tr.yt=1,Tr.t=Sn)}Tr[_t]=ge.anchor==="free"?ge.position:ge._anchorAxis.domain[en[0]],ge.title.text!==Ye._dfltTitle[ot]&&(Tr[Pr]+=Ne(ge)+(ge.title.standoff||0)),ge.mirror&&ge.anchor!=="free"&&(Br={x:0,y:0,r:0,l:0,t:0,b:0},Br[Or]=ge.linewidth,ge.mirror&&ge.mirror!==!0&&(Br[Or]+=Kr),ge.mirror===!0||ge.mirror==="ticks"?Br[_t]=ge._anchorAxis.domain[en[1]]:(ge.mirror==="all"||ge.mirror==="allticks")&&(Br[_t]=[ge._counterDomainMin,ge._counterDomainMax][en[1]]))}cn&&(Qr=D.getComponentMethod("rangeslider","autoMarginOpts")(ye,ge)),N.autoMargin(ye,kt(ge),Tr),N.autoMargin(ye,xt(ge),Br),N.autoMargin(ye,Bt(ge),Qr)}),!Re.skipTitle&&!(cn&&ge.side==="bottom")&&zr.push(function(){return qe(ye,ge)}),p.syncOrAsync(zr)}};function ke(ye,ge){var Re=[],ze,Ue=function(je,Ye){var et=je.xbnd[Ye];et!==null&&Re.push(p.extendFlat({},je,{x:et}))};if(ge.length){for(ze=0;ze<ge.length;ze++)Ue(ge[ze],0);Ue(ge[ze-1],1)}return Re}function Le(ye,ge){for(var Re=[],ze={},Ue=0;Ue<ge.length;Ue++){var je=ge[Ue];ze[je.text2]?ze[je.text2].push(je.x):ze[je.text2]=[je.x]}for(var Ye in ze)Re.push(Ke(ye,p.interp(ze[Ye],.5),Ye));return Re}function Be(ye,ge){var Re=[],ze,Ue,je=ge.length&&ge[ge.length-1].x<ge[0].x,Ye=function(ot,_t){var Mt=ot.xbnd[_t];Mt!==null&&Re.push(p.extendFlat({},ot,{x:Mt}))};if(ye.showdividers&&ge.length){for(ze=0;ze<ge.length;ze++){var et=ge[ze];et.text2!==Ue&&Ye(et,je?1:0),Ue=et.text2}Ye(ge[ze-1],je?0:1)}return Re}function pe(ye,ge){var Re,ze,Ue,je;return ye._selections[ge].size()?(Re=1/0,ze=-1/0,Ue=1/0,je=-1/0,ye._selections[ge].each(function(){var Ye=ht(this),et=u.bBox(Ye.node().parentNode);Re=Math.min(Re,et.top),ze=Math.max(ze,et.bottom),Ue=Math.min(Ue,et.left),je=Math.max(je,et.right)})):(Re=0,ze=0,Ue=0,je=0),{top:Re,bottom:ze,left:Ue,right:je,height:ze-Re,width:je-Ue}}Q.getTickSigns=function(ye){var ge=ye._id.charAt(0),Re={x:"top",y:"right"}[ge],ze=ye.side===Re?1:-1,Ue=[-1,1,ze,-ze];return ye.ticks!=="inside"==(ge==="x")&&(Ue=Ue.map(function(je){return-je})),ye.side&&Ue.push({l:-1,t:-1,r:1,b:1}[ye.side.charAt(0)]),Ue},Q.makeTransTickFn=function(ye){return ye._id.charAt(0)==="x"?function(ge){return w(ye._offset+ye.l2p(ge.x),0)}:function(ge){return w(0,ye._offset+ye.l2p(ge.x))}},Q.makeTransTickLabelFn=function(ye){var ge=Ce(ye),Re=ge[0],ze=ge[1];return ye._id.charAt(0)==="x"?function(Ue){return w(Re+ye._offset+ye.l2p(Ae(Ue)),ze)}:function(Ue){return w(ze,Re+ye._offset+ye.l2p(Ae(Ue)))}};function Ae(ye){return ye.periodX!==void 0?ye.periodX:ye.x}function Ce(ye){var ge=ye.ticklabelposition||"",Re=function(Ot){return ge.indexOf(Ot)!==-1},ze=Re("top"),Ue=Re("left"),je=Re("right"),Ye=Re("bottom"),et=Re("inside"),ot=Ye||Ue||ze||je;if(!ot&&!et)return[0,0];var _t=ye.side,Mt=ot?(ye.tickwidth||0)/2:0,St=ee,Dt=ye.tickfont?ye.tickfont.size:12;return(Ye||ze)&&(Mt+=Dt*G,St+=(ye.linewidth||0)/2),(Ue||je)&&(Mt+=(ye.linewidth||0)/2,St+=ee),et&&_t==="top"&&(St-=Dt*(1-G)),(Ue||ze)&&(Mt=-Mt),(_t==="bottom"||_t==="right")&&(St=-St),[ot?Mt:0,et?St:0]}Q.makeTickPath=function(ye,ge,Re,ze){ze=ze!==void 0?ze:ye.ticklen;var Ue=ye._id.charAt(0),je=(ye.linewidth||1)/2;return Ue==="x"?"M0,"+(ge+je*Re)+"v"+ze*Re:"M"+(ge+je*Re)+",0h"+ze*Re},Q.makeLabelFns=function(ye,ge,Re){var ze=ye.ticklabelposition||"",Ue=function(rr){return ze.indexOf(rr)!==-1},je=Ue("top"),Ye=Ue("left"),et=Ue("right"),ot=Ue("bottom"),_t=ot||Ye||je||et,Mt=Ue("inside"),St=ze==="inside"&&ye.ticks==="inside"||!Mt&&ye.ticks==="outside"&&ye.tickson!=="boundaries",Dt=0,Ot=0,Ht=St?ye.ticklen:0;if(Mt?Ht*=-1:_t&&(Ht=0),St&&(Dt+=Ht,Re)){var er=p.deg2rad(Re);Dt=Ht*Math.cos(er)+1,Ot=Ht*Math.sin(er)}ye.showticklabels&&(St||ye.showline)&&(Dt+=.2*ye.tickfont.size),Dt+=(ye.linewidth||1)/2*(Mt?-1:1);var wt={labelStandoff:Dt,labelShift:Ot},Et,zt,Ut,pt,Ct=0,Lt=ye.side,At=ye._id.charAt(0),Vt=ye.tickangle,Qt;if(At==="x")Qt=!Mt&&Lt==="bottom"||Mt&&Lt==="top",pt=Qt?1:-1,Mt&&(pt*=-1),Et=Ot*pt,zt=ge+Dt*pt,Ut=Qt?1:-.2,Math.abs(Vt)===90&&(Mt?Ut+=I:Vt===-90&&Lt==="bottom"?Ut=G:Vt===90&&Lt==="top"?Ut=I:Ut=.5,Ct=I/2*(Vt/90)),wt.xFn=function(rr){return rr.dx+Et+Ct*rr.fontSize},wt.yFn=function(rr){return rr.dy+zt+rr.fontSize*Ut},wt.anchorFn=function(rr,ir){if(_t){if(Ye)return"end";if(et)return"start"}return!L(ir)||ir===0||ir===180?"middle":ir*pt<0!==Mt?"end":"start"},wt.heightFn=function(rr,ir,tr){return ir<-60||ir>60?-.5*tr:ye.side==="top"!==Mt?-tr:0};else if(At==="y"){if(Qt=!Mt&&Lt==="left"||Mt&&Lt==="right",pt=Qt?1:-1,Mt&&(pt*=-1),Et=Dt,zt=Ot*pt,Ut=0,!Mt&&Math.abs(Vt)===90&&(Vt===-90&&Lt==="left"||Vt===90&&Lt==="right"?Ut=G:Ut=.5),Mt){var $t=L(Vt)?+Vt:0;if($t!==0){var Pt=p.deg2rad($t);Ct=Math.abs(Math.sin(Pt))*G*pt,Ut=0}}wt.xFn=function(rr){return rr.dx+ge-(Et+rr.fontSize*Ut)*pt+Ct*rr.fontSize},wt.yFn=function(rr){return rr.dy+zt+rr.fontSize*I},wt.anchorFn=function(rr,ir){return L(ir)&&Math.abs(ir)===90?"middle":Qt?"end":"start"},wt.heightFn=function(rr,ir,tr){return ye.side==="right"&&(ir*=-1),ir<-30?-tr:ir<30?-.5*tr:0}}return wt};function Se(ye){return[ye.text,ye.x,ye.axInfo,ye.font,ye.fontSize,ye.fontColor].join("_")}Q.drawTicks=function(ye,ge,Re){Re=Re||{};var ze=ge._id+"tick",Ue=Re.vals;ge.ticklabelmode==="period"&&(Ue=Ue.slice(),Ue.shift());var je=Re.layer.selectAll("path."+ze).data(ge.ticks?Ue:[],Se);je.exit().remove(),je.enter().append("path").classed(ze,1).classed("ticks",1).classed("crisp",Re.crisp!==!1).call(e.stroke,ge.tickcolor).style("stroke-width",u.crispRound(ye,ge.tickwidth,1)+"px").attr("d",Re.path).style("display",null),Ft(ge,[S]),je.attr("transform",Re.transFn)},Q.drawGrid=function(ye,ge,Re){Re=Re||{};var ze=ge._id+"grid",Ue=Re.vals,je=Re.counterAxis;if(ge.showgrid===!1)Ue=[];else if(je&&Q.shouldShowZeroLine(ye,ge,je))for(var Ye=ge.tickmode==="array",et=0;et<Ue.length;et++){var ot=Ue[et].x;if(Ye?!ot:Math.abs(ot)<ge.dtick/100)if(Ue=Ue.slice(0,et).concat(Ue.slice(et+1)),Ye)et--;else break}var _t=Re.layer.selectAll("path."+ze).data(Ue,Se);_t.exit().remove(),_t.enter().append("path").classed(ze,1).classed("crisp",Re.crisp!==!1),ge._gw=u.crispRound(ye,ge.gridwidth,1),_t.attr("transform",Re.transFn).attr("d",Re.path).call(e.stroke,ge.gridcolor||"#ddd").style("stroke-width",ge._gw+"px").style("display",null),Ft(ge,[P]),typeof Re.path=="function"&&_t.attr("d",Re.path)},Q.drawZeroLine=function(ye,ge,Re){Re=Re||Re;var ze=ge._id+"zl",Ue=Q.shouldShowZeroLine(ye,ge,Re.counterAxis),je=Re.layer.selectAll("path."+ze).data(Ue?[{x:0,id:ge._id}]:[]);je.exit().remove(),je.enter().append("path").classed(ze,1).classed("zl",1).classed("crisp",Re.crisp!==!1).each(function(){Re.layer.selectAll("path").sort(function(Ye,et){return Z(Ye.id,et.id)})}),je.attr("transform",Re.transFn).attr("d",Re.path).call(e.stroke,ge.zerolinecolor||e.defaultLine).style("stroke-width",u.crispRound(ye,ge.zerolinewidth,ge._gw||1)+"px").style("display",null),Ft(ge,[E])},Q.drawLabels=function(ye,ge,Re){Re=Re||{};var ze=ye._fullLayout,Ue=ge._id,je=Ue.charAt(0),Ye=Re.cls||Ue+"tick",et=Re.vals,ot=Re.labelFns,_t=Re.secondary?0:ge.tickangle,Mt=(ge._prevTickAngles||{})[Ye],St=Re.layer.selectAll("g."+Ye).data(ge.showticklabels?et:[],Se),Dt=[];St.enter().append("g").classed(Ye,1).append("text").attr("text-anchor","middle").each(function(pt){var Ct=R.select(this),Lt=ye._promises.length;Ct.call(k.positionText,ot.xFn(pt),ot.yFn(pt)).call(u.font,pt.font,pt.fontSize,pt.fontColor).text(pt.text).call(k.convertToTspans,ye),ye._promises[Lt]?Dt.push(ye._promises.pop().then(function(){Ot(Ct,_t)})):Ot(Ct,_t)}),Ft(ge,[C]),St.exit().remove(),Re.repositionOnUpdate&&St.each(function(pt){R.select(this).select("text").call(k.positionText,ot.xFn(pt),ot.yFn(pt))});function Ot(pt,Ct){pt.each(function(Lt){var At=R.select(this),Vt=At.select(".text-math-group"),Qt=ot.anchorFn(Lt,Ct),$t=Re.transFn.call(At.node(),Lt)+(L(Ct)&&+Ct!=0?" rotate("+Ct+","+ot.xFn(Lt)+","+(ot.yFn(Lt)-Lt.fontSize/2)+")":""),Pt=k.lineCount(At),rr=V*Lt.fontSize,ir=ot.heightFn(Lt,L(Ct)?+Ct:0,(Pt-1)*rr);if(ir&&($t+=w(0,ir)),Vt.empty()){var tr=At.select("text");tr.attr({transform:$t,"text-anchor":Qt}),tr.style("opacity",1),ge._adjustTickLabelsOverflow&&ge._adjustTickLabelsOverflow()}else{var sr=u.bBox(Vt.node()).width,cr=sr*{end:-.5,start:.5}[Qt];Vt.attr("transform",$t+w(cr,0))}})}ge._adjustTickLabelsOverflow=function(){var pt=ge.ticklabeloverflow;if(!(!pt||pt==="allow")){var Ct=pt.indexOf("hide")!==-1,Lt=ge._id.charAt(0)==="x",At=0,Vt=Lt?ye._fullLayout.width:ye._fullLayout.height;if(pt.indexOf("domain")!==-1){var Qt=p.simpleMap(ge.range,ge.r2l);At=ge.l2p(Qt[0])+ge._offset,Vt=ge.l2p(Qt[1])+ge._offset}var $t=Math.min(At,Vt),Pt=Math.max(At,Vt),rr=ge.side,ir=1/0,tr=-1/0;St.each(function(mr){var _r=R.select(this),wr=_r.select(".text-math-group");if(wr.empty()){var br=u.bBox(_r.node()),Cr=0;Lt?(br.right>Pt||br.left<$t)&&(Cr=1):(br.bottom>Pt||br.top+(ge.tickangle?0:mr.fontSize/4)<$t)&&(Cr=1);var Er=_r.select("text");Cr?Ct&&Er.style("opacity",0):(Er.style("opacity",1),rr==="bottom"||rr==="right"?ir=Math.min(ir,Lt?br.top:br.left):ir=-1/0,rr==="top"||rr==="left"?tr=Math.max(tr,Lt?br.bottom:br.right):tr=1/0)}});for(var sr in ze._plots){var cr=ze._plots[sr];if(!(ge._id!==cr.xaxis._id&&ge._id!==cr.yaxis._id)){var vr=Lt?cr.yaxis:cr.xaxis;vr&&(vr["_visibleLabelMin_"+ge._id]=ir,vr["_visibleLabelMax_"+ge._id]=tr)}}}},ge._hideCounterAxisInsideTickLabels=function(pt){var Ct=ge._id.charAt(0)==="x",Lt=[];for(var At in ze._plots){var Vt=ze._plots[At];ge._id!==Vt.xaxis._id&&ge._id!==Vt.yaxis._id||Lt.push(Ct?Vt.yaxis:Vt.xaxis)}Lt.forEach(function(Qt,$t){Qt&&Yt(Qt)&&(pt||[E,P,S,C]).forEach(function(Pt){var rr=Pt.K==="tick"&&Pt.L==="text"&&ge.ticklabelmode==="period",ir=ze._plots[ge._mainSubplot],tr;Pt.K===E.K?tr=ir.zerolinelayer.selectAll("."+ge._id+"zl"):Pt.K===P.K?tr=ir.gridlayer.selectAll("."+ge._id):tr=ir[ge._id.charAt(0)+"axislayer"],tr.each(function(){var sr=R.select(this);Pt.L&&(sr=sr.selectAll(Pt.L)),sr.each(function(cr){var vr=ge.l2p(rr?Ae(cr):cr.x)+ge._offset,mr=R.select(this);vr<ge["_visibleLabelMax_"+Qt._id]&&vr>ge["_visibleLabelMin_"+Qt._id]?mr.style("display","none"):Pt.K==="tick"&&!$t&&mr.style("display",null)})})})})},Ot(St,Mt+1?Mt:_t);function Ht(){return Dt.length&&Promise.all(Dt)}var er=null;function wt(){if(Ot(St,_t),et.length&&je==="x"&&!L(_t)&&(ge.type!=="log"||String(ge.dtick).charAt(0)!=="D")){er=0;var pt=0,Ct=[],Lt;if(St.each(function(br){pt=Math.max(pt,br.fontSize);var Cr=ge.l2p(br.x),Er=ht(this),jr=u.bBox(Er.node());Ct.push({top:0,bottom:10,height:10,left:Cr-jr.width/2,right:Cr+jr.width/2+2,width:jr.width+2})}),(ge.tickson==="boundaries"||ge.showdividers)&&!Re.secondary){var At=2;for(ge.ticks&&(At+=ge.tickwidth/2),Lt=0;Lt<Ct.length;Lt++){var Vt=et[Lt].xbnd,Qt=Ct[Lt];if(Vt[0]!==null&&Qt.left-ge.l2p(Vt[0])<At||Vt[1]!==null&&ge.l2p(Vt[1])-Qt.right<At){er=90;break}}}else{var $t=et.length,Pt=Math.abs((et[$t-1].x-et[0].x)*ge._m)/($t-1),rr=ge.ticklabelposition||"",ir=function(br){return rr.indexOf(br)!==-1},tr=ir("top"),sr=ir("left"),cr=ir("right"),vr=ir("bottom"),mr=vr||sr||tr||cr,_r=mr?(ge.tickwidth||0)+2*ee:0,wr=Pt<pt*2.5||ge.type==="multicategory"||ge._name==="realaxis";for(Lt=0;Lt<Ct.length-1;Lt++)if(p.bBoxIntersect(Ct[Lt],Ct[Lt+1],_r)){er=wr?90:30;break}}er&&Ot(St,er)}}ge._selections&&(ge._selections[Ye]=St);var Et=[Ht];ge.automargin&&ze._redrawFromAutoMarginCount&&Mt===90?(er=90,Et.push(function(){Ot(St,Mt)})):Et.push(wt),ge._tickAngles&&Et.push(function(){ge._tickAngles[Ye]=er===null?L(_t)?_t:0:er});var zt=ge._anchorAxis;zt&&zt.autorange&&Yt(ge)&&!B(ze,ge._id)&&(ze._insideTickLabelsAutorange||(ze._insideTickLabelsAutorange={}),ze._insideTickLabelsAutorange[zt._name+".autorange"]=zt.autorange,Et.push(function(){St.each(function(Ct,Lt){var At=ht(this),Vt=At.select(".text-math-group");Vt.empty()&&(ge._vals[Lt].bb=u.bBox(At.node()))})}));var Ut=p.syncOrAsync(Et);return Ut&&Ut.then&&ye._promises.push(Ut),Ut};function He(ye,ge,Re){var ze=ge._id+"divider",Ue=Re.vals,je=Re.layer.selectAll("path."+ze).data(Ue,Se);je.exit().remove(),je.enter().insert("path",":first-child").classed(ze,1).classed("crisp",1).call(e.stroke,ge.dividercolor).style("stroke-width",u.crispRound(ye,ge.dividerwidth,1)+"px"),je.attr("transform",Re.transFn).attr("d",Re.path)}Q.getPxPosition=function(ye,ge){var Re=ye._fullLayout._size,ze=ge._id.charAt(0),Ue=ge.side,je;if(ge.anchor!=="free"?je=ge._anchorAxis:ze==="x"?je={_offset:Re.t+(1-(ge.position||0))*Re.h,_length:0}:ze==="y"&&(je={_offset:Re.l+(ge.position||0)*Re.w,_length:0}),Ue==="top"||Ue==="left")return je._offset;if(Ue==="bottom"||Ue==="right")return je._offset+je._length};function Ne(ye){var ge=ye.title.font.size,Re=(ye.title.text.match(k.BR_TAG_ALL)||[]).length;return ye.title.hasOwnProperty("standoff")?Re?ge*(G+Re*V):ge*G:Re?ge*(Re+1)*V:ge}function qe(ye,ge){var Re=ye._fullLayout,ze=ge._id,Ue=ze.charAt(0),je=ge.title.font.size,Ye;if(ge.title.hasOwnProperty("standoff"))Ye=ge._depth+ge.title.standoff+Ne(ge);else{var et=Yt(ge);if(ge.type==="multicategory")Ye=ge._depth;else{var ot=1.5*je;et&&(ot=.5*je,ge.ticks==="outside"&&(ot+=ge.ticklen)),Ye=10+ot+(ge.linewidth?ge.linewidth-1:0)}et||(Ue==="x"?Ye+=ge.side==="top"?je*(ge.showticklabels?1:0):je*(ge.showticklabels?1.5:.5):Ye+=ge.side==="right"?je*(ge.showticklabels?1:.5):je*(ge.showticklabels?.5:0))}var _t=Q.getPxPosition(ye,ge),Mt,St,Dt;Ue==="x"?(St=ge._offset+ge._length/2,Dt=ge.side==="top"?_t-Ye:_t+Ye):(Dt=ge._offset+ge._length/2,St=ge.side==="right"?_t+Ye:_t-Ye,Mt={rotate:"-90",offset:0});var Ot;if(ge.type!=="multicategory"){var Ht=ge._selections[ge._id+"tick"];if(Ot={selection:Ht,side:ge.side},Ht&&Ht.node()&&Ht.node().parentNode){var er=u.getTranslate(Ht.node().parentNode);Ot.offsetLeft=er.x,Ot.offsetTop=er.y}ge.title.hasOwnProperty("standoff")&&(Ot.pad=0)}return d.draw(ye,ze+"title",{propContainer:ge,propName:ge._name+".title.text",placeholder:Re._dfltTitle[Ue],avoid:Ot,transform:Mt,attributes:{x:St,y:Dt,"text-anchor":"middle"}})}Q.shouldShowZeroLine=function(ye,ge,Re){var ze=p.simpleMap(ge.range,ge.r2l);return ze[0]*ze[1]<=0&&ge.zeroline&&(ge.type==="linear"||ge.type==="-")&&!(ge.rangebreaks&&ge.maskBreaks(0)===A)&&(at(ge,0)||!nt(ye,ge,Re,ze)||Ze(ye,ge))},Q.clipEnds=function(ye,ge){return ge.filter(function(Re){return at(ye,Re.x)})};function at(ye,ge){var Re=ye.l2p(ge);return Re>1&&Re<ye._length-1}function nt(ye,ge,Re,ze){var Ue=Re._mainAxis;if(!Ue)return;var je=ye._fullLayout,Ye=ge._id.charAt(0),et=Q.counterLetter(ge._id),ot=ge._offset+(Math.abs(ze[0])<Math.abs(ze[1])==(Ye==="x")?0:ge._length);function _t(Ht){if(!Ht.showline||!Ht.linewidth)return!1;var er=Math.max((Ht.linewidth+ge.zerolinewidth)/2,1);function wt(Ut){return typeof Ut=="number"&&Math.abs(Ut-ot)<er}if(wt(Ht._mainLinePosition)||wt(Ht._mainMirrorPosition))return!0;var Et=Ht._linepositions||{};for(var zt in Et)if(wt(Et[zt][0])||wt(Et[zt][1]))return!0}var Mt=je._plots[Re._mainSubplot];if(!(Mt.mainplotinfo||Mt).overlays.length)return _t(Re,ot);for(var St=Q.list(ye,et),Dt=0;Dt<St.length;Dt++){var Ot=St[Dt];if(Ot._mainAxis===Ue&&_t(Ot,ot))return!0}}function Ze(ye,ge){for(var Re=ye._fullData,ze=ge._mainSubplot,Ue=ge._id.charAt(0),je=0;je<Re.length;je++){var Ye=Re[je];if(Ye.visible===!0&&Ye.xaxis+Ye.yaxis===ze&&(D.traceIs(Ye,"bar-like")&&Ye.orientation==={x:"h",y:"v"}[Ue]||Ye.fill&&Ye.fill.charAt(Ye.fill.length-1)===Ue))return!0}return!1}function ht(ye){var ge=R.select(ye),Re=ge.select(".text-math-group");return Re.empty()?ge.select("text"):Re}Q.allowAutoMargin=function(ye){for(var ge=Q.list(ye,"",!0),Re=0;Re<ge.length;Re++){var ze=ge[Re];ze.automargin&&(N.allowAutoMargin(ye,kt(ze)),ze.mirror&&N.allowAutoMargin(ye,xt(ze))),D.getComponentMethod("rangeslider","isVisible")(ze)&&N.allowAutoMargin(ye,Bt(ze))}};function kt(ye){return ye._id+".automargin"}function xt(ye){return kt(ye)+".mirror"}function Bt(ye){return ye._id+".rangeslider"}Q.swap=function(ye,ge){for(var Re=Zt(ye,ge),ze=0;ze<Re.length;ze++)Rt(ye,Re[ze].x,Re[ze].y)};function Zt(ye,ge){var Re=[],ze,Ue;for(ze=0;ze<ge.length;ze++){var je=[],Ye=ye._fullData[ge[ze]].xaxis,et=ye._fullData[ge[ze]].yaxis;if(!(!Ye||!et)){for(Ue=0;Ue<Re.length;Ue++)(Re[Ue].x.indexOf(Ye)!==-1||Re[Ue].y.indexOf(et)!==-1)&&je.push(Ue);if(!je.length){Re.push({x:[Ye],y:[et]});continue}var ot=Re[je[0]],_t;if(je.length>1)for(Ue=1;Ue<je.length;Ue++)_t=Re[je[Ue]],Gt(ot.x,_t.x),Gt(ot.y,_t.y);Gt(ot.x,[Ye]),Gt(ot.y,[et])}}return Re}function Gt(ye,ge){for(var Re=0;Re<ge.length;Re++)ye.indexOf(ge[Re])===-1&&ye.push(ge[Re])}function Rt(ye,ge,Re){var ze=[],Ue=[],je=ye.layout,Ye,et;for(Ye=0;Ye<ge.length;Ye++)ze.push(Q.getFromId(ye,ge[Ye]));for(Ye=0;Ye<Re.length;Ye++)Ue.push(Q.getFromId(ye,Re[Ye]));var ot=Object.keys(s),_t=["anchor","domain","overlaying","position","side","tickangle","editType"],Mt=["linear","log"];for(Ye=0;Ye<ot.length;Ye++){var St=ot[Ye],Dt=ze[0][St],Ot=Ue[0][St],Ht=!0,er=!1,wt=!1;if(!(St.charAt(0)==="_"||typeof Dt=="function"||_t.indexOf(St)!==-1)){for(et=1;et<ze.length&&Ht;et++){var Et=ze[et][St];St==="type"&&Mt.indexOf(Dt)!==-1&&Mt.indexOf(Et)!==-1&&Dt!==Et?er=!0:Et!==Dt&&(Ht=!1)}for(et=1;et<Ue.length&&Ht;et++){var zt=Ue[et][St];St==="type"&&Mt.indexOf(Ot)!==-1&&Mt.indexOf(zt)!==-1&&Ot!==zt?wt=!0:Ue[et][St]!==Ot&&(Ht=!1)}Ht&&(er&&(je[ze[0]._name].type="linear"),wt&&(je[Ue[0]._name].type="linear"),Wt(je,St,ze,Ue,ye._fullLayout._dfltTitle))}}for(Ye=0;Ye<ye._fullLayout.annotations.length;Ye++){var Ut=ye._fullLayout.annotations[Ye];ge.indexOf(Ut.xref)!==-1&&Re.indexOf(Ut.yref)!==-1&&p.swapAttrs(je.annotations[Ye],["?"])}}function Wt(ye,ge,Re,ze,Ue){var je=p.nestedProperty,Ye=je(ye[Re[0]._name],ge).get(),et=je(ye[ze[0]._name],ge).get(),ot;for(ge==="title"&&(Ye&&Ye.text===Ue.x&&(Ye.text=Ue.y),et&&et.text===Ue.y&&(et.text=Ue.x)),ot=0;ot<Re.length;ot++)je(ye,Re[ot]._name+"."+ge).set(et);for(ot=0;ot<ze.length;ot++)je(ye,ze[ot]._name+"."+ge).set(Ye)}function It(ye){return ye._id==="angularaxis"}function vt(ye,ge){for(var Re=ge._rangebreaks.length,ze=0;ze<Re;ze++){var Ue=ge._rangebreaks[ze];if(ye>=Ue.min&&ye<Ue.max)return Ue.max}return ye}function Yt(ye){return(ye.ticklabelposition||"").indexOf("inside")!==-1}function Ft(ye,ge){Yt(ye._anchorAxis||{})&&ye._hideCounterAxisInsideTickLabels&&ye._hideCounterAxisInsideTickLabels(ge)}},{"../../components/color":119,"../../components/drawing":141,"../../components/titles":217,"../../constants/alignment":224,"../../constants/numerical":231,"../../lib":252,"../../lib/svg_text_utils":277,"../../plots/plots":349,"../../registry":352,"./autorange":300,"./axis_autotype":302,"./axis_ids":305,"./clean_ticks":307,"./layout_attributes":316,"./set_convert":323,"@plotly/d3":16,"fast-isnumeric":31}],302:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=z("../../constants/numerical").BADNUM,D=L.isArrayOrTypedArray,p=L.isDateTime,w=L.cleanNumber,k=Math.round;le.exports=function(y,T,_){var f=y,g=_.noMultiCategory;if(D(f)&&!f.length)return"-";if(!g&&b(f))return"multicategory";if(g&&Array.isArray(f[0])){for(var n=[],a=0;a<f.length;a++)if(D(f[a]))for(var h=0;h<f[a].length;h++)n.push(f[a][h]);f=n}if(u(f,T))return"date";var c=_.autotypenumbers!=="strict";return l(f,c)?"category":e(f,c)?"linear":"-"};function d(v,y){return y?R(v):typeof v=="number"}function e(v,y){for(var T=v.length,_=0;_<T;_++)if(d(v[_],y))return!0;return!1}function u(v,y){for(var T=v.length,_=s(T),f=0,g=0,n={},a=0;a<T;a+=_){var h=k(a),c=v[h],m=String(c);n[m]||(n[m]=1,p(c,y)&&f++,R(c)&&g++)}return f>g*2}function s(v){return Math.max(1,(v-1)/1e3)}function l(v,y){for(var T=v.length,_=s(T),f=0,g=0,n={},a=0;a<T;a+=_){var h=k(a),c=v[h],m=String(c);if(!n[m]){n[m]=1;var o=typeof c;o==="boolean"?g++:(y?w(c)!==N:o==="number")?f++:o==="string"&&g++}}return g>f*2}function b(v){return D(v[0])&&D(v[1])}},{"../../constants/numerical":231,"../../lib":252,"fast-isnumeric":31}],303:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../registry"),N=z("../../lib"),D=z("../array_container_defaults"),p=z("./layout_attributes"),w=z("./tick_value_defaults"),k=z("./tick_mark_defaults"),d=z("./tick_label_defaults"),e=z("./prefix_suffix_defaults"),u=z("./category_order_defaults"),s=z("./line_grid_defaults"),l=z("./set_convert"),b=z("./constants").WEEKDAY_PATTERN,v=z("./constants").HOUR_PATTERN;le.exports=function(g,n,a,h,c){var m=h.letter,o=h.font||{},t=h.splomStash||{},i=a("visible",!h.visibleDflt),r=n._template||{},x=n.type||r.type||"-",A;if(x==="date"){var E=L.getComponentMethod("calendars","handleDefaults");E(g,n,"calendar",h.calendar),h.noTicklabelmode||(A=a("ticklabelmode"))}var P="";(!h.noTicklabelposition||x==="multicategory")&&(P=N.coerce(g,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A==="period"?["outside","inside"]:m==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),h.noTicklabeloverflow||a("ticklabeloverflow",P.indexOf("inside")!==-1?"hide past domain":x==="category"||x==="multicategory"?"allow":"hide past div"),l(n,c);var S=!n.isValidRange(g.range);S&&h.reverseDflt&&(S="reversed");var C=a("autorange",S);C&&(x==="linear"||x==="-")&&a("rangemode"),a("range"),n.cleanRange(),u(g,n,a,h),x!=="category"&&!h.noHover&&a("hoverformat");var M=a("color"),I=M!==p.color.dflt?M:o.color,G=t.label||c._dfltTitle[m];if(e(g,n,a,x,h),!i)return n;a("title.text",G),N.coerceFont(a,"title.font",{family:o.family,size:N.bigFont(o.size),color:I}),w(g,n,a,x),d(g,n,a,x,h),k(g,n,a,h),s(g,n,a,{dfltColor:M,bgColor:h.bgColor,showGrid:h.showGrid,attributes:p}),(n.showline||n.ticks)&&a("mirror"),h.automargin&&a("automargin");var V=x==="multicategory";if(!h.noTickson&&(x==="category"||V)&&(n.ticks||n.showgrid)){var q;V&&(q="boundaries");var ee=a("tickson",q);ee==="boundaries"&&delete n.ticklabelposition}if(V){var Q=a("showdividers");Q&&(a("dividercolor"),a("dividerwidth"))}if(x==="date")if(D(g,n,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),!n.rangebreaks.length)delete n.rangebreaks;else{for(var U=0;U<n.rangebreaks.length;U++)if(n.rangebreaks[U].pattern===b){n._hasDayOfWeekBreaks=!0;break}if(l(n,c),c._has("scattergl")||c._has("splom"))for(var O=0;O<h.data.length;O++){var Z=h.data[O];(Z.type==="scattergl"||Z.type==="splom")&&(Z.visible=!1,N.warn(Z.type+" traces do not work on axes with rangebreaks. Setting trace "+Z.index+" to `visible: false`."))}}return n};function y(f,g,n){function a(A,E){return N.coerce(f,g,p.rangebreaks,A,E)}var h=a("enabled");if(h){var c=a("bounds");if(c&&c.length>=2){var m="",o,t;if(c.length===2){for(o=0;o<2;o++)if(t=_(c[o]),t){m=b;break}}var i=a("pattern",m);if(i===b)for(o=0;o<2;o++)t=_(c[o]),t&&(g.bounds[o]=c[o]=t-1);if(i)for(o=0;o<2;o++)switch(t=c[o],i){case b:if(!R(t)){g.enabled=!1;return}if(t=+t,t!==Math.floor(t)||t<0||t>=7){g.enabled=!1;return}g.bounds[o]=c[o]=t;break;case v:if(!R(t)){g.enabled=!1;return}if(t=+t,t<0||t>24){g.enabled=!1;return}g.bounds[o]=c[o]=t;break}if(n.autorange===!1){var r=n.range;if(r[0]<r[1]){if(c[0]<r[0]&&c[1]>r[1]){g.enabled=!1;return}}else if(c[0]>r[0]&&c[1]<r[1]){g.enabled=!1;return}}}else{var x=a("values");if(x&&x.length)a("dvalue");else{g.enabled=!1;return}}}}var T={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function _(f){if(typeof f=="string")return T[f.substr(0,3).toLowerCase()]}},{"../../lib":252,"../../registry":352,"../array_container_defaults":296,"./category_order_defaults":306,"./constants":308,"./layout_attributes":316,"./line_grid_defaults":318,"./prefix_suffix_defaults":320,"./set_convert":323,"./tick_label_defaults":325,"./tick_mark_defaults":326,"./tick_value_defaults":327,"fast-isnumeric":31}],304:[function(z,le,ae){"use strict";var R=z("../../constants/docs"),L=R.FORMAT_LINK,N=R.DATE_FORMAT_LINK;function D(k,d){return{valType:"string",dflt:"",editType:"none",description:(d?p:w)("hover text",k)+["By default the values are formatted using "+(d?"generic number format":"`"+k+"axis.hoverformat`")+"."].join(" ")}}function p(k,d){return["Sets the "+k+" formatting rule"+(d?"for `"+d+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+L+"."].join(" ")}function w(k,d){return p(k,d)+[" And for dates see: "+N+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}le.exports={axisHoverFormat:D,descriptionOnlyNumbers:p,descriptionWithDates:w}},{"../../constants/docs":226}],305:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("./constants");ae.id2name=function(p){if(!(typeof p!="string"||!p.match(L.AX_ID_PATTERN))){var w=p.split(" ")[0].substr(1);return w==="1"&&(w=""),p.charAt(0)+"axis"+w}},ae.name2id=function(p){if(!!p.match(L.AX_NAME_PATTERN)){var w=p.substr(5);return w==="1"&&(w=""),p.charAt(0)+w}},ae.cleanId=function(p,w,k){var d=/( domain)$/.test(p);if(!(typeof p!="string"||!p.match(L.AX_ID_PATTERN))&&!(w&&p.charAt(0)!==w)&&!(d&&!k)){var e=p.split(" ")[0].substr(1).replace(/^0+/,"");return e==="1"&&(e=""),p.charAt(0)+e+(d&&k?" domain":"")}},ae.list=function(D,p,w){var k=D._fullLayout;if(!k)return[];var d=ae.listIds(D,p),e=new Array(d.length),u;for(u=0;u<d.length;u++){var s=d[u];e[u]=k[s.charAt(0)+"axis"+s.substr(1)]}if(!w){var l=k._subplots.gl3d||[];for(u=0;u<l.length;u++){var b=k[l[u]];p?e.push(b[p+"axis"]):e.push(b.xaxis,b.yaxis,b.zaxis)}}return e},ae.listIds=function(D,p){var w=D._fullLayout;if(!w)return[];var k=w._subplots;return p?k[p+"axis"]:k.xaxis.concat(k.yaxis)},ae.getFromId=function(D,p,w){var k=D._fullLayout;return p=p===void 0||typeof p!="string"?p:p.replace(" domain",""),w==="x"?p=p.replace(/y[0-9]*/,""):w==="y"&&(p=p.replace(/x[0-9]*/,"")),k[ae.id2name(p)]},ae.getFromTrace=function(D,p,w){var k=D._fullLayout,d=null;if(R.traceIs(p,"gl3d")){var e=p.scene;e.substr(0,5)==="scene"&&(d=k[e][w+"axis"])}else d=ae.getFromId(D,p[w+"axis"]||w);return d},ae.idSort=function(D,p){var w=D.charAt(0),k=p.charAt(0);return w!==k?w>k?1:-1:+(D.substr(1)||1)-+(p.substr(1)||1)},ae.ref2id=function(D){return/^[xyz]/.test(D)?D.split(" ")[0]:!1};function N(D,p){if(p&&p.length){for(var w=0;w<p.length;w++)if(p[w][D])return!0}return!1}ae.isLinked=function(D,p){return N(p,D._axisMatchGroups)||N(p,D._axisConstraintGroups)}},{"../../registry":352,"./constants":308}],306:[function(z,le,ae){"use strict";function R(L,N){var D=N.dataAttr||L._id.charAt(0),p={},w,k,d;if(N.axData)w=N.axData;else for(w=[],k=0;k<N.data.length;k++){var e=N.data[k];e[D+"axis"]===L._id&&w.push(e)}for(k=0;k<w.length;k++){var u=w[k][D];for(d=0;d<u.length;d++){var s=u[d];s!=null&&(p[s]=1)}}return Object.keys(p)}le.exports=function(N,D,p,w){if(D.type==="category"){var k=N.categoryarray,d=Array.isArray(k)&&k.length>0,e;d&&(e="array");var u=p("categoryorder",e),s;u==="array"&&(s=p("categoryarray")),!d&&u==="array"&&(u=D.categoryorder="trace"),u==="trace"?D._initialCategories=[]:u==="array"?D._initialCategories=s.slice():(s=R(D,w).sort(),u==="category ascending"?D._initialCategories=s:u==="category descending"&&(D._initialCategories=s.reverse()))}}},{}],307:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=z("../../constants/numerical"),D=N.ONEDAY,p=N.ONEWEEK;ae.dtick=function(w,k){var d=k==="log",e=k==="date",u=k==="category",s=e?D:1;if(!w)return s;if(R(w))return w=Number(w),w<=0?s:u?Math.max(1,Math.round(w)):e?Math.max(.1,w):w;if(typeof w!="string"||!(e||d))return s;var l=w.charAt(0),b=w.substr(1);return b=R(b)?Number(b):0,b<=0||!(e&&l==="M"&&b===Math.round(b)||d&&l==="L"||d&&l==="D"&&(b===1||b===2))?s:w},ae.tick0=function(w,k,d,e){if(k==="date")return L.cleanDate(w,L.dateTick0(d,e%p===0?1:0));if(!(e==="D1"||e==="D2"))return R(w)?Number(w):0}},{"../../constants/numerical":231,"../../lib":252,"fast-isnumeric":31}],308:[function(z,le,ae){"use strict";var R=z("../../lib/regex").counter;le.exports={idRegex:{x:R("x","( domain)?"),y:R("y","( domain)?")},attrRegex:R("[xy]axis"),xAxisMatch:R("xaxis"),yAxisMatch:R("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":268}],309:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./autorange"),N=z("./axis_ids").id2name,D=z("./layout_attributes"),p=z("./scale_zoom"),w=z("./set_convert"),k=z("../../constants/numerical").ALMOST_EQUAL,d=z("../../constants/alignment").FROM_BL;ae.handleDefaults=function(T,_,f){var g=f.axIds,n=f.axHasImage,a=_._axisConstraintGroups=[],h=_._axisMatchGroups=[],c,m,o,t,i,r,x,A;for(c=0;c<g.length;c++)t=N(g[c]),i=T[t],r=_[t],e(i,r,{axIds:g,layoutOut:_,hasImage:n[t]});function E(ee,Q){for(c=0;c<ee.length;c++){m=ee[c];for(o in m)_[N(o)][Q]=m}}for(E(h,"_matchGroup"),c=0;c<a.length;c++){m=a[c];for(o in m)if(r=_[N(o)],r.fixedrange){for(var P in m){var S=N(P);(T[S]||{}).fixedrange===!1&&R.warn("fixedrange was specified as false for axis "+S+" but was overridden because another axis in its constraint group has fixedrange true"),_[S].fixedrange=!0}break}}for(c=0;c<a.length;){m=a[c];for(o in m){r=_[N(o)],r._matchGroup&&Object.keys(r._matchGroup).length===Object.keys(m).length&&(a.splice(c,1),c--);break}c++}E(a,"_constraintGroup");var C=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],M=!1,I=!1;function G(){A=r[x],x==="rangebreaks"&&(I=r._hasDayOfWeekBreaks)}for(c=0;c<h.length;c++){m=h[c];for(var V=0;V<C.length;V++){x=C[V],A=null;var q;for(o in m)if(t=N(o),i=T[t],r=_[t],x in r){if(!r.matches&&(q=r,x in i)){G();break}A===null&&x in i&&G()}if(x==="range"&&A&&(M=!0),x==="autorange"&&A===null&&M&&(A=!1),A===null&&x in q&&(A=q[x]),A!==null)for(o in m)r=_[N(o)],r[x]=x==="range"?A.slice():A,x==="rangebreaks"&&(r._hasDayOfWeekBreaks=I,w(r,_))}}};function e(T,_,f){var g=f.axIds,n=f.layoutOut,a=f.hasImage,h=n._axisConstraintGroups,c=n._axisMatchGroups,m=_._id,o=m.charAt(0),t=((n._splomAxes||{})[o]||{})[m]||{},i=_._id,r=i.charAt(0)==="x";_._matchGroup=null,_._constraintGroup=null;function x(Z,B){return R.coerce(T,_,D,Z,B)}x("constrain",a?"domain":"range"),R.coerce(T,_,{constraintoward:{valType:"enumerated",values:r?["left","center","right"]:["bottom","middle","top"],dflt:r?"center":"middle"}},"constraintoward");var A=_.type,E,P,S=[];for(E=0;E<g.length;E++)if(P=g[E],P!==i){var C=n[N(P)];C.type===A&&S.push(P)}var M=s(h,i);if(M){var I=[];for(E=0;E<S.length;E++)P=S[E],M[P]||I.push(P);S=I}var G=S.length,V,q;G&&(T.matches||t.matches)&&(V=R.coerce(T,_,{matches:{valType:"enumerated",values:S,dflt:S.indexOf(t.matches)!==-1?t.matches:void 0}},"matches"));var ee=a&&!r?_.anchor:void 0;if(G&&!V&&(T.scaleanchor||ee)&&(q=R.coerce(T,_,{scaleanchor:{valType:"enumerated",values:S}},"scaleanchor",ee)),V){_._matchGroup=l(c,i,V,1);var Q=n[N(V)],U=u(n,_)/u(n,Q);r!==(V.charAt(0)==="x")&&(U=(r?"x":"y")+U),l(h,i,V,U)}else T.matches&&g.indexOf(T.matches)!==-1&&R.warn("ignored "+_._name+'.matches: "'+T.matches+'" to avoid an infinite loop');if(q){var O=x("scaleratio");O||(O=_.scaleratio=1),l(h,i,q,O)}else T.scaleanchor&&g.indexOf(T.scaleanchor)!==-1&&R.warn("ignored "+_._name+'.scaleanchor: "'+T.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function u(T,_){var f=_.domain;return f||(f=T[N(_.overlaying)].domain),f[1]-f[0]}function s(T,_){for(var f=0;f<T.length;f++)if(T[f][_])return T[f];return null}function l(T,_,f,g){var n,a,h,c,m,o=s(T,_);o===null?(o={},o[_]=1,m=T.length,T.push(o)):m=T.indexOf(o);var t=Object.keys(o);for(n=0;n<T.length;n++)if(h=T[n],n!==m&&h[f]){var i=h[f];for(a=0;a<t.length;a++)c=t[a],h[c]=b(i,b(g,o[c]));T.splice(m,1);return}if(g!==1)for(a=0;a<t.length;a++){var r=t[a];o[r]=b(g,o[r])}o[f]=1}function b(T,_){var f="",g="",n,a;typeof T=="string"&&(f=T.match(/^[xy]*/)[0],n=f.length,T=+T.substr(n)),typeof _=="string"&&(g=_.match(/^[xy]*/)[0],a=g.length,_=+_.substr(a));var h=T*_;return!n&&!a?h:!n||!a||f.charAt(0)===g.charAt(0)?f+g+T*_:n===a?h:(n>a?f.substr(a):g.substr(n))+h}function v(T,_){for(var f=_._size,g=f.h/f.w,n={},a=Object.keys(T),h=0;h<a.length;h++){var c=a[h],m=T[c];if(typeof m=="string"){var o=m.match(/^[xy]*/)[0],t=o.length;m=+m.substr(t);for(var i=o.charAt(0)==="y"?g:1/g,r=0;r<t;r++)m*=i}n[c]=m}return n}ae.enforce=function(_){var f=_._fullLayout,g=f._axisConstraintGroups||[],n,a,h,c,m,o,t,i;for(n=0;n<g.length;n++){h=v(g[n],f);var r=Object.keys(h),x=1/0,A=0,E=1/0,P={},S={},C=!1;for(a=0;a<r.length;a++)c=r[a],S[c]=m=f[N(c)],m._inputDomain?m.domain=m._inputDomain.slice():m._inputDomain=m.domain.slice(),m._inputRange||(m._inputRange=m.range.slice()),m.setScale(),P[c]=o=Math.abs(m._m)/h[c],x=Math.min(x,o),(m.constrain==="domain"||!m._constraintShrinkable)&&(E=Math.min(E,o)),delete m._constraintShrinkable,A=Math.max(A,o),m.constrain==="domain"&&(C=!0);if(!(x>k*A&&!C)){for(a=0;a<r.length;a++)if(c=r[a],o=P[c],m=S[c],t=m.constrain,o!==E||t==="domain")if(i=o/E,t==="range")p(m,i);else{var M=m._inputDomain,I=(m.domain[1]-m.domain[0])/(M[1]-M[0]),G=(m.r2l(m.range[1])-m.r2l(m.range[0]))/(m.r2l(m._inputRange[1])-m.r2l(m._inputRange[0]));if(i/=I,i*G<1){m.domain=m._input.domain=M.slice(),p(m,i);continue}if(G<1&&(m.range=m._input.range=m._inputRange.slice(),i*=G),m.autorange){var V=m.r2l(m.range[0]),q=m.r2l(m.range[1]),ee=(V+q)/2,Q=ee,U=ee,O=Math.abs(q-ee),Z=ee-O*i*1.0001,B=ee+O*i*1.0001,Y=L.makePadFn(f,m,0),j=L.makePadFn(f,m,1);y(m,i);var X=Math.abs(m._m),H=L.concatExtremes(_,m),K=H.min,W=H.max,$,re;for(re=0;re<K.length;re++)$=K[re].val-Y(K[re])/X,$>Z&&$<Q&&(Q=$);for(re=0;re<W.length;re++)$=W[re].val+j(W[re])/X,$<B&&$>U&&(U=$);var de=(U-Q)/(2*O);i/=de,Q=m.l2r(Q),U=m.l2r(U),m.range=m._input.range=V<q?[Q,U]:[U,Q]}y(m,i)}}}},ae.getAxisGroup=function(_,f){for(var g=_._axisMatchGroups,n=0;n<g.length;n++){var a=g[n];if(a[f])return"g"+n}return f},ae.clean=function(_,f){if(f._inputDomain){for(var g=!1,n=f._id,a=_._fullLayout._axisConstraintGroups,h=0;h<a.length;h++)if(a[h][n]){g=!0;break}(!g||f.constrain!=="domain")&&(f._input.domain=f.domain=f._inputDomain,delete f._inputDomain)}};function y(T,_){var f=T._inputDomain,g=d[T.constraintoward],n=f[0]+(f[1]-f[0])*g;T.domain=T._input.domain=[n+(f[0]-n)/_,n+(f[1]-n)/_],T.setScale()}},{"../../constants/alignment":224,"../../constants/numerical":231,"../../lib":252,"./autorange":300,"./axis_ids":305,"./layout_attributes":316,"./scale_zoom":321,"./set_convert":323}],310:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../lib"),N=L.numberFormat,D=z("tinycolor2"),p=z("has-passive-events"),w=z("../../registry"),k=L.strTranslate,d=z("../../lib/svg_text_utils"),e=z("../../components/color"),u=z("../../components/drawing"),s=z("../../components/fx"),l=z("./axes"),b=z("../../lib/setcursor"),v=z("../../components/dragelement"),y=z("../../components/dragelement/helpers"),T=y.selectingOrDrawing,_=y.freeMode,f=z("../../constants/alignment").FROM_TL,g=z("../../lib/clear_gl_canvases"),n=z("../../plot_api/subroutines").redrawReglTraces,a=z("../plots"),h=z("./axis_ids").getFromId,c=z("./select").prepSelect,m=z("./select").clearSelect,o=z("./select").selectOnClick,t=z("./scale_zoom"),i=z("./constants"),r=i.MINDRAG,x=i.MINZOOM,A=!0;function E($,re,de,ve,ue,ce,_e,fe){var ne=$._fullLayout._zoomlayer,ie=_e+fe==="nsew",me=(_e+fe).length===1,we,be,Me,Ie,Ke,Oe,We,Fe,Ge,Xe,ut,rt,dt,st,Ve,Je,ke,Le,Be,pe,Ae,Ce,Se;function He(){if(we=re.xaxis,be=re.yaxis,Ge=we._length,Xe=be._length,We=we._offset,Fe=be._offset,Me={},Me[we._id]=we,Ie={},Ie[be._id]=be,_e&&fe)for(var wt=re.overlays,Et=0;Et<wt.length;Et++){var zt=wt[Et].xaxis;Me[zt._id]=zt;var Ut=wt[Et].yaxis;Ie[Ut._id]=Ut}Ke=W(Me),Oe=W(Ie),dt=C(Ke,fe),st=C(Oe,_e),Ve=!st&&!dt,rt=H($,$._fullLayout._axisMatchGroups,Me,Ie),ut=H($,$._fullLayout._axisConstraintGroups,Me,Ie,rt);var pt=ut.isSubplotConstrained||rt.isSubplotConstrained;Je=fe||pt,ke=_e||pt;var Ct=$._fullLayout;Le=Ct._has("scattergl"),Be=Ct._has("splom"),pe=Ct._has("svg")}He();var Ne=q(st+dt,$._fullLayout.dragmode,ie),qe=S(re,_e+fe+"drag",Ne,de,ve,ue,ce);if(Ve&&!ie)return qe.onmousedown=null,qe.style.pointerEvents="none",qe;var at={element:qe,gd:$,plotinfo:re};at.prepFn=function(wt,Et,zt){var Ut=at.dragmode,pt=$._fullLayout.dragmode;pt!==Ut&&(at.dragmode=pt),He(),Ce=$._fullLayout._invScaleX,Se=$._fullLayout._invScaleY,Ve||(ie?wt.shiftKey?pt==="pan"?pt="zoom":T(pt)||(pt="pan"):wt.ctrlKey&&(pt="pan"):pt="pan"),_(pt)?at.minDrag=1:at.minDrag=void 0,T(pt)?(at.xaxes=Ke,at.yaxes=Oe,c(wt,Et,zt,at,pt)):(at.clickFn=Ze,T(Ut)&&nt(),Ve||(pt==="zoom"?(at.moveFn=Ft,at.doneFn=ge,at.minDrag=1,Yt(wt,Et,zt)):pt==="pan"&&(at.moveFn=et,at.doneFn=St))),$._fullLayout._redrag=function(){var Ct=$._dragdata;if(Ct&&Ct.element===qe){var Lt=$._fullLayout.dragmode;T(Lt)||(He(),Dt([0,0,Ge,Xe]),at.moveFn(Ct.dx,Ct.dy))}}};function nt(){at.plotinfo.selection=!1,m($)}function Ze(wt,Et){var zt=at.gd;if(zt._fullLayout._activeShapeIndex>=0){zt._fullLayout._deactivateShape(zt);return}var Ut=zt._fullLayout.clickmode;if(Z(zt),wt===2&&!me&&Mt(),ie)Ut.indexOf("select")>-1&&o(Et,zt,Ke,Oe,re.id,at),Ut.indexOf("event")>-1&&s.click(zt,Et,re.id);else if(wt===1&&me){var pt=_e?be:we,Ct=_e==="s"||fe==="w"?0:1,Lt=pt._name+".range["+Ct+"]",At=M(pt,Ct),Vt="left",Qt="middle";if(pt.fixedrange)return;_e?(Qt=_e==="n"?"top":"bottom",pt.side==="right"&&(Vt="right")):fe==="e"&&(Vt="right"),zt._context.showAxisRangeEntryBoxes&&R.select(qe).call(d.makeEditable,{gd:zt,immediate:!0,background:zt._fullLayout.paper_bgcolor,text:String(At),fill:pt.tickfont?pt.tickfont.color:"#444",horizontalAlign:Vt,verticalAlign:Qt}).on("edit",function($t){var Pt=pt.d2r($t);Pt!==void 0&&w.call("_guiRelayout",zt,Lt,Pt)})}}v.init(at);var ht,kt,xt,Bt,Zt,Gt,Rt,Wt,It,vt;function Yt(wt,Et,zt){var Ut=qe.getBoundingClientRect();ht=Et-Ut.left,kt=zt-Ut.top,$._fullLayout._calcInverseTransform($);var pt=L.apply3DTransform($._fullLayout._invTransform)(ht,kt);ht=pt[0],kt=pt[1],xt={l:ht,r:ht,w:0,t:kt,b:kt,h:0},Bt=$._hmpixcount?$._hmlumcount/$._hmpixcount:D($._fullLayout.plot_bgcolor).getLuminance(),Zt="M0,0H"+Ge+"V"+Xe+"H0V0",Gt=!1,Rt="xy",vt=!1,Wt=ee(ne,Bt,We,Fe,Zt),It=Q(ne,We,Fe)}function Ft(wt,Et){if($._transitioningWithDuration)return!1;var zt=Math.max(0,Math.min(Ge,Ce*wt+ht)),Ut=Math.max(0,Math.min(Xe,Se*Et+kt)),pt=Math.abs(zt-ht),Ct=Math.abs(Ut-kt);xt.l=Math.min(ht,zt),xt.r=Math.max(ht,zt),xt.t=Math.min(kt,Ut),xt.b=Math.max(kt,Ut);function Lt(){Rt="",xt.r=xt.l,xt.t=xt.b,It.attr("d","M0,0Z")}if(ut.isSubplotConstrained)pt>x||Ct>x?(Rt="xy",pt/Ge>Ct/Xe?(Ct=pt*Xe/Ge,kt>Ut?xt.t=kt-Ct:xt.b=kt+Ct):(pt=Ct*Ge/Xe,ht>zt?xt.l=ht-pt:xt.r=ht+pt),It.attr("d",X(xt))):Lt();else if(rt.isSubplotConstrained)if(pt>x||Ct>x){Rt="xy";var At=Math.min(xt.l/Ge,(Xe-xt.b)/Xe),Vt=Math.max(xt.r/Ge,(Xe-xt.t)/Xe);xt.l=At*Ge,xt.r=Vt*Ge,xt.b=(1-At)*Xe,xt.t=(1-Vt)*Xe,It.attr("d",X(xt))}else Lt();else!st||Ct<Math.min(Math.max(pt*.6,r),x)?pt<r||!dt?Lt():(xt.t=0,xt.b=Xe,Rt="x",It.attr("d",Y(xt,kt))):!dt||pt<Math.min(Ct*.6,x)?(xt.l=0,xt.r=Ge,Rt="y",It.attr("d",j(xt,ht))):(Rt="xy",It.attr("d",X(xt)));xt.w=xt.r-xt.l,xt.h=xt.b-xt.t,Rt&&(vt=!0),$._dragged=vt,U(Wt,It,xt,Zt,Gt,Bt),ye(),$.emit("plotly_relayouting",Ae),Gt=!0}function ye(){Ae={},(Rt==="xy"||Rt==="x")&&(I(Ke,xt.l/Ge,xt.r/Ge,Ae,ut.xaxes),ot("x",Ae)),(Rt==="xy"||Rt==="y")&&(I(Oe,(Xe-xt.b)/Xe,(Xe-xt.t)/Xe,Ae,ut.yaxes),ot("y",Ae))}function ge(){ye(),Z($),St(),B($)}var Re=[0,0,Ge,Xe],ze=null,Ue=i.REDRAWDELAY,je=re.mainplot?$._fullLayout._plots[re.mainplot]:re;function Ye(wt){if(!$._context._scrollZoom.cartesian&&!$._fullLayout._enablescrollzoom)return;if(nt(),$._transitioningWithDuration){wt.preventDefault(),wt.stopPropagation();return}He(),clearTimeout(ze);var Et=-wt.deltaY;if(isFinite(Et)||(Et=wt.wheelDelta/10),!isFinite(Et)){L.log("Did not find wheel motion attributes: ",wt);return}var zt=Math.exp(-Math.min(Math.max(Et,-20),20)/200),Ut=je.draglayer.select(".nsewdrag").node().getBoundingClientRect(),pt=(wt.clientX-Ut.left)/Ut.width,Ct=(Ut.bottom-wt.clientY)/Ut.height,Lt;function At(Vt,Qt,$t){if(Vt.fixedrange)return;var Pt=L.simpleMap(Vt.range,Vt.r2l),rr=Pt[0]+(Pt[1]-Pt[0])*Qt;function ir(tr){return Vt.l2r(rr+(tr-rr)*$t)}Vt.range=Pt.map(ir)}if(Je){for(fe||(pt=.5),Lt=0;Lt<Ke.length;Lt++)At(Ke[Lt],pt,zt);ot("x"),Re[2]*=zt,Re[0]+=Re[2]*pt*(1/zt-1)}if(ke){for(_e||(Ct=.5),Lt=0;Lt<Oe.length;Lt++)At(Oe[Lt],Ct,zt);ot("y"),Re[3]*=zt,Re[1]+=Re[3]*(1-Ct)*(1/zt-1)}Dt(Re),_t(),$.emit("plotly_relayouting",Ae),ze=setTimeout(function(){!$._fullLayout||(Re=[0,0,Ge,Xe],St())},Ue),wt.preventDefault()}_e.length*fe.length!==1&&K(qe,Ye);function et(wt,Et){if(wt=wt*Ce,Et=Et*Se,$._transitioningWithDuration)return;if($._fullLayout._replotting=!0,dt==="ew"||st==="ns"){var zt=dt?-wt:0,Ut=st?-Et:0;if(rt.isSubplotConstrained){if(dt&&st){var pt=(wt/Ge-Et/Xe)/2;wt=pt*Ge,Et=-pt*Xe,zt=-wt,Ut=-Et}st?zt=-Ut*Ge/Xe:Ut=-zt*Xe/Ge}dt&&(G(Ke,wt),ot("x")),st&&(G(Oe,Et),ot("y")),Dt([zt,Ut,Ge,Xe]),_t(),$.emit("plotly_relayouting",Ae);return}function Ct(ir,tr,sr){for(var cr=1-tr,vr,mr,_r=0;_r<ir.length;_r++){var wr=ir[_r];if(!wr.fixedrange){vr=wr,mr=wr._rl[cr]+(wr._rl[tr]-wr._rl[cr])/V(sr/wr._length);var br=wr.l2r(mr);br!==!1&&br!==void 0&&(wr.range[tr]=br)}}return vr._length*(vr._rl[tr]-mr)/(vr._rl[tr]-vr._rl[cr])}var Lt=dt==="w"==(st==="n")?1:-1;if(dt&&st&&(ut.isSubplotConstrained||rt.isSubplotConstrained)){var At=(wt/Ge+Lt*Et/Xe)/2;wt=At*Ge,Et=Lt*At*Xe}var Vt,Qt;if(dt==="w"?wt=Ct(Ke,0,wt):dt==="e"?wt=Ct(Ke,1,-wt):dt||(wt=0),st==="n"?Et=Ct(Oe,1,Et):st==="s"?Et=Ct(Oe,0,-Et):st||(Et=0),Vt=dt==="w"?wt:0,Qt=st==="n"?Et:0,ut.isSubplotConstrained&&!rt.isSubplotConstrained||rt.isSubplotConstrained&&dt&&st&&Lt>0){var $t;if(rt.isSubplotConstrained||!dt&&st.length===1){for($t=0;$t<Ke.length;$t++)Ke[$t].range=Ke[$t]._r.slice(),t(Ke[$t],1-Et/Xe);wt=Et*Ge/Xe,Vt=wt/2}if(rt.isSubplotConstrained||!st&&dt.length===1){for($t=0;$t<Oe.length;$t++)Oe[$t].range=Oe[$t]._r.slice(),t(Oe[$t],1-wt/Ge);Et=wt*Xe/Ge,Qt=Et/2}}(!rt.isSubplotConstrained||!st)&&ot("x"),(!rt.isSubplotConstrained||!dt)&&ot("y");var Pt=Ge-wt,rr=Xe-Et;rt.isSubplotConstrained&&!(dt&&st)&&(dt?(Qt=Vt?0:wt*Xe/Ge,rr=Pt*Xe/Ge):(Vt=Qt?0:Et*Ge/Xe,Pt=rr*Ge/Xe)),Dt([Vt,Qt,Pt,rr]),_t(),$.emit("plotly_relayouting",Ae)}function ot(wt,Et){for(var zt=rt.isSubplotConstrained?{x:Oe,y:Ke}[wt]:rt[wt+"axes"],Ut=rt.isSubplotConstrained?{x:Ke,y:Oe}[wt]:[],pt=0;pt<zt.length;pt++){var Ct=zt[pt],Lt=Ct._id,At=rt.xLinks[Lt]||rt.yLinks[Lt],Vt=Ut[0]||Me[At]||Ie[At];Vt&&(Et?(Et[Ct._name+".range[0]"]=Et[Vt._name+".range[0]"],Et[Ct._name+".range[1]"]=Et[Vt._name+".range[1]"]):Ct.range=Vt.range.slice())}}function _t(){var wt=[],Et;function zt(Ct){for(Et=0;Et<Ct.length;Et++)Ct[Et].fixedrange||wt.push(Ct[Et]._id)}for(Je&&(zt(Ke),zt(ut.xaxes),zt(rt.xaxes)),ke&&(zt(Oe),zt(ut.yaxes),zt(rt.yaxes)),Ae={},Et=0;Et<wt.length;Et++){var Ut=wt[Et],pt=h($,Ut);l.drawOne($,pt,{skipTitle:!0}),Ae[pt._name+".range[0]"]=pt.range[0],Ae[pt._name+".range[1]"]=pt.range[1]}l.redrawComponents($,wt)}function Mt(){if(!$._transitioningWithDuration){var wt=$._context.doubleClick,Et=[];dt&&(Et=Et.concat(Ke)),st&&(Et=Et.concat(Oe)),rt.xaxes&&(Et=Et.concat(rt.xaxes)),rt.yaxes&&(Et=Et.concat(rt.yaxes));var zt={},Ut,pt,Ct;if(wt==="reset+autosize"){for(wt="autosize",pt=0;pt<Et.length;pt++)if(Ut=Et[pt],Ut._rangeInitial&&(Ut.range[0]!==Ut._rangeInitial[0]||Ut.range[1]!==Ut._rangeInitial[1])||!Ut._rangeInitial&&!Ut.autorange){wt="reset";break}}if(wt==="autosize")for(pt=0;pt<Et.length;pt++)Ut=Et[pt],Ut.fixedrange||(zt[Ut._name+".autorange"]=!0);else if(wt==="reset")for((dt||ut.isSubplotConstrained)&&(Et=Et.concat(ut.xaxes)),st&&!ut.isSubplotConstrained&&(Et=Et.concat(ut.yaxes)),ut.isSubplotConstrained&&(dt?st||(Et=Et.concat(Oe)):Et=Et.concat(Ke)),pt=0;pt<Et.length;pt++)Ut=Et[pt],Ut.fixedrange||(Ut._rangeInitial?(Ct=Ut._rangeInitial,zt[Ut._name+".range[0]"]=Ct[0],zt[Ut._name+".range[1]"]=Ct[1]):zt[Ut._name+".autorange"]=!0);$.emit("plotly_doubleclick",null),w.call("_guiRelayout",$,zt)}}function St(){Dt([0,0,Ge,Xe]),L.syncOrAsync([a.previousPromises,function(){$._fullLayout._replotting=!1,w.call("_guiRelayout",$,Ae)}],$)}function Dt(wt){var Et=$._fullLayout,zt=Et._plots,Ut=Et._subplots.cartesian,pt,Ct,Lt,At;if(Be&&w.subplotsRegistry.splom.drag($),Le){for(pt=0;pt<Ut.length;pt++)if(Ct=zt[Ut[pt]],Lt=Ct.xaxis,At=Ct.yaxis,Ct._scene){var Vt=L.simpleMap(Lt.range,Lt.r2l),Qt=L.simpleMap(At.range,At.r2l);Ct._scene.update({range:[Vt[0],Qt[0],Vt[1],Qt[1]]})}}if((Be||Le)&&(g($),n($)),pe){var $t=wt[2]/we._length,Pt=wt[3]/be._length;for(pt=0;pt<Ut.length;pt++){Ct=zt[Ut[pt]],Lt=Ct.xaxis,At=Ct.yaxis;var rr=(Je||rt.isSubplotConstrained)&&!Lt.fixedrange&&Me[Lt._id],ir=(ke||rt.isSubplotConstrained)&&!At.fixedrange&&Ie[At._id],tr,sr,cr,vr;if(rr?(tr=$t,cr=fe||rt.isSubplotConstrained?wt[0]:er(Lt,tr)):rt.xaHash[Lt._id]?(tr=$t,cr=wt[0]*Lt._length/we._length):rt.yaHash[Lt._id]?(tr=Pt,cr=st==="ns"?-wt[1]*Lt._length/be._length:er(Lt,tr,{n:"top",s:"bottom"}[st])):(tr=Ot(Lt,$t,Pt),cr=Ht(Lt,tr)),ir?(sr=Pt,vr=_e||rt.isSubplotConstrained?wt[1]:er(At,sr)):rt.yaHash[At._id]?(sr=Pt,vr=wt[1]*At._length/be._length):rt.xaHash[At._id]?(sr=$t,vr=dt==="ew"?-wt[0]*At._length/we._length:er(At,sr,{e:"right",w:"left"}[dt])):(sr=Ot(At,$t,Pt),vr=Ht(At,sr)),!(!tr&&!sr)){tr||(tr=1),sr||(sr=1);var mr=Lt._offset-cr/tr,_r=At._offset-vr/sr;Ct.clipRect.call(u.setTranslate,cr,vr).call(u.setScale,tr,sr),Ct.plot.call(u.setTranslate,mr,_r).call(u.setScale,1/tr,1/sr),(tr!==Ct.xScaleFactor||sr!==Ct.yScaleFactor)&&(u.setPointGroupScale(Ct.zoomScalePts,tr,sr),u.setTextPointsScale(Ct.zoomScaleTxt,tr,sr)),u.hideOutsideRangePoints(Ct.clipOnAxisFalseTraces,Ct),Ct.xScaleFactor=tr,Ct.yScaleFactor=sr}}}}function Ot(wt,Et,zt){return wt.fixedrange?0:Je&&ut.xaHash[wt._id]?Et:ke&&(ut.isSubplotConstrained?ut.xaHash:ut.yaHash)[wt._id]?zt:0}function Ht(wt,Et){return Et?(wt.range=wt._r.slice(),t(wt,Et),er(wt,Et)):0}function er(wt,Et,zt){return wt._length*(1-Et)*f[zt||wt.constraintoward||"middle"]}return qe}function P($,re,de,ve){var ue=L.ensureSingle($.draglayer,re,de,function(ce){ce.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",$.id)});return ue.call(b,ve),ue.node()}function S($,re,de,ve,ue,ce,_e){var fe=P($,"rect",re,de);return R.select(fe).call(u.setRect,ve,ue,ce,_e),fe}function C($,re){for(var de=0;de<$.length;de++)if(!$[de].fixedrange)return re;return""}function M($,re){var de=$.range[re],ve=Math.abs(de-$.range[1-re]),ue;return $.type==="date"?de:$.type==="log"?(ue=Math.ceil(Math.max(0,-Math.log(ve)/Math.LN10))+3,N("."+ue+"g")(Math.pow(10,de))):(ue=Math.floor(Math.log(Math.abs(de))/Math.LN10)-Math.floor(Math.log(ve)/Math.LN10)+4,N("."+String(ue)+"g")(de))}function I($,re,de,ve,ue){for(var ce=0;ce<$.length;ce++){var _e=$[ce];if(!_e.fixedrange)if(_e.rangebreaks){var fe=_e._id.charAt(0)==="y",ne=fe?1-re:re,ie=fe?1-de:de;ve[_e._name+".range[0]"]=_e.l2r(_e.p2l(ne*_e._length)),ve[_e._name+".range[1]"]=_e.l2r(_e.p2l(ie*_e._length))}else{var me=_e._rl[0],we=_e._rl[1]-me;ve[_e._name+".range[0]"]=_e.l2r(me+we*re),ve[_e._name+".range[1]"]=_e.l2r(me+we*de)}}if(ue&&ue.length){var be=(re+(1-de))/2;I(ue,be,1-be,ve,[])}}function G($,re){for(var de=0;de<$.length;de++){var ve=$[de];if(!ve.fixedrange)if(ve.rangebreaks){var ue=0,ce=ve._length,_e=ve.p2l(ue+re)-ve.p2l(ue),fe=ve.p2l(ce+re)-ve.p2l(ce),ne=(_e+fe)/2;ve.range=[ve.l2r(ve._rl[0]-ne),ve.l2r(ve._rl[1]-ne)]}else ve.range=[ve.l2r(ve._rl[0]-re/ve._m),ve.l2r(ve._rl[1]-re/ve._m)]}}function V($){return 1-($>=0?Math.min($,.9):1/(1/Math.max($,-.3)+3.222))}function q($,re,de){return $?$==="nsew"?de?"":re==="pan"?"move":"crosshair":$.toLowerCase()+"-resize":"pointer"}function ee($,re,de,ve,ue){return $.append("path").attr("class","zoombox").style({fill:re>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",k(de,ve)).attr("d",ue+"Z")}function Q($,re,de){return $.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,opacity:0}).attr("transform",k(re,de)).attr("d","M0,0Z")}function U($,re,de,ve,ue,ce){$.attr("d",ve+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),O($,re,ue,ce)}function O($,re,de,ve){de||($.transition().style("fill",ve>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),re.transition().style("opacity",1).duration(200))}function Z($){R.select($).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function B($){A&&$.data&&$._context.showTips&&(L.notifier(L._($,"Double-click to zoom back out"),"long"),A=!1)}function Y($,re){return"M"+($.l-.5)+","+(re-x-.5)+"h-3v"+(2*x+1)+"h3ZM"+($.r+.5)+","+(re-x-.5)+"h3v"+(2*x+1)+"h-3Z"}function j($,re){return"M"+(re-x-.5)+","+($.t-.5)+"v-3h"+(2*x+1)+"v3ZM"+(re-x-.5)+","+($.b+.5)+"v3h"+(2*x+1)+"v-3Z"}function X($){var re=Math.floor(Math.min($.b-$.t,$.r-$.l,x)/2);return"M"+($.l-3.5)+","+($.t-.5+re)+"h3v"+-re+"h"+re+"v-3h-"+(re+3)+"ZM"+($.r+3.5)+","+($.t-.5+re)+"h-3v"+-re+"h"+-re+"v-3h"+(re+3)+"ZM"+($.r+3.5)+","+($.b+.5-re)+"h-3v"+re+"h"+-re+"v3h"+(re+3)+"ZM"+($.l-3.5)+","+($.b+.5-re)+"h3v"+re+"h"+re+"v3h-"+(re+3)+"Z"}function H($,re,de,ve,ue){for(var ce=!1,_e={},fe={},ne,ie,me,we,be=(ue||{}).xaHash,Me=(ue||{}).yaHash,Ie=0;Ie<re.length;Ie++){var Ke=re[Ie];for(ne in de)if(Ke[ne]){for(me in Ke)!(ue&&(be[me]||Me[me]))&&!(me.charAt(0)==="x"?de:ve)[me]&&(_e[me]=ne);for(ie in ve)!(ue&&(be[ie]||Me[ie]))&&Ke[ie]&&(ce=!0)}for(ie in ve)if(Ke[ie])for(we in Ke)!(ue&&(be[we]||Me[we]))&&!(we.charAt(0)==="x"?de:ve)[we]&&(fe[we]=ie)}ce&&(L.extendFlat(_e,fe),fe={});var Oe={},We=[];for(me in _e){var Fe=h($,me);We.push(Fe),Oe[Fe._id]=Fe}var Ge={},Xe=[];for(we in fe){var ut=h($,we);Xe.push(ut),Ge[ut._id]=ut}return{xaHash:Oe,yaHash:Ge,xaxes:We,yaxes:Xe,xLinks:_e,yLinks:fe,isSubplotConstrained:ce}}function K($,re){if(!p)$.onwheel!==void 0?$.onwheel=re:$.onmousewheel!==void 0?$.onmousewheel=re:$.isAddedWheelEvent||($.isAddedWheelEvent=!0,$.addEventListener("wheel",re,{passive:!1}));else{var de=$.onwheel!==void 0?"wheel":"mousewheel";$._onwheel&&$.removeEventListener(de,$._onwheel),$._onwheel=re,$.addEventListener(de,re,{passive:!1})}}function W($){var re=[];for(var de in $)re.push($[de]);return re}le.exports={makeDragBox:E,makeDragger:P,makeRectDragger:S,makeZoombox:ee,makeCorners:Q,updateZoombox:U,xyCorners:X,transitionZoombox:O,removeZoombox:Z,showDoubleClickNotifier:B,attachWheelEventHandler:K}},{"../../components/color":119,"../../components/dragelement":138,"../../components/dragelement/helpers":137,"../../components/drawing":141,"../../components/fx":159,"../../constants/alignment":224,"../../lib":252,"../../lib/clear_gl_canvases":239,"../../lib/setcursor":272,"../../lib/svg_text_utils":277,"../../plot_api/subroutines":291,"../../registry":352,"../plots":349,"./axes":301,"./axis_ids":305,"./constants":308,"./scale_zoom":321,"./select":322,"@plotly/d3":16,"has-passive-events":64,tinycolor2:83}],311:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../components/fx"),N=z("../../components/dragelement"),D=z("../../lib/setcursor"),p=z("./dragbox").makeDragBox,w=z("./constants").DRAGGERSIZE;ae.initInteractions=function(d){var e=d._fullLayout;if(d._context.staticPlot){R.select(d).selectAll(".drag").remove();return}if(!(!e._has("cartesian")&&!e._has("splom"))){var u=Object.keys(e._plots||{}).sort(function(l,b){if((e._plots[l].mainplot&&!0)===(e._plots[b].mainplot&&!0)){var v=l.split("y"),y=b.split("y");return v[0]===y[0]?Number(v[1]||1)-Number(y[1]||1):Number(v[0]||1)-Number(y[0]||1)}return e._plots[l].mainplot?1:-1});u.forEach(function(l){var b=e._plots[l],v=b.xaxis,y=b.yaxis;if(!b.mainplot){var T=p(d,b,v._offset,y._offset,v._length,y._length,"ns","ew");T.onmousemove=function(g){d._fullLayout._rehover=function(){d._fullLayout._hoversubplot===l&&d._fullLayout._plots[l]&&L.hover(d,g,l)},L.hover(d,g,l),d._fullLayout._lasthover=T,d._fullLayout._hoversubplot=l},T.onmouseout=function(g){d._dragging||(d._fullLayout._hoversubplot=null,N.unhover(d,g))},d._context.showAxisDragHandles&&(p(d,b,v._offset-w,y._offset-w,w,w,"n","w"),p(d,b,v._offset+v._length,y._offset-w,w,w,"n","e"),p(d,b,v._offset-w,y._offset+y._length,w,w,"s","w"),p(d,b,v._offset+v._length,y._offset+y._length,w,w,"s","e"))}if(d._context.showAxisDragHandles){if(l===v._mainSubplot){var _=v._mainLinePosition;v.side==="top"&&(_-=w),p(d,b,v._offset+v._length*.1,_,v._length*.8,w,"","ew"),p(d,b,v._offset,_,v._length*.1,w,"","w"),p(d,b,v._offset+v._length*.9,_,v._length*.1,w,"","e")}if(l===y._mainSubplot){var f=y._mainLinePosition;y.side!=="right"&&(f-=w),p(d,b,f,y._offset+y._length*.1,w,y._length*.8,"ns",""),p(d,b,f,y._offset+y._length*.9,w,y._length*.1,"s",""),p(d,b,f,y._offset,w,y._length*.1,"n","")}}});var s=e._hoverlayer.node();s.onmousemove=function(l){l.target=d._fullLayout._lasthover,L.hover(d,l,e._hoversubplot)},s.onclick=function(l){l.target=d._fullLayout._lasthover,L.click(d,l)},s.onmousedown=function(l){d._fullLayout._lasthover.onmousedown(l)},ae.updateFx(d)}},ae.updateFx=function(k){var d=k._fullLayout,e=d.dragmode==="pan"?"move":"crosshair";D(d._draggers,e)}},{"../../components/dragelement":138,"../../components/fx":159,"../../lib/setcursor":272,"./constants":308,"./dragbox":310,"@plotly/d3":16}],312:[function(z,le,ae){"use strict";function R(N){var D=N._fullLayout._zoomlayer;D&&D.selectAll(".outline-controllers").remove()}function L(N){var D=N._fullLayout._zoomlayer;D&&D.selectAll(".select-outline").remove(),N._fullLayout._drawing=!1}le.exports={clearOutlineControllers:R,clearSelect:L}},{}],313:[function(z,le,ae){"use strict";var R=z("../../lib").strTranslate;function L(w,k){switch(w.type){case"log":return w.p2d(k);case"date":return w.p2r(k,0,w.calendar);default:return w.p2r(k)}}function N(w,k){switch(w.type){case"log":return w.d2p(k);case"date":return w.r2p(k,0,w.calendar);default:return w.r2p(k)}}function D(w){var k=w._id.charAt(0)==="y"?1:0;return function(d){return L(w,d[k])}}function p(w){return R(w.xaxis._offset,w.yaxis._offset)}le.exports={p2r:L,r2p:N,axValue:D,getTransform:p}},{"../../lib":252}],314:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("./axis_ids");le.exports=function(p){return function(k,d){var e=k[p];if(!!Array.isArray(e))for(var u=R.subplotsRegistry.cartesian,s=u.idRegex,l=d._subplots,b=l.xaxis,v=l.yaxis,y=l.cartesian,T=d._has("cartesian")||d._has("gl2d"),_=0;_<e.length;_++){var f=e[_];if(!!L.isPlainObject(f)){var g=N.cleanId(f.xref,"x",!1),n=N.cleanId(f.yref,"y",!1),a=s.x.test(g),h=s.y.test(n);if(a||h){T||L.pushUnique(d._basePlotModules,u);var c=!1;a&&b.indexOf(g)===-1&&(b.push(g),c=!0),h&&v.indexOf(n)===-1&&(v.push(n),c=!0),c&&a&&h&&y.push(g+n)}}}}}},{"../../lib":252,"../../registry":352,"./axis_ids":305}],315:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../lib"),D=z("../plots"),p=z("../../components/drawing"),w=z("../get_data").getModuleCalcData,k=z("./axis_ids"),d=z("./constants"),e=z("../../constants/xmlns_namespaces"),u=N.ensureSingle;function s(_,f,g){return N.ensureSingle(_,f,g,function(n){n.datum(g)})}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=d.idRegex,ae.attrRegex=d.attrRegex,ae.attributes=z("./attributes"),ae.layoutAttributes=z("./layout_attributes"),ae.supplyLayoutDefaults=z("./layout_defaults"),ae.transitionAxes=z("./transition_axes"),ae.finalizeSubplots=function(_,f){var g=f._subplots,n=g.xaxis,a=g.yaxis,h=g.cartesian,c=h.concat(g.gl2d||[]),m={},o={},t,i,r;for(t=0;t<c.length;t++){var x=c[t].split("y");m[x[0]]=1,o["y"+x[1]]=1}for(t=0;t<n.length;t++)i=n[t],m[i]||(r=(_[k.id2name(i)]||{}).anchor,d.idRegex.y.test(r)||(r="y"),h.push(i+r),c.push(i+r),o[r]||(o[r]=1,N.pushUnique(a,r)));for(t=0;t<a.length;t++)r=a[t],o[r]||(i=(_[k.id2name(r)]||{}).anchor,d.idRegex.x.test(i)||(i="x"),h.push(i+r),c.push(i+r),m[i]||(m[i]=1,N.pushUnique(n,i)));if(!c.length){i="",r="";for(var A in _)if(d.attrRegex.test(A)){var E=A.charAt(0);E==="x"?(!i||+A.substr(5)<+i.substr(5))&&(i=A):(!r||+A.substr(5)<+r.substr(5))&&(r=A)}i=i?k.name2id(i):"x",r=r?k.name2id(r):"y",n.push(i),a.push(r),h.push(i+r)}},ae.plot=function(_,f,g,n){var a=_._fullLayout,h=a._subplots.cartesian,c=_.calcdata,m;if(!Array.isArray(f))for(f=[],m=0;m<c.length;m++)f.push(m);for(m=0;m<h.length;m++){for(var o=h[m],t=a._plots[o],i=[],r,x=0;x<c.length;x++){var A=c[x],E=A[0].trace;E.xaxis+E.yaxis===o&&((f.indexOf(E.index)!==-1||E.carpet)&&(r&&r[0].trace.xaxis+r[0].trace.yaxis===o&&["tonextx","tonexty","tonext"].indexOf(E.fill)!==-1&&i.indexOf(r)===-1&&i.push(r),i.push(A)),r=A)}l(_,t,i,g,n)}};function l(_,f,g,n,a){for(var h=d.traceLayerClasses,c=_._fullLayout,m=c._modules,o,t,i,r=[],x=[],A=0;A<m.length;A++){o=m[A];var E=o.name,P=L.modules[E].categories;if(P.svg){var S=o.layerName||E+"layer",C=o.plot;t=w(g,C),i=t[0],g=t[1],i.length&&r.push({i:h.indexOf(S),className:S,plotMethod:C,cdModule:i}),P.zoomScale&&x.push("."+S)}}r.sort(function(G,V){return G.i-V.i});var M=f.plot.selectAll("g.mlayer").data(r,function(G){return G.className});if(M.enter().append("g").attr("class",function(G){return G.className}).classed("mlayer",!0).classed("rangeplot",f.isRangePlot),M.exit().remove(),M.order(),M.each(function(G){var V=R.select(this),q=G.className;G.plotMethod(_,f,G.cdModule,V,n,a),d.clipOnAxisFalseQuery.indexOf("."+q)===-1&&p.setClipUrl(V,f.layerClipId,_)}),c._has("scattergl")&&(o=L.getModule("scattergl"),i=w(g,o)[0],o.plot(_,f,i)),!_._context.staticPlot&&(f._hasClipOnAxisFalse&&(f.clipOnAxisFalseTraces=f.plot.selectAll(d.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),x.length)){var I=f.plot.selectAll(x.join(",")).selectAll(".trace");f.zoomScalePts=I.selectAll("path.point"),f.zoomScaleTxt=I.selectAll(".textpoint")}}ae.clean=function(_,f,g,n){var a=n._plots||{},h=f._plots||{},c=n._subplots||{},m,o,t;if(n._hasOnlyLargeSploms&&!f._hasOnlyLargeSploms)for(t in a)m=a[t],m.plotgroup&&m.plotgroup.remove();var i=n._has&&n._has("gl"),r=f._has&&f._has("gl");if(i&&!r)for(t in a)m=a[t],m._scene&&m._scene.destroy();if(c.xaxis&&c.yaxis){var x=k.listIds({_fullLayout:n});for(o=0;o<x.length;o++){var A=x[o];f[k.id2name(A)]||n._infolayer.selectAll(".g-"+A+"title").remove()}}var E=n._has&&n._has("cartesian"),P=f._has&&f._has("cartesian");if(E&&!P)y(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups,delete n._axisMatchGroups;else if(c.cartesian)for(o=0;o<c.cartesian.length;o++){var S=c.cartesian[o];if(!h[S]){var C="."+S+",."+S+"-x,."+S+"-y";n._cartesianlayer.selectAll(C).remove(),T(S,n)}}},ae.drawFramework=function(_){var f=_._fullLayout,g=b(_),n=f._cartesianlayer.selectAll(".subplot").data(g,String);n.enter().append("g").attr("class",function(a){return"subplot "+a[0]}),n.order(),n.exit().call(y,f),n.each(function(a){var h=a[0],c=f._plots[h];c.plotgroup=R.select(this),v(_,c),c.draglayer=u(f._draggers,"g",h)})},ae.rangePlot=function(_,f,g){v(_,f),l(_,f,g),D.style(_)};function b(_){var f=_._fullLayout,g=f._subplots.cartesian,n=g.length,a,h,c,m,o,t,i=[],r=[];for(a=0;a<n;a++){c=g[a],m=f._plots[c],o=m.xaxis,t=m.yaxis;var x=o._mainAxis,A=t._mainAxis,E=x._id+A._id,P=f._plots[E];m.overlays=[],E!==c&&P?(m.mainplot=E,m.mainplotinfo=P,r.push(c)):(m.mainplot=void 0,m.mainplotinfo=void 0,i.push(c))}for(a=0;a<r.length;a++)c=r[a],m=f._plots[c],m.mainplotinfo.overlays.push(m);var S=i.concat(r),C=new Array(n);for(a=0;a<n;a++){c=S[a],m=f._plots[c],o=m.xaxis,t=m.yaxis;var M=[c,o.layer,t.layer,o.overlaying||"",t.overlaying||""];for(h=0;h<m.overlays.length;h++)M.push(m.overlays[h].id);C[a]=M}return C}function v(_,f){var g=f.plotgroup,n=f.id,a=d.layerValue2layerClass[f.xaxis.layer],h=d.layerValue2layerClass[f.yaxis.layer],c=_._fullLayout._hasOnlyLargeSploms;if(f.mainplot){var o=f.mainplotinfo,t=o.plotgroup,i=n+"-x",r=n+"-y";f.gridlayer=o.gridlayer,f.zerolinelayer=o.zerolinelayer,u(o.overlinesBelow,"path",i),u(o.overlinesBelow,"path",r),u(o.overaxesBelow,"g",i),u(o.overaxesBelow,"g",r),f.plot=u(o.overplot,"g",n),u(o.overlinesAbove,"path",i),u(o.overlinesAbove,"path",r),u(o.overaxesAbove,"g",i),u(o.overaxesAbove,"g",r),f.xlines=t.select(".overlines-"+a).select("."+i),f.ylines=t.select(".overlines-"+h).select("."+r),f.xaxislayer=t.select(".overaxes-"+a).select("."+i),f.yaxislayer=t.select(".overaxes-"+h).select("."+r)}else if(c)f.xlines=u(g,"path","xlines-above"),f.ylines=u(g,"path","ylines-above"),f.xaxislayer=u(g,"g","xaxislayer-above"),f.yaxislayer=u(g,"g","yaxislayer-above");else{var m=u(g,"g","layer-subplot");f.shapelayer=u(m,"g","shapelayer"),f.imagelayer=u(m,"g","imagelayer"),f.gridlayer=u(g,"g","gridlayer"),f.zerolinelayer=u(g,"g","zerolinelayer"),u(g,"path","xlines-below"),u(g,"path","ylines-below"),f.overlinesBelow=u(g,"g","overlines-below"),u(g,"g","xaxislayer-below"),u(g,"g","yaxislayer-below"),f.overaxesBelow=u(g,"g","overaxes-below"),f.plot=u(g,"g","plot"),f.overplot=u(g,"g","overplot"),f.xlines=u(g,"path","xlines-above"),f.ylines=u(g,"path","ylines-above"),f.overlinesAbove=u(g,"g","overlines-above"),u(g,"g","xaxislayer-above"),u(g,"g","yaxislayer-above"),f.overaxesAbove=u(g,"g","overaxes-above"),f.xlines=g.select(".xlines-"+a),f.ylines=g.select(".ylines-"+h),f.xaxislayer=g.select(".xaxislayer-"+a),f.yaxislayer=g.select(".yaxislayer-"+h)}c||(s(f.gridlayer,"g",f.xaxis._id),s(f.gridlayer,"g",f.yaxis._id),f.gridlayer.selectAll("g").map(function(x){return x[0]}).sort(k.idSort)),f.xlines.style("fill","none").classed("crisp",!0),f.ylines.style("fill","none").classed("crisp",!0)}function y(_,f){if(!!_){var g={};_.each(function(o){var t=o[0],i=R.select(this);i.remove(),T(t,f),g[t]=!0});for(var n in f._plots)for(var a=f._plots[n],h=a.overlays||[],c=0;c<h.length;c++){var m=h[c];g[m.id]&&m.plot.selectAll(".trace").remove()}}}function T(_,f){f._draggers.selectAll("g."+_).remove(),f._defs.select("#clip"+f._uid+_+"plot").remove()}ae.toSVG=function(_){var f=_._fullLayout._glimages,g=R.select(_).selectAll(".svg-container"),n=g.filter(function(h,c){return c===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var h=this,c=h.toDataURL("image/png"),m=f.append("svg:image");m.attr({xmlns:e.svg,"xlink:href":c,preserveAspectRatio:"none",x:0,y:0,width:h.style.width,height:h.style.height})}n.each(a)},ae.updateFx=z("./graph_interact").updateFx},{"../../components/drawing":141,"../../constants/xmlns_namespaces":232,"../../lib":252,"../../registry":352,"../get_data":334,"../plots":349,"./attributes":299,"./axis_ids":305,"./constants":308,"./graph_interact":311,"./layout_attributes":316,"./layout_defaults":317,"./transition_axes":328,"@plotly/d3":16}],316:[function(z,le,ae){"use strict";var R=z("../font_attributes"),L=z("../../components/color/attributes"),N=z("../../components/drawing/attributes").dash,D=z("../../lib/extend").extendFlat,p=z("../../plot_api/plot_template").templatedArray,w=z("../../plots/cartesian/axis_format_attributes").descriptionWithDates,k=z("../../constants/numerical").ONEDAY,d=z("./constants"),e=d.HOUR_PATTERN,u=d.WEEKDAY_PATTERN;le.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:L.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:R({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"calc"},rangebreaks:p("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[u,e,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:k},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:L.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:D({},N,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:R({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:w("tick label")},tickformatstops:p("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:w("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:L.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:L.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:L.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:L.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",d.idRegex.x.toString(),d.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:R({editType:"ticks"})}}},{"../../components/color/attributes":118,"../../components/drawing/attributes":140,"../../constants/numerical":231,"../../lib/extend":245,"../../plot_api/plot_template":290,"../../plots/cartesian/axis_format_attributes":304,"../font_attributes":332,"./constants":308}],317:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/color"),N=z("../../components/fx/helpers").isUnifiedHover,D=z("../../components/fx/hovermode_defaults"),p=z("../../plot_api/plot_template"),w=z("../layout_attributes"),k=z("./layout_attributes"),d=z("./type_defaults"),e=z("./axis_defaults"),u=z("./constraints"),s=z("./position_defaults"),l=z("./axis_ids"),b=l.id2name,v=l.name2id,y=z("./constants").AX_ID_PATTERN,T=z("../../registry"),_=T.traceIs,f=T.getComponentMethod;function g(n,a,h){Array.isArray(n[a])?n[a].push(h):n[a]=[h]}le.exports=function(a,h,c){var m=h.autotypenumbers,o={},t={},i={},r={},x={},A={},E={},P={},S={},C={},M,I;for(M=0;M<c.length;M++){var G=c[M];if(!(!_(G,"cartesian")&&!_(G,"gl2d"))){var V;if(G.xaxis)V=b(G.xaxis),g(o,V,G);else if(G.xaxes)for(I=0;I<G.xaxes.length;I++)g(o,b(G.xaxes[I]),G);var q;if(G.yaxis)q=b(G.yaxis),g(o,q,G);else if(G.yaxes)for(I=0;I<G.yaxes.length;I++)g(o,b(G.yaxes[I]),G);if(G.type==="funnel"?G.orientation==="h"?(V&&(t[V]=!0),q&&(E[q]=!0)):q&&(i[q]=!0):G.type==="image"?(q&&(P[q]=!0),V&&(P[V]=!0)):(q&&(x[q]=!0,A[q]=!0),(!_(G,"carpet")||G.type==="carpet"&&!G._cheater)&&V&&(r[V]=!0)),G.type==="carpet"&&G._cheater&&V&&(t[V]=!0),_(G,"2dMap")&&(S[V]=!0,S[q]=!0),_(G,"oriented")){var ee=G.orientation==="h"?q:V;C[ee]=!0}}}var Q=h._subplots,U=Q.xaxis,O=Q.yaxis,Z=R.simpleMap(U,b),B=R.simpleMap(O,b),Y=Z.concat(B),j=L.background;U.length&&O.length&&(j=R.coerce(a,h,w,"plot_bgcolor"));var X=L.combine(j,h.paper_bgcolor),H,K,W,$,re;function de(){var Be=o[H]||[];re._traceIndices=Be.map(function(pe){return pe._expandedIndex}),re._annIndices=[],re._shapeIndices=[],re._imgIndices=[],re._subplotsWith=[],re._counterAxes=[],re._name=re._attr=H,re._id=K}function ve(Be,pe){return R.coerce($,re,k,Be,pe)}function ue(Be,pe){return R.coerce2($,re,k,Be,pe)}function ce(Be){return Be==="x"?O:U}function _e(Be,pe){for(var Ae=Be==="x"?Z:B,Ce=[],Se=0;Se<Ae.length;Se++){var He=Ae[Se];He!==pe&&!(a[He]||{}).overlaying&&Ce.push(v(He))}return Ce}var fe={x:ce("x"),y:ce("y")},ne=fe.x.concat(fe.y),ie={},me=[];function we(){var Be=$.matches;y.test(Be)&&ne.indexOf(Be)===-1&&(ie[Be]=$.type,me=Object.keys(ie))}var be=D(a,h),Me=N(be);for(M=0;M<Y.length;M++){H=Y[M],K=v(H),W=H.charAt(0),R.isPlainObject(a[H])||(a[H]={}),$=a[H],re=p.newContainer(h,H,W+"axis"),de();var Ie=W==="x"&&!r[H]&&t[H]||W==="y"&&!x[H]&&i[H],Ke=W==="y"&&(!A[H]&&E[H]||P[H]),Oe={letter:W,font:h.font,outerTicks:S[H],showGrid:!C[H],data:o[H]||[],bgColor:X,calendar:h.calendar,automargin:!0,visibleDflt:Ie,reverseDflt:Ke,autotypenumbersDflt:m,splomStash:((h._splomAxes||{})[W]||{})[K]};ve("uirevision",h.uirevision),d($,re,ve,Oe),e($,re,ve,Oe,h);var We=Me&&W===be.charAt(0),Fe=ue("spikecolor",Me?re.color:void 0),Ge=ue("spikethickness",Me?1.5:void 0),Xe=ue("spikedash",Me?"dot":void 0),ut=ue("spikemode",Me?"across":void 0),rt=ue("spikesnap"),dt=ve("showspikes",!!We||!!Fe||!!Ge||!!Xe||!!ut||!!rt);dt||(delete re.spikecolor,delete re.spikethickness,delete re.spikedash,delete re.spikemode,delete re.spikesnap),s($,re,ve,{letter:W,counterAxes:fe[W],overlayableAxes:_e(W,H),grid:h.grid}),ve("title.standoff"),we(),re._input=$}for(M=0;M<me.length;){K=me[M++],H=b(K),W=H.charAt(0),R.isPlainObject(a[H])||(a[H]={}),$=a[H],re=p.newContainer(h,H,W+"axis"),de();var st={letter:W,font:h.font,outerTicks:S[H],showGrid:!C[H],data:[],bgColor:X,calendar:h.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:m,splomStash:((h._splomAxes||{})[W]||{})[K]};ve("uirevision",h.uirevision),re.type=ie[K]||"linear",e($,re,ve,st,h),s($,re,ve,{letter:W,counterAxes:fe[W],overlayableAxes:_e(W,H),grid:h.grid}),ve("fixedrange"),we(),re._input=$}var Ve=f("rangeslider","handleDefaults"),Je=f("rangeselector","handleDefaults");for(M=0;M<Z.length;M++)H=Z[M],$=a[H],re=h[H],Ve(a,h,H),re.type==="date"&&Je($,re,h,B,re.calendar),ve("fixedrange");for(M=0;M<B.length;M++){H=B[M],$=a[H],re=h[H];var ke=h[b(re.anchor)],Le=f("rangeslider","isVisible")(ke);ve("fixedrange",Le)}u.handleDefaults(a,h,{axIds:ne.concat(me).sort(l.idSort),axHasImage:P})}},{"../../components/color":119,"../../components/fx/helpers":155,"../../components/fx/hovermode_defaults":158,"../../lib":252,"../../plot_api/plot_template":290,"../../registry":352,"../layout_attributes":347,"./axis_defaults":303,"./axis_ids":305,"./constants":308,"./constraints":309,"./layout_attributes":316,"./position_defaults":319,"./type_defaults":329}],318:[function(z,le,ae){"use strict";var R=z("tinycolor2").mix,L=z("../../components/color/attributes").lightFraction,N=z("../../lib");le.exports=function(p,w,k,d){d=d||{};var e=d.dfltColor;function u(a,h){return N.coerce2(p,w,d.attributes,a,h)}var s=u("linecolor",e),l=u("linewidth"),b=k("showline",d.showLine||!!s||!!l);b||(delete w.linecolor,delete w.linewidth);var v=R(e,d.bgColor,d.blend||L).toRgbString(),y=u("gridcolor",v),T=u("gridwidth"),_=k("showgrid",d.showGrid||!!y||!!T);if(_||(delete w.gridcolor,delete w.gridwidth),!d.noZeroLine){var f=u("zerolinecolor",e),g=u("zerolinewidth"),n=k("zeroline",d.showGrid||!!f||!!g);n||(delete w.zerolinecolor,delete w.zerolinewidth)}}},{"../../components/color/attributes":118,"../../lib":252,tinycolor2:83}],319:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib");le.exports=function(D,p,w,k){var d=k.counterAxes||[],e=k.overlayableAxes||[],u=k.letter,s=k.grid,l,b,v,y;s&&(b=s._domains[u][s._axisMap[p._id]],l=s._anchors[p._id],b&&(v=s[u+"side"].split(" ")[0],y=s.domain[u][v==="right"||v==="top"?1:0])),b=b||[0,1],l=l||(R(D.position)?"free":d[0]||"free"),v=v||(u==="x"?"bottom":"left"),y=y||0;var T=L.coerce(D,p,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:l}},"anchor");T==="free"&&w("position",y),L.coerce(D,p,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:v}},"side");var _=!1;if(e.length&&(_=L.coerce(D,p,{overlaying:{valType:"enumerated",values:[!1].concat(e),dflt:!1}},"overlaying")),!_){var f=w("domain",b);f[0]>f[1]-1/4096&&(p.domain=b),L.noneOrAll(D.domain,p.domain,b)}return w("layer"),p}},{"../../lib":252,"fast-isnumeric":31}],320:[function(z,le,ae){"use strict";var R=z("./show_dflt");le.exports=function(N,D,p,w,k){k||(k={});var d=k.tickSuffixDflt,e=R(N),u=p("tickprefix");u&&p("showtickprefix",e);var s=p("ticksuffix",d);s&&p("showticksuffix",e)}},{"./show_dflt":324}],321:[function(z,le,ae){"use strict";var R=z("../../constants/alignment").FROM_BL;le.exports=function(N,D,p){p===void 0&&(p=R[N.constraintoward||"center"]);var w=[N.r2l(N.range[0]),N.r2l(N.range[1])],k=w[0]+(w[1]-w[0])*p;N.range=N._input.range=[N.l2r(k+(w[0]-k)*D),N.l2r(k+(w[1]-k)*D)],N.setScale()}},{"../../constants/alignment":224}],322:[function(z,le,ae){"use strict";var R=z("polybooljs"),L=z("../../registry"),N=z("../../components/drawing").dashStyle,D=z("../../components/color"),p=z("../../components/fx"),w=z("../../components/fx/helpers").makeEventData,k=z("../../components/dragelement/helpers"),d=k.freeMode,e=k.rectMode,u=k.drawMode,s=k.openMode,l=k.selectMode,b=z("../../components/shapes/draw_newshape/display_outlines"),v=z("../../components/shapes/draw_newshape/helpers").handleEllipse,y=z("../../components/shapes/draw_newshape/newshapes"),T=z("../../lib"),_=z("../../lib/polygon"),f=z("../../lib/throttle"),g=z("./axis_ids").getFromId,n=z("../../lib/clear_gl_canvases"),a=z("../../plot_api/subroutines").redrawReglTraces,h=z("./constants"),c=h.MINSELECT,m=_.filter,o=_.tester,t=z("./handle_outline").clearSelect,i=z("./helpers"),r=i.p2r,x=i.axValue,A=i.getTransform;function E(H,K,W,$,re){var de=d(re),ve=e(re),ue=s(re),ce=u(re),_e=l(re),fe=re==="drawline",ne=re==="drawcircle",ie=fe||ne,me=$.gd,we=me._fullLayout,be=we._zoomlayer,Me=$.element.getBoundingClientRect(),Ie=$.plotinfo,Ke=A(Ie),Oe=K-Me.left,We=W-Me.top;we._calcInverseTransform(me);var Fe=T.apply3DTransform(we._invTransform)(Oe,We);Oe=Fe[0],We=Fe[1];var Ge=we._invScaleX,Xe=we._invScaleY,ut=Oe,rt=We,dt="M"+Oe+","+We,st=$.xaxes[0]._length,Ve=$.yaxes[0]._length,Je=$.xaxes.concat($.yaxes),ke=H.altKey&&!(u(re)&&ue),Le,Be,pe,Ae,Ce,Se,He;G(H,me,$),de&&(Le=m([[Oe,We]],h.BENDPX));var Ne=be.selectAll("path.select-outline-"+Ie.id).data(ce?[0]:[1,2]),qe=we.newshape;Ne.enter().append("path").attr("class",function(Bt){return"select-outline select-outline-"+Bt+" select-outline-"+Ie.id}).style(ce?{opacity:qe.opacity/2,fill:ue?void 0:qe.fillcolor,stroke:qe.line.color,"stroke-dasharray":N(qe.line.dash,qe.line.width),"stroke-width":qe.line.width+"px"}:{}).attr("fill-rule",qe.fillrule).classed("cursor-move",!!ce).attr("transform",Ke).attr("d",dt+"Z");var at=be.append("path").attr("class","zoombox-corners").style({fill:D.background,stroke:D.defaultLine,"stroke-width":1}).attr("transform",Ke).attr("d","M0,0Z"),nt=we._uid+h.SELECTID,Ze=[],ht=q(me,$.xaxes,$.yaxes,$.subplot);function kt(Bt,Zt){return Bt-Zt}var xt;Ie.fillRangeItems?xt=Ie.fillRangeItems:ve?xt=function(Bt,Zt){var Gt=Bt.range={};for(Ce=0;Ce<Je.length;Ce++){var Rt=Je[Ce],Wt=Rt._id.charAt(0);Gt[Rt._id]=[r(Rt,Zt[Wt+"min"]),r(Rt,Zt[Wt+"max"])].sort(kt)}}:xt=function(Bt,Zt,Gt){var Rt=Bt.lassoPoints={};for(Ce=0;Ce<Je.length;Ce++){var Wt=Je[Ce];Rt[Wt._id]=Gt.filtered.map(x(Wt))}},$.moveFn=function(Bt,Zt){ut=Math.max(0,Math.min(st,Ge*Bt+Oe)),rt=Math.max(0,Math.min(Ve,Xe*Zt+We));var Gt=Math.abs(ut-Oe),Rt=Math.abs(rt-We);if(ve){var Wt,It,vt;if(_e){var Yt=we.selectdirection;switch(Yt==="any"?Rt<Math.min(Gt*.6,c)?Wt="h":Gt<Math.min(Rt*.6,c)?Wt="v":Wt="d":Wt=Yt,Wt){case"h":It=ne?Ve/2:0,vt=Ve;break;case"v":It=ne?st/2:0,vt=st;break}}if(ce)switch(we.newshape.drawdirection){case"vertical":Wt="h",It=ne?Ve/2:0,vt=Ve;break;case"horizontal":Wt="v",It=ne?st/2:0,vt=st;break;case"ortho":Gt<Rt?(Wt="h",It=We,vt=rt):(Wt="v",It=Oe,vt=ut);break;default:Wt="d"}Wt==="h"?(Ae=ie?v(ne,[ut,It],[ut,vt]):[[Oe,It],[Oe,vt],[ut,vt],[ut,It]],Ae.xmin=ie?ut:Math.min(Oe,ut),Ae.xmax=ie?ut:Math.max(Oe,ut),Ae.ymin=Math.min(It,vt),Ae.ymax=Math.max(It,vt),at.attr("d","M"+Ae.xmin+","+(We-c)+"h-4v"+2*c+"h4ZM"+(Ae.xmax-1)+","+(We-c)+"h4v"+2*c+"h-4Z")):Wt==="v"?(Ae=ie?v(ne,[It,rt],[vt,rt]):[[It,We],[It,rt],[vt,rt],[vt,We]],Ae.xmin=Math.min(It,vt),Ae.xmax=Math.max(It,vt),Ae.ymin=ie?rt:Math.min(We,rt),Ae.ymax=ie?rt:Math.max(We,rt),at.attr("d","M"+(Oe-c)+","+Ae.ymin+"v-4h"+2*c+"v4ZM"+(Oe-c)+","+(Ae.ymax-1)+"v4h"+2*c+"v-4Z")):Wt==="d"&&(Ae=ie?v(ne,[Oe,We],[ut,rt]):[[Oe,We],[Oe,rt],[ut,rt],[ut,We]],Ae.xmin=Math.min(Oe,ut),Ae.xmax=Math.max(Oe,ut),Ae.ymin=Math.min(We,rt),Ae.ymax=Math.max(We,rt),at.attr("d","M0,0Z"))}else de&&(Le.addPt([ut,rt]),Ae=Le.filtered);$.selectionDefs&&$.selectionDefs.length?(pe=Y($.mergedPolygons,Ae,ke),Ae.subtract=ke,Be=I($.selectionDefs.concat([Ae]))):(pe=[Ae],Be=o(Ae)),b(X(pe,ue),Ne,$),_e&&f.throttle(nt,h.SELECTDELAY,function(){Ze=[];var Ft,ye=[],ge;for(Ce=0;Ce<ht.length;Ce++)if(Se=ht[Ce],ge=Se._module.selectPoints(Se,Be),ye.push(ge),Ft=j(ge,Se),Ze.length)for(var Re=0;Re<Ft.length;Re++)Ze.push(Ft[Re]);else Ze=Ft;He={points:Ze},B(me,ht,He),xt(He,Ae,Le),$.gd.emit("plotly_selecting",He)})},$.clickFn=function(Bt,Zt){if(at.remove(),me._fullLayout._activeShapeIndex>=0){me._fullLayout._deactivateShape(me);return}if(!ce){var Gt=we.clickmode;f.done(nt).then(function(){if(f.clear(nt),Bt===2){for(Ne.remove(),Ce=0;Ce<ht.length;Ce++)Se=ht[Ce],Se._module.selectPoints(Se,!1);B(me,ht),V($),me.emit("plotly_deselect",null)}else Gt.indexOf("select")>-1&&P(Zt,me,$.xaxes,$.yaxes,$.subplot,$,Ne),Gt==="event"&&me.emit("plotly_selected",void 0);p.click(me,Zt)}).catch(T.error)}},$.doneFn=function(){at.remove(),f.done(nt).then(function(){f.clear(nt),$.gd.emit("plotly_selected",He),Ae&&$.selectionDefs&&(Ae.subtract=ke,$.selectionDefs.push(Ae),$.mergedPolygons.length=0,[].push.apply($.mergedPolygons,pe)),$.doneFnCompleted&&$.doneFnCompleted(Ze)}).catch(T.error),ce&&V($)}}function P(H,K,W,$,re,de,ve){var ue=K._hoverdata,ce=K._fullLayout,_e=ce.clickmode,fe=_e.indexOf("event")>-1,ne=[],ie,me,we,be,Me,Ie,Ke,Oe,We,Fe;if(ee(ue)){G(H,K,de),ie=q(K,W,$,re);var Ge=Q(ue,ie),Xe=Ge.pointNumbers.length>0;if(Xe?O(ie,Ge):Z(ie)&&(Ke=U(Ge))){for(ve&&ve.remove(),Fe=0;Fe<ie.length;Fe++)me=ie[Fe],me._module.selectPoints(me,!1);B(K,ie),V(de),fe&&K.emit("plotly_deselect",null)}else{Oe=H.shiftKey&&(Ke!==void 0?Ke:U(Ge)),we=S(Ge.pointNumber,Ge.searchInfo,Oe);var ut=de.selectionDefs.concat([we]);for(be=I(ut),Fe=0;Fe<ie.length;Fe++)if(Me=ie[Fe]._module.selectPoints(ie[Fe],be),Ie=j(Me,ie[Fe]),ne.length)for(var rt=0;rt<Ie.length;rt++)ne.push(Ie[rt]);else ne=Ie;if(We={points:ne},B(K,ie,We),we&&de&&de.selectionDefs.push(we),ve){var dt=de.mergedPolygons,st=s(de.dragmode);b(X(dt,st),ve,de)}fe&&K.emit("plotly_selected",We)}}}function S(H,K,W){return{pointNumber:H,searchInfo:K,subtract:W}}function C(H){return"pointNumber"in H&&"searchInfo"in H}function M(H){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(K,W,$,re){var de=H.searchInfo.cd[0].trace._expandedIndex,ve=re.cd[0].trace._expandedIndex;return ve===de&&$===H.pointNumber},isRect:!1,degenerate:!1,subtract:H.subtract}}function I(H){for(var K=[],W=C(H[0])?0:H[0][0][0],$=W,re=C(H[0])?0:H[0][0][1],de=re,ve=0;ve<H.length;ve++)if(C(H[ve]))K.push(M(H[ve]));else{var ue=_.tester(H[ve]);ue.subtract=H[ve].subtract,K.push(ue),W=Math.min(W,ue.xmin),$=Math.max($,ue.xmax),re=Math.min(re,ue.ymin),de=Math.max(de,ue.ymax)}function ce(_e,fe,ne,ie){for(var me=!1,we=0;we<K.length;we++)K[we].contains(_e,fe,ne,ie)&&(me=K[we].subtract===!1);return me}return{xmin:W,xmax:$,ymin:re,ymax:de,pts:[],contains:ce,isRect:!1,degenerate:!1}}function G(H,K,W){K._fullLayout._drawing=!1;var $=K._fullLayout,re=W.plotinfo,de=W.dragmode,ve=$._lastSelectedSubplot&&$._lastSelectedSubplot===re.id,ue=(H.shiftKey||H.altKey)&&!(u(de)&&s(de));ve&&ue&&re.selection&&re.selection.selectionDefs&&!W.selectionDefs?(W.selectionDefs=re.selection.selectionDefs,W.mergedPolygons=re.selection.mergedPolygons):(!ue||!re.selection)&&V(W),ve||(t(K),$._lastSelectedSubplot=re.id)}function V(H){var K=H.dragmode,W=H.plotinfo,$=H.gd;if($._fullLayout._activeShapeIndex>=0&&$._fullLayout._deactivateShape($),u(K)){var re=$._fullLayout,de=re._zoomlayer,ve=de.selectAll(".select-outline-"+W.id);if(ve&&$._fullLayout._drawing){var ue=y(ve,H);ue&&L.call("_guiRelayout",$,{shapes:ue}),$._fullLayout._drawing=!1}}W.selection={},W.selection.selectionDefs=H.selectionDefs=[],W.selection.mergedPolygons=H.mergedPolygons=[]}function q(H,K,W,$){var re=[],de=K.map(function(me){return me._id}),ve=W.map(function(me){return me._id}),ue,ce,_e;for(_e=0;_e<H.calcdata.length;_e++)if(ue=H.calcdata[_e],ce=ue[0].trace,!(ce.visible!==!0||!ce._module||!ce._module.selectPoints))if($&&(ce.subplot===$||ce.geo===$))re.push(ie(ce._module,ue,K[0],W[0]));else if(ce.type==="splom"&&ce._xaxes[de[0]]&&ce._yaxes[ve[0]]){var fe=ie(ce._module,ue,K[0],W[0]);fe.scene=H._fullLayout._splomScenes[ce.uid],re.push(fe)}else if(ce.type==="sankey"){var ne=ie(ce._module,ue,K[0],W[0]);re.push(ne)}else{if(de.indexOf(ce.xaxis)===-1||ve.indexOf(ce.yaxis)===-1)continue;re.push(ie(ce._module,ue,g(H,ce.xaxis),g(H,ce.yaxis)))}return re;function ie(me,we,be,Me){return{_module:me,cd:we,xaxis:be,yaxis:Me}}}function ee(H){return H&&Array.isArray(H)&&H[0].hoverOnBox!==!0}function Q(H,K){var W=H[0],$=-1,re=[],de,ve;for(ve=0;ve<K.length;ve++)if(de=K[ve],W.fullData._expandedIndex===de.cd[0].trace._expandedIndex){if(W.hoverOnBox===!0)break;W.pointNumber!==void 0?$=W.pointNumber:W.binNumber!==void 0&&($=W.binNumber,re=W.pointNumbers);break}return{pointNumber:$,pointNumbers:re,searchInfo:de}}function U(H){var K=H.searchInfo.cd[0].trace,W=H.pointNumber,$=H.pointNumbers,re=$.length>0,de=re?$[0]:W;return K.selectedpoints?K.selectedpoints.indexOf(de)>-1:!1}function O(H,K){var W=[],$,re,de,ve;for(ve=0;ve<H.length;ve++)$=H[ve],$.cd[0].trace.selectedpoints&&$.cd[0].trace.selectedpoints.length>0&&W.push($);if(W.length===1&&(de=W[0]===K.searchInfo,de&&(re=K.searchInfo.cd[0].trace,re.selectedpoints.length===K.pointNumbers.length))){for(ve=0;ve<K.pointNumbers.length;ve++)if(re.selectedpoints.indexOf(K.pointNumbers[ve])<0)return!1;return!0}return!1}function Z(H){var K=0,W,$,re;for(re=0;re<H.length;re++)if(W=H[re],$=W.cd[0].trace,$.selectedpoints&&($.selectedpoints.length>1||(K+=$.selectedpoints.length,K>1)))return!1;return K===1}function B(H,K,W){var $,re,de,ve;for($=0;$<K.length;$++){var ue=K[$].cd[0].trace._fullInput,ce=H._fullLayout._tracePreGUI[ue.uid]||{};ce.selectedpoints===void 0&&(ce.selectedpoints=ue._input.selectedpoints||null)}if(W){var _e=W.points||[];for($=0;$<K.length;$++)ve=K[$].cd[0].trace,ve._input.selectedpoints=ve._fullInput.selectedpoints=[],ve._fullInput!==ve&&(ve.selectedpoints=[]);for($=0;$<_e.length;$++){var fe=_e[$],ne=fe.data,ie=fe.fullData;fe.pointIndices?([].push.apply(ne.selectedpoints,fe.pointIndices),ve._fullInput!==ve&&[].push.apply(ie.selectedpoints,fe.pointIndices)):(ne.selectedpoints.push(fe.pointIndex),ve._fullInput!==ve&&ie.selectedpoints.push(fe.pointIndex))}}else for($=0;$<K.length;$++)ve=K[$].cd[0].trace,delete ve.selectedpoints,delete ve._input.selectedpoints,ve._fullInput!==ve&&delete ve._fullInput.selectedpoints;var me=!1;for($=0;$<K.length;$++){re=K[$],de=re.cd,ve=de[0].trace,L.traceIs(ve,"regl")&&(me=!0);var we=re._module,be=we.styleOnSelect||we.style;be&&(be(H,de,de[0].node3),de[0].nodeRangePlot3&&be(H,de,de[0].nodeRangePlot3))}me&&(n(H),a(H))}function Y(H,K,W){var $;return W?($=R.difference({regions:H,inverted:!1},{regions:[K],inverted:!1}),$.regions):($=R.union({regions:H,inverted:!1},{regions:[K],inverted:!1}),$.regions)}function j(H,K){if(Array.isArray(H))for(var W=K.cd,$=K.cd[0].trace,re=0;re<H.length;re++)H[re]=w(H[re],$,W);return H}function X(H,K){for(var W=[],$=0;$<H.length;$++){W[$]=[];for(var re=0;re<H[$].length;re++){W[$][re]=[],W[$][re][0]=re?"L":"M";for(var de=0;de<H[$][re].length;de++)W[$][re].push(H[$][re][de])}K||W[$].push(["Z",W[$][0][1],W[$][0][2]])}return W}le.exports={prepSelect:E,clearSelect:t,clearSelectionsCache:V,selectOnClick:P}},{"../../components/color":119,"../../components/dragelement/helpers":137,"../../components/drawing":141,"../../components/fx":159,"../../components/fx/helpers":155,"../../components/shapes/draw_newshape/display_outlines":207,"../../components/shapes/draw_newshape/helpers":208,"../../components/shapes/draw_newshape/newshapes":209,"../../lib":252,"../../lib/clear_gl_canvases":239,"../../lib/polygon":264,"../../lib/throttle":278,"../../plot_api/subroutines":291,"../../registry":352,"./axis_ids":305,"./constants":308,"./handle_outline":312,"./helpers":313,polybooljs:73}],323:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("d3-time-format").utcFormat,N=z("../../lib"),D=N.numberFormat,p=z("fast-isnumeric"),w=N.cleanNumber,k=N.ms2DateTime,d=N.dateTime2ms,e=N.ensureNumber,u=N.isArrayOrTypedArray,s=z("../../constants/numerical"),l=s.FP_SAFE,b=s.BADNUM,v=s.LOG_CLIP,y=s.ONEWEEK,T=s.ONEDAY,_=s.ONEHOUR,f=s.ONEMIN,g=s.ONESEC,n=z("./axis_ids"),a=z("./constants"),h=a.HOUR_PATTERN,c=a.WEEKDAY_PATTERN;function m(t){return Math.pow(10,t)}function o(t){return t!=null}le.exports=function(i,r){r=r||{};var x=i._id||"x",A=x.charAt(0);function E(Y,j){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&j&&i.range&&i.range.length===2){var X=i.range[0],H=i.range[1];return .5*(X+H-2*v*Math.abs(X-H))}else return b}function P(Y,j,X,H){if((H||{}).msUTC&&p(Y))return+Y;var K=d(Y,X||i.calendar);if(K===b)if(p(Y)){Y=+Y;var W=Math.floor(N.mod(Y+.05,1)*10),$=Math.round(Y-W/10);K=d(new Date($))+W/10}else return b;return K}function S(Y,j,X){return k(Y,j,X||i.calendar)}function C(Y){return i._categories[Math.round(Y)]}function M(Y){if(o(Y)){if(i._categoriesMap===void 0&&(i._categoriesMap={}),i._categoriesMap[Y]!==void 0)return i._categoriesMap[Y];i._categories.push(typeof Y=="number"?String(Y):Y);var j=i._categories.length-1;return i._categoriesMap[Y]=j,j}return b}function I(Y,j){for(var X=new Array(j),H=0;H<j;H++){var K=(Y[0]||[])[H],W=(Y[1]||[])[H];X[H]=G([K,W])}return X}function G(Y){if(i._categoriesMap)return i._categoriesMap[Y]}function V(Y){var j=G(Y);if(j!==void 0)return j;if(p(Y))return+Y}function q(Y){return p(Y)?+Y:G(Y)}function ee(Y,j,X){return R.round(X+j*Y,2)}function Q(Y,j,X){return(Y-X)/j}var U=function(j){return p(j)?ee(j,i._m,i._b):b},O=function(Y){return Q(Y,i._m,i._b)};if(i.rangebreaks){var Z=A==="y";U=function(Y){if(!p(Y))return b;var j=i._rangebreaks.length;if(!j)return ee(Y,i._m,i._b);var X=Z;i.range[0]>i.range[1]&&(X=!X);for(var H=X?-1:1,K=H*Y,W=0,$=0;$<j;$++){var re=H*i._rangebreaks[$].min,de=H*i._rangebreaks[$].max;if(K<re)break;if(K>de)W=$+1;else{W=K<(re+de)/2?$:$+1;break}}var ve=i._B[W]||0;return isFinite(ve)?ee(Y,i._m2,ve):0},O=function(Y){var j=i._rangebreaks.length;if(!j)return Q(Y,i._m,i._b);for(var X=0,H=0;H<j&&!(Y<i._rangebreaks[H].pmin);H++)Y>i._rangebreaks[H].pmax&&(X=H+1);return Q(Y,i._m2,i._B[X])}}i.c2l=i.type==="log"?E:e,i.l2c=i.type==="log"?m:e,i.l2p=U,i.p2l=O,i.c2p=i.type==="log"?function(Y,j){return U(E(Y,j))}:U,i.p2c=i.type==="log"?function(Y){return m(O(Y))}:O,["linear","-"].indexOf(i.type)!==-1?(i.d2r=i.r2d=i.d2c=i.r2c=i.d2l=i.r2l=w,i.c2d=i.c2r=i.l2d=i.l2r=e,i.d2p=i.r2p=function(Y){return i.l2p(w(Y))},i.p2d=i.p2r=O,i.cleanPos=e):i.type==="log"?(i.d2r=i.d2l=function(Y,j){return E(w(Y),j)},i.r2d=i.r2c=function(Y){return m(w(Y))},i.d2c=i.r2l=w,i.c2d=i.l2r=e,i.c2r=E,i.l2d=m,i.d2p=function(Y,j){return i.l2p(i.d2r(Y,j))},i.p2d=function(Y){return m(O(Y))},i.r2p=function(Y){return i.l2p(w(Y))},i.p2r=O,i.cleanPos=e):i.type==="date"?(i.d2r=i.r2d=N.identity,i.d2c=i.r2c=i.d2l=i.r2l=P,i.c2d=i.c2r=i.l2d=i.l2r=S,i.d2p=i.r2p=function(Y,j,X){return i.l2p(P(Y,0,X))},i.p2d=i.p2r=function(Y,j,X){return S(O(Y),j,X)},i.cleanPos=function(Y){return N.cleanDate(Y,b,i.calendar)}):i.type==="category"?(i.d2c=i.d2l=M,i.r2d=i.c2d=i.l2d=C,i.d2r=i.d2l_noadd=V,i.r2c=function(Y){var j=q(Y);return j!==void 0?j:i.fraction2r(.5)},i.l2r=i.c2r=e,i.r2l=q,i.d2p=function(Y){return i.l2p(i.r2c(Y))},i.p2d=function(Y){return C(O(Y))},i.r2p=i.d2p,i.p2r=O,i.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:e(Y)}):i.type==="multicategory"&&(i.r2d=i.c2d=i.l2d=C,i.d2r=i.d2l_noadd=V,i.r2c=function(Y){var j=V(Y);return j!==void 0?j:i.fraction2r(.5)},i.r2c_just_indices=G,i.l2r=i.c2r=e,i.r2l=V,i.d2p=function(Y){return i.l2p(i.r2c(Y))},i.p2d=function(Y){return C(O(Y))},i.r2p=i.d2p,i.p2r=O,i.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:e(Y)},i.setupMultiCategory=function(Y){var j=i._traceIndices,X,H,K=i._matchGroup;if(K&&i._categories.length===0){for(var W in K)if(W!==x){var $=r[n.id2name(W)];j=j.concat($._traceIndices)}}var re=[[0,{}],[0,{}]],de=[];for(X=0;X<j.length;X++){var ve=Y[j[X]];if(A in ve){var ue=ve[A],ce=ve._length||N.minRowLength(ue);if(u(ue[0])&&u(ue[1]))for(H=0;H<ce;H++){var _e=ue[0][H],fe=ue[1][H];o(_e)&&o(fe)&&(de.push([_e,fe]),_e in re[0][1]||(re[0][1][_e]=re[0][0]++),fe in re[1][1]||(re[1][1][fe]=re[1][0]++))}}}for(de.sort(function(ne,ie){var me=re[0][1],we=me[ne[0]]-me[ie[0]];if(we)return we;var be=re[1][1];return be[ne[1]]-be[ie[1]]}),X=0;X<de.length;X++)M(de[X])}),i.fraction2r=function(Y){var j=i.r2l(i.range[0]),X=i.r2l(i.range[1]);return i.l2r(j+Y*(X-j))},i.r2fraction=function(Y){var j=i.r2l(i.range[0]),X=i.r2l(i.range[1]);return(i.r2l(Y)-j)/(X-j)},i.cleanRange=function(Y,j){j||(j={}),Y||(Y="range");var X=N.nestedProperty(i,Y).get(),H,K;if(i.type==="date"?K=N.dfltRange(i.calendar):A==="y"?K=a.DFLTRANGEY:i._name==="realaxis"?K=[0,1]:K=j.dfltRange||a.DFLTRANGEX,K=K.slice(),(i.rangemode==="tozero"||i.rangemode==="nonnegative")&&(K[0]=0),!X||X.length!==2){N.nestedProperty(i,Y).set(K);return}for(i.type==="date"&&!i.autorange&&(X[0]=N.cleanDate(X[0],b,i.calendar),X[1]=N.cleanDate(X[1],b,i.calendar)),H=0;H<2;H++)if(i.type==="date"){if(!N.isDateTime(X[H],i.calendar)){i[Y]=K;break}if(i.r2l(X[0])===i.r2l(X[1])){var W=N.constrain(i.r2l(X[0]),N.MIN_MS+1e3,N.MAX_MS-1e3);X[0]=i.l2r(W-1e3),X[1]=i.l2r(W+1e3);break}}else{if(!p(X[H]))if(p(X[1-H]))X[H]=X[1-H]*(H?10:.1);else{i[Y]=K;break}if(X[H]<-l?X[H]=-l:X[H]>l&&(X[H]=l),X[0]===X[1]){var $=Math.max(1,Math.abs(X[0]*1e-6));X[0]-=$,X[1]+=$}}},i.setScale=function(Y){var j=r._size;if(i.overlaying){var X=n.getFromId({_fullLayout:r},i.overlaying);i.domain=X.domain}var H=Y&&i._r?"_r":"range",K=i.calendar;i.cleanRange(H);var W=i.r2l(i[H][0],K),$=i.r2l(i[H][1],K),re=A==="y";if(re?(i._offset=j.t+(1-i.domain[1])*j.h,i._length=j.h*(i.domain[1]-i.domain[0]),i._m=i._length/(W-$),i._b=-i._m*$):(i._offset=j.l+i.domain[0]*j.w,i._length=j.w*(i.domain[1]-i.domain[0]),i._m=i._length/($-W),i._b=-i._m*W),i._rangebreaks=[],i._lBreaks=0,i._m2=0,i._B=[],i.rangebreaks){var de,ve;if(i._rangebreaks=i.locateBreaks(Math.min(W,$),Math.max(W,$)),i._rangebreaks.length){for(de=0;de<i._rangebreaks.length;de++)ve=i._rangebreaks[de],i._lBreaks+=Math.abs(ve.max-ve.min);var ue=re;W>$&&(ue=!ue),ue&&i._rangebreaks.reverse();var ce=ue?-1:1;for(i._m2=ce*i._length/(Math.abs($-W)-i._lBreaks),i._B.push(-i._m2*(re?$:W)),de=0;de<i._rangebreaks.length;de++)ve=i._rangebreaks[de],i._B.push(i._B[i._B.length-1]-ce*i._m2*(ve.max-ve.min));for(de=0;de<i._rangebreaks.length;de++)ve=i._rangebreaks[de],ve.pmin=U(ve.min),ve.pmax=U(ve.max)}}if(!isFinite(i._m)||!isFinite(i._b)||i._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},i.maskBreaks=function(Y){var j=i.rangebreaks||[],X,H,K,W,$;j._cachedPatterns||(j._cachedPatterns=j.map(function(me){return me.enabled&&me.bounds?N.simpleMap(me.bounds,me.pattern?w:i.d2c):null})),j._cachedValues||(j._cachedValues=j.map(function(me){return me.enabled&&me.values?N.simpleMap(me.values,i.d2c).sort(N.sorterAsc):null}));for(var re=0;re<j.length;re++){var de=j[re];if(de.enabled){if(de.bounds){var ve=de.pattern;switch(X=j._cachedPatterns[re],H=X[0],K=X[1],ve){case c:$=new Date(Y),W=$.getUTCDay(),H>K&&(K+=7,W<H&&(W+=7));break;case h:$=new Date(Y);var ue=$.getUTCHours(),ce=$.getUTCMinutes(),_e=$.getUTCSeconds(),fe=$.getUTCMilliseconds();W=ue+(ce/60+_e/3600+fe/36e5),H>K&&(K+=24,W<H&&(W+=24));break;case"":W=Y;break}if(W>=H&&W<K)return b}else for(var ne=j._cachedValues[re],ie=0;ie<ne.length;ie++)if(H=ne[ie],K=H+de.dvalue,Y>=H&&Y<K)return b}}return Y},i.locateBreaks=function(Y,j){var X,H,K,W,$=[];if(!i.rangebreaks)return $;var re=i.rangebreaks.slice().sort(function(be,Me){return be.pattern===c&&Me.pattern===h?-1:Me.pattern===c&&be.pattern===h?1:0}),de=function(be,Me){if(be=N.constrain(be,Y,j),Me=N.constrain(Me,Y,j),be!==Me){for(var Ie=!0,Ke=0;Ke<$.length;Ke++){var Oe=$[Ke];be<Oe.max&&Me>=Oe.min&&(be<Oe.min&&(Oe.min=be),Me>Oe.max&&(Oe.max=Me),Ie=!1)}Ie&&$.push({min:be,max:Me})}};for(X=0;X<re.length;X++){var ve=re[X];if(ve.enabled)if(ve.bounds){var ue=Y,ce=j;ve.pattern&&(ue=Math.floor(ue)),H=N.simpleMap(ve.bounds,ve.pattern?w:i.r2l),K=H[0],W=H[1];var _e=new Date(ue),fe,ne;switch(ve.pattern){case c:ne=y,fe=((W<K?7:0)+(W-K))*T,ue+=K*T-(_e.getUTCDay()*T+_e.getUTCHours()*_+_e.getUTCMinutes()*f+_e.getUTCSeconds()*g+_e.getUTCMilliseconds());break;case h:ne=T,fe=((W<K?24:0)+(W-K))*_,ue+=K*_-(_e.getUTCHours()*_+_e.getUTCMinutes()*f+_e.getUTCSeconds()*g+_e.getUTCMilliseconds());break;default:ue=Math.min(H[0],H[1]),ce=Math.max(H[0],H[1]),ne=ce-ue,fe=ne}for(var ie=ue;ie<ce;ie+=ne)de(ie,ie+fe)}else for(var me=N.simpleMap(ve.values,i.d2c),we=0;we<me.length;we++)K=me[we],W=K+ve.dvalue,de(K,W)}return $.sort(function(be,Me){return be.min-Me.min}),$},i.makeCalcdata=function(Y,j,X){var H,K,W,$,re=i.type,de=re==="date"&&Y[j+"calendar"];if(j in Y){if(H=Y[j],$=Y._length||N.minRowLength(H),N.isTypedArray(H)&&(re==="linear"||re==="log")){if($===H.length)return H;if(H.subarray)return H.subarray(0,$)}if(re==="multicategory")return I(H,$);for(K=new Array($),W=0;W<$;W++)K[W]=i.d2c(H[W],0,de,X)}else{var ve=j+"0"in Y?i.d2c(Y[j+"0"],0,de):0,ue=Y["d"+j]?Number(Y["d"+j]):1;for(H=Y[{x:"y",y:"x"}[j]],$=Y._length||H.length,K=new Array($),W=0;W<$;W++)K[W]=ve+W*ue}if(i.rangebreaks)for(W=0;W<$;W++)K[W]=i.maskBreaks(K[W]);return K},i.isValidRange=function(Y){return Array.isArray(Y)&&Y.length===2&&p(i.r2l(Y[0]))&&p(i.r2l(Y[1]))},i.isPtWithinRange=function(Y,j){var X=i.c2l(Y[A],null,j),H=i.r2l(i.range[0]),K=i.r2l(i.range[1]);return H<K?H<=X&&X<=K:K<=X&&X<=H},i._emptyCategories=function(){i._categories=[],i._categoriesMap={}},i.clearCalc=function(){var Y=i._matchGroup;if(Y){var j=null,X=null;for(var H in Y){var K=r[n.id2name(H)];if(K._categories){j=K._categories,X=K._categoriesMap;break}}j&&X?(i._categories=j,i._categoriesMap=X):i._emptyCategories()}else i._emptyCategories();if(i._initialCategories)for(var W=0;W<i._initialCategories.length;W++)M(i._initialCategories[W])},i.sortByInitialCategories=function(){var Y=[];if(i._emptyCategories(),i._initialCategories)for(var j=0;j<i._initialCategories.length;j++)M(i._initialCategories[j]);Y=Y.concat(i._traceIndices);var X=i._matchGroup;for(var H in X)if(x!==H){var K=r[n.id2name(H)];K._categories=i._categories,K._categoriesMap=i._categoriesMap,Y=Y.concat(K._traceIndices)}return Y};var B=r._d3locale;i.type==="date"&&(i._dateFormat=B?B.timeFormat:L,i._extraFormat=r._extraFormat),i._separators=r.separators,i._numFormat=B?B.numberFormat:D,delete i._minDtick,delete i._forceTick0}},{"../../constants/numerical":231,"../../lib":252,"./axis_ids":305,"./constants":308,"@plotly/d3":16,"d3-time-format":26,"fast-isnumeric":31}],324:[function(z,le,ae){"use strict";le.exports=function(L){var N=["showexponent","showtickprefix","showticksuffix"],D=N.filter(function(w){return L[w]!==void 0}),p=function(w){return L[w]===L[D[0]]};if(D.every(p)||D.length===1)return L[D[0]]}},{}],325:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/color").contrast,N=z("./layout_attributes"),D=z("./show_dflt"),p=z("../array_container_defaults");le.exports=function(d,e,u,s,l){l||(l={});var b=D(d),v=u("showticklabels");if(v){var y=l.font||{},T=e.color,_=e.ticklabelposition||"",f=_.indexOf("inside")!==-1?L(l.bgColor):T&&T!==N.color.dflt?T:y.color;if(R.coerceFont(u,"tickfont",{family:y.family,size:y.size,color:f}),!l.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&u("ticklabelstep"),l.noAng||u("tickangle"),s!=="category"){var g=u("tickformat");p(d,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:w}),e.tickformatstops.length||delete e.tickformatstops,!l.noExp&&!g&&s!=="date"&&(u("showexponent",b),u("exponentformat"),u("minexponent"),u("separatethousands"))}}};function w(k,d){function e(s,l){return R.coerce(k,d,N.tickformatstops,s,l)}var u=e("enabled");u&&(e("dtickrange"),e("value"))}},{"../../components/color":119,"../../lib":252,"../array_container_defaults":296,"./layout_attributes":316,"./show_dflt":324}],326:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./layout_attributes");le.exports=function(D,p,w,k){var d=R.coerce2(D,p,L,"ticklen"),e=R.coerce2(D,p,L,"tickwidth"),u=R.coerce2(D,p,L,"tickcolor",p.color),s=w("ticks",k.outerTicks||d||e||u?"outside":"");s||(delete p.ticklen,delete p.tickwidth,delete p.tickcolor)}},{"../../lib":252,"./layout_attributes":316}],327:[function(z,le,ae){"use strict";var R=z("./clean_ticks"),L=z("../../lib").isArrayOrTypedArray;le.exports=function(D,p,w,k){function d(T){var _=D[T];return _!==void 0?_:(p._template||{})[T]}var e=d("tick0"),u=d("dtick"),s=d("tickvals"),l=L(s)?"array":u?"linear":"auto",b=w("tickmode",l);if(b==="auto")w("nticks");else if(b==="linear"){var v=p.dtick=R.dtick(u,k);p.tick0=R.tick0(e,k,p.calendar,v)}else if(k!=="multicategory"){var y=w("tickvals");y===void 0?p.tickmode="auto":w("ticktext")}}},{"../../lib":252,"./clean_ticks":307}],328:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../lib"),D=z("../../components/drawing"),p=z("./axes");le.exports=function(k,d,e,u){var s=k._fullLayout;if(d.length===0){p.redrawComponents(k);return}function l(h){var c=h.xaxis,m=h.yaxis;s._defs.select("#"+h.clipId+"> rect").call(D.setTranslate,0,0).call(D.setScale,1,1),h.plot.call(D.setTranslate,c._offset,m._offset).call(D.setScale,1,1);var o=h.plot.selectAll(".scatterlayer .trace");o.selectAll(".point").call(D.setPointGroupScale,1,1),o.selectAll(".textpoint").call(D.setTextPointsScale,1,1),o.call(D.hideOutsideRangePoints,h)}function b(h,c){var m=h.plotinfo,o=m.xaxis,t=m.yaxis,i=o._length,r=t._length,x=!!h.xr1,A=!!h.yr1,E=[];if(x){var P=N.simpleMap(h.xr0,o.r2l),S=N.simpleMap(h.xr1,o.r2l),C=P[1]-P[0],M=S[1]-S[0];E[0]=(P[0]*(1-c)+c*S[0]-P[0])/(P[1]-P[0])*i,E[2]=i*(1-c+c*M/C),o.range[0]=o.l2r(P[0]*(1-c)+c*S[0]),o.range[1]=o.l2r(P[1]*(1-c)+c*S[1])}else E[0]=0,E[2]=i;if(A){var I=N.simpleMap(h.yr0,t.r2l),G=N.simpleMap(h.yr1,t.r2l),V=I[1]-I[0],q=G[1]-G[0];E[1]=(I[1]*(1-c)+c*G[1]-I[1])/(I[0]-I[1])*r,E[3]=r*(1-c+c*q/V),t.range[0]=o.l2r(I[0]*(1-c)+c*G[0]),t.range[1]=t.l2r(I[1]*(1-c)+c*G[1])}else E[1]=0,E[3]=r;p.drawOne(k,o,{skipTitle:!0}),p.drawOne(k,t,{skipTitle:!0}),p.redrawComponents(k,[o._id,t._id]);var ee=x?i/E[2]:1,Q=A?r/E[3]:1,U=x?E[0]:0,O=A?E[1]:0,Z=x?E[0]/E[2]*i:0,B=A?E[1]/E[3]*r:0,Y=o._offset-Z,j=t._offset-B;m.clipRect.call(D.setTranslate,U,O).call(D.setScale,1/ee,1/Q),m.plot.call(D.setTranslate,Y,j).call(D.setScale,ee,Q),D.setPointGroupScale(m.zoomScalePts,1/ee,1/Q),D.setTextPointsScale(m.zoomScaleTxt,1/ee,1/Q)}var v;u&&(v=u());function y(){for(var h={},c=0;c<d.length;c++){var m=d[c],o=m.plotinfo.xaxis,t=m.plotinfo.yaxis;m.xr1&&(h[o._name+".range"]=m.xr1.slice()),m.yr1&&(h[t._name+".range"]=m.yr1.slice())}return v&&v(),L.call("relayout",k,h).then(function(){for(var i=0;i<d.length;i++)l(d[i].plotinfo)})}function T(){for(var h={},c=0;c<d.length;c++){var m=d[c],o=m.plotinfo.xaxis,t=m.plotinfo.yaxis;m.xr0&&(h[o._name+".range"]=m.xr0.slice()),m.yr0&&(h[t._name+".range"]=m.yr0.slice())}return L.call("relayout",k,h).then(function(){for(var i=0;i<d.length;i++)l(d[i].plotinfo)})}var _,f,g,n=R.ease(e.easing);k._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(g),g=null,T()});function a(){f=Date.now();for(var h=Math.min(1,(f-_)/e.duration),c=n(h),m=0;m<d.length;m++)b(d[m],c);f-_>e.duration?(y(),g=window.cancelAnimationFrame(a)):g=window.requestAnimationFrame(a)}return _=Date.now(),g=window.requestAnimationFrame(a),Promise.resolve()}},{"../../components/drawing":141,"../../lib":252,"../../registry":352,"./axes":301,"@plotly/d3":16}],329:[function(z,le,ae){"use strict";var R=z("../../registry").traceIs,L=z("./axis_autotype");le.exports=function(d,e,u,s){u("autotypenumbers",s.autotypenumbersDflt);var l=u("type",(s.splomStash||{}).type);l==="-"&&(N(e,s.data),e.type==="-"?e.type="linear":d.type=e.type)};function N(k,d){if(k.type==="-"){var e=k._id,u=e.charAt(0),s;e.indexOf("scene")!==-1&&(e=u);var l=D(d,e,u);if(!!l){if(l.type==="histogram"&&u==={v:"y",h:"x"}[l.orientation||"v"]){k.type="linear";return}var b=u+"calendar",v=l[b],y={noMultiCategory:!R(l,"cartesian")||R(l,"noMultiCategory")};if(l.type==="box"&&l._hasPreCompStats&&u==={h:"x",v:"y"}[l.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=k.autotypenumbers,w(l,u)){var T=p(l),_=[];for(s=0;s<d.length;s++){var f=d[s];!R(f,"box-violin")||(f[u+"axis"]||u)!==e||(f[T]!==void 0?_.push(f[T][0]):f.name!==void 0?_.push(f.name):_.push("text"),f[b]!==v&&(v=void 0))}k.type=L(_,v,y)}else if(l.type==="splom"){var g=l.dimensions,n=g[l._axesDim[e]];n.visible&&(k.type=L(n.values,v,y))}else k.type=L(l[u]||[l[u+"0"]],v,y)}}}function D(k,d,e){for(var u=0;u<k.length;u++){var s=k[u];if(s.type==="splom"&&s._length>0&&(s["_"+e+"axes"]||{})[d])return s;if((s[e+"axis"]||e)===d){if(w(s,e))return s;if((s[e]||[]).length||s[e+"0"])return s}}}function p(k){return{v:"x",h:"y"}[k.orientation||"v"]}function w(k,d){var e=p(k),u=R(k,"box-violin"),s=R(k._fullInput||{},"candlestick");return u&&!s&&d===e&&k[e]===void 0&&k[e+"0"]===void 0}},{"../../registry":352,"./axis_autotype":302}],330:[function(z,le,ae){"use strict";var R=z("../registry"),L=z("../lib");ae.manageCommandObserver=function(d,e,u,s){var l={},b=!0;e&&e._commandObserver&&(l=e._commandObserver),l.cache||(l.cache={}),l.lookupTable={};var v=ae.hasSimpleAPICommandBindings(d,u,l.lookupTable);if(e&&e._commandObserver){if(v)return l;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,l}if(v){N(d,v,l.cache),l.check=function(){if(!!b){var f=N(d,v,l.cache);return f.changed&&s&&l.lookupTable[f.value]!==void 0&&(l.disable(),Promise.resolve(s({value:f.value,type:v.type,prop:v.prop,traces:v.traces,index:l.lookupTable[f.value]})).then(l.enable,l.enable)),f.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],T=0;T<y.length;T++)d._internalOn(y[T],l.check);l.remove=function(){for(var _=0;_<y.length;_++)d._removeInternalListener(y[_],l.check)}}else L.log("Unable to automatically bind plot updates to API command"),l.lookupTable={},l.remove=function(){};return l.disable=function(){b=!1},l.enable=function(){b=!0},e&&(e._commandObserver=l),l},ae.hasSimpleAPICommandBindings=function(d,e,u){var s,l=e.length,b;for(s=0;s<l;s++){var v,y=e[s],T=y.method,_=y.args;if(Array.isArray(_)||(_=[]),!T)return!1;var f=ae.computeAPICommandBindings(d,T,_);if(f.length!==1)return!1;if(!b)b=f[0],Array.isArray(b.traces)&&b.traces.sort();else{if(v=f[0],v.type!==b.type||v.prop!==b.prop)return!1;if(Array.isArray(b.traces))if(Array.isArray(v.traces)){v.traces.sort();for(var g=0;g<b.traces.length;g++)if(b.traces[g]!==v.traces[g])return!1}else return!1;else if(v.prop!==b.prop)return!1}v=f[0];var n=v.value;if(Array.isArray(n))if(n.length===1)n=n[0];else return!1;u&&(u[n]=s)}return b};function N(d,e,u){var s,l,b,v=!1;if(e.type==="data")s=d._fullData[e.traces!==null?e.traces[0]:0];else if(e.type==="layout")s=d._fullLayout;else return!1;return l=L.nestedProperty(s,e.prop).get(),b=u[e.type]=u[e.type]||{},b.hasOwnProperty(e.prop)&&b[e.prop]!==l&&(v=!0),b[e.prop]=l,{changed:v,value:l}}ae.executeAPICommand=function(d,e,u){if(e==="skip")return Promise.resolve();var s=R.apiMethodRegistry[e],l=[d];Array.isArray(u)||(u=[]);for(var b=0;b<u.length;b++)l.push(u[b]);return s.apply(null,l).catch(function(v){return L.warn("API call to Plotly."+e+" rejected.",v),Promise.reject(v)})},ae.computeAPICommandBindings=function(d,e,u){var s;switch(Array.isArray(u)||(u=[]),e){case"restyle":s=w(d,u);break;case"relayout":s=p(d,u);break;case"update":s=w(d,[u[0],u[2]]).concat(p(d,[u[1]]));break;case"animate":s=D(d,u);break;default:s=[]}return s};function D(d,e){return Array.isArray(e[0])&&e[0].length===1&&["string","number"].indexOf(typeof e[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}function p(d,e){var u=[],s=e[0],l={};if(typeof s=="string")l[s]=e[1];else if(L.isPlainObject(s))l=s;else return u;return k(l,function(b,v,y){u.push({type:"layout",prop:b,value:y})},"",0),u}function w(d,e){var u,s,l,b,v=[];if(s=e[0],l=e[1],u=e[2],b={},typeof s=="string")b[s]=l;else if(L.isPlainObject(s))b=s,u===void 0&&(u=l);else return v;return u===void 0&&(u=null),k(b,function(y,T,_){var f,g;if(Array.isArray(_)){g=_.slice();var n=Math.min(g.length,d.data.length);u&&(n=Math.min(n,u.length)),f=[];for(var a=0;a<n;a++)f[a]=u?u[a]:a}else g=_,f=u?u.slice():null;if(f===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(f)){if(!Array.isArray(g)){var h=g;g=[];for(var c=0;c<f.length;c++)g[c]=h}g.length=Math.min(f.length,g.length)}v.push({type:"data",prop:y,traces:f,value:g})},"",0),v}function k(d,e,u,s){Object.keys(d).forEach(function(l){var b=d[l];if(l[0]!=="_"){var v=u+(s>0?".":"")+l;L.isPlainObject(b)?k(b,e,v,s+1):e(v,l,b)}})}},{"../lib":252,"../registry":352}],331:[function(z,le,ae){"use strict";var R=z("../lib/extend").extendFlat;ae.attributes=function(L,N){L=L||{},N=N||{};var D={valType:"info_array",editType:L.editType,items:[{valType:"number",min:0,max:1,editType:L.editType},{valType:"number",min:0,max:1,editType:L.editType}],dflt:[0,1]},p=L.name?L.name+" ":"",w=L.trace?"trace ":"subplot ",k=N.description?" "+N.description:"",d={x:R({},D,{}),y:R({},D,{}),editType:L.editType};return L.noGridCell||(d.row={valType:"integer",min:0,dflt:0,editType:L.editType},d.column={valType:"integer",min:0,dflt:0,editType:L.editType}),d},ae.defaults=function(L,N,D,p){var w=p&&p.x||[0,1],k=p&&p.y||[0,1],d=N.grid;if(d){var e=D("domain.column");e!==void 0&&(e<d.columns?w=d._domains.x[e]:delete L.domain.column);var u=D("domain.row");u!==void 0&&(u<d.rows?k=d._domains.y[u]:delete L.domain.row)}var s=D("domain.x",w),l=D("domain.y",k);s[0]<s[1]||(L.domain.x=w.slice()),l[0]<l[1]||(L.domain.y=k.slice())}},{"../lib/extend":245}],332:[function(z,le,ae){"use strict";le.exports=function(R){var L=R.editType,N=R.colorEditType;N===void 0&&(N=L);var D={family:{valType:"string",noBlank:!0,strict:!0,editType:L},size:{valType:"number",min:1,editType:L},color:{valType:"color",editType:N},editType:L};return R.autoSize&&(D.size.dflt="auto"),R.autoColor&&(D.color.dflt="auto"),R.arrayOk&&(D.family.arrayOk=!0,D.size.arrayOk=!0,D.color.arrayOk=!0),D}},{}],333:[function(z,le,ae){"use strict";le.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],334:[function(z,le,ae){"use strict";var R=z("../registry"),L=z("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(N,D,p){var w=R.subplotsRegistry[D];if(!w)return[];for(var k=w.attr,d=[],e=0;e<N.length;e++){var u=N[e],s=u[0].trace;s[k]===p&&d.push(u)}return d},ae.getModuleCalcData=function(N,D){var p=[],w=[],k;if(typeof D=="string"?k=R.getModule(D).plot:typeof D=="function"?k=D:k=D.plot,!k)return[p,N];for(var d=0;d<N.length;d++){var e=N[d],u=e[0].trace;u.visible!==!0||u._length===0||(u._module.plot===k?p.push(e):w.push(e))}return[p,w]},ae.getSubplotData=function(D,p,w){if(!R.subplotsRegistry[p])return[];var k=R.subplotsRegistry[p].attr,d=[],e,u,s;if(p==="gl2d"){var l=w.match(L);u="x"+l[1],s="y"+l[2]}for(var b=0;b<D.length;b++)e=D[b],p==="gl2d"&&R.traceIs(e,"gl2d")?e[k[0]]===u&&e[k[1]]===s&&d.push(e):e[k]===w&&d.push(e);return d}},{"../registry":352,"./cartesian/constants":308}],335:[function(z,le,ae){"use strict";var R=z("../../plot_api/edit_types").overrideAll,L=z("../../components/fx/layout_attributes"),N=z("./scene"),D=z("../get_data").getSubplotData,p=z("../../lib"),w=z("../../constants/xmlns_namespaces"),k="gl3d",d="scene";ae.name=k,ae.attr=d,ae.idRoot=d,ae.idRegex=ae.attrRegex=p.counterRegex("scene"),ae.attributes=z("./layout/attributes"),ae.layoutAttributes=z("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=R({hoverlabel:L.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=z("./layout/defaults"),ae.plot=function(u){for(var s=u._fullLayout,l=u._fullData,b=s._subplots[k],v=0;v<b.length;v++){var y=b[v],T=D(l,k,y),_=s[y],f=_.camera,g=_._scene;g||(g=new N({id:y,graphDiv:u,container:u.querySelector(".gl-container"),staticPlot:u._context.staticPlot,plotGlPixelRatio:u._context.plotGlPixelRatio,camera:f},s),_._scene=g),g.viewInitial||(g.viewInitial={up:{x:f.up.x,y:f.up.y,z:f.up.z},eye:{x:f.eye.x,y:f.eye.y,z:f.eye.z},center:{x:f.center.x,y:f.center.y,z:f.center.z}}),g.plot(T,s,u.layout)}},ae.clean=function(e,u,s,l){for(var b=l._subplots[k]||[],v=0;v<b.length;v++){var y=b[v];!u[y]&&!!l[y]._scene&&(l[y]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+y).remove())}},ae.toSVG=function(e){for(var u=e._fullLayout,s=u._subplots[k],l=u._size,b=0;b<s.length;b++){var v=u[s[b]],y=v.domain,T=v._scene,_=T.toImage("png"),f=u._glimages.append("svg:image");f.attr({xmlns:w.svg,"xlink:href":_,x:l.l+l.w*y.x[0],y:l.t+l.h*(1-y.y[1]),width:l.w*(y.x[1]-y.x[0]),height:l.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),T.destroy()}},ae.cleanId=function(u){if(!!u.match(/^scene[0-9]*$/)){var s=u.substr(5);return s==="1"&&(s=""),d+s}},ae.updateFx=function(e){for(var u=e._fullLayout,s=u._subplots[k],l=0;l<s.length;l++){var b=u[s[l]]._scene;b.updateFx(u.dragmode,u.hovermode)}}},{"../../components/fx/layout_attributes":160,"../../constants/xmlns_namespaces":232,"../../lib":252,"../../plot_api/edit_types":283,"../get_data":334,"./layout/attributes":336,"./layout/defaults":340,"./layout/layout_attributes":341,"./scene":345}],336:[function(z,le,ae){"use strict";le.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],337:[function(z,le,ae){"use strict";var R=z("../../../components/color"),L=z("../../cartesian/layout_attributes"),N=z("../../../lib/extend").extendFlat,D=z("../../../plot_api/edit_types").overrideAll;le.exports=D({visible:L.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:R.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:L.color,categoryorder:L.categoryorder,categoryarray:L.categoryarray,title:{text:L.title.text,font:L.title.font},type:N({},L.type,{values:["-","linear","log","date","category"]}),autotypenumbers:L.autotypenumbers,autorange:L.autorange,rangemode:L.rangemode,range:N({},L.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:L.tickmode,nticks:L.nticks,tick0:L.tick0,dtick:L.dtick,tickvals:L.tickvals,ticktext:L.ticktext,ticks:L.ticks,mirror:L.mirror,ticklen:L.ticklen,tickwidth:L.tickwidth,tickcolor:L.tickcolor,showticklabels:L.showticklabels,tickfont:L.tickfont,tickangle:L.tickangle,tickprefix:L.tickprefix,showtickprefix:L.showtickprefix,ticksuffix:L.ticksuffix,showticksuffix:L.showticksuffix,showexponent:L.showexponent,exponentformat:L.exponentformat,minexponent:L.minexponent,separatethousands:L.separatethousands,tickformat:L.tickformat,tickformatstops:L.tickformatstops,hoverformat:L.hoverformat,showline:L.showline,linecolor:L.linecolor,linewidth:L.linewidth,showgrid:L.showgrid,gridcolor:N({},L.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:L.gridwidth,zeroline:L.zeroline,zerolinecolor:L.zerolinecolor,zerolinewidth:L.zerolinewidth,_deprecated:{title:L._deprecated.title,titlefont:L._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":119,"../../../lib/extend":245,"../../../plot_api/edit_types":283,"../../cartesian/layout_attributes":316}],338:[function(z,le,ae){"use strict";var R=z("tinycolor2").mix,L=z("../../../lib"),N=z("../../../plot_api/plot_template"),D=z("./axis_attributes"),p=z("../../cartesian/type_defaults"),w=z("../../cartesian/axis_defaults"),k=["xaxis","yaxis","zaxis"],d=100*(204-68)/(255-68);le.exports=function(u,s,l){var b,v;function y(f,g){return L.coerce(b,v,D,f,g)}for(var T=0;T<k.length;T++){var _=k[T];b=u[_]||{},v=N.newContainer(s,_),v._id=_[0]+l.scene,v._name=_,p(b,v,y,l),w(b,v,y,{font:l.font,letter:_[0],data:l.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:l.bgColor,calendar:l.calendar},l.fullLayout),y("gridcolor",R(v.color,l.bgColor,d).toRgbString()),y("title.text",_[0]),v.setScale=L.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",v.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},{"../../../lib":252,"../../../plot_api/plot_template":290,"../../cartesian/axis_defaults":303,"../../cartesian/type_defaults":329,"./axis_attributes":337,tinycolor2:83}],339:[function(z,le,ae){"use strict";var R=z("../../../lib/str2rgbarray"),L=z("../../../lib"),N=["xaxis","yaxis","zaxis"];function D(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var p=D.prototype;p.merge=function(k,d){for(var e=this,u=0;u<3;++u){var s=d[N[u]];if(!s.visible){e.tickEnable[u]=!1,e.labelEnable[u]=!1,e.lineEnable[u]=!1,e.lineTickEnable[u]=!1,e.gridEnable[u]=!1,e.zeroEnable[u]=!1,e.backgroundEnable[u]=!1;continue}e.labels[u]=k._meta?L.templateString(s.title.text,k._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(e.labelColor[u]=R(s.title.font.color)),s.title.font.family&&(e.labelFont[u]=s.title.font.family),s.title.font.size&&(e.labelSize[u]=s.title.font.size)),"showline"in s&&(e.lineEnable[u]=s.showline),"linecolor"in s&&(e.lineColor[u]=R(s.linecolor)),"linewidth"in s&&(e.lineWidth[u]=s.linewidth),"showgrid"in s&&(e.gridEnable[u]=s.showgrid),"gridcolor"in s&&(e.gridColor[u]=R(s.gridcolor)),"gridwidth"in s&&(e.gridWidth[u]=s.gridwidth),s.type==="log"?e.zeroEnable[u]=!1:"zeroline"in s&&(e.zeroEnable[u]=s.zeroline),"zerolinecolor"in s&&(e.zeroLineColor[u]=R(s.zerolinecolor)),"zerolinewidth"in s&&(e.zeroLineWidth[u]=s.zerolinewidth),"ticks"in s&&!!s.ticks?e.lineTickEnable[u]=!0:e.lineTickEnable[u]=!1,"ticklen"in s&&(e.lineTickLength[u]=e._defaultLineTickLength[u]=s.ticklen),"tickcolor"in s&&(e.lineTickColor[u]=R(s.tickcolor)),"tickwidth"in s&&(e.lineTickWidth[u]=s.tickwidth),"tickangle"in s&&(e.tickAngle[u]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(e.tickEnable[u]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(e.tickColor[u]=R(s.tickfont.color)),s.tickfont.family&&(e.tickFont[u]=s.tickfont.family),s.tickfont.size&&(e.tickSize[u]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(e.lineTickMirror[u]=!0,e.lineMirror[u]=!0):s.mirror===!0?(e.lineTickMirror[u]=!1,e.lineMirror[u]=!0):(e.lineTickMirror[u]=!1,e.lineMirror[u]=!1):e.lineMirror[u]=!1,"showbackground"in s&&s.showbackground!==!1?(e.backgroundEnable[u]=!0,e.backgroundColor[u]=R(s.backgroundcolor)):e.backgroundEnable[u]=!1}};function w(k,d){var e=new D;return e.merge(k,d),e}le.exports=w},{"../../../lib":252,"../../../lib/str2rgbarray":276}],340:[function(z,le,ae){"use strict";var R=z("../../../lib"),L=z("../../../components/color"),N=z("../../../registry"),D=z("../../subplot_defaults"),p=z("./axis_defaults"),w=z("./layout_attributes"),k=z("../../get_data").getSubplotData,d="gl3d";le.exports=function(s,l,b){var v=l._basePlotModules.length>1;function y(T){if(!v){var _=R.validate(s[T],w[T]);if(_)return s[T]}}D(s,l,b,{type:d,attributes:w,handleDefaults:e,fullLayout:l,font:l.font,fullData:b,getDfltFromLayout:y,autotypenumbersDflt:l.autotypenumbers,paper_bgcolor:l.paper_bgcolor,calendar:l.calendar})};function e(u,s,l,b){for(var v=l("bgcolor"),y=L.combine(v,b.paper_bgcolor),T=["up","center","eye"],_=0;_<T.length;_++)l("camera."+T[_]+".x"),l("camera."+T[_]+".y"),l("camera."+T[_]+".z");l("camera.projection.type");var f=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),g=f?"manual":"auto",n=l("aspectmode",g);f||(u.aspectratio=s.aspectratio={x:1,y:1,z:1},n==="manual"&&(s.aspectmode="auto"),u.aspectmode=s.aspectmode);var a=k(b.fullData,d,b.id);p(u,s,{font:b.font,scene:b.id,data:a,bgColor:y,calendar:b.calendar,autotypenumbersDflt:b.autotypenumbersDflt,fullLayout:b.fullLayout}),N.getComponentMethod("annotations3d","handleDefaults")(u,s,b);var h=b.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",u.camera&&u.camera.up){var c=u.camera.up.x,m=u.camera.up.y,o=u.camera.up.z;o!==0&&(!c||!m||!o||o/Math.sqrt(c*c+m*m+o*o)>.999)&&(h="turntable")}else h="turntable";l("dragmode",h),l("hovermode",b.getDfltFromLayout("hovermode"))}},{"../../../components/color":119,"../../../lib":252,"../../../registry":352,"../../get_data":334,"../../subplot_defaults":350,"./axis_defaults":338,"./layout_attributes":341}],341:[function(z,le,ae){"use strict";var R=z("./axis_attributes"),L=z("../../domain").attributes,N=z("../../../lib/extend").extendFlat,D=z("../../../lib").counterRegex;function p(w,k,d){return{x:{valType:"number",dflt:w,editType:"camera"},y:{valType:"number",dflt:k,editType:"camera"},z:{valType:"number",dflt:d,editType:"camera"},editType:"camera"}}le.exports={_arrayAttrRegexps:[D("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:N(p(0,0,1),{}),center:N(p(0,0,0),{}),eye:N(p(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:L({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:R,yaxis:R,zaxis:R,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":252,"../../../lib/extend":245,"../../domain":331,"./axis_attributes":337}],342:[function(z,le,ae){"use strict";var R=z("../../../lib/str2rgbarray"),L=["xaxis","yaxis","zaxis"];function N(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var D=N.prototype;D.merge=function(w){for(var k=0;k<3;++k){var d=w[L[k]];if(!d.visible){this.enabled[k]=!1,this.drawSides[k]=!1;continue}this.enabled[k]=d.showspikes,this.colors[k]=R(d.spikecolor),this.drawSides[k]=d.spikesides,this.lineWidth[k]=d.spikethickness}};function p(w){var k=new N;return k.merge(w),k}le.exports=p},{"../../../lib/str2rgbarray":276}],343:[function(z,le,ae){"use strict";le.exports=w;var R=z("../../cartesian/axes"),L=z("../../../lib"),N=["xaxis","yaxis","zaxis"],D=[0,0,0];function p(k){for(var d=new Array(3),e=0;e<3;++e){for(var u=k[e],s=new Array(u.length),l=0;l<u.length;++l)s[l]=u[l].x;d[e]=s}return d}function w(k){for(var d=k.axesOptions,e=k.glplot.axesPixels,u=k.fullSceneLayout,s=[[],[],[]],l=0;l<3;++l){var b=u[N[l]];if(b._length=(e[l].hi-e[l].lo)*e[l].pixelsPerDataUnit/k.dataScale[l],Math.abs(b._length)===1/0||isNaN(b._length))s[l]=[];else{b._input_range=b.range.slice(),b.range[0]=e[l].lo/k.dataScale[l],b.range[1]=e[l].hi/k.dataScale[l],b._m=1/(k.dataScale[l]*e[l].pixelsPerDataUnit),b.range[0]===b.range[1]&&(b.range[0]-=1,b.range[1]+=1);var v=b.tickmode;if(b.tickmode==="auto"){b.tickmode="linear";var y=b.nticks||L.constrain(b._length/40,4,9);R.autoTicks(b,Math.abs(b.range[1]-b.range[0])/y)}for(var T=R.calcTicks(b,{msUTC:!0}),_=0;_<T.length;++_)T[_].x=T[_].x*k.dataScale[l],b.type==="date"&&(T[_].text=T[_].text.replace(/\<br\>/g," "));s[l]=T,b.tickmode=v}}d.ticks=s;for(var l=0;l<3;++l){D[l]=.5*(k.glplot.bounds[0][l]+k.glplot.bounds[1][l]);for(var _=0;_<2;++_)d.bounds[_][l]=k.glplot.bounds[_][l]}k.contourLevels=p(s)}},{"../../../lib":252,"../../cartesian/axes":301}],344:[function(z,le,ae){"use strict";function R(N,D){var p=[0,0,0,0],w,k;for(w=0;w<4;++w)for(k=0;k<4;++k)p[k]+=N[4*w+k]*D[w];return p}function L(N,D){var p=R(N.projection,R(N.view,R(N.model,[D[0],D[1],D[2],1])));return p}le.exports=L},{}],345:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_plot3d,L=R.createCamera,N=R.createScene,D=z("webgl-context"),p=z("has-passive-events"),w=z("../../registry"),k=z("../../lib"),d=k.preserveDrawingBuffer(),e=z("../../plots/cartesian/axes"),u=z("../../components/fx"),s=z("../../lib/str2rgbarray"),l=z("../../lib/show_no_webgl_msg"),b=z("./project"),v=z("./layout/convert"),y=z("./layout/spikes"),T=z("./layout/tick_marks"),_,f;function g(x,A){var E=document.createElement("div"),P=x.container;this.graphDiv=x.graphDiv;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none",E.appendChild(S),this.svgContainer=S,E.id=x.id,E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",P.appendChild(E),this.fullLayout=A,this.id=x.id||"scene",this.fullSceneLayout=A[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(A,A[this.id]),this.spikeOptions=y(A[this.id]),this.container=E,this.staticMode=!!x.staticPlot,this.pixelRatio=this.pixelRatio||x.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=w.getComponentMethod("annotations3d","convert"),this.drawAnnotations=w.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var n=g.prototype;n.prepareOptions=function(){var x=this,A={canvas:x.canvas,gl:x.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:x.container,axes:x.axesOptions,spikes:x.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:x.camera,pixelRatio:x.pixelRatio};if(x.staticMode){if(!f&&(_=document.createElement("canvas"),f=D({canvas:_,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!f))throw new Error("error creating static canvas/context for image server");A.gl=f,A.canvas=_}return A};var a=!0;n.tryCreatePlot=function(){var x=this,A=x.prepareOptions(),E=!0;try{x.glplot=N(A)}catch{if(x.staticMode||!a||d)E=!1;else{k.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=A.glOptions.preserveDrawingBuffer=!0,x.glplot=N(A)}catch{d=A.glOptions.preserveDrawingBuffer=!1,E=!1}}}return a=!1,E},n.initializeGLCamera=function(){var x=this,A=x.fullSceneLayout.camera,E=A.projection.type==="orthographic";x.camera=L(x.container,{center:[A.center.x,A.center.y,A.center.z],eye:[A.eye.x,A.eye.y,A.eye.z],up:[A.up.x,A.up.y,A.up.z],_ortho:E,zoomMin:.01,zoomMax:100,mode:"orbit"})},n.initializeGLPlot=function(){var x=this;x.initializeGLCamera();var A=x.tryCreatePlot();if(!A)return l(x);x.traces={},x.make4thDimension();var E=x.graphDiv,P=E.layout,S=function(){var M={};return x.isCameraChanged(P)&&(M[x.id+".camera"]=x.getCamera()),x.isAspectChanged(P)&&(M[x.id+".aspectratio"]=x.glplot.getAspectratio(),P[x.id].aspectmode!=="manual"&&(x.fullSceneLayout.aspectmode=P[x.id].aspectmode=M[x.id+".aspectmode"]="manual")),M},C=function(M){if(M.fullSceneLayout.dragmode!==!1){var I=S();M.saveLayout(P),M.graphDiv.emit("plotly_relayout",I)}};return x.glplot.canvas&&(x.glplot.canvas.addEventListener("mouseup",function(){C(x)}),x.glplot.canvas.addEventListener("wheel",function(M){if(E._context._scrollZoom.gl3d){if(x.camera._ortho){var I=M.deltaX>M.deltaY?1.1:.9090909090909091,G=x.glplot.getAspectratio();x.glplot.setAspectratio({x:I*G.x,y:I*G.y,z:I*G.z})}C(x)}},p?{passive:!1}:!1),x.glplot.canvas.addEventListener("mousemove",function(){if(x.fullSceneLayout.dragmode!==!1&&x.camera.mouseListener.buttons!==0){var M=S();x.graphDiv.emit("plotly_relayouting",M)}}),x.staticMode||x.glplot.canvas.addEventListener("webglcontextlost",function(M){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:M,layer:x.id})},!1)),x.glplot.oncontextloss=function(){x.recoverContext()},x.glplot.onrender=function(){x.render()},!0},n.render=function(){var x=this,A=x.graphDiv,E,P=x.svgContainer,S=x.container.getBoundingClientRect();A._fullLayout._calcInverseTransform(A);var C=A._fullLayout._invScaleX,M=A._fullLayout._invScaleY,I=S.width*C,G=S.height*M;P.setAttributeNS(null,"viewBox","0 0 "+I+" "+G),P.setAttributeNS(null,"width",I),P.setAttributeNS(null,"height",G),T(x),x.glplot.axes.update(x.axesOptions);for(var V=Object.keys(x.traces),q=null,ee=x.glplot.selection,Q=0;Q<V.length;++Q)E=x.traces[V[Q]],E.data.hoverinfo!=="skip"&&E.handlePick(ee)&&(q=E),E.setContourLevels&&E.setContourLevels();function U(ve,ue,ce){var _e=x.fullSceneLayout[ve+"axis"];return _e.type!=="log"&&(ue=_e.d2l(ue)),e.hoverLabelText(_e,ue,ce)}if(q!==null){var O=b(x.glplot.cameraParams,ee.dataCoordinate);E=q.data;var Z=A._fullData[E.index],B=ee.index,Y={xLabel:U("x",ee.traceCoordinate[0],E.xhoverformat),yLabel:U("y",ee.traceCoordinate[1],E.yhoverformat),zLabel:U("z",ee.traceCoordinate[2],E.zhoverformat)},j=u.castHoverinfo(Z,x.fullLayout,B),X=(j||"").split("+"),H=j&&j==="all";!Z.hovertemplate&&!H&&(X.indexOf("x")===-1&&(Y.xLabel=void 0),X.indexOf("y")===-1&&(Y.yLabel=void 0),X.indexOf("z")===-1&&(Y.zLabel=void 0),X.indexOf("text")===-1&&(ee.textLabel=void 0),X.indexOf("name")===-1&&(q.name=void 0));var K,W=[];E.type==="cone"||E.type==="streamtube"?(Y.uLabel=U("x",ee.traceCoordinate[3],E.uhoverformat),(H||X.indexOf("u")!==-1)&&W.push("u: "+Y.uLabel),Y.vLabel=U("y",ee.traceCoordinate[4],E.vhoverformat),(H||X.indexOf("v")!==-1)&&W.push("v: "+Y.vLabel),Y.wLabel=U("z",ee.traceCoordinate[5],E.whoverformat),(H||X.indexOf("w")!==-1)&&W.push("w: "+Y.wLabel),Y.normLabel=ee.traceCoordinate[6].toPrecision(3),(H||X.indexOf("norm")!==-1)&&W.push("norm: "+Y.normLabel),E.type==="streamtube"&&(Y.divergenceLabel=ee.traceCoordinate[7].toPrecision(3),(H||X.indexOf("divergence")!==-1)&&W.push("divergence: "+Y.divergenceLabel)),ee.textLabel&&W.push(ee.textLabel),K=W.join("<br>")):E.type==="isosurface"||E.type==="volume"?(Y.valueLabel=e.hoverLabelText(x._mockAxis,x._mockAxis.d2l(ee.traceCoordinate[3]),E.valuehoverformat),W.push("value: "+Y.valueLabel),ee.textLabel&&W.push(ee.textLabel),K=W.join("<br>")):K=ee.textLabel;var $={x:ee.traceCoordinate[0],y:ee.traceCoordinate[1],z:ee.traceCoordinate[2],data:Z._input,fullData:Z,curveNumber:Z.index,pointNumber:B};u.appendArrayPointValue($,Z,B),E._module.eventData&&($=Z._module.eventData($,ee,Z,{},B));var re={points:[$]};if(x.fullSceneLayout.hovermode){var de=[];u.loneHover({trace:Z,x:(.5+.5*O[0]/O[3])*I,y:(.5-.5*O[1]/O[3])*G,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:K,name:q.name,color:u.castHoverOption(Z,B,"bgcolor")||q.color,borderColor:u.castHoverOption(Z,B,"bordercolor"),fontFamily:u.castHoverOption(Z,B,"font.family"),fontSize:u.castHoverOption(Z,B,"font.size"),fontColor:u.castHoverOption(Z,B,"font.color"),nameLength:u.castHoverOption(Z,B,"namelength"),textAlign:u.castHoverOption(Z,B,"align"),hovertemplate:k.castOption(Z,B,"hovertemplate"),hovertemplateLabels:k.extendFlat({},$,Y),eventData:[$]},{container:P,gd:A,inOut_bbox:de}),$.bbox=de[0]}ee.buttons&&ee.distance<5?A.emit("plotly_click",re):A.emit("plotly_hover",re),this.oldEventData=re}else u.loneUnhover(P),this.oldEventData&&A.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;x.drawAnnotations(x)},n.recoverContext=function(){var x=this;x.glplot.dispose();var A=function(){if(x.glplot.gl.isContextLost()){requestAnimationFrame(A);return}if(!x.initializeGLPlot()){k.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}x.plot.apply(x,x.plotArgs)};requestAnimationFrame(A)};var h=["xaxis","yaxis","zaxis"];function c(x,A,E){for(var P=x.fullSceneLayout,S=0;S<3;S++){var C=h[S],M=C.charAt(0),I=P[C],G=A[M],V=A[M+"calendar"],q=A["_"+M+"length"];if(!k.isArrayOrTypedArray(G))E[0][S]=Math.min(E[0][S],0),E[1][S]=Math.max(E[1][S],q-1);else for(var ee,Q=0;Q<(q||G.length);Q++)if(k.isArrayOrTypedArray(G[Q]))for(var U=0;U<G[Q].length;++U)ee=I.d2l(G[Q][U],0,V),!isNaN(ee)&&isFinite(ee)&&(E[0][S]=Math.min(E[0][S],ee),E[1][S]=Math.max(E[1][S],ee));else ee=I.d2l(G[Q],0,V),!isNaN(ee)&&isFinite(ee)&&(E[0][S]=Math.min(E[0][S],ee),E[1][S]=Math.max(E[1][S],ee))}}function m(x,A){for(var E=x.fullSceneLayout,P=E.annotations||[],S=0;S<3;S++)for(var C=h[S],M=C.charAt(0),I=E[C],G=0;G<P.length;G++){var V=P[G];if(V.visible){var q=I.r2l(V[M]);!isNaN(q)&&isFinite(q)&&(A[0][S]=Math.min(A[0][S],q),A[1][S]=Math.max(A[1][S],q))}}}n.plot=function(x,A,E){var P=this;if(P.plotArgs=[x,A,E],P.glplot.contextLost)return;var S,C,M,I,G,V,q=A[P.id],ee=E[P.id];P.fullLayout=A,P.fullSceneLayout=q,P.axesOptions.merge(A,q),P.spikeOptions.merge(q),P.setViewport(q),P.updateFx(q.dragmode,q.hovermode),P.camera.enableWheel=P.graphDiv._context._scrollZoom.gl3d,P.glplot.setClearColor(s(q.bgcolor)),P.setConvert(G),x?Array.isArray(x)||(x=[x]):x=[];var Q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(M=0;M<x.length;++M)S=x[M],!(S.visible!==!0||S._length===0)&&c(this,S,Q);m(this,Q);var U=[1,1,1];for(I=0;I<3;++I)Q[1][I]===Q[0][I]?U[I]=1:U[I]=1/(Q[1][I]-Q[0][I]);for(P.dataScale=U,P.convertAnnotations(this),M=0;M<x.length;++M)S=x[M],!(S.visible!==!0||S._length===0)&&(C=P.traces[S.uid],C?C.data.type===S.type?C.update(S):(C.dispose(),C=S._module.plot(this,S),P.traces[S.uid]=C):(C=S._module.plot(this,S),P.traces[S.uid]=C),C.name=S.name);var O=Object.keys(P.traces);e:for(M=0;M<O.length;++M){for(I=0;I<x.length;++I)if(x[I].uid===O[M]&&x[I].visible===!0&&x[I]._length!==0)continue e;C=P.traces[O[M]],C.dispose(),delete P.traces[O[M]]}P.glplot.objects.sort(function(Ie,Ke){return Ie._trace.data.index-Ke._trace.data.index});var Z=[[0,0,0],[0,0,0]],B=[],Y={};for(M=0;M<3;++M){if(G=q[h[M]],V=G.type,V in Y?(Y[V].acc*=U[M],Y[V].count+=1):Y[V]={acc:U[M],count:1},G.autorange){Z[0][M]=1/0,Z[1][M]=-1/0;var j=P.glplot.objects,X=P.fullSceneLayout.annotations||[],H=G._name.charAt(0);for(I=0;I<j.length;I++){var K=j[I],W=K.bounds,$=K._trace.data._pad||0;K.constructor.name==="ErrorBars"&&G._lowerLogErrorBound?Z[0][M]=Math.min(Z[0][M],G._lowerLogErrorBound):Z[0][M]=Math.min(Z[0][M],W[0][M]/U[M]-$),Z[1][M]=Math.max(Z[1][M],W[1][M]/U[M]+$)}for(I=0;I<X.length;I++){var re=X[I];if(re.visible){var de=G.r2l(re[H]);Z[0][M]=Math.min(Z[0][M],de),Z[1][M]=Math.max(Z[1][M],de)}}if("rangemode"in G&&G.rangemode==="tozero"&&(Z[0][M]=Math.min(Z[0][M],0),Z[1][M]=Math.max(Z[1][M],0)),Z[0][M]>Z[1][M])Z[0][M]=-1,Z[1][M]=1;else{var ve=Z[1][M]-Z[0][M];Z[0][M]-=ve/32,Z[1][M]+=ve/32}if(G.autorange==="reversed"){var ue=Z[0][M];Z[0][M]=Z[1][M],Z[1][M]=ue}}else{var ce=G.range;Z[0][M]=G.r2l(ce[0]),Z[1][M]=G.r2l(ce[1])}Z[0][M]===Z[1][M]&&(Z[0][M]-=1,Z[1][M]+=1),B[M]=Z[1][M]-Z[0][M],P.glplot.setBounds(M,{min:Z[0][M]*U[M],max:Z[1][M]*U[M]})}var _e,fe=q.aspectmode;if(fe==="cube")_e=[1,1,1];else if(fe==="manual"){var ne=q.aspectratio;_e=[ne.x,ne.y,ne.z]}else if(fe==="auto"||fe==="data"){var ie=[1,1,1];for(M=0;M<3;++M){G=q[h[M]],V=G.type;var me=Y[V];ie[M]=Math.pow(me.acc,1/me.count)/U[M]}fe==="data"||Math.max.apply(null,ie)/Math.min.apply(null,ie)<=4?_e=ie:_e=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");q.aspectratio.x=ee.aspectratio.x=_e[0],q.aspectratio.y=ee.aspectratio.y=_e[1],q.aspectratio.z=ee.aspectratio.z=_e[2],P.glplot.setAspectratio(q.aspectratio),P.viewInitial.aspectratio||(P.viewInitial.aspectratio={x:q.aspectratio.x,y:q.aspectratio.y,z:q.aspectratio.z}),P.viewInitial.aspectmode||(P.viewInitial.aspectmode=q.aspectmode);var we=q.domain||null,be=A._size||null;if(we&&be){var Me=P.container.style;Me.position="absolute",Me.left=be.l+we.x[0]*be.w+"px",Me.top=be.t+(1-we.y[1])*be.h+"px",Me.width=be.w*(we.x[1]-we.x[0])+"px",Me.height=be.h*(we.y[1]-we.y[0])+"px"}P.glplot.redraw()},n.destroy=function(){var x=this;!x.glplot||(x.camera.mouseListener.enabled=!1,x.container.removeEventListener("wheel",x.camera.wheelListener),x.camera=null,x.glplot.dispose(),x.container.parentNode.removeChild(x.container),x.glplot=null)};function o(x){return[[x.eye.x,x.eye.y,x.eye.z],[x.center.x,x.center.y,x.center.z],[x.up.x,x.up.y,x.up.z]]}function t(x){return{up:{x:x.up[0],y:x.up[1],z:x.up[2]},center:{x:x.center[0],y:x.center[1],z:x.center[2]},eye:{x:x.eye[0],y:x.eye[1],z:x.eye[2]},projection:{type:x._ortho===!0?"orthographic":"perspective"}}}n.getCamera=function(){var x=this;return x.camera.view.recalcMatrix(x.camera.view.lastT()),t(x.camera)},n.setViewport=function(x){var A=this,E=x.camera;A.camera.lookAt.apply(this,o(E)),A.glplot.setAspectratio(x.aspectratio);var P=E.projection.type==="orthographic",S=A.camera._ortho;P!==S&&(A.glplot.redraw(),A.glplot.clearRGBA(),A.glplot.dispose(),A.initializeGLPlot())},n.isCameraChanged=function(x){var A=this,E=A.getCamera(),P=k.nestedProperty(x,A.id+".camera"),S=P.get();function C(V,q,ee,Q){var U=["up","center","eye"],O=["x","y","z"];return q[U[ee]]&&V[U[ee]][O[Q]]===q[U[ee]][O[Q]]}var M=!1;if(S===void 0)M=!0;else{for(var I=0;I<3;I++)for(var G=0;G<3;G++)if(!C(E,S,I,G)){M=!0;break}(!S.projection||E.projection&&E.projection.type!==S.projection.type)&&(M=!0)}return M},n.isAspectChanged=function(x){var A=this,E=A.glplot.getAspectratio(),P=k.nestedProperty(x,A.id+".aspectratio"),S=P.get();return S===void 0||S.x!==E.x||S.y!==E.y||S.z!==E.z},n.saveLayout=function(x){var A=this,E=A.fullLayout,P,S,C,M,I,G,V=A.isCameraChanged(x),q=A.isAspectChanged(x),ee=V||q;if(ee){var Q={};if(V&&(P=A.getCamera(),S=k.nestedProperty(x,A.id+".camera"),C=S.get(),Q[A.id+".camera"]=C),q&&(M=A.glplot.getAspectratio(),I=k.nestedProperty(x,A.id+".aspectratio"),G=I.get(),Q[A.id+".aspectratio"]=G),w.call("_storeDirectGUIEdit",x,E._preGUI,Q),V){S.set(P);var U=k.nestedProperty(E,A.id+".camera");U.set(P)}if(q){I.set(M);var O=k.nestedProperty(E,A.id+".aspectratio");O.set(M),A.glplot.redraw()}}return ee},n.updateFx=function(x,A){var E=this,P=E.camera;if(P)if(x==="orbit")P.mode="orbit",P.keyBindingMode="rotate";else if(x==="turntable"){P.up=[0,0,1],P.mode="turntable",P.keyBindingMode="rotate";var S=E.graphDiv,C=S._fullLayout,M=E.fullSceneLayout.camera,I=M.up.x,G=M.up.y,V=M.up.z;if(V/Math.sqrt(I*I+G*G+V*V)<.999){var q=E.id+".camera.up",ee={x:0,y:0,z:1},Q={};Q[q]=ee;var U=S.layout;w.call("_storeDirectGUIEdit",U,C._preGUI,Q),M.up=ee,k.nestedProperty(U,q).set(ee)}}else P.keyBindingMode=x;E.fullSceneLayout.hovermode=A};function i(x,A,E){for(var P=0,S=E-1;P<S;++P,--S)for(var C=0;C<A;++C)for(var M=0;M<4;++M){var I=4*(A*P+C)+M,G=4*(A*S+C)+M,V=x[I];x[I]=x[G],x[G]=V}}function r(x,A,E){for(var P=0;P<E;++P)for(var S=0;S<A;++S){var C=4*(A*P+S),M=x[C+3];if(M>0)for(var I=255/M,G=0;G<3;++G)x[C+G]=Math.min(I*x[C+G],255)}}n.toImage=function(x){var A=this;x||(x="png"),A.staticMode&&A.container.appendChild(_),A.glplot.redraw();var E=A.glplot.gl,P=E.drawingBufferWidth,S=E.drawingBufferHeight;E.bindFramebuffer(E.FRAMEBUFFER,null);var C=new Uint8Array(P*S*4);E.readPixels(0,0,P,S,E.RGBA,E.UNSIGNED_BYTE,C),i(C,P,S),r(C,P,S);var M=document.createElement("canvas");M.width=P,M.height=S;var I=M.getContext("2d"),G=I.createImageData(P,S);G.data.set(C),I.putImageData(G,0,0);var V;switch(x){case"jpeg":V=M.toDataURL("image/jpeg");break;case"webp":V=M.toDataURL("image/webp");break;default:V=M.toDataURL("image/png")}return A.staticMode&&A.container.removeChild(_),V},n.setConvert=function(){for(var x=this,A=0;A<3;A++){var E=x.fullSceneLayout[h[A]];e.setConvert(E,x.fullLayout),E.setScale=k.noop}},n.make4thDimension=function(){var x=this,A=x.graphDiv,E=A._fullLayout;x._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(x._mockAxis,E)},le.exports=g},{"../../../stackgl_modules":435,"../../components/fx":159,"../../lib":252,"../../lib/show_no_webgl_msg":273,"../../lib/str2rgbarray":276,"../../plots/cartesian/axes":301,"../../registry":352,"./layout/convert":339,"./layout/spikes":342,"./layout/tick_marks":343,"./project":344,"has-passive-events":64,"webgl-context":84}],346:[function(z,le,ae){"use strict";le.exports=function(L,N,D,p){p=p||L.length;for(var w=new Array(p),k=0;k<p;k++)w[k]=[L[k],N[k],D[k]];return w}},{}],347:[function(z,le,ae){"use strict";var R=z("./font_attributes"),L=z("./animation_attributes"),N=z("../components/color/attributes"),D=z("../components/shapes/draw_newshape/attributes"),p=z("./pad_attributes"),w=z("../lib/extend").extendFlat,k=R({editType:"calc"});k.family.dflt='"Open Sans", verdana, arial, sans-serif',k.size.dflt=12,k.color.dflt=N.defaultLine,le.exports={font:k,title:{text:{valType:"string",editType:"layoutstyle"},font:R({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:w(p({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:N.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:N.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:N.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:D.newshape,activeshape:D.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:w({},L.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:R({editType:"layoutstyle"})}}},{"../components/color/attributes":118,"../components/shapes/draw_newshape/attributes":204,"../lib/extend":245,"./animation_attributes":295,"./font_attributes":332,"./pad_attributes":348}],348:[function(z,le,ae){"use strict";le.exports=function(R){var L=R.editType;return{t:{valType:"number",dflt:0,editType:L},r:{valType:"number",dflt:0,editType:L},b:{valType:"number",dflt:0,editType:L},l:{valType:"number",dflt:0,editType:L},editType:L}}},{}],349:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("d3-time-format").timeFormatLocale,N=z("d3-format").formatLocale,D=z("fast-isnumeric"),p=z("../registry"),w=z("../plot_api/plot_schema"),k=z("../plot_api/plot_template"),d=z("../lib"),e=z("../components/color"),u=z("../constants/numerical").BADNUM,s=z("./cartesian/axis_ids"),l=z("./cartesian/handle_outline").clearSelect,b=z("./animation_attributes"),v=z("./frame_attributes"),y=z("../plots/get_data").getModuleCalcData,T=d.relinkPrivateKeys,_=d._,f=le.exports={};d.extendFlat(f,p),f.attributes=z("./attributes"),f.attributes.type.values=f.allTypes,f.fontAttrs=z("./font_attributes"),f.layoutAttributes=z("./layout_attributes"),f.fontWeight="normal";var g=f.transformsRegistry,n=z("./command");f.executeAPICommand=n.executeAPICommand,f.computeAPICommandBindings=n.computeAPICommandBindings,f.manageCommandObserver=n.manageCommandObserver,f.hasSimpleAPICommandBindings=n.hasSimpleAPICommandBindings,f.redrawText=function(B){return B=d.getGraphDiv(B),new Promise(function(Y){setTimeout(function(){!B._fullLayout||(p.getComponentMethod("annotations","draw")(B),p.getComponentMethod("legend","draw")(B),p.getComponentMethod("colorbar","draw")(B),Y(f.previousPromises(B)))},300)})},f.resize=function(B){B=d.getGraphDiv(B);var Y,j=new Promise(function(X,H){(!B||d.isHidden(B))&&H(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(Y=B._resolveResize),B._resolveResize=X,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||d.isHidden(B)){X(B);return}delete B.layout.width,delete B.layout.height;var K=B.changed;B.autoplay=!0,p.call("relayout",B,{autosize:!0}).then(function(){B.changed=K,B._resolveResize===X&&(delete B._resolveResize,X(B))})},100)});return Y&&Y(j),j},f.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},f.addLinks=function(B){if(!(!B._context.showLink&&!B._context.showSources)){var Y=B._fullLayout,j=d.ensureSingle(Y._paper,"text","js-plot-link-container",function(re){re.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:e.defaultLine,"pointer-events":"all"}).each(function(){var de=R.select(this);de.append("tspan").classed("js-link-to-tool",!0),de.append("tspan").classed("js-link-spacer",!0),de.append("tspan").classed("js-sourcelinks",!0)})}),X=j.node(),H={y:Y._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=Y.width-20?(H["text-anchor"]="start",H.x=5):(H["text-anchor"]="end",H.x=Y._paper.attr("width")-7),j.attr(H);var K=j.select(".js-link-to-tool"),W=j.select(".js-link-spacer"),$=j.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&a(B,K),W.text(K.text()&&$.text()?" - ":"")}};function a(B,Y){Y.text("");var j=Y.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(B._context.linkText+" "+String.fromCharCode(187));if(B._context.sendData)j.on("click",function(){f.sendDataToCloud(B)});else{var X=window.location.pathname.split("/"),H=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+X[2].split(".")[0]+"/"+X[1]+H})}}f.sendDataToCloud=function(B){var Y=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(!!Y){B.emit("plotly_beforeexport");var j=R.select(B).append("div").attr("id","hiddenform").style("display","none"),X=j.append("form").attr({action:Y+"/external",method:"post",target:"_blank"}),H=X.append("input").attr({type:"text",name:"data"});return H.node().value=f.graphJson(B,!1,"keepdata"),X.node().submit(),j.remove(),B.emit("plotly_afterexport"),!1}};var h=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],c=["year","month","dayMonth","dayMonthYear"];f.supplyDefaults=function(B,Y){var j=Y&&Y.skipUpdateCalc,X=B._fullLayout||{};if(X._skipDefaults){delete X._skipDefaults;return}var H=B._fullLayout={},K=B.layout||{},W=B._fullData||[],$=B._fullData=[],re=B.data||[],de=B.calcdata||[],ve=B._context||{},ue;B._transitionData||f.createTransitionData(B),H._dfltTitle={plot:_(B,"Click to enter Plot title"),x:_(B,"Click to enter X axis title"),y:_(B,"Click to enter Y axis title"),colorbar:_(B,"Click to enter Colorscale title"),annotation:_(B,"new text")},H._traceWord=_(B,"trace");var ce=t(B,h);if(H._mapboxAccessToken=ve.mapboxAccessToken,X._initialAutoSizeIsDone){var _e=X.width,fe=X.height;f.supplyLayoutGlobalDefaults(K,H,ce),K.width||(H.width=_e),K.height||(H.height=fe),f.sanitizeMargins(H)}else{f.supplyLayoutGlobalDefaults(K,H,ce);var ne=!K.width||!K.height,ie=H.autosize,me=ve.autosizable,we=ne&&(ie||me);we?f.plotAutoSize(B,K,H):ne&&f.sanitizeMargins(H),!ie&&ne&&(K.width=H.width,K.height=H.height)}H._d3locale=i(ce,H.separators),H._extraFormat=t(B,c),H._initialAutoSizeIsDone=!0,H._dataLength=re.length,H._modules=[],H._visibleModules=[],H._basePlotModules=[];var be=H._subplots=o(),Me=H._splomAxes={x:{},y:{}},Ie=H._splomSubplots={};H._splomGridDflt={},H._scatterStackOpts={},H._firstScatter={},H._alignmentOpts={},H._colorAxes={},H._requestRangeslider={},H._traceUids=m(W,re),H._globalTransforms=(B._context||{}).globalTransforms,f.supplyDataDefaults(re,$,K,H);var Ke=Object.keys(Me.x),Oe=Object.keys(Me.y);if(Ke.length>1&&Oe.length>1){for(p.getComponentMethod("grid","sizeDefaults")(K,H),ue=0;ue<Ke.length;ue++)d.pushUnique(be.xaxis,Ke[ue]);for(ue=0;ue<Oe.length;ue++)d.pushUnique(be.yaxis,Oe[ue]);for(var We in Ie)d.pushUnique(be.cartesian,We)}if(H._has=f._hasPlotType.bind(H),W.length===$.length)for(ue=0;ue<$.length;ue++)T($[ue],W[ue]);f.supplyLayoutModuleDefaults(K,H,$,B._transitionData);var Fe=H._visibleModules,Ge=[];for(ue=0;ue<Fe.length;ue++){var Xe=Fe[ue].crossTraceDefaults;Xe&&d.pushUnique(Ge,Xe)}for(ue=0;ue<Ge.length;ue++)Ge[ue]($,H);H._hasOnlyLargeSploms=H._basePlotModules.length===1&&H._basePlotModules[0].name==="splom"&&Ke.length>15&&Oe.length>15&&H.shapes.length===0&&H.images.length===0,f.linkSubplots($,H,W,X),f.cleanPlot($,H,W,X);var ut=!!(X._has&&X._has("gl2d")),rt=!!(H._has&&H._has("gl2d")),dt=!!(X._has&&X._has("cartesian")),st=!!(H._has&&H._has("cartesian")),Ve=dt||ut,Je=st||rt;Ve&&!Je?X._bgLayer.remove():Je&&!Ve&&(H._shouldCreateBgLayer=!0),X._zoomlayer&&!B._dragging&&l({_fullLayout:X}),r($,H),T(H,X),p.getComponentMethod("colorscale","crossTraceDefaults")($,H),H._preGUI||(H._preGUI={}),H._tracePreGUI||(H._tracePreGUI={});var ke=H._tracePreGUI,Le={},Be;for(Be in ke)Le[Be]="old";for(ue=0;ue<$.length;ue++)Be=$[ue]._fullInput.uid,Le[Be]||(ke[Be]={}),Le[Be]="new";for(Be in Le)Le[Be]==="old"&&delete ke[Be];S(H),p.getComponentMethod("rangeslider","makeData")(H),!j&&de.length===$.length&&f.supplyDefaultsUpdateCalc(de,$)},f.supplyDefaultsUpdateCalc=function(B,Y){for(var j=0;j<Y.length;j++){var X=Y[j],H=(B[j]||[])[0];if(H&&H.trace){var K=H.trace;if(K._hasCalcTransform){var W=K._arrayAttrs,$,re,de;for($=0;$<W.length;$++)re=W[$],de=d.nestedProperty(K,re).get().slice(),d.nestedProperty(X,re).set(de)}H.trace=X}}};function m(B,Y){var j=Y.length,X=[],H,K;for(H=0;H<B.length;H++){var W=B[H]._fullInput;W!==K&&X.push(W),K=W}var $=X.length,re=new Array(j),de={};function ve(_e,fe){re[fe]=_e,de[_e]=1}function ue(_e,fe){if(_e&&typeof _e=="string"&&!de[_e])return ve(_e,fe),!0}for(H=0;H<j;H++){var ce=Y[H].uid;typeof ce=="number"&&(ce=String(ce)),!ue(ce,H)&&(H<$&&ue(X[H].uid,H)||ve(d.randstr(de),H))}return re}function o(){var B=p.collectableSubplotTypes,Y={},j,X;if(!B){B=[];var H=p.subplotsRegistry;for(var K in H){var W=H[K],$=W.attr;if($&&(B.push(K),Array.isArray($)))for(X=0;X<$.length;X++)d.pushUnique(B,$[X])}}for(j=0;j<B.length;j++)Y[B[j]]=[];return Y}function t(B,Y){var j=B._context.locale;j||(j="en-US");var X=!1,H={};function K(ue){for(var ce=!0,_e=0;_e<Y.length;_e++){var fe=Y[_e];H[fe]||(ue[fe]?H[fe]=ue[fe]:ce=!1)}ce&&(X=!0)}for(var W=0;W<2;W++){for(var $=B._context.locales,re=0;re<2;re++){var de=($[j]||{}).format;if(de&&(K(de),X))break;$=p.localeRegistry}var ve=j.split("-")[0];if(X||ve===j)break;j=ve}return X||K(p.localeRegistry.en.format),H}function i(B,Y){return B.decimal=Y.charAt(0),B.thousands=Y.charAt(1),{numberFormat:function(j){try{j=N(B).format(d.adjustFormat(j))}catch{return d.warnBadFormat(j),d.noFormat}return j},timeFormat:L(B).utcFormat}}function r(B,Y){var j,X=[];Y.meta&&(j=Y._meta={meta:Y.meta,layout:{meta:Y.meta}});for(var H=0;H<B.length;H++){var K=B[H];K.meta?X[K.index]=K._meta={meta:K.meta}:Y.meta&&(K._meta={meta:Y.meta}),Y.meta&&(K._meta.layout={meta:Y.meta})}X.length&&(j||(j=Y._meta={}),j.data=X)}f.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},f._hasPlotType=function(B){var Y,j=this._basePlotModules||[];for(Y=0;Y<j.length;Y++)if(j[Y].name===B)return!0;var X=this._modules||[];for(Y=0;Y<X.length;Y++){var H=X[Y].name;if(H===B)return!0;var K=p.modules[H];if(K&&K.categories[B])return!0}return!1},f.cleanPlot=function(B,Y,j,X){var H,K,W=X._basePlotModules||[];for(H=0;H<W.length;H++){var $=W[H];$.clean&&$.clean(B,Y,j,X)}var re=X._has&&X._has("gl"),de=Y._has&&Y._has("gl");re&&!de&&X._glcontainer!==void 0&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var ve=!!X._infolayer;e:for(H=0;H<j.length;H++){var ue=j[H],ce=ue.uid;for(K=0;K<B.length;K++){var _e=B[K];if(ce===_e.uid)continue e}ve&&X._infolayer.select(".cb"+ce).remove()}},f.linkSubplots=function(B,Y,j,X){var H,K,W=X._plots||{},$=Y._plots={},re=Y._subplots,de={_fullData:B,_fullLayout:Y},ve=re.cartesian.concat(re.gl2d||[]);for(H=0;H<ve.length;H++){var ue=ve[H],ce=W[ue],_e=s.getFromId(de,ue,"x"),fe=s.getFromId(de,ue,"y"),ne;for(ce?ne=$[ue]=ce:(ne=$[ue]={},ne.id=ue),_e._counterAxes.push(fe._id),fe._counterAxes.push(_e._id),_e._subplotsWith.push(ue),fe._subplotsWith.push(ue),ne.xaxis=_e,ne.yaxis=fe,ne._hasClipOnAxisFalse=!1,K=0;K<B.length;K++){var ie=B[K];if(ie.xaxis===ne.xaxis._id&&ie.yaxis===ne.yaxis._id&&ie.cliponaxis===!1){ne._hasClipOnAxisFalse=!0;break}}}var me=s.list(de,null,!0),we;for(H=0;H<me.length;H++){we=me[H];var be=null;we.overlaying&&(be=s.getFromId(de,we.overlaying),be&&be.overlaying&&(we.overlaying=!1,be=null)),we._mainAxis=be||we,be&&(we.domain=be.domain.slice()),we._anchorAxis=we.anchor==="free"?null:s.getFromId(de,we.anchor)}for(H=0;H<me.length;H++)if(we=me[H],we._counterAxes.sort(s.idSort),we._subplotsWith.sort(d.subplotSort),we._mainSubplot=x(we,Y),we._counterAxes.length&&(we.spikemode&&we.spikemode.indexOf("across")!==-1||we.automargin&&we.mirror&&we.anchor!=="free"||p.getComponentMethod("rangeslider","isVisible")(we))){var Me=1,Ie=0;for(K=0;K<we._counterAxes.length;K++){var Ke=s.getFromId(de,we._counterAxes[K]);Me=Math.min(Me,Ke.domain[0]),Ie=Math.max(Ie,Ke.domain[1])}Me<Ie&&(we._counterDomainMin=Me,we._counterDomainMax=Ie)}};function x(B,Y){var j={_fullLayout:Y},X=B._id.charAt(0)==="x",H=B._mainAxis._anchorAxis,K="",W="",$="";if(H&&($=H._mainAxis._id,K=X?B._id+$:$+B._id),!K||!Y._plots[K]){K="";for(var re=B._counterAxes,de=0;de<re.length;de++){var ve=re[de],ue=X?B._id+ve:ve+B._id;W||(W=ue);var ce=s.getFromId(j,ve);if($&&ce.overlaying===$){K=ue;break}}}return K||W}f.clearExpandedTraceDefaultColors=function(B){var Y,j,X;function H(W,$,re,de){j[de]=$,j.length=de+1,W.valType==="color"&&W.dflt===void 0&&Y.push(j.join("."))}for(j=[],Y=B._module._colorAttrs,Y||(B._module._colorAttrs=Y=[],w.crawl(B._module.attributes,H)),X=0;X<Y.length;X++){var K=d.nestedProperty(B,"_input."+Y[X]);K.get()||d.nestedProperty(B,Y[X]).set(null)}},f.supplyDataDefaults=function(B,Y,j,X){var H=X._modules,K=X._visibleModules,W=X._basePlotModules,$=0,re=0,de,ve,ue;X._transformModules=[];function ce(Oe){Y.push(Oe);var We=Oe._module;!We||(d.pushUnique(H,We),Oe.visible===!0&&d.pushUnique(K,We),d.pushUnique(W,Oe._module.basePlotModule),$++,Oe._input.visible!==!1&&re++)}var _e={},fe=[],ne=(j.template||{}).data||{},ie=k.traceTemplater(ne);for(de=0;de<B.length;de++){if(ue=B[de],ve=ie.newTrace(ue),ve.uid=X._traceUids[de],f.supplyTraceDefaults(ue,ve,re,X,de),ve.index=de,ve._input=ue,ve._expandedIndex=$,ve.transforms&&ve.transforms.length)for(var me=ue.visible!==!1&&ve.visible===!1,we=E(ve,Y,j,X),be=0;be<we.length;be++){var Me=we[be],Ie={_template:ve._template,type:ve.type,uid:ve.uid+be};me&&Me.visible===!1&&delete Me.visible,f.supplyTraceDefaults(Me,Ie,$,X,de),T(Ie,Me),Ie.index=de,Ie._input=ue,Ie._fullInput=ve,Ie._expandedIndex=$,Ie._expandedInput=Me,ce(Ie)}else ve._fullInput=ve,ve._expandedInput=ve,ce(ve);p.traceIs(ve,"carpetAxis")&&(_e[ve.carpet]=ve),p.traceIs(ve,"carpetDependent")&&fe.push(de)}for(de=0;de<fe.length;de++)if(ve=Y[fe[de]],!!ve.visible){var Ke=_e[ve.carpet];if(ve._carpet=Ke,!Ke||!Ke.visible){ve.visible=!1;continue}ve.xaxis=Ke.xaxis,ve.yaxis=Ke.yaxis}},f.supplyAnimationDefaults=function(B){B=B||{};var Y,j={};function X(H,K){return d.coerce(B||{},j,b,H,K)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(B.frame))for(j.frame=[],Y=0;Y<B.frame.length;Y++)j.frame[Y]=f.supplyAnimationFrameDefaults(B.frame[Y]||{});else j.frame=f.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(j.transition=[],Y=0;Y<B.transition.length;Y++)j.transition[Y]=f.supplyAnimationTransitionDefaults(B.transition[Y]||{});else j.transition=f.supplyAnimationTransitionDefaults(B.transition||{});return j},f.supplyAnimationFrameDefaults=function(B){var Y={};function j(X,H){return d.coerce(B||{},Y,b.frame,X,H)}return j("duration"),j("redraw"),Y},f.supplyAnimationTransitionDefaults=function(B){var Y={};function j(X,H){return d.coerce(B||{},Y,b.transition,X,H)}return j("duration"),j("easing"),Y},f.supplyFrameDefaults=function(B){var Y={};function j(X,H){return d.coerce(B,Y,v,X,H)}return j("group"),j("name"),j("traces"),j("baseframe"),j("data"),j("layout"),Y},f.supplyTraceDefaults=function(B,Y,j,X,H){var K=X.colorway||e.defaults,W=K[j%K.length],$;function re(we,be){return d.coerce(B,Y,f.attributes,we,be)}var de=re("visible");re("type"),re("name",X._traceWord+" "+H),re("uirevision",X.uirevision);var ve=f.getModule(Y);if(Y._module=ve,ve){var ue=ve.basePlotModule,ce=ue.attr,_e=ue.attributes;if(ce&&_e){var fe=X._subplots,ne="";if(de||ue.name!=="gl2d"){if(Array.isArray(ce))for($=0;$<ce.length;$++){var ie=ce[$],me=d.coerce(B,Y,_e,ie);fe[ie]&&d.pushUnique(fe[ie],me),ne+=me}else ne=d.coerce(B,Y,_e,ce);fe[ue.name]&&d.pushUnique(fe[ue.name],ne)}}}return de&&(re("customdata"),re("ids"),re("meta"),p.traceIs(Y,"showLegend")?(d.coerce(B,Y,ve.attributes.showlegend?ve.attributes:f.attributes,"showlegend"),re("legendgroup"),re("legendgrouptitle.text"),re("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,ve&&ve.supplyDefaults(B,Y,W,X),p.traceIs(Y,"noOpacity")||re("opacity"),p.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),p.traceIs(Y,"noHover")||(Y.hovertemplate||d.coerceHoverinfo(B,Y,X),Y.type!=="parcats"&&p.getComponentMethod("fx","supplyDefaults")(B,Y,W,X)),ve&&ve.selectPoints&&re("selectedpoints"),f.supplyTransformDefaults(B,Y,X)),Y};function A(B){var Y=B.transforms;if(Array.isArray(Y)&&Y.length)for(var j=0;j<Y.length;j++){var X=Y[j],H=X._module||g[X.type];if(H&&H.makesData)return!0}return!1}f.hasMakesDataTransform=A,f.supplyTransformDefaults=function(B,Y,j){if(!!(Y._length||A(B))){var X=j._globalTransforms||[],H=j._transformModules||[];if(!(!Array.isArray(B.transforms)&&X.length===0))for(var K=B.transforms||[],W=X.concat(K),$=Y.transforms=[],re=0;re<W.length;re++){var de=W[re],ve=de.type,ue=g[ve],ce,_e=!(de._module&&de._module===ue),fe=ue&&typeof ue.transform=="function";ue||d.warn("Unrecognized transform type "+ve+"."),ue&&ue.supplyDefaults&&(_e||fe)?(ce=ue.supplyDefaults(de,Y,j,B),ce.type=ve,ce._module=ue,d.pushUnique(H,ue)):ce=d.extendFlat({},de),$.push(ce)}}};function E(B,Y,j,X){for(var H=B.transforms,K=[B],W=0;W<H.length;W++){var $=H[W],re=g[$.type];re&&re.transform&&(K=re.transform(K,{transform:$,fullTrace:B,fullData:Y,layout:j,fullLayout:X,transformIndex:W}))}return K}f.supplyLayoutGlobalDefaults=function(B,Y,j){function X(de,ve){return d.coerce(B,Y,f.layoutAttributes,de,ve)}var H=B.template;d.isPlainObject(H)&&(Y.template=H,Y._template=H.layout,Y._dataTemplate=H.data),X("autotypenumbers");var K=d.coerceFont(X,"font"),W=K.size;d.coerceFont(X,"title.font",d.extendFlat({},K,{size:Math.round(W*1.4)})),X("title.text",Y._dfltTitle.plot),X("title.xref"),X("title.yref"),X("title.x"),X("title.y"),X("title.xanchor"),X("title.yanchor"),X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l");var $=X("uniformtext.mode");$&&X("uniformtext.minsize"),X("autosize",!(B.width&&B.height)),X("width"),X("height"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),B.width&&B.height&&f.sanitizeMargins(Y),p.getComponentMethod("grid","sizeDefaults")(B,Y),X("paper_bgcolor"),X("separators",j.decimal+j.thousands),X("hidesources"),X("colorway"),X("datarevision");var re=X("uirevision");X("editrevision",re),X("selectionrevision",re),p.getComponentMethod("modebar","supplyLayoutDefaults")(B,Y),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,Y,X),X("meta"),d.isPlainObject(B.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(B,Y,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,Y,X)};function P(B){return typeof B=="string"&&B.substr(B.length-2)==="px"&&parseFloat(B)}f.plotAutoSize=function(Y,j,X){var H=Y._context||{},K=H.frameMargins,W,$,re=d.isPlotDiv(Y);if(re&&Y.emit("plotly_autosize"),H.fillFrame)W=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var de=re?window.getComputedStyle(Y):{};if(W=P(de.width)||P(de.maxWidth)||X.width,$=P(de.height)||P(de.maxHeight)||X.height,D(K)&&K>0){var ve=1-2*K;W=Math.round(ve*W),$=Math.round(ve*$)}}var ue=f.layoutAttributes.width.min,ce=f.layoutAttributes.height.min;W<ue&&(W=ue),$<ce&&($=ce);var _e=!j.width&&Math.abs(X.width-W)>1,fe=!j.height&&Math.abs(X.height-$)>1;(fe||_e)&&(_e&&(X.width=W),fe&&(X.height=$)),Y._initialAutoSize||(Y._initialAutoSize={width:W,height:$}),f.sanitizeMargins(X)},f.supplyLayoutModuleDefaults=function(B,Y,j,X){var H=p.componentsRegistry,K=Y._basePlotModules,W,$,re,de=p.subplotsRegistry.cartesian;for(W in H)re=H[W],re.includeBasePlot&&re.includeBasePlot(B,Y);K.length||K.push(de),Y._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(B,Y),de.finalizeSubplots(B,Y));for(var ve in Y._subplots)Y._subplots[ve].sort(d.subplotSort);for($=0;$<K.length;$++)re=K[$],re.supplyLayoutDefaults&&re.supplyLayoutDefaults(B,Y,j);var ue=Y._modules;for($=0;$<ue.length;$++)re=ue[$],re.supplyLayoutDefaults&&re.supplyLayoutDefaults(B,Y,j);var ce=Y._transformModules;for($=0;$<ce.length;$++)re=ce[$],re.supplyLayoutDefaults&&re.supplyLayoutDefaults(B,Y,j,X);for(W in H)re=H[W],re.supplyLayoutDefaults&&re.supplyLayoutDefaults(B,Y,j)},f.purge=function(B){var Y=B._fullLayout||{};Y._glcontainer!==void 0&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),d.clearThrottle(),d.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},f.style=function(B){var Y=B._fullLayout._visibleModules,j=[],X;for(X=0;X<Y.length;X++){var H=Y[X];H.style&&d.pushUnique(j,H.style)}for(X=0;X<j.length;X++)j[X](B)},f.sanitizeMargins=function(B){if(!(!B||!B.margin)){var Y=B.width,j=B.height,X=B.margin,H=Y-(X.l+X.r),K=j-(X.t+X.b),W;H<0&&(W=(Y-1)/(X.l+X.r),X.l=Math.floor(W*X.l),X.r=Math.floor(W*X.r)),K<0&&(W=(j-1)/(X.t+X.b),X.t=Math.floor(W*X.t),X.b=Math.floor(W*X.b))}},f.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},f.allowAutoMargin=function(B,Y){B._fullLayout._pushmarginIds[Y]=1};function S(B){var Y=B.margin;if(!B._size){var j=B._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};j.w=Math.round(B.width)-j.l-j.r,j.h=Math.round(B.height)-j.t-j.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={})}var C=2,M=2,I=64,G=64;f.autoMargin=function(B,Y,j){var X=B._fullLayout,H=X.width,K=X.height,W=X.margin,$=d.constrain(H-W.l-W.r,C,I),re=d.constrain(K-W.t-W.b,M,G),de=Math.max(0,H-$),ve=Math.max(0,K-re),ue=X._pushmargin,ce=X._pushmarginIds;if(W.autoexpand!==!1){if(!j)delete ue[Y],delete ce[Y];else{var _e=j.pad;if(_e===void 0&&(_e=Math.min(12,W.l,W.r,W.t,W.b)),de){var fe=(j.l+j.r)/de;fe>1&&(j.l/=fe,j.r/=fe)}if(ve){var ne=(j.t+j.b)/ve;ne>1&&(j.t/=ne,j.b/=ne)}var ie=j.xl!==void 0?j.xl:j.x,me=j.xr!==void 0?j.xr:j.x,we=j.yt!==void 0?j.yt:j.y,be=j.yb!==void 0?j.yb:j.y;ue[Y]={l:{val:ie,size:j.l+_e},r:{val:me,size:j.r+_e},b:{val:be,size:j.b+_e},t:{val:we,size:j.t+_e}},ce[Y]=1}if(!X._replotting)return f.doAutoMargin(B)}},f.doAutoMargin=function(B){var Y=B._fullLayout,j=Y.width,X=Y.height;Y._size||(Y._size={}),S(Y);var H=Y._size,K=Y.margin,W=d.extendFlat({},H),$=K.l,re=K.r,de=K.t,ve=K.b,ue=Y._pushmargin,ce=Y._pushmarginIds;if(Y.margin.autoexpand!==!1){for(var _e in ue)ce[_e]||delete ue[_e];ue.base={l:{val:0,size:$},r:{val:1,size:re},t:{val:1,size:de},b:{val:0,size:ve}};for(var fe in ue){var ne=ue[fe].l||{},ie=ue[fe].b||{},me=ne.val,we=ne.size,be=ie.val,Me=ie.size;for(var Ie in ue){if(D(we)&&ue[Ie].r){var Ke=ue[Ie].r.val,Oe=ue[Ie].r.size;if(Ke>me){var We=(we*Ke+(Oe-j)*me)/(Ke-me),Fe=(Oe*(1-me)+(we-j)*(1-Ke))/(Ke-me);We+Fe>$+re&&($=We,re=Fe)}}if(D(Me)&&ue[Ie].t){var Ge=ue[Ie].t.val,Xe=ue[Ie].t.size;if(Ge>be){var ut=(Me*Ge+(Xe-X)*be)/(Ge-be),rt=(Xe*(1-be)+(Me-X)*(1-Ge))/(Ge-be);ut+rt>ve+de&&(ve=ut,de=rt)}}}}}var dt=d.constrain(j-K.l-K.r,C,I),st=d.constrain(X-K.t-K.b,M,G),Ve=Math.max(0,j-dt),Je=Math.max(0,X-st);if(Ve){var ke=($+re)/Ve;ke>1&&($/=ke,re/=ke)}if(Je){var Le=(ve+de)/Je;Le>1&&(ve/=Le,de/=Le)}if(H.l=Math.round($),H.r=Math.round(re),H.t=Math.round(de),H.b=Math.round(ve),H.p=Math.round(K.pad),H.w=Math.round(j)-H.l-H.r,H.h=Math.round(X)-H.t-H.b,!Y._replotting&&f.didMarginChange(W,H)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var Be=3*(1+Object.keys(ce).length);if(Y._redrawFromAutoMarginCount<Be)return p.call("_doPlot",B);Y._size=W,d.warn("Too many auto-margin redraws.")}V(B)};function V(B){var Y=s.list(B,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(j){for(var X=0;X<Y.length;X++){var H=Y[X][j];H&&H()}})}var q=["l","r","t","b","p","w","h"];f.didMarginChange=function(B,Y){for(var j=0;j<q.length;j++){var X=q[j],H=B[X],K=Y[X];if(!D(H)||Math.abs(K-H)>1)return!0}return!1},f.graphJson=function(B,Y,j,X,H,K){(H&&Y&&!B._fullData||H&&!Y&&!B._fullLayout)&&f.supplyDefaults(B);var W=H?B._fullData:B.data,$=H?B._fullLayout:B.layout,re=(B._transitionData||{})._frames;function de(ce,_e){if(typeof ce=="function")return _e?"_function_":null;if(d.isPlainObject(ce)){var fe={},ne;return Object.keys(ce).sort().forEach(function(ie){if(["_","["].indexOf(ie.charAt(0))===-1){if(typeof ce[ie]=="function"){_e&&(fe[ie]="_function");return}if(j==="keepdata"){if(ie.substr(ie.length-3)==="src")return}else if(j==="keepstream"){if(ne=ce[ie+"src"],typeof ne=="string"&&ne.indexOf(":")>0&&!d.isPlainObject(ce.stream))return}else if(j!=="keepall"&&(ne=ce[ie+"src"],typeof ne=="string"&&ne.indexOf(":")>0))return;fe[ie]=de(ce[ie],_e)}}),fe}return Array.isArray(ce)?ce.map(function(ie){return de(ie,_e)}):d.isTypedArray(ce)?d.simpleMap(ce,d.identity):d.isJSDate(ce)?d.ms2DateTimeLocal(+ce):ce}var ve={data:(W||[]).map(function(ce){var _e=de(ce);return Y&&delete _e.fit,_e})};if(!Y&&(ve.layout=de($),H)){var ue=$._size;ve.layout.computed={margin:{b:ue.b,l:ue.l,r:ue.r,t:ue.t}}}return re&&(ve.frames=de(re)),K&&(ve.config=de(B._context,!0)),X==="object"?ve:JSON.stringify(ve)},f.modifyFrames=function(B,Y){var j,X,H,K=B._transitionData._frames,W=B._transitionData._frameHash;for(j=0;j<Y.length;j++)switch(X=Y[j],X.type){case"replace":H=X.value;var $=(K[X.index]||{}).name,re=H.name;K[X.index]=W[re]=H,re!==$&&(delete W[$],W[re]=H);break;case"insert":H=X.value,W[H.name]=H,K.splice(X.index,0,H);break;case"delete":H=K[X.index],delete W[H.name],K.splice(X.index,1);break}return Promise.resolve()},f.computeFrame=function(B,Y){var j=B._transitionData._frameHash,X,H,K,W;if(!Y)throw new Error("computeFrame must be given a string frame name");var $=j[Y.toString()];if(!$)return!1;for(var re=[$],de=[$.name];$.baseframe&&($=j[$.baseframe.toString()])&&de.indexOf($.name)===-1;)re.push($),de.push($.name);for(var ve={};$=re.pop();)if($.layout&&(ve.layout=f.extendLayout(ve.layout,$.layout)),$.data){if(ve.data||(ve.data=[]),H=$.traces,!H)for(H=[],X=0;X<$.data.length;X++)H[X]=X;for(ve.traces||(ve.traces=[]),X=0;X<$.data.length;X++)K=H[X],K!=null&&(W=ve.traces.indexOf(K),W===-1&&(W=ve.data.length,ve.traces[W]=K),ve.data[W]=f.extendTrace(ve.data[W],$.data[X]))}return ve},f.recomputeFrameHash=function(B){for(var Y=B._transitionData._frameHash={},j=B._transitionData._frames,X=0;X<j.length;X++){var H=j[X];H&&H.name&&(Y[H.name]=H)}},f.extendObjectWithContainers=function(B,Y,j){var X,H,K,W,$,re,de,ve,ue=d.extendDeepNoArrays({},Y||{}),ce=d.expandObjectPaths(ue),_e={};if(j&&j.length)for(K=0;K<j.length;K++)X=d.nestedProperty(ce,j[K]),H=X.get(),H===void 0?d.nestedProperty(_e,j[K]).set(null):(X.set(null),d.nestedProperty(_e,j[K]).set(H));if(B=d.extendDeepNoArrays(B||{},ce),j&&j.length){for(K=0;K<j.length;K++)if($=d.nestedProperty(_e,j[K]),de=$.get(),!!de){for(re=d.nestedProperty(B,j[K]),ve=re.get(),Array.isArray(ve)||(ve=[],re.set(ve)),W=0;W<de.length;W++){var fe=de[W];fe===null?ve[W]=null:ve[W]=f.extendObjectWithContainers(ve[W],fe)}re.set(ve)}}return B},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=p.layoutArrayContainers,f.extendTrace=function(B,Y){return f.extendObjectWithContainers(B,Y,f.dataArrayContainers)},f.extendLayout=function(B,Y){return f.extendObjectWithContainers(B,Y,f.layoutArrayContainers)},f.transition=function(B,Y,j,X,H,K){var W={redraw:H.redraw},$={},re=[];return W.prepareFn=function(){for(var de=Array.isArray(Y)?Y.length:0,ve=X.slice(0,de),ue=0;ue<ve.length;ue++){var ce=ve[ue],_e=B._fullData[ce],fe=_e._module;if(!!fe){if(fe.animatable){var ne=fe.basePlotModule.name;$[ne]||($[ne]=[]),$[ne].push(ce)}B.data[ve[ue]]=f.extendTrace(B.data[ve[ue]],Y[ue])}}var ie=d.expandObjectPaths(d.extendDeepNoArrays({},j)),me=/^[xy]axis[0-9]*$/;for(var we in ie)!me.test(we)||delete ie[we].range;f.extendLayout(B.layout,ie),delete B.calcdata,f.supplyDefaults(B),f.doCalcdata(B);var be=d.expandObjectPaths(j);if(be){var Me=B._fullLayout._plots;for(var Ie in Me){var Ke=Me[Ie],Oe=Ke.xaxis,We=Ke.yaxis,Fe=Oe.range.slice(),Ge=We.range.slice(),Xe=null,ut=null,rt=null,dt=null;Array.isArray(be[Oe._name+".range"])?Xe=be[Oe._name+".range"].slice():Array.isArray((be[Oe._name]||{}).range)&&(Xe=be[Oe._name].range.slice()),Array.isArray(be[We._name+".range"])?ut=be[We._name+".range"].slice():Array.isArray((be[We._name]||{}).range)&&(ut=be[We._name].range.slice()),Fe&&Xe&&(Oe.r2l(Fe[0])!==Oe.r2l(Xe[0])||Oe.r2l(Fe[1])!==Oe.r2l(Xe[1]))&&(rt={xr0:Fe,xr1:Xe}),Ge&&ut&&(We.r2l(Ge[0])!==We.r2l(ut[0])||We.r2l(Ge[1])!==We.r2l(ut[1]))&&(dt={yr0:Ge,yr1:ut}),(rt||dt)&&re.push(d.extendFlat({plotinfo:Ke},rt,dt))}}return Promise.resolve()},W.runFn=function(de){var ve,ue=B._fullLayout._basePlotModules,ce=re.length,_e;if(j)for(_e=0;_e<ue.length;_e++)ue[_e].transitionAxes&&ue[_e].transitionAxes(B,re,K,de);ce?(ve=d.extendFlat({},K),ve.duration=0,delete $.cartesian):ve=K;for(var fe in $){var ne=$[fe],ie=B._fullData[ne[0]]._module;ie.basePlotModule.plot(B,ne,ve,de)}},ee(B,K,W)},f.transitionFromReact=function(B,Y,j,X){var H=B._fullLayout,K=H.transition,W={},$=[];return W.prepareFn=function(){var re=H._plots;W.redraw=!1,Y.anim==="some"&&(W.redraw=!0),j.anim==="some"&&(W.redraw=!0);for(var de in re){var ve=re[de],ue=ve.xaxis,ce=ve.yaxis,_e=X[ue._name].range.slice(),fe=X[ce._name].range.slice(),ne=ue.range.slice(),ie=ce.range.slice();ue.setScale(),ce.setScale();var me=null,we=null;(ue.r2l(_e[0])!==ue.r2l(ne[0])||ue.r2l(_e[1])!==ue.r2l(ne[1]))&&(me={xr0:_e,xr1:ne}),(ce.r2l(fe[0])!==ce.r2l(ie[0])||ce.r2l(fe[1])!==ce.r2l(ie[1]))&&(we={yr0:fe,yr1:ie}),(me||we)&&$.push(d.extendFlat({plotinfo:ve},me,we))}return Promise.resolve()},W.runFn=function(re){for(var de=B._fullData,ve=B._fullLayout,ue=ve._basePlotModules,ce,_e,fe,ne=[],ie=0;ie<de.length;ie++)ne.push(ie);function me(){if(!!B._fullLayout)for(var be=0;be<ue.length;be++)ue[be].transitionAxes&&ue[be].transitionAxes(B,$,ce,re)}function we(){if(!!B._fullLayout)for(var be=0;be<ue.length;be++)ue[be].plot(B,fe,_e,re)}$.length&&Y.anim?K.ordering==="traces first"?(ce=d.extendFlat({},K,{duration:0}),fe=ne,_e=K,setTimeout(me,K.duration),we()):(ce=K,fe=null,_e=d.extendFlat({},K,{duration:0}),setTimeout(we,ce.duration),me()):$.length?(ce=K,me()):Y.anim&&(fe=ne,_e=K,we())},ee(B,K,W)};function ee(B,Y,j){var X=!1;function H(ue){var ce=Promise.resolve();if(!ue)return ce;for(;ue.length;)ce=ce.then(ue.shift());return ce}function K(ue){if(!!ue)for(;ue.length;)ue.shift()}function W(){return B.emit("plotly_transitioning",[]),new Promise(function(ue){B._transitioning=!0,Y.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){X=!0}),j.redraw&&B._transitionData._interruptCallbacks.push(function(){return p.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var ce=0,_e=0;function fe(){return ce++,function(){_e++,!X&&_e===ce&&$(ue)}}j.runFn(fe),setTimeout(fe())})}function $(ue){if(!!B._transitionData)return K(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(j.redraw)return p.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(ue)}function re(){if(!!B._transitionData)return B._transitioning=!1,H(B._transitionData._interruptCallbacks)}var de=[f.previousPromises,re,j.prepareFn,f.rehover,W],ve=d.syncOrAsync(de,B);return(!ve||!ve.then)&&(ve=Promise.resolve()),ve.then(function(){return B})}f.doCalcdata=function(B,Y){var j=s.list(B),X=B._fullData,H=B._fullLayout,K,W,$,re,de=new Array(X.length),ve=(B.calcdata||[]).slice();for(B.calcdata=de,H._numBoxes=0,H._numViolins=0,H._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,H._piecolormap={},H._sunburstcolormap={},H._treemapcolormap={},H._iciclecolormap={},H._funnelareacolormap={},$=0;$<X.length;$++)if(Array.isArray(Y)&&Y.indexOf($)===-1){de[$]=ve[$];continue}for($=0;$<X.length;$++)K=X[$],K._arrayAttrs=w.findArrayAttributes(K),K._extremes={};var ue=H._subplots.polar||[];for($=0;$<ue.length;$++)j.push(H[ue[$]].radialaxis,H[ue[$]].angularaxis);for(var ce in H._colorAxes){var _e=H[ce];_e.cauto!==!1&&(delete _e.cmin,delete _e.cmax)}var fe=!1;function ne(we){if(K=X[we],W=K._module,K.visible===!0&&K.transforms){if(W&&W.calc){var be=W.calc(B,K);be[0]&&be[0].t&&be[0].t._scene&&delete be[0].t._scene.dirty}for(re=0;re<K.transforms.length;re++){var Me=K.transforms[re];W=g[Me.type],W&&W.calcTransform&&(K._hasCalcTransform=!0,fe=!0,W.calcTransform(B,K,Me))}}}function ie(we,be){if(K=X[we],W=K._module,!!W.isContainer===be){var Me=[];if(K.visible===!0&&K._length!==0){delete K._indexToPoints;var Ie=K.transforms||[];for(re=Ie.length-1;re>=0;re--)if(Ie[re].enabled){K._indexToPoints=Ie[re]._indexToPoints;break}W&&W.calc&&(Me=W.calc(B,K))}(!Array.isArray(Me)||!Me[0])&&(Me=[{x:u,y:u}]),Me[0].t||(Me[0].t={}),Me[0].trace=K,de[we]=Me}}for(O(j,X,H),$=0;$<X.length;$++)ie($,!0);for($=0;$<X.length;$++)ne($);for(fe&&O(j,X,H),$=0;$<X.length;$++)ie($,!0);for($=0;$<X.length;$++)ie($,!1);Z(B);var me=U(j,B);if(me.length){for(H._numBoxes=0,H._numViolins=0,$=0;$<me.length;$++)ie(me[$],!0);for($=0;$<me.length;$++)ie(me[$],!1);Z(B)}p.getComponentMethod("fx","calc")(B),p.getComponentMethod("errorbars","calc")(B)};var Q=/(total|sum|min|max|mean|median) (ascending|descending)/;function U(B,Y){var j=[],X,H,K,W,$;function re(Ve,Je,ke){var Le=Je._id.charAt(0);if(Ve==="histogram2dcontour"){var Be=Je._counterAxes[0],pe=s.getFromId(Y,Be),Ae=Le==="x"||Be==="x"&&pe.type==="category",Ce=Le==="y"||Be==="y"&&pe.type==="category";return function(Se,He){return Se===0||He===0||Ae&&Se===ke[He].length-1||Ce&&He===ke.length-1?-1:(Le==="y"?He:Se)-1}}else return function(Se,He){return Le==="y"?He:Se}}var de={min:function(Ve){return d.aggNums(Math.min,null,Ve)},max:function(Ve){return d.aggNums(Math.max,null,Ve)},sum:function(Ve){return d.aggNums(function(Je,ke){return Je+ke},null,Ve)},total:function(Ve){return d.aggNums(function(Je,ke){return Je+ke},null,Ve)},mean:function(Ve){return d.mean(Ve)},median:function(Ve){return d.median(Ve)}};for(X=0;X<B.length;X++){var ve=B[X];if(ve.type==="category"){var ue=ve.categoryorder.match(Q);if(ue){var ce=ue[1],_e=ue[2],fe=ve._id.charAt(0),ne=fe==="x",ie=[];for(H=0;H<ve._categories.length;H++)ie.push([ve._categories[H],[]]);for(H=0;H<ve._traceIndices.length;H++){var me=ve._traceIndices[H],we=Y._fullData[me];if(we.visible===!0){var be=we.type;p.traceIs(we,"histogram")&&(delete we._xautoBinFinished,delete we._yautoBinFinished);var Me=be==="splom",Ie=be==="scattergl",Ke=Y.calcdata[me];for(K=0;K<Ke.length;K++){var Oe=Ke[K],We,Fe;if(Me){var Ge=we._axesDim[ve._id];if(!ne){var Xe=we._diag[Ge][0];Xe&&(ve=Y._fullLayout[s.id2name(Xe)])}var ut=Oe.trace.dimensions[Ge].values;for(W=0;W<ut.length;W++)for(We=ve._categoriesMap[ut[W]],$=0;$<Oe.trace.dimensions.length;$++)if($!==Ge){var rt=Oe.trace.dimensions[$];ie[We][1].push(rt.values[W])}}else if(Ie){for(W=0;W<Oe.t.x.length;W++)ne?(We=Oe.t.x[W],Fe=Oe.t.y[W]):(We=Oe.t.y[W],Fe=Oe.t.x[W]),ie[We][1].push(Fe);Oe.t&&Oe.t._scene&&delete Oe.t._scene.dirty}else if(Oe.hasOwnProperty("z")){Fe=Oe.z;var dt=re(we.type,ve,Fe);for(W=0;W<Fe.length;W++)for($=0;$<Fe[W].length;$++)We=dt($,W),We+1&&ie[We][1].push(Fe[W][$])}else for(We=Oe.p,We===void 0&&(We=Oe[fe]),Fe=Oe.s,Fe===void 0&&(Fe=Oe.v),Fe===void 0&&(Fe=ne?Oe.y:Oe.x),Array.isArray(Fe)||(Fe===void 0?Fe=[]:Fe=[Fe]),W=0;W<Fe.length;W++)ie[We][1].push(Fe[W])}}}ve._categoriesValue=ie;var st=[];for(H=0;H<ie.length;H++)st.push([ie[H][0],de[ce](ie[H][1])]);st.sort(function(Ve,Je){return Ve[1]-Je[1]}),ve._categoriesAggregatedValue=st,ve._initialCategories=st.map(function(Ve){return Ve[0]}),_e==="descending"&&ve._initialCategories.reverse(),j=j.concat(ve.sortByInitialCategories())}}}return j}function O(B,Y,j){var X={};function H(re){re.clearCalc(),re.type==="multicategory"&&re.setupMultiCategory(Y),X[re._id]=1}d.simpleMap(B,H);for(var K=j._axisMatchGroups||[],W=0;W<K.length;W++)for(var $ in K[W])X[$]||H(j[s.id2name($)])}function Z(B){var Y=B._fullLayout,j=Y._visibleModules,X={},H,K,W;for(K=0;K<j.length;K++){var $=j[K],re=$.crossTraceCalc;if(re){var de=$.basePlotModule.name;X[de]?d.pushUnique(X[de],re):X[de]=[re]}}for(W in X){var ve=X[W],ue=Y._subplots[W];if(Array.isArray(ue))for(H=0;H<ue.length;H++){var ce=ue[H],_e=W==="cartesian"?Y._plots[ce]:Y[ce];for(K=0;K<ve.length;K++)ve[K](B,_e,ce)}else for(K=0;K<ve.length;K++)ve[K](B)}}f.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},f.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},f.generalUpdatePerTraceModule=function(B,Y,j,X){var H=Y.traceHash,K={},W;for(W=0;W<j.length;W++){var $=j[W],re=$[0].trace;re.visible&&(K[re.type]=K[re.type]||[],K[re.type].push($))}for(var de in H)if(!K[de]){var ve=H[de][0],ue=ve[0].trace;ue.visible=!1,K[de]=[ve]}for(var ce in K){var _e=K[ce],fe=_e[0][0].trace._module;fe.plot(B,Y,d.filterVisible(_e),X)}Y.traceHash=K},f.plotBasePlot=function(B,Y,j,X,H){var K=p.getModule(B),W=y(Y.calcdata,K)[0];K.plot(Y,W,X,H)},f.cleanBasePlot=function(B,Y,j,X,H){var K=H._has&&H._has(B),W=j._has&&j._has(B);K&&!W&&H["_"+B+"layer"].selectAll("g.trace").remove()}},{"../components/color":119,"../constants/numerical":231,"../lib":252,"../plot_api/plot_schema":289,"../plot_api/plot_template":290,"../plots/get_data":334,"../registry":352,"./animation_attributes":295,"./attributes":297,"./cartesian/axis_ids":305,"./cartesian/handle_outline":312,"./command":330,"./font_attributes":332,"./frame_attributes":333,"./layout_attributes":347,"@plotly/d3":16,"d3-format":25,"d3-time-format":26,"fast-isnumeric":31}],350:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plot_api/plot_template"),N=z("./domain").defaults;le.exports=function(p,w,k,d){var e=d.type,u=d.attributes,s=d.handleDefaults,l=d.partition||"x",b=w._subplots[e],v=b.length,y=v&&b[0].replace(/\d+$/,""),T,_;function f(h,c){return R.coerce(T,_,u,h,c)}for(var g=0;g<v;g++){var n=b[g];p[n]?T=p[n]:T=p[n]={},_=L.newContainer(w,n,y),d.noUirevision||f("uirevision",w.uirevision);var a={};a[l]=[g/v,(g+1)/v],N(_,w,f,a),d.id=n,s(T,_,f,d)}}},{"../lib":252,"../plot_api/plot_template":290,"./domain":331}],351:[function(z,le,ae){"use strict";var R=z("../constants/docs"),L=R.FORMAT_LINK,N=R.DATE_FORMAT_LINK;function D(w){var k=w&&w.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(k?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,L,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,N,"for details on the date formatting syntax."].join(" ")}function p(w){var k=w.description?" "+w.description:"",d=w.keys||[];if(d.length>0){for(var e=[],u=0;u<d.length;u++)e[u]="`"+d[u]+"`";k=k+"Finally, the template string has access to ",d.length===1?k="variable "+e[0]:k="variables "+e.slice(0,-1).join(", ")+" and "+e.slice(-1)+"."}return k}ae.hovertemplateAttrs=function(w,k){w=w||{},k=k||{};var d=p(k),e={valType:"string",dflt:"",editType:w.editType||"none"};return w.arrayOk!==!1&&(e.arrayOk=!0),e},ae.texttemplateAttrs=function(w,k){w=w||{},k=k||{};var d=p(k),e={valType:"string",dflt:"",editType:w.editType||"calc"};return w.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":226}],352:[function(z,le,ae){"use strict";var R=z("./lib/loggers"),L=z("./lib/noop"),N=z("./lib/push_unique"),D=z("./lib/is_plain_object"),p=z("./lib/dom").addStyleRule,w=z("./lib/extend"),k=z("./plots/attributes"),d=z("./plots/layout_attributes"),e=w.extendFlat,u=w.extendDeepAll;ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(h){if(ae.collectableSubplotTypes=null,h)h&&!Array.isArray(h)&&(h=[h]);else throw new Error("No argument passed to Plotly.register.");for(var c=0;c<h.length;c++){var m=h[c];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":s(m);break;case"transform":v(m);break;case"component":b(m);break;case"locale":y(m);break;case"apiMethod":var o=m.name;ae.apiMethodRegistry[o]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(a){var h=ae.modules[n(a)];return h?h._module:!1},ae.traceIs=function(a,h){if(a=n(a),a==="various")return!1;var c=ae.modules[a];return c||(a&&R.log("Unrecognized trace type "+a+"."),c=ae.modules[k.type.dflt]),!!c.categories[h]},ae.getTransformIndices=function(a,h){for(var c=[],m=a.transforms||[],o=0;o<m.length;o++)m[o].type===h&&c.push(o);return c},ae.hasTransform=function(a,h){for(var c=a.transforms||[],m=0;m<c.length;m++)if(c[m].type===h)return!0;return!1},ae.getComponentMethod=function(a,h){var c=ae.componentsRegistry[a];return c&&c[h]||L},ae.call=function(){var a=arguments[0],h=[].slice.call(arguments,1);return ae.apiMethodRegistry[a].apply(null,h)};function s(a){var h=a.name,c=a.categories,m=a.meta;if(ae.modules[h]){R.log("Type "+h+" already registered");return}ae.subplotsRegistry[a.basePlotModule.name]||l(a.basePlotModule);for(var o={},t=0;t<c.length;t++)o[c[t]]=!0,ae.allCategories[c[t]]=!0;ae.modules[h]={_module:a,categories:o},m&&Object.keys(m).length&&(ae.modules[h].meta=m),ae.allTypes.push(h);for(var i in ae.componentsRegistry)_(i,h);a.layoutAttributes&&e(ae.traceLayoutAttributes,a.layoutAttributes);var r=a.basePlotModule,x=r.name;if(x==="mapbox"){var A=r.constants.styleRules;for(var E in A)p(".js-plotly-plot .plotly .mapboxgl-"+E,A[E])}(x==="geo"||x==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function l(a){var h=a.name;if(ae.subplotsRegistry[h]){R.log("Plot type "+h+" already registered.");return}T(a),ae.subplotsRegistry[h]=a;for(var c in ae.componentsRegistry)g(c,a.name)}function b(a){if(typeof a.name!="string")throw new Error("Component module *name* must be a string.");var h=a.name;ae.componentsRegistry[h]=a,a.layoutAttributes&&(a.layoutAttributes._isLinkedToArray&&N(ae.layoutArrayContainers,h),T(a));for(var c in ae.modules)_(h,c);for(var m in ae.subplotsRegistry)g(h,m);for(var o in ae.transformsRegistry)f(h,o);a.schema&&a.schema.layout&&u(d,a.schema.layout)}function v(a){if(typeof a.name!="string")throw new Error("Transform module *name* must be a string.");var h="Transform module "+a.name,c=typeof a.transform=="function",m=typeof a.calcTransform=="function";if(!c&&!m)throw new Error(h+" is missing a *transform* or *calcTransform* method.");c&&m&&R.log([h+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),D(a.attributes)||R.log(h+" registered without an *attributes* object."),typeof a.supplyDefaults!="function"&&R.log(h+" registered without a *supplyDefaults* method."),ae.transformsRegistry[a.name]=a;for(var o in ae.componentsRegistry)f(o,a.name)}function y(a){var h=a.name,c=h.split("-")[0],m=a.dictionary,o=a.format,t=m&&Object.keys(m).length,i=o&&Object.keys(o).length,r=ae.localeRegistry,x=r[h];if(x||(r[h]=x={}),c!==h){var A=r[c];A||(r[c]=A={}),t&&A.dictionary===x.dictionary&&(A.dictionary=m),i&&A.format===x.format&&(A.format=o)}t&&(x.dictionary=m),i&&(x.format=o)}function T(a){if(a.layoutAttributes){var h=a.layoutAttributes._arrayAttrRegexps;if(h)for(var c=0;c<h.length;c++)N(ae.layoutArrayRegexes,h[c])}}function _(a,h){var c=ae.componentsRegistry[a].schema;if(!(!c||!c.traces)){var m=c.traces[h];m&&u(ae.modules[h]._module.attributes,m)}}function f(a,h){var c=ae.componentsRegistry[a].schema;if(!(!c||!c.transforms)){var m=c.transforms[h];m&&u(ae.transformsRegistry[h].attributes,m)}}function g(a,h){var c=ae.componentsRegistry[a].schema;if(!(!c||!c.subplots)){var m=ae.subplotsRegistry[h],o=m.layoutAttributes,t=m.attr==="subplot"?m.name:m.attr;Array.isArray(t)&&(t=t[0]);var i=c.subplots[t];o&&i&&u(o,i)}}function n(a){return typeof a=="object"&&(a=a.type),a}},{"./lib/dom":243,"./lib/extend":245,"./lib/is_plain_object":253,"./lib/loggers":256,"./lib/noop":261,"./lib/push_unique":266,"./plots/attributes":297,"./plots/layout_attributes":347}],353:[function(z,le,ae){"use strict";var R=z("../registry"),L=z("../lib"),N=L.extendFlat,D=L.extendDeep;function p(k){var d;switch(k){case"themes__thumb":d={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":d={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:d={}}return d}function w(k){var d=["xaxis","yaxis","zaxis"];return d.indexOf(k.slice(0,5))>-1}le.exports=function(d,e){var u,s=d.data,l=d.layout,b=D([],s),v=D({},l,p(e.tileClass)),y=d._context||{};if(e.width&&(v.width=e.width),e.height&&(v.height=e.height),e.tileClass==="thumbnail"||e.tileClass==="themes__thumb"){v.annotations=[];var T=Object.keys(v);for(u=0;u<T.length;u++)w(T[u])&&(v[T[u]].title={text:""});for(u=0;u<b.length;u++){var _=b[u];_.showscale=!1,_.marker&&(_.marker.showscale=!1),R.traceIs(_,"pie-like")&&(_.textposition="none")}}if(Array.isArray(e.annotations))for(u=0;u<e.annotations.length;u++)v.annotations.push(e.annotations[u]);var f=Object.keys(v).filter(function(c){return c.match(/^scene\d*$/)});if(f.length){var g={};for(e.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),u=0;u<f.length;u++){var n=v[f[u]];n.xaxis||(n.xaxis={}),n.yaxis||(n.yaxis={}),n.zaxis||(n.zaxis={}),N(n.xaxis,g),N(n.yaxis,g),N(n.zaxis,g),n._scene=null}}var a=document.createElement("div");e.tileClass&&(a.className=e.tileClass);var h={gd:a,td:a,layout:v,data:b,config:{staticPlot:e.staticPlot===void 0?!0:e.staticPlot,plotGlPixelRatio:e.plotGlPixelRatio===void 0?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return e.setBackground!=="transparent"&&(h.config.setBackground=e.setBackground||"opaque"),h.gd.defaultLayout=p(e.tileClass),h}},{"../lib":252,"../registry":352}],354:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plot_api/to_image"),N=z("./filesaver"),D=z("./helpers");function p(w,k){var d;return R.isPlainObject(w)||(d=R.getGraphDiv(w)),k=k||{},k.format=k.format||"png",k.width=k.width||null,k.height=k.height||null,k.imageDataOnly=!0,new Promise(function(e,u){d&&d._snapshotInProgress&&u(new Error("Snapshotting already in progress.")),R.isIE()&&k.format!=="svg"&&u(new Error(D.MSG_IE_BAD_FORMAT)),d&&(d._snapshotInProgress=!0);var s=L(w,k),l=k.filename||w.fn||"newplot";l+="."+k.format.replace("-","."),s.then(function(b){return d&&(d._snapshotInProgress=!1),N(b,l,k.format)}).then(function(b){e(b)}).catch(function(b){d&&(d._snapshotInProgress=!1),u(b)})})}le.exports=p},{"../lib":252,"../plot_api/to_image":293,"./filesaver":355,"./helpers":356}],355:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("./helpers");function N(D,p,w){var k=document.createElement("a"),d="download"in k,e=new Promise(function(u,s){var l,b;if(R.isIE())return l=L.createBlob(D,"svg"),window.navigator.msSaveBlob(l,p),l=null,u(p);if(d)return l=L.createBlob(D,w),b=L.createObjectURL(l),k.href=b,k.download=p,document.body.appendChild(k),k.click(),document.body.removeChild(k),L.revokeObjectURL(b),l=null,u(p);if(R.isSafari()){var v=w==="svg"?",":";base64,";return L.octetStream(v+encodeURIComponent(D)),u(p)}s(new Error("download error"))});return e}le.exports=N},{"../lib":252,"./helpers":356}],356:[function(z,le,ae){"use strict";var R=z("../registry");ae.getDelay=function(D){return D._has&&(D._has("gl3d")||D._has("gl2d")||D._has("mapbox"))?500:0},ae.getRedrawFunc=function(D){return function(){R.getComponentMethod("colorbar","draw")(D)}},ae.encodeSVG=function(D){return"data:image/svg+xml,"+encodeURIComponent(D)},ae.encodeJSON=function(D){return"data:application/json,"+encodeURIComponent(D)};var L=window.URL||window.webkitURL;ae.createObjectURL=function(D){return L.createObjectURL(D)},ae.revokeObjectURL=function(D){return L.revokeObjectURL(D)},ae.createBlob=function(D,p){if(p==="svg")return new window.Blob([D],{type:"image/svg+xml;charset=utf-8"});if(p==="full-json")return new window.Blob([D],{type:"application/json;charset=utf-8"});var w=N(window.atob(D));return new window.Blob([w],{type:"image/"+p})},ae.octetStream=function(D){document.location.href="data:application/octet-stream"+D};function N(D){for(var p=D.length,w=new ArrayBuffer(p),k=new Uint8Array(w),d=0;d<p;d++)k[d]=D.charCodeAt(d);return w}ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":352}],357:[function(z,le,ae){"use strict";var R=z("./helpers"),L={getDelay:R.getDelay,getRedrawFunc:R.getRedrawFunc,clone:z("./cloneplot"),toSVG:z("./tosvg"),svgToImg:z("./svgtoimg"),toImage:z("./toimage"),downloadImage:z("./download")};le.exports=L},{"./cloneplot":353,"./download":354,"./helpers":356,"./svgtoimg":358,"./toimage":359,"./tosvg":360}],358:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("events").EventEmitter,N=z("./helpers");function D(p){var w=p.emitter||new L,k=new Promise(function(d,e){var u=window.Image,s=p.svg,l=p.format||"png";if(R.isIE()&&l!=="svg"){var b=new Error(N.MSG_IE_BAD_FORMAT);return e(b),p.promise?k:w.emit("error",b)}var v=p.canvas,y=p.scale||1,T=p.width||300,_=p.height||150,f=y*T,g=y*_,n=v.getContext("2d"),a=new u,h,c;l==="svg"||R.isSafari()?c=N.encodeSVG(s):(h=N.createBlob(s,"svg"),c=N.createObjectURL(h)),v.width=f,v.height=g,a.onload=function(){var m;switch(h=null,N.revokeObjectURL(c),l!=="svg"&&n.drawImage(a,0,0,f,g),l){case"jpeg":m=v.toDataURL("image/jpeg");break;case"png":m=v.toDataURL("image/png");break;case"webp":m=v.toDataURL("image/webp");break;case"svg":m=c;break;default:var o="Image format is not jpeg, png, svg or webp.";if(e(new Error(o)),!p.promise)return w.emit("error",o)}d(m),p.promise||w.emit("success",m)},a.onerror=function(m){if(h=null,N.revokeObjectURL(c),e(m),!p.promise)return w.emit("error",m)},a.src=c});return p.promise?k:w}le.exports=D},{"../lib":252,"./helpers":356,events:17}],359:[function(z,le,ae){"use strict";var R=z("events").EventEmitter,L=z("../registry"),N=z("../lib"),D=z("./helpers"),p=z("./cloneplot"),w=z("./tosvg"),k=z("./svgtoimg");function d(e,u){var s=new R,l=p(e,{format:"png"}),b=l.gd;b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);function v(){var T=D.getDelay(b._fullLayout);setTimeout(function(){var _=w(b),f=document.createElement("canvas");f.id=N.randstr(),s=k({format:u.format,width:b._fullLayout.width,height:b._fullLayout.height,canvas:f,emitter:s,svg:_}),s.clean=function(){b&&document.body.removeChild(b)}},T)}var y=D.getRedrawFunc(b);return L.call("_doPlot",b,l.data,l.layout,l.config).then(y).then(v).catch(function(T){s.emit("error",T)}),s}le.exports=d},{"../lib":252,"../registry":352,"./cloneplot":353,"./helpers":356,"./svgtoimg":358,"./tosvg":360,events:17}],360:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../lib"),N=z("../components/drawing"),D=z("../components/color"),p=z("../constants/xmlns_namespaces"),w=/"/g,k="TOBESTRIPPED",d=new RegExp('("'+k+")|("+k+'")',"g");function e(s){var l=R.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(v){return v==="&lt;"?"&#60;":v==="&rt;"?"&#62;":v.indexOf("<")!==-1||v.indexOf(">")!==-1?"":l.html(v).text()});return l.remove(),b}function u(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}le.exports=function(l,b,v){var y=l._fullLayout,T=y._paper,_=y._toppaper,f=y.width,g=y.height,n;T.insert("rect",":first-child").call(N.setRect,0,0,f,g).call(D.fill,y.paper_bgcolor);var a=y._basePlotModules||[];for(n=0;n<a.length;n++){var h=a[n];h.toSVG&&h.toSVG(l)}if(_){var c=_.node().childNodes,m=Array.prototype.slice.call(c);for(n=0;n<m.length;n++){var o=m[n];o.childNodes.length&&T.node().appendChild(o)}}y._draggers&&y._draggers.remove(),T.node().style.background="",T.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var i=R.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){i.remove();return}else i.style({visibility:null,display:null});var r=this.style.fontFamily;r&&r.indexOf('"')!==-1&&i.style("font-family",r.replace(w,k))}),T.selectAll(".gradient_filled,.pattern_filled").each(function(){var i=R.select(this),r=this.style.fill;r&&r.indexOf("url(")!==-1&&i.style("fill",r.replace(w,k));var x=this.style.stroke;x&&x.indexOf("url(")!==-1&&i.style("stroke",x.replace(w,k))}),(b==="pdf"||b==="eps")&&T.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),T.node().setAttributeNS(p.xmlns,"xmlns",p.svg),T.node().setAttributeNS(p.xmlns,"xmlns:xlink",p.xlink),b==="svg"&&v&&(T.attr("width",v*f),T.attr("height",v*g),T.attr("viewBox","0 0 "+f+" "+g));var t=new window.XMLSerializer().serializeToString(T.node());return t=e(t),t=u(t),t=t.replace(d,"'"),L.isIE()&&(t=t.replace(/"/gi,"'"),t=t.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),t=t.replace(/(\\')/gi,'"')),t}},{"../components/color":119,"../components/drawing":141,"../constants/xmlns_namespaces":232,"../lib":252,"@plotly/d3":16}],361:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/attributes"),L=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,N=z("../../plots/template_attributes").hovertemplateAttrs,D=z("../mesh3d/attributes"),p=z("../../plots/attributes"),w=z("../../lib/extend").extendFlat,k={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:N({editType:"calc"},{keys:["norm"]}),uhoverformat:L("u",1),vhoverformat:L("v",1),whoverformat:L("w",1),xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z"),showlegend:w({},p.showlegend,{dflt:!1})};w(k,R("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var d=["opacity","lightposition","lighting"];d.forEach(function(e){k[e]=D[e]}),k.hoverinfo=w({},p.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),k.transforms=void 0,le.exports=k},{"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351,"../mesh3d/attributes":373}],362:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/calc");le.exports=function(N,D){for(var p=D.u,w=D.v,k=D.w,d=Math.min(D.x.length,D.y.length,D.z.length,p.length,w.length,k.length),e=-1/0,u=1/0,s=0;s<d;s++){var l=p[s],b=w[s],v=k[s],y=Math.sqrt(l*l+b*b+v*v);e=Math.max(e,y),u=Math.min(u,y)}D._len=d,D._normMax=e,R(N,D,{vals:[u,e],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":127}],363:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_cone3d,L=z("../../../stackgl_modules").gl_cone3d.createConeMesh,N=z("../../lib").simpleMap,D=z("../../lib/gl_format_color").parseColorScale,p=z("../../components/colorscale").extractOpts,w=z("../../plots/gl3d/zip3");function k(v,y){this.scene=v,this.uid=y,this.mesh=null,this.data=null}var d=k.prototype;d.handlePick=function(v){if(v.object===this.mesh){var y=v.index=v.data.index,T=this.data.x[y],_=this.data.y[y],f=this.data.z[y],g=this.data.u[y],n=this.data.v[y],a=this.data.w[y];v.traceCoordinate=[T,_,f,g,n,a,Math.sqrt(g*g+n*n+a*a)];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&h[y]!==void 0?v.textLabel=h[y]:h&&(v.textLabel=h),!0}};var e={xaxis:0,yaxis:1,zaxis:2},u={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function l(v,y){var T=v.fullSceneLayout,_=v.dataScale,f={};function g(c,m){var o=T[m],t=_[e[m]];return N(c,function(i){return o.d2l(i)*t})}f.vectors=w(g(y.u,"xaxis"),g(y.v,"yaxis"),g(y.w,"zaxis"),y._len),f.positions=w(g(y.x,"xaxis"),g(y.y,"yaxis"),g(y.z,"zaxis"),y._len);var n=p(y);f.colormap=D(y),f.vertexIntensityBounds=[n.min/y._normMax,n.max/y._normMax],f.coneOffset=u[y.anchor],y.sizemode==="scaled"?f.coneSize=y.sizeref||.5:f.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var a=R(f),h=y.lightposition;return a.lightPosition=[h.x,h.y,h.z],a.ambient=y.lighting.ambient,a.diffuse=y.lighting.diffuse,a.specular=y.lighting.specular,a.roughness=y.lighting.roughness,a.fresnel=y.lighting.fresnel,a.opacity=y.opacity,y._pad=s[y.anchor]*a.vectorScale*a.coneScale*y._normMax,a}d.update=function(v){this.data=v;var y=l(this.scene,v);this.mesh.update(y)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(v,y){var T=v.glplot.gl,_=l(v,y),f=L(T,_),g=new k(v,y.uid);return g.mesh=f,g.data=y,f._trace=g,v.glplot.add(f),g}le.exports=b},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib":252,"../../lib/gl_format_color":249,"../../plots/gl3d/zip3":346}],364:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/colorscale/defaults"),N=z("./attributes");le.exports=function(p,w,k,d){function e(T,_){return R.coerce(p,w,N,T,_)}var u=e("u"),s=e("v"),l=e("w"),b=e("x"),v=e("y"),y=e("z");if(!u||!u.length||!s||!s.length||!l||!l.length||!b||!b.length||!v||!v.length||!y||!y.length){w.visible=!1;return}e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),L(p,w,d,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),w._length=null}},{"../../components/colorscale/defaults":129,"../../lib":252,"./attributes":361}],365:[function(z,le,ae){"use strict";le.exports={moduleType:"trace",name:"cone",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:z("./attributes"),supplyDefaults:z("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:z("./calc"),plot:z("./convert"),eventData:function(R,L){return R.norm=L.traceCoordinate[6],R},meta:{}}},{"../../plots/gl3d":335,"./attributes":361,"./calc":362,"./convert":363,"./defaults":364}],366:[function(z,le,ae){"use strict";var R=z("../../lib").maxRowLength;le.exports=function(N){var D=[],p={},w=[],k=N[0],d=[],e=[0,0,0],u=R(N),s,l,b,v,y,T,_,f;for(l=0;l<N.length;l++)for(s=d,d=k,k=N[l+1]||[],b=0;b<u;b++)d[b]===void 0&&(T=(d[b-1]!==void 0?1:0)+(d[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(k[b]!==void 0?1:0),T?(l===0&&T++,b===0&&T++,l===N.length-1&&T++,b===d.length-1&&T++,T<4&&(p[[l,b]]=[l,b,T]),D.push([l,b,T])):w.push([l,b]));for(;w.length;){for(_={},f=!1,y=w.length-1;y>=0;y--)v=w[y],l=v[0],b=v[1],T=((p[[l-1,b]]||e)[2]+(p[[l+1,b]]||e)[2]+(p[[l,b-1]]||e)[2]+(p[[l,b+1]]||e)[2])/20,T&&(_[v]=[l,b,T],w.splice(y,1),f=!0);if(!f)throw"findEmpties iterated with no new neighbors";for(v in _)p[v]=_[v],D.push(_[v])}return D.sort(function(g,n){return n[2]-g[2]})}},{"../../lib":252}],367:[function(z,le,ae){"use strict";var R=z("../../lib"),L=.01,N=[[-1,0],[1,0],[0,-1],[0,1]];function D(w){return .5-.25*Math.min(1,w*.5)}le.exports=function(k,d){var e=1,u;for(p(k,d),u=0;u<d.length&&!(d[u][2]<4);u++);for(d=d.slice(u),u=0;u<100&&e>L;u++)e=p(k,d,D(e));return e>L&&R.log("interp2d didn't converge quickly",e),k};function p(w,k,d){var e=0,u,s,l,b,v,y,T,_,f,g,n,a,h;for(b=0;b<k.length;b++){for(u=k[b],s=u[0],l=u[1],n=w[s][l],g=0,f=0,v=0;v<4;v++)y=N[v],T=w[s+y[0]],T&&(_=T[l+y[1]],_!==void 0&&(g===0?a=h=_:(a=Math.min(a,_),h=Math.max(h,_)),f++,g+=_));if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";w[s][l]=g/f,n===void 0?f<4&&(e=1):(w[s][l]=(1+d)*w[s][l]-d*n,h>a&&(e=Math.max(e,Math.abs(w[s][l]-n)/(h-a))))}return e}},{"../../lib":252}],368:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/attributes"),L=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,N=z("../../plots/template_attributes").hovertemplateAttrs,D=z("../mesh3d/attributes"),p=z("../../plots/attributes"),w=z("../../lib/extend").extendFlat,k=z("../../plot_api/edit_types").overrideAll;function d(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function e(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var u=le.exports=k(w({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:d("x"),y:d("y"),z:d("z")},caps:{x:e("x"),y:e("y"),z:e("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:N(),xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z"),valuehoverformat:L("value",1),showlegend:w({},p.showlegend,{dflt:!1})},R("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:D.opacity,lightposition:D.lightposition,lighting:D.lighting,flatshading:D.flatshading,contour:D.contour,hoverinfo:w({},p.hoverinfo)}),"calc","nested");u.flatshading.dflt=!0,u.lighting.facenormalsepsilon.dflt=0,u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351,"../mesh3d/attributes":373}],369:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/calc"),L=z("../streamtube/calc").processGrid,N=z("../streamtube/calc").filter;le.exports=function(p,w){w._len=Math.min(w.x.length,w.y.length,w.z.length,w.value.length),w._x=N(w.x,w._len),w._y=N(w.y,w._len),w._z=N(w.z,w._len),w._value=N(w.value,w._len);var k=L(w);w._gridFill=k.fill,w._Xs=k.Xs,w._Ys=k.Ys,w._Zs=k.Zs,w._len=k.len;for(var d=1/0,e=-1/0,u=0;u<w._len;u++){var s=w._value[u];d=Math.min(d,s),e=Math.max(e,s)}w._minValues=d,w._maxValues=e,w._vMin=w.isomin===void 0||w.isomin===null?d:w.isomin,w._vMax=w.isomax===void 0||w.isomin===null?e:w.isomax,R(p,w,{vals:[w._vMin,w._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":127,"../streamtube/calc":416}],370:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_mesh3d,L=z("../../lib/gl_format_color").parseColorScale,N=z("../../lib/str2rgbarray"),D=z("../../components/colorscale").extractOpts,p=z("../../plots/gl3d/zip3"),w=function(l,b){for(var v=b.length-1;v>0;v--){var y=Math.min(b[v],b[v-1]),T=Math.max(b[v],b[v-1]);if(T>y&&y<l&&l<=T)return{id:v,distRatio:(T-l)/(T-y)}}return{id:0,distRatio:0}};function k(l,b,v){this.scene=l,this.uid=v,this.mesh=b,this.name="",this.data=null,this.showContour=!1}var d=k.prototype;d.handlePick=function(l){if(l.object===this.mesh){var b=l.data.index,v=this.data._meshX[b],y=this.data._meshY[b],T=this.data._meshZ[b],_=this.data._Ys.length,f=this.data._Zs.length,g=w(v,this.data._Xs).id,n=w(y,this.data._Ys).id,a=w(T,this.data._Zs).id,h=l.index=a+f*n+f*_*g;l.traceCoordinate=[this.data._meshX[h],this.data._meshY[h],this.data._meshZ[h],this.data._value[h]];var c=this.data.hovertext||this.data.text;return Array.isArray(c)&&c[h]!==void 0?l.textLabel=c[h]:c&&(l.textLabel=c),!0}},d.update=function(l){var b=this.scene,v=b.fullSceneLayout;this.data=u(l);function y(n,a,h,c){return a.map(function(m){return n.d2l(m,0,c)*h})}var T=p(y(v.xaxis,l._meshX,b.dataScale[0],l.xcalendar),y(v.yaxis,l._meshY,b.dataScale[1],l.ycalendar),y(v.zaxis,l._meshZ,b.dataScale[2],l.zcalendar)),_=p(l._meshI,l._meshJ,l._meshK),f={positions:T,cells:_,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:N(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},g=D(l);f.vertexIntensity=l._meshIntensity,f.vertexIntensityBounds=[g.min,g.max],f.colormap=L(l),this.mesh.update(f)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var e=["xyz","xzy","yxz","yzx","zxy","zyx"];function u(l){l._meshI=[],l._meshJ=[],l._meshK=[];var b=l.surface.show,v=l.spaceframe.show,y=l.surface.fill,T=l.spaceframe.fill,_=!1,f=!1,g=0,n,a,h=l._Xs,c=l._Ys,m=l._Zs,o=h.length,t=c.length,i=m.length,r=e.indexOf(l._gridFill.replace(/-/g,"").replace(/\+/g,"")),x=function(Ve,Je,ke){switch(r){case 5:return ke+i*Je+i*t*Ve;case 4:return ke+i*Ve+i*o*Je;case 3:return Je+t*ke+t*i*Ve;case 2:return Je+t*Ve+t*o*ke;case 1:return Ve+o*ke+o*i*Je;default:return Ve+o*Je+o*t*ke}},A=l._minValues,E=l._maxValues,P=l._vMin,S=l._vMax,C,M,I,G;function V(Ve,Je,ke){for(var Le=G.length,Be=a;Be<Le;Be++)if(Ve===C[Be]&&Je===M[Be]&&ke===I[Be])return Be;return-1}function q(){a=n}function ee(){C=[],M=[],I=[],G=[],n=0,q()}function Q(Ve,Je,ke,Le){return C.push(Ve),M.push(Je),I.push(ke),G.push(Le),n++,n-1}function U(Ve,Je,ke){return l._meshI.push(Ve),l._meshJ.push(Je),l._meshK.push(ke),g++,g-1}function O(Ve,Je,ke){for(var Le=[],Be=0;Be<Ve.length;Be++)Le[Be]=(Ve[Be]+Je[Be]+ke[Be])/3;return Le}function Z(Ve,Je,ke){for(var Le=[],Be=0;Be<Ve.length;Be++)Le[Be]=Ve[Be]*(1-ke)+ke*Je[Be];return Le}var B;function Y(Ve){B=Ve}function j(Ve,Je){var ke=Ve[0],Le=Ve[1],Be=Ve[2],pe=O(ke,Le,Be),Ae=Math.sqrt(1-B),Ce=Z(pe,ke,Ae),Se=Z(pe,Le,Ae),He=Z(pe,Be,Ae),Ne=Je[0],qe=Je[1],at=Je[2];return{xyzv:[[ke,Le,Se],[Se,Ce,ke],[Le,Be,He],[He,Se,Le],[Be,ke,Ce],[Ce,He,Be]],abc:[[Ne,qe,-1],[-1,-1,Ne],[qe,at,-1],[-1,-1,qe],[at,Ne,-1],[-1,-1,at]]}}function X(Ve,Je){return Ve==="all"||Ve===null?!0:Ve.indexOf(Je)>-1}function H(Ve,Je){return Ve===null?Je:Ve}function K(Ve,Je,ke){q();var Le=[Je],Be=[ke];if(B>=1)Le=[Je],Be=[ke];else if(B>0){var pe=j(Je,ke);Le=pe.xyzv,Be=pe.abc}for(var Ae=0;Ae<Le.length;Ae++){Je=Le[Ae],ke=Be[Ae];for(var Ce=[],Se=0;Se<3;Se++){var He=Je[Se][0],Ne=Je[Se][1],qe=Je[Se][2],at=Je[Se][3],nt=ke[Se]>-1?ke[Se]:V(He,Ne,qe);nt>-1?Ce[Se]=nt:Ce[Se]=Q(He,Ne,qe,H(Ve,at))}U(Ce[0],Ce[1],Ce[2])}}function W(Ve,Je,ke){var Le=function(Be,pe,Ae){K(Ve,[Je[Be],Je[pe],Je[Ae]],[ke[Be],ke[pe],ke[Ae]])};Le(0,1,2),Le(2,3,0)}function $(Ve,Je,ke){var Le=function(Be,pe,Ae){K(Ve,[Je[Be],Je[pe],Je[Ae]],[ke[Be],ke[pe],ke[Ae]])};Le(0,1,2),Le(3,0,1),Le(2,3,0),Le(1,2,3)}function re(Ve,Je,ke,Le){var Be=Ve[3];Be<ke&&(Be=ke),Be>Le&&(Be=Le);for(var pe=(Ve[3]-Be)/(Ve[3]-Je[3]+1e-9),Ae=[],Ce=0;Ce<4;Ce++)Ae[Ce]=(1-pe)*Ve[Ce]+pe*Je[Ce];return Ae}function de(Ve,Je,ke){return Ve>=Je&&Ve<=ke}function ve(Ve){var Je=.001*(S-P);return Ve>=P-Je&&Ve<=S+Je}function ue(Ve){for(var Je=[],ke=0;ke<4;ke++){var Le=Ve[ke];Je.push([l._x[Le],l._y[Le],l._z[Le],l._value[Le]])}return Je}var ce=3;function _e(Ve,Je,ke,Le,Be,pe){pe||(pe=1),ke=[-1,-1,-1];var Ae=!1,Ce=[de(Je[0][3],Le,Be),de(Je[1][3],Le,Be),de(Je[2][3],Le,Be)];if(!Ce[0]&&!Ce[1]&&!Ce[2])return!1;var Se=function(Ne,qe,at){return ve(qe[0][3])&&ve(qe[1][3])&&ve(qe[2][3])?(K(Ne,qe,at),!0):pe<ce?_e(Ne,qe,at,P,S,++pe):!1};if(Ce[0]&&Ce[1]&&Ce[2])return Se(Ve,Je,ke)||Ae;var He=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ne){if(Ce[Ne[0]]&&Ce[Ne[1]]&&!Ce[Ne[2]]){var qe=Je[Ne[0]],at=Je[Ne[1]],nt=Je[Ne[2]],Ze=re(nt,qe,Le,Be),ht=re(nt,at,Le,Be);Ae=Se(Ve,[ht,Ze,qe],[-1,-1,ke[Ne[0]]])||Ae,Ae=Se(Ve,[qe,at,ht],[ke[Ne[0]],ke[Ne[1]],-1])||Ae,He=!0}}),He||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ne){if(Ce[Ne[0]]&&!Ce[Ne[1]]&&!Ce[Ne[2]]){var qe=Je[Ne[0]],at=Je[Ne[1]],nt=Je[Ne[2]],Ze=re(at,qe,Le,Be),ht=re(nt,qe,Le,Be);Ae=Se(Ve,[ht,Ze,qe],[-1,-1,ke[Ne[0]]])||Ae,He=!0}}),Ae}function fe(Ve,Je,ke,Le){var Be=!1,pe=ue(Je),Ae=[de(pe[0][3],ke,Le),de(pe[1][3],ke,Le),de(pe[2][3],ke,Le),de(pe[3][3],ke,Le)];if(!Ae[0]&&!Ae[1]&&!Ae[2]&&!Ae[3])return Be;if(Ae[0]&&Ae[1]&&Ae[2]&&Ae[3])return f&&(Be=$(Ve,pe,Je)||Be),Be;var Ce=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Se){if(Ae[Se[0]]&&Ae[Se[1]]&&Ae[Se[2]]&&!Ae[Se[3]]){var He=pe[Se[0]],Ne=pe[Se[1]],qe=pe[Se[2]],at=pe[Se[3]];if(f)Be=K(Ve,[He,Ne,qe],[Je[Se[0]],Je[Se[1]],Je[Se[2]]])||Be;else{var nt=re(at,He,ke,Le),Ze=re(at,Ne,ke,Le),ht=re(at,qe,ke,Le);Be=K(null,[nt,Ze,ht],[-1,-1,-1])||Be}Ce=!0}}),Ce||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Se){if(Ae[Se[0]]&&Ae[Se[1]]&&!Ae[Se[2]]&&!Ae[Se[3]]){var He=pe[Se[0]],Ne=pe[Se[1]],qe=pe[Se[2]],at=pe[Se[3]],nt=re(qe,He,ke,Le),Ze=re(qe,Ne,ke,Le),ht=re(at,Ne,ke,Le),kt=re(at,He,ke,Le);f?(Be=K(Ve,[He,kt,nt],[Je[Se[0]],-1,-1])||Be,Be=K(Ve,[Ne,Ze,ht],[Je[Se[1]],-1,-1])||Be):Be=W(null,[nt,Ze,ht,kt],[-1,-1,-1,-1])||Be,Ce=!0}}),Ce)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Se){if(Ae[Se[0]]&&!Ae[Se[1]]&&!Ae[Se[2]]&&!Ae[Se[3]]){var He=pe[Se[0]],Ne=pe[Se[1]],qe=pe[Se[2]],at=pe[Se[3]],nt=re(Ne,He,ke,Le),Ze=re(qe,He,ke,Le),ht=re(at,He,ke,Le);f?(Be=K(Ve,[He,nt,Ze],[Je[Se[0]],-1,-1])||Be,Be=K(Ve,[He,Ze,ht],[Je[Se[0]],-1,-1])||Be,Be=K(Ve,[He,ht,nt],[Je[Se[0]],-1,-1])||Be):Be=K(null,[nt,Ze,ht],[-1,-1,-1])||Be,Ce=!0}}),Be}function ne(Ve,Je,ke,Le,Be,pe,Ae,Ce,Se,He,Ne){var qe=!1;return _&&(X(Ve,"A")&&(qe=fe(null,[Je,ke,Le,pe],He,Ne)||qe),X(Ve,"B")&&(qe=fe(null,[ke,Le,Be,Se],He,Ne)||qe),X(Ve,"C")&&(qe=fe(null,[ke,pe,Ae,Se],He,Ne)||qe),X(Ve,"D")&&(qe=fe(null,[Le,pe,Ce,Se],He,Ne)||qe),X(Ve,"E")&&(qe=fe(null,[ke,Le,pe,Se],He,Ne)||qe)),f&&(qe=fe(Ve,[ke,Le,pe,Se],He,Ne)||qe),qe}function ie(Ve,Je,ke,Le,Be,pe,Ae,Ce){return[Ce[0]===!0?!0:_e(Ve,ue([Je,ke,Le]),[Je,ke,Le],pe,Ae),Ce[1]===!0?!0:_e(Ve,ue([Le,Be,Je]),[Le,Be,Je],pe,Ae)]}function me(Ve,Je,ke,Le,Be,pe,Ae,Ce,Se){return Ce?ie(Ve,Je,ke,Be,Le,pe,Ae,Se):ie(Ve,ke,Be,Le,Je,pe,Ae,Se)}function we(Ve,Je,ke,Le,Be,pe,Ae){var Ce=!1,Se,He,Ne,qe,at=function(){Ce=_e(Ve,[Se,He,Ne],[-1,-1,-1],Be,pe)||Ce,Ce=_e(Ve,[Ne,qe,Se],[-1,-1,-1],Be,pe)||Ce},nt=Ae[0],Ze=Ae[1],ht=Ae[2];return nt&&(Se=Z(ue([x(Je,ke-0,Le-0)])[0],ue([x(Je-1,ke-0,Le-0)])[0],nt),He=Z(ue([x(Je,ke-0,Le-1)])[0],ue([x(Je-1,ke-0,Le-1)])[0],nt),Ne=Z(ue([x(Je,ke-1,Le-1)])[0],ue([x(Je-1,ke-1,Le-1)])[0],nt),qe=Z(ue([x(Je,ke-1,Le-0)])[0],ue([x(Je-1,ke-1,Le-0)])[0],nt),at()),Ze&&(Se=Z(ue([x(Je-0,ke,Le-0)])[0],ue([x(Je-0,ke-1,Le-0)])[0],Ze),He=Z(ue([x(Je-0,ke,Le-1)])[0],ue([x(Je-0,ke-1,Le-1)])[0],Ze),Ne=Z(ue([x(Je-1,ke,Le-1)])[0],ue([x(Je-1,ke-1,Le-1)])[0],Ze),qe=Z(ue([x(Je-1,ke,Le-0)])[0],ue([x(Je-1,ke-1,Le-0)])[0],Ze),at()),ht&&(Se=Z(ue([x(Je-0,ke-0,Le)])[0],ue([x(Je-0,ke-0,Le-1)])[0],ht),He=Z(ue([x(Je-0,ke-1,Le)])[0],ue([x(Je-0,ke-1,Le-1)])[0],ht),Ne=Z(ue([x(Je-1,ke-1,Le)])[0],ue([x(Je-1,ke-1,Le-1)])[0],ht),qe=Z(ue([x(Je-1,ke-0,Le)])[0],ue([x(Je-1,ke-0,Le-1)])[0],ht),at()),Ce}function be(Ve,Je,ke,Le,Be,pe,Ae,Ce,Se,He,Ne,qe){var at=Ve;return qe?(_&&Ve==="even"&&(at=null),ne(at,Je,ke,Le,Be,pe,Ae,Ce,Se,He,Ne)):(_&&Ve==="odd"&&(at=null),ne(at,Se,Ce,Ae,pe,Be,Le,ke,Je,He,Ne))}function Me(Ve,Je,ke,Le,Be){for(var pe=[],Ae=0,Ce=0;Ce<Je.length;Ce++)for(var Se=Je[Ce],He=1;He<i;He++)for(var Ne=1;Ne<t;Ne++)pe.push(me(Ve,x(Se,Ne-1,He-1),x(Se,Ne-1,He),x(Se,Ne,He-1),x(Se,Ne,He),ke,Le,(Se+Ne+He)%2,Be&&Be[Ae]?Be[Ae]:[])),Ae++;return pe}function Ie(Ve,Je,ke,Le,Be){for(var pe=[],Ae=0,Ce=0;Ce<Je.length;Ce++)for(var Se=Je[Ce],He=1;He<o;He++)for(var Ne=1;Ne<i;Ne++)pe.push(me(Ve,x(He-1,Se,Ne-1),x(He,Se,Ne-1),x(He-1,Se,Ne),x(He,Se,Ne),ke,Le,(He+Se+Ne)%2,Be&&Be[Ae]?Be[Ae]:[])),Ae++;return pe}function Ke(Ve,Je,ke,Le,Be){for(var pe=[],Ae=0,Ce=0;Ce<Je.length;Ce++)for(var Se=Je[Ce],He=1;He<t;He++)for(var Ne=1;Ne<o;Ne++)pe.push(me(Ve,x(Ne-1,He-1,Se),x(Ne-1,He,Se),x(Ne,He-1,Se),x(Ne,He,Se),ke,Le,(Ne+He+Se)%2,Be&&Be[Ae]?Be[Ae]:[])),Ae++;return pe}function Oe(Ve,Je,ke){for(var Le=1;Le<i;Le++)for(var Be=1;Be<t;Be++)for(var pe=1;pe<o;pe++)be(Ve,x(pe-1,Be-1,Le-1),x(pe-1,Be-1,Le),x(pe-1,Be,Le-1),x(pe-1,Be,Le),x(pe,Be-1,Le-1),x(pe,Be-1,Le),x(pe,Be,Le-1),x(pe,Be,Le),Je,ke,(pe+Be+Le)%2)}function We(Ve,Je,ke){f=!0,Oe(Ve,Je,ke),f=!1}function Fe(Ve,Je,ke){_=!0,Oe(Ve,Je,ke),_=!1}function Ge(Ve,Je,ke,Le,Be,pe){for(var Ae=[],Ce=0,Se=0;Se<Je.length;Se++)for(var He=Je[Se],Ne=1;Ne<i;Ne++)for(var qe=1;qe<t;qe++)Ae.push(we(Ve,He,qe,Ne,ke,Le,Be[Se],pe&&pe[Ce]?pe[Ce]:[])),Ce++;return Ae}function Xe(Ve,Je,ke,Le,Be,pe){for(var Ae=[],Ce=0,Se=0;Se<Je.length;Se++)for(var He=Je[Se],Ne=1;Ne<o;Ne++)for(var qe=1;qe<i;qe++)Ae.push(we(Ve,Ne,He,qe,ke,Le,Be[Se],pe&&pe[Ce]?pe[Ce]:[])),Ce++;return Ae}function ut(Ve,Je,ke,Le,Be,pe){for(var Ae=[],Ce=0,Se=0;Se<Je.length;Se++)for(var He=Je[Se],Ne=1;Ne<t;Ne++)for(var qe=1;qe<o;qe++)Ae.push(we(Ve,qe,Ne,He,ke,Le,Be[Se],pe&&pe[Ce]?pe[Ce]:[])),Ce++;return Ae}function rt(Ve,Je){for(var ke=[],Le=Ve;Le<Je;Le++)ke.push(Le);return ke}function dt(){for(var Ve=0;Ve<o;Ve++)for(var Je=0;Je<t;Je++)for(var ke=0;ke<i;ke++){var Le=x(Ve,Je,ke);Q(l._x[Le],l._y[Le],l._z[Le],l._value[Le])}}function st(){ee(),dt();var Ve=null;if(v&&T&&(Y(T),We(Ve,P,S)),b&&y){Y(y);for(var Je=l.surface.pattern,ke=l.surface.count,Le=0;Le<ke;Le++){var Be=ke===1?.5:Le/(ke-1),pe=(1-Be)*P+Be*S,Ae=Math.abs(pe-A),Ce=Math.abs(pe-E),Se=Ae>Ce?[A,pe]:[pe,E];Fe(Je,Se[0],Se[1])}}var He=[[Math.min(P,E),Math.max(P,E)],[Math.min(A,S),Math.max(A,S)]];["x","y","z"].forEach(function(Ne){for(var qe=[],at=0;at<He.length;at++){var nt=0,Ze=He[at][0],ht=He[at][1],kt=l.slices[Ne];if(kt.show&&kt.fill){Y(kt.fill);var xt=[],Bt=[],Zt=[];if(kt.locations.length)for(var Gt=0;Gt<kt.locations.length;Gt++){var Rt=w(kt.locations[Gt],Ne==="x"?h:Ne==="y"?c:m);Rt.distRatio===0?xt.push(Rt.id):Rt.id>0&&(Bt.push(Rt.id),Ne==="x"?Zt.push([Rt.distRatio,0,0]):Ne==="y"?Zt.push([0,Rt.distRatio,0]):Zt.push([0,0,Rt.distRatio]))}else Ne==="x"?xt=rt(1,o-1):Ne==="y"?xt=rt(1,t-1):xt=rt(1,i-1);Bt.length>0&&(Ne==="x"?qe[nt]=Ge(Ve,Bt,Ze,ht,Zt,qe[nt]):Ne==="y"?qe[nt]=Xe(Ve,Bt,Ze,ht,Zt,qe[nt]):qe[nt]=ut(Ve,Bt,Ze,ht,Zt,qe[nt]),nt++),xt.length>0&&(Ne==="x"?qe[nt]=Me(Ve,xt,Ze,ht,qe[nt]):Ne==="y"?qe[nt]=Ie(Ve,xt,Ze,ht,qe[nt]):qe[nt]=Ke(Ve,xt,Ze,ht,qe[nt]),nt++)}var Wt=l.caps[Ne];Wt.show&&Wt.fill&&(Y(Wt.fill),Ne==="x"?qe[nt]=Me(Ve,[0,o-1],Ze,ht,qe[nt]):Ne==="y"?qe[nt]=Ie(Ve,[0,t-1],Ze,ht,qe[nt]):qe[nt]=Ke(Ve,[0,i-1],Ze,ht,qe[nt]),nt++)}}),g===0&&ee(),l._meshX=C,l._meshY=M,l._meshZ=I,l._meshIntensity=G,l._Xs=h,l._Ys=c,l._Zs=m}return st(),l}function s(l,b){var v=l.glplot.gl,y=R({gl:v}),T=new k(l,y,b.uid);return y._trace=T,T.update(b),l.glplot.add(y),T}le.exports={findNearestOnAxis:w,generateIsoMeshes:u,createIsosurfaceTrace:s}},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib/gl_format_color":249,"../../lib/str2rgbarray":276,"../../plots/gl3d/zip3":346}],371:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry"),N=z("./attributes"),D=z("../../components/colorscale/defaults");function p(k,d,e,u){function s(l,b){return R.coerce(k,d,N,l,b)}w(k,d,e,u,s)}function w(k,d,e,u,s){var l=s("isomin"),b=s("isomax");b!=null&&l!==void 0&&l!==null&&l>b&&(d.isomin=null,d.isomax=null);var v=s("x"),y=s("y"),T=s("z"),_=s("value");if(!v||!v.length||!y||!y.length||!T||!T.length||!_||!_.length){d.visible=!1;return}var f=L.getComponentMethod("calendars","handleTraceDefaults");f(k,d,["x","y","z"],u),s("valuehoverformat"),["x","y","z"].forEach(function(h){s(h+"hoverformat");var c="caps."+h,m=s(c+".show");m&&s(c+".fill");var o="slices."+h,t=s(o+".show");t&&(s(o+".fill"),s(o+".locations"))});var g=s("spaceframe.show");g&&s("spaceframe.fill");var n=s("surface.show");n&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var a=s("contour.show");a&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(h){s(h)}),D(k,d,u,s,{prefix:"",cLetter:"c"}),d._length=null}le.exports={supplyDefaults:p,supplyIsoDefaults:w}},{"../../components/colorscale/defaults":129,"../../lib":252,"../../registry":352,"./attributes":368}],372:[function(z,le,ae){"use strict";le.exports={attributes:z("./attributes"),supplyDefaults:z("./defaults").supplyDefaults,calc:z("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:z("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":335,"./attributes":368,"./calc":369,"./convert":370,"./defaults":371}],373:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/attributes"),L=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,N=z("../../plots/template_attributes").hovertemplateAttrs,D=z("../surface/attributes"),p=z("../../plots/attributes"),w=z("../../lib/extend").extendFlat;le.exports=w({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:N({editType:"calc"}),xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},R("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:D.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:w({},D.contours.x.show,{}),color:D.contours.x.color,width:D.contours.x.width,editType:"calc"},lightposition:{x:w({},D.lightposition.x,{dflt:1e5}),y:w({},D.lightposition.y,{dflt:1e5}),z:w({},D.lightposition.z,{dflt:0}),editType:"calc"},lighting:w({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},D.lighting),hoverinfo:w({},p.hoverinfo,{editType:"calc"}),showlegend:w({},p.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351,"../surface/attributes":420}],374:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/calc");le.exports=function(N,D){D.intensity&&R(N,D,{vals:D.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":127}],375:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_mesh3d,L=z("../../../stackgl_modules").delaunay_triangulate,N=z("../../../stackgl_modules").alpha_shape,D=z("../../../stackgl_modules").convex_hull,p=z("../../lib/gl_format_color").parseColorScale,w=z("../../lib/str2rgbarray"),k=z("../../components/colorscale").extractOpts,d=z("../../plots/gl3d/zip3");function e(_,f,g){this.scene=_,this.uid=g,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var u=e.prototype;u.handlePick=function(_){if(_.object===this.mesh){var f=_.index=_.data.index;_.data._cellCenter?_.traceCoordinate=_.data.dataCoordinate:_.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f]];var g=this.data.hovertext||this.data.text;return Array.isArray(g)&&g[f]!==void 0?_.textLabel=g[f]:g&&(_.textLabel=g),!0}};function s(_){for(var f=[],g=_.length,n=0;n<g;n++)f[n]=w(_[n]);return f}function l(_,f,g,n){for(var a=[],h=f.length,c=0;c<h;c++)a[c]=_.d2l(f[c],0,n)*g;return a}function b(_){for(var f=[],g=_.length,n=0;n<g;n++)f[n]=Math.round(_[n]);return f}function v(_,f){for(var g=["x","y","z"].indexOf(_),n=[],a=f.length,h=0;h<a;h++)n[h]=[f[h][(g+1)%3],f[h][(g+2)%3]];return L(n)}function y(_,f){for(var g=_.length,n=0;n<g;n++)if(_[n]<=-.5||_[n]>=f-.5)return!1;return!0}u.update=function(_){var f=this.scene,g=f.fullSceneLayout;this.data=_;var n=_.x.length,a=d(l(g.xaxis,_.x,f.dataScale[0],_.xcalendar),l(g.yaxis,_.y,f.dataScale[1],_.ycalendar),l(g.zaxis,_.z,f.dataScale[2],_.zcalendar)),h;if(_.i&&_.j&&_.k){if(_.i.length!==_.j.length||_.j.length!==_.k.length||!y(_.i,n)||!y(_.j,n)||!y(_.k,n))return;h=d(b(_.i),b(_.j),b(_.k))}else _.alphahull===0?h=D(a):_.alphahull>0?h=N(_.alphahull,a):h=v(_.delaunayaxis,a);var c={positions:a,cells:h,lightPosition:[_.lightposition.x,_.lightposition.y,_.lightposition.z],ambient:_.lighting.ambient,diffuse:_.lighting.diffuse,specular:_.lighting.specular,roughness:_.lighting.roughness,fresnel:_.lighting.fresnel,vertexNormalsEpsilon:_.lighting.vertexnormalsepsilon,faceNormalsEpsilon:_.lighting.facenormalsepsilon,opacity:_.opacity,contourEnable:_.contour.show,contourColor:w(_.contour.color).slice(0,3),contourWidth:_.contour.width,useFacetNormals:_.flatshading};if(_.intensity){var m=k(_);this.color="#fff";var o=_.intensitymode;c[o+"Intensity"]=_.intensity,c[o+"IntensityBounds"]=[m.min,m.max],c.colormap=p(_)}else _.vertexcolor?(this.color=_.vertexcolor[0],c.vertexColors=s(_.vertexcolor)):_.facecolor?(this.color=_.facecolor[0],c.cellColors=s(_.facecolor)):(this.color=_.color,c.meshColor=w(_.color));this.mesh.update(c)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function T(_,f){var g=_.glplot.gl,n=R({gl:g}),a=new e(_,n,f.uid);return n._trace=a,a.update(f),_.glplot.add(n),a}le.exports=T},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib/gl_format_color":249,"../../lib/str2rgbarray":276,"../../plots/gl3d/zip3":346}],376:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("../../components/colorscale/defaults"),D=z("./attributes");le.exports=function(w,k,d,e){function u(y,T){return L.coerce(w,k,D,y,T)}function s(y){var T=y.map(function(_){var f=u(_);return f&&L.isArrayOrTypedArray(f)?f:null});return T.every(function(_){return _&&_.length===T[0].length})&&T}var l=s(["x","y","z"]);if(!l){k.visible=!1;return}if(s(["i","j","k"]),k.i&&(!k.j||!k.k)||k.j&&(!k.k||!k.i)||k.k&&(!k.i||!k.j)){k.visible=!1;return}var b=R.getComponentMethod("calendars","handleTraceDefaults");b(w,k,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){u(y)});var v=u("contour.show");v&&(u("contour.color"),u("contour.width")),"intensity"in w?(u("intensity"),u("intensitymode"),N(w,k,e,u,{prefix:"",cLetter:"c"})):(k.showscale=!1,"facecolor"in w?u("facecolor"):"vertexcolor"in w?u("vertexcolor"):u("color",d)),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),k._length=null}},{"../../components/colorscale/defaults":129,"../../lib":252,"../../registry":352,"./attributes":373}],377:[function(z,le,ae){"use strict";le.exports={attributes:z("./attributes"),supplyDefaults:z("./defaults"),calc:z("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:z("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":335,"./attributes":373,"./calc":374,"./convert":375,"./defaults":376}],378:[function(z,le,ae){"use strict";var R=z("../../lib");function L(N){return N.indexOf("e")!==-1?N.replace(/[.]?0+e/,"e"):N.indexOf(".")!==-1?N.replace(/[.]?0+$/,""):N}ae.formatPiePercent=function(D,p){var w=L((D*100).toPrecision(3));return R.numSeparate(w,p)+"%"},ae.formatPieValue=function(D,p){var w=L(D.toPrecision(10));return R.numSeparate(w,p)},ae.getFirstFilled=function(D,p){if(!!Array.isArray(D))for(var w=0;w<p.length;w++){var k=D[p[w]];if(k||k===0||k==="")return k}},ae.castOption=function(D,p){if(Array.isArray(D))return ae.getFirstFilled(D,p);if(D)return D},ae.getRotationAngle=function(N){return(N==="auto"?0:N)*Math.PI/180}},{"../../lib":252}],379:[function(z,le,ae){"use strict";var R=z("../../components/color"),L=z("./helpers").castOption;le.exports=function(D,p,w){var k=w.marker.line,d=L(k.color,p.pts)||R.defaultLine,e=L(k.width,p.pts)||0;D.style("stroke-width",e).call(R.fill,p.color).call(R.stroke,d)}},{"../../components/color":119,"./helpers":378}],380:[function(z,le,ae){"use strict";var R=z("../../lib");le.exports=function(N,D){for(var p=0;p<N.length;p++)N[p].i=p;R.mergeArray(D.text,N,"tx"),R.mergeArray(D.texttemplate,N,"txt"),R.mergeArray(D.hovertext,N,"htx"),R.mergeArray(D.customdata,N,"data"),R.mergeArray(D.textposition,N,"tp"),D.textfont&&(R.mergeArrayCastPositive(D.textfont.size,N,"ts"),R.mergeArray(D.textfont.color,N,"tc"),R.mergeArray(D.textfont.family,N,"tf"));var w=D.marker;if(w){R.mergeArrayCastPositive(w.size,N,"ms"),R.mergeArrayCastPositive(w.opacity,N,"mo"),R.mergeArray(w.symbol,N,"mx"),R.mergeArray(w.color,N,"mc");var k=w.line;w.line&&(R.mergeArray(k.color,N,"mlc"),R.mergeArrayCastPositive(k.width,N,"mlw"));var d=w.gradient;d&&d.type!=="none"&&(R.mergeArray(d.type,N,"mgt"),R.mergeArray(d.color,N,"mgc"))}}},{"../../lib":252}],381:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,L=z("../../plots/template_attributes").texttemplateAttrs,N=z("../../plots/template_attributes").hovertemplateAttrs,D=z("../../components/colorscale/attributes"),p=z("../../plots/font_attributes"),w=z("../../components/drawing/attributes").dash,k=z("../../components/drawing/attributes").pattern,d=z("../../components/drawing"),e=z("./constants"),u=z("../../lib/extend").extendFlat;function s(v){return{valType:"any",dflt:0,editType:"calc"}}function l(v){return{valType:"any",editType:"calc"}}function b(v){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}le.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s("x"),yperiod:s("y"),xperiod0:l("x0"),yperiod0:l("y0"),xperiodalignment:b("x"),yperiodalignment:b("y"),xhoverformat:R("x"),yhoverformat:R("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:L({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:N({},{keys:e.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},w,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:k,marker:u({symbol:{valType:"enumerated",values:d.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:u({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},D("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},D("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:p({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":126,"../../components/drawing":141,"../../components/drawing/attributes":140,"../../lib/extend":245,"../../plots/cartesian/axis_format_attributes":304,"../../plots/font_attributes":332,"../../plots/template_attributes":351,"./constants":385}],382:[function(z,le,ae){"use strict";var R=z("fast-isnumeric"),L=z("../../lib"),N=z("../../plots/cartesian/axes"),D=z("../../plots/cartesian/align_period"),p=z("../../constants/numerical").BADNUM,w=z("./subtypes"),k=z("./colorscale_calc"),d=z("./arrays_to_calcdata"),e=z("./calc_selection");function u(T,_){var f=T._fullLayout,g=N.getFromId(T,_.xaxis||"x"),n=N.getFromId(T,_.yaxis||"y"),a=g.makeCalcdata(_,"x"),h=n.makeCalcdata(_,"y"),c=D(_,g,"x",a),m=D(_,n,"y",h),o=c.vals,t=m.vals,i=_._length,r=new Array(i),x=_.ids,A=y(_,f,g,n),E=!1,P,S,C,M,I,G;b(f,_);var V="x",q="y",ee;if(A)L.pushUnique(A.traceIndices,_._expandedIndex),P=A.orientation==="v",P?(q="s",ee="x"):(V="s",ee="y"),I=A.stackgaps==="interpolate";else{var Q=l(_,i);s(T,_,g,n,o,t,Q)}var U=!!_.xperiodalignment,O=!!_.yperiodalignment;for(S=0;S<i;S++){var Z=r[S]={},B=R(o[S]),Y=R(t[S]);B&&Y?(Z[V]=o[S],Z[q]=t[S],U&&(Z.orig_x=a[S],Z.xEnd=c.ends[S],Z.xStart=c.starts[S]),O&&(Z.orig_y=h[S],Z.yEnd=m.ends[S],Z.yStart=m.starts[S])):A&&(P?B:Y)?(Z[ee]=P?o[S]:t[S],Z.gap=!0,I?(Z.s=p,E=!0):Z.s=0):Z[V]=Z[q]=p,x&&(Z.id=String(x[S]))}if(d(r,_),k(T,_),e(r,_),A){for(S=0;S<r.length;)r[S][ee]===p?r.splice(S,1):S++;if(L.sort(r,function(K,W){return K[ee]-W[ee]||K.i-W.i}),E){for(S=0;S<r.length-1&&r[S].gap;)S++;for(G=r[S].s,G||(G=r[S].s=0),C=0;C<S;C++)r[C].s=G;for(M=r.length-1;M>S&&r[M].gap;)M--;for(G=r[M].s,C=r.length-1;C>M;C--)r[C].s=G;for(;S<M;)if(S++,r[S].gap){for(C=S+1;r[C].gap;)C++;for(var j=r[S-1][ee],X=r[S-1].s,H=(r[C].s-X)/(r[C][ee]-j);S<C;)r[S].s=X+(r[S][ee]-j)*H,S++}}}return r}function s(T,_,f,g,n,a,h){var c=_._length,m=T._fullLayout,o=f._id,t=g._id,i=m._firstScatter[v(_)]===_.uid,r=(y(_,m,f,g)||{}).orientation,x=_.fill;f._minDtick=0,g._minDtick=0;var A={padded:!0},E={padded:!0};h&&(A.ppad=E.ppad=h);var P=c<2||n[0]!==n[c-1]||a[0]!==a[c-1];P&&(x==="tozerox"||x==="tonextx"&&(i||r==="h"))?A.tozero=!0:!(_.error_y||{}).visible&&(x==="tonexty"||x==="tozeroy"||!w.hasMarkers(_)&&!w.hasText(_))&&(A.padded=!1,A.ppad=0),P&&(x==="tozeroy"||x==="tonexty"&&(i||r==="v"))?E.tozero=!0:(x==="tonextx"||x==="tozerox")&&(E.padded=!1),o&&(_._extremes[o]=N.findExtremes(f,n,A)),t&&(_._extremes[t]=N.findExtremes(g,a,E))}function l(T,_){if(!!w.hasMarkers(T)){var f=T.marker,g=1.6*(T.marker.sizeref||1),n;if(T.marker.sizemode==="area"?n=function(o){return Math.max(Math.sqrt((o||0)/g),3)}:n=function(o){return Math.max((o||0)/g,3)},L.isArrayOrTypedArray(f.size)){var a={type:"linear"};N.setConvert(a);for(var h=a.makeCalcdata(T.marker,"size"),c=new Array(_),m=0;m<_;m++)c[m]=n(h[m]);return c}else return n(f.size)}}function b(T,_){var f=v(_),g=T._firstScatter;g[f]||(g[f]=_.uid)}function v(T){var _=T.stackgroup;return T.xaxis+T.yaxis+T.type+(_?"-"+_:"")}function y(T,_,f,g){var n=T.stackgroup;if(!!n){var a=_._scatterStackOpts[f._id+g._id][n],h=a.orientation==="v"?g:f;if(h.type==="linear"||h.type==="log")return a}}le.exports={calc:u,calcMarkerSize:l,calcAxisExpansion:s,setFirstScatter:b,getStackOpts:y}},{"../../constants/numerical":231,"../../lib":252,"../../plots/cartesian/align_period":298,"../../plots/cartesian/axes":301,"./arrays_to_calcdata":380,"./calc_selection":383,"./colorscale_calc":384,"./subtypes":406,"fast-isnumeric":31}],383:[function(z,le,ae){"use strict";var R=z("../../lib");le.exports=function(N,D){R.isArrayOrTypedArray(D.selectedpoints)&&R.tagSelected(N,D)}},{"../../lib":252}],384:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/helpers").hasColorscale,L=z("../../components/colorscale/calc"),N=z("./subtypes");le.exports=function(p,w){N.hasLines(w)&&R(w,"line")&&L(p,w,{vals:w.line.color,containerStr:"line",cLetter:"c"}),N.hasMarkers(w)&&(R(w,"marker")&&L(p,w,{vals:w.marker.color,containerStr:"marker",cLetter:"c"}),R(w,"marker.line")&&L(p,w,{vals:w.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":127,"../../components/colorscale/helpers":130,"./subtypes":406}],385:[function(z,le,ae){"use strict";le.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],386:[function(z,le,ae){"use strict";var R=z("./calc");le.exports=function(p,w){var k=w.xaxis,d=w.yaxis,e=k._id+d._id,u=p._fullLayout._scatterStackOpts[e];if(!!u){var s=p.calcdata,l,b,v,y,T,_,f,g,n,a,h,c,m,o,t;for(var i in u){a=u[i];var r=a.traceIndices;if(!!r.length){for(h=a.stackgaps==="interpolate",c=a.groupnorm,a.orientation==="v"?(m="x",o="y"):(m="y",o="x"),t=new Array(r.length),l=0;l<t.length;l++)t[l]=!1;_=s[r[0]];var x=new Array(_.length);for(l=0;l<_.length;l++)x[l]=_[l][m];for(l=1;l<r.length;l++){for(T=s[r[l]],b=v=0;b<T.length;b++){for(f=T[b][m];f>x[v]&&v<x.length;v++)L(T,b,x[v],l,t,h,m),b++;if(f!==x[v]){for(y=0;y<l;y++)L(s[r[y]],v,f,y,t,h,m);x.splice(v,0,f)}v++}for(;v<x.length;v++)L(T,b,x[v],l,t,h,m),b++}var A=x.length;for(b=0;b<_.length;b++){for(g=_[b][o]=_[b].s,l=1;l<r.length;l++)T=s[r[l]],T[0].trace._rawLength=T[0].trace._length,T[0].trace._length=A,g+=T[b].s,T[b][o]=g;if(c)for(n=(c==="fraction"?g:g/100)||1,l=0;l<r.length;l++){var E=s[r[l]][b];E[o]/=n,E.sNorm=E.s/n}}for(l=0;l<r.length;l++){T=s[r[l]];var P=T[0].trace,S=R.calcMarkerSize(P,P._rawLength),C=Array.isArray(S);if(S&&t[l]||C){var M=S;for(S=new Array(A),b=0;b<A;b++)S[b]=T[b].gap?0:C?M[T[b].i]:M}var I=new Array(A),G=new Array(A);for(b=0;b<A;b++)I[b]=T[b].x,G[b]=T[b].y;R.calcAxisExpansion(p,P,k,d,I,G,S),T[0].t.orientation=a.orientation}}}}};function L(D,p,w,k,d,e,u){d[k]=!0;var s={i:null,gap:!0,s:0};if(s[u]=w,D.splice(p,0,s),p&&w===D[p-1][u]){var l=D[p-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else e&&(s.s=N(D,p,w,u));p||(D[0].t=D[1].t,D[0].trace=D[1].trace,delete D[1].t,delete D[1].trace)}function N(D,p,w,k){var d=D[p-1],e=D[p+1];return e?d?d.s+(e.s-d.s)*(w-d[k])/(e[k]-d[k]):e.s:d.s}},{"./calc":382}],387:[function(z,le,ae){"use strict";le.exports=function(L){for(var N=0;N<L.length;N++){var D=L[N];if(D.type==="scatter"){var p=D.fill;if(!(p==="none"||p==="toself")&&(D.opacity=void 0,p==="tonexty"||p==="tonextx"))for(var w=N-1;w>=0;w--){var k=L[w];if(k.type==="scatter"&&k.xaxis===D.xaxis&&k.yaxis===D.yaxis){k.opacity=void 0;break}}}}}},{}],388:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry"),N=z("./attributes"),D=z("./constants"),p=z("./subtypes"),w=z("./xy_defaults"),k=z("./period_defaults"),d=z("./stack_defaults"),e=z("./marker_defaults"),u=z("./line_defaults"),s=z("./line_shape_defaults"),l=z("./text_defaults"),b=z("./fillcolor_defaults"),v=z("../../lib").coercePattern;le.exports=function(T,_,f,g){function n(r,x){return R.coerce(T,_,N,r,x)}var a=w(T,_,g,n);if(a||(_.visible=!1),!!_.visible){k(T,_,g,n),n("xhoverformat"),n("yhoverformat");var h=d(T,_,g,n),c=!h&&a<D.PTS_LINESONLY?"lines+markers":"lines";n("text"),n("hovertext"),n("mode",c),p.hasLines(_)&&(u(T,_,f,g,n),s(T,_,n),n("connectgaps"),n("line.simplify")),p.hasMarkers(_)&&e(T,_,f,g,n,{gradient:!0}),p.hasText(_)&&(n("texttemplate"),l(T,_,g,n));var m=[];(p.hasMarkers(_)||p.hasText(_))&&(n("cliponaxis"),n("marker.maxdisplayed"),m.push("points")),n("fill",h?h.fillDflt:"none"),_.fill!=="none"&&(b(T,_,f,n),p.hasLines(_)||s(T,_,n),v(n,"fillpattern",_.fillcolor,!1));var o=(_.line||{}).color,t=(_.marker||{}).color;(_.fill==="tonext"||_.fill==="toself")&&m.push("fills"),n("hoveron",m.join("+")||"points"),_.hoveron!=="fills"&&n("hovertemplate");var i=L.getComponentMethod("errorbars","supplyDefaults");i(T,_,o||t||f,{axis:"y"}),i(T,_,o||t||f,{axis:"x",inherit:"y"}),R.coerceSelectionMarkerOpacity(_,n)}}},{"../../lib":252,"../../registry":352,"./attributes":381,"./constants":385,"./fillcolor_defaults":389,"./line_defaults":394,"./line_shape_defaults":396,"./marker_defaults":400,"./period_defaults":401,"./stack_defaults":404,"./subtypes":406,"./text_defaults":407,"./xy_defaults":408}],389:[function(z,le,ae){"use strict";var R=z("../../components/color"),L=z("../../lib").isArrayOrTypedArray;le.exports=function(D,p,w,k){var d=!1;if(p.marker){var e=p.marker.color,u=(p.marker.line||{}).color;e&&!L(e)?d=e:u&&!L(u)&&(d=u)}k("fillcolor",R.addOpacity((p.line||{}).color||d||w,.5))}},{"../../components/color":119,"../../lib":252}],390:[function(z,le,ae){"use strict";var R=z("../../plots/cartesian/axes");le.exports=function(N,D,p){var w={},k={_fullLayout:p},d=R.getFromTrace(k,D,"x"),e=R.getFromTrace(k,D,"y");return w.xLabel=R.tickText(d,d.c2l(N.x),!0).text,w.yLabel=R.tickText(e,e.c2l(N.y),!0).text,w}},{"../../plots/cartesian/axes":301}],391:[function(z,le,ae){"use strict";var R=z("../../components/color"),L=z("./subtypes");le.exports=function(D,p){var w,k;if(D.mode==="lines")return w=D.line.color,w&&R.opacity(w)?w:D.fillcolor;if(D.mode==="none")return D.fill?D.fillcolor:"";var d=p.mcc||(D.marker||{}).color,e=p.mlcc||((D.marker||{}).line||{}).color;return k=d&&R.opacity(d)?d:e&&R.opacity(e)&&(p.mlw||((D.marker||{}).line||{}).width)?e:"",k?R.opacity(k)<.3?R.addOpacity(k,.3):k:(w=(D.line||{}).color,w&&R.opacity(w)&&L.hasLines(D)&&D.line.width?w:D.fillcolor)}},{"../../components/color":119,"./subtypes":406}],392:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/fx"),N=z("../../registry"),D=z("./get_trace_color"),p=z("../../components/color"),w=R.fillText;le.exports=function(d,e,u,s){var l=d.cd,b=l[0].trace,v=d.xa,y=d.ya,T=v.c2p(e),_=y.c2p(u),f=[T,_],g=b.hoveron||"",n=b.mode.indexOf("markers")!==-1?3:.5,a=!!b.xperiodalignment,h=!!b.yperiodalignment;if(g.indexOf("points")!==-1){var c=function(re){if(a){var de=v.c2p(re.xStart),ve=v.c2p(re.xEnd);return T>=Math.min(de,ve)&&T<=Math.max(de,ve)?0:1/0}var ue=Math.max(3,re.mrc||0),ce=1-1/ue,_e=Math.abs(v.c2p(re.x)-T);return _e<ue?ce*_e/ue:_e-ue+ce},m=function(re){if(h){var de=y.c2p(re.yStart),ve=y.c2p(re.yEnd);return _>=Math.min(de,ve)&&_<=Math.max(de,ve)?0:1/0}var ue=Math.max(3,re.mrc||0),ce=1-1/ue,_e=Math.abs(y.c2p(re.y)-_);return _e<ue?ce*_e/ue:_e-ue+ce},o=function(re){var de=Math.max(n,re.mrc||0),ve=v.c2p(re.x)-T,ue=y.c2p(re.y)-_;return Math.max(Math.sqrt(ve*ve+ue*ue)-de,1-n/de)},t=L.getDistanceFunction(s,c,m,o);if(L.getClosest(l,t,d),d.index!==!1){var i=l[d.index],r=v.c2p(i.x,!0),x=y.c2p(i.y,!0),A=i.mrc||1;d.index=i.i;var E=l[0].t.orientation,P=E&&(i.sNorm||i.s),S=E==="h"?P:i.orig_x!==void 0?i.orig_x:i.x,C=E==="v"?P:i.orig_y!==void 0?i.orig_y:i.y;return R.extendFlat(d,{color:D(b,i),x0:r-A,x1:r+A,xLabelVal:S,y0:x-A,y1:x+A,yLabelVal:C,spikeDistance:o(i),hovertemplate:b.hovertemplate}),w(i,b,d),N.getComponentMethod("errorbars","hoverInfo")(i,b,d),[d]}}if(g.indexOf("fills")!==-1&&b._polygons){var M=b._polygons,I=[],G=!1,V=1/0,q=-1/0,ee=1/0,Q=-1/0,U,O,Z,B,Y,j,X,H,K;for(U=0;U<M.length;U++)Z=M[U],Z.contains(f)&&(G=!G,I.push(Z),ee=Math.min(ee,Z.ymin),Q=Math.max(Q,Z.ymax));if(G){ee=Math.max(ee,0),Q=Math.min(Q,y._length);var W=(ee+Q)/2;for(U=0;U<I.length;U++)for(B=I[U].pts,O=1;O<B.length;O++)H=B[O-1][1],K=B[O][1],H>W!=K>=W&&(j=B[O-1][0],X=B[O][0],K-H&&(Y=j+(X-j)*(W-H)/(K-H),V=Math.min(V,Y),q=Math.max(q,Y)));V=Math.max(V,0),q=Math.min(q,v._length);var $=p.defaultLine;return p.opacity(b.fillcolor)?$=b.fillcolor:p.opacity((b.line||{}).color)&&($=b.line.color),R.extendFlat(d,{distance:d.maxHoverDistance,x0:V,x1:q,y0:W,y1:W,color:$,hovertemplate:!1}),delete d.index,b.text&&!Array.isArray(b.text)?d.text=String(b.text):d.text=b.name,[d]}}}},{"../../components/color":119,"../../components/fx":159,"../../lib":252,"../../registry":352,"./get_trace_color":391}],393:[function(z,le,ae){"use strict";var R=z("./subtypes");le.exports={hasLines:R.hasLines,hasMarkers:R.hasMarkers,hasText:R.hasText,isBubble:R.isBubble,attributes:z("./attributes"),supplyDefaults:z("./defaults"),crossTraceDefaults:z("./cross_trace_defaults"),calc:z("./calc").calc,crossTraceCalc:z("./cross_trace_calc"),arraysToCalcdata:z("./arrays_to_calcdata"),plot:z("./plot"),colorbar:z("./marker_colorbar"),formatLabels:z("./format_labels"),style:z("./style").style,styleOnSelect:z("./style").styleOnSelect,hoverPoints:z("./hover"),selectPoints:z("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:z("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":315,"./arrays_to_calcdata":380,"./attributes":381,"./calc":382,"./cross_trace_calc":386,"./cross_trace_defaults":387,"./defaults":388,"./format_labels":390,"./hover":392,"./marker_colorbar":399,"./plot":402,"./select":403,"./style":405,"./subtypes":406}],394:[function(z,le,ae){"use strict";var R=z("../../lib").isArrayOrTypedArray,L=z("../../components/colorscale/helpers").hasColorscale,N=z("../../components/colorscale/defaults");le.exports=function(p,w,k,d,e,u){var s=(p.marker||{}).color;if(e("line.color",k),L(p,"line"))N(p,w,d,e,{prefix:"line.",cLetter:"c"});else{var l=(R(s)?!1:s)||k;e("line.color",l)}e("line.width"),(u||{}).noDash||e("line.dash")}},{"../../components/colorscale/defaults":129,"../../components/colorscale/helpers":130,"../../lib":252}],395:[function(z,le,ae){"use strict";var R=z("../../constants/numerical"),L=R.BADNUM,N=R.LOG_CLIP,D=N+.5,p=N-.5,w=z("../../lib"),k=w.segmentsIntersect,d=w.constrain,e=z("./constants");le.exports=function(s,l){var b=l.xaxis,v=l.yaxis,y=b.type==="log",T=v.type==="log",_=b._length,f=v._length,g=l.connectGaps,n=l.baseTolerance,a=l.shape,h=a==="linear",c=l.fill&&l.fill!=="none",m=[],o=e.minTolerance,t=s.length,i=new Array(t),r=0,x,A,E,P,S,C,M,I,G,V,q,ee,Q,U,O,Z;function B(rt){var dt=s[rt];if(!dt)return!1;var st=l.linearized?b.l2p(dt.x):b.c2p(dt.x),Ve=l.linearized?v.l2p(dt.y):v.c2p(dt.y);if(st===L){if(y&&(st=b.c2p(dt.x,!0)),st===L)return!1;T&&Ve===L&&(st*=Math.abs(b._m*f*(b._m>0?D:p)/(v._m*_*(v._m>0?D:p)))),st*=1e3}if(Ve===L){if(T&&(Ve=v.c2p(dt.y,!0)),Ve===L)return!1;Ve*=1e3}return[st,Ve]}function Y(rt,dt,st,Ve){var Je=st-rt,ke=Ve-dt,Le=.5-rt,Be=.5-dt,pe=Je*Je+ke*ke,Ae=Je*Le+ke*Be;if(Ae>0&&Ae<pe){var Ce=Le*ke-Be*Je;if(Ce*Ce<pe)return!0}}var j,X;function H(rt,dt){var st=rt[0]/_,Ve=rt[1]/f,Je=Math.max(0,-st,st-1,-Ve,Ve-1);return Je&&j!==void 0&&Y(st,Ve,j,X)&&(Je=0),Je&&dt&&Y(st,Ve,dt[0]/_,dt[1]/f)&&(Je=0),(1+e.toleranceGrowth*Je)*n}function K(rt,dt){var st=rt[0]-dt[0],Ve=rt[1]-dt[1];return Math.sqrt(st*st+Ve*Ve)}var W=e.maxScreensAway,$=-_*W,re=_*(1+W),de=-f*W,ve=f*(1+W),ue=[[$,de,re,de],[re,de,re,ve],[re,ve,$,ve],[$,ve,$,de]],ce,_e,fe,ne,ie,me;function we(rt,dt){for(var st=[],Ve=0,Je=0;Je<4;Je++){var ke=ue[Je],Le=k(rt[0],rt[1],dt[0],dt[1],ke[0],ke[1],ke[2],ke[3]);Le&&(!Ve||Math.abs(Le.x-st[0][0])>1||Math.abs(Le.y-st[0][1])>1)&&(Le=[Le.x,Le.y],Ve&&K(Le,rt)<K(st[0],rt)?st.unshift(Le):st.push(Le),Ve++)}return st}function be(rt){if(rt[0]<$||rt[0]>re||rt[1]<de||rt[1]>ve)return[d(rt[0],$,re),d(rt[1],de,ve)]}function Me(rt,dt){if(rt[0]===dt[0]&&(rt[0]===$||rt[0]===re)||rt[1]===dt[1]&&(rt[1]===de||rt[1]===ve))return!0}function Ie(rt,dt){var st=[],Ve=be(rt),Je=be(dt);return Ve&&Je&&Me(Ve,Je)||(Ve&&st.push(Ve),Je&&st.push(Je)),st}function Ke(rt,dt,st){return function(Ve,Je){var ke=be(Ve),Le=be(Je),Be=[];if(ke&&Le&&Me(ke,Le))return Be;ke&&Be.push(ke),Le&&Be.push(Le);var pe=2*w.constrain((Ve[rt]+Je[rt])/2,dt,st)-((ke||Ve)[rt]+(Le||Je)[rt]);if(pe){var Ae;ke&&Le?Ae=pe>0==ke[rt]>Le[rt]?ke:Le:Ae=ke||Le,Ae[rt]+=pe}return Be}}var Oe;a==="linear"||a==="spline"?Oe=we:a==="hv"||a==="vh"?Oe=Ie:a==="hvh"?Oe=Ke(0,$,re):a==="vhv"&&(Oe=Ke(1,de,ve));function We(rt,dt){var st=dt[0]-rt[0],Ve=(dt[1]-rt[1])/st,Je=(rt[1]*dt[0]-dt[1]*rt[0])/st;return Je>0?[Ve>0?$:re,ve]:[Ve>0?re:$,de]}function Fe(rt){var dt=rt[0],st=rt[1],Ve=dt===i[r-1][0],Je=st===i[r-1][1];if(!(Ve&&Je))if(r>1){var ke=dt===i[r-2][0],Le=st===i[r-2][1];Ve&&(dt===$||dt===re)&&ke?Le?r--:i[r-1]=rt:Je&&(st===de||st===ve)&&Le?ke?r--:i[r-1]=rt:i[r++]=rt}else i[r++]=rt}function Ge(rt){i[r-1][0]!==rt[0]&&i[r-1][1]!==rt[1]&&Fe([fe,ne]),Fe(rt),ie=null,fe=ne=0}function Xe(rt){if(j=rt[0]/_,X=rt[1]/f,ce=rt[0]<$?$:rt[0]>re?re:0,_e=rt[1]<de?de:rt[1]>ve?ve:0,ce||_e){if(!r)i[r++]=[ce||rt[0],_e||rt[1]];else if(ie){var dt=Oe(ie,rt);dt.length>1&&(Ge(dt[0]),i[r++]=dt[1])}else me=Oe(i[r-1],rt)[0],i[r++]=me;var st=i[r-1];ce&&_e&&(st[0]!==ce||st[1]!==_e)?(ie&&(fe!==ce&&ne!==_e?Fe(fe&&ne?We(ie,rt):[fe||ce,ne||_e]):fe&&ne&&Fe([fe,ne])),Fe([ce,_e])):fe-ce&&ne-_e&&Fe([ce||fe,_e||ne]),ie=rt,fe=ce,ne=_e}else ie&&Ge(Oe(ie,rt)[0]),i[r++]=rt}for(x=0;x<t;x++)if(A=B(x),!!A){for(r=0,ie=null,Xe(A),x++;x<t;x++){if(P=B(x),!P){if(g)continue;break}if(!h||!l.simplify){Xe(P);continue}var ut=B(x+1);if(V=K(P,A),!(!(c&&(r===0||r===t-1))&&V<H(P,ut)*o)){for(I=[(P[0]-A[0])/V,(P[1]-A[1])/V],S=A,q=V,ee=U=O=0,M=!1,E=P,x++;x<s.length;x++){if(C=ut,ut=B(x+1),!C){if(g)continue;break}if(G=[C[0]-A[0],C[1]-A[1]],Z=G[0]*I[1]-G[1]*I[0],U=Math.min(U,Z),O=Math.max(O,Z),O-U>H(C,ut))break;E=C,Q=G[0]*I[0]+G[1]*I[1],Q>q?(q=Q,P=C,M=!1):Q<ee&&(ee=Q,S=C,M=!0)}if(M?(Xe(P),E!==S&&Xe(S)):(S!==A&&Xe(S),E!==P&&Xe(P)),Xe(E),x>=s.length||!C)break;Xe(C),A=C}}ie&&Fe([fe||ie[0],ne||ie[1]]),m.push(i.slice(0,r))}return m}},{"../../constants/numerical":231,"../../lib":252,"./constants":385}],396:[function(z,le,ae){"use strict";le.exports=function(L,N,D){var p=D("line.shape");p==="spline"&&D("line.smoothing")}},{}],397:[function(z,le,ae){"use strict";var R={tonextx:1,tonexty:1,tonext:1};le.exports=function(N,D,p){var w,k,d,e,u,s={},l=!1,b=-1,v=0,y=-1;for(k=0;k<p.length;k++)w=p[k][0].trace,d=w.stackgroup||"",d?d in s?u=s[d]:(u=s[d]=v,v++):w.fill in R&&y>=0?u=y:(u=y=v,v++),u<b&&(l=!0),w._groupIndex=b=u;var T=p.slice();l&&T.sort(function(f,g){var n=f[0].trace,a=g[0].trace;return n._groupIndex-a._groupIndex||n.index-a.index});var _={};for(k=0;k<T.length;k++)w=T[k][0].trace,d=w.stackgroup||"",w.visible===!0?(w._nexttrace=null,w.fill in R&&(e=_[d],w._prevtrace=e||null,e&&(e._nexttrace=w)),w._ownfill=w.fill&&(w.fill.substr(0,6)==="tozero"||w.fill==="toself"||w.fill.substr(0,2)==="to"&&!w._prevtrace),_[d]=w):w._prevtrace=w._nexttrace=w._ownfill=null;return T}},{}],398:[function(z,le,ae){"use strict";var R=z("fast-isnumeric");le.exports=function(N,D){D||(D=2);var p=N.marker,w=p.sizeref||1,k=p.sizemin||0,d=p.sizemode==="area"?function(e){return Math.sqrt(e/w)}:function(e){return e/w};return function(e){var u=d(e/D);return R(u)&&u>0?Math.max(u,k):0}}},{"fast-isnumeric":31}],399:[function(z,le,ae){"use strict";le.exports={container:"marker",min:"cmin",max:"cmax"}},{}],400:[function(z,le,ae){"use strict";var R=z("../../components/color"),L=z("../../components/colorscale/helpers").hasColorscale,N=z("../../components/colorscale/defaults"),D=z("./subtypes");le.exports=function(w,k,d,e,u,s){var l=D.isBubble(w),b=(w.line||{}).color,v;if(s=s||{},b&&(d=b),u("marker.symbol"),u("marker.opacity",l?.7:1),u("marker.size"),u("marker.color",d),L(w,"marker")&&N(w,k,e,u,{prefix:"marker.",cLetter:"c"}),s.noSelect||(u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size")),s.noLine||(b&&!Array.isArray(b)&&k.marker.color!==b?v=b:l?v=R.background:v=R.defaultLine,u("marker.line.color",v),L(w,"marker.line")&&N(w,k,e,u,{prefix:"marker.line.",cLetter:"c"}),u("marker.line.width",l?1:0)),l&&(u("marker.sizeref"),u("marker.sizemin"),u("marker.sizemode")),s.gradient){var y=u("marker.gradient.type");y!=="none"&&u("marker.gradient.color")}}},{"../../components/color":119,"../../components/colorscale/defaults":129,"../../components/colorscale/helpers":130,"./subtypes":406}],401:[function(z,le,ae){"use strict";var R=z("../../lib").dateTick0,L=z("../../constants/numerical"),N=L.ONEWEEK;function D(p,w){return p%N===0?R(w,1):R(w,0)}le.exports=function(w,k,d,e,u){if(u||(u={x:!0,y:!0}),u.x){var s=e("xperiod");s&&(e("xperiod0",D(s,k.xcalendar)),e("xperiodalignment"))}if(u.y){var l=e("yperiod");l&&(e("yperiod0",D(l,k.ycalendar)),e("yperiodalignment"))}}},{"../../constants/numerical":231,"../../lib":252}],402:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../registry"),N=z("../../lib"),D=N.ensureSingle,p=N.identity,w=z("../../components/drawing"),k=z("./subtypes"),d=z("./line_points"),e=z("./link_traces"),u=z("../../lib/polygon").tester;le.exports=function(y,T,_,f,g,n){var a,h,c=!g,m=!!g&&g.duration>0,o=e(y,T,_);if(a=f.selectAll("g.trace").data(o,function(i){return i[0].trace.uid}),a.enter().append("g").attr("class",function(i){return"trace scatter trace"+i[0].trace.uid}).style("stroke-miterlimit",2),a.order(),s(y,a,T),m){n&&(h=n());var t=R.transition().duration(g.duration).ease(g.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()});t.each(function(){f.selectAll("g.trace").each(function(i,r){l(y,r,T,i,o,this,g)})})}else a.each(function(i,r){l(y,r,T,i,o,this,g)});c&&a.exit().remove(),f.selectAll("path:not([d])").remove()};function s(v,y,T){y.each(function(_){var f=D(R.select(this),"g","fills");w.setClipUrl(f,T.layerClipId,v);var g=_[0].trace,n=[];g._ownfill&&n.push("_ownFill"),g._nexttrace&&n.push("_nextFill");var a=f.selectAll("g").data(n,p);a.enter().append("g"),a.exit().each(function(h){g[h]=null}).remove(),a.order().each(function(h){g[h]=D(R.select(this),"path","js-fill")})})}function l(v,y,T,_,f,g,n){var a;b(v,y,T,_,f);var h=!!n&&n.duration>0;function c(we){return h?we.transition():we}var m=T.xaxis,o=T.yaxis,t=_[0].trace,i=t.line,r=R.select(g),x=D(r,"g","errorbars"),A=D(r,"g","lines"),E=D(r,"g","points"),P=D(r,"g","text");if(L.getComponentMethod("errorbars","plot")(v,x,T,n),t.visible!==!0)return;c(r).style("opacity",t.opacity);var S,C,M=t.fill.charAt(t.fill.length-1);M!=="x"&&M!=="y"&&(M=""),_[0][T.isRangePlot?"nodeRangePlot3":"node3"]=r;var I="",G=[],V=t._prevtrace;V&&(I=V._prevRevpath||"",C=V._nextFill,G=V._polygons);var q,ee,Q="",U="",O,Z,B,Y,j,X,H,K=[],W=N.noop;if(S=t._ownFill,k.hasLines(t)||t.fill!=="none"){for(C&&C.datum(_),["hv","vh","hvh","vhv"].indexOf(i.shape)!==-1?(O=w.steps(i.shape),Z=w.steps(i.shape.split("").reverse().join(""))):i.shape==="spline"?O=Z=function(we){var be=we[we.length-1];return we.length>1&&we[0][0]===be[0]&&we[0][1]===be[1]?w.smoothclosed(we.slice(1),i.smoothing):w.smoothopen(we,i.smoothing)}:O=Z=function(we){return"M"+we.join("L")},B=function(we){return Z(we.reverse())},K=d(_,{xaxis:m,yaxis:o,connectGaps:t.connectgaps,baseTolerance:Math.max(i.width||1,3)/4,shape:i.shape,simplify:i.simplify,fill:t.fill}),H=t._polygons=new Array(K.length),a=0;a<K.length;a++)t._polygons[a]=u(K[a]);K.length&&(Y=K[0][0],j=K[K.length-1],X=j[j.length-1]),W=function(we){return function(be){if(q=O(be),ee=B(be),Q?M?(Q+="L"+q.substr(1),U=ee+("L"+U.substr(1))):(Q+="Z"+q,U=ee+"Z"+U):(Q=q,U=ee),k.hasLines(t)&&be.length>1){var Me=R.select(this);if(Me.datum(_),we)c(Me.style("opacity",0).attr("d",q).call(w.lineGroupStyle)).style("opacity",1);else{var Ie=c(Me);Ie.attr("d",q),w.singleLineStyle(_,Ie)}}}}}var $=A.selectAll(".js-line").data(K);c($.exit()).style("opacity",0).remove(),$.each(W(!1)),$.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(w.lineGroupStyle).each(W(!0)),w.setClipUrl($,T.layerClipId,v);function re(we){c(we).attr("d","M0,0Z")}K.length?(S?(S.datum(_),Y&&X&&(M?(M==="y"?Y[1]=X[1]=o.c2p(0,!0):M==="x"&&(Y[0]=X[0]=m.c2p(0,!0)),c(S).attr("d","M"+X+"L"+Y+"L"+Q.substr(1)).call(w.singleFillStyle,v)):c(S).attr("d",Q+"Z").call(w.singleFillStyle,v))):C&&(t.fill.substr(0,6)==="tonext"&&Q&&I?(t.fill==="tonext"?c(C).attr("d",Q+"Z"+I+"Z").call(w.singleFillStyle,v):c(C).attr("d",Q+"L"+I.substr(1)+"Z").call(w.singleFillStyle,v),t._polygons=t._polygons.concat(G)):(re(C),t._polygons=null)),t._prevRevpath=U,t._prevPolygons=H):(S?re(S):C&&re(C),t._polygons=t._prevRevpath=t._prevPolygons=null);function de(we){return we.filter(function(be){return!be.gap&&be.vis})}function ve(we){return we.filter(function(be){return be.vis})}function ue(we){return we.filter(function(be){return!be.gap})}function ce(we){return we.id}function _e(we){if(we.ids)return ce}function fe(){return!1}function ne(we,be,Me){var Ie,Ke,Oe,We=Me[0].trace,Fe=k.hasMarkers(We),Ge=k.hasText(We),Xe=_e(We),ut=fe,rt=fe;if(Fe||Ge){var dt=p,st=We.stackgroup,Ve=st&&v._fullLayout._scatterStackOpts[m._id+o._id][st].stackgaps==="infer zero";We.marker.maxdisplayed||We._needsCull?dt=Ve?ve:de:st&&!Ve&&(dt=ue),Fe&&(ut=dt),Ge&&(rt=dt)}Ke=we.selectAll("path.point"),Ie=Ke.data(ut,Xe);var Je=Ie.enter().append("path").classed("point",!0);h&&Je.call(w.pointStyle,We,v).call(w.translatePoints,m,o).style("opacity",0).transition().style("opacity",1),Ie.order();var ke;Fe&&(ke=w.makePointStyleFns(We)),Ie.each(function(Le){var Be=R.select(this),pe=c(Be);Oe=w.translatePoint(Le,pe,m,o),Oe?(w.singlePointStyle(Le,pe,We,ke,v),T.layerClipId&&w.hideOutsideRangePoint(Le,pe,m,o,We.xcalendar,We.ycalendar),We.customdata&&Be.classed("plotly-customdata",Le.data!==null&&Le.data!==void 0)):pe.remove()}),h?Ie.exit().transition().style("opacity",0).remove():Ie.exit().remove(),Ke=be.selectAll("g"),Ie=Ke.data(rt,Xe),Ie.enter().append("g").classed("textpoint",!0).append("text"),Ie.order(),Ie.each(function(Le){var Be=R.select(this),pe=c(Be.select("text"));Oe=w.translatePoint(Le,pe,m,o),Oe?T.layerClipId&&w.hideOutsideRangePoint(Le,Be,m,o,We.xcalendar,We.ycalendar):Be.remove()}),Ie.selectAll("text").call(w.textPointStyle,We,v).each(function(Le){var Be=m.c2p(Le.x),pe=o.c2p(Le.y);R.select(this).selectAll("tspan.line").each(function(){c(R.select(this)).attr({x:Be,y:pe})})}),Ie.exit().remove()}E.datum(_),P.datum(_),ne(E,P,_);var ie=t.cliponaxis===!1,me=ie?null:T.layerClipId;w.setClipUrl(E,me,v),w.setClipUrl(P,me,v)}function b(v,y,T,_,f){var g=T.xaxis,n=T.yaxis,a=R.extent(N.simpleMap(g.range,g.r2c)),h=R.extent(N.simpleMap(n.range,n.r2c)),c=_[0].trace;if(!!k.hasMarkers(c)){var m=c.marker.maxdisplayed;if(m!==0){var o=_.filter(function(x){return x.x>=a[0]&&x.x<=a[1]&&x.y>=h[0]&&x.y<=h[1]}),t=Math.ceil(o.length/m),i=0;f.forEach(function(x,A){var E=x[0].trace;k.hasMarkers(E)&&E.marker.maxdisplayed>0&&A<y&&i++});var r=Math.round(i*t/3+Math.floor(i/3)*t/7.1);_.forEach(function(x){delete x.vis}),o.forEach(function(x,A){Math.round((A+r)%t)===0&&(x.vis=!0)})}}}},{"../../components/drawing":141,"../../lib":252,"../../lib/polygon":264,"../../registry":352,"./line_points":395,"./link_traces":397,"./subtypes":406,"@plotly/d3":16}],403:[function(z,le,ae){"use strict";var R=z("./subtypes");le.exports=function(N,D){var p=N.cd,w=N.xaxis,k=N.yaxis,d=[],e=p[0].trace,u,s,l,b,v=!R.hasMarkers(e)&&!R.hasText(e);if(v)return[];if(D===!1)for(u=0;u<p.length;u++)p[u].selected=0;else for(u=0;u<p.length;u++)s=p[u],l=w.c2p(s.x),b=k.c2p(s.y),s.i!==null&&D.contains([l,b],!1,u,N)?(d.push({pointNumber:s.i,x:w.c2d(s.x),y:k.c2d(s.y)}),s.selected=1):s.selected=0;return d}},{"./subtypes":406}],404:[function(z,le,ae){"use strict";var R=["orientation","groupnorm","stackgaps"];le.exports=function(N,D,p,w){var k=p._scatterStackOpts,d=w("stackgroup");if(d){var e=D.xaxis+D.yaxis,u=k[e];u||(u=k[e]={});var s=u[d],l=!1;s?s.traces.push(D):(s=u[d]={traceIndices:[],traces:[D]},l=!0);for(var b={orientation:D.x&&!D.y?"h":"v"},v=0;v<R.length;v++){var y=R[v],T=y+"Found";if(!s[T]){var _=N[y]!==void 0,f=y==="orientation";if((_||l)&&(s[y]=w(y,b[y]),f&&(s.fillDflt=s[y]==="h"?"tonextx":"tonexty"),_&&(s[T]=!0,!l&&(delete s.traces[0][y],f))))for(var g=0;g<s.traces.length-1;g++){var n=s.traces[g];n._input.fill!==n.fill&&(n.fill=s.fillDflt)}}}return s}}},{}],405:[function(z,le,ae){"use strict";var R=z("@plotly/d3"),L=z("../../components/drawing"),N=z("../../registry");function D(d){var e=R.select(d).selectAll("g.trace.scatter");e.style("opacity",function(u){return u[0].trace.opacity}),e.selectAll("g.points").each(function(u){var s=R.select(this),l=u.trace||u[0].trace;p(s,l,d)}),e.selectAll("g.text").each(function(u){var s=R.select(this),l=u.trace||u[0].trace;w(s,l,d)}),e.selectAll("g.trace path.js-line").call(L.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(L.fillGroupStyle,d),N.getComponentMethod("errorbars","style")(e)}function p(d,e,u){L.pointStyle(d.selectAll("path.point"),e,u)}function w(d,e,u){L.textPointStyle(d.selectAll("text"),e,u)}function k(d,e,u){var s=e[0].trace;s.selectedpoints?(L.selectedPointStyle(u.selectAll("path.point"),s),L.selectedTextStyle(u.selectAll("text"),s)):(p(u,s,d),w(u,s,d))}le.exports={style:D,stylePoints:p,styleText:w,styleOnSelect:k}},{"../../components/drawing":141,"../../registry":352,"@plotly/d3":16}],406:[function(z,le,ae){"use strict";var R=z("../../lib");le.exports={hasLines:function(L){return L.visible&&L.mode&&L.mode.indexOf("lines")!==-1},hasMarkers:function(L){return L.visible&&(L.mode&&L.mode.indexOf("markers")!==-1||L.type==="splom")},hasText:function(L){return L.visible&&L.mode&&L.mode.indexOf("text")!==-1},isBubble:function(L){return R.isPlainObject(L.marker)&&R.isArrayOrTypedArray(L.marker.size)}}},{"../../lib":252}],407:[function(z,le,ae){"use strict";var R=z("../../lib");le.exports=function(L,N,D,p,w){w=w||{},p("textposition"),R.coerceFont(p,"textfont",D.font),w.noSelect||(p("selected.textfont.color"),p("unselected.textfont.color"))}},{"../../lib":252}],408:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../registry");le.exports=function(D,p,w,k){var d=k("x"),e=k("y"),u,s=L.getComponentMethod("calendars","handleTraceDefaults");if(s(D,p,["x","y"],w),d){var l=R.minRowLength(d);e?u=Math.min(l,R.minRowLength(e)):(u=l,k("y0"),k("dy"))}else{if(!e)return 0;u=R.minRowLength(e),k("x0"),k("dx")}return p._length=u,u}},{"../../lib":252,"../../registry":352}],409:[function(z,le,ae){"use strict";var R=z("../scatter/attributes"),L=z("../../components/colorscale/attributes"),N=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,D=z("../../plots/template_attributes").hovertemplateAttrs,p=z("../../plots/template_attributes").texttemplateAttrs,w=z("../../plots/attributes"),k=z("../../constants/gl3d_dashes"),d=z("../../constants/gl3d_markers"),e=z("../../lib/extend").extendFlat,u=z("../../plot_api/edit_types").overrideAll,s=z("../../lib/sort_object_keys"),l=R.line,b=R.marker,v=b.line,y=e({width:l.width,dash:{valType:"enumerated",values:s(k),dflt:"solid"}},L("line"));function T(f){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var _=le.exports=u({x:R.x,y:R.y,z:{valType:"data_array"},text:e({},R.text,{}),texttemplate:p({},{}),hovertext:e({},R.hovertext,{}),hovertemplate:D(),xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z"),mode:e({},R.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:T("x"),y:T("y"),z:T("z")},connectgaps:R.connectgaps,line:y,marker:e({symbol:{valType:"enumerated",values:s(d),dflt:"circle",arrayOk:!0},size:e({},b.size,{dflt:8}),sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:e({},b.opacity,{arrayOk:!1}),colorbar:b.colorbar,line:e({width:e({},v.width,{arrayOk:!1})},L("marker.line"))},L("marker")),textposition:e({},R.textposition,{dflt:"top center"}),textfont:{color:R.textfont.color,size:R.textfont.size,family:e({},R.textfont.family,{arrayOk:!1})},opacity:w.opacity,hoverinfo:e({},w.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":126,"../../constants/gl3d_dashes":228,"../../constants/gl3d_markers":229,"../../lib/extend":245,"../../lib/sort_object_keys":274,"../../plot_api/edit_types":283,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351,"../scatter/attributes":381}],410:[function(z,le,ae){"use strict";var R=z("../scatter/arrays_to_calcdata"),L=z("../scatter/colorscale_calc");le.exports=function(D,p){var w=[{x:!1,y:!1,trace:p,t:{}}];return R(w,p),L(D,p),w}},{"../scatter/arrays_to_calcdata":380,"../scatter/colorscale_calc":384}],411:[function(z,le,ae){"use strict";var R=z("../../registry");function L(p,w,k,d){if(!w||!w.visible)return null;for(var e=R.getComponentMethod("errorbars","makeComputeError")(w),u=new Array(p.length),s=0;s<p.length;s++){var l=e(+p[s],s);if(d.type==="log"){var b=d.c2l(p[s]),v=p[s]-l[0],y=p[s]+l[1];if(u[s]=[(d.c2l(v,!0)-b)*k,(d.c2l(y,!0)-b)*k],v>0){var T=d.c2l(v);d._lowerLogErrorBound||(d._lowerLogErrorBound=T),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,T)}}else u[s]=[-l[0]*k,l[1]*k]}return u}function N(p){for(var w=0;w<p.length;w++)if(p[w])return p[w].length;return 0}function D(p,w,k){var d=[L(p.x,p.error_x,w[0],k.xaxis),L(p.y,p.error_y,w[1],k.yaxis),L(p.z,p.error_z,w[2],k.zaxis)],e=N(d);if(e===0)return null;for(var u=new Array(e),s=0;s<e;s++){for(var l=[[0,0,0],[0,0,0]],b=0;b<3;b++)if(d[b])for(var v=0;v<2;v++)l[v][b]=d[b][s][v];u[s]=l}return u}le.exports=D},{"../../registry":352}],412:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_line3d,L=z("../../../stackgl_modules").gl_scatter3d,N=z("../../../stackgl_modules").gl_error3d,D=z("../../../stackgl_modules").gl_mesh3d,p=z("../../../stackgl_modules").delaunay_triangulate,w=z("../../lib"),k=z("../../lib/str2rgbarray"),d=z("../../lib/gl_format_color").formatColor,e=z("../scatter/make_bubble_size_func"),u=z("../../constants/gl3d_dashes"),s=z("../../constants/gl3d_markers"),l=z("../../plots/cartesian/axes"),b=z("../../components/fx/helpers").appendArrayPointValue,v=z("./calc_errors");function y(x,A){this.scene=x,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var T=y.prototype;T.handlePick=function(x){if(x.object&&(x.object===this.linePlot||x.object===this.delaunayMesh||x.object===this.textMarkers||x.object===this.scatterPlot)){var A=x.index=x.data.index;return x.object.highlight&&x.object.highlight(null),this.scatterPlot&&(x.object=this.scatterPlot,this.scatterPlot.highlight(x.data)),x.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||this.textLabels[A]===0)&&(x.textLabel=this.textLabels[A]):x.textLabel=this.textLabels),x.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}};function _(x,A,E){var P=(E+1)%3,S=(E+2)%3,C=[],M=[],I;for(I=0;I<x.length;++I){var G=x[I];isNaN(G[P])||!isFinite(G[P])||isNaN(G[S])||!isFinite(G[S])||(C.push([G[P],G[S]]),M.push(I))}var V=p(C);for(I=0;I<V.length;++I)for(var q=V[I],ee=0;ee<q.length;++ee)q[ee]=M[q[ee]];return{positions:x,cells:V,meshColor:A}}function f(x){for(var A=[0,0,0],E=[[0,0,0],[0,0,0],[0,0,0]],P=[1,1,1],S=0;S<3;S++){var C=x[S];C&&C.copy_zstyle!==!1&&x[2].visible!==!1&&(C=x[2]),!(!C||!C.visible)&&(A[S]=C.width/2,E[S]=k(C.color),P[S]=C.thickness)}return{capSize:A,color:E,lineWidth:P}}function g(x){return x==null?0:x.indexOf("left")>-1?-1:x.indexOf("right")>-1?1:0}function n(x){return x==null?0:x.indexOf("top")>-1?-1:x.indexOf("bottom")>-1?1:0}function a(x){var A=0,E=0,P=[A,E];if(Array.isArray(x))for(var S=0;S<x.length;S++)P[S]=[A,E],x[S]&&(P[S][0]=g(x[S]),P[S][1]=n(x[S]));else P[0]=g(x),P[1]=n(x);return P}function h(x,A){return A(x*4)}function c(x){return s[x]}function m(x,A,E,P,S){var C=null;if(w.isArrayOrTypedArray(x)){C=[];for(var M=0;M<A;M++)x[M]===void 0?C[M]=P:C[M]=E(x[M],S)}else C=E(x,w.identity);return C}function o(x,A){var E=[],P=x.fullSceneLayout,S=x.dataScale,C=P.xaxis,M=P.yaxis,I=P.zaxis,G=A.marker,V=A.line,q=A.x||[],ee=A.y||[],Q=A.z||[],U=q.length,O=A.xcalendar,Z=A.ycalendar,B=A.zcalendar,Y,j,X,H,K,W;for(K=0;K<U;K++)Y=C.d2l(q[K],0,O)*S[0],j=M.d2l(ee[K],0,Z)*S[1],X=I.d2l(Q[K],0,B)*S[2],E[K]=[Y,j,X];if(Array.isArray(A.text))W=A.text;else if(A.text!==void 0)for(W=new Array(U),K=0;K<U;K++)W[K]=A.text;function $(Ke,Oe){var We=P[Ke];return l.tickText(We,We.d2l(Oe),!0).text}var re=A.texttemplate;if(re){var de=x.fullLayout,ve=de._d3locale,ue=Array.isArray(re),ce=ue?Math.min(re.length,U):U,_e=ue?function(Ke){return re[Ke]}:function(){return re};for(W=new Array(ce),K=0;K<ce;K++){var fe={x:q[K],y:ee[K],z:Q[K]},ne={xLabel:$("xaxis",q[K]),yLabel:$("yaxis",ee[K]),zLabel:$("zaxis",Q[K])},ie={};b(ie,A,K);var me=A._meta||{};W[K]=w.texttemplateString(_e(K),ne,ve,ie,fe,me)}}if(H={position:E,mode:A.mode,text:W},"line"in A&&(H.lineColor=d(V,1,U),H.lineWidth=V.width,H.lineDashes=V.dash),"marker"in A){var we=e(A);H.scatterColor=d(G,1,U),H.scatterSize=m(G.size,U,h,20,we),H.scatterMarker=m(G.symbol,U,c,"\u25CF"),H.scatterLineWidth=G.line.width,H.scatterLineColor=d(G.line,1,U),H.scatterAngle=0}"textposition"in A&&(H.textOffset=a(A.textposition),H.textColor=d(A.textfont,1,U),H.textSize=m(A.textfont.size,U,w.identity,12),H.textFont=A.textfont.family,H.textAngle=0);var be=["x","y","z"];for(H.project=[!1,!1,!1],H.projectScale=[1,1,1],H.projectOpacity=[1,1,1],K=0;K<3;++K){var Me=A.projection[be[K]];(H.project[K]=Me.show)&&(H.projectOpacity[K]=Me.opacity,H.projectScale[K]=Me.scale)}H.errorBounds=v(A,S,P);var Ie=f([A.error_x,A.error_y,A.error_z]);return H.errorColor=Ie.color,H.errorLineWidth=Ie.lineWidth,H.errorCapSize=Ie.capSize,H.delaunayAxis=A.surfaceaxis,H.delaunayColor=k(A.surfacecolor),H}function t(x){if(w.isArrayOrTypedArray(x)){var A=x[0];return w.isArrayOrTypedArray(A)&&(x=A),"rgb("+x.slice(0,3).map(function(E){return Math.round(E*255)})+")"}return null}function i(x){return w.isArrayOrTypedArray(x)?x.length===4&&typeof x[0]=="number"?t(x):x.map(t):null}T.update=function(x){var A=this.scene.glplot.gl,E,P,S,C,M=u.solid;this.data=x;var I=o(this.scene,x);"mode"in I&&(this.mode=I.mode),"lineDashes"in I&&I.lineDashes in u&&(M=u[I.lineDashes]),this.color=i(I.scatterColor)||i(I.lineColor),this.dataPoints=I.position,E={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:x.opacity,connectGaps:x.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(E):(this.linePlot=R(E),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=x.opacity;if(x.marker&&x.marker.opacity&&(G*=x.marker.opacity),P={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:G,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(P):(this.scatterPlot=L(P),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),C={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:x.opacity},this.textLabels=x.hovertext||x.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(C):(this.textMarkers=L(C),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),S={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:x.opacity},this.errorBars?I.errorBounds?this.errorBars.update(S):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=N(S),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),I.delaunayAxis>=0){var V=_(I.position,I.delaunayColor,I.delaunayAxis);V.opacity=x.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=A,this.delaunayMesh=D(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},T.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function r(x,A){var E=new y(x,A.uid);return E.update(A),E}le.exports=r},{"../../../stackgl_modules":435,"../../components/fx/helpers":155,"../../constants/gl3d_dashes":228,"../../constants/gl3d_markers":229,"../../lib":252,"../../lib/gl_format_color":249,"../../lib/str2rgbarray":276,"../../plots/cartesian/axes":301,"../scatter/make_bubble_size_func":398,"./calc_errors":411}],413:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("../scatter/subtypes"),D=z("../scatter/marker_defaults"),p=z("../scatter/line_defaults"),w=z("../scatter/text_defaults"),k=z("./attributes");le.exports=function(u,s,l,b){function v(h,c){return L.coerce(u,s,k,h,c)}var y=d(u,s,v,b);if(!y){s.visible=!1;return}v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),v("mode"),N.hasLines(s)&&(v("connectgaps"),p(u,s,l,b,v)),N.hasMarkers(s)&&D(u,s,l,b,v,{noSelect:!0}),N.hasText(s)&&(v("texttemplate"),w(u,s,b,v,{noSelect:!0}));var T=(s.line||{}).color,_=(s.marker||{}).color;v("surfaceaxis")>=0&&v("surfacecolor",T||_);for(var f=["x","y","z"],g=0;g<3;++g){var n="projection."+f[g];v(n+".show")&&(v(n+".opacity"),v(n+".scale"))}var a=R.getComponentMethod("errorbars","supplyDefaults");a(u,s,T||_||l,{axis:"z"}),a(u,s,T||_||l,{axis:"y",inherit:"z"}),a(u,s,T||_||l,{axis:"x",inherit:"z"})};function d(e,u,s,l){var b=0,v=s("x"),y=s("y"),T=s("z"),_=R.getComponentMethod("calendars","handleTraceDefaults");return _(e,u,["x","y","z"],l),v&&y&&T&&(b=Math.min(v.length,y.length,T.length),u._length=u._xlength=u._ylength=u._zlength=b),b}},{"../../lib":252,"../../registry":352,"../scatter/line_defaults":394,"../scatter/marker_defaults":400,"../scatter/subtypes":406,"../scatter/text_defaults":407,"./attributes":409}],414:[function(z,le,ae){"use strict";le.exports={plot:z("./convert"),attributes:z("./attributes"),markerSymbols:z("../../constants/gl3d_markers"),supplyDefaults:z("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:z("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":229,"../../plots/gl3d":335,"./attributes":409,"./calc":410,"./convert":412,"./defaults":413}],415:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/attributes"),L=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,N=z("../../plots/template_attributes").hovertemplateAttrs,D=z("../mesh3d/attributes"),p=z("../../plots/attributes"),w=z("../../lib/extend").extendFlat,k={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:N({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:L("u",1),vhoverformat:L("v",1),whoverformat:L("w",1),xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z"),showlegend:w({},p.showlegend,{dflt:!1})};w(k,R("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var d=["opacity","lightposition","lighting"];d.forEach(function(e){k[e]=D[e]}),k.hoverinfo=w({},p.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),k.transforms=void 0,le.exports=k},{"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351,"../mesh3d/attributes":373}],416:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/colorscale/calc");function N(k,d){d._len=Math.min(d.u.length,d.v.length,d.w.length,d.x.length,d.y.length,d.z.length),d._u=w(d.u,d._len),d._v=w(d.v,d._len),d._w=w(d.w,d._len),d._x=w(d.x,d._len),d._y=w(d.y,d._len),d._z=w(d.z,d._len);var e=D(d);d._gridFill=e.fill,d._Xs=e.Xs,d._Ys=e.Ys,d._Zs=e.Zs,d._len=e.len;var u=0,s,l,b;d.starts&&(s=w(d.starts.x||[]),l=w(d.starts.y||[]),b=w(d.starts.z||[]),u=Math.min(s.length,l.length,b.length)),d._startsX=s||[],d._startsY=l||[],d._startsZ=b||[];var v=0,y=1/0,T;for(T=0;T<d._len;T++){var _=d._u[T],f=d._v[T],g=d._w[T],n=Math.sqrt(_*_+f*f+g*g);v=Math.max(v,n),y=Math.min(y,n)}for(L(k,d,{vals:[y,v],containerStr:"",cLetter:"c"}),T=0;T<u;T++){var a=s[T];e.xMax=Math.max(e.xMax,a),e.xMin=Math.min(e.xMin,a);var h=l[T];e.yMax=Math.max(e.yMax,h),e.yMin=Math.min(e.yMin,h);var c=b[T];e.zMax=Math.max(e.zMax,c),e.zMin=Math.min(e.zMin,c)}d._slen=u,d._normMax=v,d._xbnds=[e.xMin,e.xMax],d._ybnds=[e.yMin,e.yMax],d._zbnds=[e.zMin,e.zMax]}function D(k){var d=k._x,e=k._y,u=k._z,s=k._len,l,b,v,y=-1/0,T=1/0,_=-1/0,f=1/0,g=-1/0,n=1/0,a="",h,c,m,o,t,i,r,x,A;for(s&&(o=d[0],i=e[0],x=u[0]),s>1&&(t=d[s-1],r=e[s-1],A=u[s-1]),l=0;l<s;l++)y=Math.max(y,d[l]),T=Math.min(T,d[l]),_=Math.max(_,e[l]),f=Math.min(f,e[l]),g=Math.max(g,u[l]),n=Math.min(n,u[l]),!h&&d[l]!==o&&(h=!0,a+="x"),!c&&e[l]!==i&&(c=!0,a+="y"),!m&&u[l]!==x&&(m=!0,a+="z");h||(a+="x"),c||(a+="y"),m||(a+="z");var E=p(k._x),P=p(k._y),S=p(k._z);a=a.replace("x",(o>t?"-":"+")+"x"),a=a.replace("y",(i>r?"-":"+")+"y"),a=a.replace("z",(x>A?"-":"+")+"z");var C=function(){s=0,E=[],P=[],S=[]};(!s||s<E.length*P.length*S.length)&&C();var M=function(re){return re==="x"?d:re==="y"?e:u},I=function(re){return re==="x"?E:re==="y"?P:S},G=function(re){return re[s-1]<re[0]?-1:1},V=M(a[1]),q=M(a[3]),ee=M(a[5]),Q=I(a[1]).length,U=I(a[3]).length,O=I(a[5]).length,Z=!1,B=function(re,de,ve){return Q*(U*re+de)+ve},Y=G(M(a[1])),j=G(M(a[3])),X=G(M(a[5]));for(l=0;l<O-1;l++){for(b=0;b<U-1;b++){for(v=0;v<Q-1;v++){var H=B(l,b,v),K=B(l,b,v+1),W=B(l,b+1,v),$=B(l+1,b,v);if((!(V[H]*Y<V[K]*Y)||!(q[H]*j<q[W]*j)||!(ee[H]*X<ee[$]*X))&&(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(R.warn("Encountered arbitrary coordinates! Unable to input data grid."),C()),{xMin:T,yMin:f,zMin:n,xMax:y,yMax:_,zMax:g,Xs:E,Ys:P,Zs:S,len:s,fill:a}}function p(k){return R.distinctVals(k).vals}function w(k,d){if(d===void 0&&(d=k.length),R.isTypedArray(k))return k.subarray(0,d);for(var e=[],u=0;u<d;u++)e[u]=+k[u];return e}le.exports={calc:N,filter:w,processGrid:D}},{"../../components/colorscale/calc":127,"../../lib":252}],417:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_streamtube3d,L=R.createTubeMesh,N=z("../../lib"),D=z("../../lib/gl_format_color").parseColorScale,p=z("../../components/colorscale").extractOpts,w=z("../../plots/gl3d/zip3"),k={xaxis:0,yaxis:1,zaxis:2};function d(v,y){this.scene=v,this.uid=y,this.mesh=null,this.data=null}var e=d.prototype;e.handlePick=function(v){var y=this.scene.fullSceneLayout,T=this.scene.dataScale;function _(n,a){var h=y[a],c=T[k[a]];return h.l2c(n)/c}if(v.object===this.mesh){var f=v.data.position,g=v.data.velocity;return v.traceCoordinate=[_(f[0],"xaxis"),_(f[1],"yaxis"),_(f[2],"zaxis"),_(g[0],"xaxis"),_(g[1],"yaxis"),_(g[2],"zaxis"),v.data.intensity*this.data._normMax,v.data.divergence],v.textLabel=this.data.hovertext||this.data.text,!0}};function u(v){var y=v.length,T;return y>2?T=v.slice(1,y-1):y===2?T=[(v[0]+v[1])/2]:T=v,T}function s(v){var y=v.length;return y===1?[.5,.5]:[v[1]-v[0],v[y-1]-v[y-2]]}function l(v,y){var T=v.fullSceneLayout,_=v.dataScale,f=y._len,g={};function n(U,O){var Z=T[O],B=_[k[O]];return N.simpleMap(U,function(Y){return Z.d2l(Y)*B})}if(g.vectors=w(n(y._u,"xaxis"),n(y._v,"yaxis"),n(y._w,"zaxis"),f),!f)return{positions:[],cells:[]};var a=n(y._Xs,"xaxis"),h=n(y._Ys,"yaxis"),c=n(y._Zs,"zaxis");g.meshgrid=[a,h,c],g.gridFill=y._gridFill;var m=y._slen;if(m)g.startingPositions=w(n(y._startsX,"xaxis"),n(y._startsY,"yaxis"),n(y._startsZ,"zaxis"));else{for(var o=h[0],t=u(a),i=u(c),r=new Array(t.length*i.length),x=0,A=0;A<t.length;A++)for(var E=0;E<i.length;E++)r[x++]=[t[A],o,i[E]];g.startingPositions=r}g.colormap=D(y),g.tubeSize=y.sizeref,g.maxLength=y.maxdisplayed;var P=n(y._xbnds,"xaxis"),S=n(y._ybnds,"yaxis"),C=n(y._zbnds,"zaxis"),M=s(a),I=s(h),G=s(c),V=[[P[0]-M[0],S[0]-I[0],C[0]-G[0]],[P[1]+M[1],S[1]+I[1],C[1]+G[1]]],q=R(g,V),ee=p(y);q.vertexIntensityBounds=[ee.min/y._normMax,ee.max/y._normMax];var Q=y.lightposition;return q.lightPosition=[Q.x,Q.y,Q.z],q.ambient=y.lighting.ambient,q.diffuse=y.lighting.diffuse,q.specular=y.lighting.specular,q.roughness=y.lighting.roughness,q.fresnel=y.lighting.fresnel,q.opacity=y.opacity,y._pad=q.tubeScale*y.sizeref*2,q}e.update=function(v){this.data=v;var y=l(this.scene,v);this.mesh.update(y)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(v,y){var T=v.glplot.gl,_=l(v,y),f=L(T,_),g=new d(v,y.uid);return g.mesh=f,g.data=y,f._trace=g,v.glplot.add(f),g}le.exports=b},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib":252,"../../lib/gl_format_color":249,"../../plots/gl3d/zip3":346}],418:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("../../components/colorscale/defaults"),N=z("./attributes");le.exports=function(p,w,k,d){function e(T,_){return R.coerce(p,w,N,T,_)}var u=e("u"),s=e("v"),l=e("w"),b=e("x"),v=e("y"),y=e("z");if(!u||!u.length||!s||!s.length||!l||!l.length||!b||!b.length||!v||!v.length||!y||!y.length){w.visible=!1;return}e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),L(p,w,d,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),w._length=null}},{"../../components/colorscale/defaults":129,"../../lib":252,"./attributes":415}],419:[function(z,le,ae){"use strict";le.exports={moduleType:"trace",name:"streamtube",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:z("./attributes"),supplyDefaults:z("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:z("./calc").calc,plot:z("./convert"),eventData:function(R,L){return R.tubex=R.x,R.tubey=R.y,R.tubez=R.z,R.tubeu=L.traceCoordinate[3],R.tubev=L.traceCoordinate[4],R.tubew=L.traceCoordinate[5],R.norm=L.traceCoordinate[6],R.divergence=L.traceCoordinate[7],delete R.x,delete R.y,delete R.z,R},meta:{}}},{"../../plots/gl3d":335,"./attributes":415,"./calc":416,"./convert":417,"./defaults":418}],420:[function(z,le,ae){"use strict";var R=z("../../components/color"),L=z("../../components/colorscale/attributes"),N=z("../../plots/cartesian/axis_format_attributes").axisHoverFormat,D=z("../../plots/template_attributes").hovertemplateAttrs,p=z("../../plots/attributes"),w=z("../../lib/extend").extendFlat,k=z("../../plot_api/edit_types").overrideAll;function d(s){return{valType:"boolean",dflt:!1}}function e(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:d("x"),y:d("y"),z:d("z")},color:{valType:"color",dflt:R.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:R.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var u=le.exports=k(w({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:D(),xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},L("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e("x"),y:e("y"),z:e("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:w({},L.zauto,{}),zmin:w({},L.zmin,{}),zmax:w({},L.zmax,{})},hoverinfo:w({},p.hoverinfo),showlegend:w({},p.showlegend,{dflt:!1})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/color":119,"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plots/attributes":297,"../../plots/cartesian/axis_format_attributes":304,"../../plots/template_attributes":351}],421:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/calc");le.exports=function(N,D){D.surfacecolor?R(N,D,{vals:D.surfacecolor,containerStr:"",cLetter:"c"}):R(N,D,{vals:D.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":127}],422:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_surface3d,L=z("../../../stackgl_modules").ndarray,N=z("../../../stackgl_modules").ndarray_linear_interpolate.d2,D=z("../heatmap/interp2d"),p=z("../heatmap/find_empties"),w=z("../../lib").isArrayOrTypedArray,k=z("../../lib/gl_format_color").parseColorScale,d=z("../../lib/str2rgbarray"),e=z("../../components/colorscale").extractOpts;function u(i,r,x){this.scene=i,this.uid=x,this.surface=r,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=u.prototype;s.getXat=function(i,r,x,A){var E=w(this.data.x)?w(this.data.x[0])?this.data.x[r][i]:this.data.x[i]:i;return x===void 0?E:A.d2l(E,0,x)},s.getYat=function(i,r,x,A){var E=w(this.data.y)?w(this.data.y[0])?this.data.y[r][i]:this.data.y[r]:r;return x===void 0?E:A.d2l(E,0,x)},s.getZat=function(i,r,x,A){var E=this.data.z[r][i];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[r][i]),x===void 0?E:A.d2l(E,0,x)},s.handlePick=function(i){if(i.object===this.surface){var r=(i.data.index[0]-1)/this.dataScaleX-1,x=(i.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round(r),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(x),this.data._ylength-1),0);i.index=[A,E],i.traceCoordinate=[this.getXat(A,E),this.getYat(A,E),this.getZat(A,E)],i.dataCoordinate=[this.getXat(A,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++){var S=i.dataCoordinate[P];S!=null&&(i.dataCoordinate[P]*=this.scene.dataScale[P])}var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][A]!==void 0?i.textLabel=C[E][A]:C?i.textLabel=C:i.textLabel="",i.data.dataCoordinate=i.dataCoordinate.slice(),this.surface.highlight(i.data),this.scene.glplot.spikes.position=i.dataCoordinate,!0}};function l(i){var r=i[0].rgb,x=i[i.length-1].rgb;return r[0]===x[0]&&r[1]===x[1]&&r[2]===x[2]&&r[3]===x[3]}var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function v(i,r){if(i<r)return 0;for(var x=0;Math.floor(i%r)===0;)i/=r,x++;return x}function y(i){for(var r=[],x=0;x<b.length;x++){var A=b[x];r.push(v(i,A))}return r}function T(i){for(var r=y(i),x=i,A=0;A<b.length;A++)if(r[A]>0){x=b[A];break}return x}function _(i,r){if(!(i<1||r<1)){for(var x=y(i),A=y(r),E=1,P=0;P<b.length;P++)E*=Math.pow(b[P],Math.max(x[P],A[P]));return E}}function f(i){if(i.length!==0){for(var r=1,x=0;x<i.length;x++)r=_(r,i[x]);return r}}s.calcXnums=function(i){var r,x=[];for(r=1;r<i;r++){var A=this.getXat(r-1,0),E=this.getXat(r,0);E!==A&&A!==void 0&&A!==null&&E!==void 0&&E!==null?x[r-1]=Math.abs(E-A):x[r-1]=0}var P=0;for(r=1;r<i;r++)P+=x[r-1];for(r=1;r<i;r++)x[r-1]===0?x[r-1]=1:x[r-1]=Math.round(P/x[r-1]);return x},s.calcYnums=function(i){var r,x=[];for(r=1;r<i;r++){var A=this.getYat(0,r-1),E=this.getYat(0,r);E!==A&&A!==void 0&&A!==null&&E!==void 0&&E!==null?x[r-1]=Math.abs(E-A):x[r-1]=0}var P=0;for(r=1;r<i;r++)P+=x[r-1];for(r=1;r<i;r++)x[r-1]===0?x[r-1]=1:x[r-1]=Math.round(P/x[r-1]);return x};var g=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],n=g[9],a=g[13];s.estimateScale=function(i,r){for(var x=r===0?this.calcXnums(i):this.calcYnums(i),A=1+f(x);A<n;)A*=2;for(;A>a;)A--,A/=T(A),A++,A<n&&(A=a);var E=Math.round(A/i);return E>1?E:1};function h(i,r,x){var A=x[8]+x[2]*r[0]+x[5]*r[1];return i[0]=(x[6]+x[0]*r[0]+x[3]*r[1])/A,i[1]=(x[7]+x[1]*r[0]+x[4]*r[1])/A,i}function c(i,r,x){return m(i,r,h,x),i}function m(i,r,x,A){for(var E=[0,0],P=i.shape[0],S=i.shape[1],C=0;C<P;C++)for(var M=0;M<S;M++)x(E,[C,M],A),i.set(C,M,N(r,E[0],E[1]));return i}s.refineCoords=function(i){for(var r=this.dataScaleX,x=this.dataScaleY,A=i[0].shape[0],E=i[0].shape[1],P=Math.floor(i[0].shape[0]*r+1)|0,S=Math.floor(i[0].shape[1]*x+1)|0,C=1+A+1,M=1+E+1,I=L(new Float32Array(C*M),[C,M]),G=[1/r,0,0,0,1/x,0,0,0,1],V=0;V<i.length;++V){this.surface.padField(I,i[V]);var q=L(new Float32Array(P*S),[P,S]);c(q,I,G),i[V]=q}};function o(i,r){for(var x=!1,A=0;A<i.length;A++)if(r===i[A]){x=!0;break}x===!1&&i.push(r)}s.setContourLevels=function(){var i=[[],[],[]],r=[!1,!1,!1],x=!1,A,E,P;for(A=0;A<3;++A)if(this.showContour[A]&&(x=!0,this.contourSize[A]>0&&this.contourStart[A]!==null&&this.contourEnd[A]!==null&&this.contourEnd[A]>this.contourStart[A]))for(r[A]=!0,E=this.contourStart[A];E<this.contourEnd[A];E+=this.contourSize[A])P=E*this.scene.dataScale[A],o(i[A],P);if(x){var S=[[],[],[]];for(A=0;A<3;++A)this.showContour[A]&&(S[A]=r[A]?i[A]:this.scene.contourLevels[A]);this.surface.update({levels:S})}},s.update=function(i){var r=this.scene,x=r.fullSceneLayout,A=this.surface,E=k(i),P=r.dataScale,S=i.z[0].length,C=i._ylength,M=r.contourLevels;this.data=i;var I,G,V,q,ee=[];for(I=0;I<3;I++)for(ee[I]=[],G=0;G<S;G++)ee[I][G]=[];for(G=0;G<S;G++)for(V=0;V<C;V++)ee[0][G][V]=this.getXat(G,V,i.xcalendar,x.xaxis),ee[1][G][V]=this.getYat(G,V,i.ycalendar,x.yaxis),ee[2][G][V]=this.getZat(G,V,i.zcalendar,x.zaxis);if(i.connectgaps)for(i._emptypoints=p(ee[2]),D(ee[2],i._emptypoints),i._interpolatedZ=[],G=0;G<S;G++)for(i._interpolatedZ[G]=[],V=0;V<C;V++)i._interpolatedZ[G][V]=ee[2][G][V];for(I=0;I<3;I++)for(G=0;G<S;G++)for(V=0;V<C;V++)q=ee[I][G][V],q==null?ee[I][G][V]=NaN:q=ee[I][G][V]*=P[I];for(I=0;I<3;I++)for(G=0;G<S;G++)for(V=0;V<C;V++)q=ee[I][G][V],q!=null&&(this.minValues[I]>q&&(this.minValues[I]=q),this.maxValues[I]<q&&(this.maxValues[I]=q));for(I=0;I<3;I++)this.objectOffset[I]=.5*(this.minValues[I]+this.maxValues[I]);for(I=0;I<3;I++)for(G=0;G<S;G++)for(V=0;V<C;V++)q=ee[I][G][V],q!=null&&(ee[I][G][V]-=this.objectOffset[I]);var Q=[L(new Float32Array(S*C),[S,C]),L(new Float32Array(S*C),[S,C]),L(new Float32Array(S*C),[S,C])];for(I=0;I<3;I++)for(G=0;G<S;G++)for(V=0;V<C;V++)Q[I].set(G,V,ee[I][G][V]);ee=[];var U={colormap:E,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!i.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:i.opacityscale,opacity:i.opacity},O=e(i);if(U.intensityBounds=[O.min,O.max],i.surfacecolor){var Z=L(new Float32Array(S*C),[S,C]);for(G=0;G<S;G++)for(V=0;V<C;V++)Z.set(G,V,i.surfacecolor[V][G]);Q.push(Z)}else U.intensityBounds[0]*=P[2],U.intensityBounds[1]*=P[2];(a<Q[0].shape[0]||a<Q[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(Q[0].shape[0],0),this.dataScaleY=this.estimateScale(Q[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(Q)),i.surfacecolor&&(U.intensity=Q.pop());var B=[!0,!0,!0],Y=["x","y","z"];for(I=0;I<3;++I){var j=i.contours[Y[I]];B[I]=j.highlight,U.showContour[I]=j.show||j.highlight,U.showContour[I]&&(U.contourProject[I]=[j.project.x,j.project.y,j.project.z],j.show?(this.showContour[I]=!0,U.levels[I]=M[I],A.highlightColor[I]=U.contourColor[I]=d(j.color),j.usecolormap?A.highlightTint[I]=U.contourTint[I]=0:A.highlightTint[I]=U.contourTint[I]=1,U.contourWidth[I]=j.width,this.contourStart[I]=j.start,this.contourEnd[I]=j.end,this.contourSize[I]=j.size):(this.showContour[I]=!1,this.contourStart[I]=null,this.contourEnd[I]=null,this.contourSize[I]=0),j.highlight&&(U.dynamicColor[I]=d(j.highlightcolor),U.dynamicWidth[I]=j.highlightwidth))}l(E)&&(U.vertexColor=!0),U.objectOffset=this.objectOffset,U.coords=Q,A.update(U),A.visible=i.visible,A.enableDynamic=B,A.enableHighlight=B,A.snapToData=!0,"lighting"in i&&(A.ambientLight=i.lighting.ambient,A.diffuseLight=i.lighting.diffuse,A.specularLight=i.lighting.specular,A.roughness=i.lighting.roughness,A.fresnel=i.lighting.fresnel),"lightposition"in i&&(A.lightPosition=[i.lightposition.x,i.lightposition.y,i.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function t(i,r){var x=i.glplot.gl,A=R({gl:x}),E=new u(i,A,r.uid);return A._trace=E,E.update(r),i.glplot.add(A),E}le.exports=t},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib":252,"../../lib/gl_format_color":249,"../../lib/str2rgbarray":276,"../heatmap/find_empties":366,"../heatmap/interp2d":367}],423:[function(z,le,ae){"use strict";var R=z("../../registry"),L=z("../../lib"),N=z("../../components/colorscale/defaults"),D=z("./attributes"),p=.1;function w(s,l){for(var b=[],v=32,y=0;y<v;y++){var T=y/(v-1),_=l+(1-l)*(1-Math.pow(Math.sin(s*T*Math.PI),2));b.push([T,Math.max(0,Math.min(1,_))])}return b}function k(s){var l=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var b=0;b<s.length;b++){var v=s[b];if(v.length!==2||+v[0]<l)return!1;l=+v[0]}return!0}function d(s,l,b,v){var y,T;function _(i,r){return L.coerce(s,l,D,i,r)}var f=_("x"),g=_("y"),n=_("z");if(!n||!n.length||(f?f.length<1:!1)||(g?g.length<1:!1)){l.visible=!1;return}l._xlength=Array.isArray(f)&&L.isArrayOrTypedArray(f[0])?n.length:n[0].length,l._ylength=n.length;var a=R.getComponentMethod("calendars","handleTraceDefaults");a(s,l,["x","y","z"],v),_("text"),_("hovertext"),_("hovertemplate"),_("xhoverformat"),_("yhoverformat"),_("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(i){_(i)});var h=_("surfacecolor"),c=["x","y","z"];for(y=0;y<3;++y){var m="contours."+c[y],o=_(m+".show"),t=_(m+".highlight");if(o||t)for(T=0;T<3;++T)_(m+".project."+c[T]);o&&(_(m+".color"),_(m+".width"),_(m+".usecolormap")),t&&(_(m+".highlightcolor"),_(m+".highlightwidth")),_(m+".start"),_(m+".end"),_(m+".size")}h||(u(s,"zmin","cmin"),u(s,"zmax","cmax"),u(s,"zauto","cauto")),N(s,l,v,_,{prefix:"",cLetter:"c"}),e(s,l,v,_),l._length=null}function e(s,l,b,v){var y=v("opacityscale");y==="max"?l.opacityscale=[[0,p],[1,1]]:y==="min"?l.opacityscale=[[0,1],[1,p]]:y==="extremes"?l.opacityscale=w(1,p):k(y)||(l.opacityscale=void 0)}function u(s,l,b){l in s&&!(b in s)&&(s[b]=s[l])}le.exports={supplyDefaults:d,opacityscaleDefaults:e}},{"../../components/colorscale/defaults":129,"../../lib":252,"../../registry":352,"./attributes":420}],424:[function(z,le,ae){"use strict";le.exports={attributes:z("./attributes"),supplyDefaults:z("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:z("./calc"),plot:z("./convert"),moduleType:"trace",name:"surface",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":335,"./attributes":420,"./calc":421,"./convert":422,"./defaults":423}],425:[function(z,le,ae){"use strict";var R=z("../../components/colorscale/attributes"),L=z("../isosurface/attributes"),N=z("../surface/attributes"),D=z("../../plots/attributes"),p=z("../../lib/extend").extendFlat,w=z("../../plot_api/edit_types").overrideAll,k=le.exports=w(p({x:L.x,y:L.y,z:L.z,value:L.value,isomin:L.isomin,isomax:L.isomax,surface:L.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:L.slices,caps:L.caps,text:L.text,hovertext:L.hovertext,xhoverformat:L.xhoverformat,yhoverformat:L.yhoverformat,zhoverformat:L.zhoverformat,valuehoverformat:L.valuehoverformat,hovertemplate:L.hovertemplate},R("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:L.colorbar,opacity:L.opacity,opacityscale:N.opacityscale,lightposition:L.lightposition,lighting:L.lighting,flatshading:L.flatshading,contour:L.contour,hoverinfo:p({},D.hoverinfo),showlegend:p({},D.showlegend,{dflt:!1})}),"calc","nested");k.x.editType=k.y.editType=k.z.editType=k.value.editType="calc+clearAxisTypes",k.transforms=void 0},{"../../components/colorscale/attributes":126,"../../lib/extend":245,"../../plot_api/edit_types":283,"../../plots/attributes":297,"../isosurface/attributes":368,"../surface/attributes":420}],426:[function(z,le,ae){"use strict";var R=z("../../../stackgl_modules").gl_mesh3d,L=z("../../lib/gl_format_color").parseColorScale,N=z("../../lib/str2rgbarray"),D=z("../../components/colorscale").extractOpts,p=z("../../plots/gl3d/zip3"),w=z("../isosurface/convert").findNearestOnAxis,k=z("../isosurface/convert").generateIsoMeshes;function d(s,l,b){this.scene=s,this.uid=b,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var e=d.prototype;e.handlePick=function(s){if(s.object===this.mesh){var l=s.data.index,b=this.data._meshX[l],v=this.data._meshY[l],y=this.data._meshZ[l],T=this.data._Ys.length,_=this.data._Zs.length,f=w(b,this.data._Xs).id,g=w(v,this.data._Ys).id,n=w(y,this.data._Zs).id,a=s.index=n+_*g+_*T*f;s.traceCoordinate=[this.data._meshX[a],this.data._meshY[a],this.data._meshZ[a],this.data._value[a]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&h[a]!==void 0?s.textLabel=h[a]:h&&(s.textLabel=h),!0}},e.update=function(s){var l=this.scene,b=l.fullSceneLayout;this.data=k(s);function v(g,n,a,h){return n.map(function(c){return g.d2l(c,0,h)*a})}var y=p(v(b.xaxis,s._meshX,l.dataScale[0],s.xcalendar),v(b.yaxis,s._meshY,l.dataScale[1],s.ycalendar),v(b.zaxis,s._meshZ,l.dataScale[2],s.zcalendar)),T=p(s._meshI,s._meshJ,s._meshK),_={positions:y,cells:T,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:N(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},f=D(s);_.vertexIntensity=s._meshIntensity,_.vertexIntensityBounds=[f.min,f.max],_.colormap=L(s),this.mesh.update(_)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function u(s,l){var b=s.glplot.gl,v=R({gl:b}),y=new d(s,v,l.uid);return v._trace=y,y.update(l),s.glplot.add(v),y}le.exports=u},{"../../../stackgl_modules":435,"../../components/colorscale":131,"../../lib/gl_format_color":249,"../../lib/str2rgbarray":276,"../../plots/gl3d/zip3":346,"../isosurface/convert":370}],427:[function(z,le,ae){"use strict";var R=z("../../lib"),L=z("./attributes"),N=z("../isosurface/defaults").supplyIsoDefaults,D=z("../surface/defaults").opacityscaleDefaults;le.exports=function(w,k,d,e){function u(s,l){return R.coerce(w,k,L,s,l)}N(w,k,d,e,u),D(w,k,e,u)}},{"../../lib":252,"../isosurface/defaults":371,"../surface/defaults":423,"./attributes":425}],428:[function(z,le,ae){"use strict";le.exports={attributes:z("./attributes"),supplyDefaults:z("./defaults"),calc:z("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:z("./convert"),moduleType:"trace",name:"volume",basePlotModule:z("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":335,"../isosurface/calc":369,"./attributes":425,"./convert":426,"./defaults":427}],429:[function(z,le,ae){"use strict";var R=z("../plots/cartesian/axes"),L=z("../lib"),N=z("../plot_api/plot_schema"),D=z("./helpers").pointsAccessorFunction,p=z("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var w=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},k=w.aggregations;ae.supplyDefaults=function(b,v){var y={},T;function _(x,A){return L.coerce(b,y,w,x,A)}var f=_("enabled");if(!f)return y;var g=N.findArrayAttributes(v),n={};for(T=0;T<g.length;T++)n[g[T]]=1;var a=_("groups");if(!Array.isArray(a)){if(!n[a])return y.enabled=!1,y;n[a]=0}var h=b.aggregations||[],c=y.aggregations=new Array(h.length),m;function o(x,A){return L.coerce(h[T],m,k,x,A)}for(T=0;T<h.length;T++){m={_index:T};var t=o("target"),i=o("func"),r=o("enabled");r&&t&&(n[t]||i==="count"&&n[t]===void 0)?(i==="stddev"&&o("funcmode"),n[t]=0,c[T]=m):c[T]={enabled:!1,_index:T}}for(T=0;T<g.length;T++)n[g[T]]&&c.push({target:g[T],func:k.func.dflt,enabled:!0,_index:-1});return y},ae.calcTransform=function(b,v,y){if(!!y.enabled){var T=y.groups,_=L.getTargetArray(v,{target:T});if(!!_){var f,g,n,a,h={},c={},m=[],o=D(v.transforms,y),t=_.length;for(v._length&&(t=Math.min(t,v._length)),f=0;f<t;f++)g=_[f],n=h[g],n===void 0?(h[g]=m.length,a=[f],m.push(a),c[h[g]]=o(f)):(m[n].push(f),c[h[g]]=(c[h[g]]||[]).concat(o(f)));y._indexToPoints=c;var i=y.aggregations;for(f=0;f<i.length;f++)d(b,v,m,i[f]);typeof T=="string"&&d(b,v,m,{target:T,func:"first",enabled:!0}),v._length=m.length}}};function d(b,v,y,T){if(!!T.enabled){for(var _=T.target,f=L.nestedProperty(v,_),g=f.get(),n=R.getDataConversions(b,v,_,g),a=e(T,n),h=new Array(y.length),c=0;c<y.length;c++)h[c]=a(g,y[c]);f.set(h),T.func==="count"&&L.pushUnique(v._arrayAttrs,_)}}function e(b,v){var y=b.func,T=v.d2c,_=v.c2d;switch(y){case"count":return u;case"first":return s;case"last":return l;case"sum":return function(f,g){for(var n=0,a=0;a<g.length;a++){var h=T(f[g[a]]);h!==p&&(n+=h)}return _(n)};case"avg":return function(f,g){for(var n=0,a=0,h=0;h<g.length;h++){var c=T(f[g[h]]);c!==p&&(n+=c,a++)}return a?_(n/a):p};case"min":return function(f,g){for(var n=1/0,a=0;a<g.length;a++){var h=T(f[g[a]]);h!==p&&(n=Math.min(n,h))}return n===1/0?p:_(n)};case"max":return function(f,g){for(var n=-1/0,a=0;a<g.length;a++){var h=T(f[g[a]]);h!==p&&(n=Math.max(n,h))}return n===-1/0?p:_(n)};case"range":return function(f,g){for(var n=1/0,a=-1/0,h=0;h<g.length;h++){var c=T(f[g[h]]);c!==p&&(n=Math.min(n,c),a=Math.max(a,c))}return a===-1/0||n===1/0?p:_(a-n)};case"change":return function(f,g){var n=T(f[g[0]]),a=T(f[g[g.length-1]]);return n===p||a===p?p:_(a-n)};case"median":return function(f,g){for(var n=[],a=0;a<g.length;a++){var h=T(f[g[a]]);h!==p&&n.push(h)}if(!n.length)return p;n.sort(L.sorterAsc);var c=(n.length-1)/2;return _((n[Math.floor(c)]+n[Math.ceil(c)])/2)};case"mode":return function(f,g){for(var n={},a=0,h=p,c=0;c<g.length;c++){var m=T(f[g[c]]);if(m!==p){var o=n[m]=(n[m]||0)+1;o>a&&(a=o,h=m)}}return a?_(h):p};case"rms":return function(f,g){for(var n=0,a=0,h=0;h<g.length;h++){var c=T(f[g[h]]);c!==p&&(n+=c*c,a++)}return a?_(Math.sqrt(n/a)):p};case"stddev":return function(f,g){var n=0,a=0,h=1,c=p,m;for(m=0;m<g.length&&c===p;m++)c=T(f[g[m]]);if(c===p)return p;for(;m<g.length;m++){var o=T(f[g[m]]);if(o!==p){var t=o-c;n+=t,a+=t*t,h++}}var i=b.funcmode==="sample"?h-1:h;return i?Math.sqrt((a-n*n/h)/i):0}}}function u(b,v){return v.length}function s(b,v){return b[v[0]]}function l(b,v){return b[v[v.length-1]]}},{"../constants/numerical":231,"../lib":252,"../plot_api/plot_schema":289,"../plots/cartesian/axes":301,"./helpers":432}],430:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../registry"),N=z("../plots/cartesian/axes"),D=z("./helpers").pointsAccessorFunction,p=z("../constants/filter_ops"),w=p.COMPARISON_OPS,k=p.INTERVAL_OPS,d=p.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(k).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(u){var s={};function l(T,_){return R.coerce(u,s,ae.attributes,T,_)}var b=l("enabled");if(b){var v=l("target");if(R.isArrayOrTypedArray(v)&&v.length===0)return s.enabled=!1,s;l("preservegaps"),l("operation"),l("value");var y=L.getComponentMethod("calendars","handleDefaults");y(u,s,"valuecalendar",null),y(u,s,"targetcalendar",null)}return s},ae.calcTransform=function(u,s,l){if(!l.enabled)return;var b=R.getTargetArray(s,l);if(!b)return;var v=l.target,y=b.length;s._length&&(y=Math.min(y,s._length));var T=l.targetcalendar,_=s._arrayAttrs,f=l.preservegaps;if(typeof v=="string"){var g=R.nestedProperty(s,v+"calendar").get();g&&(T=g)}var n=N.getDataToCoordFunc(u,s,v,b),a=e(l,n,T),h={},c={},m=0;function o(E,P){for(var S=0;S<_.length;S++){var C=R.nestedProperty(s,_[S]);E(C,P)}}var t,i;f?(t=function(E){h[E.astr]=R.extendDeep([],E.get()),E.set(new Array(y))},i=function(E,P){var S=h[E.astr][P];E.get()[P]=S}):(t=function(E){h[E.astr]=R.extendDeep([],E.get()),E.set([])},i=function(E,P){var S=h[E.astr][P];E.get().push(S)}),o(t);for(var r=D(s.transforms,l),x=0;x<y;x++){var A=a(b[x]);A?(o(i,x),c[m++]=r(x)):f&&m++}l._indexToPoints=c,s._length=m};function e(u,s,l){var b=u.operation,v=u.value,y=Array.isArray(v);function T(n){return n.indexOf(b)!==-1}var _=function(n){return s(n,0,u.valuecalendar)},f=function(n){return s(n,0,l)},g;switch(T(w)?g=_(y?v[0]:v):T(k)?g=y?[_(v[0]),_(v[1])]:[_(v),_(v)]:T(d)&&(g=y?v.map(_):[_(v)]),b){case"=":return function(n){return f(n)===g};case"!=":return function(n){return f(n)!==g};case"<":return function(n){return f(n)<g};case"<=":return function(n){return f(n)<=g};case">":return function(n){return f(n)>g};case">=":return function(n){return f(n)>=g};case"[]":return function(n){var a=f(n);return a>=g[0]&&a<=g[1]};case"()":return function(n){var a=f(n);return a>g[0]&&a<g[1]};case"[)":return function(n){var a=f(n);return a>=g[0]&&a<g[1]};case"(]":return function(n){var a=f(n);return a>g[0]&&a<=g[1]};case"][":return function(n){var a=f(n);return a<=g[0]||a>=g[1]};case")(":return function(n){var a=f(n);return a<g[0]||a>g[1]};case"](":return function(n){var a=f(n);return a<=g[0]||a>g[1]};case")[":return function(n){var a=f(n);return a<g[0]||a>=g[1]};case"{}":return function(n){return g.indexOf(f(n))!==-1};case"}{":return function(n){return g.indexOf(f(n))===-1}}}},{"../constants/filter_ops":227,"../lib":252,"../plots/cartesian/axes":301,"../registry":352,"./helpers":432}],431:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plot_api/plot_schema"),N=z("../plots/plots"),D=z("./helpers").pointsAccessorFunction;ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(w,k,d){var e,u={};function s(_,f){return R.coerce(w,u,ae.attributes,_,f)}var l=s("enabled");if(!l)return u;s("groups"),s("nameformat",d._dataLength>1?"%{group} (%{trace})":"%{group}");var b=w.styles,v=u.styles=[];if(b)for(e=0;e<b.length;e++){var y=v[e]={};R.coerce(b[e],v[e],ae.attributes.styles,"target");var T=R.coerce(b[e],v[e],ae.attributes.styles,"value");R.isPlainObject(T)?y.value=R.extendDeep({},T):T&&delete y.value}return u},ae.transform=function(w,k){var d,e,u,s=[];for(e=0;e<w.length;e++)for(d=p(w[e],k),u=0;u<d.length;u++)s.push(d[u]);return s};function p(w,k){var d,e,u,s,l,b,v,y,T,_,f=k.transform,g=k.transformIndex,n=w.transforms[g].groups,a=D(w.transforms,f);if(!R.isArrayOrTypedArray(n)||n.length===0)return[w];var h=R.filterUnique(n),c=new Array(h.length),m=n.length,o=L.findArrayAttributes(w),t=f.styles||[],i={};for(d=0;d<t.length;d++)i[t[d].target]=t[d].value;f.styles&&(_=R.keyedContainer(f,"styles","target","value.name"));var r={},x={};for(d=0;d<h.length;d++){b=h[d],r[b]=d,x[b]=0,v=c[d]=R.extendDeepNoArrays({},w),v._group=b,v.transforms[g]._indexToPoints={};var A=null;for(_&&(A=_.get(b)),A||A===""?v.name=A:v.name=R.templateString(f.nameformat,{trace:w.name,group:b}),y=v.transforms,v.transforms=[],e=0;e<y.length;e++)v.transforms[e]=R.extendDeepNoArrays({},y[e]);for(e=0;e<o.length;e++)R.nestedProperty(v,o[e]).set([])}for(u=0;u<o.length;u++){for(s=o[u],e=0,T=[];e<h.length;e++)T[e]=R.nestedProperty(c[e],s).get();for(l=R.nestedProperty(w,s).get(),e=0;e<m;e++)T[r[n[e]]].push(l[e])}for(e=0;e<m;e++){v=c[r[n[e]]];var E=v.transforms[g]._indexToPoints;E[x[n[e]]]=a(e),x[n[e]]++}for(d=0;d<h.length;d++)b=h[d],v=c[d],N.clearExpandedTraceDefaultColors(v),v=R.extendDeepNoArrays(v,i[b]||{});return c}},{"../lib":252,"../plot_api/plot_schema":289,"../plots/plots":349,"./helpers":432}],432:[function(z,le,ae){"use strict";ae.pointsAccessorFunction=function(R,L){for(var N,D,p=0;p<R.length&&(N=R[p],N!==L);p++)!N._indexToPoints||N.enabled===!1||(D=N._indexToPoints);var w=D?function(k){return D[k]}:function(k){return[k]};return w}},{}],433:[function(z,le,ae){"use strict";var R=z("../lib"),L=z("../plots/cartesian/axes"),N=z("./helpers").pointsAccessorFunction,D=z("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(k){var d={};function e(s,l){return R.coerce(k,d,ae.attributes,s,l)}var u=e("enabled");return u&&(e("target"),e("order")),d},ae.calcTransform=function(k,d,e){if(!!e.enabled){var u=R.getTargetArray(d,e);if(!!u){var s=e.target,l=u.length;d._length&&(l=Math.min(l,d._length));var b=d._arrayAttrs,v=L.getDataToCoordFunc(k,d,s,u),y=p(e,u,v,l),T=N(d.transforms,e),_={},f,g;for(f=0;f<b.length;f++){var n=R.nestedProperty(d,b[f]),a=n.get(),h=new Array(l);for(g=0;g<l;g++)h[g]=a[y[g]];n.set(h)}for(g=0;g<l;g++)_[g]=T(y[g]);e._indexToPoints=_,d._length=l}}};function p(k,d,e,u){var s=new Array(u),l=new Array(u),b;for(b=0;b<u;b++)s[b]={v:d[b],i:b};for(s.sort(w(k,e)),b=0;b<u;b++)l[b]=s[b].i;return l}function w(k,d){switch(k.order){case"ascending":return function(e,u){var s=d(e.v),l=d(u.v);return s===D?1:l===D?-1:s-l};case"descending":return function(e,u){var s=d(e.v),l=d(u.v);return s===D?1:l===D?-1:l-s}}}},{"../constants/numerical":231,"../lib":252,"../plots/cartesian/axes":301,"./helpers":432}],434:[function(z,le,ae){"use strict";ae.version="2.11.0"},{}],435:[function(z,le,ae){(function(R){(function(){(function(L){if(typeof ae=="object"&&typeof le<"u")le.exports=L();else if(typeof bt=="function"&&bt.amd)bt([],L);else{var N;typeof window<"u"?N=window:typeof R<"u"?N=R:typeof self<"u"?N=self:N=this,N.stackgl=L()}})(function(){var L,N,D;return function(){function p(w,k,d){function e(l,b){if(!k[l]){if(!w[l]){var v=typeof z=="function"&&z;if(!b&&v)return v(l,!0);if(u)return u(l,!0);var y=new Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y}var T=k[l]={exports:{}};w[l][0].call(T.exports,function(_){var f=w[l][1][_];return e(f||_)},T,T.exports,p,w,k,d)}return k[l].exports}for(var u=typeof z=="function"&&z,s=0;s<d.length;s++)e(d[s]);return e}return p}()({1:[function(p,w,k){"use strict";k.byteLength=y,k.toByteArray=_,k.fromByteArray=n;for(var d=[],e=[],u=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,b=s.length;l<b;++l)d[l]=s[l],e[s.charCodeAt(l)]=l;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function v(a){var h=a.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");c===-1&&(c=h);var m=c===h?0:4-c%4;return[c,m]}function y(a){var h=v(a),c=h[0],m=h[1];return(c+m)*3/4-m}function T(a,h,c){return(h+c)*3/4-c}function _(a){var h,c=v(a),m=c[0],o=c[1],t=new u(T(a,m,o)),i=0,r=o>0?m-4:m,x;for(x=0;x<r;x+=4)h=e[a.charCodeAt(x)]<<18|e[a.charCodeAt(x+1)]<<12|e[a.charCodeAt(x+2)]<<6|e[a.charCodeAt(x+3)],t[i++]=h>>16&255,t[i++]=h>>8&255,t[i++]=h&255;return o===2&&(h=e[a.charCodeAt(x)]<<2|e[a.charCodeAt(x+1)]>>4,t[i++]=h&255),o===1&&(h=e[a.charCodeAt(x)]<<10|e[a.charCodeAt(x+1)]<<4|e[a.charCodeAt(x+2)]>>2,t[i++]=h>>8&255,t[i++]=h&255),t}function f(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[a&63]}function g(a,h,c){for(var m,o=[],t=h;t<c;t+=3)m=(a[t]<<16&16711680)+(a[t+1]<<8&65280)+(a[t+2]&255),o.push(f(m));return o.join("")}function n(a){for(var h,c=a.length,m=c%3,o=[],t=16383,i=0,r=c-m;i<r;i+=t)o.push(g(a,i,i+t>r?r:i+t));return m===1?(h=a[c-1],o.push(d[h>>2]+d[h<<4&63]+"==")):m===2&&(h=(a[c-2]<<8)+a[c-1],o.push(d[h>>10]+d[h>>4&63]+d[h<<2&63]+"=")),o.join("")}},{}],2:[function(p,w,k){},{}],3:[function(p,w,k){(function(d){(function(){"use strict";var e=p("base64-js"),u=p("ieee754");k.Buffer=v,k.SlowBuffer=m,k.INSPECT_MAX_BYTES=50;var s=2147483647;k.kMaxLength=s,v.TYPED_ARRAY_SUPPORT=l(),!v.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var fe=new Uint8Array(1);return fe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},fe.foo()===42}catch{return!1}}Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(!!v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(!!v.isBuffer(this))return this.byteOffset}});function b(fe){if(fe>s)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var ne=new Uint8Array(fe);return ne.__proto__=v.prototype,ne}function v(fe,ne,ie){if(typeof fe=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(fe)}return y(fe,ne,ie)}typeof Symbol<"u"&&Symbol.species!=null&&v[Symbol.species]===v&&Object.defineProperty(v,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),v.poolSize=8192;function y(fe,ne,ie){if(typeof fe=="string")return g(fe,ne);if(ArrayBuffer.isView(fe))return n(fe);if(fe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(ce(fe,ArrayBuffer)||fe&&ce(fe.buffer,ArrayBuffer))return a(fe,ne,ie);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=fe.valueOf&&fe.valueOf();if(me!=null&&me!==fe)return v.from(me,ne,ie);var we=h(fe);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return v.from(fe[Symbol.toPrimitive]("string"),ne,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}v.from=function(fe,ne,ie){return y(fe,ne,ie)},v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array;function T(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function _(fe,ne,ie){return T(fe),fe<=0?b(fe):ne!==void 0?typeof ie=="string"?b(fe).fill(ne,ie):b(fe).fill(ne):b(fe)}v.alloc=function(fe,ne,ie){return _(fe,ne,ie)};function f(fe){return T(fe),b(fe<0?0:c(fe)|0)}v.allocUnsafe=function(fe){return f(fe)},v.allocUnsafeSlow=function(fe){return f(fe)};function g(fe,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!v.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var ie=o(fe,ne)|0,me=b(ie),we=me.write(fe,ne);return we!==ie&&(me=me.slice(0,we)),me}function n(fe){for(var ne=fe.length<0?0:c(fe.length)|0,ie=b(ne),me=0;me<ne;me+=1)ie[me]=fe[me]&255;return ie}function a(fe,ne,ie){if(ne<0||fe.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<ne+(ie||0))throw new RangeError('"length" is outside of buffer bounds');var me;return ne===void 0&&ie===void 0?me=new Uint8Array(fe):ie===void 0?me=new Uint8Array(fe,ne):me=new Uint8Array(fe,ne,ie),me.__proto__=v.prototype,me}function h(fe){if(v.isBuffer(fe)){var ne=c(fe.length)|0,ie=b(ne);return ie.length===0||fe.copy(ie,0,0,ne),ie}if(fe.length!==void 0)return typeof fe.length!="number"||_e(fe.length)?b(0):n(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return n(fe.data)}function c(fe){if(fe>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return fe|0}function m(fe){return+fe!=fe&&(fe=0),v.alloc(+fe)}v.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==v.prototype},v.compare=function(ne,ie){if(ce(ne,Uint8Array)&&(ne=v.from(ne,ne.offset,ne.byteLength)),ce(ie,Uint8Array)&&(ie=v.from(ie,ie.offset,ie.byteLength)),!v.isBuffer(ne)||!v.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===ie)return 0;for(var me=ne.length,we=ie.length,be=0,Me=Math.min(me,we);be<Me;++be)if(ne[be]!==ie[be]){me=ne[be],we=ie[be];break}return me<we?-1:we<me?1:0},v.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(ne,ie){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return v.alloc(0);var me;if(ie===void 0)for(ie=0,me=0;me<ne.length;++me)ie+=ne[me].length;var we=v.allocUnsafe(ie),be=0;for(me=0;me<ne.length;++me){var Me=ne[me];if(ce(Me,Uint8Array)&&(Me=v.from(Me)),!v.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(we,be),be+=Me.length}return we};function o(fe,ne){if(v.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||ce(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);var ie=fe.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ie===0)return 0;for(var we=!1;;)switch(ne){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return $(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie*2;case"hex":return ie>>>1;case"base64":return ve(fe).length;default:if(we)return me?-1:$(fe).length;ne=(""+ne).toLowerCase(),we=!0}}v.byteLength=o;function t(fe,ne,ie){var me=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,ne>>>=0,ie<=ne))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return U(this,ne,ie);case"utf8":case"utf-8":return G(this,ne,ie);case"ascii":return ee(this,ne,ie);case"latin1":case"binary":return Q(this,ne,ie);case"base64":return I(this,ne,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,ne,ie);default:if(me)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),me=!0}}v.prototype._isBuffer=!0;function i(fe,ne,ie){var me=fe[ne];fe[ne]=fe[ie],fe[ie]=me}v.prototype.swap16=function(){var ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<ne;ie+=2)i(this,ie,ie+1);return this},v.prototype.swap32=function(){var ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<ne;ie+=4)i(this,ie,ie+3),i(this,ie+1,ie+2);return this},v.prototype.swap64=function(){var ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<ne;ie+=8)i(this,ie,ie+7),i(this,ie+1,ie+6),i(this,ie+2,ie+5),i(this,ie+3,ie+4);return this},v.prototype.toString=function(){var ne=this.length;return ne===0?"":arguments.length===0?G(this,0,ne):t.apply(this,arguments)},v.prototype.toLocaleString=v.prototype.toString,v.prototype.equals=function(ne){if(!v.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:v.compare(this,ne)===0},v.prototype.inspect=function(){var ne="",ie=k.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(ne+=" ... "),"<Buffer "+ne+">"},v.prototype.compare=function(ne,ie,me,we,be){if(ce(ne,Uint8Array)&&(ne=v.from(ne,ne.offset,ne.byteLength)),!v.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(ie===void 0&&(ie=0),me===void 0&&(me=ne?ne.length:0),we===void 0&&(we=0),be===void 0&&(be=this.length),ie<0||me>ne.length||we<0||be>this.length)throw new RangeError("out of range index");if(we>=be&&ie>=me)return 0;if(we>=be)return-1;if(ie>=me)return 1;if(ie>>>=0,me>>>=0,we>>>=0,be>>>=0,this===ne)return 0;for(var Me=be-we,Ie=me-ie,Ke=Math.min(Me,Ie),Oe=this.slice(we,be),We=ne.slice(ie,me),Fe=0;Fe<Ke;++Fe)if(Oe[Fe]!==We[Fe]){Me=Oe[Fe],Ie=We[Fe];break}return Me<Ie?-1:Ie<Me?1:0};function r(fe,ne,ie,me,we){if(fe.length===0)return-1;if(typeof ie=="string"?(me=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,_e(ie)&&(ie=we?0:fe.length-1),ie<0&&(ie=fe.length+ie),ie>=fe.length){if(we)return-1;ie=fe.length-1}else if(ie<0)if(we)ie=0;else return-1;if(typeof ne=="string"&&(ne=v.from(ne,me)),v.isBuffer(ne))return ne.length===0?-1:x(fe,ne,ie,me,we);if(typeof ne=="number")return ne=ne&255,typeof Uint8Array.prototype.indexOf=="function"?we?Uint8Array.prototype.indexOf.call(fe,ne,ie):Uint8Array.prototype.lastIndexOf.call(fe,ne,ie):x(fe,[ne],ie,me,we);throw new TypeError("val must be string, number or Buffer")}function x(fe,ne,ie,me,we){var be=1,Me=fe.length,Ie=ne.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(fe.length<2||ne.length<2)return-1;be=2,Me/=2,Ie/=2,ie/=2}function Ke(Xe,ut){return be===1?Xe[ut]:Xe.readUInt16BE(ut*be)}var Oe;if(we){var We=-1;for(Oe=ie;Oe<Me;Oe++)if(Ke(fe,Oe)===Ke(ne,We===-1?0:Oe-We)){if(We===-1&&(We=Oe),Oe-We+1===Ie)return We*be}else We!==-1&&(Oe-=Oe-We),We=-1}else for(ie+Ie>Me&&(ie=Me-Ie),Oe=ie;Oe>=0;Oe--){for(var Fe=!0,Ge=0;Ge<Ie;Ge++)if(Ke(fe,Oe+Ge)!==Ke(ne,Ge)){Fe=!1;break}if(Fe)return Oe}return-1}v.prototype.includes=function(ne,ie,me){return this.indexOf(ne,ie,me)!==-1},v.prototype.indexOf=function(ne,ie,me){return r(this,ne,ie,me,!0)},v.prototype.lastIndexOf=function(ne,ie,me){return r(this,ne,ie,me,!1)};function A(fe,ne,ie,me){ie=Number(ie)||0;var we=fe.length-ie;me?(me=Number(me),me>we&&(me=we)):me=we;var be=ne.length;me>be/2&&(me=be/2);for(var Me=0;Me<me;++Me){var Ie=parseInt(ne.substr(Me*2,2),16);if(_e(Ie))return Me;fe[ie+Me]=Ie}return Me}function E(fe,ne,ie,me){return ue($(ne,fe.length-ie),fe,ie,me)}function P(fe,ne,ie,me){return ue(re(ne),fe,ie,me)}function S(fe,ne,ie,me){return P(fe,ne,ie,me)}function C(fe,ne,ie,me){return ue(ve(ne),fe,ie,me)}function M(fe,ne,ie,me){return ue(de(ne,fe.length-ie),fe,ie,me)}v.prototype.write=function(ne,ie,me,we){if(ie===void 0)we="utf8",me=this.length,ie=0;else if(me===void 0&&typeof ie=="string")we=ie,me=this.length,ie=0;else if(isFinite(ie))ie=ie>>>0,isFinite(me)?(me=me>>>0,we===void 0&&(we="utf8")):(we=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var be=this.length-ie;if((me===void 0||me>be)&&(me=be),ne.length>0&&(me<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");for(var Me=!1;;)switch(we){case"hex":return A(this,ne,ie,me);case"utf8":case"utf-8":return E(this,ne,ie,me);case"ascii":return P(this,ne,ie,me);case"latin1":case"binary":return S(this,ne,ie,me);case"base64":return C(this,ne,ie,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,ne,ie,me);default:if(Me)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Me=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(fe,ne,ie){return ne===0&&ie===fe.length?e.fromByteArray(fe):e.fromByteArray(fe.slice(ne,ie))}function G(fe,ne,ie){ie=Math.min(fe.length,ie);for(var me=[],we=ne;we<ie;){var be=fe[we],Me=null,Ie=be>239?4:be>223?3:be>191?2:1;if(we+Ie<=ie){var Ke,Oe,We,Fe;switch(Ie){case 1:be<128&&(Me=be);break;case 2:Ke=fe[we+1],(Ke&192)===128&&(Fe=(be&31)<<6|Ke&63,Fe>127&&(Me=Fe));break;case 3:Ke=fe[we+1],Oe=fe[we+2],(Ke&192)===128&&(Oe&192)===128&&(Fe=(be&15)<<12|(Ke&63)<<6|Oe&63,Fe>2047&&(Fe<55296||Fe>57343)&&(Me=Fe));break;case 4:Ke=fe[we+1],Oe=fe[we+2],We=fe[we+3],(Ke&192)===128&&(Oe&192)===128&&(We&192)===128&&(Fe=(be&15)<<18|(Ke&63)<<12|(Oe&63)<<6|We&63,Fe>65535&&Fe<1114112&&(Me=Fe))}}Me===null?(Me=65533,Ie=1):Me>65535&&(Me-=65536,me.push(Me>>>10&1023|55296),Me=56320|Me&1023),me.push(Me),we+=Ie}return q(me)}var V=4096;function q(fe){var ne=fe.length;if(ne<=V)return String.fromCharCode.apply(String,fe);for(var ie="",me=0;me<ne;)ie+=String.fromCharCode.apply(String,fe.slice(me,me+=V));return ie}function ee(fe,ne,ie){var me="";ie=Math.min(fe.length,ie);for(var we=ne;we<ie;++we)me+=String.fromCharCode(fe[we]&127);return me}function Q(fe,ne,ie){var me="";ie=Math.min(fe.length,ie);for(var we=ne;we<ie;++we)me+=String.fromCharCode(fe[we]);return me}function U(fe,ne,ie){var me=fe.length;(!ne||ne<0)&&(ne=0),(!ie||ie<0||ie>me)&&(ie=me);for(var we="",be=ne;be<ie;++be)we+=W(fe[be]);return we}function O(fe,ne,ie){for(var me=fe.slice(ne,ie),we="",be=0;be<me.length;be+=2)we+=String.fromCharCode(me[be]+me[be+1]*256);return we}v.prototype.slice=function(ne,ie){var me=this.length;ne=~~ne,ie=ie===void 0?me:~~ie,ne<0?(ne+=me,ne<0&&(ne=0)):ne>me&&(ne=me),ie<0?(ie+=me,ie<0&&(ie=0)):ie>me&&(ie=me),ie<ne&&(ie=ne);var we=this.subarray(ne,ie);return we.__proto__=v.prototype,we};function Z(fe,ne,ie){if(fe%1!==0||fe<0)throw new RangeError("offset is not uint");if(fe+ne>ie)throw new RangeError("Trying to access beyond buffer length")}v.prototype.readUIntLE=function(ne,ie,me){ne=ne>>>0,ie=ie>>>0,me||Z(ne,ie,this.length);for(var we=this[ne],be=1,Me=0;++Me<ie&&(be*=256);)we+=this[ne+Me]*be;return we},v.prototype.readUIntBE=function(ne,ie,me){ne=ne>>>0,ie=ie>>>0,me||Z(ne,ie,this.length);for(var we=this[ne+--ie],be=1;ie>0&&(be*=256);)we+=this[ne+--ie]*be;return we},v.prototype.readUInt8=function(ne,ie){return ne=ne>>>0,ie||Z(ne,1,this.length),this[ne]},v.prototype.readUInt16LE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,2,this.length),this[ne]|this[ne+1]<<8},v.prototype.readUInt16BE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,2,this.length),this[ne]<<8|this[ne+1]},v.prototype.readUInt32LE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},v.prototype.readUInt32BE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},v.prototype.readIntLE=function(ne,ie,me){ne=ne>>>0,ie=ie>>>0,me||Z(ne,ie,this.length);for(var we=this[ne],be=1,Me=0;++Me<ie&&(be*=256);)we+=this[ne+Me]*be;return be*=128,we>=be&&(we-=Math.pow(2,8*ie)),we},v.prototype.readIntBE=function(ne,ie,me){ne=ne>>>0,ie=ie>>>0,me||Z(ne,ie,this.length);for(var we=ie,be=1,Me=this[ne+--we];we>0&&(be*=256);)Me+=this[ne+--we]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*ie)),Me},v.prototype.readInt8=function(ne,ie){return ne=ne>>>0,ie||Z(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},v.prototype.readInt16LE=function(ne,ie){ne=ne>>>0,ie||Z(ne,2,this.length);var me=this[ne]|this[ne+1]<<8;return me&32768?me|4294901760:me},v.prototype.readInt16BE=function(ne,ie){ne=ne>>>0,ie||Z(ne,2,this.length);var me=this[ne+1]|this[ne]<<8;return me&32768?me|4294901760:me},v.prototype.readInt32LE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},v.prototype.readInt32BE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},v.prototype.readFloatLE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),u.read(this,ne,!0,23,4)},v.prototype.readFloatBE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,4,this.length),u.read(this,ne,!1,23,4)},v.prototype.readDoubleLE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,8,this.length),u.read(this,ne,!0,52,8)},v.prototype.readDoubleBE=function(ne,ie){return ne=ne>>>0,ie||Z(ne,8,this.length),u.read(this,ne,!1,52,8)};function B(fe,ne,ie,me,we,be){if(!v.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>we||ne<be)throw new RangeError('"value" argument is out of bounds');if(ie+me>fe.length)throw new RangeError("Index out of range")}v.prototype.writeUIntLE=function(ne,ie,me,we){if(ne=+ne,ie=ie>>>0,me=me>>>0,!we){var be=Math.pow(2,8*me)-1;B(this,ne,ie,me,be,0)}var Me=1,Ie=0;for(this[ie]=ne&255;++Ie<me&&(Me*=256);)this[ie+Ie]=ne/Me&255;return ie+me},v.prototype.writeUIntBE=function(ne,ie,me,we){if(ne=+ne,ie=ie>>>0,me=me>>>0,!we){var be=Math.pow(2,8*me)-1;B(this,ne,ie,me,be,0)}var Me=me-1,Ie=1;for(this[ie+Me]=ne&255;--Me>=0&&(Ie*=256);)this[ie+Me]=ne/Ie&255;return ie+me},v.prototype.writeUInt8=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,1,255,0),this[ie]=ne&255,ie+1},v.prototype.writeUInt16LE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,2,65535,0),this[ie]=ne&255,this[ie+1]=ne>>>8,ie+2},v.prototype.writeUInt16BE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,2,65535,0),this[ie]=ne>>>8,this[ie+1]=ne&255,ie+2},v.prototype.writeUInt32LE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,4,4294967295,0),this[ie+3]=ne>>>24,this[ie+2]=ne>>>16,this[ie+1]=ne>>>8,this[ie]=ne&255,ie+4},v.prototype.writeUInt32BE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,4,4294967295,0),this[ie]=ne>>>24,this[ie+1]=ne>>>16,this[ie+2]=ne>>>8,this[ie+3]=ne&255,ie+4},v.prototype.writeIntLE=function(ne,ie,me,we){if(ne=+ne,ie=ie>>>0,!we){var be=Math.pow(2,8*me-1);B(this,ne,ie,me,be-1,-be)}var Me=0,Ie=1,Ke=0;for(this[ie]=ne&255;++Me<me&&(Ie*=256);)ne<0&&Ke===0&&this[ie+Me-1]!==0&&(Ke=1),this[ie+Me]=(ne/Ie>>0)-Ke&255;return ie+me},v.prototype.writeIntBE=function(ne,ie,me,we){if(ne=+ne,ie=ie>>>0,!we){var be=Math.pow(2,8*me-1);B(this,ne,ie,me,be-1,-be)}var Me=me-1,Ie=1,Ke=0;for(this[ie+Me]=ne&255;--Me>=0&&(Ie*=256);)ne<0&&Ke===0&&this[ie+Me+1]!==0&&(Ke=1),this[ie+Me]=(ne/Ie>>0)-Ke&255;return ie+me},v.prototype.writeInt8=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,1,127,-128),ne<0&&(ne=255+ne+1),this[ie]=ne&255,ie+1},v.prototype.writeInt16LE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,2,32767,-32768),this[ie]=ne&255,this[ie+1]=ne>>>8,ie+2},v.prototype.writeInt16BE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,2,32767,-32768),this[ie]=ne>>>8,this[ie+1]=ne&255,ie+2},v.prototype.writeInt32LE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,4,2147483647,-2147483648),this[ie]=ne&255,this[ie+1]=ne>>>8,this[ie+2]=ne>>>16,this[ie+3]=ne>>>24,ie+4},v.prototype.writeInt32BE=function(ne,ie,me){return ne=+ne,ie=ie>>>0,me||B(this,ne,ie,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[ie]=ne>>>24,this[ie+1]=ne>>>16,this[ie+2]=ne>>>8,this[ie+3]=ne&255,ie+4};function Y(fe,ne,ie,me,we,be){if(ie+me>fe.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function j(fe,ne,ie,me,we){return ne=+ne,ie=ie>>>0,we||Y(fe,ne,ie,4,34028234663852886e22,-34028234663852886e22),u.write(fe,ne,ie,me,23,4),ie+4}v.prototype.writeFloatLE=function(ne,ie,me){return j(this,ne,ie,!0,me)},v.prototype.writeFloatBE=function(ne,ie,me){return j(this,ne,ie,!1,me)};function X(fe,ne,ie,me,we){return ne=+ne,ie=ie>>>0,we||Y(fe,ne,ie,8,17976931348623157e292,-17976931348623157e292),u.write(fe,ne,ie,me,52,8),ie+8}v.prototype.writeDoubleLE=function(ne,ie,me){return X(this,ne,ie,!0,me)},v.prototype.writeDoubleBE=function(ne,ie,me){return X(this,ne,ie,!1,me)},v.prototype.copy=function(ne,ie,me,we){if(!v.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(me||(me=0),!we&&we!==0&&(we=this.length),ie>=ne.length&&(ie=ne.length),ie||(ie=0),we>0&&we<me&&(we=me),we===me||ne.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),ne.length-ie<we-me&&(we=ne.length-ie+me);var be=we-me;if(this===ne&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ie,me,we);else if(this===ne&&me<ie&&ie<we)for(var Me=be-1;Me>=0;--Me)ne[Me+ie]=this[Me+me];else Uint8Array.prototype.set.call(ne,this.subarray(me,we),ie);return be},v.prototype.fill=function(ne,ie,me,we){if(typeof ne=="string"){if(typeof ie=="string"?(we=ie,ie=0,me=this.length):typeof me=="string"&&(we=me,me=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!v.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(ne.length===1){var be=ne.charCodeAt(0);(we==="utf8"&&be<128||we==="latin1")&&(ne=be)}}else typeof ne=="number"&&(ne=ne&255);if(ie<0||this.length<ie||this.length<me)throw new RangeError("Out of range index");if(me<=ie)return this;ie=ie>>>0,me=me===void 0?this.length:me>>>0,ne||(ne=0);var Me;if(typeof ne=="number")for(Me=ie;Me<me;++Me)this[Me]=ne;else{var Ie=v.isBuffer(ne)?ne:v.from(ne,we),Ke=Ie.length;if(Ke===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(Me=0;Me<me-ie;++Me)this[Me+ie]=Ie[Me%Ke]}return this};var H=/[^+/0-9A-Za-z-_]/g;function K(fe){if(fe=fe.split("=")[0],fe=fe.trim().replace(H,""),fe.length<2)return"";for(;fe.length%4!==0;)fe=fe+"=";return fe}function W(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function $(fe,ne){ne=ne||1/0;for(var ie,me=fe.length,we=null,be=[],Me=0;Me<me;++Me){if(ie=fe.charCodeAt(Me),ie>55295&&ie<57344){if(!we){if(ie>56319){(ne-=3)>-1&&be.push(239,191,189);continue}else if(Me+1===me){(ne-=3)>-1&&be.push(239,191,189);continue}we=ie;continue}if(ie<56320){(ne-=3)>-1&&be.push(239,191,189),we=ie;continue}ie=(we-55296<<10|ie-56320)+65536}else we&&(ne-=3)>-1&&be.push(239,191,189);if(we=null,ie<128){if((ne-=1)<0)break;be.push(ie)}else if(ie<2048){if((ne-=2)<0)break;be.push(ie>>6|192,ie&63|128)}else if(ie<65536){if((ne-=3)<0)break;be.push(ie>>12|224,ie>>6&63|128,ie&63|128)}else if(ie<1114112){if((ne-=4)<0)break;be.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,ie&63|128)}else throw new Error("Invalid code point")}return be}function re(fe){for(var ne=[],ie=0;ie<fe.length;++ie)ne.push(fe.charCodeAt(ie)&255);return ne}function de(fe,ne){for(var ie,me,we,be=[],Me=0;Me<fe.length&&!((ne-=2)<0);++Me)ie=fe.charCodeAt(Me),me=ie>>8,we=ie%256,be.push(we),be.push(me);return be}function ve(fe){return e.toByteArray(K(fe))}function ue(fe,ne,ie,me){for(var we=0;we<me&&!(we+ie>=ne.length||we>=fe.length);++we)ne[we+ie]=fe[we];return we}function ce(fe,ne){return fe instanceof ne||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===ne.name}function _e(fe){return fe!==fe}}).call(this)}).call(this,p("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(p,w,k){k.read=function(d,e,u,s,l){var b,v,y=l*8-s-1,T=(1<<y)-1,_=T>>1,f=-7,g=u?l-1:0,n=u?-1:1,a=d[e+g];for(g+=n,b=a&(1<<-f)-1,a>>=-f,f+=y;f>0;b=b*256+d[e+g],g+=n,f-=8);for(v=b&(1<<-f)-1,b>>=-f,f+=s;f>0;v=v*256+d[e+g],g+=n,f-=8);if(b===0)b=1-_;else{if(b===T)return v?NaN:(a?-1:1)*(1/0);v=v+Math.pow(2,s),b=b-_}return(a?-1:1)*v*Math.pow(2,b-s)},k.write=function(d,e,u,s,l,b){var v,y,T,_=b*8-l-1,f=(1<<_)-1,g=f>>1,n=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=s?0:b-1,h=s?1:-1,c=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,v=f):(v=Math.floor(Math.log(e)/Math.LN2),e*(T=Math.pow(2,-v))<1&&(v--,T*=2),v+g>=1?e+=n/T:e+=n*Math.pow(2,1-g),e*T>=2&&(v++,T/=2),v+g>=f?(y=0,v=f):v+g>=1?(y=(e*T-1)*Math.pow(2,l),v=v+g):(y=e*Math.pow(2,g-1)*Math.pow(2,l),v=0));l>=8;d[u+a]=y&255,a+=h,y/=256,l-=8);for(v=v<<l|y,_+=l;_>0;d[u+a]=v&255,a+=h,v/=256,_-=8);d[u+a-h]|=c*128}},{}],5:[function(p,w,k){var d=w.exports={},e,u;function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=s}catch{e=s}try{typeof clearTimeout=="function"?u=clearTimeout:u=l}catch{u=l}})();function b(c){if(e===setTimeout)return setTimeout(c,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(c,0);try{return e(c,0)}catch{try{return e.call(null,c,0)}catch{return e.call(this,c,0)}}}function v(c){if(u===clearTimeout)return clearTimeout(c);if((u===l||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(c);try{return u(c)}catch{try{return u.call(null,c)}catch{return u.call(this,c)}}}var y=[],T=!1,_,f=-1;function g(){!T||!_||(T=!1,_.length?y=_.concat(y):f=-1,y.length&&n())}function n(){if(!T){var c=b(g);T=!0;for(var m=y.length;m;){for(_=y,y=[];++f<m;)_&&_[f].run();f=-1,m=y.length}_=null,T=!1,v(c)}}d.nextTick=function(c){var m=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)m[o-1]=arguments[o];y.push(new a(c,m)),y.length===1&&!T&&b(n)};function a(c,m){this.fun=c,this.array=m}a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function h(){}d.on=h,d.addListener=h,d.once=h,d.off=h,d.removeListener=h,d.removeAllListeners=h,d.emit=h,d.prependListener=h,d.prependOnceListener=h,d.listeners=function(c){return[]},d.binding=function(c){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(c){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],6:[function(p,w,k){w.exports={alpha_shape:p("alpha-shape"),convex_hull:p("convex-hull"),delaunay_triangulate:p("delaunay-triangulate"),gl_cone3d:p("gl-cone3d"),gl_error3d:p("gl-error3d"),gl_heatmap2d:p("gl-heatmap2d"),gl_line3d:p("gl-line3d"),gl_mesh3d:p("gl-mesh3d"),gl_plot2d:p("gl-plot2d"),gl_plot3d:p("gl-plot3d"),gl_pointcloud2d:p("gl-pointcloud2d"),gl_scatter3d:p("gl-scatter3d"),gl_select_box:p("gl-select-box"),gl_spikes2d:p("gl-spikes2d"),gl_streamtube3d:p("gl-streamtube3d"),gl_surface3d:p("gl-surface3d"),ndarray:p("ndarray"),ndarray_linear_interpolate:p("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(p,w,k){"use strict";w.exports=b;var d=p("turntable-camera-controller"),e=p("orbit-camera-controller"),u=p("matrix-camera-controller");function s(v,y){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(T){return v[T]}),this._mode=y,this._active=v[y],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=s.prototype;l.flush=function(v){for(var y=this._controllerList,T=0;T<y.length;++T)y[T].flush(v)},l.idle=function(v){for(var y=this._controllerList,T=0;T<y.length;++T)y[T].idle(v)},l.lookAt=function(v,y,T,_){for(var f=this._controllerList,g=0;g<f.length;++g)f[g].lookAt(v,y,T,_)},l.rotate=function(v,y,T,_){for(var f=this._controllerList,g=0;g<f.length;++g)f[g].rotate(v,y,T,_)},l.pan=function(v,y,T,_){for(var f=this._controllerList,g=0;g<f.length;++g)f[g].pan(v,y,T,_)},l.translate=function(v,y,T,_){for(var f=this._controllerList,g=0;g<f.length;++g)f[g].translate(v,y,T,_)},l.setMatrix=function(v,y){for(var T=this._controllerList,_=0;_<T.length;++_)T[_].setMatrix(v,y)},l.setDistanceLimits=function(v,y){for(var T=this._controllerList,_=0;_<T.length;++_)T[_].setDistanceLimits(v,y)},l.setDistance=function(v,y){for(var T=this._controllerList,_=0;_<T.length;++_)T[_].setDistance(v,y)},l.recalcMatrix=function(v){this._active.recalcMatrix(v)},l.getDistance=function(v){return this._active.getDistance(v)},l.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},l.lastT=function(){return this._active.lastT()},l.setMode=function(v){if(v!==this._mode){var y=this._controllerNames.indexOf(v);if(!(y<0)){var T=this._active,_=this._controllerList[y],f=Math.max(T.lastT(),_.lastT());T.recalcMatrix(f),_.setMatrix(f,T.computedMatrix),this._active=_,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode};function b(v){v=v||{};var y=v.eye||[0,0,1],T=v.center||[0,0,0],_=v.up||[0,1,0],f=v.distanceLimits||[0,1/0],g=v.mode||"turntable",n=d(),a=e(),h=u();return n.setDistanceLimits(f[0],f[1]),n.lookAt(0,y,T,_),a.setDistanceLimits(f[0],f[1]),a.lookAt(0,y,T,_),h.setDistanceLimits(f[0],f[1]),h.lookAt(0,y,T,_),new s({turntable:n,orbit:a,matrix:h},g)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(p,w,k){"use strict";var d=typeof WeakMap>"u"?p("weak-map"):WeakMap,e=p("gl-buffer"),u=p("gl-vao"),s=new d;function l(b){var v=s.get(b),y=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!y||!b.isBuffer(y)){var T=e(b,new Float32Array([-1,-1,-1,4,4,-1]));v=u(b,[{buffer:T,type:b.FLOAT,size:2}]),v._triangleBuffer=T,s.set(b,v)}v.bind(),b.drawArrays(b.TRIANGLES,0,3),v.unbind()}w.exports=l},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(p,w,k){var d=p("pad-left");w.exports=e;function e(u,s,l){s=typeof s=="number"?s:1,l=l||": ";var b=u.split(/\r?\n/),v=String(b.length+s-1).length;return b.map(function(y,T){var _=T+s,f=String(_).length,g=d(_,v-f);return g+l+y}).join(`
`)}},{"pad-left":264}],10:[function(p,w,k){"use strict";w.exports=u;var d=p("robust-orientation");function e(s,l){for(var b=new Array(l+1),v=0;v<s.length;++v)b[v]=s[v];for(var v=0;v<=s.length;++v){for(var y=s.length;y<=l;++y){for(var T=new Array(l),_=0;_<l;++_)T[_]=Math.pow(y+1-v,_);b[y]=T}var f=d.apply(void 0,b);if(f)return!0}return!1}function u(s){var l=s.length;if(l===0)return[];if(l===1)return[0];for(var b=s[0].length,v=[s[0]],y=[0],T=1;T<l;++T){if(v.push(s[T]),!e(v,b)){v.pop();continue}if(y.push(T),y.length===b+1)return y}return y}},{"robust-orientation":284}],11:[function(p,w,k){"use strict";w.exports=u;var d=p("delaunay-triangulate"),e=p("circumradius");function u(s,l){return d(l).filter(function(b){for(var v=new Array(b.length),y=0;y<b.length;++y)v[y]=l[b[y]];return e(v)*s<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(p,w,k){w.exports=u;var d=p("alpha-complex"),e=p("simplicial-complex-boundary");function u(s,l){return e(d(s,l))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(p,w,k){w.exports=function(e){return atob(e)}},{}],14:[function(p,w,k){"use strict";w.exports=u;var d=p("robust-linear-solve");function e(s){for(var l=0,b=0;b<s.length;++b)l+=s[b];return l}function u(s,l){for(var b=l.length,v=new Array(b+1),y=0;y<b;++y){for(var T=new Array(b+1),_=0;_<=b;++_)T[_]=s[_][y];v[y]=T}v[b]=new Array(b+1);for(var y=0;y<=b;++y)v[b][y]=1;for(var f=new Array(b+1),y=0;y<b;++y)f[y]=l[y];f[b]=1;var g=d(v,f),n=e(g[b+1]);n===0&&(n=1);for(var a=new Array(b+1),y=0;y<=b;++y)a[y]=e(g[y])/n;return a}},{"robust-linear-solve":283}],15:[function(p,w,k){"use strict";var d=p("./lib/rationalize");w.exports=e;function e(u,s){return d(u[0].mul(s[1]).add(s[0].mul(u[1])),u[1].mul(s[1]))}},{"./lib/rationalize":25}],16:[function(p,w,k){"use strict";w.exports=d;function d(e,u){return e[0].mul(u[1]).cmp(u[0].mul(e[1]))}},{}],17:[function(p,w,k){"use strict";var d=p("./lib/rationalize");w.exports=e;function e(u,s){return d(u[0].mul(s[1]),u[1].mul(s[0]))}},{"./lib/rationalize":25}],18:[function(p,w,k){"use strict";var d=p("./is-rat"),e=p("./lib/is-bn"),u=p("./lib/num-to-bn"),s=p("./lib/str-to-bn"),l=p("./lib/rationalize"),b=p("./div");w.exports=v;function v(y,T){if(d(y))return T?b(y,v(T)):[y[0].clone(),y[1].clone()];var _=0,f,g;if(e(y))f=y.clone();else if(typeof y=="string")f=s(y);else{if(y===0)return[u(0),u(1)];if(y===Math.floor(y))f=u(y);else{for(;y!==Math.floor(y);)y=y*Math.pow(2,256),_-=256;f=u(y)}}if(d(T))f.mul(T[1]),g=T[0].clone();else if(e(T))g=T.clone();else if(typeof T=="string")g=s(T);else if(!T)g=u(1);else if(T===Math.floor(T))g=u(T);else{for(;T!==Math.floor(T);)T=T*Math.pow(2,256),_+=256;g=u(T)}return _>0?f=f.ushln(_):_<0&&(g=g.ushln(-_)),l(f,g)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(p,w,k){"use strict";var d=p("./lib/is-bn");w.exports=e;function e(u){return Array.isArray(u)&&u.length===2&&d(u[0])&&d(u[1])}},{"./lib/is-bn":23}],20:[function(p,w,k){"use strict";var d=p("bn.js");w.exports=e;function e(u){return u.cmp(new d(0))}},{"bn.js":33}],21:[function(p,w,k){"use strict";var d=p("./bn-sign");w.exports=e;function e(u){var s=u.length,l=u.words,b=0;if(s===1)b=l[0];else if(s===2)b=l[0]+l[1]*67108864;else for(var v=0;v<s;v++){var y=l[v];b+=y*Math.pow(67108864,v)}return d(u)*b}},{"./bn-sign":20}],22:[function(p,w,k){"use strict";var d=p("double-bits"),e=p("bit-twiddle").countTrailingZeros;w.exports=u;function u(s){var l=e(d.lo(s));if(l<32)return l;var b=e(d.hi(s));return b>20?52:b+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(p,w,k){"use strict";var d=p("bn.js");w.exports=e;function e(u){return u&&typeof u=="object"&&Boolean(u.words)}},{"bn.js":33}],24:[function(p,w,k){"use strict";var d=p("bn.js"),e=p("double-bits");w.exports=u;function u(s){var l=e.exponent(s);return l<52?new d(s):new d(s*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(p,w,k){"use strict";var d=p("./num-to-bn"),e=p("./bn-sign");w.exports=u;function u(s,l){var b=e(s),v=e(l);if(b===0)return[d(0),d(1)];if(v===0)return[d(0),d(0)];v<0&&(s=s.neg(),l=l.neg());var y=s.gcd(l);return y.cmpn(1)?[s.div(y),l.div(y)]:[s,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(p,w,k){"use strict";var d=p("bn.js");w.exports=e;function e(u){return new d(u)}},{"bn.js":33}],27:[function(p,w,k){"use strict";var d=p("./lib/rationalize");w.exports=e;function e(u,s){return d(u[0].mul(s[0]),u[1].mul(s[1]))}},{"./lib/rationalize":25}],28:[function(p,w,k){"use strict";var d=p("./lib/bn-sign");w.exports=e;function e(u){return d(u[0])*d(u[1])}},{"./lib/bn-sign":20}],29:[function(p,w,k){"use strict";var d=p("./lib/rationalize");w.exports=e;function e(u,s){return d(u[0].mul(s[1]).sub(u[1].mul(s[0])),u[1].mul(s[1]))}},{"./lib/rationalize":25}],30:[function(p,w,k){"use strict";var d=p("./lib/bn-to-num"),e=p("./lib/ctz");w.exports=u;function u(s){var l=s[0],b=s[1];if(l.cmpn(0)===0)return 0;var v=l.abs().divmod(b.abs()),y=v.div,T=d(y),_=v.mod,f=l.negative!==b.negative?-1:1;if(_.cmpn(0)===0)return f*T;if(T){var g=e(T)+4,n=d(_.ushln(g).divRound(b));return f*(T+n*Math.pow(2,-g))}else{var a=b.bitLength()-_.bitLength()+53,n=d(_.ushln(a).divRound(b));return a<1023?f*n*Math.pow(2,-a):(n*=Math.pow(2,-1023),f*n*Math.pow(2,1023-a))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(p,w,k){"use strict";function d(v,y,T,_,f){for(var g=f+1;_<=f;){var n=_+f>>>1,a=v[n],h=T!==void 0?T(a,y):a-y;h>=0?(g=n,f=n-1):_=n+1}return g}function e(v,y,T,_,f){for(var g=f+1;_<=f;){var n=_+f>>>1,a=v[n],h=T!==void 0?T(a,y):a-y;h>0?(g=n,f=n-1):_=n+1}return g}function u(v,y,T,_,f){for(var g=_-1;_<=f;){var n=_+f>>>1,a=v[n],h=T!==void 0?T(a,y):a-y;h<0?(g=n,_=n+1):f=n-1}return g}function s(v,y,T,_,f){for(var g=_-1;_<=f;){var n=_+f>>>1,a=v[n],h=T!==void 0?T(a,y):a-y;h<=0?(g=n,_=n+1):f=n-1}return g}function l(v,y,T,_,f){for(;_<=f;){var g=_+f>>>1,n=v[g],a=T!==void 0?T(n,y):n-y;if(a===0)return g;a<=0?_=g+1:f=g-1}return-1}function b(v,y,T,_,f,g){return typeof T=="function"?g(v,y,T,_===void 0?0:_|0,f===void 0?v.length-1:f|0):g(v,y,void 0,T===void 0?0:T|0,_===void 0?v.length-1:_|0)}w.exports={ge:function(v,y,T,_,f){return b(v,y,T,_,f,d)},gt:function(v,y,T,_,f){return b(v,y,T,_,f,e)},lt:function(v,y,T,_,f){return b(v,y,T,_,f,u)},le:function(v,y,T,_,f){return b(v,y,T,_,f,s)},eq:function(v,y,T,_,f){return b(v,y,T,_,f,l)}}},{}],32:[function(p,w,k){"use strict";var d=32;k.INT_BITS=d,k.INT_MAX=2147483647,k.INT_MIN=-1<<d-1,k.sign=function(s){return(s>0)-(s<0)},k.abs=function(s){var l=s>>d-1;return(s^l)-l},k.min=function(s,l){return l^(s^l)&-(s<l)},k.max=function(s,l){return s^(s^l)&-(s<l)},k.isPow2=function(s){return!(s&s-1)&&!!s},k.log2=function(s){var l,b;return l=(s>65535)<<4,s>>>=l,b=(s>255)<<3,s>>>=b,l|=b,b=(s>15)<<2,s>>>=b,l|=b,b=(s>3)<<1,s>>>=b,l|=b,l|s>>1},k.log10=function(s){return s>=1e9?9:s>=1e8?8:s>=1e7?7:s>=1e6?6:s>=1e5?5:s>=1e4?4:s>=1e3?3:s>=100?2:s>=10?1:0},k.popCount=function(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),(s+(s>>>4)&252645135)*16843009>>>24};function e(s){var l=32;return s&=-s,s&&l--,s&65535&&(l-=16),s&16711935&&(l-=8),s&252645135&&(l-=4),s&858993459&&(l-=2),s&1431655765&&(l-=1),l}k.countTrailingZeros=e,k.nextPow2=function(s){return s+=s===0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1},k.prevPow2=function(s){return s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s-(s>>>1)},k.parity=function(s){return s^=s>>>16,s^=s>>>8,s^=s>>>4,s&=15,27030>>>s&1};var u=new Array(256);(function(s){for(var l=0;l<256;++l){var b=l,v=l,y=7;for(b>>>=1;b;b>>>=1)v<<=1,v|=b&1,--y;s[l]=v<<y&255}})(u),k.reverse=function(s){return u[s&255]<<24|u[s>>>8&255]<<16|u[s>>>16&255]<<8|u[s>>>24&255]},k.interleave2=function(s,l){return s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,s|l<<1},k.deinterleave2=function(s,l){return s=s>>>l&1431655765,s=(s|s>>>1)&858993459,s=(s|s>>>2)&252645135,s=(s|s>>>4)&16711935,s=(s|s>>>16)&65535,s<<16>>16},k.interleave3=function(s,l,b){return s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,s|=l<<1,b&=1023,b=(b|b<<16)&4278190335,b=(b|b<<8)&251719695,b=(b|b<<4)&3272356035,b=(b|b<<2)&1227133513,s|b<<2},k.deinterleave3=function(s,l){return s=s>>>l&1227133513,s=(s|s>>>2)&3272356035,s=(s|s>>>4)&251719695,s=(s|s>>>8)&4278190335,s=(s|s>>>16)&1023,s<<22>>22},k.nextCombination=function(s){var l=s|s-1;return l+1|(~l&-~l)-1>>>e(s)+1}},{}],33:[function(p,w,k){(function(d,e){"use strict";function u(C,M){if(!C)throw new Error(M||"Assertion failed")}function s(C,M){C.super_=M;var I=function(){};I.prototype=M.prototype,C.prototype=new I,C.prototype.constructor=C}function l(C,M,I){if(l.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((M==="le"||M==="be")&&(I=M,M=10),this._init(C||0,M||10,I||"be"))}typeof d=="object"?d.exports=l:e.BN=l,l.BN=l,l.wordSize=26;var b;try{typeof window<"u"&&typeof window.Buffer<"u"?b=window.Buffer:b=p("buffer").Buffer}catch{}l.isBN=function(M){return M instanceof l?!0:M!==null&&typeof M=="object"&&M.constructor.wordSize===l.wordSize&&Array.isArray(M.words)},l.max=function(M,I){return M.cmp(I)>0?M:I},l.min=function(M,I){return M.cmp(I)<0?M:I},l.prototype._init=function(M,I,G){if(typeof M=="number")return this._initNumber(M,I,G);if(typeof M=="object")return this._initArray(M,I,G);I==="hex"&&(I=16),u(I===(I|0)&&I>=2&&I<=36),M=M.toString().replace(/\s+/g,"");var V=0;M[0]==="-"&&(V++,this.negative=1),V<M.length&&(I===16?this._parseHex(M,V,G):(this._parseBase(M,I,V),G==="le"&&this._initArray(this.toArray(),I,G)))},l.prototype._initNumber=function(M,I,G){M<0&&(this.negative=1,M=-M),M<67108864?(this.words=[M&67108863],this.length=1):M<4503599627370496?(this.words=[M&67108863,M/67108864&67108863],this.length=2):(u(M<9007199254740992),this.words=[M&67108863,M/67108864&67108863,1],this.length=3),G==="le"&&this._initArray(this.toArray(),I,G)},l.prototype._initArray=function(M,I,G){if(u(typeof M.length=="number"),M.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(M.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var q,ee,Q=0;if(G==="be")for(V=M.length-1,q=0;V>=0;V-=3)ee=M[V]|M[V-1]<<8|M[V-2]<<16,this.words[q]|=ee<<Q&67108863,this.words[q+1]=ee>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,q++);else if(G==="le")for(V=0,q=0;V<M.length;V+=3)ee=M[V]|M[V+1]<<8|M[V+2]<<16,this.words[q]|=ee<<Q&67108863,this.words[q+1]=ee>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,q++);return this.strip()};function v(C,M){var I=C.charCodeAt(M);return I>=65&&I<=70?I-55:I>=97&&I<=102?I-87:I-48&15}function y(C,M,I){var G=v(C,I);return I-1>=M&&(G|=v(C,I-1)<<4),G}l.prototype._parseHex=function(M,I,G){this.length=Math.ceil((M.length-I)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var q=0,ee=0,Q;if(G==="be")for(V=M.length-1;V>=I;V-=2)Q=y(M,I,V)<<q,this.words[ee]|=Q&67108863,q>=18?(q-=18,ee+=1,this.words[ee]|=Q>>>26):q+=8;else{var U=M.length-I;for(V=U%2===0?I+1:I;V<M.length;V+=2)Q=y(M,I,V)<<q,this.words[ee]|=Q&67108863,q>=18?(q-=18,ee+=1,this.words[ee]|=Q>>>26):q+=8}this.strip()};function T(C,M,I,G){for(var V=0,q=Math.min(C.length,I),ee=M;ee<q;ee++){var Q=C.charCodeAt(ee)-48;V*=G,Q>=49?V+=Q-49+10:Q>=17?V+=Q-17+10:V+=Q}return V}l.prototype._parseBase=function(M,I,G){this.words=[0],this.length=1;for(var V=0,q=1;q<=67108863;q*=I)V++;V--,q=q/I|0;for(var ee=M.length-G,Q=ee%V,U=Math.min(ee,ee-Q)+G,O=0,Z=G;Z<U;Z+=V)O=T(M,Z,Z+V,I),this.imuln(q),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(Q!==0){var B=1;for(O=T(M,Z,M.length,I),Z=0;Z<Q;Z++)B*=I;this.imuln(B),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this.strip()},l.prototype.copy=function(M){M.words=new Array(this.length);for(var I=0;I<this.length;I++)M.words[I]=this.words[I];M.length=this.length,M.negative=this.negative,M.red=this.red},l.prototype.clone=function(){var M=new l(null);return this.copy(M),M},l.prototype._expand=function(M){for(;this.length<M;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(M,I){M=M||10,I=I|0||1;var G;if(M===16||M==="hex"){G="";for(var V=0,q=0,ee=0;ee<this.length;ee++){var Q=this.words[ee],U=((Q<<V|q)&16777215).toString(16);q=Q>>>24-V&16777215,q!==0||ee!==this.length-1?G=_[6-U.length]+U+G:G=U+G,V+=2,V>=26&&(V-=26,ee--)}for(q!==0&&(G=q.toString(16)+G);G.length%I!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}if(M===(M|0)&&M>=2&&M<=36){var O=f[M],Z=g[M];G="";var B=this.clone();for(B.negative=0;!B.isZero();){var Y=B.modn(Z).toString(M);B=B.idivn(Z),B.isZero()?G=Y+G:G=_[O-Y.length]+Y+G}for(this.isZero()&&(G="0"+G);G.length%I!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}u(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var M=this.words[0];return this.length===2?M+=this.words[1]*67108864:this.length===3&&this.words[2]===1?M+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-M:M},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(M,I){return u(typeof b<"u"),this.toArrayLike(b,M,I)},l.prototype.toArray=function(M,I){return this.toArrayLike(Array,M,I)},l.prototype.toArrayLike=function(M,I,G){var V=this.byteLength(),q=G||Math.max(1,V);u(V<=q,"byte array longer than desired length"),u(q>0,"Requested array length <= 0"),this.strip();var ee=I==="le",Q=new M(q),U,O,Z=this.clone();if(ee){for(O=0;!Z.isZero();O++)U=Z.andln(255),Z.iushrn(8),Q[O]=U;for(;O<q;O++)Q[O]=0}else{for(O=0;O<q-V;O++)Q[O]=0;for(O=0;!Z.isZero();O++)U=Z.andln(255),Z.iushrn(8),Q[q-O-1]=U}return Q},Math.clz32?l.prototype._countBits=function(M){return 32-Math.clz32(M)}:l.prototype._countBits=function(M){var I=M,G=0;return I>=4096&&(G+=13,I>>>=13),I>=64&&(G+=7,I>>>=7),I>=8&&(G+=4,I>>>=4),I>=2&&(G+=2,I>>>=2),G+I},l.prototype._zeroBits=function(M){if(M===0)return 26;var I=M,G=0;return(I&8191)===0&&(G+=13,I>>>=13),(I&127)===0&&(G+=7,I>>>=7),(I&15)===0&&(G+=4,I>>>=4),(I&3)===0&&(G+=2,I>>>=2),(I&1)===0&&G++,G},l.prototype.bitLength=function(){var M=this.words[this.length-1],I=this._countBits(M);return(this.length-1)*26+I};function n(C){for(var M=new Array(C.bitLength()),I=0;I<M.length;I++){var G=I/26|0,V=I%26;M[I]=(C.words[G]&1<<V)>>>V}return M}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var M=0,I=0;I<this.length;I++){var G=this._zeroBits(this.words[I]);if(M+=G,G!==26)break}return M},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(M){return this.negative!==0?this.abs().inotn(M).iaddn(1):this.clone()},l.prototype.fromTwos=function(M){return this.testn(M-1)?this.notn(M).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(M){for(;this.length<M.length;)this.words[this.length++]=0;for(var I=0;I<M.length;I++)this.words[I]=this.words[I]|M.words[I];return this.strip()},l.prototype.ior=function(M){return u((this.negative|M.negative)===0),this.iuor(M)},l.prototype.or=function(M){return this.length>M.length?this.clone().ior(M):M.clone().ior(this)},l.prototype.uor=function(M){return this.length>M.length?this.clone().iuor(M):M.clone().iuor(this)},l.prototype.iuand=function(M){var I;this.length>M.length?I=M:I=this;for(var G=0;G<I.length;G++)this.words[G]=this.words[G]&M.words[G];return this.length=I.length,this.strip()},l.prototype.iand=function(M){return u((this.negative|M.negative)===0),this.iuand(M)},l.prototype.and=function(M){return this.length>M.length?this.clone().iand(M):M.clone().iand(this)},l.prototype.uand=function(M){return this.length>M.length?this.clone().iuand(M):M.clone().iuand(this)},l.prototype.iuxor=function(M){var I,G;this.length>M.length?(I=this,G=M):(I=M,G=this);for(var V=0;V<G.length;V++)this.words[V]=I.words[V]^G.words[V];if(this!==I)for(;V<I.length;V++)this.words[V]=I.words[V];return this.length=I.length,this.strip()},l.prototype.ixor=function(M){return u((this.negative|M.negative)===0),this.iuxor(M)},l.prototype.xor=function(M){return this.length>M.length?this.clone().ixor(M):M.clone().ixor(this)},l.prototype.uxor=function(M){return this.length>M.length?this.clone().iuxor(M):M.clone().iuxor(this)},l.prototype.inotn=function(M){u(typeof M=="number"&&M>=0);var I=Math.ceil(M/26)|0,G=M%26;this._expand(I),G>0&&I--;for(var V=0;V<I;V++)this.words[V]=~this.words[V]&67108863;return G>0&&(this.words[V]=~this.words[V]&67108863>>26-G),this.strip()},l.prototype.notn=function(M){return this.clone().inotn(M)},l.prototype.setn=function(M,I){u(typeof M=="number"&&M>=0);var G=M/26|0,V=M%26;return this._expand(G+1),I?this.words[G]=this.words[G]|1<<V:this.words[G]=this.words[G]&~(1<<V),this.strip()},l.prototype.iadd=function(M){var I;if(this.negative!==0&&M.negative===0)return this.negative=0,I=this.isub(M),this.negative^=1,this._normSign();if(this.negative===0&&M.negative!==0)return M.negative=0,I=this.isub(M),M.negative=1,I._normSign();var G,V;this.length>M.length?(G=this,V=M):(G=M,V=this);for(var q=0,ee=0;ee<V.length;ee++)I=(G.words[ee]|0)+(V.words[ee]|0)+q,this.words[ee]=I&67108863,q=I>>>26;for(;q!==0&&ee<G.length;ee++)I=(G.words[ee]|0)+q,this.words[ee]=I&67108863,q=I>>>26;if(this.length=G.length,q!==0)this.words[this.length]=q,this.length++;else if(G!==this)for(;ee<G.length;ee++)this.words[ee]=G.words[ee];return this},l.prototype.add=function(M){var I;return M.negative!==0&&this.negative===0?(M.negative=0,I=this.sub(M),M.negative^=1,I):M.negative===0&&this.negative!==0?(this.negative=0,I=M.sub(this),this.negative=1,I):this.length>M.length?this.clone().iadd(M):M.clone().iadd(this)},l.prototype.isub=function(M){if(M.negative!==0){M.negative=0;var I=this.iadd(M);return M.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(M),this.negative=1,this._normSign();var G=this.cmp(M);if(G===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,q;G>0?(V=this,q=M):(V=M,q=this);for(var ee=0,Q=0;Q<q.length;Q++)I=(V.words[Q]|0)-(q.words[Q]|0)+ee,ee=I>>26,this.words[Q]=I&67108863;for(;ee!==0&&Q<V.length;Q++)I=(V.words[Q]|0)+ee,ee=I>>26,this.words[Q]=I&67108863;if(ee===0&&Q<V.length&&V!==this)for(;Q<V.length;Q++)this.words[Q]=V.words[Q];return this.length=Math.max(this.length,Q),V!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(M){return this.clone().isub(M)};function a(C,M,I){I.negative=M.negative^C.negative;var G=C.length+M.length|0;I.length=G,G=G-1|0;var V=C.words[0]|0,q=M.words[0]|0,ee=V*q,Q=ee&67108863,U=ee/67108864|0;I.words[0]=Q;for(var O=1;O<G;O++){for(var Z=U>>>26,B=U&67108863,Y=Math.min(O,M.length-1),j=Math.max(0,O-C.length+1);j<=Y;j++){var X=O-j|0;V=C.words[X]|0,q=M.words[j]|0,ee=V*q+B,Z+=ee/67108864|0,B=ee&67108863}I.words[O]=B|0,U=Z|0}return U!==0?I.words[O]=U|0:I.length--,I.strip()}var h=function(M,I,G){var V=M.words,q=I.words,ee=G.words,Q=0,U,O,Z,B=V[0]|0,Y=B&8191,j=B>>>13,X=V[1]|0,H=X&8191,K=X>>>13,W=V[2]|0,$=W&8191,re=W>>>13,de=V[3]|0,ve=de&8191,ue=de>>>13,ce=V[4]|0,_e=ce&8191,fe=ce>>>13,ne=V[5]|0,ie=ne&8191,me=ne>>>13,we=V[6]|0,be=we&8191,Me=we>>>13,Ie=V[7]|0,Ke=Ie&8191,Oe=Ie>>>13,We=V[8]|0,Fe=We&8191,Ge=We>>>13,Xe=V[9]|0,ut=Xe&8191,rt=Xe>>>13,dt=q[0]|0,st=dt&8191,Ve=dt>>>13,Je=q[1]|0,ke=Je&8191,Le=Je>>>13,Be=q[2]|0,pe=Be&8191,Ae=Be>>>13,Ce=q[3]|0,Se=Ce&8191,He=Ce>>>13,Ne=q[4]|0,qe=Ne&8191,at=Ne>>>13,nt=q[5]|0,Ze=nt&8191,ht=nt>>>13,kt=q[6]|0,xt=kt&8191,Bt=kt>>>13,Zt=q[7]|0,Gt=Zt&8191,Rt=Zt>>>13,Wt=q[8]|0,It=Wt&8191,vt=Wt>>>13,Yt=q[9]|0,Ft=Yt&8191,ye=Yt>>>13;G.negative=M.negative^I.negative,G.length=19,U=Math.imul(Y,st),O=Math.imul(Y,Ve),O=O+Math.imul(j,st)|0,Z=Math.imul(j,Ve);var ge=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(ge>>>26)|0,ge&=67108863,U=Math.imul(H,st),O=Math.imul(H,Ve),O=O+Math.imul(K,st)|0,Z=Math.imul(K,Ve),U=U+Math.imul(Y,ke)|0,O=O+Math.imul(Y,Le)|0,O=O+Math.imul(j,ke)|0,Z=Z+Math.imul(j,Le)|0;var Re=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Re>>>26)|0,Re&=67108863,U=Math.imul($,st),O=Math.imul($,Ve),O=O+Math.imul(re,st)|0,Z=Math.imul(re,Ve),U=U+Math.imul(H,ke)|0,O=O+Math.imul(H,Le)|0,O=O+Math.imul(K,ke)|0,Z=Z+Math.imul(K,Le)|0,U=U+Math.imul(Y,pe)|0,O=O+Math.imul(Y,Ae)|0,O=O+Math.imul(j,pe)|0,Z=Z+Math.imul(j,Ae)|0;var ze=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(ze>>>26)|0,ze&=67108863,U=Math.imul(ve,st),O=Math.imul(ve,Ve),O=O+Math.imul(ue,st)|0,Z=Math.imul(ue,Ve),U=U+Math.imul($,ke)|0,O=O+Math.imul($,Le)|0,O=O+Math.imul(re,ke)|0,Z=Z+Math.imul(re,Le)|0,U=U+Math.imul(H,pe)|0,O=O+Math.imul(H,Ae)|0,O=O+Math.imul(K,pe)|0,Z=Z+Math.imul(K,Ae)|0,U=U+Math.imul(Y,Se)|0,O=O+Math.imul(Y,He)|0,O=O+Math.imul(j,Se)|0,Z=Z+Math.imul(j,He)|0;var Ue=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,U=Math.imul(_e,st),O=Math.imul(_e,Ve),O=O+Math.imul(fe,st)|0,Z=Math.imul(fe,Ve),U=U+Math.imul(ve,ke)|0,O=O+Math.imul(ve,Le)|0,O=O+Math.imul(ue,ke)|0,Z=Z+Math.imul(ue,Le)|0,U=U+Math.imul($,pe)|0,O=O+Math.imul($,Ae)|0,O=O+Math.imul(re,pe)|0,Z=Z+Math.imul(re,Ae)|0,U=U+Math.imul(H,Se)|0,O=O+Math.imul(H,He)|0,O=O+Math.imul(K,Se)|0,Z=Z+Math.imul(K,He)|0,U=U+Math.imul(Y,qe)|0,O=O+Math.imul(Y,at)|0,O=O+Math.imul(j,qe)|0,Z=Z+Math.imul(j,at)|0;var je=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(je>>>26)|0,je&=67108863,U=Math.imul(ie,st),O=Math.imul(ie,Ve),O=O+Math.imul(me,st)|0,Z=Math.imul(me,Ve),U=U+Math.imul(_e,ke)|0,O=O+Math.imul(_e,Le)|0,O=O+Math.imul(fe,ke)|0,Z=Z+Math.imul(fe,Le)|0,U=U+Math.imul(ve,pe)|0,O=O+Math.imul(ve,Ae)|0,O=O+Math.imul(ue,pe)|0,Z=Z+Math.imul(ue,Ae)|0,U=U+Math.imul($,Se)|0,O=O+Math.imul($,He)|0,O=O+Math.imul(re,Se)|0,Z=Z+Math.imul(re,He)|0,U=U+Math.imul(H,qe)|0,O=O+Math.imul(H,at)|0,O=O+Math.imul(K,qe)|0,Z=Z+Math.imul(K,at)|0,U=U+Math.imul(Y,Ze)|0,O=O+Math.imul(Y,ht)|0,O=O+Math.imul(j,Ze)|0,Z=Z+Math.imul(j,ht)|0;var Ye=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,U=Math.imul(be,st),O=Math.imul(be,Ve),O=O+Math.imul(Me,st)|0,Z=Math.imul(Me,Ve),U=U+Math.imul(ie,ke)|0,O=O+Math.imul(ie,Le)|0,O=O+Math.imul(me,ke)|0,Z=Z+Math.imul(me,Le)|0,U=U+Math.imul(_e,pe)|0,O=O+Math.imul(_e,Ae)|0,O=O+Math.imul(fe,pe)|0,Z=Z+Math.imul(fe,Ae)|0,U=U+Math.imul(ve,Se)|0,O=O+Math.imul(ve,He)|0,O=O+Math.imul(ue,Se)|0,Z=Z+Math.imul(ue,He)|0,U=U+Math.imul($,qe)|0,O=O+Math.imul($,at)|0,O=O+Math.imul(re,qe)|0,Z=Z+Math.imul(re,at)|0,U=U+Math.imul(H,Ze)|0,O=O+Math.imul(H,ht)|0,O=O+Math.imul(K,Ze)|0,Z=Z+Math.imul(K,ht)|0,U=U+Math.imul(Y,xt)|0,O=O+Math.imul(Y,Bt)|0,O=O+Math.imul(j,xt)|0,Z=Z+Math.imul(j,Bt)|0;var et=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(et>>>26)|0,et&=67108863,U=Math.imul(Ke,st),O=Math.imul(Ke,Ve),O=O+Math.imul(Oe,st)|0,Z=Math.imul(Oe,Ve),U=U+Math.imul(be,ke)|0,O=O+Math.imul(be,Le)|0,O=O+Math.imul(Me,ke)|0,Z=Z+Math.imul(Me,Le)|0,U=U+Math.imul(ie,pe)|0,O=O+Math.imul(ie,Ae)|0,O=O+Math.imul(me,pe)|0,Z=Z+Math.imul(me,Ae)|0,U=U+Math.imul(_e,Se)|0,O=O+Math.imul(_e,He)|0,O=O+Math.imul(fe,Se)|0,Z=Z+Math.imul(fe,He)|0,U=U+Math.imul(ve,qe)|0,O=O+Math.imul(ve,at)|0,O=O+Math.imul(ue,qe)|0,Z=Z+Math.imul(ue,at)|0,U=U+Math.imul($,Ze)|0,O=O+Math.imul($,ht)|0,O=O+Math.imul(re,Ze)|0,Z=Z+Math.imul(re,ht)|0,U=U+Math.imul(H,xt)|0,O=O+Math.imul(H,Bt)|0,O=O+Math.imul(K,xt)|0,Z=Z+Math.imul(K,Bt)|0,U=U+Math.imul(Y,Gt)|0,O=O+Math.imul(Y,Rt)|0,O=O+Math.imul(j,Gt)|0,Z=Z+Math.imul(j,Rt)|0;var ot=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(ot>>>26)|0,ot&=67108863,U=Math.imul(Fe,st),O=Math.imul(Fe,Ve),O=O+Math.imul(Ge,st)|0,Z=Math.imul(Ge,Ve),U=U+Math.imul(Ke,ke)|0,O=O+Math.imul(Ke,Le)|0,O=O+Math.imul(Oe,ke)|0,Z=Z+Math.imul(Oe,Le)|0,U=U+Math.imul(be,pe)|0,O=O+Math.imul(be,Ae)|0,O=O+Math.imul(Me,pe)|0,Z=Z+Math.imul(Me,Ae)|0,U=U+Math.imul(ie,Se)|0,O=O+Math.imul(ie,He)|0,O=O+Math.imul(me,Se)|0,Z=Z+Math.imul(me,He)|0,U=U+Math.imul(_e,qe)|0,O=O+Math.imul(_e,at)|0,O=O+Math.imul(fe,qe)|0,Z=Z+Math.imul(fe,at)|0,U=U+Math.imul(ve,Ze)|0,O=O+Math.imul(ve,ht)|0,O=O+Math.imul(ue,Ze)|0,Z=Z+Math.imul(ue,ht)|0,U=U+Math.imul($,xt)|0,O=O+Math.imul($,Bt)|0,O=O+Math.imul(re,xt)|0,Z=Z+Math.imul(re,Bt)|0,U=U+Math.imul(H,Gt)|0,O=O+Math.imul(H,Rt)|0,O=O+Math.imul(K,Gt)|0,Z=Z+Math.imul(K,Rt)|0,U=U+Math.imul(Y,It)|0,O=O+Math.imul(Y,vt)|0,O=O+Math.imul(j,It)|0,Z=Z+Math.imul(j,vt)|0;var _t=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(_t>>>26)|0,_t&=67108863,U=Math.imul(ut,st),O=Math.imul(ut,Ve),O=O+Math.imul(rt,st)|0,Z=Math.imul(rt,Ve),U=U+Math.imul(Fe,ke)|0,O=O+Math.imul(Fe,Le)|0,O=O+Math.imul(Ge,ke)|0,Z=Z+Math.imul(Ge,Le)|0,U=U+Math.imul(Ke,pe)|0,O=O+Math.imul(Ke,Ae)|0,O=O+Math.imul(Oe,pe)|0,Z=Z+Math.imul(Oe,Ae)|0,U=U+Math.imul(be,Se)|0,O=O+Math.imul(be,He)|0,O=O+Math.imul(Me,Se)|0,Z=Z+Math.imul(Me,He)|0,U=U+Math.imul(ie,qe)|0,O=O+Math.imul(ie,at)|0,O=O+Math.imul(me,qe)|0,Z=Z+Math.imul(me,at)|0,U=U+Math.imul(_e,Ze)|0,O=O+Math.imul(_e,ht)|0,O=O+Math.imul(fe,Ze)|0,Z=Z+Math.imul(fe,ht)|0,U=U+Math.imul(ve,xt)|0,O=O+Math.imul(ve,Bt)|0,O=O+Math.imul(ue,xt)|0,Z=Z+Math.imul(ue,Bt)|0,U=U+Math.imul($,Gt)|0,O=O+Math.imul($,Rt)|0,O=O+Math.imul(re,Gt)|0,Z=Z+Math.imul(re,Rt)|0,U=U+Math.imul(H,It)|0,O=O+Math.imul(H,vt)|0,O=O+Math.imul(K,It)|0,Z=Z+Math.imul(K,vt)|0,U=U+Math.imul(Y,Ft)|0,O=O+Math.imul(Y,ye)|0,O=O+Math.imul(j,Ft)|0,Z=Z+Math.imul(j,ye)|0;var Mt=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,U=Math.imul(ut,ke),O=Math.imul(ut,Le),O=O+Math.imul(rt,ke)|0,Z=Math.imul(rt,Le),U=U+Math.imul(Fe,pe)|0,O=O+Math.imul(Fe,Ae)|0,O=O+Math.imul(Ge,pe)|0,Z=Z+Math.imul(Ge,Ae)|0,U=U+Math.imul(Ke,Se)|0,O=O+Math.imul(Ke,He)|0,O=O+Math.imul(Oe,Se)|0,Z=Z+Math.imul(Oe,He)|0,U=U+Math.imul(be,qe)|0,O=O+Math.imul(be,at)|0,O=O+Math.imul(Me,qe)|0,Z=Z+Math.imul(Me,at)|0,U=U+Math.imul(ie,Ze)|0,O=O+Math.imul(ie,ht)|0,O=O+Math.imul(me,Ze)|0,Z=Z+Math.imul(me,ht)|0,U=U+Math.imul(_e,xt)|0,O=O+Math.imul(_e,Bt)|0,O=O+Math.imul(fe,xt)|0,Z=Z+Math.imul(fe,Bt)|0,U=U+Math.imul(ve,Gt)|0,O=O+Math.imul(ve,Rt)|0,O=O+Math.imul(ue,Gt)|0,Z=Z+Math.imul(ue,Rt)|0,U=U+Math.imul($,It)|0,O=O+Math.imul($,vt)|0,O=O+Math.imul(re,It)|0,Z=Z+Math.imul(re,vt)|0,U=U+Math.imul(H,Ft)|0,O=O+Math.imul(H,ye)|0,O=O+Math.imul(K,Ft)|0,Z=Z+Math.imul(K,ye)|0;var St=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(St>>>26)|0,St&=67108863,U=Math.imul(ut,pe),O=Math.imul(ut,Ae),O=O+Math.imul(rt,pe)|0,Z=Math.imul(rt,Ae),U=U+Math.imul(Fe,Se)|0,O=O+Math.imul(Fe,He)|0,O=O+Math.imul(Ge,Se)|0,Z=Z+Math.imul(Ge,He)|0,U=U+Math.imul(Ke,qe)|0,O=O+Math.imul(Ke,at)|0,O=O+Math.imul(Oe,qe)|0,Z=Z+Math.imul(Oe,at)|0,U=U+Math.imul(be,Ze)|0,O=O+Math.imul(be,ht)|0,O=O+Math.imul(Me,Ze)|0,Z=Z+Math.imul(Me,ht)|0,U=U+Math.imul(ie,xt)|0,O=O+Math.imul(ie,Bt)|0,O=O+Math.imul(me,xt)|0,Z=Z+Math.imul(me,Bt)|0,U=U+Math.imul(_e,Gt)|0,O=O+Math.imul(_e,Rt)|0,O=O+Math.imul(fe,Gt)|0,Z=Z+Math.imul(fe,Rt)|0,U=U+Math.imul(ve,It)|0,O=O+Math.imul(ve,vt)|0,O=O+Math.imul(ue,It)|0,Z=Z+Math.imul(ue,vt)|0,U=U+Math.imul($,Ft)|0,O=O+Math.imul($,ye)|0,O=O+Math.imul(re,Ft)|0,Z=Z+Math.imul(re,ye)|0;var Dt=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,U=Math.imul(ut,Se),O=Math.imul(ut,He),O=O+Math.imul(rt,Se)|0,Z=Math.imul(rt,He),U=U+Math.imul(Fe,qe)|0,O=O+Math.imul(Fe,at)|0,O=O+Math.imul(Ge,qe)|0,Z=Z+Math.imul(Ge,at)|0,U=U+Math.imul(Ke,Ze)|0,O=O+Math.imul(Ke,ht)|0,O=O+Math.imul(Oe,Ze)|0,Z=Z+Math.imul(Oe,ht)|0,U=U+Math.imul(be,xt)|0,O=O+Math.imul(be,Bt)|0,O=O+Math.imul(Me,xt)|0,Z=Z+Math.imul(Me,Bt)|0,U=U+Math.imul(ie,Gt)|0,O=O+Math.imul(ie,Rt)|0,O=O+Math.imul(me,Gt)|0,Z=Z+Math.imul(me,Rt)|0,U=U+Math.imul(_e,It)|0,O=O+Math.imul(_e,vt)|0,O=O+Math.imul(fe,It)|0,Z=Z+Math.imul(fe,vt)|0,U=U+Math.imul(ve,Ft)|0,O=O+Math.imul(ve,ye)|0,O=O+Math.imul(ue,Ft)|0,Z=Z+Math.imul(ue,ye)|0;var Ot=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,U=Math.imul(ut,qe),O=Math.imul(ut,at),O=O+Math.imul(rt,qe)|0,Z=Math.imul(rt,at),U=U+Math.imul(Fe,Ze)|0,O=O+Math.imul(Fe,ht)|0,O=O+Math.imul(Ge,Ze)|0,Z=Z+Math.imul(Ge,ht)|0,U=U+Math.imul(Ke,xt)|0,O=O+Math.imul(Ke,Bt)|0,O=O+Math.imul(Oe,xt)|0,Z=Z+Math.imul(Oe,Bt)|0,U=U+Math.imul(be,Gt)|0,O=O+Math.imul(be,Rt)|0,O=O+Math.imul(Me,Gt)|0,Z=Z+Math.imul(Me,Rt)|0,U=U+Math.imul(ie,It)|0,O=O+Math.imul(ie,vt)|0,O=O+Math.imul(me,It)|0,Z=Z+Math.imul(me,vt)|0,U=U+Math.imul(_e,Ft)|0,O=O+Math.imul(_e,ye)|0,O=O+Math.imul(fe,Ft)|0,Z=Z+Math.imul(fe,ye)|0;var Ht=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,U=Math.imul(ut,Ze),O=Math.imul(ut,ht),O=O+Math.imul(rt,Ze)|0,Z=Math.imul(rt,ht),U=U+Math.imul(Fe,xt)|0,O=O+Math.imul(Fe,Bt)|0,O=O+Math.imul(Ge,xt)|0,Z=Z+Math.imul(Ge,Bt)|0,U=U+Math.imul(Ke,Gt)|0,O=O+Math.imul(Ke,Rt)|0,O=O+Math.imul(Oe,Gt)|0,Z=Z+Math.imul(Oe,Rt)|0,U=U+Math.imul(be,It)|0,O=O+Math.imul(be,vt)|0,O=O+Math.imul(Me,It)|0,Z=Z+Math.imul(Me,vt)|0,U=U+Math.imul(ie,Ft)|0,O=O+Math.imul(ie,ye)|0,O=O+Math.imul(me,Ft)|0,Z=Z+Math.imul(me,ye)|0;var er=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(er>>>26)|0,er&=67108863,U=Math.imul(ut,xt),O=Math.imul(ut,Bt),O=O+Math.imul(rt,xt)|0,Z=Math.imul(rt,Bt),U=U+Math.imul(Fe,Gt)|0,O=O+Math.imul(Fe,Rt)|0,O=O+Math.imul(Ge,Gt)|0,Z=Z+Math.imul(Ge,Rt)|0,U=U+Math.imul(Ke,It)|0,O=O+Math.imul(Ke,vt)|0,O=O+Math.imul(Oe,It)|0,Z=Z+Math.imul(Oe,vt)|0,U=U+Math.imul(be,Ft)|0,O=O+Math.imul(be,ye)|0,O=O+Math.imul(Me,Ft)|0,Z=Z+Math.imul(Me,ye)|0;var wt=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(wt>>>26)|0,wt&=67108863,U=Math.imul(ut,Gt),O=Math.imul(ut,Rt),O=O+Math.imul(rt,Gt)|0,Z=Math.imul(rt,Rt),U=U+Math.imul(Fe,It)|0,O=O+Math.imul(Fe,vt)|0,O=O+Math.imul(Ge,It)|0,Z=Z+Math.imul(Ge,vt)|0,U=U+Math.imul(Ke,Ft)|0,O=O+Math.imul(Ke,ye)|0,O=O+Math.imul(Oe,Ft)|0,Z=Z+Math.imul(Oe,ye)|0;var Et=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(Et>>>26)|0,Et&=67108863,U=Math.imul(ut,It),O=Math.imul(ut,vt),O=O+Math.imul(rt,It)|0,Z=Math.imul(rt,vt),U=U+Math.imul(Fe,Ft)|0,O=O+Math.imul(Fe,ye)|0,O=O+Math.imul(Ge,Ft)|0,Z=Z+Math.imul(Ge,ye)|0;var zt=(Q+U|0)+((O&8191)<<13)|0;Q=(Z+(O>>>13)|0)+(zt>>>26)|0,zt&=67108863,U=Math.imul(ut,Ft),O=Math.imul(ut,ye),O=O+Math.imul(rt,Ft)|0,Z=Math.imul(rt,ye);var Ut=(Q+U|0)+((O&8191)<<13)|0;return Q=(Z+(O>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,ee[0]=ge,ee[1]=Re,ee[2]=ze,ee[3]=Ue,ee[4]=je,ee[5]=Ye,ee[6]=et,ee[7]=ot,ee[8]=_t,ee[9]=Mt,ee[10]=St,ee[11]=Dt,ee[12]=Ot,ee[13]=Ht,ee[14]=er,ee[15]=wt,ee[16]=Et,ee[17]=zt,ee[18]=Ut,Q!==0&&(ee[19]=Q,G.length++),G};Math.imul||(h=a);function c(C,M,I){I.negative=M.negative^C.negative,I.length=C.length+M.length;for(var G=0,V=0,q=0;q<I.length-1;q++){var ee=V;V=0;for(var Q=G&67108863,U=Math.min(q,M.length-1),O=Math.max(0,q-C.length+1);O<=U;O++){var Z=q-O,B=C.words[Z]|0,Y=M.words[O]|0,j=B*Y,X=j&67108863;ee=ee+(j/67108864|0)|0,X=X+Q|0,Q=X&67108863,ee=ee+(X>>>26)|0,V+=ee>>>26,ee&=67108863}I.words[q]=Q,G=ee,ee=V}return G!==0?I.words[q]=G:I.length--,I.strip()}function m(C,M,I){var G=new o;return G.mulp(C,M,I)}l.prototype.mulTo=function(M,I){var G,V=this.length+M.length;return this.length===10&&M.length===10?G=h(this,M,I):V<63?G=a(this,M,I):V<1024?G=c(this,M,I):G=m(this,M,I),G};function o(C,M){this.x=C,this.y=M}o.prototype.makeRBT=function(M){for(var I=new Array(M),G=l.prototype._countBits(M)-1,V=0;V<M;V++)I[V]=this.revBin(V,G,M);return I},o.prototype.revBin=function(M,I,G){if(M===0||M===G-1)return M;for(var V=0,q=0;q<I;q++)V|=(M&1)<<I-q-1,M>>=1;return V},o.prototype.permute=function(M,I,G,V,q,ee){for(var Q=0;Q<ee;Q++)V[Q]=I[M[Q]],q[Q]=G[M[Q]]},o.prototype.transform=function(M,I,G,V,q,ee){this.permute(ee,M,I,G,V,q);for(var Q=1;Q<q;Q<<=1)for(var U=Q<<1,O=Math.cos(2*Math.PI/U),Z=Math.sin(2*Math.PI/U),B=0;B<q;B+=U)for(var Y=O,j=Z,X=0;X<Q;X++){var H=G[B+X],K=V[B+X],W=G[B+X+Q],$=V[B+X+Q],re=Y*W-j*$;$=Y*$+j*W,W=re,G[B+X]=H+W,V[B+X]=K+$,G[B+X+Q]=H-W,V[B+X+Q]=K-$,X!==U&&(re=O*Y-Z*j,j=O*j+Z*Y,Y=re)}},o.prototype.guessLen13b=function(M,I){var G=Math.max(I,M)|1,V=G&1,q=0;for(G=G/2|0;G;G=G>>>1)q++;return 1<<q+1+V},o.prototype.conjugate=function(M,I,G){if(!(G<=1))for(var V=0;V<G/2;V++){var q=M[V];M[V]=M[G-V-1],M[G-V-1]=q,q=I[V],I[V]=-I[G-V-1],I[G-V-1]=-q}},o.prototype.normalize13b=function(M,I){for(var G=0,V=0;V<I/2;V++){var q=Math.round(M[2*V+1]/I)*8192+Math.round(M[2*V]/I)+G;M[V]=q&67108863,q<67108864?G=0:G=q/67108864|0}return M},o.prototype.convert13b=function(M,I,G,V){for(var q=0,ee=0;ee<I;ee++)q=q+(M[ee]|0),G[2*ee]=q&8191,q=q>>>13,G[2*ee+1]=q&8191,q=q>>>13;for(ee=2*I;ee<V;++ee)G[ee]=0;u(q===0),u((q&-8192)===0)},o.prototype.stub=function(M){for(var I=new Array(M),G=0;G<M;G++)I[G]=0;return I},o.prototype.mulp=function(M,I,G){var V=2*this.guessLen13b(M.length,I.length),q=this.makeRBT(V),ee=this.stub(V),Q=new Array(V),U=new Array(V),O=new Array(V),Z=new Array(V),B=new Array(V),Y=new Array(V),j=G.words;j.length=V,this.convert13b(M.words,M.length,Q,V),this.convert13b(I.words,I.length,Z,V),this.transform(Q,ee,U,O,V,q),this.transform(Z,ee,B,Y,V,q);for(var X=0;X<V;X++){var H=U[X]*B[X]-O[X]*Y[X];O[X]=U[X]*Y[X]+O[X]*B[X],U[X]=H}return this.conjugate(U,O,V),this.transform(U,O,j,ee,V,q),this.conjugate(j,ee,V),this.normalize13b(j,V),G.negative=M.negative^I.negative,G.length=M.length+I.length,G.strip()},l.prototype.mul=function(M){var I=new l(null);return I.words=new Array(this.length+M.length),this.mulTo(M,I)},l.prototype.mulf=function(M){var I=new l(null);return I.words=new Array(this.length+M.length),m(this,M,I)},l.prototype.imul=function(M){return this.clone().mulTo(M,this)},l.prototype.imuln=function(M){u(typeof M=="number"),u(M<67108864);for(var I=0,G=0;G<this.length;G++){var V=(this.words[G]|0)*M,q=(V&67108863)+(I&67108863);I>>=26,I+=V/67108864|0,I+=q>>>26,this.words[G]=q&67108863}return I!==0&&(this.words[G]=I,this.length++),this},l.prototype.muln=function(M){return this.clone().imuln(M)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(M){var I=n(M);if(I.length===0)return new l(1);for(var G=this,V=0;V<I.length&&I[V]===0;V++,G=G.sqr());if(++V<I.length)for(var q=G.sqr();V<I.length;V++,q=q.sqr())I[V]!==0&&(G=G.mul(q));return G},l.prototype.iushln=function(M){u(typeof M=="number"&&M>=0);var I=M%26,G=(M-I)/26,V=67108863>>>26-I<<26-I,q;if(I!==0){var ee=0;for(q=0;q<this.length;q++){var Q=this.words[q]&V,U=(this.words[q]|0)-Q<<I;this.words[q]=U|ee,ee=Q>>>26-I}ee&&(this.words[q]=ee,this.length++)}if(G!==0){for(q=this.length-1;q>=0;q--)this.words[q+G]=this.words[q];for(q=0;q<G;q++)this.words[q]=0;this.length+=G}return this.strip()},l.prototype.ishln=function(M){return u(this.negative===0),this.iushln(M)},l.prototype.iushrn=function(M,I,G){u(typeof M=="number"&&M>=0);var V;I?V=(I-I%26)/26:V=0;var q=M%26,ee=Math.min((M-q)/26,this.length),Q=67108863^67108863>>>q<<q,U=G;if(V-=ee,V=Math.max(0,V),U){for(var O=0;O<ee;O++)U.words[O]=this.words[O];U.length=ee}if(ee!==0)if(this.length>ee)for(this.length-=ee,O=0;O<this.length;O++)this.words[O]=this.words[O+ee];else this.words[0]=0,this.length=1;var Z=0;for(O=this.length-1;O>=0&&(Z!==0||O>=V);O--){var B=this.words[O]|0;this.words[O]=Z<<26-q|B>>>q,Z=B&Q}return U&&Z!==0&&(U.words[U.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(M,I,G){return u(this.negative===0),this.iushrn(M,I,G)},l.prototype.shln=function(M){return this.clone().ishln(M)},l.prototype.ushln=function(M){return this.clone().iushln(M)},l.prototype.shrn=function(M){return this.clone().ishrn(M)},l.prototype.ushrn=function(M){return this.clone().iushrn(M)},l.prototype.testn=function(M){u(typeof M=="number"&&M>=0);var I=M%26,G=(M-I)/26,V=1<<I;if(this.length<=G)return!1;var q=this.words[G];return!!(q&V)},l.prototype.imaskn=function(M){u(typeof M=="number"&&M>=0);var I=M%26,G=(M-I)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=G)return this;if(I!==0&&G++,this.length=Math.min(G,this.length),I!==0){var V=67108863^67108863>>>I<<I;this.words[this.length-1]&=V}return this.strip()},l.prototype.maskn=function(M){return this.clone().imaskn(M)},l.prototype.iaddn=function(M){return u(typeof M=="number"),u(M<67108864),M<0?this.isubn(-M):this.negative!==0?this.length===1&&(this.words[0]|0)<M?(this.words[0]=M-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(M),this.negative=1,this):this._iaddn(M)},l.prototype._iaddn=function(M){this.words[0]+=M;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},l.prototype.isubn=function(M){if(u(typeof M=="number"),u(M<67108864),M<0)return this.iaddn(-M);if(this.negative!==0)return this.negative=0,this.iaddn(M),this.negative=1,this;if(this.words[0]-=M,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},l.prototype.addn=function(M){return this.clone().iaddn(M)},l.prototype.subn=function(M){return this.clone().isubn(M)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(M,I,G){var V=M.length+G,q;this._expand(V);var ee,Q=0;for(q=0;q<M.length;q++){ee=(this.words[q+G]|0)+Q;var U=(M.words[q]|0)*I;ee-=U&67108863,Q=(ee>>26)-(U/67108864|0),this.words[q+G]=ee&67108863}for(;q<this.length-G;q++)ee=(this.words[q+G]|0)+Q,Q=ee>>26,this.words[q+G]=ee&67108863;if(Q===0)return this.strip();for(u(Q===-1),Q=0,q=0;q<this.length;q++)ee=-(this.words[q]|0)+Q,Q=ee>>26,this.words[q]=ee&67108863;return this.negative=1,this.strip()},l.prototype._wordDiv=function(M,I){var G=this.length-M.length,V=this.clone(),q=M,ee=q.words[q.length-1]|0,Q=this._countBits(ee);G=26-Q,G!==0&&(q=q.ushln(G),V.iushln(G),ee=q.words[q.length-1]|0);var U=V.length-q.length,O;if(I!=="mod"){O=new l(null),O.length=U+1,O.words=new Array(O.length);for(var Z=0;Z<O.length;Z++)O.words[Z]=0}var B=V.clone()._ishlnsubmul(q,1,U);B.negative===0&&(V=B,O&&(O.words[U]=1));for(var Y=U-1;Y>=0;Y--){var j=(V.words[q.length+Y]|0)*67108864+(V.words[q.length+Y-1]|0);for(j=Math.min(j/ee|0,67108863),V._ishlnsubmul(q,j,Y);V.negative!==0;)j--,V.negative=0,V._ishlnsubmul(q,1,Y),V.isZero()||(V.negative^=1);O&&(O.words[Y]=j)}return O&&O.strip(),V.strip(),I!=="div"&&G!==0&&V.iushrn(G),{div:O||null,mod:V}},l.prototype.divmod=function(M,I,G){if(u(!M.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var V,q,ee;return this.negative!==0&&M.negative===0?(ee=this.neg().divmod(M,I),I!=="mod"&&(V=ee.div.neg()),I!=="div"&&(q=ee.mod.neg(),G&&q.negative!==0&&q.iadd(M)),{div:V,mod:q}):this.negative===0&&M.negative!==0?(ee=this.divmod(M.neg(),I),I!=="mod"&&(V=ee.div.neg()),{div:V,mod:ee.mod}):(this.negative&M.negative)!==0?(ee=this.neg().divmod(M.neg(),I),I!=="div"&&(q=ee.mod.neg(),G&&q.negative!==0&&q.isub(M)),{div:ee.div,mod:q}):M.length>this.length||this.cmp(M)<0?{div:new l(0),mod:this}:M.length===1?I==="div"?{div:this.divn(M.words[0]),mod:null}:I==="mod"?{div:null,mod:new l(this.modn(M.words[0]))}:{div:this.divn(M.words[0]),mod:new l(this.modn(M.words[0]))}:this._wordDiv(M,I)},l.prototype.div=function(M){return this.divmod(M,"div",!1).div},l.prototype.mod=function(M){return this.divmod(M,"mod",!1).mod},l.prototype.umod=function(M){return this.divmod(M,"mod",!0).mod},l.prototype.divRound=function(M){var I=this.divmod(M);if(I.mod.isZero())return I.div;var G=I.div.negative!==0?I.mod.isub(M):I.mod,V=M.ushrn(1),q=M.andln(1),ee=G.cmp(V);return ee<0||q===1&&ee===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},l.prototype.modn=function(M){u(M<=67108863);for(var I=(1<<26)%M,G=0,V=this.length-1;V>=0;V--)G=(I*G+(this.words[V]|0))%M;return G},l.prototype.idivn=function(M){u(M<=67108863);for(var I=0,G=this.length-1;G>=0;G--){var V=(this.words[G]|0)+I*67108864;this.words[G]=V/M|0,I=V%M}return this.strip()},l.prototype.divn=function(M){return this.clone().idivn(M)},l.prototype.egcd=function(M){u(M.negative===0),u(!M.isZero());var I=this,G=M.clone();I.negative!==0?I=I.umod(M):I=I.clone();for(var V=new l(1),q=new l(0),ee=new l(0),Q=new l(1),U=0;I.isEven()&&G.isEven();)I.iushrn(1),G.iushrn(1),++U;for(var O=G.clone(),Z=I.clone();!I.isZero();){for(var B=0,Y=1;(I.words[0]&Y)===0&&B<26;++B,Y<<=1);if(B>0)for(I.iushrn(B);B-- >0;)(V.isOdd()||q.isOdd())&&(V.iadd(O),q.isub(Z)),V.iushrn(1),q.iushrn(1);for(var j=0,X=1;(G.words[0]&X)===0&&j<26;++j,X<<=1);if(j>0)for(G.iushrn(j);j-- >0;)(ee.isOdd()||Q.isOdd())&&(ee.iadd(O),Q.isub(Z)),ee.iushrn(1),Q.iushrn(1);I.cmp(G)>=0?(I.isub(G),V.isub(ee),q.isub(Q)):(G.isub(I),ee.isub(V),Q.isub(q))}return{a:ee,b:Q,gcd:G.iushln(U)}},l.prototype._invmp=function(M){u(M.negative===0),u(!M.isZero());var I=this,G=M.clone();I.negative!==0?I=I.umod(M):I=I.clone();for(var V=new l(1),q=new l(0),ee=G.clone();I.cmpn(1)>0&&G.cmpn(1)>0;){for(var Q=0,U=1;(I.words[0]&U)===0&&Q<26;++Q,U<<=1);if(Q>0)for(I.iushrn(Q);Q-- >0;)V.isOdd()&&V.iadd(ee),V.iushrn(1);for(var O=0,Z=1;(G.words[0]&Z)===0&&O<26;++O,Z<<=1);if(O>0)for(G.iushrn(O);O-- >0;)q.isOdd()&&q.iadd(ee),q.iushrn(1);I.cmp(G)>=0?(I.isub(G),V.isub(q)):(G.isub(I),q.isub(V))}var B;return I.cmpn(1)===0?B=V:B=q,B.cmpn(0)<0&&B.iadd(M),B},l.prototype.gcd=function(M){if(this.isZero())return M.abs();if(M.isZero())return this.abs();var I=this.clone(),G=M.clone();I.negative=0,G.negative=0;for(var V=0;I.isEven()&&G.isEven();V++)I.iushrn(1),G.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;G.isEven();)G.iushrn(1);var q=I.cmp(G);if(q<0){var ee=I;I=G,G=ee}else if(q===0||G.cmpn(1)===0)break;I.isub(G)}while(!0);return G.iushln(V)},l.prototype.invm=function(M){return this.egcd(M).a.umod(M)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(M){return this.words[0]&M},l.prototype.bincn=function(M){u(typeof M=="number");var I=M%26,G=(M-I)/26,V=1<<I;if(this.length<=G)return this._expand(G+1),this.words[G]|=V,this;for(var q=V,ee=G;q!==0&&ee<this.length;ee++){var Q=this.words[ee]|0;Q+=q,q=Q>>>26,Q&=67108863,this.words[ee]=Q}return q!==0&&(this.words[ee]=q,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(M){var I=M<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this.strip();var G;if(this.length>1)G=1;else{I&&(M=-M),u(M<=67108863,"Number is too big");var V=this.words[0]|0;G=V===M?0:V<M?-1:1}return this.negative!==0?-G|0:G},l.prototype.cmp=function(M){if(this.negative!==0&&M.negative===0)return-1;if(this.negative===0&&M.negative!==0)return 1;var I=this.ucmp(M);return this.negative!==0?-I|0:I},l.prototype.ucmp=function(M){if(this.length>M.length)return 1;if(this.length<M.length)return-1;for(var I=0,G=this.length-1;G>=0;G--){var V=this.words[G]|0,q=M.words[G]|0;if(V!==q){V<q?I=-1:V>q&&(I=1);break}}return I},l.prototype.gtn=function(M){return this.cmpn(M)===1},l.prototype.gt=function(M){return this.cmp(M)===1},l.prototype.gten=function(M){return this.cmpn(M)>=0},l.prototype.gte=function(M){return this.cmp(M)>=0},l.prototype.ltn=function(M){return this.cmpn(M)===-1},l.prototype.lt=function(M){return this.cmp(M)===-1},l.prototype.lten=function(M){return this.cmpn(M)<=0},l.prototype.lte=function(M){return this.cmp(M)<=0},l.prototype.eqn=function(M){return this.cmpn(M)===0},l.prototype.eq=function(M){return this.cmp(M)===0},l.red=function(M){return new P(M)},l.prototype.toRed=function(M){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),M.convertTo(this)._forceRed(M)},l.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(M){return this.red=M,this},l.prototype.forceRed=function(M){return u(!this.red,"Already a number in reduction context"),this._forceRed(M)},l.prototype.redAdd=function(M){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,M)},l.prototype.redIAdd=function(M){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,M)},l.prototype.redSub=function(M){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,M)},l.prototype.redISub=function(M){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,M)},l.prototype.redShl=function(M){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,M)},l.prototype.redMul=function(M){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,M),this.red.mul(this,M)},l.prototype.redIMul=function(M){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,M),this.red.imul(this,M)},l.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(M){return u(this.red&&!M.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,M)};var t={k256:null,p224:null,p192:null,p25519:null};function i(C,M){this.name=C,this.p=new l(M,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i.prototype._tmp=function(){var M=new l(null);return M.words=new Array(Math.ceil(this.n/13)),M},i.prototype.ireduce=function(M){var I=M,G;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),G=I.bitLength();while(G>this.n);var V=G<this.n?-1:I.ucmp(this.p);return V===0?(I.words[0]=0,I.length=1):V>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},i.prototype.split=function(M,I){M.iushrn(this.n,0,I)},i.prototype.imulK=function(M){return M.imul(this.k)};function r(){i.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(r,i),r.prototype.split=function(M,I){for(var G=4194303,V=Math.min(M.length,9),q=0;q<V;q++)I.words[q]=M.words[q];if(I.length=V,M.length<=9){M.words[0]=0,M.length=1;return}var ee=M.words[9];for(I.words[I.length++]=ee&G,q=10;q<M.length;q++){var Q=M.words[q]|0;M.words[q-10]=(Q&G)<<4|ee>>>22,ee=Q}ee>>>=22,M.words[q-10]=ee,ee===0&&M.length>10?M.length-=10:M.length-=9},r.prototype.imulK=function(M){M.words[M.length]=0,M.words[M.length+1]=0,M.length+=2;for(var I=0,G=0;G<M.length;G++){var V=M.words[G]|0;I+=V*977,M.words[G]=I&67108863,I=V*64+(I/67108864|0)}return M.words[M.length-1]===0&&(M.length--,M.words[M.length-1]===0&&M.length--),M};function x(){i.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(x,i);function A(){i.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(A,i);function E(){i.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(E,i),E.prototype.imulK=function(M){for(var I=0,G=0;G<M.length;G++){var V=(M.words[G]|0)*19+I,q=V&67108863;V>>>=26,M.words[G]=q,I=V}return I!==0&&(M.words[M.length++]=I),M},l._prime=function(M){if(t[M])return t[M];var I;if(M==="k256")I=new r;else if(M==="p224")I=new x;else if(M==="p192")I=new A;else if(M==="p25519")I=new E;else throw new Error("Unknown prime "+M);return t[M]=I,I};function P(C){if(typeof C=="string"){var M=l._prime(C);this.m=M.p,this.prime=M}else u(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}P.prototype._verify1=function(M){u(M.negative===0,"red works only with positives"),u(M.red,"red works only with red numbers")},P.prototype._verify2=function(M,I){u((M.negative|I.negative)===0,"red works only with positives"),u(M.red&&M.red===I.red,"red works only with red numbers")},P.prototype.imod=function(M){return this.prime?this.prime.ireduce(M)._forceRed(this):M.umod(this.m)._forceRed(this)},P.prototype.neg=function(M){return M.isZero()?M.clone():this.m.sub(M)._forceRed(this)},P.prototype.add=function(M,I){this._verify2(M,I);var G=M.add(I);return G.cmp(this.m)>=0&&G.isub(this.m),G._forceRed(this)},P.prototype.iadd=function(M,I){this._verify2(M,I);var G=M.iadd(I);return G.cmp(this.m)>=0&&G.isub(this.m),G},P.prototype.sub=function(M,I){this._verify2(M,I);var G=M.sub(I);return G.cmpn(0)<0&&G.iadd(this.m),G._forceRed(this)},P.prototype.isub=function(M,I){this._verify2(M,I);var G=M.isub(I);return G.cmpn(0)<0&&G.iadd(this.m),G},P.prototype.shl=function(M,I){return this._verify1(M),this.imod(M.ushln(I))},P.prototype.imul=function(M,I){return this._verify2(M,I),this.imod(M.imul(I))},P.prototype.mul=function(M,I){return this._verify2(M,I),this.imod(M.mul(I))},P.prototype.isqr=function(M){return this.imul(M,M.clone())},P.prototype.sqr=function(M){return this.mul(M,M)},P.prototype.sqrt=function(M){if(M.isZero())return M.clone();var I=this.m.andln(3);if(u(I%2===1),I===3){var G=this.m.add(new l(1)).iushrn(2);return this.pow(M,G)}for(var V=this.m.subn(1),q=0;!V.isZero()&&V.andln(1)===0;)q++,V.iushrn(1);u(!V.isZero());var ee=new l(1).toRed(this),Q=ee.redNeg(),U=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new l(2*O*O).toRed(this);this.pow(O,U).cmp(Q)!==0;)O.redIAdd(Q);for(var Z=this.pow(O,V),B=this.pow(M,V.addn(1).iushrn(1)),Y=this.pow(M,V),j=q;Y.cmp(ee)!==0;){for(var X=Y,H=0;X.cmp(ee)!==0;H++)X=X.redSqr();u(H<j);var K=this.pow(Z,new l(1).iushln(j-H-1));B=B.redMul(K),Z=K.redSqr(),Y=Y.redMul(Z),j=H}return B},P.prototype.invm=function(M){var I=M._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},P.prototype.pow=function(M,I){if(I.isZero())return new l(1).toRed(this);if(I.cmpn(1)===0)return M.clone();var G=4,V=new Array(1<<G);V[0]=new l(1).toRed(this),V[1]=M;for(var q=2;q<V.length;q++)V[q]=this.mul(V[q-1],M);var ee=V[0],Q=0,U=0,O=I.bitLength()%26;for(O===0&&(O=26),q=I.length-1;q>=0;q--){for(var Z=I.words[q],B=O-1;B>=0;B--){var Y=Z>>B&1;if(ee!==V[0]&&(ee=this.sqr(ee)),Y===0&&Q===0){U=0;continue}Q<<=1,Q|=Y,U++,!(U!==G&&(q!==0||B!==0))&&(ee=this.mul(ee,V[Q]),U=0,Q=0)}O=26}return ee},P.prototype.convertTo=function(M){var I=M.umod(this.m);return I===M?I.clone():I},P.prototype.convertFrom=function(M){var I=M.clone();return I.red=null,I},l.mont=function(M){return new S(M)};function S(C){P.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(S,P),S.prototype.convertTo=function(M){return this.imod(M.ushln(this.shift))},S.prototype.convertFrom=function(M){var I=this.imod(M.mul(this.rinv));return I.red=null,I},S.prototype.imul=function(M,I){if(M.isZero()||I.isZero())return M.words[0]=0,M.length=1,M;var G=M.imul(I),V=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=G.isub(V).iushrn(this.shift),ee=q;return q.cmp(this.m)>=0?ee=q.isub(this.m):q.cmpn(0)<0&&(ee=q.iadd(this.m)),ee._forceRed(this)},S.prototype.mul=function(M,I){if(M.isZero()||I.isZero())return new l(0)._forceRed(this);var G=M.mul(I),V=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=G.isub(V).iushrn(this.shift),ee=q;return q.cmp(this.m)>=0?ee=q.isub(this.m):q.cmpn(0)<0&&(ee=q.iadd(this.m)),ee._forceRed(this)},S.prototype.invm=function(M){var I=this.imod(M._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(typeof w>"u"||w,this)},{buffer:2}],34:[function(p,w,k){"use strict";w.exports=d;function d(e){var u,s,l,b=e.length,v=0;for(u=0;u<b;++u)v+=e[u].length;var y=new Array(v),T=0;for(u=0;u<b;++u){var _=e[u],f=_.length;for(s=0;s<f;++s){var g=y[T++]=new Array(f-1),n=0;for(l=0;l<f;++l)l!==s&&(g[n++]=_[l]);if(s&1){var a=g[1];g[1]=g[0],g[0]=a}}}return y}},{}],35:[function(p,w,k){"use strict";w.exports=f;var d=p("typedarray-pool"),e=p("./lib/sweep"),u=p("./lib/intersect");function s(g,n){for(var a=0;a<g;++a)if(!(n[a]<=n[a+g]))return!0;return!1}function l(g,n,a,h){for(var c=0,m=0,o=0,t=g.length;o<t;++o){var i=g[o];if(!s(n,i)){for(var r=0;r<2*n;++r)a[c++]=i[r];h[m++]=o}}return m}function b(g,n,a,h){var c=g.length,m=n.length;if(!(c<=0||m<=0)){var o=g[0].length>>>1;if(!(o<=0)){var t,i=d.mallocDouble(2*o*c),r=d.mallocInt32(c);if(c=l(g,o,i,r),c>0){if(o===1&&h)e.init(c),t=e.sweepComplete(o,a,0,c,i,r,0,c,i,r);else{var x=d.mallocDouble(2*o*m),A=d.mallocInt32(m);m=l(n,o,x,A),m>0&&(e.init(c+m),o===1?t=e.sweepBipartite(o,a,0,c,i,r,0,m,x,A):t=u(o,a,h,c,i,r,m,x,A),d.free(x),d.free(A))}d.free(i),d.free(r)}return t}}}var v;function y(g,n){v.push([g,n])}function T(g){return v=[],b(g,g,y,!0),v}function _(g,n){return v=[],b(g,n,y,!1),v}function f(g,n,a){switch(arguments.length){case 1:return T(g);case 2:return typeof n=="function"?b(g,g,n,!0):_(g,n);case 3:return b(g,n,a,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(p,w,k){"use strict";function d(){function s(v,y,T,_,f,g,n,a,h,c,m){for(var o=2*v,t=_,i=o*_;t<f;++t,i+=o){var r=g[y+i],x=g[y+i+v],A=n[t];e:for(var E=a,P=o*a;E<h;++E,P+=o){var S=c[y+P],C=c[y+P+v],M=m[E];if(!(C<r||x<S)){for(var I=y+1;I<v;++I){var G=g[I+i],V=g[I+v+i],q=c[I+P],ee=c[I+v+P];if(V<q||ee<G)continue e}var Q=T(A,M);if(Q!==void 0)return Q}}}}function l(v,y,T,_,f,g,n,a,h,c,m){for(var o=2*v,t=a,i=o*a;t<h;++t,i+=o){var r=c[y+i],x=c[y+i+v],A=m[t];e:for(var E=_,P=o*_;E<f;++E,P+=o){var S=g[y+P],C=g[y+P+v],M=n[E];if(!(x<S||C<r)){for(var I=y+1;I<v;++I){var G=g[I+P],V=g[I+v+P],q=c[I+i],ee=c[I+v+i];if(V<q||ee<G)continue e}var Q=T(M,A);if(Q!==void 0)return Q}}}}function b(v,y,T,_,f,g,n,a,h,c,m){return f-_>h-a?s(v,y,T,_,f,g,n,a,h,c,m):l(v,y,T,_,f,g,n,a,h,c,m)}return b}function e(){function s(T,_,f,g,n,a,h,c,m,o,t){for(var i=2*T,r=g,x=i*g;r<n;++r,x+=i){var A=a[_+x],E=a[_+x+T],P=h[r];e:for(var S=c,C=i*c;S<m;++S,C+=i){var M=o[_+C],I=t[S];if(!(M<=A||E<M)){for(var G=_+1;G<T;++G){var V=a[G+x],q=a[G+T+x],ee=o[G+C],Q=o[G+T+C];if(q<ee||Q<V)continue e}var U=f(I,P);if(U!==void 0)return U}}}}function l(T,_,f,g,n,a,h,c,m,o,t){for(var i=2*T,r=g,x=i*g;r<n;++r,x+=i){var A=a[_+x],E=a[_+x+T],P=h[r];e:for(var S=c,C=i*c;S<m;++S,C+=i){var M=o[_+C],I=t[S];if(!(M<A||E<M)){for(var G=_+1;G<T;++G){var V=a[G+x],q=a[G+T+x],ee=o[G+C],Q=o[G+T+C];if(q<ee||Q<V)continue e}var U=f(P,I);if(U!==void 0)return U}}}}function b(T,_,f,g,n,a,h,c,m,o,t){for(var i=2*T,r=c,x=i*c;r<m;++r,x+=i){var A=o[_+x],E=t[r];e:for(var P=g,S=i*g;P<n;++P,S+=i){var C=a[_+S],M=a[_+S+T],I=h[P];if(!(A<=C||M<A)){for(var G=_+1;G<T;++G){var V=a[G+S],q=a[G+T+S],ee=o[G+x],Q=o[G+T+x];if(q<ee||Q<V)continue e}var U=f(E,I);if(U!==void 0)return U}}}}function v(T,_,f,g,n,a,h,c,m,o,t){for(var i=2*T,r=c,x=i*c;r<m;++r,x+=i){var A=o[_+x],E=t[r];e:for(var P=g,S=i*g;P<n;++P,S+=i){var C=a[_+S],M=a[_+S+T],I=h[P];if(!(A<C||M<A)){for(var G=_+1;G<T;++G){var V=a[G+S],q=a[G+T+S],ee=o[G+x],Q=o[G+T+x];if(q<ee||Q<V)continue e}var U=f(I,E);if(U!==void 0)return U}}}}function y(T,_,f,g,n,a,h,c,m,o,t,i){return a-n>o-m?g?s(T,_,f,n,a,h,c,m,o,t,i):l(T,_,f,n,a,h,c,m,o,t,i):g?b(T,_,f,n,a,h,c,m,o,t,i):v(T,_,f,n,a,h,c,m,o,t,i)}return y}function u(s){return s?d():e()}k.partial=u(!1),k.full=u(!0)},{}],37:[function(p,w,k){"use strict";w.exports=C;var d=p("typedarray-pool"),e=p("bit-twiddle"),u=p("./brute"),s=u.partial,l=u.full,b=p("./sweep"),v=p("./median"),y=p("./partition"),T=128,_=1<<22,f=1<<22,g=y("!(lo>=p0)&&!(p1>=hi)"),n=y("lo===p0"),a=y("lo<p0"),h=y("hi<=p0"),c=y("lo<=p0&&p0<=hi"),m=y("lo<p0&&p0<=hi"),o=6,t=2,i=1024,r=d.mallocInt32(i),x=d.mallocDouble(i);function A(M,I){var G=8*e.log2(I+1)*(M+1)|0,V=e.nextPow2(o*G);r.length<V&&(d.free(r),r=d.mallocInt32(V));var q=e.nextPow2(t*G);x.length<q&&(d.free(x),x=d.mallocDouble(q))}function E(M,I,G,V,q,ee,Q,U,O){var Z=o*M;r[Z]=I,r[Z+1]=G,r[Z+2]=V,r[Z+3]=q,r[Z+4]=ee,r[Z+5]=Q;var B=t*M;x[B]=U,x[B+1]=O}function P(M,I,G,V,q,ee,Q,U,O,Z,B){var Y=2*M,j=O*Y,X=Z[j+I];e:for(var H=q,K=q*Y;H<ee;++H,K+=Y){var W=Q[K+I],$=Q[K+I+M];if(!(X<W||$<X)&&!(V&&X===W)){for(var re=U[H],de=I+1;de<M;++de){var W=Q[K+de],$=Q[K+de+M],ve=Z[j+de],ue=Z[j+de+M];if($<ve||ue<W)continue e}var ce;if(V?ce=G(B,re):ce=G(re,B),ce!==void 0)return ce}}}function S(M,I,G,V,q,ee,Q,U,O,Z){var B=2*M,Y=U*B,j=O[Y+I];e:for(var X=V,H=V*B;X<q;++X,H+=B){var K=Q[X];if(K!==Z){var W=ee[H+I],$=ee[H+I+M];if(!(j<W||$<j)){for(var re=I+1;re<M;++re){var W=ee[H+re],$=ee[H+re+M],de=O[Y+re],ve=O[Y+re+M];if($<de||ve<W)continue e}var ue=G(K,Z);if(ue!==void 0)return ue}}}}function C(M,I,G,V,q,ee,Q,U,O){A(M,V+Q);var Z=0,B=2*M,Y;for(E(Z++,0,0,V,0,Q,G?16:0,-1/0,1/0),G||E(Z++,0,0,Q,0,V,1,-1/0,1/0);Z>0;){Z-=1;var j=Z*o,X=r[j],H=r[j+1],K=r[j+2],W=r[j+3],$=r[j+4],re=r[j+5],de=Z*t,ve=x[de],ue=x[de+1],ce=re&1,_e=!!(re&16),fe=q,ne=ee,ie=U,me=O;if(ce&&(fe=U,ne=O,ie=q,me=ee),!(re&2&&(K=a(M,X,H,K,fe,ne,ue),H>=K))&&!(re&4&&(H=h(M,X,H,K,fe,ne,ve),H>=K))){var we=K-H,be=$-W;if(_e){if(M*we*(we+be)<f){if(Y=b.scanComplete(M,X,I,H,K,fe,ne,W,$,ie,me),Y!==void 0)return Y;continue}}else if(M*Math.min(we,be)<T){if(Y=s(M,X,I,ce,H,K,fe,ne,W,$,ie,me),Y!==void 0)return Y;continue}else if(M*we*be<_){if(Y=b.scanBipartite(M,X,I,ce,H,K,fe,ne,W,$,ie,me),Y!==void 0)return Y;continue}var Me=g(M,X,H,K,fe,ne,ve,ue);if(H<Me)if(M*(Me-H)<T){if(Y=l(M,X+1,I,H,Me,fe,ne,W,$,ie,me),Y!==void 0)return Y}else if(X===M-2){if(ce?Y=b.sweepBipartite(M,I,W,$,ie,me,H,Me,fe,ne):Y=b.sweepBipartite(M,I,H,Me,fe,ne,W,$,ie,me),Y!==void 0)return Y}else E(Z++,X+1,H,Me,W,$,ce,-1/0,1/0),E(Z++,X+1,W,$,H,Me,ce^1,-1/0,1/0);if(Me<K){var Ie=v(M,X,W,$,ie,me),Ke=ie[B*Ie+X],Oe=n(M,X,Ie,$,ie,me,Ke);if(Oe<$&&E(Z++,X,Me,K,Oe,$,(ce|4)+(_e?16:0),Ke,ue),W<Ie&&E(Z++,X,Me,K,W,Ie,(ce|2)+(_e?16:0),ve,Ke),Ie+1===Oe){if(_e?Y=S(M,X,I,Me,K,fe,ne,Ie,ie,me[Ie]):Y=P(M,X,I,ce,Me,K,fe,ne,Ie,ie,me[Ie]),Y!==void 0)return Y}else if(Ie<Oe){var We;if(_e){if(We=c(M,X,Me,K,fe,ne,Ke),Me<We){var Fe=n(M,X,Me,We,fe,ne,Ke);if(X===M-2){if(Me<Fe&&(Y=b.sweepComplete(M,I,Me,Fe,fe,ne,Ie,Oe,ie,me),Y!==void 0)||Fe<We&&(Y=b.sweepBipartite(M,I,Fe,We,fe,ne,Ie,Oe,ie,me),Y!==void 0))return Y}else Me<Fe&&E(Z++,X+1,Me,Fe,Ie,Oe,16,-1/0,1/0),Fe<We&&(E(Z++,X+1,Fe,We,Ie,Oe,0,-1/0,1/0),E(Z++,X+1,Ie,Oe,Fe,We,1,-1/0,1/0))}}else ce?We=m(M,X,Me,K,fe,ne,Ke):We=c(M,X,Me,K,fe,ne,Ke),Me<We&&(X===M-2?ce?Y=b.sweepBipartite(M,I,Ie,Oe,ie,me,Me,We,fe,ne):Y=b.sweepBipartite(M,I,Me,We,fe,ne,Ie,Oe,ie,me):(E(Z++,X+1,Me,We,Ie,Oe,ce,-1/0,1/0),E(Z++,X+1,Ie,Oe,Me,We,ce^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(p,w,k){"use strict";w.exports=l;var d=p("./partition"),e=d("lo<p0"),u=8;function s(b,v,y,T,_,f){for(var g=2*b,n=g*(y+1)+v,a=y+1;a<T;++a,n+=g)for(var h=_[n],c=a,m=g*(a-1);c>y&&_[m+v]>h;--c,m-=g){for(var o=m,t=m+g,i=0;i<g;++i,++o,++t){var r=_[o];_[o]=_[t],_[t]=r}var x=f[c];f[c]=f[c-1],f[c-1]=x}}function l(b,v,y,T,_,f){if(T<=y+1)return y;for(var g=y,n=T,a=T+y>>>1,h=2*b,c=a,m=_[h*a+v];g<n;){if(n-g<u){s(b,v,g,n,_,f),m=_[h*a+v];break}var o=n-g,t=Math.random()*o+g|0,i=_[h*t+v],r=Math.random()*o+g|0,x=_[h*r+v],A=Math.random()*o+g|0,E=_[h*A+v];i<=x?E>=x?(c=r,m=x):i>=E?(c=t,m=i):(c=A,m=E):x>=E?(c=r,m=x):E>=i?(c=t,m=i):(c=A,m=E);for(var C=h*(n-1),M=h*c,P=0;P<h;++P,++C,++M){var S=_[C];_[C]=_[M],_[M]=S}var I=f[n-1];f[n-1]=f[c],f[c]=I,c=e(b,v,g,n-1,_,f,m);for(var C=h*(n-1),M=h*c,P=0;P<h;++P,++C,++M){var S=_[C];_[C]=_[M],_[M]=S}var I=f[n-1];if(f[n-1]=f[c],f[c]=I,a<c){for(n=c-1;g<n&&_[h*(n-1)+v]===m;)n-=1;n+=1}else if(c<a)for(g=c+1;g<n&&_[h*g+v]===m;)g+=1;else break}return e(b,v,y,a,_,f,_[h*a+v])}},{"./partition":39}],39:[function(p,w,k){"use strict";w.exports=e;var d={"lo===p0":u,"lo<p0":s,"lo<=p0":l,"hi<=p0":b,"lo<p0&&p0<=hi":y,"lo<=p0&&p0<=hi":v,"!(lo>=p0)&&!(p1>=hi)":T};function e(_){return d[_]}function u(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+r];if(E===c)if(i===A)i+=1,t+=m;else{for(var P=0;m>P;++P){var S=a[o+P];a[o+P]=a[t],a[t++]=S}var C=h[A];h[A]=h[i],h[i++]=C}}return i}function s(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+r];if(E<c)if(i===A)i+=1,t+=m;else{for(var P=0;m>P;++P){var S=a[o+P];a[o+P]=a[t],a[t++]=S}var C=h[A];h[A]=h[i],h[i++]=C}}return i}function l(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+x];if(E<=c)if(i===A)i+=1,t+=m;else{for(var P=0;m>P;++P){var S=a[o+P];a[o+P]=a[t],a[t++]=S}var C=h[A];h[A]=h[i],h[i++]=C}}return i}function b(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+x];if(E<=c)if(i===A)i+=1,t+=m;else{for(var P=0;m>P;++P){var S=a[o+P];a[o+P]=a[t],a[t++]=S}var C=h[A];h[A]=h[i],h[i++]=C}}return i}function v(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+r],P=a[o+x];if(E<=c&&c<=P)if(i===A)i+=1,t+=m;else{for(var S=0;m>S;++S){var C=a[o+S];a[o+S]=a[t],a[t++]=C}var M=h[A];h[A]=h[i],h[i++]=M}}return i}function y(_,f,g,n,a,h,c){for(var m=2*_,o=m*g,t=o,i=g,r=f,x=_+f,A=g;n>A;++A,o+=m){var E=a[o+r],P=a[o+x];if(E<c&&c<=P)if(i===A)i+=1,t+=m;else{for(var S=0;m>S;++S){var C=a[o+S];a[o+S]=a[t],a[t++]=C}var M=h[A];h[A]=h[i],h[i++]=M}}return i}function T(_,f,g,n,a,h,c,m){for(var o=2*_,t=o*g,i=t,r=g,x=f,A=_+f,E=g;n>E;++E,t+=o){var P=a[t+x],S=a[t+A];if(!(P>=c)&&!(m>=S))if(r===E)r+=1,i+=o;else{for(var C=0;o>C;++C){var M=a[t+C];a[t+C]=a[i],a[i++]=M}var I=h[E];h[E]=h[r],h[r++]=I}}return r}},{}],40:[function(p,w,k){"use strict";w.exports=e;var d=32;function e(f,g){g<=4*d?u(0,g-1,f):_(0,g-1,f)}function u(f,g,n){for(var a=2*(f+1),h=f+1;h<=g;++h){for(var c=n[a++],m=n[a++],o=h,t=a-2;o-- >f;){var i=n[t-2],r=n[t-1];if(i<c)break;if(i===c&&r<m)break;n[t]=i,n[t+1]=r,t-=2}n[t]=c,n[t+1]=m}}function s(f,g,n){f*=2,g*=2;var a=n[f],h=n[f+1];n[f]=n[g],n[f+1]=n[g+1],n[g]=a,n[g+1]=h}function l(f,g,n){f*=2,g*=2,n[f]=n[g],n[f+1]=n[g+1]}function b(f,g,n,a){f*=2,g*=2,n*=2;var h=a[f],c=a[f+1];a[f]=a[g],a[f+1]=a[g+1],a[g]=a[n],a[g+1]=a[n+1],a[n]=h,a[n+1]=c}function v(f,g,n,a,h){f*=2,g*=2,h[f]=h[g],h[g]=n,h[f+1]=h[g+1],h[g+1]=a}function y(f,g,n){f*=2,g*=2;var a=n[f],h=n[g];return a<h?!1:a===h?n[f+1]>n[g+1]:!0}function T(f,g,n,a){f*=2;var h=a[f];return h<g?!0:h===g?a[f+1]<n:!1}function _(f,g,n){var a=(g-f+1)/6|0,h=f+a,c=g-a,m=f+g>>1,o=m-a,t=m+a,i=h,r=o,x=m,A=t,E=c,P=f+1,S=g-1,C=0;y(i,r,n)&&(C=i,i=r,r=C),y(A,E,n)&&(C=A,A=E,E=C),y(i,x,n)&&(C=i,i=x,x=C),y(r,x,n)&&(C=r,r=x,x=C),y(i,A,n)&&(C=i,i=A,A=C),y(x,A,n)&&(C=x,x=A,A=C),y(r,E,n)&&(C=r,r=E,E=C),y(r,x,n)&&(C=r,r=x,x=C),y(A,E,n)&&(C=A,A=E,E=C);for(var M=n[2*r],I=n[2*r+1],G=n[2*A],V=n[2*A+1],q=2*i,ee=2*x,Q=2*E,U=2*h,O=2*m,Z=2*c,B=0;B<2;++B){var Y=n[q+B],j=n[ee+B],X=n[Q+B];n[U+B]=Y,n[O+B]=j,n[Z+B]=X}l(o,f,n),l(t,g,n);for(var H=P;H<=S;++H)if(T(H,M,I,n))H!==P&&s(H,P,n),++P;else if(!T(H,G,V,n))for(;;)if(T(S,G,V,n)){T(S,M,I,n)?(b(H,P,S,n),++P,--S):(s(H,S,n),--S);break}else{if(--S<H)break;continue}v(f,P-1,M,I,n),v(g,S+1,G,V,n),P-2-f<=d?u(f,P-2,n):_(f,P-2,n),g-(S+2)<=d?u(S+2,g,n):_(S+2,g,n),S-P<=d?u(P,S,n):_(P,S,n)}},{}],41:[function(p,w,k){"use strict";w.exports={init:n,sweepBipartite:c,sweepComplete:m,scanBipartite:o,scanComplete:t};var d=p("typedarray-pool"),e=p("bit-twiddle"),u=p("./sort"),s=1<<28,l=1024,b=d.mallocInt32(l),v=d.mallocInt32(l),y=d.mallocInt32(l),T=d.mallocInt32(l),_=d.mallocInt32(l),f=d.mallocInt32(l),g=d.mallocDouble(l*8);function n(i){var r=e.nextPow2(i);b.length<r&&(d.free(b),b=d.mallocInt32(r)),v.length<r&&(d.free(v),v=d.mallocInt32(r)),y.length<r&&(d.free(y),y=d.mallocInt32(r)),T.length<r&&(d.free(T),T=d.mallocInt32(r)),_.length<r&&(d.free(_),_=d.mallocInt32(r)),f.length<r&&(d.free(f),f=d.mallocInt32(r));var x=8*r;g.length<x&&(d.free(g),g=d.mallocDouble(x))}function a(i,r,x,A){var E=r[A],P=i[x-1];i[E]=P,r[P]=E}function h(i,r,x,A){i[x]=A,r[A]=x}function c(i,r,x,A,E,P,S,C,M,I){for(var G=0,V=2*i,q=i-1,ee=V-1,Q=x;Q<A;++Q){var U=P[Q],O=V*Q;g[G++]=E[O+q],g[G++]=-(U+1),g[G++]=E[O+ee],g[G++]=U}for(var Q=S;Q<C;++Q){var U=I[Q]+s,Z=V*Q;g[G++]=M[Z+q],g[G++]=-U,g[G++]=M[Z+ee],g[G++]=U}var B=G>>>1;u(g,B);for(var Y=0,j=0,Q=0;Q<B;++Q){var X=g[2*Q+1]|0;if(X>=s)X=X-s|0,a(y,T,j--,X);else if(X>=0)a(b,v,Y--,X);else if(X<=-s){X=-X-s|0;for(var H=0;H<Y;++H){var K=r(b[H],X);if(K!==void 0)return K}h(y,T,j++,X)}else{X=-X-1|0;for(var H=0;H<j;++H){var K=r(X,y[H]);if(K!==void 0)return K}h(b,v,Y++,X)}}}function m(i,r,x,A,E,P,S,C,M,I){for(var G=0,V=2*i,q=i-1,ee=V-1,Q=x;Q<A;++Q){var U=P[Q]+1<<1,O=V*Q;g[G++]=E[O+q],g[G++]=-U,g[G++]=E[O+ee],g[G++]=U}for(var Q=S;Q<C;++Q){var U=I[Q]+1<<1,Z=V*Q;g[G++]=M[Z+q],g[G++]=-U|1,g[G++]=M[Z+ee],g[G++]=U|1}var B=G>>>1;u(g,B);for(var Y=0,j=0,X=0,Q=0;Q<B;++Q){var H=g[2*Q+1]|0,K=H&1;if(Q<B-1&&H>>1===g[2*Q+3]>>1&&(K=2,Q+=1),H<0){for(var W=-(H>>1)-1,$=0;$<X;++$){var re=r(_[$],W);if(re!==void 0)return re}if(K!==0)for(var $=0;$<Y;++$){var re=r(b[$],W);if(re!==void 0)return re}if(K!==1)for(var $=0;$<j;++$){var re=r(y[$],W);if(re!==void 0)return re}K===0?h(b,v,Y++,W):K===1?h(y,T,j++,W):K===2&&h(_,f,X++,W)}else{var W=(H>>1)-1;K===0?a(b,v,Y--,W):K===1?a(y,T,j--,W):K===2&&a(_,f,X--,W)}}}function o(i,r,x,A,E,P,S,C,M,I,G,V){var q=0,ee=2*i,Q=r,U=r+i,O=1,Z=1;A?Z=s:O=s;for(var B=E;B<P;++B){var Y=B+O,j=ee*B;g[q++]=S[j+Q],g[q++]=-Y,g[q++]=S[j+U],g[q++]=Y}for(var B=M;B<I;++B){var Y=B+Z,X=ee*B;g[q++]=G[X+Q],g[q++]=-Y}var H=q>>>1;u(g,H);for(var K=0,B=0;B<H;++B){var W=g[2*B+1]|0;if(W<0){var Y=-W,$=!1;if(Y>=s?($=!A,Y-=s):($=!!A,Y-=1),$)h(b,v,K++,Y);else{var re=V[Y],de=ee*Y,ve=G[de+r+1],ue=G[de+r+1+i];e:for(var ce=0;ce<K;++ce){var _e=b[ce],fe=ee*_e;if(!(ue<S[fe+r+1]||S[fe+r+1+i]<ve)){for(var ne=r+2;ne<i;++ne)if(G[de+ne+i]<S[fe+ne]||S[fe+ne+i]<G[de+ne])continue e;var ie=C[_e],me;if(A?me=x(re,ie):me=x(ie,re),me!==void 0)return me}}}}else a(b,v,K--,W-O)}}function t(i,r,x,A,E,P,S,C,M,I,G){for(var V=0,q=2*i,ee=r,Q=r+i,U=A;U<E;++U){var O=U+s,Z=q*U;g[V++]=P[Z+ee],g[V++]=-O,g[V++]=P[Z+Q],g[V++]=O}for(var U=C;U<M;++U){var O=U+1,B=q*U;g[V++]=I[B+ee],g[V++]=-O}var Y=V>>>1;u(g,Y);for(var j=0,U=0;U<Y;++U){var X=g[2*U+1]|0;if(X<0){var O=-X;if(O>=s)b[j++]=O-s;else{O-=1;var H=G[O],K=q*O,W=I[K+r+1],$=I[K+r+1+i];e:for(var re=0;re<j;++re){var de=b[re],ve=S[de];if(ve===H)break;var ue=q*de;if(!($<P[ue+r+1]||P[ue+r+1+i]<W)){for(var ce=r+2;ce<i;++ce)if(I[K+ce+i]<P[ue+ce]||P[ue+ce+i]<I[K+ce])continue e;var _e=x(ve,H);if(_e!==void 0)return _e}}}}else{for(var O=X-s,re=j-1;re>=0;--re)if(b[re]===O){for(var ce=re+1;ce<j;++ce)b[ce-1]=b[ce];break}--j}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(p,w,k){"use strict";var d=p("./lib/monotone"),e=p("./lib/triangulation"),u=p("./lib/delaunay"),s=p("./lib/filter");w.exports=T;function l(_){return[Math.min(_[0],_[1]),Math.max(_[0],_[1])]}function b(_,f){return _[0]-f[0]||_[1]-f[1]}function v(_){return _.map(l).sort(b)}function y(_,f,g){return f in _?_[f]:g}function T(_,f,g){Array.isArray(f)?(g=g||{},f=f||[]):(g=f||{},f=[]);var n=!!y(g,"delaunay",!0),a=!!y(g,"interior",!0),h=!!y(g,"exterior",!0),c=!!y(g,"infinity",!1);if(!a&&!h||_.length===0)return[];var m=d(_,f);if(n||a!==h||c){for(var o=e(_.length,v(f)),t=0;t<m.length;++t){var i=m[t];o.addTriangle(i[0],i[1],i[2])}return n&&u(_,o),h?a?c?s(o,0,c):o.cells():s(o,1,c):s(o,-1)}else return m}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(p,w,k){"use strict";var d=p("robust-in-sphere")[4],e=p("binary-search-bounds");w.exports=s;function u(l,b,v,y,T,_){var f=b.opposite(y,T);if(!(f<0)){if(T<y){var g=y;y=T,T=g,g=_,_=f,f=g}b.isConstraint(y,T)||d(l[y],l[T],l[_],l[f])<0&&v.push(y,T)}}function s(l,b){for(var v=[],y=l.length,T=b.stars,_=0;_<y;++_)for(var f=T[_],g=1;g<f.length;g+=2){var n=f[g];if(!(n<_)&&!b.isConstraint(_,n)){for(var a=f[g-1],h=-1,c=1;c<f.length;c+=2)if(f[c-1]===n){h=f[c];break}h<0||d(l[_],l[n],l[a],l[h])<0&&v.push(_,n)}}for(;v.length>0;){for(var n=v.pop(),_=v.pop(),a=-1,h=-1,f=T[_],m=1;m<f.length;m+=2){var o=f[m-1],t=f[m];o===n?h=t:t===n&&(a=o)}a<0||h<0||d(l[_],l[n],l[a],l[h])>=0||(b.flip(_,n),u(l,b,v,a,_,h),u(l,b,v,_,h,a),u(l,b,v,h,n,a),u(l,b,v,n,a,h))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(p,w,k){"use strict";var d=p("binary-search-bounds");w.exports=v;function e(y,T,_,f,g,n,a){this.cells=y,this.neighbor=T,this.flags=f,this.constraint=_,this.active=g,this.next=n,this.boundary=a}var u=e.prototype;function s(y,T){return y[0]-T[0]||y[1]-T[1]||y[2]-T[2]}u.locate=function(){var y=[0,0,0];return function(T,_,f){var g=T,n=_,a=f;return _<f?_<T&&(g=_,n=f,a=T):f<T&&(g=f,n=T,a=_),g<0?-1:(y[0]=g,y[1]=n,y[2]=a,d.eq(this.cells,y,s))}}();function l(y,T){for(var _=y.cells(),f=_.length,g=0;g<f;++g){var n=_[g],a=n[0],h=n[1],c=n[2];h<c?h<a&&(n[0]=h,n[1]=c,n[2]=a):c<a&&(n[0]=c,n[1]=a,n[2]=h)}_.sort(s);for(var m=new Array(f),g=0;g<m.length;++g)m[g]=0;var o=[],t=[],i=new Array(3*f),r=new Array(3*f),x=null;T&&(x=[]);for(var A=new e(_,i,r,m,o,t,x),g=0;g<f;++g)for(var n=_[g],E=0;E<3;++E){var a=n[E],h=n[(E+1)%3],P=i[3*g+E]=A.locate(h,a,y.opposite(h,a)),S=r[3*g+E]=y.isConstraint(a,h);P<0&&(S?t.push(g):(o.push(g),m[g]=1),T&&x.push([h,a,-1]))}return A}function b(y,T,_){for(var f=0,g=0;g<y.length;++g)T[g]===_&&(y[f++]=y[g]);return y.length=f,y}function v(y,T,_){var f=l(y,_);if(T===0)return _?f.cells.concat(f.boundary):f.cells;for(var g=1,n=f.active,a=f.next,h=f.flags,c=f.cells,m=f.constraint,o=f.neighbor;n.length>0||a.length>0;){for(;n.length>0;){var t=n.pop();if(h[t]!==-g){h[t]=g;for(var i=c[t],r=0;r<3;++r){var x=o[3*t+r];x>=0&&h[x]===0&&(m[3*t+r]?a.push(x):(n.push(x),h[x]=g))}}}var A=a;a=n,n=A,a.length=0,g=-g}var E=b(c,h,T);return _?E.concat(f.boundary):E}},{"binary-search-bounds":31}],45:[function(p,w,k){"use strict";var d=p("binary-search-bounds"),e=p("robust-orientation")[3],u=0,s=1,l=2;w.exports=a;function b(h,c,m,o,t){this.a=h,this.b=c,this.idx=m,this.lowerIds=o,this.upperIds=t}function v(h,c,m,o){this.a=h,this.b=c,this.type=m,this.idx=o}function y(h,c){var m=h.a[0]-c.a[0]||h.a[1]-c.a[1]||h.type-c.type;return m||h.type!==u&&(m=e(h.a,h.b,c.b),m)?m:h.idx-c.idx}function T(h,c){return e(h.a,h.b,c)}function _(h,c,m,o,t){for(var i=d.lt(c,o,T),r=d.gt(c,o,T),x=i;x<r;++x){for(var A=c[x],E=A.lowerIds,S=E.length;S>1&&e(m[E[S-2]],m[E[S-1]],o)>0;)h.push([E[S-1],E[S-2],t]),S-=1;E.length=S,E.push(t);for(var P=A.upperIds,S=P.length;S>1&&e(m[P[S-2]],m[P[S-1]],o)<0;)h.push([P[S-2],P[S-1],t]),S-=1;P.length=S,P.push(t)}}function f(h,c){var m;return h.a[0]<c.a[0]?m=e(h.a,h.b,c.a):m=e(c.b,c.a,h.a),m||(c.b[0]<h.b[0]?m=e(h.a,h.b,c.b):m=e(c.b,c.a,h.b),m||h.idx-c.idx)}function g(h,c,m){var o=d.le(h,m,f),t=h[o],i=t.upperIds,r=i[i.length-1];t.upperIds=[r],h.splice(o+1,0,new b(m.a,m.b,m.idx,[r],i))}function n(h,c,m){var o=m.a;m.a=m.b,m.b=o;var t=d.eq(h,m,f),i=h[t],r=h[t-1];r.upperIds=i.upperIds,h.splice(t,1)}function a(h,c){for(var m=h.length,o=c.length,t=[],i=0;i<m;++i)t.push(new v(h[i],null,u,i));for(var i=0;i<o;++i){var r=c[i],x=h[r[0]],A=h[r[1]];x[0]<A[0]?t.push(new v(x,A,l,i),new v(A,x,s,i)):x[0]>A[0]&&t.push(new v(A,x,l,i),new v(x,A,s,i))}t.sort(y);for(var E=t[0].a[0]-(1+Math.abs(t[0].a[0]))*Math.pow(2,-52),P=[new b([E,1],[E,0],-1,[],[],[],[])],S=[],i=0,C=t.length;i<C;++i){var M=t[i],I=M.type;I===u?_(S,P,h,M.a,M.idx):I===l?g(P,h,M):n(P,h,M)}return S}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(p,w,k){"use strict";var d=p("binary-search-bounds");w.exports=l;function e(b,v){this.stars=b,this.edges=v}var u=e.prototype;function s(b,v,y){for(var T=1,_=b.length;T<_;T+=2)if(b[T-1]===v&&b[T]===y){b[T-1]=b[_-2],b[T]=b[_-1],b.length=_-2;return}}u.isConstraint=function(){var b=[0,0];function v(y,T){return y[0]-T[0]||y[1]-T[1]}return function(y,T){return b[0]=Math.min(y,T),b[1]=Math.max(y,T),d.eq(this.edges,b,v)>=0}}(),u.removeTriangle=function(b,v,y){var T=this.stars;s(T[b],v,y),s(T[v],y,b),s(T[y],b,v)},u.addTriangle=function(b,v,y){var T=this.stars;T[b].push(v,y),T[v].push(y,b),T[y].push(b,v)},u.opposite=function(b,v){for(var y=this.stars[v],T=1,_=y.length;T<_;T+=2)if(y[T]===b)return y[T-1];return-1},u.flip=function(b,v){var y=this.opposite(b,v),T=this.opposite(v,b);this.removeTriangle(b,v,y),this.removeTriangle(v,b,T),this.addTriangle(b,T,y),this.addTriangle(v,y,T)},u.edges=function(){for(var b=this.stars,v=[],y=0,T=b.length;y<T;++y)for(var _=b[y],f=0,g=_.length;f<g;f+=2)v.push([_[f],_[f+1]]);return v},u.cells=function(){for(var b=this.stars,v=[],y=0,T=b.length;y<T;++y)for(var _=b[y],f=0,g=_.length;f<g;f+=2){var n=_[f],a=_[f+1];y<Math.min(n,a)&&v.push([y,n,a])}return v};function l(b,v){for(var y=new Array(b),T=0;T<b;++T)y[T]=[];return new e(y,v)}},{"binary-search-bounds":31}],47:[function(p,w,k){"use strict";w.exports=d;function d(e){for(var u=1,s=1;s<e.length;++s)for(var l=0;l<s;++l)if(e[s]<e[l])u=-u;else if(e[l]===e[s])return 0;return u}},{}],48:[function(p,w,k){"use strict";var d=p("dup"),e=p("robust-linear-solve");function u(b,v){for(var y=0,T=b.length,_=0;_<T;++_)y+=b[_]*v[_];return y}function s(b){var v=b.length;if(v===0)return[];var y=b[0].length,T=d([b.length+1,b.length+1],1),_=d([b.length+1],1);T[v][v]=0;for(var f=0;f<v;++f){for(var g=0;g<=f;++g)T[g][f]=T[f][g]=2*u(b[f],b[g]);_[f]=u(b[f],b[f])}for(var n=e(T,_),a=0,h=n[v+1],f=0;f<h.length;++f)a+=h[f];for(var c=new Array(v),f=0;f<v;++f){for(var h=n[f],m=0,g=0;g<h.length;++g)m+=h[g];c[f]=m/a}return c}function l(b){if(b.length===0)return[];for(var v=b[0].length,y=d([v]),T=s(b),_=0;_<b.length;++_)for(var f=0;f<v;++f)y[f]+=b[_][f]*T[_];return y}l.barycenetric=s,w.exports=l},{dup:65,"robust-linear-solve":283}],49:[function(p,w,k){w.exports=e;var d=p("circumcenter");function e(u){for(var s=d(u),l=0,b=0;b<u.length;++b)for(var v=u[b],y=0;y<s.length;++y)l+=Math.pow(v[y]-s[y],2);return Math.sqrt(l/u.length)}},{circumcenter:48}],50:[function(p,w,k){"use strict";w.exports=x;var d=p("union-find"),e=p("box-intersect"),u=p("robust-segment-intersect"),s=p("big-rat"),l=p("big-rat/cmp"),b=p("big-rat/to-float"),v=p("rat-vec"),y=p("nextafter"),T=p("./lib/rat-seg-intersect");function _(A){var E=b(A);return[y(E,-1/0),y(E,1/0)]}function f(A,E){for(var P=new Array(E.length),S=0;S<E.length;++S){var C=E[S],M=A[C[0]],I=A[C[1]];P[S]=[y(Math.min(M[0],I[0]),-1/0),y(Math.min(M[1],I[1]),-1/0),y(Math.max(M[0],I[0]),1/0),y(Math.max(M[1],I[1]),1/0)]}return P}function g(A){for(var E=new Array(A.length),P=0;P<A.length;++P){var S=A[P];E[P]=[y(S[0],-1/0),y(S[1],-1/0),y(S[0],1/0),y(S[1],1/0)]}return E}function n(A,E,P){var S=[];return e(P,function(C,M){var I=E[C],G=E[M];if(!(I[0]===G[0]||I[0]===G[1]||I[1]===G[0]||I[1]===G[1])){var V=A[I[0]],q=A[I[1]],ee=A[G[0]],Q=A[G[1]];u(V,q,ee,Q)&&S.push([C,M])}}),S}function a(A,E,P,S){var C=[];return e(P,S,function(M,I){var G=E[M];if(!(G[0]===I||G[1]===I)){var V=A[I],q=A[G[0]],ee=A[G[1]];u(q,ee,V,V)&&C.push([M,I])}}),C}function h(A,E,P,S,C){var M,I,G=A.map(function(de){return[s(de[0]),s(de[1])]});for(M=0;M<P.length;++M){var V=P[M];I=V[0];var q=V[1],ee=E[I],Q=E[q],U=T(v(A[ee[0]]),v(A[ee[1]]),v(A[Q[0]]),v(A[Q[1]]));if(!!U){var O=A.length;A.push([b(U[0]),b(U[1])]),G.push(U),S.push([I,O],[q,O])}}for(S.sort(function(de,ve){if(de[0]!==ve[0])return de[0]-ve[0];var ue=G[de[1]],ce=G[ve[1]];return l(ue[0],ce[0])||l(ue[1],ce[1])}),M=S.length-1;M>=0;--M){var Z=S[M];I=Z[0];var B=E[I],Y=B[0],j=B[1],X=A[Y],H=A[j];if((X[0]-H[0]||X[1]-H[1])<0){var K=Y;Y=j,j=K}B[0]=Y;var W=B[1]=Z[1],$;for(C&&($=B[2]);M>0&&S[M-1][0]===I;){var Z=S[--M],re=Z[1];C?E.push([W,re,$]):E.push([W,re]),W=re}C?E.push([W,j,$]):E.push([W,j])}return G}function c(A,E,P){for(var S=E.length,C=new d(S),M=[],I=0;I<E.length;++I){var G=E[I],V=_(G[0]),q=_(G[1]);M.push([y(V[0],-1/0),y(q[0],-1/0),y(V[1],1/0),y(q[1],1/0)])}e(M,function(Z,B){C.link(Z,B)});for(var ee=!0,Q=new Array(S),I=0;I<S;++I){var U=C.find(I);U!==I&&(ee=!1,A[U]=[Math.min(A[I][0],A[U][0]),Math.min(A[I][1],A[U][1])])}if(ee)return null;for(var O=0,I=0;I<S;++I){var U=C.find(I);U===I?(Q[I]=O,A[O++]=A[I]):Q[I]=-1}A.length=O;for(var I=0;I<S;++I)Q[I]<0&&(Q[I]=Q[C.find(I)]);return Q}function m(A,E){return A[0]-E[0]||A[1]-E[1]}function o(A,E){var P=A[0]-E[0]||A[1]-E[1];return P||(A[2]<E[2]?-1:A[2]>E[2]?1:0)}function t(A,E,P){if(A.length!==0){if(E)for(var S=0;S<A.length;++S){var C=A[S],M=E[C[0]],I=E[C[1]];C[0]=Math.min(M,I),C[1]=Math.max(M,I)}else for(var S=0;S<A.length;++S){var C=A[S],M=C[0],I=C[1];C[0]=Math.min(M,I),C[1]=Math.max(M,I)}P?A.sort(o):A.sort(m);for(var G=1,S=1;S<A.length;++S){var V=A[S-1],q=A[S];q[0]===V[0]&&q[1]===V[1]&&(!P||q[2]===V[2])||(A[G++]=q)}A.length=G}}function i(A,E,P){var S=c(A,[],g(A));return t(E,S,P),!!S}function r(A,E,P){var S=f(A,E),C=n(A,E,S),M=g(A),I=a(A,E,S,M),G=h(A,E,C,I,P),V=c(A,G,M);return t(E,V,P),V?!0:C.length>0||I.length>0}function x(A,E,P){var S;if(P){S=E;for(var C=new Array(E.length),M=0;M<E.length;++M){var I=E[M];C[M]=[I[0],I[1],P[M]]}E=C}for(var G=i(A,E,!!P);r(A,E,!!P);)G=!0;if(!!P&&G){S.length=0,P.length=0;for(var M=0;M<E.length;++M){var I=E[M];S.push([I[0],I[1]]),P.push(I[2])}}return G}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(p,w,k){"use strict";w.exports=T;var d=p("big-rat/mul"),e=p("big-rat/div"),u=p("big-rat/sub"),s=p("big-rat/sign"),l=p("rat-vec/sub"),b=p("rat-vec/add"),v=p("rat-vec/muls");function y(_,f){return u(d(_[0],f[1]),d(_[1],f[0]))}function T(_,f,g,n){var a=l(f,_),h=l(n,g),c=y(a,h);if(s(c)===0)return null;var m=l(_,g),o=y(h,m),t=e(o,c),i=v(a,t),r=b(_,i);return r}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(p,w,k){w.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(p,w,k){"use strict";var d=p("./colorScale"),e=p("lerp");w.exports=u;function u(v){var y,T,_,f,g,n,a,h,t,c,m;if(v||(v={}),h=(v.nshades||72)-1,a=v.format||"hex",n=v.colormap,n||(n="jet"),typeof n=="string"){if(n=n.toLowerCase(),!d[n])throw Error(n+" not a supported colorscale");g=d[n]}else if(Array.isArray(n))g=n.slice();else throw Error("unsupported colormap option",n);if(g.length>h+1)throw new Error(n+" map requires nshades to be at least size "+g.length);Array.isArray(v.alpha)?v.alpha.length!==2?c=[1,1]:c=v.alpha.slice():typeof v.alpha=="number"?c=[v.alpha,v.alpha]:c=[1,1],y=g.map(function(x){return Math.round(x.index*h)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var o=g.map(function(x,A){var E=g[A].index,P=g[A].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=c[0]+(c[1]-c[0])*E),P}),t=[];for(m=0;m<y.length-1;++m){f=y[m+1]-y[m],T=o[m],_=o[m+1];for(var i=0;i<f;i++){var r=i/f;t.push([Math.round(e(T[0],_[0],r)),Math.round(e(T[1],_[1],r)),Math.round(e(T[2],_[2],r)),e(T[3],_[3],r)])}}return t.push(g[g.length-1].rgb.concat(c[1])),a==="hex"?t=t.map(l):a==="rgbaString"?t=t.map(b):a==="float"&&(t=t.map(s)),t}function s(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function l(v){for(var y,T="#",_=0;_<3;++_)y=v[_],y=y.toString(16),T+=("00"+y).substr(y.length);return T}function b(v){return"rgba("+v.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(p,w,k){"use strict";w.exports=v;var d=p("robust-orientation"),e=p("signum"),u=p("two-sum"),s=p("robust-product"),l=p("robust-sum");function b(y,T,_){var f=u(y[0],-T[0]),g=u(y[1],-T[1]),n=u(_[0],-T[0]),a=u(_[1],-T[1]),h=l(s(f,n),s(g,a));return h[h.length-1]>=0}function v(y,T,_,f){var g=d(T,_,f);if(g===0){var n=e(d(y,T,_)),a=e(d(y,T,f));if(n===a){if(n===0){var h=b(y,T,_),c=b(y,T,f);return h===c?0:h?1:-1}return 0}else{if(a===0)return n>0||b(y,T,f)?-1:1;if(n===0)return a>0||b(y,T,_)?1:-1}return e(a-n)}var m=d(y,T,_);if(m>0)return g>0&&d(y,T,f)>0?1:-1;if(m<0)return g>0||d(y,T,f)>0?1:-1;var o=d(y,T,f);return o>0||b(y,T,_)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(p,w,k){"use strict";w.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(p,w,k){w.exports=u;var d=Math.min;function e(s,l){return s-l}function u(s,l){var b=s.length,v=s.length-l.length;if(v)return v;switch(b){case 0:return 0;case 1:return s[0]-l[0];case 2:return s[0]+s[1]-l[0]-l[1]||d(s[0],s[1])-d(l[0],l[1]);case 3:var y=s[0]+s[1],T=l[0]+l[1];if(v=y+s[2]-(T+l[2]),v)return v;var _=d(s[0],s[1]),f=d(l[0],l[1]);return d(_,s[2])-d(f,l[2])||d(_+s[2],y)-d(f+l[2],T);case 4:var g=s[0],n=s[1],a=s[2],h=s[3],c=l[0],m=l[1],o=l[2],t=l[3];return g+n+a+h-(c+m+o+t)||d(g,n,a,h)-d(c,m,o,t,c)||d(g+n,g+a,g+h,n+a,n+h,a+h)-d(c+m,c+o,c+t,m+o,m+t,o+t)||d(g+n+a,g+n+h,g+a+h,n+a+h)-d(c+m+o,c+m+t,c+o+t,m+o+t);default:for(var i=s.slice().sort(e),r=l.slice().sort(e),x=0;x<b;++x)if(v=i[x]-r[x],v)return v;return 0}}},{}],57:[function(p,w,k){"use strict";var d=p("compare-cell"),e=p("cell-orientation");w.exports=u;function u(s,l){return d(s,l)||e(s)-e(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(p,w,k){"use strict";var d=p("./lib/ch1d"),e=p("./lib/ch2d"),u=p("./lib/chnd");w.exports=s;function s(l){var b=l.length;if(b===0)return[];if(b===1)return[[0]];var v=l[0].length;return v===0?[]:v===1?d(l):v===2?e(l):u(l,v)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(p,w,k){"use strict";w.exports=d;function d(e){for(var u=0,s=0,l=1;l<e.length;++l)e[l][0]<e[u][0]&&(u=l),e[l][0]>e[s][0]&&(s=l);return u<s?[[u],[s]]:u>s?[[s],[u]]:[[u]]}},{}],60:[function(p,w,k){"use strict";w.exports=e;var d=p("monotone-convex-hull-2d");function e(u){var s=d(u),l=s.length;if(l<=2)return[];for(var b=new Array(l),v=s[l-1],y=0;y<l;++y){var T=s[y];b[y]=[v,T],v=T}return b}},{"monotone-convex-hull-2d":246}],61:[function(p,w,k){"use strict";w.exports=l;var d=p("incremental-convex-hull"),e=p("affine-hull");function u(b,v){for(var y=b.length,T=new Array(y),_=0;_<v.length;++_)T[_]=b[v[_]];for(var f=v.length,_=0;_<y;++_)v.indexOf(_)<0&&(T[f++]=b[_]);return T}function s(b,v){for(var y=b.length,T=v.length,_=0;_<y;++_)for(var f=b[_],g=0;g<f.length;++g){var n=f[g];if(n<T)f[g]=v[n];else{n=n-T;for(var a=0;a<T;++a)n>=v[a]&&(n+=1);f[g]=n}}return b}function l(b,v){try{return d(b,!0)}catch{var y=e(b);if(y.length<=v)return[];var T=u(b,y),_=d(T,!0);return s(_,y)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(p,w,k){"use strict";function d(u,s,l,b,v,y){var T=6*v*v-6*v,_=3*v*v-4*v+1,f=-6*v*v+6*v,g=3*v*v-2*v;if(u.length){y||(y=new Array(u.length));for(var n=u.length-1;n>=0;--n)y[n]=T*u[n]+_*s[n]+f*l[n]+g*b[n];return y}return T*u+_*s+f*l[n]+g*b}function e(u,s,l,b,v,y){var T=v-1,_=v*v,f=T*T,g=(1+2*v)*f,n=v*f,a=_*(3-2*v),h=_*T;if(u.length){y||(y=new Array(u.length));for(var c=u.length-1;c>=0;--c)y[c]=g*u[c]+n*s[c]+a*l[c]+h*b[c];return y}return g*u+n*s+a*l+h*b}w.exports=e,w.exports.derivative=d},{}],63:[function(p,w,k){"use strict";var d=p("incremental-convex-hull"),e=p("uniq");w.exports=b;function u(v,y){this.point=v,this.index=y}function s(v,y){for(var T=v.point,_=y.point,f=T.length,g=0;g<f;++g){var n=_[g]-T[g];if(n)return n}return 0}function l(v,y,T){if(v===1)return T?[[-1,0]]:[];var _=y.map(function(h,c){return[h[0],c]});_.sort(function(h,c){return h[0]-c[0]});for(var f=new Array(v-1),g=1;g<v;++g){var n=_[g-1],a=_[g];f[g-1]=[n[1],a[1]]}return T&&f.push([-1,f[0][1]],[f[v-1][1],-1]),f}function b(v,y){var T=v.length;if(T===0)return[];var _=v[0].length;if(_<1)return[];if(_===1)return l(T,v,y);for(var f=new Array(T),g=1,n=0;n<T;++n){for(var a=v[n],h=new Array(_+1),c=0,m=0;m<_;++m){var o=a[m];h[m]=o,c+=o*o}h[_]=c,f[n]=new u(h,n),g=Math.max(c,g)}e(f,s),T=f.length;for(var t=new Array(T+_+1),i=new Array(T+_+1),r=(_+1)*(_+1)*g,x=new Array(_+1),n=0;n<=_;++n)x[n]=0;x[_]=r,t[0]=x.slice(),i[0]=-1;for(var n=0;n<=_;++n){var h=x.slice();h[n]=1,t[n+1]=h,i[n+1]=-1}for(var n=0;n<T;++n){var A=f[n];t[n+_+1]=A.point,i[n+_+1]=A.index}var E=d(t,!1);if(y?E=E.filter(function(P){for(var S=0,C=0;C<=_;++C){var M=i[P[C]];if(M<0&&++S>=2)return!1;P[C]=M}return!0}):E=E.filter(function(P){for(var S=0;S<=_;++S){var C=i[P[S]];if(C<0)return!1;P[S]=C}return!0}),_&1)for(var n=0;n<E.length;++n){var A=E[n],h=A[0];A[0]=A[1],A[1]=h}return E}},{"incremental-convex-hull":233,uniq:310}],64:[function(p,w,k){(function(d){(function(){var e=!1;if(typeof Float64Array<"u"){var u=new Float64Array(1),s=new Uint32Array(u.buffer);if(u[0]=1,e=!0,s[1]===1072693248){let h=function(o,t){return s[0]=o,s[1]=t,u[0]},c=function(o){return u[0]=o,s[0]},m=function(o){return u[0]=o,s[1]};var v=h,y=c,b=m;w.exports=function(t){return u[0]=t,[s[0],s[1]]},w.exports.pack=h,w.exports.lo=c,w.exports.hi=m}else if(s[0]===1072693248){let h=function(o,t){return s[1]=o,s[0]=t,u[0]},c=function(o){return u[0]=o,s[1]},m=function(o){return u[0]=o,s[0]};var T=h,_=c,f=m;w.exports=function(t){return u[0]=t,[s[1],s[0]]},w.exports.pack=h,w.exports.lo=c,w.exports.hi=m}else e=!1}if(!e){let h=function(o,t){return l.writeUInt32LE(o,0,!0),l.writeUInt32LE(t,4,!0),l.readDoubleLE(0,!0)},c=function(o){return l.writeDoubleLE(o,0,!0),l.readUInt32LE(0,!0)},m=function(o){return l.writeDoubleLE(o,0,!0),l.readUInt32LE(4,!0)};var a=h,g=c,n=m,l=new d(8);w.exports=function(t){return l.writeDoubleLE(t,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},w.exports.pack=h,w.exports.lo=c,w.exports.hi=m}w.exports.sign=function(h){return w.exports.hi(h)>>>31},w.exports.exponent=function(h){var c=w.exports.hi(h);return(c<<1>>>21)-1023},w.exports.fraction=function(h){var c=w.exports.lo(h),m=w.exports.hi(h),o=m&(1<<20)-1;return m&2146435072&&(o+=1<<20),[c,o]},w.exports.denormalized=function(h){var c=w.exports.hi(h);return!(c&2146435072)}}).call(this)}).call(this,p("buffer").Buffer)},{buffer:3}],65:[function(p,w,k){"use strict";function d(s,l,b){var v=s[b]|0;if(v<=0)return[];var y=new Array(v),T;if(b===s.length-1)for(T=0;T<v;++T)y[T]=l;else for(T=0;T<v;++T)y[T]=d(s,l,b+1);return y}function e(s,l){var b,v;for(b=new Array(s),v=0;v<s;++v)b[v]=l;return b}function u(s,l){switch(typeof l>"u"&&(l=0),typeof s){case"number":if(s>0)return e(s|0,l);break;case"object":if(typeof s.length=="number")return d(s,l,0);break}return[]}w.exports=u},{}],66:[function(p,w,k){"use strict";w.exports=e;var d=p("uniq");function e(u,s){var l=u.length;if(typeof s!="number"){s=0;for(var b=0;b<l;++b){var v=u[b];s=Math.max(s,v[0],v[1])}s=(s|0)+1}s=s|0;for(var y=new Array(s),b=0;b<s;++b)y[b]=[];for(var b=0;b<l;++b){var v=u[b];y[v[0]].push(v[1]),y[v[1]].push(v[0])}for(var T=0;T<s;++T)d(y[T],function(_,f){return _-f});return y}},{uniq:310}],67:[function(p,w,k){"use strict";w.exports=d;function d(e,u,s){var l=u||0,b=s||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[b*e[12]-e[8],b*e[13]-e[9],b*e[14]-e[10],b*e[15]-e[11]]]}},{}],68:[function(p,w,k){"use strict";w.exports=v;var d=p("cubic-hermite"),e=p("binary-search-bounds");function u(y,T,_){return Math.min(T,Math.max(y,_))}function s(y,T,_){this.dimension=y.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var f=0;f<this.dimension;++f)this.bounds[0][f]=-1/0,this.bounds[1][f]=1/0;this._state=y.slice().reverse(),this._velocity=T.slice().reverse(),this._time=[_],this._scratch=[y.slice(),y.slice(),y.slice(),y.slice(),y.slice()]}var l=s.prototype;l.flush=function(y){var T=e.gt(this._time,y)-1;T<=0||(this._time.splice(0,T),this._state.splice(0,T*this.dimension),this._velocity.splice(0,T*this.dimension))},l.curve=function(y){var T=this._time,_=T.length,f=e.le(T,y),g=this._scratch[0],n=this._state,a=this._velocity,h=this.dimension,c=this.bounds;if(f<0)for(var m=h-1,o=0;o<h;++o,--m)g[o]=n[m];else if(f>=_-1)for(var m=n.length-1,t=y-T[_-1],o=0;o<h;++o,--m)g[o]=n[m]+t*a[m];else{for(var m=h*(f+1)-1,i=T[f],r=T[f+1],x=r-i||1,A=this._scratch[1],E=this._scratch[2],P=this._scratch[3],S=this._scratch[4],C=!0,o=0;o<h;++o,--m)A[o]=n[m],P[o]=a[m]*x,E[o]=n[m+h],S[o]=a[m+h]*x,C=C&&A[o]===E[o]&&P[o]===S[o]&&P[o]===0;if(C)for(var o=0;o<h;++o)g[o]=A[o];else d(A,P,E,S,(y-i)/x,g)}for(var M=c[0],I=c[1],o=0;o<h;++o)g[o]=u(M[o],I[o],g[o]);return g},l.dcurve=function(y){var T=this._time,_=T.length,f=e.le(T,y),g=this._scratch[0],n=this._state,a=this._velocity,h=this.dimension;if(f>=_-1)for(var c=n.length-1,m=y-T[_-1],o=0;o<h;++o,--c)g[o]=a[c];else{for(var c=h*(f+1)-1,t=T[f],i=T[f+1],r=i-t||1,x=this._scratch[1],A=this._scratch[2],E=this._scratch[3],P=this._scratch[4],S=!0,o=0;o<h;++o,--c)x[o]=n[c],E[o]=a[c]*r,A[o]=n[c+h],P[o]=a[c+h]*r,S=S&&x[o]===A[o]&&E[o]===P[o]&&E[o]===0;if(S)for(var o=0;o<h;++o)g[o]=0;else{d.derivative(x,E,A,P,(y-t)/r,g);for(var o=0;o<h;++o)g[o]/=r}}return g},l.lastT=function(){var y=this._time;return y[y.length-1]},l.stable=function(){for(var y=this._velocity,T=y.length,_=this.dimension-1;_>=0;--_)if(y[--T])return!1;return!0},l.jump=function(y){var T=this.lastT(),_=this.dimension;if(!(y<T||arguments.length!==_+1)){var f=this._state,g=this._velocity,n=f.length-this.dimension,a=this.bounds,h=a[0],c=a[1];this._time.push(T,y);for(var m=0;m<2;++m)for(var o=0;o<_;++o)f.push(f[n++]),g.push(0);this._time.push(y);for(var o=_;o>0;--o)f.push(u(h[o-1],c[o-1],arguments[o])),g.push(0)}},l.push=function(y){var T=this.lastT(),_=this.dimension;if(!(y<T||arguments.length!==_+1)){var f=this._state,g=this._velocity,n=f.length-this.dimension,a=y-T,h=this.bounds,c=h[0],m=h[1],o=a>1e-6?1/a:0;this._time.push(y);for(var t=_;t>0;--t){var i=u(c[t-1],m[t-1],arguments[t]);f.push(i),g.push((i-f[n++])*o)}}},l.set=function(y){var T=this.dimension;if(!(y<this.lastT()||arguments.length!==T+1)){var _=this._state,f=this._velocity,g=this.bounds,n=g[0],a=g[1];this._time.push(y);for(var h=T;h>0;--h)_.push(u(n[h-1],a[h-1],arguments[h])),f.push(0)}},l.move=function(y){var T=this.lastT(),_=this.dimension;if(!(y<=T||arguments.length!==_+1)){var f=this._state,g=this._velocity,n=f.length-this.dimension,a=this.bounds,h=a[0],c=a[1],m=y-T,o=m>1e-6?1/m:0;this._time.push(y);for(var t=_;t>0;--t){var i=arguments[t];f.push(u(h[t-1],c[t-1],f[n++]+i)),g.push(i*o)}}},l.idle=function(y){var T=this.lastT();if(!(y<T)){var _=this.dimension,f=this._state,g=this._velocity,n=f.length-_,a=this.bounds,h=a[0],c=a[1],m=y-T;this._time.push(y);for(var o=_-1;o>=0;--o)f.push(u(h[o],c[o],f[n]+m*g[n])),g.push(0),n+=1}};function b(y){for(var T=new Array(y),_=0;_<y;++_)T[_]=0;return T}function v(y,T,_){switch(arguments.length){case 0:return new s([0],[0],0);case 1:if(typeof y=="number"){var f=b(y);return new s(f,f,0)}else return new s(y,b(y.length),0);case 2:if(typeof T=="number"){var f=b(y.length);return new s(y,f,+T)}else _=0;case 3:if(y.length!==T.length)throw new Error("state and velocity lengths must match");return new s(y,T,_)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(p,w,k){"use strict";w.exports=m;var d=0,e=1;function u(o,t,i,r,x,A){this._color=o,this.key=t,this.value=i,this.left=r,this.right=x,this._count=A}function s(o){return new u(o._color,o.key,o.value,o.left,o.right,o._count)}function l(o,t){return new u(o,t.key,t.value,t.left,t.right,t._count)}function b(o){o._count=1+(o.left?o.left._count:0)+(o.right?o.right._count:0)}function v(o,t){this._compare=o,this.root=t}var y=v.prototype;Object.defineProperty(y,"keys",{get:function(){var o=[];return this.forEach(function(t,i){o.push(t)}),o}}),Object.defineProperty(y,"values",{get:function(){var o=[];return this.forEach(function(t,i){o.push(i)}),o}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(o,t){for(var i=this._compare,r=this.root,x=[],A=[];r;){var E=i(o,r.key);x.push(r),A.push(E),E<=0?r=r.left:r=r.right}x.push(new u(d,o,t,null,null,1));for(var P=x.length-2;P>=0;--P){var r=x[P];A[P]<=0?x[P]=new u(r._color,r.key,r.value,x[P+1],r.right,r._count+1):x[P]=new u(r._color,r.key,r.value,r.left,x[P+1],r._count+1)}for(var P=x.length-1;P>1;--P){var S=x[P-1],r=x[P];if(S._color===e||r._color===e)break;var C=x[P-2];if(C.left===S)if(S.left===r){var M=C.right;if(M&&M._color===d)S._color=e,C.right=l(e,M),C._color=d,P-=1;else{if(C._color=d,C.left=S.right,S._color=e,S.right=C,x[P-2]=S,x[P-1]=r,b(C),b(S),P>=3){var I=x[P-3];I.left===C?I.left=S:I.right=S}break}}else{var M=C.right;if(M&&M._color===d)S._color=e,C.right=l(e,M),C._color=d,P-=1;else{if(S.right=r.left,C._color=d,C.left=r.right,r._color=e,r.left=S,r.right=C,x[P-2]=r,x[P-1]=S,b(C),b(S),b(r),P>=3){var I=x[P-3];I.left===C?I.left=r:I.right=r}break}}else if(S.right===r){var M=C.left;if(M&&M._color===d)S._color=e,C.left=l(e,M),C._color=d,P-=1;else{if(C._color=d,C.right=S.left,S._color=e,S.left=C,x[P-2]=S,x[P-1]=r,b(C),b(S),P>=3){var I=x[P-3];I.right===C?I.right=S:I.left=S}break}}else{var M=C.left;if(M&&M._color===d)S._color=e,C.left=l(e,M),C._color=d,P-=1;else{if(S.left=r.right,C._color=d,C.right=r.left,r._color=e,r.right=S,r.left=C,x[P-2]=r,x[P-1]=S,b(C),b(S),b(r),P>=3){var I=x[P-3];I.right===C?I.right=r:I.left=r}break}}}return x[0]._color=e,new v(i,x[0])};function T(o,t){if(t.left){var i=T(o,t.left);if(i)return i}var i=o(t.key,t.value);if(i)return i;if(t.right)return T(o,t.right)}function _(o,t,i,r){var x=t(o,r.key);if(x<=0){if(r.left){var A=_(o,t,i,r.left);if(A)return A}var A=i(r.key,r.value);if(A)return A}if(r.right)return _(o,t,i,r.right)}function f(o,t,i,r,x){var A=i(o,x.key),E=i(t,x.key),P;if(A<=0&&(x.left&&(P=f(o,t,i,r,x.left),P)||E>0&&(P=r(x.key,x.value),P)))return P;if(E>0&&x.right)return f(o,t,i,r,x.right)}y.forEach=function(t,i,r){if(!!this.root)switch(arguments.length){case 1:return T(t,this.root);case 2:return _(i,this._compare,t,this.root);case 3:return this._compare(i,r)>=0?void 0:f(i,r,this._compare,t,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var o=[],t=this.root;t;)o.push(t),t=t.left;return new g(this,o)}}),Object.defineProperty(y,"end",{get:function(){for(var o=[],t=this.root;t;)o.push(t),t=t.right;return new g(this,o)}}),y.at=function(o){if(o<0)return new g(this,[]);for(var t=this.root,i=[];;){if(i.push(t),t.left){if(o<t.left._count){t=t.left;continue}o-=t.left._count}if(!o)return new g(this,i);if(o-=1,t.right){if(o>=t.right._count)break;t=t.right}else break}return new g(this,[])},y.ge=function(o){for(var t=this._compare,i=this.root,r=[],x=0;i;){var A=t(o,i.key);r.push(i),A<=0&&(x=r.length),A<=0?i=i.left:i=i.right}return r.length=x,new g(this,r)},y.gt=function(o){for(var t=this._compare,i=this.root,r=[],x=0;i;){var A=t(o,i.key);r.push(i),A<0&&(x=r.length),A<0?i=i.left:i=i.right}return r.length=x,new g(this,r)},y.lt=function(o){for(var t=this._compare,i=this.root,r=[],x=0;i;){var A=t(o,i.key);r.push(i),A>0&&(x=r.length),A<=0?i=i.left:i=i.right}return r.length=x,new g(this,r)},y.le=function(o){for(var t=this._compare,i=this.root,r=[],x=0;i;){var A=t(o,i.key);r.push(i),A>=0&&(x=r.length),A<0?i=i.left:i=i.right}return r.length=x,new g(this,r)},y.find=function(o){for(var t=this._compare,i=this.root,r=[];i;){var x=t(o,i.key);if(r.push(i),x===0)return new g(this,r);x<=0?i=i.left:i=i.right}return new g(this,[])},y.remove=function(o){var t=this.find(o);return t?t.remove():this},y.get=function(o){for(var t=this._compare,i=this.root;i;){var r=t(o,i.key);if(r===0)return i.value;r<=0?i=i.left:i=i.right}};function g(o,t){this.tree=o,this._stack=t}var n=g.prototype;Object.defineProperty(n,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(n,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),n.clone=function(){return new g(this.tree,this._stack.slice())};function a(o,t){o.key=t.key,o.value=t.value,o.left=t.left,o.right=t.right,o._color=t._color,o._count=t._count}function h(o){for(var t,i,r,x,A=o.length-1;A>=0;--A){if(t=o[A],A===0){t._color=e;return}if(i=o[A-1],i.left===t){if(r=i.right,r.right&&r.right._color===d){if(r=i.right=s(r),x=r.right=s(r.right),i.right=r.left,r.left=i,r.right=x,r._color=i._color,t._color=e,i._color=e,x._color=e,b(i),b(r),A>1){var E=o[A-2];E.left===i?E.left=r:E.right=r}o[A-1]=r;return}else if(r.left&&r.left._color===d){if(r=i.right=s(r),x=r.left=s(r.left),i.right=x.left,r.left=x.right,x.left=i,x.right=r,x._color=i._color,i._color=e,r._color=e,t._color=e,b(i),b(r),b(x),A>1){var E=o[A-2];E.left===i?E.left=x:E.right=x}o[A-1]=x;return}if(r._color===e)if(i._color===d){i._color=e,i.right=l(d,r);return}else{i.right=l(d,r);continue}else{if(r=s(r),i.right=r.left,r.left=i,r._color=i._color,i._color=d,b(i),b(r),A>1){var E=o[A-2];E.left===i?E.left=r:E.right=r}o[A-1]=r,o[A]=i,A+1<o.length?o[A+1]=t:o.push(t),A=A+2}}else{if(r=i.left,r.left&&r.left._color===d){if(r=i.left=s(r),x=r.left=s(r.left),i.left=r.right,r.right=i,r.left=x,r._color=i._color,t._color=e,i._color=e,x._color=e,b(i),b(r),A>1){var E=o[A-2];E.right===i?E.right=r:E.left=r}o[A-1]=r;return}else if(r.right&&r.right._color===d){if(r=i.left=s(r),x=r.right=s(r.right),i.left=x.right,r.right=x.left,x.right=i,x.left=r,x._color=i._color,i._color=e,r._color=e,t._color=e,b(i),b(r),b(x),A>1){var E=o[A-2];E.right===i?E.right=x:E.left=x}o[A-1]=x;return}if(r._color===e)if(i._color===d){i._color=e,i.left=l(d,r);return}else{i.left=l(d,r);continue}else{if(r=s(r),i.left=r.right,r.right=i,r._color=i._color,i._color=d,b(i),b(r),A>1){var E=o[A-2];E.right===i?E.right=r:E.left=r}o[A-1]=r,o[A]=i,A+1<o.length?o[A+1]=t:o.push(t),A=A+2}}}}n.remove=function(){var o=this._stack;if(o.length===0)return this.tree;var t=new Array(o.length),i=o[o.length-1];t[t.length-1]=new u(i._color,i.key,i.value,i.left,i.right,i._count);for(var r=o.length-2;r>=0;--r){var i=o[r];i.left===o[r+1]?t[r]=new u(i._color,i.key,i.value,t[r+1],i.right,i._count):t[r]=new u(i._color,i.key,i.value,i.left,t[r+1],i._count)}if(i=t[t.length-1],i.left&&i.right){var x=t.length;for(i=i.left;i.right;)t.push(i),i=i.right;var A=t[x-1];t.push(new u(i._color,A.key,A.value,i.left,i.right,i._count)),t[x-1].key=i.key,t[x-1].value=i.value;for(var r=t.length-2;r>=x;--r)i=t[r],t[r]=new u(i._color,i.key,i.value,i.left,t[r+1],i._count);t[x-1].left=t[x]}if(i=t[t.length-1],i._color===d){var E=t[t.length-2];E.left===i?E.left=null:E.right===i&&(E.right=null),t.pop();for(var r=0;r<t.length;++r)t[r]._count--;return new v(this.tree._compare,t[0])}else if(i.left||i.right){i.left?a(i,i.left):i.right&&a(i,i.right),i._color=e;for(var r=0;r<t.length-1;++r)t[r]._count--;return new v(this.tree._compare,t[0])}else{if(t.length===1)return new v(this.tree._compare,null);for(var r=0;r<t.length;++r)t[r]._count--;var P=t[t.length-2];h(t),P.left===i?P.left=null:P.right=null}return new v(this.tree._compare,t[0])},Object.defineProperty(n,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(n,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(n,"index",{get:function(){var o=0,t=this._stack;if(t.length===0){var i=this.tree.root;return i?i._count:0}else t[t.length-1].left&&(o=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++o,t[r].left&&(o+=t[r].left._count));return o},enumerable:!0}),n.next=function(){var o=this._stack;if(o.length!==0){var t=o[o.length-1];if(t.right)for(t=t.right;t;)o.push(t),t=t.left;else for(o.pop();o.length>0&&o[o.length-1].right===t;)t=o[o.length-1],o.pop()}},Object.defineProperty(n,"hasNext",{get:function(){var o=this._stack;if(o.length===0)return!1;if(o[o.length-1].right)return!0;for(var t=o.length-1;t>0;--t)if(o[t-1].left===o[t])return!0;return!1}}),n.update=function(o){var t=this._stack;if(t.length===0)throw new Error("Can't update empty node!");var i=new Array(t.length),r=t[t.length-1];i[i.length-1]=new u(r._color,r.key,o,r.left,r.right,r._count);for(var x=t.length-2;x>=0;--x)r=t[x],r.left===t[x+1]?i[x]=new u(r._color,r.key,r.value,i[x+1],r.right,r._count):i[x]=new u(r._color,r.key,r.value,r.left,i[x+1],r._count);return new v(this.tree._compare,i[0])},n.prev=function(){var o=this._stack;if(o.length!==0){var t=o[o.length-1];if(t.left)for(t=t.left;t;)o.push(t),t=t.right;else for(o.pop();o.length>0&&o[o.length-1].left===t;)t=o[o.length-1],o.pop()}},Object.defineProperty(n,"hasPrev",{get:function(){var o=this._stack;if(o.length===0)return!1;if(o[o.length-1].left)return!0;for(var t=o.length-1;t>0;--t)if(o[t-1].right===o[t])return!0;return!1}});function c(o,t){return o<t?-1:o>t?1:0}function m(o){return new v(o||c,null)}},{}],70:[function(p,w,k){"use strict";w.exports=t;var d=p("./lib/text.js"),e=p("./lib/lines.js"),u=p("./lib/background.js"),s=p("./lib/cube.js"),l=p("./lib/ticks.js"),b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function v(i,r){return i[0]=r[0],i[1]=r[1],i[2]=r[2],i}function y(i){this.gl=i,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(i)}var T=y.prototype;T.update=function(i){i=i||{};function r(ee,Q,U){if(U in i){var O=i[U],Z=this[U],B;(ee?Array.isArray(O)&&Array.isArray(O[0]):Array.isArray(O))?this[U]=B=[Q(O[0]),Q(O[1]),Q(O[2])]:this[U]=B=[Q(O),Q(O),Q(O)];for(var Y=0;Y<3;++Y)if(B[Y]!==Z[Y])return!0}return!1}var x=r.bind(this,!1,Number),A=r.bind(this,!1,Boolean),E=r.bind(this,!1,String),P=r.bind(this,!0,function(ee){if(Array.isArray(ee)){if(ee.length===3)return[+ee[0],+ee[1],+ee[2],1];if(ee.length===4)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),S,C=!1,M=!1;if("bounds"in i){var I=i.bounds;e:for(var G=0;G<2;++G)for(var V=0;V<3;++V)I[G][V]!==this.bounds[G][V]&&(M=!0),this.bounds[G][V]=I[G][V]}if("ticks"in i){S=i.ticks,C=!0,this.autoTicks=!1;for(var G=0;G<3;++G)this.tickSpacing[G]=0}else x("tickSpacing")&&(this.autoTicks=!0,M=!0);if(this._firstInit&&("ticks"in i||"tickSpacing"in i||(this.autoTicks=!0),M=!0,C=!0,this._firstInit=!1),M&&this.autoTicks&&(S=l.create(this.bounds,this.tickSpacing),C=!0),C){for(var G=0;G<3;++G)S[G].sort(function(Q,U){return Q.x-U.x});l.equal(S,this.ticks)?C=!1:this.ticks=S}A("tickEnable"),E("tickFont")&&(C=!0),x("tickSize"),x("tickAngle"),x("tickPad"),P("tickColor");var q=E("labels");E("labelFont")&&(q=!0),A("labelEnable"),x("labelSize"),x("labelPad"),P("labelColor"),A("lineEnable"),A("lineMirror"),x("lineWidth"),P("lineColor"),A("lineTickEnable"),A("lineTickMirror"),x("lineTickLength"),x("lineTickWidth"),P("lineTickColor"),A("gridEnable"),x("gridWidth"),P("gridColor"),A("zeroEnable"),P("zeroLineColor"),x("zeroLineWidth"),A("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(q||C)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=d(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&C&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=e(this.gl,this.bounds,this.ticks))};function _(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var f=[new _,new _,new _];function g(i,r,x,A,E){for(var P=i.primalOffset,S=i.primalMinor,C=i.mirrorOffset,M=i.mirrorMinor,I=A[r],G=0;G<3;++G)if(r!==G){var V=P,q=C,ee=S,Q=M;I&1<<G&&(V=C,q=P,ee=M,Q=S),V[G]=x[0][G],q[G]=x[1][G],E[G]>0?(ee[G]=-1,Q[G]=0):(ee[G]=0,Q[G]=1)}}var n=[0,0,0],a={model:b,view:b,projection:b,_ortho:!1};T.isOpaque=function(){return!0},T.isTransparent=function(){return!1},T.drawTransparent=function(i){};var h=0,c=[0,0,0],m=[0,0,0],o=[0,0,0];T.draw=function(i){i=i||a;for(var Z=this.gl,r=i.model||b,x=i.view||b,A=i.projection||b,E=this.bounds,P=i._ortho||!1,S=s(r,x,A,E,P),C=S.cubeEdges,M=S.axis,I=x[12],G=x[13],V=x[14],q=x[15],ee=P?2:1,Q=ee*this.pixelRatio*(A[3]*I+A[7]*G+A[11]*V+A[15]*q)/Z.drawingBufferHeight,U=0;U<3;++U)this.lastCubeProps.cubeEdges[U]=C[U],this.lastCubeProps.axis[U]=M[U];for(var O=f,U=0;U<3;++U)g(f[U],U,this.bounds,C,M);for(var Z=this.gl,B=n,U=0;U<3;++U)this.backgroundEnable[U]?B[U]=M[U]:B[U]=0;this._background.draw(r,x,A,E,B,this.backgroundColor),this._lines.bind(r,x,A,this);for(var U=0;U<3;++U){var Y=[0,0,0];M[U]>0?Y[U]=E[1][U]:Y[U]=E[0][U];for(var j=0;j<2;++j){var X=(U+1+j)%3,H=(U+1+(j^1))%3;this.gridEnable[X]&&this._lines.drawGrid(X,H,this.bounds,Y,this.gridColor[X],this.gridWidth[X]*this.pixelRatio)}for(var j=0;j<2;++j){var X=(U+1+j)%3,H=(U+1+(j^1))%3;this.zeroEnable[H]&&Math.min(E[0][H],E[1][H])<=0&&Math.max(E[0][H],E[1][H])>=0&&this._lines.drawZero(X,H,this.bounds,Y,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var U=0;U<3;++U){this.lineEnable[U]&&this._lines.drawAxisLine(U,this.bounds,O[U].primalOffset,this.lineColor[U],this.lineWidth[U]*this.pixelRatio),this.lineMirror[U]&&this._lines.drawAxisLine(U,this.bounds,O[U].mirrorOffset,this.lineColor[U],this.lineWidth[U]*this.pixelRatio);for(var K=v(c,O[U].primalMinor),W=v(m,O[U].mirrorMinor),$=this.lineTickLength,j=0;j<3;++j){var re=Q/r[5*j];K[j]*=$[j]*re,W[j]*=$[j]*re}this.lineTickEnable[U]&&this._lines.drawAxisTicks(U,O[U].primalOffset,K,this.lineTickColor[U],this.lineTickWidth[U]*this.pixelRatio),this.lineTickMirror[U]&&this._lines.drawAxisTicks(U,O[U].mirrorOffset,W,this.lineTickColor[U],this.lineTickWidth[U]*this.pixelRatio)}this._lines.unbind(),this._text.bind(r,x,A,this.pixelRatio);var de,ve=.5,ue,ce;function _e(be){ce=[0,0,0],ce[be]=1}function fe(be,Me,Ie){var Ke=(be+1)%3,Oe=(be+2)%3,We=Me[Ke],Fe=Me[Oe],Ge=Ie[Ke],Xe=Ie[Oe];if(We>0&&Xe>0){_e(Ke);return}else if(We>0&&Xe<0){_e(Ke);return}else if(We<0&&Xe>0){_e(Ke);return}else if(We<0&&Xe<0){_e(Ke);return}else if(Fe>0&&Ge>0){_e(Oe);return}else if(Fe>0&&Ge<0){_e(Oe);return}else if(Fe<0&&Ge>0){_e(Oe);return}else if(Fe<0&&Ge<0){_e(Oe);return}}for(var U=0;U<3;++U){for(var ne=O[U].primalMinor,ie=O[U].mirrorMinor,me=v(o,O[U].primalOffset),j=0;j<3;++j)this.lineTickEnable[U]&&(me[j]+=Q*ne[j]*Math.max(this.lineTickLength[j],0)/r[5*j]);var we=[0,0,0];if(we[U]=1,this.tickEnable[U]){this.tickAngle[U]===-3600?(this.tickAngle[U]=0,this.tickAlign[U]="auto"):this.tickAlign[U]=-1,ue=1,de=[this.tickAlign[U],ve,ue],de[0]==="auto"?de[0]=h:de[0]=parseInt(""+de[0]),ce=[0,0,0],fe(U,ne,ie);for(var j=0;j<3;++j)me[j]+=Q*ne[j]*this.tickPad[j]/r[5*j];this._text.drawTicks(U,this.tickSize[U],this.tickAngle[U],me,this.tickColor[U],we,ce,de)}if(this.labelEnable[U]){ue=0,ce=[0,0,0],this.labels[U].length>4&&(_e(U),ue=1),de=[this.labelAlign[U],ve,ue],de[0]==="auto"?de[0]=h:de[0]=parseInt(""+de[0]);for(var j=0;j<3;++j)me[j]+=Q*ne[j]*this.labelPad[j]/r[5*j];me[U]+=.5*(E[0][U]+E[1][U]),this._text.drawLabel(U,this.labelSize[U],this.labelAngle[U],me,this.labelColor[U],[0,0,0],ce,de)}}this._text.unbind()},T.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function t(i,r){var x=new y(i);return x.update(r),x}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(p,w,k){"use strict";w.exports=b;var d=p("gl-buffer"),e=p("gl-vao"),u=p("./shaders").bg;function s(v,y,T,_){this.gl=v,this.buffer=y,this.vao=T,this.shader=_}var l=s.prototype;l.draw=function(v,y,T,_,f,g){for(var n=!1,a=0;a<3;++a)n=n||f[a];if(!!n){var h=this.gl;h.enable(h.POLYGON_OFFSET_FILL),h.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:y,projection:T,bounds:_,enable:f,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),h.disable(h.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function b(v){for(var y=[],T=[],_=0,f=0;f<3;++f)for(var g=(f+1)%3,n=(f+2)%3,a=[0,0,0],h=[0,0,0],c=-1;c<=1;c+=2){T.push(_,_+2,_+1,_+1,_+2,_+3),a[f]=c,h[f]=c;for(var m=-1;m<=1;m+=2){a[g]=m;for(var o=-1;o<=1;o+=2)a[n]=o,y.push(a[0],a[1],a[2],h[0],h[1],h[2]),_+=1}var t=g;g=n,n=t}var i=d(v,new Float32Array(y)),r=d(v,new Uint16Array(T),v.ELEMENT_ARRAY_BUFFER),x=e(v,[{buffer:i,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:i,type:v.FLOAT,size:3,offset:12,stride:24}],r),A=u(v);return A.attributes.position.location=0,A.attributes.normal.location=1,new s(v,i,x,A)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(p,w,k){"use strict";w.exports=c;var d=p("bit-twiddle"),e=p("gl-mat4/multiply"),u=p("split-polygon"),s=p("robust-orientation"),l=new Array(16),b=new Array(8),v=new Array(8),y=new Array(3),T=[0,0,0];(function(){for(var m=0;m<8;++m)b[m]=[1,1,1,1],v[m]=[1,1,1]})();function _(m,o,t){for(var i=0;i<4;++i){m[i]=t[12+i];for(var r=0;r<3;++r)m[i]+=o[r]*t[4*r+i]}}var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(m){for(var o=0;o<f.length;++o)if(m=u.positive(m,f[o]),m.length<3)return 0;for(var t=m[0],i=t[0]/t[3],r=t[1]/t[3],x=0,o=1;o+1<m.length;++o){var A=m[o],E=m[o+1],P=A[0]/A[3],S=A[1]/A[3],C=E[0]/E[3],M=E[1]/E[3],I=P-i,G=S-r,V=C-i,q=M-r;x+=Math.abs(I*q-G*V)}return x}var n=[1,1,1],a=[0,0,0],h={cubeEdges:n,axis:a};function c(m,o,t,i,r){e(l,o,m),e(l,t,l);for(var x=0,A=0;A<2;++A){y[2]=i[A][2];for(var E=0;E<2;++E){y[1]=i[E][1];for(var P=0;P<2;++P)y[0]=i[P][0],_(b[x],y,l),x+=1}}for(var S=-1,A=0;A<8;++A){for(var C=b[A][3],M=0;M<3;++M)v[A][M]=b[A][M]/C;r&&(v[A][2]*=-1),C<0&&(S<0||v[A][2]<v[S][2])&&(S=A)}if(S<0){S=0;for(var I=0;I<3;++I){for(var G=(I+2)%3,V=(I+1)%3,q=-1,ee=-1,Q=0;Q<2;++Q){var U=Q<<I,O=U+(Q<<G)+(1-Q<<V),Z=U+(1-Q<<G)+(Q<<V);s(v[U],v[O],v[Z],T)<0||(Q?q=1:ee=1)}if(q<0||ee<0){ee>q&&(S|=1<<I);continue}for(var Q=0;Q<2;++Q){var U=Q<<I,O=U+(Q<<G)+(1-Q<<V),Z=U+(1-Q<<G)+(Q<<V),B=g([b[U],b[O],b[Z],b[U+(1<<G)+(1<<V)]]);Q?q=B:ee=B}if(ee>q){S|=1<<I;continue}}}for(var Y=7^S,j=-1,A=0;A<8;++A)A===S||A===Y||(j<0||v[j][1]>v[A][1])&&(j=A);for(var X=-1,A=0;A<3;++A){var H=j^1<<A;if(!(H===S||H===Y)){X<0&&(X=H);var V=v[H];V[0]<v[X][0]&&(X=H)}}for(var K=-1,A=0;A<3;++A){var H=j^1<<A;if(!(H===S||H===Y||H===X)){K<0&&(K=H);var V=v[H];V[0]>v[K][0]&&(K=H)}}var W=n;W[0]=W[1]=W[2]=0,W[d.log2(X^j)]=j&X,W[d.log2(j^K)]=j&K;var $=K^7;$===S||$===Y?($=X^7,W[d.log2(K^$)]=$&K):W[d.log2(X^$)]=$&X;for(var re=a,de=S,I=0;I<3;++I)de&1<<I?re[I]=-1:re[I]=1;return h}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(p,w,k){"use strict";w.exports=n;var d=p("gl-buffer"),e=p("gl-vao"),u=p("./shaders").line,s=[0,0,0],l=[0,0,0],b=[0,0,0],v=[0,0,0],y=[1,1];function T(a){return a[0]=a[1]=a[2]=0,a}function _(a,h){return a[0]=h[0],a[1]=h[1],a[2]=h[2],a}function f(a,h,c,m,o,t,i,r){this.gl=a,this.vertBuffer=h,this.vao=c,this.shader=m,this.tickCount=o,this.tickOffset=t,this.gridCount=i,this.gridOffset=r}var g=f.prototype;g.bind=function(a,h,c){this.shader.bind(),this.shader.uniforms.model=a,this.shader.uniforms.view=h,this.shader.uniforms.projection=c,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=y,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(a,h,c,m,o){var t=T(l);this.shader.uniforms.majorAxis=l,t[a]=h[1][a]-h[0][a],this.shader.uniforms.minorAxis=t;var i=_(v,c);i[a]+=h[0][a],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=m;var r=T(b);r[(a+2)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6);var r=T(b);r[(a+1)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(a,h,c,m,o){if(!!this.tickCount[a]){var t=T(s);t[a]=1,this.shader.uniforms.majorAxis=t,this.shader.uniforms.offset=h,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=m,this.shader.uniforms.lineWidth=o;var i=T(b);i[a]=1,this.shader.uniforms.screenAxis=i,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}},g.drawGrid=function(a,h,c,m,o,t){if(!!this.gridCount[a]){var i=T(l);i[h]=c[1][h]-c[0][h],this.shader.uniforms.minorAxis=i;var r=_(v,m);r[h]+=c[0][h],this.shader.uniforms.offset=r;var x=T(s);x[a]=1,this.shader.uniforms.majorAxis=x;var A=T(b);A[a]=1,this.shader.uniforms.screenAxis=A,this.shader.uniforms.lineWidth=t,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])}},g.drawZero=function(a,h,c,m,o,t){var i=T(l);this.shader.uniforms.majorAxis=i,i[a]=c[1][a]-c[0][a],this.shader.uniforms.minorAxis=i;var r=_(v,m);r[a]+=c[0][a],this.shader.uniforms.offset=r;var x=T(b);x[h]=1,this.shader.uniforms.screenAxis=x,this.shader.uniforms.lineWidth=t,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function n(a,h,c){var m=[],o=[0,0,0],t=[0,0,0],i=[0,0,0],r=[0,0,0];m.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var x=0;x<3;++x){for(var P=m.length/3|0,A=0;A<c[x].length;++A){var E=+c[x][A].x;m.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var C=m.length/3|0;o[x]=P,t[x]=C-P;for(var P=m.length/3|0,S=0;S<c[x].length;++S){var E=+c[x][S].x;m.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var C=m.length/3|0;i[x]=P,r[x]=C-P}var M=d(a,new Float32Array(m)),I=e(a,[{buffer:M,type:a.FLOAT,size:3,stride:0,offset:0}]),G=u(a);return G.attributes.position.location=0,new f(a,M,I,G,t,o,r,i)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(p,w,k){"use strict";var d=p("glslify"),e=p("gl-shader"),u=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),s=d([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);k.line=function(T){return e(T,u,s,null,[{name:"position",type:"vec3"}])};var l=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),b=d([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);k.text=function(T){return e(T,l,b,null,[{name:"position",type:"vec3"}])};var v=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),y=d([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);k.bg=function(T){return e(T,v,y,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(p,w,k){(function(d){(function(){"use strict";w.exports=n;var e=p("gl-buffer"),u=p("gl-vao"),s=p("vectorize-text"),l=p("./shaders").text,b=window||d.global||{},v=b.__TEXT_CACHE||{};b.__TEXT_CACHE={};var y=3;function T(a,h,c,m){this.gl=a,this.shader=h,this.buffer=c,this.vao=m,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var _=T.prototype,f=[0,0];_.bind=function(a,h,c,m){this.vao.bind(),this.shader.bind();var o=this.shader.uniforms;o.model=a,o.view=h,o.projection=c,o.pixelScale=m,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},_.unbind=function(){this.vao.unbind()},_.update=function(a,h,c,m,o){var t=[];function i(I,G,V,q,ee,Q){var U=v[V];U||(U=v[V]={});var O=U[G];O||(O=U[G]=g(G,{triangles:!0,font:V,textAlign:"center",textBaseline:"middle",lineSpacing:ee,styletags:Q}));for(var Z=(q||12)/12,B=O.positions,Y=O.cells,j=0,X=Y.length;j<X;++j)for(var H=Y[j],K=2;K>=0;--K){var W=B[H[K]];t.push(Z*W[0],-Z*W[1],I)}}for(var r=[0,0,0],x=[0,0,0],A=[0,0,0],E=[0,0,0],P=1.25,S={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;C<3;++C){A[C]=t.length/y|0,i(.5*(a[0][C]+a[1][C]),h[C],c[C],12,P,S),E[C]=(t.length/y|0)-A[C],r[C]=t.length/y|0;for(var M=0;M<m[C].length;++M)!m[C][M].text||i(m[C][M].x,m[C][M].text,m[C][M].font||o,m[C][M].fontSize||12,P,S);x[C]=(t.length/y|0)-r[C]}this.buffer.update(t),this.tickOffset=r,this.tickCount=x,this.labelOffset=A,this.labelCount=E},_.drawTicks=function(a,h,c,m,o,t,i,r){!this.tickCount[a]||(this.shader.uniforms.axis=t,this.shader.uniforms.color=o,this.shader.uniforms.angle=c,this.shader.uniforms.scale=h,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=i,this.shader.uniforms.alignOpt=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a]))},_.drawLabel=function(a,h,c,m,o,t,i,r){!this.labelCount[a]||(this.shader.uniforms.axis=t,this.shader.uniforms.color=o,this.shader.uniforms.angle=c,this.shader.uniforms.scale=h,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=i,this.shader.uniforms.alignOpt=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))},_.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function g(a,h){try{return s(a,h)}catch(c){return console.warn('error vectorizing text:"'+a+'" error:',c),{cells:[],positions:[]}}}function n(a,h,c,m,o,t){var i=e(a),r=u(a,[{buffer:i,size:3}]),x=l(a);x.attributes.position.location=0;var A=new T(a,x,i,r);return A.update(h,c,m,o,t),A}}).call(this)}).call(this,p("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(p,w,k){"use strict";k.create=e,k.equal=u;function d(s,l){var b=s+"",v=b.indexOf("."),y=0;v>=0&&(y=b.length-v-1);var T=Math.pow(10,y),_=Math.round(s*l*T),f=_+"";if(f.indexOf("e")>=0)return f;var g=_/T,n=_%T;_<0?(g=-Math.ceil(g)|0,n=-n|0):(g=Math.floor(g)|0,n=n|0);var a=""+g;if(_<0&&(a="-"+a),y){for(var h=""+n;h.length<y;)h="0"+h;return a+"."+h}else return a}function e(s,l){for(var b=[],v=0;v<3;++v){for(var y=[],T=.5*(s[0][v]+s[1][v]),_=0;_*l[v]<=s[1][v];++_)y.push({x:_*l[v],text:d(l[v],_)});for(var _=-1;_*l[v]>=s[0][v];--_)y.push({x:_*l[v],text:d(l[v],_)});b.push(y)}return b}function u(s,l){for(var b=0;b<3;++b){if(s[b].length!==l[b].length)return!1;for(var v=0;v<s[b].length;++v){var y=s[b][v],T=l[b][v];if(y.x!==T.x||y.text!==T.text||y.font!==T.font||y.fontColor!==T.fontColor||y.fontSize!==T.fontSize||y.dx!==T.dx||y.dy!==T.dy)return!1}}return!0}},{}],77:[function(p,w,k){"use strict";w.exports=h;var d=p("extract-frustum-planes"),e=p("split-polygon"),u=p("./lib/cube.js"),s=p("gl-mat4/multiply"),l=p("gl-mat4/transpose"),b=p("gl-vec4/transformMat4"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),y=new Float32Array(16);function T(c,m,o){this.lo=c,this.hi=m,this.pixelsPerDataUnit=o}var _=[0,0,0,1],f=[0,0,0,1];function g(c,m,o,t,i){for(var r=0;r<3;++r){for(var x=_,A=f,E=0;E<3;++E)A[E]=x[E]=o[E];A[3]=x[3]=1,A[r]+=1,b(A,A,m),A[3]<0&&(c[r]=1/0),x[r]-=1,b(x,x,m),x[3]<0&&(c[r]=1/0);var P=(x[0]/x[3]-A[0]/A[3])*t,S=(x[1]/x[3]-A[1]/A[3])*i;c[r]=.25*Math.sqrt(P*P+S*S)}return c}var n=[new T(1/0,-1/0,1/0),new T(1/0,-1/0,1/0),new T(1/0,-1/0,1/0)],a=[0,0,0];function h(c,m,o,t,S){var r=m.model||v,x=m.view||v,A=m.projection||v,E=m._ortho||!1,P=c.bounds,S=S||u(r,x,A,P,E),C=S.axis;s(y,x,r),s(y,A,y);for(var M=n,I=0;I<3;++I)M[I].lo=1/0,M[I].hi=-1/0,M[I].pixelsPerDataUnit=1/0;var G=d(l(y,y));l(y,y);for(var V=0;V<3;++V){var q=(V+1)%3,ee=(V+2)%3,Q=a;e:for(var I=0;I<2;++I){var U=[];if(C[V]<0!=!!I){Q[V]=P[I][V];for(var O=0;O<2;++O){Q[q]=P[O^I][q];for(var Z=0;Z<2;++Z)Q[ee]=P[Z^O^I][ee],U.push(Q.slice())}for(var B=E?5:4,O=B;O===B;++O){if(U.length===0)continue e;U=e.positive(U,G[O])}for(var O=0;O<U.length;++O)for(var ee=U[O],Y=g(a,y,ee,o,t),Z=0;Z<3;++Z)M[Z].lo=Math.min(M[Z].lo,ee[Z]),M[Z].hi=Math.max(M[Z].hi,ee[Z]),Z!==V&&(M[Z].pixelsPerDataUnit=Math.min(M[Z].pixelsPerDataUnit,Math.abs(Y[Z])))}}}return M}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(p,w,k){"use strict";var d=p("typedarray-pool"),e=p("ndarray-ops"),u=p("ndarray"),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(f,g,n,a,h){this.gl=f,this.type=g,this.handle=n,this.length=a,this.usage=h}var b=l.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)},b.unbind=function(){this.gl.bindBuffer(this.type,null)},b.dispose=function(){this.gl.deleteBuffer(this.handle)};function v(f,g,n,a,h,c){var m=h.length*h.BYTES_PER_ELEMENT;if(c<0)return f.bufferData(g,h,a),m;if(m+c>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return f.bufferSubData(g,c,h),n}function y(f,g){for(var n=d.malloc(f.length,g),a=f.length,h=0;h<a;++h)n[h]=f[h];return n}function T(f,g){for(var n=1,a=g.length-1;a>=0;--a){if(g[a]!==n)return!1;n*=f[a]}return!0}b.update=function(f,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof f=="object"&&typeof f.shape<"u"){var n=f.dtype;if(s.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var a=gl.getExtension("OES_element_index_uint");a&&n!=="uint16"?n="uint32":n="uint16"}if(n===f.dtype&&T(f.shape,f.stride))f.offset===0&&f.data.length===f.shape[0]?this.length=v(this.gl,this.type,this.length,this.usage,f.data,g):this.length=v(this.gl,this.type,this.length,this.usage,f.data.subarray(f.offset,f.shape[0]),g);else{var h=d.malloc(f.size,n),c=u(h,f.shape);e.assign(c,f),g<0?this.length=v(this.gl,this.type,this.length,this.usage,h,g):this.length=v(this.gl,this.type,this.length,this.usage,h.subarray(0,f.size),g),d.free(h)}}else if(Array.isArray(f)){var m;this.type===this.gl.ELEMENT_ARRAY_BUFFER?m=y(f,"uint16"):m=y(f,"float32"),g<0?this.length=v(this.gl,this.type,this.length,this.usage,m,g):this.length=v(this.gl,this.type,this.length,this.usage,m.subarray(0,f.length),g),d.free(m)}else if(typeof f=="object"&&typeof f.length=="number")this.length=v(this.gl,this.type,this.length,this.usage,f,g);else if(typeof f=="number"||f===void 0){if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");f=f|0,f<=0&&(f=1),this.gl.bufferData(this.type,f|0,this.usage),this.length=f}else throw new Error("gl-buffer: Invalid data type")};function _(f,g,n,a){if(n=n||f.ARRAY_BUFFER,a=a||f.DYNAMIC_DRAW,n!==f.ARRAY_BUFFER&&n!==f.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(a!==f.DYNAMIC_DRAW&&a!==f.STATIC_DRAW&&a!==f.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var h=f.createBuffer(),c=new l(f,n,h,0,a);return c.update(g),c}w.exports=_},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(p,w,k){"use strict";var d=p("gl-vec3");w.exports=function(u,s){var l=u.positions,b=u.vectors,v={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),v;for(var y=0,T=1/0,_=-1/0,f=1/0,g=-1/0,n=1/0,a=-1/0,h=null,c=null,m=[],o=1/0,t=!1,i=0;i<l.length;i++){var r=l[i];T=Math.min(r[0],T),_=Math.max(r[0],_),f=Math.min(r[1],f),g=Math.max(r[1],g),n=Math.min(r[2],n),a=Math.max(r[2],a);var x=b[i];if(d.length(x)>y&&(y=d.length(x)),i){var A=2*d.distance(h,r)/(d.length(c)+d.length(x));A?(o=Math.min(o,A),t=!1):t=!0}t||(h=r,c=x),m.push(x)}var E=[T,f,n],P=[_,g,a];s&&(s[0]=E,s[1]=P),y===0&&(y=1);var S=1/y;isFinite(o)||(o=1),v.vectorScale=o;var C=u.coneSize||.5;u.absoluteConeSize&&(C=u.absoluteConeSize*S),v.coneScale=C;for(var i=0,M=0;i<l.length;i++)for(var r=l[i],I=r[0],G=r[1],V=r[2],q=m[i],ee=d.length(q)*S,Q=0,U=8;Q<U;Q++){v.positions.push([I,G,V,M++]),v.positions.push([I,G,V,M++]),v.positions.push([I,G,V,M++]),v.positions.push([I,G,V,M++]),v.positions.push([I,G,V,M++]),v.positions.push([I,G,V,M++]),v.vectors.push(q),v.vectors.push(q),v.vectors.push(q),v.vectors.push(q),v.vectors.push(q),v.vectors.push(q),v.vertexIntensity.push(ee,ee,ee),v.vertexIntensity.push(ee,ee,ee);var O=v.positions.length;v.cells.push([O-6,O-5,O-4],[O-3,O-2,O-1])}return v};var e=p("./lib/shaders");w.exports.createMesh=p("./create_mesh"),w.exports.createConeMesh=function(u,s){return w.exports.createMesh(u,s,{shaders:e,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(p,w,k){"use strict";var d=p("gl-shader"),e=p("gl-buffer"),u=p("gl-vao"),s=p("gl-texture2d"),l=p("gl-mat4/multiply"),b=p("gl-mat4/invert"),v=p("ndarray"),y=p("colormap"),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function _(m,o,t,i,r,x,A,E,P,S,C){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=o,this.dirty=!0,this.triShader=t,this.pickShader=i,this.trianglePositions=r,this.triangleVectors=x,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=A,this.triangleVAO=S,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=C,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var f=_.prototype;f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(m){this.pickId=m};function g(m){for(var o=y({colormap:m,nshades:256,format:"rgba"}),t=new Uint8Array(256*4),i=0;i<256;++i){for(var r=o[i],x=0;x<3;++x)t[4*i+x]=r[x];t[4*i+3]=r[3]*255}return v(t,[256,256,4],[4,0,1])}function n(m){for(var o=m.length,t=new Array(o),i=0;i<o;++i)t[i]=m[i][2];return t}f.update=function(m){m=m||{};var o=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=o.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=o.LINEAR,this.texture.setPixels(g(m.colormap)),this.texture.generateMipmap());var t=m.cells,i=m.positions,r=m.vectors;if(!i||!t||!r)return;var x=[],A=[],E=[],P=[],S=[];this.cells=t,this.positions=i,this.vectors=r;var C=m.meshColor||[1,1,1,1],M=m.vertexIntensity,I=1/0,G=-1/0;if(M)if(m.vertexIntensityBounds)I=+m.vertexIntensityBounds[0],G=+m.vertexIntensityBounds[1];else for(var V=0;V<M.length;++V){var q=M[V];I=Math.min(I,q),G=Math.max(G,q)}else for(var V=0;V<i.length;++V){var q=i[V][2];I=Math.min(I,q),G=Math.max(G,q)}M?this.intensity=M:this.intensity=n(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var V=0;V<i.length;++V)for(var ee=i[V],Q=0;Q<3;++Q)isNaN(ee[Q])||!isFinite(ee[Q])||(this.bounds[0][Q]=Math.min(this.bounds[0][Q],ee[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],ee[Q]));var U=0;e:for(var V=0;V<t.length;++V){var O=t[V];switch(O.length){case 3:for(var Q=0;Q<3;++Q)for(var Z=O[Q],ee=i[Z],B=0;B<3;++B)if(isNaN(ee[B])||!isFinite(ee[B]))continue e;for(var Q=0;Q<3;++Q){var Z=O[2-Q],ee=i[Z];x.push(ee[0],ee[1],ee[2],ee[3]);var Y=r[Z];A.push(Y[0],Y[1],Y[2],Y[3]||0);var j=C;j.length===3?E.push(j[0],j[1],j[2],1):E.push(j[0],j[1],j[2],j[3]);var X;M?X=[(M[Z]-I)/(G-I),0]:X=[(ee[2]-I)/(G-I),0],P.push(X[0],X[1]),S.push(V)}U+=1;break;default:break}}this.triangleCount=U,this.trianglePositions.update(x),this.triangleVectors.update(A),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(S))},f.drawTransparent=f.draw=function(m){m=m||{};for(var o=this.gl,t=m.model||T,i=m.view||T,r=m.projection||T,x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)x[0][A]=Math.max(x[0][A],this.clipBounds[0][A]),x[1][A]=Math.min(x[1][A],this.clipBounds[1][A]);var E={model:t,view:i,projection:r,inverseModel:T.slice(),clipBounds:x,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=b(E.inverseModel,E.model),o.disable(o.CULL_FACE),this.texture.bind(0);var P=new Array(16);l(P,E.view,E.model),l(P,E.projection,P),b(P,P);for(var A=0;A<3;++A)E.eyePosition[A]=P[12+A]/P[15];for(var S=P[15],A=0;A<3;++A)S+=this.lightPosition[A]*P[4*A+3];for(var A=0;A<3;++A){for(var C=P[12+A],M=0;M<3;++M)C+=P[4*M+A]*this.lightPosition[M];E.lightPosition[A]=C/S}if(this.triangleCount>0){var I=this.triShader;I.bind(),I.uniforms=E,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},f.drawPick=function(m){m=m||{};for(var o=this.gl,t=m.model||T,i=m.view||T,r=m.projection||T,x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)x[0][A]=Math.max(x[0][A],this.clipBounds[0][A]),x[1][A]=Math.min(x[1][A],this.clipBounds[1][A]);this._model=[].slice.call(t),this._view=[].slice.call(i),this._projection=[].slice.call(r),this._resolution=[o.drawingBufferWidth,o.drawingBufferHeight];var E={model:t,view:i,projection:r,clipBounds:x,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},f.pick=function(m){if(!m||m.id!==this.pickId)return null;var o=m.value[0]+256*m.value[1]+65536*m.value[2],t=this.cells[o],i=this.positions[t[1]].slice(0,3),r={position:i,dataCoordinate:i,index:Math.floor(t[1]/48)};return this.traceType==="cone"?r.index=Math.floor(t[1]/48):this.traceType==="streamtube"&&(r.intensity=this.intensity[t[1]],r.velocity=this.vectors[t[1]].slice(0,3),r.divergence=this.vectors[t[1]][3],r.index=o),r},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function a(m,o){var t=d(m,o.meshShader.vertex,o.meshShader.fragment,null,o.meshShader.attributes);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.vector.location=4,t}function h(m,o){var t=d(m,o.pickShader.vertex,o.pickShader.fragment,null,o.pickShader.attributes);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.vector.location=4,t}function c(m,o,t){var i=t.shaders;arguments.length===1&&(o=m,m=o.gl);var r=a(m,i),x=h(m,i),A=s(m,v(new Uint8Array([255,255,255,255]),[1,1,4]));A.generateMipmap(),A.minFilter=m.LINEAR_MIPMAP_LINEAR,A.magFilter=m.LINEAR;var E=e(m),P=e(m),S=e(m),C=e(m),M=e(m),I=u(m,[{buffer:E,type:m.FLOAT,size:4},{buffer:M,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:S,type:m.FLOAT,size:4},{buffer:C,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),G=new _(m,A,r,x,E,P,M,S,C,I,t.traceType||"cone");return G.update(o),G}w.exports=c},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(p,w,k){var d=p("glslify"),e=d([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=d([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=d([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);k.meshShader={vertex:e,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},k.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(p,w,k){w.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(p,w,k){var d=p("./1.0/numbers");w.exports=function(u){return d[u]}},{"./1.0/numbers":82}],84:[function(p,w,k){"use strict";w.exports=_;var d=p("gl-buffer"),e=p("gl-vao"),u=p("./shaders/index"),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(f,g,n,a){this.gl=f,this.shader=a,this.buffer=g,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var b=l.prototype;b.isOpaque=function(){return!this.hasAlpha},b.isTransparent=function(){return this.hasAlpha},b.drawTransparent=b.draw=function(f){var g=this.gl,n=this.shader.uniforms;this.shader.bind();var a=n.view=f.view||s,h=n.projection=f.projection||s;n.model=f.model||s,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var c=a[12],m=a[13],o=a[14],t=a[15],i=f._ortho||!1,r=i?2:1,x=r*this.pixelRatio*(h[3]*c+h[7]*m+h[11]*o+h[15]*t)/g.drawingBufferHeight;this.vao.bind();for(var A=0;A<3;++A)g.lineWidth(this.lineWidth[A]*this.pixelRatio),n.capSize=this.capSize[A]*x,this.lineCount[A]&&g.drawArrays(g.LINES,this.lineOffset[A],this.lineCount[A]);this.vao.unbind()};function v(f,g){for(var n=0;n<3;++n)f[0][n]=Math.min(f[0][n],g[n]),f[1][n]=Math.max(f[1][n],g[n])}var y=function(){for(var f=new Array(3),g=0;g<3;++g){for(var n=[],a=1;a<=2;++a)for(var h=-1;h<=1;h+=2){var c=(a+g)%3,m=[0,0,0];m[c]=h,n.push(m)}f[g]=n}return f}();function T(f,g,n,a){for(var h=y[a],c=0;c<h.length;++c){var m=h[c];f.push(g[0],g[1],g[2],n[0],n[1],n[2],n[3],m[0],m[1],m[2])}return h.length}b.update=function(f){f=f||{},"lineWidth"in f&&(this.lineWidth=f.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in f&&(this.capSize=f.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in f&&(this.opacity=+f.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=f.color||[[0,0,0],[0,0,0],[0,0,0]],n=f.position,a=f.error;if(Array.isArray(g[0])||(g=[g,g,g]),n&&a){var h=[],c=n.length,m=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var o=0;o<3;++o){this.lineOffset[o]=m;e:for(var t=0;t<c;++t){for(var i=n[t],r=0;r<3;++r)if(isNaN(i[r])||!isFinite(i[r]))continue e;var x=a[t],A=g[o];if(Array.isArray(A[0])&&(A=g[t]),A.length===3?A=[A[0],A[1],A[2],1]:A.length===4&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&A[3]<1&&(this.hasAlpha=!0)),!(isNaN(x[0][o])||isNaN(x[1][o]))){if(x[0][o]<0){var E=i.slice();E[o]+=x[0][o],h.push(i[0],i[1],i[2],A[0],A[1],A[2],A[3],0,0,0,E[0],E[1],E[2],A[0],A[1],A[2],A[3],0,0,0),v(this.bounds,E),m+=2+T(h,E,A,o)}if(x[1][o]>0){var E=i.slice();E[o]+=x[1][o],h.push(i[0],i[1],i[2],A[0],A[1],A[2],A[3],0,0,0,E[0],E[1],E[2],A[0],A[1],A[2],A[3],0,0,0),v(this.bounds,E),m+=2+T(h,E,A,o)}}}this.lineCount[o]=m-this.lineOffset[o]}this.buffer.update(h)}},b.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function _(f){var g=f.gl,n=d(g),a=e(g,[{buffer:n,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:g.FLOAT,size:3,offset:28,stride:40}]),h=u(g);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.offset.location=2;var c=new l(g,n,a,h);return c.update(f),c}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(p,w,k){"use strict";var d=p("glslify"),e=p("gl-shader"),u=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),s=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);w.exports=function(l){return e(l,u,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(p,w,k){"use strict";var d=p("gl-texture2d");w.exports=m;var e=null,u,s,l,b;function v(o){var t=o.getParameter(o.FRAMEBUFFER_BINDING),i=o.getParameter(o.RENDERBUFFER_BINDING),r=o.getParameter(o.TEXTURE_BINDING_2D);return[t,i,r]}function y(o,t){o.bindFramebuffer(o.FRAMEBUFFER,t[0]),o.bindRenderbuffer(o.RENDERBUFFER,t[1]),o.bindTexture(o.TEXTURE_2D,t[2])}function T(o,t){var i=o.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);e=new Array(i+1);for(var r=0;r<=i;++r){for(var x=new Array(i),A=0;A<r;++A)x[A]=o.COLOR_ATTACHMENT0+A;for(var A=r;A<i;++A)x[A]=o.NONE;e[r]=x}}function _(o){switch(o){case u:throw new Error("gl-fbo: Framebuffer unsupported");case s:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case b:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(o,t,i,r,x,A){if(!r)return null;var E=d(o,t,i,x,r);return E.magFilter=o.NEAREST,E.minFilter=o.NEAREST,E.mipSamples=1,E.bind(),o.framebufferTexture2D(o.FRAMEBUFFER,A,o.TEXTURE_2D,E.handle,0),E}function g(o,t,i,r,x){var A=o.createRenderbuffer();return o.bindRenderbuffer(o.RENDERBUFFER,A),o.renderbufferStorage(o.RENDERBUFFER,r,t,i),o.framebufferRenderbuffer(o.FRAMEBUFFER,x,o.RENDERBUFFER,A),A}function n(o){var t=v(o.gl),i=o.gl,r=o.handle=i.createFramebuffer(),x=o._shape[0],A=o._shape[1],E=o.color.length,P=o._ext,S=o._useStencil,C=o._useDepth,M=o._colorType;i.bindFramebuffer(i.FRAMEBUFFER,r);for(var I=0;I<E;++I)o.color[I]=f(i,x,A,M,i.RGBA,i.COLOR_ATTACHMENT0+I);E===0?(o._color_rb=g(i,x,A,i.RGBA4,i.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(e[0])):E>1&&P.drawBuffersWEBGL(e[E]);var G=i.getExtension("WEBGL_depth_texture");G?S?o.depth=f(i,x,A,G.UNSIGNED_INT_24_8_WEBGL,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):C&&(o.depth=f(i,x,A,i.UNSIGNED_SHORT,i.DEPTH_COMPONENT,i.DEPTH_ATTACHMENT)):C&&S?o._depth_rb=g(i,x,A,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):C?o._depth_rb=g(i,x,A,i.DEPTH_COMPONENT16,i.DEPTH_ATTACHMENT):S&&(o._depth_rb=g(i,x,A,i.STENCIL_INDEX,i.STENCIL_ATTACHMENT));var V=i.checkFramebufferStatus(i.FRAMEBUFFER);if(V!==i.FRAMEBUFFER_COMPLETE){o._destroyed=!0,i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(o.handle),o.handle=null,o.depth&&(o.depth.dispose(),o.depth=null),o._depth_rb&&(i.deleteRenderbuffer(o._depth_rb),o._depth_rb=null);for(var I=0;I<o.color.length;++I)o.color[I].dispose(),o.color[I]=null;o._color_rb&&(i.deleteRenderbuffer(o._color_rb),o._color_rb=null),y(i,t),_(V)}y(i,t)}function a(o,t,i,r,x,A,E,P){this.gl=o,this._shape=[t|0,i|0],this._destroyed=!1,this._ext=P,this.color=new Array(x);for(var S=0;S<x;++S)this.color[S]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=A,this._useStencil=E;var C=this,M=[t|0,i|0];Object.defineProperties(M,{0:{get:function(){return C._shape[0]},set:function(I){return C.width=I}},1:{get:function(){return C._shape[1]},set:function(I){return C.height=I}}}),this._shapeVector=M,n(this)}var h=a.prototype;function c(o,t,i){if(o._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(o._shape[0]===t&&o._shape[1]===i)){var r=o.gl,x=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||t>x||i<0||i>x)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");o._shape[0]=t,o._shape[1]=i;for(var A=v(r),E=0;E<o.color.length;++E)o.color[E].shape=o._shape;o._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,o._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,o._shape[0],o._shape[1])),o.depth&&(o.depth.shape=o._shape),o._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,o._depth_rb),o._useDepth&&o._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,o._shape[0],o._shape[1]):o._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,o._shape[0],o._shape[1]):o._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,o._shape[0],o._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,o.handle);var P=r.checkFramebufferStatus(r.FRAMEBUFFER);P!==r.FRAMEBUFFER_COMPLETE&&(o.dispose(),y(r,A),_(P)),y(r,A)}}Object.defineProperties(h,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(o){if(Array.isArray(o)||(o=[o|0,o|0]),o.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var t=o[0]|0,i=o[1]|0;return c(this,t,i),[t,i]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(o){return o=o|0,c(this,o,this._shape[1]),o},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(o){return o=o|0,c(this,this._shape[0],o),o},enumerable:!1}}),h.bind=function(){if(!this._destroyed){var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,this.handle),o.viewport(0,0,this._shape[0],this._shape[1])}},h.dispose=function(){if(!this._destroyed){this._destroyed=!0;var o=this.gl;o.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(o.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(o.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function m(o,t,i,r){u||(u=o.FRAMEBUFFER_UNSUPPORTED,s=o.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=o.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,b=o.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var x=o.getExtension("WEBGL_draw_buffers");if(!e&&x&&T(o,x),Array.isArray(t)&&(r=i,i=t[1]|0,t=t[0]|0),typeof t!="number")throw new Error("gl-fbo: Missing shape parameter");var A=o.getParameter(o.MAX_RENDERBUFFER_SIZE);if(t<0||t>A||i<0||i>A)throw new Error("gl-fbo: Parameters are too large for FBO");r=r||{};var E=1;if("color"in r){if(E=Math.max(r.color|0,0),E<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1)if(x){if(E>o.getParameter(x.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=o.UNSIGNED_BYTE,S=o.getExtension("OES_texture_float");if(r.float&&E>0){if(!S)throw new Error("gl-fbo: Context does not support floating point textures");P=o.FLOAT}else r.preferFloat&&E>0&&S&&(P=o.FLOAT);var C=!0;"depth"in r&&(C=!!r.depth);var M=!1;return"stencil"in r&&(M=!!r.stencil),new a(o,t,i,P,E,C,M,x)}},{"gl-texture2d":146}],87:[function(p,w,k){var d=p("sprintf-js").sprintf,e=p("gl-constants/lookup"),u=p("glsl-shader-name"),s=p("add-line-numbers");w.exports=l;function l(b,v,y){"use strict";var T=u(v)||"of unknown name (see npm glsl-shader-name)",_="unknown type";y!==void 0&&(_=y===e.FRAGMENT_SHADER?"fragment":"vertex");for(var f=d(`Error compiling %s shader %s:
`,_,T),g=d("%s%s",f,b),n=b.split(`
`),a={},h=0;h<n.length;h++){var c=n[h];if(!(c===""||c==="\0")){var m=parseInt(c.split(":")[2]);if(isNaN(m))throw new Error(d("Could not parse error: %s",c));a[m]=c}}for(var o=s(v).split(`
`),h=0;h<o.length;h++)if(!(!a[h+3]&&!a[h+2]&&!a[h+1])){var t=o[h];if(f+=t+`
`,a[h+1]){var i=a[h+1];i=i.substr(i.split(":",3).join(":").length+1).trim(),f+=d(`^^^ %s

`,i)}}return{long:f.trim(),short:g.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(p,w,k){"use strict";w.exports=_;var d=p("binary-search-bounds"),e=p("iota-array"),u=p("typedarray-pool"),s=p("gl-shader"),l=p("gl-buffer"),b=p("./lib/shaders");function v(f,g,n,a,h,c,m){this.plot=f,this.shader=g,this.pickShader=n,this.positionBuffer=a,this.weightBuffer=h,this.colorBuffer=c,this.idBuffer=m,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var y=v.prototype,T=[0,0,1,0,0,1,1,0,1,1,0,1];y.draw=function(){var f=[1,0,0,0,1,0,0,0,1];return function(){var g=this.plot,n=this.shader,a=this.bounds,h=this.numVertices;if(!(h<=0)){var c=g.gl,m=g.dataBox,o=a[2]-a[0],t=a[3]-a[1],i=m[2]-m[0],r=m[3]-m[1];f[0]=2*o/i,f[4]=2*t/r,f[6]=2*(a[0]-m[0])/i-1,f[7]=2*(a[1]-m[1])/r-1,n.bind();var x=n.uniforms;x.viewTransform=f,x.shape=this.shape;var A=n.attributes;this.positionBuffer.bind(),A.position.pointer(),this.weightBuffer.bind(),A.weight.pointer(c.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),A.color.pointer(c.UNSIGNED_BYTE,!0),c.drawArrays(c.TRIANGLES,0,h)}}}(),y.drawPick=function(){var f=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(n){var a=this.plot,h=this.pickShader,c=this.bounds,m=this.numVertices;if(!(m<=0)){var o=a.gl,t=a.dataBox,i=c[2]-c[0],r=c[3]-c[1],x=t[2]-t[0],A=t[3]-t[1];f[0]=2*i/x,f[4]=2*r/A,f[6]=2*(c[0]-t[0])/x-1,f[7]=2*(c[1]-t[1])/A-1;for(var E=0;E<4;++E)g[E]=n>>E*8&255;this.pickOffset=n,h.bind();var P=h.uniforms;P.viewTransform=f,P.pickOffset=g,P.shape=this.shape;var S=h.attributes;return this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(o.UNSIGNED_BYTE,!1),this.idBuffer.bind(),S.pickId.pointer(o.UNSIGNED_BYTE,!1),o.drawArrays(o.TRIANGLES,0,m),n+this.shape[0]*this.shape[1]}}}(),y.pick=function(f,g,n){var a=this.pickOffset,h=this.shape[0]*this.shape[1];if(n<a||n>=a+h)return null;var c=n-a,m=this.xData,o=this.yData;return{object:this,pointId:c,dataCoord:[m[c%this.shape[0]],o[c/this.shape[0]|0]]}},y.update=function(f){f=f||{};var g=f.shape||[0,0],n=f.x||e(g[0]),a=f.y||e(g[1]),h=f.z||new Float32Array(g[0]*g[1]),c=f.zsmooth!==!1;this.xData=n,this.yData=a;var m=f.colorLevels||[0],o=f.colorValues||[0,0,0,1],t=m.length,i=this.bounds,r,x,A,E;c?(r=i[0]=n[0],x=i[1]=a[0],A=i[2]=n[n.length-1],E=i[3]=a[a.length-1]):(r=i[0]=n[0]+(n[1]-n[0])/2,x=i[1]=a[0]+(a[1]-a[0])/2,A=i[2]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2,E=i[3]=a[a.length-1]+(a[a.length-1]-a[a.length-2])/2);var P=1/(A-r),S=1/(E-x),C=g[0],M=g[1];this.shape=[C,M];var I=(c?(C-1)*(M-1):C*M)*(T.length>>>1);this.numVertices=I;for(var G=u.mallocUint8(I*4),V=u.mallocFloat32(I*2),q=u.mallocUint8(I*2),ee=u.mallocUint32(I),Q=0,U=c?C-1:C,O=c?M-1:M,Z=0;Z<O;++Z){var B,Y;c?(B=S*(a[Z]-x),Y=S*(a[Z+1]-x)):(B=Z<M-1?S*(a[Z]-(a[Z+1]-a[Z])/2-x):S*(a[Z]-(a[Z]-a[Z-1])/2-x),Y=Z<M-1?S*(a[Z]+(a[Z+1]-a[Z])/2-x):S*(a[Z]+(a[Z]-a[Z-1])/2-x));for(var j=0;j<U;++j){var X,H;c?(X=P*(n[j]-r),H=P*(n[j+1]-r)):(X=j<C-1?P*(n[j]-(n[j+1]-n[j])/2-r):P*(n[j]-(n[j]-n[j-1])/2-r),H=j<C-1?P*(n[j]+(n[j+1]-n[j])/2-r):P*(n[j]+(n[j]-n[j-1])/2-r));for(var K=0;K<T.length;K+=2){var W=T[K],$=T[K+1],re=c?(Z+$)*C+(j+W):Z*C+j,de=h[re],ve=d.le(m,de),ue,ce,_e,fe;if(ve<0)ue=o[0],ce=o[1],_e=o[2],fe=o[3];else if(ve===t-1)ue=o[4*t-4],ce=o[4*t-3],_e=o[4*t-2],fe=o[4*t-1];else{var ne=(de-m[ve])/(m[ve+1]-m[ve]),ie=1-ne,me=4*ve,we=4*(ve+1);ue=ie*o[me]+ne*o[we],ce=ie*o[me+1]+ne*o[we+1],_e=ie*o[me+2]+ne*o[we+2],fe=ie*o[me+3]+ne*o[we+3]}G[4*Q]=255*ue,G[4*Q+1]=255*ce,G[4*Q+2]=255*_e,G[4*Q+3]=255*fe,V[2*Q]=X*.5+H*.5,V[2*Q+1]=B*.5+Y*.5,q[2*Q]=W,q[2*Q+1]=$,ee[Q]=Z*C+j,Q+=1}}}this.positionBuffer.update(V),this.weightBuffer.update(q),this.colorBuffer.update(G),this.idBuffer.update(ee),u.free(V),u.free(G),u.free(q),u.free(ee)},y.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function _(f,g){var n=f.gl,a=s(n,b.vertex,b.fragment),h=s(n,b.pickVertex,b.pickFragment),c=l(n),m=l(n),o=l(n),t=l(n),i=new v(f,a,h,c,m,o,t);return i.update(g),f.addObject(i),i}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(p,w,k){"use strict";var d=p("glslify");w.exports={fragment:d([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:d([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(p,w,k){var d=p("glslify"),e=p("gl-shader"),u=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),s=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=d([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),b=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];k.createShader=function(v){return e(v,u,s,null,b)},k.createPickShader=function(v){return e(v,u,l,null,b)}},{"gl-shader":132,glslify:231}],91:[function(p,w,k){"use strict";w.exports=o;var d=p("gl-buffer"),e=p("gl-vao"),u=p("gl-texture2d"),s=new Uint8Array(4),l=new Float32Array(s.buffer);function b(t,i,r,x){return s[0]=x,s[1]=r,s[2]=i,s[3]=t,l[0]}var v=p("binary-search-bounds"),y=p("ndarray"),T=p("./lib/shaders"),_=T.createShader,f=T.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(t,i){for(var r=0,x=0;x<3;++x){var A=t[x]-i[x];r+=A*A}return Math.sqrt(r)}function a(t){for(var i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)i[0][r]=Math.max(t[0][r],i[0][r]),i[1][r]=Math.min(t[1][r],i[1][r]);return i}function h(t,i,r,x){this.arcLength=t,this.position=i,this.index=r,this.dataCoordinate=x}function c(t,i,r,x,A,E){this.gl=t,this.shader=i,this.pickShader=r,this.buffer=x,this.vao=A,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=E,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=c.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.drawTransparent=m.draw=function(t){if(!!this.vertexCount){var i=this.gl,r=this.shader,x=this.vao;r.bind(),r.uniforms={model:t.model||g,view:t.view||g,projection:t.projection||g,clipBounds:a(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[i.drawingBufferWidth,i.drawingBufferHeight],pixelRatio:this.pixelRatio},x.bind(),x.draw(i.TRIANGLE_STRIP,this.vertexCount),x.unbind()}},m.drawPick=function(t){if(!!this.vertexCount){var i=this.gl,r=this.pickShader,x=this.vao;r.bind(),r.uniforms={model:t.model||g,view:t.view||g,projection:t.projection||g,pickId:this.pickId,clipBounds:a(this.clipBounds),screenShape:[i.drawingBufferWidth,i.drawingBufferHeight],pixelRatio:this.pixelRatio},x.bind(),x.draw(i.TRIANGLE_STRIP,this.vertexCount),x.unbind()}},m.update=function(t){var i,r;this.dirty=!0;var x=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var A=[],E=[],P=[],S=0,C=0,M=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],I=t.position||t.positions;if(I){var G=t.color||t.colors||[0,0,0,1],V=t.lineWidth||1,q=!1;e:for(i=1;i<I.length;++i){var ee=I[i-1],Q=I[i];for(E.push(S),P.push(ee.slice()),r=0;r<3;++r){if(isNaN(ee[r])||isNaN(Q[r])||!isFinite(ee[r])||!isFinite(Q[r])){if(!x&&A.length>0){for(var U=0;U<24;++U)A.push(A[A.length-12]);C+=2,q=!0}continue e}M[0][r]=Math.min(M[0][r],ee[r],Q[r]),M[1][r]=Math.max(M[1][r],ee[r],Q[r])}var O,Z;Array.isArray(G[0])?(O=G.length>i-1?G[i-1]:G.length>0?G[G.length-1]:[0,0,0,1],Z=G.length>i?G[i]:G.length>0?G[G.length-1]:[0,0,0,1]):O=Z=G,O.length===3&&(O=[O[0],O[1],O[2],1]),Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&O[3]<1&&(this.hasAlpha=!0);var B;Array.isArray(V)?B=V.length>i-1?V[i-1]:V.length>0?V[V.length-1]:[0,0,0,1]:B=V;var Y=S;if(S+=n(ee,Q),q){for(r=0;r<2;++r)A.push(ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],Y,B,O[0],O[1],O[2],O[3]);C+=2,q=!1}A.push(ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],Y,B,O[0],O[1],O[2],O[3],ee[0],ee[1],ee[2],Q[0],Q[1],Q[2],Y,-B,O[0],O[1],O[2],O[3],Q[0],Q[1],Q[2],ee[0],ee[1],ee[2],S,-B,Z[0],Z[1],Z[2],Z[3],Q[0],Q[1],Q[2],ee[0],ee[1],ee[2],S,B,Z[0],Z[1],Z[2],Z[3]),C+=4}}if(this.buffer.update(A),E.push(S),P.push(I[I.length-1].slice()),this.bounds=M,this.vertexCount=C,this.points=P,this.arcLength=E,"dashes"in t){var j=t.dashes,X=j.slice();for(X.unshift(0),i=1;i<X.length;++i)X[i]=X[i-1]+X[i];var H=y(new Array(256*4),[256,1,4]);for(i=0;i<256;++i){for(r=0;r<4;++r)H.set(i,0,r,0);v.le(X,X[X.length-1]*i/255)&1?H.set(i,0,0,0):H.set(i,0,0,255)}this.texture.setPixels(H)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(t){if(!t||t.id!==this.pickId)return null;var i=b(t.value[0],t.value[1],t.value[2],0),r=v.le(this.arcLength,i);if(r<0)return null;if(r===this.arcLength.length-1)return new h(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var x=this.points[r],A=this.points[Math.min(r+1,this.points.length-1)],E=(i-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),P=1-E,S=[0,0,0],C=0;C<3;++C)S[C]=P*x[C]+E*A[C];var M=Math.min(E<.5?r:r+1,this.points.length-1);return new h(i,S,M,this.points[M])};function o(t){var i=t.gl||t.scene&&t.scene.gl,r=_(i);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var x=f(i);x.attributes.position.location=0,x.attributes.nextPosition.location=1,x.attributes.arcLength.location=2,x.attributes.lineWidth.location=3,x.attributes.color.location=4;for(var A=d(i),E=e(i,[{buffer:A,size:3,offset:0,stride:48},{buffer:A,size:3,offset:12,stride:48},{buffer:A,size:1,offset:24,stride:48},{buffer:A,size:1,offset:28,stride:48},{buffer:A,size:4,offset:32,stride:48}]),P=y(new Array(256*4),[256,1,4]),S=0;S<256*4;++S)P.data[S]=255;var C=u(i,P);C.wrap=i.REPEAT;var M=new c(i,r,x,A,E,C);return M.update(t),M}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(p,w,k){w.exports=d;function d(e){var u=new Float32Array(16);return u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=e[3],u[4]=e[4],u[5]=e[5],u[6]=e[6],u[7]=e[7],u[8]=e[8],u[9]=e[9],u[10]=e[10],u[11]=e[11],u[12]=e[12],u[13]=e[13],u[14]=e[14],u[15]=e[15],u}},{}],93:[function(p,w,k){w.exports=d;function d(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(p,w,k){w.exports=d;function d(e){var u=e[0],s=e[1],l=e[2],b=e[3],v=e[4],y=e[5],T=e[6],_=e[7],f=e[8],g=e[9],n=e[10],a=e[11],h=e[12],c=e[13],m=e[14],o=e[15],t=u*y-s*v,i=u*T-l*v,r=u*_-b*v,x=s*T-l*y,A=s*_-b*y,E=l*_-b*T,P=f*c-g*h,S=f*m-n*h,C=f*o-a*h,M=g*m-n*c,I=g*o-a*c,G=n*o-a*m;return t*G-i*I+r*M+x*C-A*S+E*P}},{}],95:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0],l=u[1],b=u[2],v=u[3],y=s+s,T=l+l,_=b+b,f=s*y,g=l*y,n=l*T,a=b*y,h=b*T,c=b*_,m=v*y,o=v*T,t=v*_;return e[0]=1-n-c,e[1]=g+t,e[2]=a-o,e[3]=0,e[4]=g-t,e[5]=1-f-c,e[6]=h+m,e[7]=0,e[8]=a+o,e[9]=h-m,e[10]=1-f-n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=u[3],T=l+l,_=b+b,f=v+v,g=l*T,n=l*_,a=l*f,h=b*_,c=b*f,m=v*f,o=y*T,t=y*_,i=y*f;return e[0]=1-(h+m),e[1]=n+i,e[2]=a-t,e[3]=0,e[4]=n-i,e[5]=1-(g+m),e[6]=c+o,e[7]=0,e[8]=a+t,e[9]=c-o,e[10]=1-(g+h),e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1,e}},{}],97:[function(p,w,k){w.exports=d;function d(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0],l=u[1],b=u[2],v=u[3],y=u[4],T=u[5],_=u[6],f=u[7],g=u[8],n=u[9],a=u[10],h=u[11],c=u[12],m=u[13],o=u[14],t=u[15],i=s*T-l*y,r=s*_-b*y,x=s*f-v*y,A=l*_-b*T,E=l*f-v*T,P=b*f-v*_,S=g*m-n*c,C=g*o-a*c,M=g*t-h*c,I=n*o-a*m,G=n*t-h*m,V=a*t-h*o,q=i*V-r*G+x*I+A*M-E*C+P*S;return q?(q=1/q,e[0]=(T*V-_*G+f*I)*q,e[1]=(b*G-l*V-v*I)*q,e[2]=(m*P-o*E+t*A)*q,e[3]=(a*E-n*P-h*A)*q,e[4]=(_*M-y*V-f*C)*q,e[5]=(s*V-b*M+v*C)*q,e[6]=(o*x-c*P-t*r)*q,e[7]=(g*P-a*x+h*r)*q,e[8]=(y*G-T*M+f*S)*q,e[9]=(l*M-s*G-v*S)*q,e[10]=(c*E-m*x+t*i)*q,e[11]=(n*x-g*E-h*i)*q,e[12]=(T*C-y*I-_*S)*q,e[13]=(s*I-l*C+b*S)*q,e[14]=(m*r-c*A-o*i)*q,e[15]=(g*A-n*r+a*i)*q,e):null}},{}],99:[function(p,w,k){var d=p("./identity");w.exports=e;function e(u,s,l,b){var v,y,T,_,f,g,n,a,h,c,m=s[0],o=s[1],t=s[2],i=b[0],r=b[1],x=b[2],A=l[0],E=l[1],P=l[2];return Math.abs(m-A)<1e-6&&Math.abs(o-E)<1e-6&&Math.abs(t-P)<1e-6?d(u):(n=m-A,a=o-E,h=t-P,c=1/Math.sqrt(n*n+a*a+h*h),n*=c,a*=c,h*=c,v=r*h-x*a,y=x*n-i*h,T=i*a-r*n,c=Math.sqrt(v*v+y*y+T*T),c?(c=1/c,v*=c,y*=c,T*=c):(v=0,y=0,T=0),_=a*T-h*y,f=h*v-n*T,g=n*y-a*v,c=Math.sqrt(_*_+f*f+g*g),c?(c=1/c,_*=c,f*=c,g*=c):(_=0,f=0,g=0),u[0]=v,u[1]=_,u[2]=n,u[3]=0,u[4]=y,u[5]=f,u[6]=a,u[7]=0,u[8]=T,u[9]=g,u[10]=h,u[11]=0,u[12]=-(v*m+y*o+T*t),u[13]=-(_*m+f*o+g*t),u[14]=-(n*m+a*o+h*t),u[15]=1,u)}},{"./identity":97}],100:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=u[3],T=u[4],_=u[5],f=u[6],g=u[7],n=u[8],a=u[9],h=u[10],c=u[11],m=u[12],o=u[13],t=u[14],i=u[15],r=s[0],x=s[1],A=s[2],E=s[3];return e[0]=r*l+x*T+A*n+E*m,e[1]=r*b+x*_+A*a+E*o,e[2]=r*v+x*f+A*h+E*t,e[3]=r*y+x*g+A*c+E*i,r=s[4],x=s[5],A=s[6],E=s[7],e[4]=r*l+x*T+A*n+E*m,e[5]=r*b+x*_+A*a+E*o,e[6]=r*v+x*f+A*h+E*t,e[7]=r*y+x*g+A*c+E*i,r=s[8],x=s[9],A=s[10],E=s[11],e[8]=r*l+x*T+A*n+E*m,e[9]=r*b+x*_+A*a+E*o,e[10]=r*v+x*f+A*h+E*t,e[11]=r*y+x*g+A*c+E*i,r=s[12],x=s[13],A=s[14],E=s[15],e[12]=r*l+x*T+A*n+E*m,e[13]=r*b+x*_+A*a+E*o,e[14]=r*v+x*f+A*h+E*t,e[15]=r*y+x*g+A*c+E*i,e}},{}],101:[function(p,w,k){w.exports=d;function d(e,u,s,l,b,v,y){var T=1/(u-s),_=1/(l-b),f=1/(v-y);return e[0]=-2*T,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(u+s)*T,e[13]=(b+l)*_,e[14]=(y+v)*f,e[15]=1,e}},{}],102:[function(p,w,k){w.exports=d;function d(e,u,s,l,b){var v=1/Math.tan(u/2),y=1/(l-b);return e[0]=v/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(b+l)*y,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*b*l*y,e[15]=0,e}},{}],103:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=l[0],v=l[1],y=l[2],T=Math.sqrt(b*b+v*v+y*y),_,f,g,n,a,h,c,m,o,t,i,r,x,A,E,P,S,C,M,I,G,V,q,ee;return Math.abs(T)<1e-6?null:(T=1/T,b*=T,v*=T,y*=T,_=Math.sin(s),f=Math.cos(s),g=1-f,n=u[0],a=u[1],h=u[2],c=u[3],m=u[4],o=u[5],t=u[6],i=u[7],r=u[8],x=u[9],A=u[10],E=u[11],P=b*b*g+f,S=v*b*g+y*_,C=y*b*g-v*_,M=b*v*g-y*_,I=v*v*g+f,G=y*v*g+b*_,V=b*y*g+v*_,q=v*y*g-b*_,ee=y*y*g+f,e[0]=n*P+m*S+r*C,e[1]=a*P+o*S+x*C,e[2]=h*P+t*S+A*C,e[3]=c*P+i*S+E*C,e[4]=n*M+m*I+r*G,e[5]=a*M+o*I+x*G,e[6]=h*M+t*I+A*G,e[7]=c*M+i*I+E*G,e[8]=n*V+m*q+r*ee,e[9]=a*V+o*q+x*ee,e[10]=h*V+t*q+A*ee,e[11]=c*V+i*q+E*ee,u!==e&&(e[12]=u[12],e[13]=u[13],e[14]=u[14],e[15]=u[15]),e)}},{}],104:[function(p,w,k){w.exports=d;function d(e,u,s){var l=Math.sin(s),b=Math.cos(s),v=u[4],y=u[5],T=u[6],_=u[7],f=u[8],g=u[9],n=u[10],a=u[11];return u!==e&&(e[0]=u[0],e[1]=u[1],e[2]=u[2],e[3]=u[3],e[12]=u[12],e[13]=u[13],e[14]=u[14],e[15]=u[15]),e[4]=v*b+f*l,e[5]=y*b+g*l,e[6]=T*b+n*l,e[7]=_*b+a*l,e[8]=f*b-v*l,e[9]=g*b-y*l,e[10]=n*b-T*l,e[11]=a*b-_*l,e}},{}],105:[function(p,w,k){w.exports=d;function d(e,u,s){var l=Math.sin(s),b=Math.cos(s),v=u[0],y=u[1],T=u[2],_=u[3],f=u[8],g=u[9],n=u[10],a=u[11];return u!==e&&(e[4]=u[4],e[5]=u[5],e[6]=u[6],e[7]=u[7],e[12]=u[12],e[13]=u[13],e[14]=u[14],e[15]=u[15]),e[0]=v*b-f*l,e[1]=y*b-g*l,e[2]=T*b-n*l,e[3]=_*b-a*l,e[8]=v*l+f*b,e[9]=y*l+g*b,e[10]=T*l+n*b,e[11]=_*l+a*b,e}},{}],106:[function(p,w,k){w.exports=d;function d(e,u,s){var l=Math.sin(s),b=Math.cos(s),v=u[0],y=u[1],T=u[2],_=u[3],f=u[4],g=u[5],n=u[6],a=u[7];return u!==e&&(e[8]=u[8],e[9]=u[9],e[10]=u[10],e[11]=u[11],e[12]=u[12],e[13]=u[13],e[14]=u[14],e[15]=u[15]),e[0]=v*b+f*l,e[1]=y*b+g*l,e[2]=T*b+n*l,e[3]=_*b+a*l,e[4]=f*b-v*l,e[5]=g*b-y*l,e[6]=n*b-T*l,e[7]=a*b-_*l,e}},{}],107:[function(p,w,k){w.exports=d;function d(e,u,s){var l=s[0],b=s[1],v=s[2];return e[0]=u[0]*l,e[1]=u[1]*l,e[2]=u[2]*l,e[3]=u[3]*l,e[4]=u[4]*b,e[5]=u[5]*b,e[6]=u[6]*b,e[7]=u[7]*b,e[8]=u[8]*v,e[9]=u[9]*v,e[10]=u[10]*v,e[11]=u[11]*v,e[12]=u[12],e[13]=u[13],e[14]=u[14],e[15]=u[15],e}},{}],108:[function(p,w,k){w.exports=d;function d(e,u,s){var l=s[0],b=s[1],v=s[2],y,T,_,f,g,n,a,h,c,m,o,t;return u===e?(e[12]=u[0]*l+u[4]*b+u[8]*v+u[12],e[13]=u[1]*l+u[5]*b+u[9]*v+u[13],e[14]=u[2]*l+u[6]*b+u[10]*v+u[14],e[15]=u[3]*l+u[7]*b+u[11]*v+u[15]):(y=u[0],T=u[1],_=u[2],f=u[3],g=u[4],n=u[5],a=u[6],h=u[7],c=u[8],m=u[9],o=u[10],t=u[11],e[0]=y,e[1]=T,e[2]=_,e[3]=f,e[4]=g,e[5]=n,e[6]=a,e[7]=h,e[8]=c,e[9]=m,e[10]=o,e[11]=t,e[12]=y*l+g*b+c*v+u[12],e[13]=T*l+n*b+m*v+u[13],e[14]=_*l+a*b+o*v+u[14],e[15]=f*l+h*b+t*v+u[15]),e}},{}],109:[function(p,w,k){w.exports=d;function d(e,u){if(e===u){var s=u[1],l=u[2],b=u[3],v=u[6],y=u[7],T=u[11];e[1]=u[4],e[2]=u[8],e[3]=u[12],e[4]=s,e[6]=u[9],e[7]=u[13],e[8]=l,e[9]=v,e[11]=u[14],e[12]=b,e[13]=y,e[14]=T}else e[0]=u[0],e[1]=u[4],e[2]=u[8],e[3]=u[12],e[4]=u[1],e[5]=u[5],e[6]=u[9],e[7]=u[13],e[8]=u[2],e[9]=u[6],e[10]=u[10],e[11]=u[14],e[12]=u[3],e[13]=u[7],e[14]=u[11],e[15]=u[15];return e}},{}],110:[function(p,w,k){"use strict";var d=p("barycentric"),e=p("polytope-closest-point/lib/closest_point_2d.js");w.exports=v;function u(y,T){for(var _=[0,0,0,0],f=0;f<4;++f)for(var g=0;g<4;++g)_[g]+=y[4*f+g]*T[f];return _}function s(y,T,_,f,g){for(var n=u(f,u(_,u(T,[y[0],y[1],y[2],1]))),a=0;a<3;++a)n[a]/=n[3];return[.5*g[0]*(1+n[0]),.5*g[1]*(1-n[1])]}function l(y,T){if(y.length===2){for(var _=0,f=0,g=0;g<2;++g)_+=Math.pow(T[g]-y[0][g],2),f+=Math.pow(T[g]-y[1][g],2);return _=Math.sqrt(_),f=Math.sqrt(f),_+f<1e-6?[1,0]:[f/(_+f),_/(f+_)]}else if(y.length===3){var n=[0,0];return e(y[0],y[1],y[2],T,n),d(y,n)}return[]}function b(y,T){for(var _=[0,0,0],f=0;f<y.length;++f)for(var g=y[f],n=T[f],a=0;a<3;++a)_[a]+=n*g[a];return _}function v(y,T,_,f,g,n){if(y.length===1)return[0,y[0].slice()];for(var a=new Array(y.length),h=0;h<y.length;++h)a[h]=s(y[h],_,f,g,n);for(var c=0,m=1/0,h=0;h<a.length;++h){for(var o=0,t=0;t<2;++t)o+=Math.pow(a[h][t]-T[t],2);o<m&&(m=o,c=h)}for(var i=l(a,T),r=0,h=0;h<3;++h){if(i[h]<-.001||i[h]>1.0001)return null;r+=i[h]}return Math.abs(r-1)>.001?null:[c,b(y,i),i]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(p,w,k){var d=p("glslify"),e=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=d([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),s=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),b=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),v=d([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),y=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),T=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),_=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),f=d([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),g=d([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);k.meshShader={vertex:e,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},k.wireShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},k.pointShader={vertex:b,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},k.pickShader={vertex:y,fragment:T,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},k.pointPickShader={vertex:_,fragment:T,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},k.contourShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(p,w,k){"use strict";var d=1e-6,e=1e-6,u=p("gl-shader"),s=p("gl-buffer"),l=p("gl-vao"),b=p("gl-texture2d"),v=p("normals"),y=p("gl-mat4/multiply"),T=p("gl-mat4/invert"),_=p("ndarray"),f=p("colormap"),g=p("simplicial-complex-contour"),n=p("typedarray-pool"),a=p("./lib/shaders"),h=p("./lib/closest-point"),c=a.meshShader,m=a.wireShader,o=a.pointShader,t=a.pickShader,i=a.pointPickShader,r=a.contourShader,x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(U,O,Z,B,Y,j,X,H,K,W,$,re,de,ve,ue,ce,_e,fe,ne,ie,me,we,be,Me,Ie,Ke,Oe){this.gl=U,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=O,this.dirty=!0,this.triShader=Z,this.lineShader=B,this.pointShader=Y,this.pickShader=j,this.pointPickShader=X,this.contourShader=H,this.trianglePositions=K,this.triangleColors=$,this.triangleNormals=de,this.triangleUVs=re,this.triangleIds=W,this.triangleVAO=ve,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=_e,this.edgeUVs=fe,this.edgeIds=ce,this.edgeVAO=ne,this.edgeCount=0,this.pointPositions=ie,this.pointColors=we,this.pointUVs=be,this.pointSizes=Me,this.pointIds=me,this.pointVAO=Ie,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ke,this.contourVAO=Oe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var E=A.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(U){this.pickId=U};function P(U,O){if(!O||!O.length)return 1;for(var Z=0;Z<O.length;++Z){if(O.length<2)return 1;if(O[Z][0]===U)return O[Z][1];if(O[Z][0]>U&&Z>0){var B=(O[Z][0]-U)/(O[Z][0]-O[Z-1][0]);return O[Z][1]*(1-B)+B*O[Z-1][1]}}return 1}function S(U,O){for(var Z=f({colormap:U,nshades:256,format:"rgba"}),B=new Uint8Array(256*4),Y=0;Y<256;++Y){for(var j=Z[Y],X=0;X<3;++X)B[4*Y+X]=j[X];O?B[4*Y+3]=255*P(Y/255,O):B[4*Y+3]=255*j[3]}return _(B,[256,256,4],[4,0,1])}function C(U){for(var O=U.length,Z=new Array(O),B=0;B<O;++B)Z[B]=U[B][2];return Z}E.highlight=function(U){if(!U||!this.contourEnable){this.contourCount=0;return}for(var O=g(this.cells,this.intensity,U.intensity),Z=O.cells,B=O.vertexIds,Y=O.vertexWeights,j=Z.length,X=n.mallocFloat32(2*3*j),H=0,K=0;K<j;++K)for(var W=Z[K],$=0;$<2;++$){var re=W[0];W.length===2&&(re=W[$]);for(var de=B[re][0],ve=B[re][1],ue=Y[re],ce=1-ue,_e=this.positions[de],fe=this.positions[ve],ne=0;ne<3;++ne)X[H++]=ue*_e[ne]+ce*fe[ne]}this.contourCount=H/3|0,this.contourPositions.update(X.subarray(0,H)),n.free(X)},E.update=function(U){U=U||{};var O=this.gl;this.dirty=!0,"contourEnable"in U&&(this.contourEnable=U.contourEnable),"contourColor"in U&&(this.contourColor=U.contourColor),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"lightPosition"in U&&(this.lightPosition=U.lightPosition),this.hasAlpha=!1,"opacity"in U&&(this.opacity=U.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in U&&(this.opacityscale=U.opacityscale,this.hasAlpha=!0),"ambient"in U&&(this.ambientLight=U.ambient),"diffuse"in U&&(this.diffuseLight=U.diffuse),"specular"in U&&(this.specularLight=U.specular),"roughness"in U&&(this.roughness=U.roughness),"fresnel"in U&&(this.fresnel=U.fresnel),U.texture?(this.texture.dispose(),this.texture=b(O,U.texture)):U.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=O.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=O.LINEAR,this.texture.setPixels(S(U.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=U.cells,B=U.positions;if(!B||!Z)return;var Y=[],j=[],X=[],H=[],K=[],W=[],$=[],re=[],de=[],ve=[],ue=[],ce=[],_e=[],fe=[];this.cells=Z,this.positions=B;var ne=U.vertexNormals,ie=U.cellNormals,me=U.vertexNormalsEpsilon===void 0?d:U.vertexNormalsEpsilon,we=U.faceNormalsEpsilon===void 0?e:U.faceNormalsEpsilon;U.useFacetNormals&&!ie&&(ie=v.faceNormals(Z,B,we)),!ie&&!ne&&(ne=v.vertexNormals(Z,B,me));var be=U.vertexColors,Me=U.cellColors,Ie=U.meshColor||[1,1,1,1],Ke=U.vertexUVs,Oe=U.vertexIntensity,We=U.cellUVs,Fe=U.cellIntensity,Ge=1/0,Xe=-1/0;if(!Ke&&!We)if(Oe)if(U.vertexIntensityBounds)Ge=+U.vertexIntensityBounds[0],Xe=+U.vertexIntensityBounds[1];else for(var ut=0;ut<Oe.length;++ut){var rt=Oe[ut];Ge=Math.min(Ge,rt),Xe=Math.max(Xe,rt)}else if(Fe)if(U.cellIntensityBounds)Ge=+U.cellIntensityBounds[0],Xe=+U.cellIntensityBounds[1];else for(var ut=0;ut<Fe.length;++ut){var rt=Fe[ut];Ge=Math.min(Ge,rt),Xe=Math.max(Xe,rt)}else for(var ut=0;ut<B.length;++ut){var rt=B[ut][2];Ge=Math.min(Ge,rt),Xe=Math.max(Xe,rt)}Oe?this.intensity=Oe:Fe?this.intensity=Fe:this.intensity=C(B),this.pickVertex=!(Fe||Me);var dt=U.pointSizes,st=U.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var ut=0;ut<B.length;++ut)for(var Ve=B[ut],Je=0;Je<3;++Je)isNaN(Ve[Je])||!isFinite(Ve[Je])||(this.bounds[0][Je]=Math.min(this.bounds[0][Je],Ve[Je]),this.bounds[1][Je]=Math.max(this.bounds[1][Je],Ve[Je]));var ke=0,Le=0,Be=0;e:for(var ut=0;ut<Z.length;++ut){var pe=Z[ut];switch(pe.length){case 1:for(var Ae=pe[0],Ve=B[Ae],Je=0;Je<3;++Je)if(isNaN(Ve[Je])||!isFinite(Ve[Je]))continue e;ve.push(Ve[0],Ve[1],Ve[2]);var Ce;be?Ce=be[Ae]:Me?Ce=Me[ut]:Ce=Ie,this.opacityscale&&Oe?j.push(Ce[0],Ce[1],Ce[2],this.opacity*P((Oe[Ae]-Ge)/(Xe-Ge),this.opacityscale)):Ce.length===3?ue.push(Ce[0],Ce[1],Ce[2],this.opacity):(ue.push(Ce[0],Ce[1],Ce[2],Ce[3]*this.opacity),Ce[3]<1&&(this.hasAlpha=!0));var Se;Ke?Se=Ke[Ae]:Oe?Se=[(Oe[Ae]-Ge)/(Xe-Ge),0]:We?Se=We[ut]:Fe?Se=[(Fe[ut]-Ge)/(Xe-Ge),0]:Se=[(Ve[2]-Ge)/(Xe-Ge),0],ce.push(Se[0],Se[1]),dt?_e.push(dt[Ae]):_e.push(st),fe.push(ut),Be+=1;break;case 2:for(var Je=0;Je<2;++Je)for(var Ae=pe[Je],Ve=B[Ae],He=0;He<3;++He)if(isNaN(Ve[He])||!isFinite(Ve[He]))continue e;for(var Je=0;Je<2;++Je){var Ae=pe[Je],Ve=B[Ae];W.push(Ve[0],Ve[1],Ve[2]);var Ce;be?Ce=be[Ae]:Me?Ce=Me[ut]:Ce=Ie,this.opacityscale&&Oe?j.push(Ce[0],Ce[1],Ce[2],this.opacity*P((Oe[Ae]-Ge)/(Xe-Ge),this.opacityscale)):Ce.length===3?$.push(Ce[0],Ce[1],Ce[2],this.opacity):($.push(Ce[0],Ce[1],Ce[2],Ce[3]*this.opacity),Ce[3]<1&&(this.hasAlpha=!0));var Se;Ke?Se=Ke[Ae]:Oe?Se=[(Oe[Ae]-Ge)/(Xe-Ge),0]:We?Se=We[ut]:Fe?Se=[(Fe[ut]-Ge)/(Xe-Ge),0]:Se=[(Ve[2]-Ge)/(Xe-Ge),0],re.push(Se[0],Se[1]),de.push(ut)}Le+=1;break;case 3:for(var Je=0;Je<3;++Je)for(var Ae=pe[Je],Ve=B[Ae],He=0;He<3;++He)if(isNaN(Ve[He])||!isFinite(Ve[He]))continue e;for(var Je=0;Je<3;++Je){var Ae=pe[2-Je],Ve=B[Ae];Y.push(Ve[0],Ve[1],Ve[2]);var Ce;be?Ce=be[Ae]:Me?Ce=Me[ut]:Ce=Ie,Ce?this.opacityscale&&Oe?j.push(Ce[0],Ce[1],Ce[2],this.opacity*P((Oe[Ae]-Ge)/(Xe-Ge),this.opacityscale)):Ce.length===3?j.push(Ce[0],Ce[1],Ce[2],this.opacity):(j.push(Ce[0],Ce[1],Ce[2],Ce[3]*this.opacity),Ce[3]<1&&(this.hasAlpha=!0)):j.push(.5,.5,.5,1);var Se;Ke?Se=Ke[Ae]:Oe?Se=[(Oe[Ae]-Ge)/(Xe-Ge),0]:We?Se=We[ut]:Fe?Se=[(Fe[ut]-Ge)/(Xe-Ge),0]:Se=[(Ve[2]-Ge)/(Xe-Ge),0],H.push(Se[0],Se[1]);var Ne;ne?Ne=ne[Ae]:Ne=ie[ut],X.push(Ne[0],Ne[1],Ne[2]),K.push(ut)}ke+=1;break;default:break}}this.pointCount=Be,this.edgeCount=Le,this.triangleCount=ke,this.pointPositions.update(ve),this.pointColors.update(ue),this.pointUVs.update(ce),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update(W),this.edgeColors.update($),this.edgeUVs.update(re),this.edgeIds.update(new Uint32Array(de)),this.trianglePositions.update(Y),this.triangleColors.update(j),this.triangleUVs.update(H),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(K))},E.drawTransparent=E.draw=function(U){U=U||{};for(var O=this.gl,Z=U.model||x,B=U.view||x,Y=U.projection||x,j=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)j[0][X]=Math.max(j[0][X],this.clipBounds[0][X]),j[1][X]=Math.min(j[1][X],this.clipBounds[1][X]);var H={model:Z,view:B,projection:Y,inverseModel:x.slice(),clipBounds:j,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=T(H.inverseModel,H.model),O.disable(O.CULL_FACE),this.texture.bind(0);var K=new Array(16);y(K,H.view,H.model),y(K,H.projection,K),T(K,K);for(var X=0;X<3;++X)H.eyePosition[X]=K[12+X]/K[15];for(var W=K[15],X=0;X<3;++X)W+=this.lightPosition[X]*K[4*X+3];for(var X=0;X<3;++X){for(var $=K[12+X],re=0;re<3;++re)$+=K[4*re+X]*this.lightPosition[re];H.lightPosition[X]=$/W}if(this.triangleCount>0){var de=this.triShader;de.bind(),de.uniforms=H,this.triangleVAO.bind(),O.drawArrays(O.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var de=this.lineShader;de.bind(),de.uniforms=H,this.edgeVAO.bind(),O.lineWidth(this.lineWidth*this.pixelRatio),O.drawArrays(O.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var de=this.pointShader;de.bind(),de.uniforms=H,this.pointVAO.bind(),O.drawArrays(O.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var de=this.contourShader;de.bind(),de.uniforms=H,this.contourVAO.bind(),O.drawArrays(O.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(U){U=U||{};for(var O=this.gl,Z=U.model||x,B=U.view||x,Y=U.projection||x,j=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)j[0][X]=Math.max(j[0][X],this.clipBounds[0][X]),j[1][X]=Math.min(j[1][X],this.clipBounds[1][X]);this._model=[].slice.call(Z),this._view=[].slice.call(B),this._projection=[].slice.call(Y),this._resolution=[O.drawingBufferWidth,O.drawingBufferHeight];var H={model:Z,view:B,projection:Y,clipBounds:j,pickId:this.pickId/255},K=this.pickShader;if(K.bind(),K.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),O.drawArrays(O.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),O.lineWidth(this.lineWidth*this.pixelRatio),O.drawArrays(O.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var K=this.pointPickShader;K.bind(),K.uniforms=H,this.pointVAO.bind(),O.drawArrays(O.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(U){if(!U||U.id!==this.pickId)return null;for(var O=U.value[0]+256*U.value[1]+65536*U.value[2],Z=this.cells[O],B=this.positions,Y=new Array(Z.length),j=0;j<Z.length;++j)Y[j]=B[Z[j]];var X=U.coord[0],H=U.coord[1];if(!this.pickVertex){var K=this.positions[Z[0]],W=this.positions[Z[1]],$=this.positions[Z[2]],re=[(K[0]+W[0]+$[0])/3,(K[1]+W[1]+$[1])/3,(K[2]+W[2]+$[2])/3];return{_cellCenter:!0,position:[X,H],index:O,cell:Z,cellId:O,intensity:this.intensity[O],dataCoordinate:re}}var de=h(Y,[X*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!de)return null;for(var ve=de[2],ue=0,j=0;j<Z.length;++j)ue+=ve[j]*this.intensity[Z[j]];return{position:de[1],index:Z[de[0]],cell:Z,cellId:O,intensity:ue,dataCoordinate:this.positions[Z[de[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function M(U){var O=u(U,c.vertex,c.fragment);return O.attributes.position.location=0,O.attributes.color.location=2,O.attributes.uv.location=3,O.attributes.normal.location=4,O}function I(U){var O=u(U,m.vertex,m.fragment);return O.attributes.position.location=0,O.attributes.color.location=2,O.attributes.uv.location=3,O}function G(U){var O=u(U,o.vertex,o.fragment);return O.attributes.position.location=0,O.attributes.color.location=2,O.attributes.uv.location=3,O.attributes.pointSize.location=4,O}function V(U){var O=u(U,t.vertex,t.fragment);return O.attributes.position.location=0,O.attributes.id.location=1,O}function q(U){var O=u(U,i.vertex,i.fragment);return O.attributes.position.location=0,O.attributes.id.location=1,O.attributes.pointSize.location=4,O}function ee(U){var O=u(U,r.vertex,r.fragment);return O.attributes.position.location=0,O}function Q(U,O){arguments.length===1&&(O=U,U=O.gl);var Z=U.getExtension("OES_standard_derivatives")||U.getExtension("MOZ_OES_standard_derivatives")||U.getExtension("WEBKIT_OES_standard_derivatives");if(!Z)throw new Error("derivatives not supported");var B=M(U),Y=I(U),j=G(U),X=V(U),H=q(U),K=ee(U),W=b(U,_(new Uint8Array([255,255,255,255]),[1,1,4]));W.generateMipmap(),W.minFilter=U.LINEAR_MIPMAP_LINEAR,W.magFilter=U.LINEAR;var $=s(U),re=s(U),de=s(U),ve=s(U),ue=s(U),ce=l(U,[{buffer:$,type:U.FLOAT,size:3},{buffer:ue,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:re,type:U.FLOAT,size:4},{buffer:de,type:U.FLOAT,size:2},{buffer:ve,type:U.FLOAT,size:3}]),_e=s(U),fe=s(U),ne=s(U),ie=s(U),me=l(U,[{buffer:_e,type:U.FLOAT,size:3},{buffer:ie,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:U.FLOAT,size:4},{buffer:ne,type:U.FLOAT,size:2}]),we=s(U),be=s(U),Me=s(U),Ie=s(U),Ke=s(U),Oe=l(U,[{buffer:we,type:U.FLOAT,size:3},{buffer:Ke,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:U.FLOAT,size:4},{buffer:Me,type:U.FLOAT,size:2},{buffer:Ie,type:U.FLOAT,size:1}]),We=s(U),Fe=l(U,[{buffer:We,type:U.FLOAT,size:3}]),Ge=new A(U,W,B,Y,j,X,H,K,$,ue,re,de,ve,ce,_e,ie,fe,ne,me,we,Ke,be,Me,Ie,Oe,We,Fe);return Ge.update(O),Ge}w.exports=Q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(p,w,k){"use strict";w.exports=b;var d=p("gl-buffer"),e=p("gl-shader"),u=p("./shaders");function s(v,y,T){this.plot=v,this.vbo=y,this.shader=T}var l=s.prototype;l.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},l.drawBox=function(){var v=[0,0],y=[0,0];return function(T,_,f,g,n){var a=this.plot,h=this.shader,c=a.gl;v[0]=T,v[1]=_,y[0]=f,y[1]=g,h.uniforms.lo=v,h.uniforms.hi=y,h.uniforms.color=n,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function b(v){var y=v.gl,T=d(y,[0,0,0,1,1,0,1,1]),_=e(y,u.boxVert,u.lineFrag);return new s(v,T,_)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(p,w,k){"use strict";w.exports=y;var d=p("gl-buffer"),e=p("gl-shader"),u=p("binary-search-bounds"),s=p("./shaders");function l(T,_,f,g){this.plot=T,this.vbo=_,this.shader=f,this.tickShader=g,this.ticks=[[],[]]}function b(T,_){return T-_}var v=l.prototype;v.draw=function(){var T=[0,0],_=[0,0],f=[0,0];return function(){for(var g=this.plot,n=this.vbo,a=this.shader,h=this.ticks,c=g.gl,m=g._tickBounds,o=g.dataBox,t=g.viewBox,i=g.gridLineWidth,r=g.gridLineColor,x=g.gridLineEnable,A=g.pixelRatio,E=0;E<2;++E){var P=m[E],S=m[E+2],C=S-P,M=.5*(o[E+2]+o[E]),I=o[E+2]-o[E];_[E]=2*C/I,T[E]=2*(P-M)/I}a.bind(),n.bind(),a.attributes.dataCoord.pointer(),a.uniforms.dataShift=T,a.uniforms.dataScale=_;for(var G=0,E=0;E<2;++E){f[0]=f[1]=0,f[E]=1,a.uniforms.dataAxis=f,a.uniforms.lineWidth=i[E]/(t[E+2]-t[E])*A,a.uniforms.color=r[E];var V=h[E].length*6;x[E]&&V&&c.drawArrays(c.TRIANGLES,G,V),G+=V}}}(),v.drawTickMarks=function(){var T=[0,0],_=[0,0],f=[1,0],g=[0,1],n=[0,0],a=[0,0];return function(){for(var h=this.plot,c=this.vbo,m=this.tickShader,o=this.ticks,t=h.gl,i=h._tickBounds,r=h.dataBox,x=h.viewBox,A=h.pixelRatio,E=h.screenBox,P=E[2]-E[0],S=E[3]-E[1],C=x[2]-x[0],M=x[3]-x[1],I=0;I<2;++I){var G=i[I],V=i[I+2],q=V-G,ee=.5*(r[I+2]+r[I]),Q=r[I+2]-r[I];_[I]=2*q/Q,T[I]=2*(G-ee)/Q}_[0]*=C/P,T[0]*=C/P,_[1]*=M/S,T[1]*=M/S,m.bind(),c.bind(),m.attributes.dataCoord.pointer();var U=m.uniforms;U.dataShift=T,U.dataScale=_;var O=h.tickMarkLength,Z=h.tickMarkWidth,B=h.tickMarkColor,Y=0,j=o[0].length*6,X=Math.min(u.ge(o[0],(r[0]-i[0])/(i[2]-i[0]),b),o[0].length),H=Math.min(u.gt(o[0],(r[2]-i[0])/(i[2]-i[0]),b),o[0].length),K=Y+6*X,W=6*Math.max(0,H-X),$=Math.min(u.ge(o[1],(r[1]-i[1])/(i[3]-i[1]),b),o[1].length),re=Math.min(u.gt(o[1],(r[3]-i[1])/(i[3]-i[1]),b),o[1].length),de=j+6*$,ve=6*Math.max(0,re-$);n[0]=2*(x[0]-O[1])/P-1,n[1]=(x[3]+x[1])/S-1,a[0]=O[1]*A/P,a[1]=Z[1]*A/S,ve&&(U.color=B[1],U.tickScale=a,U.dataAxis=g,U.screenOffset=n,t.drawArrays(t.TRIANGLES,de,ve)),n[0]=(x[2]+x[0])/P-1,n[1]=2*(x[1]-O[0])/S-1,a[0]=Z[0]*A/P,a[1]=O[0]*A/S,W&&(U.color=B[0],U.tickScale=a,U.dataAxis=f,U.screenOffset=n,t.drawArrays(t.TRIANGLES,K,W)),n[0]=2*(x[2]+O[3])/P-1,n[1]=(x[3]+x[1])/S-1,a[0]=O[3]*A/P,a[1]=Z[3]*A/S,ve&&(U.color=B[3],U.tickScale=a,U.dataAxis=g,U.screenOffset=n,t.drawArrays(t.TRIANGLES,de,ve)),n[0]=(x[2]+x[0])/P-1,n[1]=2*(x[3]+O[2])/S-1,a[0]=Z[2]*A/P,a[1]=O[2]*A/S,W&&(U.color=B[2],U.tickScale=a,U.dataAxis=f,U.screenOffset=n,t.drawArrays(t.TRIANGLES,K,W))}}(),v.update=function(){var T=[1,1,-1,-1,1,-1],_=[1,-1,1,1,-1,-1];return function(f){for(var g=f.ticks,n=f.bounds,a=new Float32Array(6*3*(g[0].length+g[1].length)),h=this.plot.zeroLineEnable,c=0,m=[[],[]],o=0;o<2;++o)for(var t=m[o],i=g[o],r=n[o],x=n[o+2],A=0;A<i.length;++A){var E=(i[A].x-r)/(x-r);t.push(E);for(var P=0;P<6;++P)a[c++]=E,a[c++]=T[P],a[c++]=_[P]}this.ticks=m,this.vbo.update(a)}}(),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function y(T){var _=T.gl,f=d(_),g=e(_,s.gridVert,s.gridFrag),n=e(_,s.tickVert,s.gridFrag),a=new l(T,f,g,n);return a}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(p,w,k){"use strict";w.exports=b;var d=p("gl-buffer"),e=p("gl-shader"),u=p("./shaders");function s(v,y,T){this.plot=v,this.vbo=y,this.shader=T}var l=s.prototype;l.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},l.drawLine=function(){var v=[0,0],y=[0,0];return function(T,_,f,g,n,a){var h=this.plot,c=this.shader,m=h.gl;v[0]=T,v[1]=_,y[0]=f,y[1]=g,c.uniforms.start=v,c.uniforms.end=y,c.uniforms.width=n*h.pixelRatio,c.uniforms.color=a,m.drawArrays(m.TRIANGLE_STRIP,0,4)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function b(v){var y=v.gl,T=d(y,[-1,-1,-1,1,1,-1,1,1]),_=e(y,u.lineVert,u.lineFrag),f=new s(v,T,_);return f}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(p,w,k){"use strict";var d=p("glslify"),e=d([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);w.exports={lineVert:d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:e,textVert:d([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:e,gridVert:d([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:e,boxVert:d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:d([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(p,w,k){"use strict";w.exports=y;var d=p("gl-buffer"),e=p("gl-shader"),u=p("text-cache"),s=p("binary-search-bounds"),l=p("./shaders");function b(T,_,f){this.plot=T,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var v=b.prototype;v.drawTicks=function(){var T=[0,0],_=[0,0],f=[0,0];return function(g){var n=this.plot,a=this.shader,h=this.tickX[g],c=this.tickOffset[g],m=n.gl,o=n.viewBox,t=n.dataBox,i=n.screenBox,r=n.pixelRatio,x=n.tickEnable,A=n.tickPad,E=n.tickColor,P=n.tickAngle,S=n.labelEnable,C=n.labelPad,M=n.labelColor,I=n.labelAngle,G=this.labelOffset[g],V=this.labelCount[g],q=s.lt(h,t[g]),ee=s.le(h,t[g+2]);T[0]=T[1]=0,T[g]=1,_[g]=(o[2+g]+o[g])/(i[2+g]-i[g])-1;var Q=2/i[2+(g^1)]-i[g^1];_[g^1]=Q*o[g^1]-1,x[g]&&(_[g^1]-=Q*r*A[g],q<ee&&c[ee]>c[q]&&(a.uniforms.dataAxis=T,a.uniforms.screenOffset=_,a.uniforms.color=E[g],a.uniforms.angle=P[g],m.drawArrays(m.TRIANGLES,c[q],c[ee]-c[q]))),S[g]&&V&&(_[g^1]-=Q*r*C[g],a.uniforms.dataAxis=f,a.uniforms.screenOffset=_,a.uniforms.color=M[g],a.uniforms.angle=I[g],m.drawArrays(m.TRIANGLES,G,V)),_[g^1]=Q*o[2+(g^1)]-1,x[g+2]&&(_[g^1]+=Q*r*A[g+2],q<ee&&c[ee]>c[q]&&(a.uniforms.dataAxis=T,a.uniforms.screenOffset=_,a.uniforms.color=E[g+2],a.uniforms.angle=P[g+2],m.drawArrays(m.TRIANGLES,c[q],c[ee]-c[q]))),S[g+2]&&V&&(_[g^1]+=Q*r*C[g+2],a.uniforms.dataAxis=f,a.uniforms.screenOffset=_,a.uniforms.color=M[g+2],a.uniforms.angle=I[g+2],m.drawArrays(m.TRIANGLES,G,V))}}(),v.drawTitle=function(){var T=[0,0],_=[0,0];return function(){var f=this.plot,g=this.shader,n=f.gl,a=f.screenBox,h=f.titleCenter,c=f.titleAngle,m=f.titleColor,o=f.pixelRatio;if(!!this.titleCount){for(var t=0;t<2;++t)_[t]=2*(h[t]*o-a[t])/(a[2+t]-a[t])-1;g.bind(),g.uniforms.dataAxis=T,g.uniforms.screenOffset=_,g.uniforms.angle=c,g.uniforms.color=m,n.drawArrays(n.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=function(){var T=[0,0],_=[0,0],f=[0,0];return function(){var g=this.plot,n=this.shader,a=g._tickBounds,h=g.dataBox,c=g.screenBox,m=g.viewBox;n.bind();for(var o=0;o<2;++o){var t=a[o],i=a[o+2],r=i-t,x=.5*(h[o+2]+h[o]),A=h[o+2]-h[o],E=m[o],P=m[o+2],S=P-E,C=c[o],M=c[o+2],I=M-C;_[o]=2*r/A*S/I,T[o]=2*(t-x)/A*S/I}f[1]=2*g.pixelRatio/(c[3]-c[1]),f[0]=f[1]*(c[3]-c[1])/(c[2]-c[0]),n.uniforms.dataScale=_,n.uniforms.dataShift=T,n.uniforms.textScale=f,this.vbo.bind(),n.attributes.textCoordinate.pointer()}}(),v.update=function(T){var _=[],f=T.ticks,g=T.bounds,n,a,h,c,m,o;for(o=0;o<2;++o){var t=[Math.floor(_.length/3)],i=[-1/0],r=f[o];for(n=0;n<r.length;++n){var x=r[n],A=x.x,E=x.text,P=x.font||"sans-serif";m=x.fontSize||12;for(var S=1/(g[o+2]-g[o]),C=g[o],M=E.split(`
`),I=0;I<M.length;I++)for(c=u(P,M[I]).data,a=0;a<c.length;a+=2)_.push(c[a]*m,-c[a+1]*m-I*m*1.2,(A-C)*S);t.push(Math.floor(_.length/3)),i.push(A)}this.tickOffset[o]=t,this.tickX[o]=i}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(_.length/3),c=u(T.labelFont[o],T.labels[o],{textAlign:"center"}).data,m=T.labelSize[o],n=0;n<c.length;n+=2)_.push(c[n]*m,-c[n+1]*m,0);this.labelCount[o]=Math.floor(_.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(_.length/3),c=u(T.titleFont,T.title).data,m=T.titleSize,n=0;n<c.length;n+=2)_.push(c[n]*m,-c[n+1]*m,0);this.titleCount=Math.floor(_.length/3)-this.titleOffset,this.vbo.update(_)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function y(T){var _=T.gl,f=d(_),g=e(_,l.textVert,l.textFrag),n=new b(T,f,g);return n}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(p,w,k){"use strict";w.exports=f;var d=p("gl-select-static"),e=p("./lib/grid"),u=p("./lib/text"),s=p("./lib/line"),l=p("./lib/box");function b(g,n){this.gl=g,this.pickBuffer=n,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var v=b.prototype;v.setDirty=function(){this.dirty=this.pickDirty=!0},v.setOverlayDirty=function(){this.dirty=!0},v.nextDepthValue=function(){return this._depthCounter++/65536};function y(g,n,a){var h=.5*(a+1);return Math.floor((1-h)*g+h*n)|0}v.draw=function(){var g=[0,0,0,0];return function(){var n=this.gl,a=this.screenBox,h=this.viewBox,c=this.dataBox,m=this.pixelRatio,o=this.grid,t=this.line,i=this.text,r=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,n.bindFramebuffer(n.FRAMEBUFFER,null),n.enable(n.SCISSOR_TEST),n.disable(n.DEPTH_TEST),n.depthFunc(n.LESS),n.depthMask(!1),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD,n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.borderColor){n.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);var x=this.borderColor;n.clearColor(x[0]*x[3],x[1]*x[3],x[2]*x[3],x[3]),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)}n.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),n.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]);var A=this.backgroundColor;n.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),n.clear(n.COLOR_BUFFER_BIT),o.draw();var E=this.zeroLineEnable,P=this.zeroLineColor,S=this.zeroLineWidth;if(E[0]||E[1]){t.bind();for(var C=0;C<2;++C)if(!(!E[C]||!(c[C]<=0&&c[C+2]>=0))){var M=a[C]-c[C]*(a[C+2]-a[C])/(c[C+2]-c[C]);C===0?t.drawLine(M,a[1],M,a[3],S[C],P[C]):t.drawLine(a[0],M,a[2],M,S[C],P[C])}}for(var C=0;C<r.length;++C)r[C].draw();n.viewport(a[0],a[1],a[2]-a[0],a[3]-a[1]),n.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.grid.drawTickMarks(),t.bind();var I=this.borderLineEnable,G=this.borderLineWidth,V=this.borderLineColor;I[1]&&t.drawLine(h[0],h[1]-.5*G[1]*m,h[0],h[3]+.5*G[3]*m,G[1],V[1]),I[0]&&t.drawLine(h[0]-.5*G[0]*m,h[1],h[2]+.5*G[2]*m,h[1],G[0],V[0]),I[3]&&t.drawLine(h[2],h[1]-.5*G[1]*m,h[2],h[3]+.5*G[3]*m,G[3],V[3]),I[2]&&t.drawLine(h[0]-.5*G[0]*m,h[3],h[2]+.5*G[2]*m,h[3],G[2],V[2]),i.bind();for(var C=0;C<2;++C)i.drawTicks(C);this.titleEnable&&i.drawTitle();for(var q=this.overlays,C=0;C<q.length;++C)q[C].draw();n.disable(n.SCISSOR_TEST),n.disable(n.BLEND),n.depthMask(!0)}}}(),v.drawPick=function(){return function(){if(!this.static){var g=this.pickBuffer,n=this.gl;this._pickTimeout=null,g.begin();for(var a=1,h=this.objects,c=0;c<h.length;++c)a=h[c].drawPick(a);g.end()}}}(),v.pick=function(){return function(g,n){if(!this.static){var a=this.pixelRatio,h=this.pickPixelRatio,c=this.viewBox,m=Math.round((g-c[0]/a)*h)|0,o=Math.round((n-c[1]/a)*h)|0,t=this.pickBuffer.query(m,o,this.pickRadius);if(!t)return null;for(var i=t.id+(t.value[0]<<8)+(t.value[1]<<16)+(t.value[2]<<24),r=this.objects,x=0;x<r.length;++x){var A=r[x].pick(m,o,i);if(A)return A}return null}}}();function T(g){for(var n=g.slice(),a=0;a<n.length;++a)n[a]=n[a].slice();return n}function _(g,n){return g.x-n.x}v.setScreenBox=function(g){var n=this.screenBox,a=this.pixelRatio;n[0]=Math.round(g[0]*a)|0,n[1]=Math.round(g[1]*a)|0,n[2]=Math.round(g[2]*a)|0,n[3]=Math.round(g[3]*a)|0,this.setDirty()},v.setDataBox=function(g){var n=this.dataBox,a=n[0]!==g[0]||n[1]!==g[1]||n[2]!==g[2]||n[3]!==g[3];a&&(n[0]=g[0],n[1]=g[1],n[2]=g[2],n[3]=g[3],this.setDirty())},v.setViewBox=function(g){var n=this.pixelRatio,a=this.viewBox;a[0]=Math.round(g[0]*n)|0,a[1]=Math.round(g[1]*n)|0,a[2]=Math.round(g[2]*n)|0,a[3]=Math.round(g[3]*n)|0;var h=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((g[2]-g[0])*h)|0,Math.round((g[3]-g[1])*h)|0],this.setDirty()},v.update=function(g){g=g||{};var n=this.gl;this.pixelRatio=g.pixelRatio||1;var a=this.pixelRatio;this.pickPixelRatio=Math.max(a,1),this.setScreenBox(g.screenBox||[0,0,n.drawingBufferWidth/a,n.drawingBufferHeight/a]);var h=this.screenBox;this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/a,.125*(this.screenBox[3]-this.screenBox[1])/a,.875*(this.screenBox[2]-this.screenBox[0])/a,.875*(this.screenBox[3]-this.screenBox[1])/a]);var c=this.viewBox,m=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(g.dataBox||[-10,-10/m,10,10/m]),this.borderColor=g.borderColor!==!1?(g.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=T(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=T(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=T(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(c[0]+c[2])/a,(c[3]+120)/a]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=T(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=T(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=T(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=g.ticks||[[],[]],t=this._tickBounds;t[0]=t[1]=1/0,t[2]=t[3]=-1/0;for(var i=0;i<2;++i){var r=o[i].slice(0);r.length!==0&&(r.sort(_),t[i]=Math.min(t[i],r[0].x),t[i+2]=Math.max(t[i+2],r[r.length-1].x))}this.grid.update({bounds:t,ticks:o}),this.text.update({bounds:t,ticks:o,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},v.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();this.objects.length=0;for(var g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},v.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},v.removeObject=function(g){for(var n=this.objects,a=0;a<n.length;++a)if(n[a]===g){n.splice(a,1),this.setDirty();break}},v.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},v.removeOverlay=function(g){for(var n=this.overlays,a=0;a<n.length;++a)if(n[a]===g){n.splice(a,1),this.setOverlayDirty();break}};function f(g){var n=g.gl,a=d(n,[n.drawingBufferWidth,n.drawingBufferHeight]),h=new b(n,a);return h.grid=e(h),h.text=u(h),h.line=s(h),h.box=l(h),h.update(g),h}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(p,w,k){"use strict";w.exports=v;var d=p("right-now"),e=p("3d-view"),u=p("mouse-change"),s=p("mouse-wheel"),l=p("mouse-event-offset"),b=p("has-passive-events");function v(y,T){y=y||document.body,T=T||{};var _=[.01,1/0];"distanceLimits"in T&&(_[0]=T.distanceLimits[0],_[1]=T.distanceLimits[1]),"zoomMin"in T&&(_[0]=T.zoomMin),"zoomMax"in T&&(_[1]=T.zoomMax);var f=e({center:T.center||[0,0,0],up:T.up||[0,1,0],eye:T.eye||[0,0,10],mode:T.mode||"orbit",distanceLimits:_}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0,a=y.clientWidth,h=y.clientHeight,c={keyBindingMode:"rotate",enableWheel:!0,view:f,element:y,delay:T.delay||16,rotateSpeed:T.rotateSpeed||1,zoomSpeed:T.zoomSpeed||1,translateSpeed:T.translateSpeed||1,flipX:!!T.flipX,flipY:!!T.flipY,modes:f.modes,_ortho:T._ortho||T.projection&&T.projection.type==="orthographic"||!1,tick:function(){var m=d(),o=this.delay,t=m-2*o;f.idle(m-o),f.recalcMatrix(t),f.flush(m-(100+o*2));for(var i=!0,r=f.computedMatrix,x=0;x<16;++x)i=i&&g[x]===r[x],g[x]=r[x];var A=y.clientWidth===a&&y.clientHeight===h;return a=y.clientWidth,h=y.clientHeight,i?!A:(n=Math.exp(f.computedRadius[0]),!0)},lookAt:function(m,o,t){f.lookAt(f.lastT(),m,o,t)},rotate:function(m,o,t){f.rotate(f.lastT(),m,o,t)},pan:function(m,o,t){f.pan(f.lastT(),m,o,t)},translate:function(m,o,t){f.translate(f.lastT(),m,o,t)}};return Object.defineProperties(c,{matrix:{get:function(){return f.computedMatrix},set:function(m){return f.setMatrix(f.lastT(),m),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(m){var o=f.computedUp.slice(),t=f.computedEye.slice(),i=f.computedCenter.slice();if(f.setMode(m),m==="turntable"){var r=d();f._active.lookAt(r,t,i,o),f._active.lookAt(r+500,t,i,[0,0,1]),f._active.flush(r)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(m){return f.lookAt(f.lastT(),null,m),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(m){return f.lookAt(f.lastT(),m),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(m){return f.lookAt(f.lastT(),null,null,m),f.computedUp},enumerable:!0},distance:{get:function(){return n},set:function(m){return f.setDistance(f.lastT(),m),m},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(_)},set:function(m){return f.setDistanceLimits(m),m},enumerable:!0}}),y.addEventListener("contextmenu",function(m){return m.preventDefault(),!1}),c._lastX=-1,c._lastY=-1,c._lastMods={shift:!1,control:!1,alt:!1,meta:!1},c.enableMouseListeners=function(){c.mouseListener=u(y,m),y.addEventListener("touchstart",function(o){var t=l(o.changedTouches[0],y);m(0,t[0],t[1],c._lastMods),m(1,t[0],t[1],c._lastMods)},b?{passive:!0}:!1),y.addEventListener("touchmove",function(o){var t=l(o.changedTouches[0],y);m(1,t[0],t[1],c._lastMods),o.preventDefault()},b?{passive:!1}:!1),y.addEventListener("touchend",function(o){m(0,c._lastX,c._lastY,c._lastMods)},b?{passive:!0}:!1);function m(o,t,i,r){var x=c.keyBindingMode;if(x!==!1){var A=x==="rotate",E=x==="pan",P=x==="zoom",S=!!r.control,C=!!r.alt,M=!!r.shift,I=!!(o&1),G=!!(o&2),V=!!(o&4),q=1/y.clientHeight,ee=q*(t-c._lastX),Q=q*(i-c._lastY),U=c.flipX?1:-1,O=c.flipY?1:-1,Z=Math.PI*c.rotateSpeed,B=d();if(c._lastX!==-1&&c._lastY!==-1&&((A&&I&&!S&&!C&&!M||I&&!S&&!C&&M)&&f.rotate(B,U*Z*ee,-O*Z*Q,0),(E&&I&&!S&&!C&&!M||G||I&&S&&!C&&!M)&&f.pan(B,-c.translateSpeed*ee*n,c.translateSpeed*Q*n,0),P&&I&&!S&&!C&&!M||V||I&&!S&&C&&!M)){var Y=-c.zoomSpeed*Q/window.innerHeight*(B-f.lastT())*100;f.pan(B,0,0,n*(Math.exp(Y)-1))}return c._lastX=t,c._lastY=i,c._lastMods=r,!0}}c.wheelListener=s(y,function(o,t){if(c.keyBindingMode!==!1&&!!c.enableWheel){var i=c.flipX?1:-1,r=c.flipY?1:-1,x=d();if(Math.abs(o)>Math.abs(t))f.rotate(x,0,0,-o*i*Math.PI*c.rotateSpeed/window.innerWidth);else if(!c._ortho){var A=-c.zoomSpeed*r*t/window.innerHeight*(x-f.lastT())/20;f.pan(x,0,0,n*(Math.exp(A)-1))}}},!0)},c.enableMouseListeners(),c}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(p,w,k){var d=p("glslify"),e=p("gl-shader"),u=d([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),s=d([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);w.exports=function(l){return e(l,u,s,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(p,w,k){"use strict";var d=p("./camera.js"),e=p("gl-axes3d"),u=p("gl-axes3d/properties"),s=p("gl-spikes3d"),l=p("gl-select-static"),b=p("gl-fbo"),v=p("a-big-triangle"),y=p("mouse-change"),T=p("gl-mat4/perspective"),_=p("gl-mat4/ortho"),f=p("./lib/shader"),g=p("is-mobile")({tablet:!0,featureDetect:!0});w.exports={createScene:m,createCamera:d};function n(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function a(t,i){var r=null;try{r=t.getContext("webgl",i),r||(r=t.getContext("experimental-webgl",i))}catch{return null}return r}function h(t){var i=Math.round(Math.log(Math.abs(t))/Math.log(10));if(i<0){var r=Math.round(Math.pow(10,-i));return Math.ceil(t*r)/r}else if(i>0){var r=Math.round(Math.pow(10,i));return Math.ceil(t/r)*r}return Math.ceil(t)}function c(t){return typeof t=="boolean"?t:!0}function m(t){t=t||{},t.camera=t.camera||{};var i=t.canvas;if(!i)if(i=document.createElement("canvas"),t.container){var r=t.container;r.appendChild(i)}else document.body.appendChild(i);var x=t.gl;if(x||(t.glOptions&&(g=!!t.glOptions.preserveDrawingBuffer),x=a(i,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!x)throw new Error("webgl not supported");var A=t.bounds||[[-10,-10,-10],[10,10,10]],E=new n,P=b(x,x.drawingBufferWidth,x.drawingBufferHeight,{preferFloat:!g}),S=f(x),C=t.cameraObject&&t.cameraObject._ortho===!0||t.camera.projection&&t.camera.projection.type==="orthographic"||!1,M={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:C},I=t.axes||{},G=e(x,I);G.enable=!I.disable;var V=t.spikes||{},q=s(x,V),ee=[],Q=[],U=[],O=[],Z=!0,X=!0,B=new Array(16),Y=new Array(16),j={view:null,projection:B,model:Y,_ortho:!1},X=!0,H=[x.drawingBufferWidth,x.drawingBufferHeight],K=t.cameraObject||d(i,M),W={gl:x,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:i,selection:E,camera:K,axes:G,axesPixels:null,spikes:q,bounds:A,objects:ee,shape:H,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:c(t.autoResize),autoBounds:c(t.autoBounds),autoScale:!!t.autoScale,autoCenter:c(t.autoCenter),clipToBounds:c(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:j,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ie){this.aspect[0]=ie.x,this.aspect[1]=ie.y,this.aspect[2]=ie.z,X=!0},setBounds:function(ie,me){this.bounds[0][ie]=me.min,this.bounds[1][ie]=me.max},setClearColor:function(ie){this.clearColor=ie},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},$=[x.drawingBufferWidth/W.pixelRatio|0,x.drawingBufferHeight/W.pixelRatio|0];function re(){if(!W._stopped&&!!W.autoResize){var ie=i.parentNode,me=1,we=1;ie&&ie!==document.body?(me=ie.clientWidth,we=ie.clientHeight):(me=window.innerWidth,we=window.innerHeight);var be=Math.ceil(me*W.pixelRatio)|0,Me=Math.ceil(we*W.pixelRatio)|0;if(be!==i.width||Me!==i.height){i.width=be,i.height=Me;var Ie=i.style;Ie.position=Ie.position||"absolute",Ie.left="0px",Ie.top="0px",Ie.width=me+"px",Ie.height=we+"px",Z=!0}}}W.autoResize&&re(),window.addEventListener("resize",re);function de(){for(var ie=ee.length,me=O.length,we=0;we<me;++we)U[we]=0;e:for(var we=0;we<ie;++we){var be=ee[we],Me=be.pickSlots;if(!Me){Q[we]=-1;continue}for(var Ie=0;Ie<me;++Ie)if(U[Ie]+Me<255){Q[we]=Ie,be.setPickBase(U[Ie]+1),U[Ie]+=Me;continue e}var Ke=l(x,H);Q[we]=me,O.push(Ke),U.push(Me),be.setPickBase(1),me+=1}for(;me>0&&U[me-1]===0;)U.pop(),O.pop().dispose()}W.update=function(ie){W._stopped||(ie=ie||{},Z=!0,X=!0)},W.add=function(ie){W._stopped||(ie.axes=G,ee.push(ie),Q.push(-1),Z=!0,X=!0,de())},W.remove=function(ie){if(!W._stopped){var me=ee.indexOf(ie);me<0||(ee.splice(me,1),Q.pop(),Z=!0,X=!0,de())}},W.dispose=function(){if(!W._stopped&&(W._stopped=!0,window.removeEventListener("resize",re),i.removeEventListener("webglcontextlost",ve),W.mouseListener.enabled=!1,!W.contextLost)){G.dispose(),q.dispose();for(var ie=0;ie<ee.length;++ie)ee[ie].dispose();P.dispose();for(var ie=0;ie<O.length;++ie)O[ie].dispose();S.dispose(),x=null,G=null,q=null,ee=[]}},W._mouseRotating=!1,W._prevButtons=0,W.enableMouseListeners=function(){W.mouseListener=y(i,function(ie,me,we){if(!W._stopped){var be=O.length,Me=ee.length,Ie=E.object;E.distance=1/0,E.mouse[0]=me,E.mouse[1]=we,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var Ke=!1;if(ie&&W._prevButtons)W._mouseRotating=!0;else{W._mouseRotating&&(X=!0),W._mouseRotating=!1;for(var Oe=0;Oe<be;++Oe){var We=O[Oe].query(me,$[1]-we-1,W.pickRadius);if(We){if(We.distance>E.distance)continue;for(var Fe=0;Fe<Me;++Fe){var Ge=ee[Fe];if(Q[Fe]===Oe){var Xe=Ge.pick(We);Xe&&(E.buttons=ie,E.screen=We.coord,E.distance=We.distance,E.object=Ge,E.index=Xe.distance,E.dataPosition=Xe.position,E.dataCoordinate=Xe.dataCoordinate,E.data=Xe,Ke=!0)}}}}}Ie&&Ie!==E.object&&(Ie.highlight&&Ie.highlight(null),Z=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),Z=!0),Ke=Ke||E.object!==Ie,Ke&&W.onselect&&W.onselect(E),ie&1&&!(W._prevButtons&1)&&W.onclick&&W.onclick(E),W._prevButtons=ie}})};function ve(){if(W.contextLost)return!0;x.isContextLost()&&(W.contextLost=!0,W.mouseListener.enabled=!1,W.selection.object=null,W.oncontextloss&&W.oncontextloss())}i.addEventListener("webglcontextlost",ve);function ue(){if(!ve()){x.colorMask(!0,!0,!0,!0),x.depthMask(!0),x.disable(x.BLEND),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL);for(var ie=ee.length,me=O.length,we=0;we<me;++we){var be=O[we];be.shape=$,be.begin();for(var Me=0;Me<ie;++Me)if(Q[Me]===we){var Ie=ee[Me];Ie.drawPick&&(Ie.pixelRatio=1,Ie.drawPick(j))}be.end()}}}var ce=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[ce[0].slice(),ce[1].slice()];function fe(){if(!ve()){re();var ie=W.camera.tick();j.view=W.camera.matrix,Z=Z||ie,X=X||ie,G.pixelRatio=W.pixelRatio,q.pixelRatio=W.pixelRatio;var me=ee.length,we=ce[0],be=ce[1];we[0]=we[1]=we[2]=1/0,be[0]=be[1]=be[2]=-1/0;for(var Me=0;Me<me;++Me){var Ie=ee[Me];Ie.pixelRatio=W.pixelRatio,Ie.axes=W.axes,Z=Z||!!Ie.dirty,X=X||!!Ie.dirty;var Ke=Ie.bounds;if(Ke)for(var Oe=Ke[0],We=Ke[1],Fe=0;Fe<3;++Fe)we[Fe]=Math.min(we[Fe],Oe[Fe]),be[Fe]=Math.max(be[Fe],We[Fe])}var Ge=W.bounds;if(W.autoBounds)for(var Fe=0;Fe<3;++Fe){if(be[Fe]<we[Fe])we[Fe]=-1,be[Fe]=1;else{we[Fe]===be[Fe]&&(we[Fe]-=1,be[Fe]+=1);var Xe=.05*(be[Fe]-we[Fe]);we[Fe]=we[Fe]-Xe,be[Fe]=be[Fe]+Xe}Ge[0][Fe]=we[Fe],Ge[1][Fe]=be[Fe]}for(var ut=!1,Fe=0;Fe<3;++Fe)ut=ut||_e[0][Fe]!==Ge[0][Fe]||_e[1][Fe]!==Ge[1][Fe],_e[0][Fe]=Ge[0][Fe],_e[1][Fe]=Ge[1][Fe];if(X=X||ut,Z=Z||ut,!!Z){if(ut){for(var rt=[0,0,0],Me=0;Me<3;++Me)rt[Me]=h((Ge[1][Me]-Ge[0][Me])/10);G.autoTicks?G.update({bounds:Ge,tickSpacing:rt}):G.update({bounds:Ge})}var dt=x.drawingBufferWidth,st=x.drawingBufferHeight;H[0]=dt,H[1]=st,$[0]=Math.max(dt/W.pixelRatio,1)|0,$[1]=Math.max(st/W.pixelRatio,1)|0,o(W,C);for(var Me=0;Me<me;++Me){var Ie=ee[Me];Ie.axesBounds=Ge,W.clipToBounds&&(Ie.clipBounds=Ge)}E.object&&(W.snapToData?q.position=E.dataCoordinate:q.position=E.dataPosition,q.bounds=Ge),X&&(X=!1,ue()),W.axesPixels=u(W.axes,j,dt,st),W.onrender&&W.onrender(),x.bindFramebuffer(x.FRAMEBUFFER,null),x.viewport(0,0,dt,st),W.clearRGBA(),x.depthMask(!0),x.colorMask(!0,!0,!0,!0),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL),x.disable(x.BLEND),x.disable(x.CULL_FACE);var Ve=!1;G.enable&&(Ve=Ve||G.isTransparent(),G.draw(j)),q.axes=G,E.object&&q.draw(j),x.disable(x.CULL_FACE);for(var Me=0;Me<me;++Me){var Ie=ee[Me];Ie.axes=G,Ie.pixelRatio=W.pixelRatio,Ie.isOpaque&&Ie.isOpaque()&&Ie.draw(j),Ie.isTransparent&&Ie.isTransparent()&&(Ve=!0)}if(Ve){P.shape=H,P.bind(),x.clear(x.DEPTH_BUFFER_BIT),x.colorMask(!1,!1,!1,!1),x.depthMask(!0),x.depthFunc(x.LESS),G.enable&&G.isTransparent()&&G.drawTransparent(j);for(var Me=0;Me<me;++Me){var Ie=ee[Me];Ie.isOpaque&&Ie.isOpaque()&&Ie.draw(j)}x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.colorMask(!0,!0,!0,!0),x.depthMask(!1),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),G.isTransparent()&&G.drawTransparent(j);for(var Me=0;Me<me;++Me){var Ie=ee[Me];Ie.isTransparent&&Ie.isTransparent()&&Ie.drawTransparent(j)}x.bindFramebuffer(x.FRAMEBUFFER,null),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.disable(x.DEPTH_TEST),S.bind(),P.color[0].bind(0),S.uniforms.accumBuffer=0,v(x),x.disable(x.BLEND)}Z=!1;for(var Me=0;Me<me;++Me)ee[Me].dirty=!1}}}function ne(){W._stopped||W.contextLost||(fe(),requestAnimationFrame(ne))}return W.enableMouseListeners(),ne(),W.redraw=function(){W._stopped||(Z=!0,fe())},W}function o(t,i){var r=t.bounds,x=t.cameraParams,A=x.projection,E=x.model,P=t.gl.drawingBufferWidth,S=t.gl.drawingBufferHeight,C=t.zNear,M=t.zFar,I=t.fovy,G=P/S;i?(_(A,-G,G,-1,1,C,M),x._ortho=!0):(T(A,I,G,C,M),x._ortho=!1);for(var V=0;V<16;++V)E[V]=0;E[15]=1;for(var q=0,V=0;V<3;++V)q=Math.max(q,r[1][V]-r[0][V]);for(var V=0;V<3;++V)t.autoScale?E[5*V]=t.aspect[V]/(r[1][V]-r[0][V]):E[5*V]=1/q,t.autoCenter&&(E[12+V]=-E[5*V]*.5*(r[0][V]+r[1][V]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(p,w,k){var d=p("glslify");k.pointVertex=d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),k.pointFragment=d([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),k.pickVertex=d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),k.pickFragment=d([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(p,w,k){"use strict";var d=p("gl-shader"),e=p("gl-buffer"),u=p("typedarray-pool"),s=p("./lib/shader");w.exports=y;function l(T,_,f,g,n){this.plot=T,this.offsetBuffer=_,this.pickBuffer=f,this.shader=g,this.pickShader=n,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var b=l.prototype;b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},b.update=function(T){var _;T=T||{};function f(o,t){return o in T?T[o]:t}this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var g=T.positions.length>>>1,n=T.positions instanceof Float32Array,a=T.idToIndex instanceof Int32Array&&T.idToIndex.length>=g,h=T.positions,c=n?h:u.mallocFloat32(h.length),m=a?T.idToIndex:u.mallocInt32(g);if(n||c.set(h),!a)for(c.set(h),_=0;_<g;_++)m[_]=_;this.points=h,this.offsetBuffer.update(c),this.pickBuffer.update(m),n||u.free(c),a||u.free(m),this.pointCount=g,this.pickOffset=0};function v(T,_){var f=0,g=T.length>>>1,n;for(n=0;n<g;n++){var a=T[n*2],h=T[n*2+1];a>=_[0]&&a<=_[2]&&h>=_[1]&&h<=_[3]&&f++}return f}b.unifiedDraw=function(){var T=[1,0,0,0,1,0,0,0,1],_=[0,0,0,0];return function(f){var g=f!==void 0,n=g?this.pickShader:this.shader,a=this.plot.gl,h=this.plot.dataBox;if(this.pointCount===0)return f;var c=h[2]-h[0],m=h[3]-h[1],o=v(this.points,h),t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(o,.33333)));T[0]=2/c,T[4]=2/m,T[6]=-2*h[0]/c-1,T[7]=-2*h[1]/m-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=T,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=t<5,n.uniforms.pointSize=t,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(_[0]=f&255,_[1]=f>>8&255,_[2]=f>>16&255,_[3]=f>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(a.UNSIGNED_BYTE),n.uniforms.pickOffset=_,this.pickOffset=f);var i=a.getParameter(a.BLEND),r=a.getParameter(a.DITHER);return i&&!this.blend&&a.disable(a.BLEND),r&&a.disable(a.DITHER),a.drawArrays(a.POINTS,0,this.pointCount),i&&!this.blend&&a.enable(a.BLEND),r&&a.enable(a.DITHER),f+this.pointCount}}(),b.draw=b.unifiedDraw,b.drawPick=b.unifiedDraw,b.pick=function(T,_,f){var g=this.pickOffset,n=this.pointCount;if(f<g||f>=g+n)return null;var a=f-g,h=this.points;return{object:this,pointId:a,dataCoord:[h[2*a],h[2*a+1]]}};function y(T,_){var f=T.gl,g=e(f),n=e(f),a=d(f,s.pointVertex,s.pointFragment),h=d(f,s.pickVertex,s.pickFragment),c=new l(T,g,n,a,h);return c.update(_),T.addObject(c),c}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=u[0],v=u[1],y=u[2],T=u[3],_=s[0],f=s[1],g=s[2],n=s[3],a,h,c,m,o;return h=b*_+v*f+y*g+T*n,h<0&&(h=-h,_=-_,f=-f,g=-g,n=-n),1-h>1e-6?(a=Math.acos(h),c=Math.sin(a),m=Math.sin((1-l)*a)/c,o=Math.sin(l*a)/c):(m=1-l,o=l),e[0]=m*b+o*_,e[1]=m*v+o*f,e[2]=m*y+o*g,e[3]=m*T+o*n,e}},{}],125:[function(p,w,k){"use strict";w.exports=function(d){return!d&&d!==0?"":d.toString()}},{}],126:[function(p,w,k){"use strict";var d=p("vectorize-text");w.exports=u;var e={};function u(s,l,b){var v=e[l];if(v||(v=e[l]={}),s in v)return v[s];var y={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};y.triangles=!0;var T=d(s,y);y.triangles=!1;var _=d(s,y),f,g;if(b&&b!==1){for(f=0;f<T.positions.length;++f)for(g=0;g<T.positions[f].length;++g)T.positions[f][g]/=b;for(f=0;f<_.positions.length;++f)for(g=0;g<_.positions[f].length;++g)_.positions[f][g]/=b}var n=[[1/0,1/0],[-1/0,-1/0]],a=_.positions.length;for(f=0;f<a;++f){var h=_.positions[f];for(g=0;g<2;++g)n[0][g]=Math.min(n[0][g],h[g]),n[1][g]=Math.max(n[1][g],h[g])}return v[s]=[T,_,n]}},{"vectorize-text":311}],127:[function(p,w,k){var d=p("gl-shader"),e=p("glslify"),u=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),s=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),y=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],T={vertex:u,fragment:b,attributes:y},_={vertex:s,fragment:b,attributes:y},f={vertex:l,fragment:b,attributes:y},g={vertex:u,fragment:v,attributes:y},n={vertex:s,fragment:v,attributes:y},a={vertex:l,fragment:v,attributes:y};function h(c,m){var o=d(c,m),t=o.attributes;return t.position.location=0,t.color.location=1,t.glyph.location=2,t.id.location=3,o}k.createPerspective=function(c){return h(c,T)},k.createOrtho=function(c){return h(c,_)},k.createProject=function(c){return h(c,f)},k.createPickPerspective=function(c){return h(c,g)},k.createPickOrtho=function(c){return h(c,n)},k.createPickProject=function(c){return h(c,a)}},{"gl-shader":132,glslify:231}],128:[function(p,w,k){"use strict";var d=p("is-string-blank"),e=p("gl-buffer"),u=p("gl-vao"),s=p("typedarray-pool"),l=p("gl-mat4/multiply"),b=p("./lib/shaders"),v=p("./lib/glyphs"),y=p("./lib/get-simple-string"),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];w.exports=Q;function _(U,O){var Z=U[0],B=U[1],Y=U[2],j=U[3];return U[0]=O[0]*Z+O[4]*B+O[8]*Y+O[12]*j,U[1]=O[1]*Z+O[5]*B+O[9]*Y+O[13]*j,U[2]=O[2]*Z+O[6]*B+O[10]*Y+O[14]*j,U[3]=O[3]*Z+O[7]*B+O[11]*Y+O[15]*j,U}function f(U,O,Z,B){return _(B,B,Z),_(B,B,O),_(B,B,U)}function g(U,O){this.index=U,this.dataCoordinate=this.position=O}function n(U){return U===!0||U>1?1:U}function a(U,O,Z,B,Y,j,X,H,K,W,$,re){this.gl=U,this.pixelRatio=1,this.shader=O,this.orthoShader=Z,this.projectShader=B,this.pointBuffer=Y,this.colorBuffer=j,this.glyphBuffer=X,this.idBuffer=H,this.vao=K,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=W,this.pickOrthoShader=$,this.pickProjectShader=re,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var h=a.prototype;h.pickSlots=1,h.setPickBase=function(U){this.pickId=U},h.isTransparent=function(){if(this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&this.projectHasAlpha)return!0;return!1},h.isOpaque=function(){if(!this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],m=[0,0,0],o=[0,0,0],t=[0,0,0,1],i=[0,0,0,1],r=T.slice(),x=[0,0,0],A=[[0,0,0],[0,0,0]];function E(U){return U[0]=U[1]=U[2]=0,U}function P(U,O){return U[0]=O[0],U[1]=O[1],U[2]=O[2],U[3]=1,U}function S(U,O,Z,B){return U[0]=O[0],U[1]=O[1],U[2]=O[2],U[Z]=B,U}function C(U){for(var O=A,Z=0;Z<2;++Z)for(var B=0;B<3;++B)O[Z][B]=Math.max(Math.min(U[Z][B],1e8),-1e8);return O}function M(U,O,Z,B){var Y=O.axesProject,j=O.gl,X=U.uniforms,H=Z.model||T,K=Z.view||T,W=Z.projection||T,$=O.axesBounds,re=C(O.clipBounds),de;O.axes&&O.axes.lastCubeProps?de=O.axes.lastCubeProps.axis:de=[1,1,1],c[0]=2/j.drawingBufferWidth,c[1]=2/j.drawingBufferHeight,U.bind(),X.view=K,X.projection=W,X.screenSize=c,X.highlightId=O.highlightId,X.highlightScale=O.highlightScale,X.clipBounds=re,X.pickGroup=O.pickId/255,X.pixelRatio=B;for(var ve=0;ve<3;++ve)if(!!Y[ve]){X.scale=O.projectScale[ve],X.opacity=O.projectOpacity[ve];for(var ue=r,ce=0;ce<16;++ce)ue[ce]=0;for(var ce=0;ce<4;++ce)ue[5*ce]=1;ue[5*ve]=0,de[ve]<0?ue[12+ve]=$[0][ve]:ue[12+ve]=$[1][ve],l(ue,H,ue),X.model=ue;var _e=(ve+1)%3,fe=(ve+2)%3,ne=E(m),ie=E(o);ne[_e]=1,ie[fe]=1;var me=f(W,K,H,P(t,ne)),we=f(W,K,H,P(i,ie));if(Math.abs(me[1])>Math.abs(we[1])){var be=me;me=we,we=be,be=ne,ne=ie,ie=be;var Me=_e;_e=fe,fe=Me}me[0]<0&&(ne[_e]=-1),we[1]>0&&(ie[fe]=-1);for(var Ie=0,Ke=0,ce=0;ce<4;++ce)Ie+=Math.pow(H[4*_e+ce],2),Ke+=Math.pow(H[4*fe+ce],2);ne[_e]/=Math.sqrt(Ie),ie[fe]/=Math.sqrt(Ke),X.axes[0]=ne,X.axes[1]=ie,X.fragClipBounds[0]=S(x,re[0],ve,-1e8),X.fragClipBounds[1]=S(x,re[1],ve,1e8),O.vao.bind(),O.vao.draw(j.TRIANGLES,O.vertexCount),O.lineWidth>0&&(j.lineWidth(O.lineWidth*B),O.vao.draw(j.LINES,O.lineVertexCount,O.vertexCount)),O.vao.unbind()}}var I=[-1e8,-1e8,-1e8],G=[1e8,1e8,1e8],V=[I,G];function q(U,O,Z,B,Y,j,X){var H=Z.gl;if((j===Z.projectHasAlpha||X)&&M(O,Z,B,Y),j===Z.hasAlpha||X){U.bind();var K=U.uniforms;K.model=B.model||T,K.view=B.view||T,K.projection=B.projection||T,c[0]=2/H.drawingBufferWidth,c[1]=2/H.drawingBufferHeight,K.screenSize=c,K.highlightId=Z.highlightId,K.highlightScale=Z.highlightScale,K.fragClipBounds=V,K.clipBounds=Z.axes.bounds,K.opacity=Z.opacity,K.pickGroup=Z.pickId/255,K.pixelRatio=Y,Z.vao.bind(),Z.vao.draw(H.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(H.lineWidth(Z.lineWidth*Y),Z.vao.draw(H.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}h.draw=function(U){var O=this.useOrtho?this.orthoShader:this.shader;q(O,this.projectShader,this,U,this.pixelRatio,!1,!1)},h.drawTransparent=function(U){var O=this.useOrtho?this.orthoShader:this.shader;q(O,this.projectShader,this,U,this.pixelRatio,!0,!1)},h.drawPick=function(U){var O=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;q(O,this.pickProjectShader,this,U,1,!0,!0)},h.pick=function(U){if(!U||U.id!==this.pickId)return null;var O=U.value[2]+(U.value[1]<<8)+(U.value[0]<<16);if(O>=this.pointCount||O<0)return null;var Z=this.points[O],B=this._selectResult;B.index=O;for(var Y=0;Y<3;++Y)B.position[Y]=B.dataCoordinate[Y]=Z[Y];return B},h.highlight=function(U){if(!U)this.highlightId=[1,1,1,1];else{var O=U.index,Z=O&255,B=O>>8&255,Y=O>>16&255;this.highlightId=[Z/255,B/255,Y/255,0]}};function ee(U,O,Z,B){var Y;Array.isArray(U)?O<U.length?Y=U[O]:Y=void 0:Y=U,Y=y(Y);var j=!0;d(Y)&&(Y="\u25BC",j=!1);var X=v(Y,Z,B);return{mesh:X[0],lines:X[1],bounds:X[2],visible:j}}h.update=function(U){if(U=U||{},"perspective"in U&&(this.useOrtho=!U.perspective),"orthographic"in U&&(this.useOrtho=!!U.orthographic),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"project"in U)if(Array.isArray(U.project))this.axesProject=U.project;else{var O=!!U.project;this.axesProject=[O,O,O]}if("projectScale"in U)if(Array.isArray(U.projectScale))this.projectScale=U.projectScale.slice();else{var Z=+U.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in U){if(Array.isArray(U.projectOpacity))this.projectOpacity=U.projectOpacity.slice();else{var Z=+U.projectOpacity;this.projectOpacity=[Z,Z,Z]}for(var B=0;B<3;++B)this.projectOpacity[B]=n(this.projectOpacity[B]),this.projectOpacity[B]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in U&&(this.opacity=n(U.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y=U.position,j=U.font||"normal",X=U.alignment||[0,0],H,K;if(X.length===2)H=X[0],K=X[1];else{H=[],K=[];for(var B=0;B<X.length;++B)H[B]=X[B][0],K[B]=X[B][1]}var W=[1/0,1/0,1/0],$=[-1/0,-1/0,-1/0],re=U.glyph,de=U.color,ve=U.size,ue=U.angle,ce=U.lineColor,_e=-1,fe=0,ne=0,ie=0;if(Y.length){ie=Y.length;e:for(var B=0;B<ie;++B){for(var me=Y[B],we=0;we<3;++we)if(isNaN(me[we])||!isFinite(me[we]))continue e;var be=ee(re,B,j,this.pixelRatio),Me=be.mesh,Ie=be.lines,Ke=be.bounds;fe+=Me.cells.length*3,ne+=Ie.edges.length*2}}var Oe=fe+ne,We=s.mallocFloat(3*Oe),Fe=s.mallocFloat(4*Oe),Ge=s.mallocFloat(2*Oe),Xe=s.mallocUint32(Oe);if(Oe>0){var ut=0,rt=fe,dt=[0,0,0,1],st=[0,0,0,1],Ve=Array.isArray(de)&&Array.isArray(de[0]),Je=Array.isArray(ce)&&Array.isArray(ce[0]);e:for(var B=0;B<ie;++B){_e+=1;for(var me=Y[B],we=0;we<3;++we){if(isNaN(me[we])||!isFinite(me[we]))continue e;$[we]=Math.max($[we],me[we]),W[we]=Math.min(W[we],me[we])}var be=ee(re,B,j,this.pixelRatio),Me=be.mesh,Ie=be.lines,Ke=be.bounds,ke=be.visible;if(!ke)dt=[1,1,1,0];else if(Array.isArray(de)){var Le;if(Ve?B<de.length?Le=de[B]:Le=[0,0,0,0]:Le=de,Le.length===3){for(var we=0;we<3;++we)dt[we]=Le[we];dt[3]=1}else if(Le.length===4){for(var we=0;we<4;++we)dt[we]=Le[we];!this.hasAlpha&&Le[3]<1&&(this.hasAlpha=!0)}}else dt[0]=dt[1]=dt[2]=0,dt[3]=1;if(!ke)st=[1,1,1,0];else if(Array.isArray(ce)){var Le;if(Je?B<ce.length?Le=ce[B]:Le=[0,0,0,0]:Le=ce,Le.length===3){for(var we=0;we<3;++we)st[we]=Le[we];st[we]=1}else if(Le.length===4){for(var we=0;we<4;++we)st[we]=Le[we];!this.hasAlpha&&Le[3]<1&&(this.hasAlpha=!0)}}else st[0]=st[1]=st[2]=0,st[3]=1;var Be=.5;ke?Array.isArray(ve)?B<ve.length?Be=+ve[B]:Be=12:ve?Be=+ve:this.useOrtho&&(Be=12):Be=0;var pe=0;Array.isArray(ue)?B<ue.length?pe=+ue[B]:pe=0:ue&&(pe=+ue);for(var Ae=Math.cos(pe),Ce=Math.sin(pe),me=Y[B],we=0;we<3;++we)$[we]=Math.max($[we],me[we]),W[we]=Math.min(W[we],me[we]);var Se=H,He=K,Se=0;Array.isArray(H)?B<H.length?Se=H[B]:Se=0:H&&(Se=H);var He=0;Array.isArray(K)?B<K.length?He=K[B]:He=0:K&&(He=K),Se*=Se>0?1-Ke[0][0]:Se<0?1+Ke[1][0]:1,He*=He>0?1-Ke[0][1]:He<0?1+Ke[1][1]:1;for(var Ne=[Se,He],ht=Me.cells||[],kt=Me.positions||[],we=0;we<ht.length;++we)for(var qe=ht[we],at=0;at<3;++at){for(var nt=0;nt<3;++nt)We[3*ut+nt]=me[nt];for(var nt=0;nt<4;++nt)Fe[4*ut+nt]=dt[nt];Xe[ut]=_e;var Ze=kt[qe[at]];Ge[2*ut]=Be*(Ae*Ze[0]-Ce*Ze[1]+Ne[0]),Ge[2*ut+1]=Be*(Ce*Ze[0]+Ae*Ze[1]+Ne[1]),ut+=1}for(var ht=Ie.edges,kt=Ie.positions,we=0;we<ht.length;++we)for(var qe=ht[we],at=0;at<2;++at){for(var nt=0;nt<3;++nt)We[3*rt+nt]=me[nt];for(var nt=0;nt<4;++nt)Fe[4*rt+nt]=st[nt];Xe[rt]=_e;var Ze=kt[qe[at]];Ge[2*rt]=Be*(Ae*Ze[0]-Ce*Ze[1]+Ne[0]),Ge[2*rt+1]=Be*(Ce*Ze[0]+Ae*Ze[1]+Ne[1]),rt+=1}}}this.bounds=[W,$],this.points=Y,this.pointCount=Y.length,this.vertexCount=fe,this.lineVertexCount=ne,this.pointBuffer.update(We),this.colorBuffer.update(Fe),this.glyphBuffer.update(Ge),this.idBuffer.update(Xe),s.free(We),s.free(Fe),s.free(Ge),s.free(Xe)},h.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function Q(U){var O=U.gl,Z=b.createPerspective(O),B=b.createOrtho(O),Y=b.createProject(O),j=b.createPickPerspective(O),X=b.createPickOrtho(O),H=b.createPickProject(O),K=e(O),W=e(O),$=e(O),re=e(O),de=u(O,[{buffer:K,size:3,type:O.FLOAT},{buffer:W,size:4,type:O.FLOAT},{buffer:$,size:2,type:O.FLOAT},{buffer:re,size:4,type:O.UNSIGNED_BYTE,normalized:!0}]),ve=new a(O,Z,B,Y,K,W,$,re,de,j,X,H);return ve.update(U),ve}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(p,w,k){"use strict";var d=p("glslify");k.boxVertex=d([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),k.boxFragment=d([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(p,w,k){"use strict";var d=p("gl-shader"),e=p("gl-buffer"),u=p("./lib/shaders");w.exports=b;function s(v,y,T){this.plot=v,this.boxBuffer=y,this.boxShader=T,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var l=s.prototype;l.draw=function(){if(!!this.enabled){var v=this.plot,y=this.selectBox,T=this.borderWidth,_=this.innerFill,f=this.innerColor,g=this.outerFill,n=this.outerColor,a=this.borderColor,h=v.box,c=v.screenBox,m=v.dataBox,o=v.viewBox,t=v.pixelRatio,i=(y[0]-m[0])*(o[2]-o[0])/(m[2]-m[0])+o[0],r=(y[1]-m[1])*(o[3]-o[1])/(m[3]-m[1])+o[1],x=(y[2]-m[0])*(o[2]-o[0])/(m[2]-m[0])+o[0],A=(y[3]-m[1])*(o[3]-o[1])/(m[3]-m[1])+o[1];if(i=Math.max(i,o[0]),r=Math.max(r,o[1]),x=Math.min(x,o[2]),A=Math.min(A,o[3]),!(x<i||A<r)){h.bind();var E=c[2]-c[0],P=c[3]-c[1];if(this.outerFill&&(h.drawBox(0,0,E,r,n),h.drawBox(0,r,i,A,n),h.drawBox(0,A,E,P,n),h.drawBox(x,r,E,A,n)),this.innerFill&&h.drawBox(i,r,x,A,f),T>0){var S=T*t;h.drawBox(i-S,r-S,x+S,r+S,a),h.drawBox(i-S,A-S,x+S,A+S,a),h.drawBox(i-S,r-S,i+S,A+S,a),h.drawBox(x-S,r-S,x+S,A+S,a)}}}},l.update=function(v){v=v||{},this.innerFill=!!v.innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function b(v,y){var T=v.gl,_=e(T,[0,0,0,1,1,0,1,1]),f=d(T,u.boxVertex,u.boxFragment),g=new s(v,_,f);return g.update(y),v.addOverlay(g),g}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(p,w,k){"use strict";w.exports=T;var d=p("gl-fbo"),e=p("typedarray-pool"),u=p("ndarray"),s=p("bit-twiddle").nextPow2,l=function(_,f,g){for(var n=1e8,a=-1,h=-1,c=_.shape[0],m=_.shape[1],o=0;o<c;o++)for(var t=0;t<m;t++){var i=_.get(o,t,0),r=_.get(o,t,1),x=_.get(o,t,2),A=_.get(o,t,3);if(i<255||r<255||x<255||A<255){var E=f-o,P=g-t,S=E*E+P*P;S<n&&(n=S,a=o,h=t)}}return[a,h,n]};function b(_,f,g,n,a){this.coord=[_,f],this.id=g,this.value=n,this.distance=a}function v(_,f,g){this.gl=_,this.fbo=f,this.buffer=g,this._readTimeout=null;var n=this;this._readCallback=function(){!n.gl||(f.bind(),_.readPixels(0,0,f.shape[0],f.shape[1],_.RGBA,_.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var y=v.prototype;Object.defineProperty(y,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(_){if(!!this.gl){this.fbo.shape=_;var f=this.fbo.shape[0],g=this.fbo.shape[1];if(g*f*4>this.buffer.length){e.free(this.buffer);for(var n=this.buffer=e.mallocUint8(s(g*f*4)),a=0;a<g*f*4;++a)n[a]=255}return _}}}),y.begin=function(){var _=this.gl,f=this.shape;!_||(this.fbo.bind(),_.clearColor(1,1,1,1),_.clear(_.COLOR_BUFFER_BIT|_.DEPTH_BUFFER_BIT))},y.end=function(){var _=this.gl;!_||(_.bindFramebuffer(_.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},y.query=function(_,f,g){if(!this.gl)return null;var n=this.fbo.shape.slice();_=_|0,f=f|0,typeof g!="number"&&(g=1);var a=Math.min(Math.max(_-g,0),n[0])|0,h=Math.min(Math.max(_+g,0),n[0])|0,c=Math.min(Math.max(f-g,0),n[1])|0,m=Math.min(Math.max(f+g,0),n[1])|0;if(h<=a||m<=c)return null;var o=[h-a,m-c],t=u(this.buffer,[o[0],o[1],4],[4,n[0]*4,1],4*(a+n[0]*c)),i=l(t.hi(o[0],o[1],1),g,g),r=i[0],x=i[1];if(r<0||Math.pow(this.radius,2)<i[2])return null;var A=t.get(r,x,0),E=t.get(r,x,1),P=t.get(r,x,2),S=t.get(r,x,3);return new b(r+a|0,x+c|0,A,[E,P,S],Math.sqrt(i[2]))},y.dispose=function(){!this.gl||(this.fbo.dispose(),e.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function T(_,f){var g=f[0],n=f[1],a={},h=d(_,g,n,a),c=e.mallocUint8(g*n*4);return new v(_,h,c)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(p,w,k){"use strict";var d=p("./lib/create-uniforms"),e=p("./lib/create-attributes"),u=p("./lib/reflect"),s=p("./lib/shader-cache"),l=p("./lib/runtime-reflect"),b=p("./lib/GLError");function v(f){this.gl=f,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var y=v.prototype;y.bind=function(){this.program||this._relink();var f,g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(g>n)for(f=n;f<g;f++)this.gl.enableVertexAttribArray(f);else if(n>g)for(f=g;f<n;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},y.dispose=function(){for(var f=this.gl.lastAttribCount,g=0;g<f;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function T(f,g){return f.name<g.name?-1:1}y.update=function(f,g,n,a){if(!g||arguments.length===1){var h=f;f=h.vertex,g=h.fragment,n=h.uniforms,a=h.attributes}var c=this,m=c.gl,o=c._vref;c._vref=s.shader(m,m.VERTEX_SHADER,f),o&&o.dispose(),c.vertShader=c._vref.shader;var t=this._fref;if(c._fref=s.shader(m,m.FRAGMENT_SHADER,g),t&&t.dispose(),c.fragShader=c._fref.shader,!n||!a){var i=m.createProgram();if(m.attachShader(i,c.fragShader),m.attachShader(i,c.vertShader),m.linkProgram(i),!m.getProgramParameter(i,m.LINK_STATUS)){var r=m.getProgramInfoLog(i);throw new b(r,"Error linking program:"+r)}n=n||l.uniforms(m,i),a=a||l.attributes(m,i),m.deleteProgram(i)}a=a.slice(),a.sort(T);var x=[],A=[],E=[],P;for(P=0;P<a.length;++P){var S=a[P];if(S.type.indexOf("mat")>=0){for(var C=S.type.charAt(S.type.length-1)|0,M=new Array(C),I=0;I<C;++I)M[I]=E.length,A.push(S.name+"["+I+"]"),typeof S.location=="number"?E.push(S.location+I):Array.isArray(S.location)&&S.location.length===C&&typeof S.location[I]=="number"?E.push(S.location[I]|0):E.push(-1);x.push({name:S.name,type:S.type,locations:M})}else x.push({name:S.name,type:S.type,locations:[E.length]}),A.push(S.name),typeof S.location=="number"?E.push(S.location|0):E.push(-1)}var G=0;for(P=0;P<E.length;++P)if(E[P]<0){for(;E.indexOf(G)>=0;)G+=1;E[P]=G}var V=new Array(n.length);function q(){c.program=s.program(m,c._vref,c._fref,A,E);for(var ee=0;ee<n.length;++ee)V[ee]=m.getUniformLocation(c.program,n[ee].name)}q(),c._relink=q,c.types={uniforms:u(n),attributes:u(a)},c.attributes=e(m,c,x,E),Object.defineProperty(c,"uniforms",d(m,c,n,V))};function _(f,g,n,a,h){var c=new v(f);return c.update(g,n,a,h),c}w.exports=_},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(p,w,k){function d(e,u,s){this.shortMessage=u||"",this.longMessage=s||"",this.rawError=e||"",this.message="gl-shader: "+(u||e||"")+(s?`
`+s:""),this.stack=new Error().stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,w.exports=d},{}],134:[function(p,w,k){"use strict";w.exports=v;var d=p("./GLError");function e(y,T,_,f,g,n){this._gl=y,this._wrapper=T,this._index=_,this._locations=f,this._dimension=g,this._constFunc=n}var u=e.prototype;u.pointer=function(T,_,f,g){var n=this,a=n._gl,h=n._locations[n._index];a.vertexAttribPointer(h,n._dimension,T||a.FLOAT,!!_,f||0,g||0),a.enableVertexAttribArray(h)},u.set=function(y,T,_,f){return this._constFunc(this._locations[this._index],y,T,_,f)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(y){return y!==this._locations[this._index]&&(this._locations[this._index]=y|0,this._wrapper.program=null),y|0}});var s=[function(y,T,_){return _.length===void 0?y.vertexAttrib1f(T,_):y.vertexAttrib1fv(T,_)},function(y,T,_,f){return _.length===void 0?y.vertexAttrib2f(T,_,f):y.vertexAttrib2fv(T,_)},function(y,T,_,f,g){return _.length===void 0?y.vertexAttrib3f(T,_,f,g):y.vertexAttrib3fv(T,_)},function(y,T,_,f,g,n){return _.length===void 0?y.vertexAttrib4f(T,_,f,g,n):y.vertexAttrib4fv(T,_)}];function l(y,T,_,f,g,n,a){var h=s[g],c=new e(y,T,_,f,g,h);Object.defineProperty(n,a,{set:function(m){return y.disableVertexAttribArray(f[_]),h(y,f[_],m),m},get:function(){return c},enumerable:!0})}function b(y,T,_,f,g,n,a){for(var h=new Array(g),c=new Array(g),m=0;m<g;++m)l(y,T,_[m],f,g,h,m),c[m]=h[m];Object.defineProperty(h,"location",{set:function(i){if(Array.isArray(i))for(var r=0;r<g;++r)c[r].location=i[r];else for(var r=0;r<g;++r)c[r].location=i+r;return i},get:function(){for(var i=new Array(g),r=0;r<g;++r)i[r]=f[_[r]];return i},enumerable:!0}),h.pointer=function(i,r,x,A){i=i||y.FLOAT,r=!!r,x=x||g*g,A=A||0;for(var E=0;E<g;++E){var P=f[_[E]];y.vertexAttribPointer(P,g,i,r,x,A+E*g),y.enableVertexAttribArray(P)}};var o=new Array(g),t=y["vertexAttrib"+g+"fv"];Object.defineProperty(n,a,{set:function(i){for(var r=0;r<g;++r){var x=f[_[r]];if(y.disableVertexAttribArray(x),Array.isArray(i[0]))t.call(y,x,i[r]);else{for(var A=0;A<g;++A)o[A]=i[g*r+A];t.call(y,x,o)}}return i},get:function(){return h},enumerable:!0})}function v(y,T,_,f){for(var g={},n=0,a=_.length;n<a;++n){var h=_[n],c=h.name,m=h.type,o=h.locations;switch(m){case"bool":case"int":case"float":l(y,T,o[0],f,1,g,c);break;default:if(m.indexOf("vec")>=0){var t=m.charCodeAt(m.length-1)-48;if(t<2||t>4)throw new d("","Invalid data type for attribute "+c+": "+m);l(y,T,o[0],f,t,g,c)}else if(m.indexOf("mat")>=0){var t=m.charCodeAt(m.length-1)-48;if(t<2||t>4)throw new d("","Invalid data type for attribute "+c+": "+m);b(y,T,o,f,t,g,c)}else throw new d("","Unknown data type for attribute "+c+": "+m);break}}return g}},{"./GLError":133}],135:[function(p,w,k){"use strict";var d=p("./reflect"),e=p("./GLError");w.exports=l;function u(b){return function(){return b}}function s(b,v){for(var y=new Array(b),T=0;T<b;++T)y[T]=v;return y}function l(b,v,y,T){function _(m){return function(o,t,i){return o.getUniform(t.program,i[m])}}function f(m){return function(t){for(var i=g("",m),r=0;r<i.length;++r){var x=i[r],A=x[0],E=x[1];if(T[E]){var P=t;if(typeof A=="string"&&(A.indexOf(".")===0||A.indexOf("[")===0)){var S=A;if(A.indexOf(".")===0&&(S=A.slice(1)),S.indexOf("]")===S.length-1){var C=S.indexOf("["),M=S.slice(0,C),I=S.slice(C+1,S.length-1);P=M?t[M][I]:t[I]}else P=t[S]}var G=y[E].type,V;switch(G){case"bool":case"int":case"sampler2D":case"samplerCube":b.uniform1i(T[E],P);break;case"float":b.uniform1f(T[E],P);break;default:var q=G.indexOf("vec");if(0<=q&&q<=1&&G.length===4+q){if(V=G.charCodeAt(G.length-1)-48,V<2||V>4)throw new e("","Invalid data type");switch(G.charAt(0)){case"b":case"i":b["uniform"+V+"iv"](T[E],P);break;case"v":b["uniform"+V+"fv"](T[E],P);break;default:throw new e("","Unrecognized data type for vector "+name+": "+G)}}else if(G.indexOf("mat")===0&&G.length===4){if(V=G.charCodeAt(G.length-1)-48,V<2||V>4)throw new e("","Invalid uniform dimension type for matrix "+name+": "+G);b["uniformMatrix"+V+"fv"](T[E],!1,P);break}else throw new e("","Unknown uniform data type for "+name+": "+G)}}}}}function g(m,o){if(typeof o!="object")return[[m,o]];var t=[];for(var i in o){var r=o[i],x=m;parseInt(i)+""===i?x+="["+i+"]":x+="."+i,typeof r=="object"?t.push.apply(t,g(x,r)):t.push([x,r])}return t}function n(m){switch(m){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var o=m.indexOf("vec");if(0<=o&&o<=1&&m.length===4+o){var t=m.charCodeAt(m.length-1)-48;if(t<2||t>4)throw new e("","Invalid data type");return m.charAt(0)==="b"?s(t,!1):s(t,0)}else if(m.indexOf("mat")===0&&m.length===4){var t=m.charCodeAt(m.length-1)-48;if(t<2||t>4)throw new e("","Invalid uniform dimension type for matrix "+name+": "+m);return s(t*t,0)}else throw new e("","Unknown uniform data type for "+name+": "+m)}}function a(m,o,t){if(typeof t=="object"){var i=h(t);Object.defineProperty(m,o,{get:u(i),set:f(t),enumerable:!0,configurable:!1})}else T[t]?Object.defineProperty(m,o,{get:_(t),set:f(t),enumerable:!0,configurable:!1}):m[o]=n(y[t].type)}function h(m){var o;if(Array.isArray(m)){o=new Array(m.length);for(var t=0;t<m.length;++t)a(o,t,m[t])}else{o={};for(var i in m)a(o,i,m[i])}return o}var c=d(y,!0);return{get:u(h(c)),set:f(c),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(p,w,k){"use strict";w.exports=d;function d(e,u){for(var s={},l=0;l<e.length;++l)for(var b=e[l].name,v=b.split("."),y=s,T=0;T<v.length;++T){var _=v[T].split("[");if(_.length>1){_[0]in y||(y[_[0]]=[]),y=y[_[0]];for(var f=1;f<_.length;++f){var g=parseInt(_[f]);f<_.length-1||T<v.length-1?(g in y||(f<_.length-1?y[g]=[]:y[g]={}),y=y[g]):u?y[g]=l:y[g]=e[l].type}}else T<v.length-1?(_[0]in y||(y[_[0]]={}),y=y[_[0]]):u?y[_[0]]=l:y[_[0]]=e[l].type}return s}},{}],137:[function(p,w,k){"use strict";k.uniforms=s,k.attributes=l;var d={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},e=null;function u(b,v){if(!e){var y=Object.keys(d);e={};for(var T=0;T<y.length;++T){var _=y[T];e[b[_]]=d[_]}}return e[v]}function s(b,v){for(var y=b.getProgramParameter(v,b.ACTIVE_UNIFORMS),T=[],_=0;_<y;++_){var f=b.getActiveUniform(v,_);if(f){var g=u(b,f.type);if(f.size>1)for(var n=0;n<f.size;++n)T.push({name:f.name.replace("[0]","["+n+"]"),type:g});else T.push({name:f.name,type:g})}}return T}function l(b,v){for(var y=b.getProgramParameter(v,b.ACTIVE_ATTRIBUTES),T=[],_=0;_<y;++_){var f=b.getActiveAttrib(v,_);f&&T.push({name:f.name,type:u(b,f.type)})}return T}},{}],138:[function(p,w,k){"use strict";k.shader=g,k.program=n;var d=p("./GLError"),e=p("gl-format-compiler-error"),u=typeof WeakMap>"u"?p("weakmap-shim"):WeakMap,s=new u,l=0;function b(a,h,c,m,o,t,i){this.id=a,this.src=h,this.type=c,this.shader=m,this.count=t,this.programs=[],this.cache=i}b.prototype.dispose=function(){if(--this.count===0){for(var a=this.cache,h=a.gl,c=this.programs,m=0,o=c.length;m<o;++m){var t=a.programs[c[m]];t&&(delete a.programs[m],h.deleteProgram(t))}h.deleteShader(this.shader),delete a.shaders[this.type===h.FRAGMENT_SHADER|0][this.src]}};function v(a){this.gl=a,this.shaders=[{},{}],this.programs={}}var y=v.prototype;function T(a,h,c){var m=a.createShader(h);if(a.shaderSource(m,c),a.compileShader(m),!a.getShaderParameter(m,a.COMPILE_STATUS)){var o=a.getShaderInfoLog(m);try{var t=e(o,c,h)}catch(i){throw console.warn("Failed to format compiler error: "+i),new d(o,`Error compiling shader:
`+o)}throw new d(o,t.short,t.long)}return m}y.getShaderReference=function(a,h){var c=this.gl,m=this.shaders[a===c.FRAGMENT_SHADER|0],o=m[h];if(!o||!c.isShader(o.shader)){var t=T(c,a,h);o=m[h]=new b(l++,h,a,t,[],1,this)}else o.count+=1;return o};function _(a,h,c,m,o){var t=a.createProgram();a.attachShader(t,h),a.attachShader(t,c);for(var i=0;i<m.length;++i)a.bindAttribLocation(t,o[i],m[i]);if(a.linkProgram(t),!a.getProgramParameter(t,a.LINK_STATUS)){var r=a.getProgramInfoLog(t);throw new d(r,"Error linking program: "+r)}return t}y.getProgram=function(a,h,c,m){var o=[a.id,h.id,c.join(":"),m.join(":")].join("@"),t=this.programs[o];return(!t||!this.gl.isProgram(t))&&(this.programs[o]=t=_(this.gl,a.shader,h.shader,c,m),a.programs.push(o),h.programs.push(o)),t};function f(a){var h=s.get(a);return h||(h=new v(a),s.set(a,h)),h}function g(a,h,c){return f(a).getShaderReference(h,c)}function n(a,h,c,m,o){return f(a).getProgram(h,c,m,o)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(p,w,k){"use strict";w.exports=u;function d(s){this.plot=s,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var e=d.prototype;e.update=function(s){s=s||{},this.enable=(s.enable||[!0,!0,!1,!1]).slice(),this.width=(s.width||[1,1,1,1]).slice(),this.color=(s.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(s.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var s=this.enable,l=this.width,b=this.color,v=this.center,y=this.plot,T=y.line,_=y.dataBox,f=y.viewBox;if(T.bind(),_[0]<=v[0]&&v[0]<=_[2]&&_[1]<=v[1]&&v[1]<=_[3]){var g=f[0]+(v[0]-_[0])/(_[2]-_[0])*(f[2]-f[0]),n=f[1]+(v[1]-_[1])/(_[3]-_[1])*(f[3]-f[1]);s[0]&&T.drawLine(g,n,f[0],n,l[0],b[0]),s[1]&&T.drawLine(g,n,g,f[1],l[1],b[1]),s[2]&&T.drawLine(g,n,f[2],n,l[2],b[2]),s[3]&&T.drawLine(g,n,g,f[3],l[3],b[3])}},e.dispose=function(){this.plot.removeOverlay(this)};function u(s,l){var b=new d(s);return b.update(l),s.addOverlay(b),b}},{}],140:[function(p,w,k){"use strict";var d=p("glslify"),e=p("gl-shader"),u=d([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),s=d([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);w.exports=function(l){return e(l,u,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(p,w,k){"use strict";var d=p("gl-buffer"),e=p("gl-vao"),u=p("./shaders/index");w.exports=_;var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(f,g,n,a){this.gl=f,this.buffer=g,this.vao=n,this.shader=a,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var b=l.prototype,v=[0,0,0],y=[0,0,0],T=[0,0];b.isTransparent=function(){return!1},b.drawTransparent=function(f){},b.draw=function(f){var g=this.gl,n=this.vao,a=this.shader;n.bind(),a.bind();var h=f.model||s,c=f.view||s,m=f.projection||s,o;this.axes&&(o=this.axes.lastCubeProps.axis);for(var t=v,i=y,r=0;r<3;++r)o&&o[r]<0?(t[r]=this.bounds[0][r],i[r]=this.bounds[1][r]):(t[r]=this.bounds[1][r],i[r]=this.bounds[0][r]);T[0]=g.drawingBufferWidth,T[1]=g.drawingBufferHeight,a.uniforms.model=h,a.uniforms.view=c,a.uniforms.projection=m,a.uniforms.coordinates=[this.position,t,i],a.uniforms.colors=this.colors,a.uniforms.screenShape=T;for(var r=0;r<3;++r)a.uniforms.lineWidth=this.lineWidth[r]*this.pixelRatio,this.enabled[r]&&(n.draw(g.TRIANGLES,6,6*r),this.drawSides[r]&&n.draw(g.TRIANGLES,12,18+12*r));n.unbind()},b.update=function(f){!f||("bounds"in f&&(this.bounds=f.bounds),"position"in f&&(this.position=f.position),"lineWidth"in f&&(this.lineWidth=f.lineWidth),"colors"in f&&(this.colors=f.colors),"enabled"in f&&(this.enabled=f.enabled),"drawSides"in f&&(this.drawSides=f.drawSides))},b.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function _(f,g){var n=[];function a(t,i,r,x,A,E){var P=[t,i,r,0,0,0,1];P[x+3]=1,P[x]=A,n.push.apply(n,P),P[6]=-1,n.push.apply(n,P),P[x]=E,n.push.apply(n,P),n.push.apply(n,P),P[6]=1,n.push.apply(n,P),P[x]=A,n.push.apply(n,P)}a(0,0,0,0,0,1),a(0,0,0,1,0,1),a(0,0,0,2,0,1),a(1,0,0,1,-1,1),a(1,0,0,2,-1,1),a(0,1,0,0,-1,1),a(0,1,0,2,-1,1),a(0,0,1,0,-1,1),a(0,0,1,1,-1,1);var h=d(f,n),c=e(f,[{type:f.FLOAT,buffer:h,size:3,offset:0,stride:28},{type:f.FLOAT,buffer:h,size:3,offset:12,stride:28},{type:f.FLOAT,buffer:h,size:1,offset:24,stride:28}]),m=u(f);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.weight.location=2;var o=new l(f,h,c,m);return o.update(g),o}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(p,w,k){var d=p("glslify"),e=d([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=d([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=d([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=d([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);k.meshShader={vertex:e,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},k.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(p,w,k){"use strict";var d=p("gl-vec3"),e=p("gl-vec4"),u=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(a,h,c,m){for(var o=a.points,t=a.velocities,i=a.divergences,r=[],x=[],A=[],E=[],P=[],S=[],C=0,M=0,I=e.create(),G=e.create(),V=8,q=0;q<o.length;q++){var ee=o[q],Q=t[q],U=i[q];h===0&&(U=c*.05),M=d.length(Q)/m,I=e.create(),d.copy(I,Q),I[3]=U;for(var O=0;O<V;O++)P[O]=[ee[0],ee[1],ee[2],O];if(E.length>0)for(var O=0;O<V;O++){var Z=(O+1)%V;r.push(E[O],P[O],P[Z],P[Z],E[Z],E[O]),A.push(G,I,I,I,G,G),S.push(C,M,M,M,C,C);var B=r.length;x.push([B-6,B-5,B-4],[B-3,B-2,B-1])}var Y=E;E=P,P=Y;var j=G;G=I,I=j;var X=C;C=M,M=X}return{positions:r,cells:x,vectors:A,vertexIntensity:S}},l=function(a,h,c,m){for(var o=0,t=0;t<a.length;t++)for(var i=a[t].velocities,r=0;r<i.length;r++)o=Math.max(o,d.length(i[r]));for(var x=a.map(function(q){return s(q,c,m,o)}),A=[],E=[],P=[],S=[],t=0;t<x.length;t++){var C=x[t],M=A.length;A=A.concat(C.positions),P=P.concat(C.vectors),S=S.concat(C.vertexIntensity);for(var r=0;r<C.cells.length;r++){var I=C.cells[r],G=[];E.push(G);for(var V=0;V<I.length;V++)G.push(I[V]+M)}}return{positions:A,cells:E,vectors:P,vertexIntensity:S,colormap:h}},b=function(a,h){var c=a.length,m;for(m=0;m<c;m++){var o=a[m];if(o===h)return m;if(o>h)return m-1}return m},v=function(a,h,c){return a<h?h:a>c?c:a},y=function(a,h,c){var m=h.vectors,o=h.meshgrid,t=a[0],i=a[1],r=a[2],x=o[0].length,A=o[1].length,E=o[2].length,P=b(o[0],t),S=b(o[1],i),C=b(o[2],r),M=P+1,I=S+1,G=C+1;if(P=v(P,0,x-1),M=v(M,0,x-1),S=v(S,0,A-1),I=v(I,0,A-1),C=v(C,0,E-1),G=v(G,0,E-1),P<0||S<0||C<0||M>x-1||I>A-1||G>E-1)return d.create();var V=o[0][P],q=o[0][M],ee=o[1][S],Q=o[1][I],U=o[2][C],O=o[2][G],Z=(t-V)/(q-V),B=(i-ee)/(Q-ee),Y=(r-U)/(O-U);isFinite(Z)||(Z=.5),isFinite(B)||(B=.5),isFinite(Y)||(Y=.5);var j,X,H,K,W,$;switch(c.reversedX&&(P=x-1-P,M=x-1-M),c.reversedY&&(S=A-1-S,I=A-1-I),c.reversedZ&&(C=E-1-C,G=E-1-G),c.filled){case 5:W=C,$=G,H=S*E,K=I*E,j=P*E*A,X=M*E*A;break;case 4:W=C,$=G,j=P*E,X=M*E,H=S*E*x,K=I*E*x;break;case 3:H=S,K=I,W=C*A,$=G*A,j=P*A*E,X=M*A*E;break;case 2:H=S,K=I,j=P*A,X=M*A,W=C*A*x,$=G*A*x;break;case 1:j=P,X=M,W=C*x,$=G*x,H=S*x*E,K=I*x*E;break;default:j=P,X=M,H=S*x,K=I*x,W=C*x*A,$=G*x*A;break}var re=m[j+H+W],de=m[j+H+$],ve=m[j+K+W],ue=m[j+K+$],ce=m[X+H+W],_e=m[X+H+$],fe=m[X+K+W],ne=m[X+K+$],ie=d.create(),me=d.create(),we=d.create(),be=d.create();d.lerp(ie,re,ce,Z),d.lerp(me,de,_e,Z),d.lerp(we,ve,fe,Z),d.lerp(be,ue,ne,Z);var Me=d.create(),Ie=d.create();d.lerp(Me,ie,we,B),d.lerp(Ie,me,be,B);var Ke=d.create();return d.lerp(Ke,Me,Ie,Y),Ke},T=function(a,h){var c=h[0],m=h[1],o=h[2];return a[0]=c<0?-c:c,a[1]=m<0?-m:m,a[2]=o<0?-o:o,a},_=function(a){var h=1/0;a.sort(function(t,i){return t-i});for(var c=a.length,m=1;m<c;m++){var o=Math.abs(a[m]-a[m-1]);o<h&&(h=o)}return h},f=function(a){for(var h=[],c=[],m=[],o={},t={},i={},r=a.length,x=0;x<r;x++){var A=a[x],E=A[0],P=A[1],S=A[2];o[E]||(h.push(E),o[E]=!0),t[P]||(c.push(P),t[P]=!0),i[S]||(m.push(S),i[S]=!0)}var C=_(h),M=_(c),I=_(m),G=Math.min(C,M,I);return isFinite(G)?G:1};w.exports=function(a,h){var c=a.startingPositions,m=a.maxLength||1e3,o=a.tubeSize||1,t=a.absoluteTubeSize,i=a.gridFill||"+x+y+z",r={};i.indexOf("-x")!==-1&&(r.reversedX=!0),i.indexOf("-y")!==-1&&(r.reversedY=!0),i.indexOf("-z")!==-1&&(r.reversedZ=!0),r.filled=u.indexOf(i.replace(/-/g,"").replace(/\+/g,""));var x=a.getVelocity||function(_e){return y(_e,a,r)},A=a.getDivergence||function(_e,fe){var ne=d.create(),ie=1e-4;d.add(ne,_e,[ie,0,0]);var me=x(ne);d.subtract(me,me,fe),d.scale(me,me,1/ie),d.add(ne,_e,[0,ie,0]);var we=x(ne);d.subtract(we,we,fe),d.scale(we,we,1/ie),d.add(ne,_e,[0,0,ie]);var be=x(ne);return d.subtract(be,be,fe),d.scale(be,be,1/ie),d.add(ne,me,we),d.add(ne,ne,be),ne},E=[],P=h[0][0],S=h[0][1],C=h[0][2],M=h[1][0],I=h[1][1],G=h[1][2],V=function(_e){var fe=_e[0],ne=_e[1],ie=_e[2];return!(fe<P||fe>M||ne<S||ne>I||ie<C||ie>G)},q=d.distance(h[0],h[1]),ee=10*q/m,Q=ee*ee,U=1,O=0,Z=c.length;Z>1&&(U=f(c));for(var B=0;B<Z;B++){var Y=d.create();d.copy(Y,c[B]);var j=[Y],X=[],H=x(Y),K=Y;X.push(H);var W=[],$=A(Y,H),re=d.length($);isFinite(re)&&re>O&&(O=re),W.push(re),E.push({points:j,velocities:X,divergences:W});for(var de=0;de<m*100&&j.length<m&&V(Y);){de++;var ve=d.clone(H),ue=d.squaredLength(ve);if(ue===0)break;if(ue>Q&&d.scale(ve,ve,ee/Math.sqrt(ue)),d.add(ve,ve,Y),H=x(ve),d.squaredDistance(K,ve)-Q>-1e-4*Q){j.push(ve),K=ve,X.push(H);var $=A(ve,H),re=d.length($);isFinite(re)&&re>O&&(O=re),W.push(re)}Y=ve}}var ce=l(E,a.colormap,O,U);return t?ce.tubeScale=t:(O===0&&(O=1),ce.tubeScale=o*.5*U/O),ce};var g=p("./lib/shaders"),n=p("gl-cone3d").createMesh;w.exports.createTubeMesh=function(a,h){return n(a,h,{shaders:g,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(p,w,k){var d=p("gl-shader"),e=p("glslify"),u=e([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),s=e([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);k.createShader=function(v){var y=d(v,u,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return y.attributes.uv.location=0,y.attributes.f.location=1,y.attributes.normal.location=2,y},k.createPickShader=function(v){var y=d(v,u,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return y.attributes.uv.location=0,y.attributes.f.location=1,y.attributes.normal.location=2,y},k.createContourShader=function(v){var y=d(v,l,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return y.attributes.uv.location=0,y.attributes.f.location=1,y},k.createPickContourShader=function(v){var y=d(v,l,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return y.attributes.uv.location=0,y.attributes.f.location=1,y}},{"gl-shader":132,glslify:231}],145:[function(p,w,k){"use strict";w.exports=j;var d=p("bit-twiddle"),e=p("gl-buffer"),u=p("gl-vao"),s=p("gl-texture2d"),l=p("typedarray-pool"),b=p("colormap"),v=p("ndarray-ops"),y=p("ndarray-pack"),T=p("ndarray"),_=p("surface-nets"),f=p("gl-mat4/multiply"),g=p("gl-mat4/invert"),n=p("binary-search-bounds"),a=p("ndarray-gradient"),h=p("./lib/shaders"),c=h.createShader,m=h.createContourShader,o=h.createPickShader,t=h.createPickContourShader,i=4*(4+3+3),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var X=0;X<3;++X){var H=A[X],K=(X+1)%3,W=(X+2)%3;H[K+0]=1,H[W+3]=1,H[X+6]=1}})();function E(X,H,K,W,$){this.position=X,this.index=H,this.uv=K,this.level=W,this.dataCoordinate=$}var P=256;function S(X,H,K,W,$,re,de,ve,ue,ce,_e,fe,ne,ie,me){this.gl=X,this.shape=H,this.bounds=K,this.objectOffset=me,this.intensityBounds=[],this._shader=W,this._pickShader=$,this._coordinateBuffer=re,this._vao=de,this._colorMap=ve,this._contourShader=ue,this._contourPickShader=ce,this._contourBuffer=_e,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ne,this._dynamicVAO=ie,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[T(l.mallocFloat(1024),[0,0]),T(l.mallocFloat(1024),[0,0]),T(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var C=S.prototype;C.genColormap=function(X,H){var K=!1,W=y([b({colormap:X,nshades:P,format:"rgba"}).map(function($,re){var de=H?M(re/255,H):$[3];return de<1&&(K=!0),[$[0],$[1],$[2],255*de]})]);return v.divseq(W,255),this.hasAlphaScale=K,W},C.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},C.isOpaque=function(){return!this.isTransparent()},C.pickSlots=1,C.setPickBase=function(X){this.pickId=X};function M(X,H){if(!H||!H.length)return 1;for(var K=0;K<H.length;++K){if(H.length<2)return 1;if(H[K][0]===X)return H[K][1];if(H[K][0]>X&&K>0){var W=(H[K][0]-X)/(H[K][0]-H[K-1][0]);return H[K][1]*(1-W)+W*H[K-1][1]}}return 1}var I=[0,0,0],G={showSurface:!1,showContour:!1,projections:[r.slice(),r.slice(),r.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(X,H){var K,W,$,re=H.axes&&H.axes.lastCubeProps.axis||I,de=H.showSurface,ve=H.showContour;for(K=0;K<3;++K)for(de=de||H.surfaceProject[K],W=0;W<3;++W)ve=ve||H.contourProject[K][W];for(K=0;K<3;++K){var ue=G.projections[K];for(W=0;W<16;++W)ue[W]=0;for(W=0;W<4;++W)ue[5*W]=1;ue[5*K]=0,ue[12+K]=H.axesBounds[+(re[K]>0)][K],f(ue,X.model,ue);var ce=G.clipBounds[K];for($=0;$<2;++$)for(W=0;W<3;++W)ce[$][W]=X.clipBounds[$][W];ce[0][K]=-1e8,ce[1][K]=1e8}return G.showSurface=de,G.showContour=ve,G}var q={model:r,view:r,projection:r,inverseModel:r.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=r.slice(),Q=[1,0,0,0,1,0,0,0,1];function U(X,H){X=X||{};var K=this.gl;K.disable(K.CULL_FACE),this._colorMap.bind(0);var W=q;W.model=X.model||r,W.view=X.view||r,W.projection=X.projection||r,W.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],W.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],W.objectOffset=this.objectOffset,W.contourColor=this.contourColor[0],W.inverseModel=g(W.inverseModel,W.model);for(var $=0;$<2;++$)for(var re=W.clipBounds[$],de=0;de<3;++de)re[de]=Math.min(Math.max(this.clipBounds[$][de],-1e8),1e8);W.kambient=this.ambientLight,W.kdiffuse=this.diffuseLight,W.kspecular=this.specularLight,W.roughness=this.roughness,W.fresnel=this.fresnel,W.opacity=this.opacity,W.height=0,W.permutation=Q,W.vertexColor=this.vertexColor;var ve=ee;for(f(ve,W.view,W.model),f(ve,W.projection,ve),g(ve,ve),$=0;$<3;++$)W.eyePosition[$]=ve[12+$]/ve[15];var ue=ve[15];for($=0;$<3;++$)ue+=this.lightPosition[$]*ve[4*$+3];for($=0;$<3;++$){var ce=ve[12+$];for(de=0;de<3;++de)ce+=ve[4*de+$]*this.lightPosition[de];W.lightPosition[$]=ce/ue}var _e=V(W,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=W,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(K.TRIANGLES,this._vertexCount),$=0;$<3;++$)!this.surfaceProject[$]||!this.vertexCount||(this._shader.uniforms.model=_e.projections[$],this._shader.uniforms.clipBounds=_e.clipBounds[$],this._vao.draw(K.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var fe=this._contourShader;W.kambient=1,W.kdiffuse=0,W.kspecular=0,W.opacity=1,fe.bind(),fe.uniforms=W;var ne=this._contourVAO;for(ne.bind(),$=0;$<3;++$)for(fe.uniforms.permutation=A[$],K.lineWidth(this.contourWidth[$]*this.pixelRatio),de=0;de<this.contourLevels[$].length;++de)de===this.highlightLevel[$]?(fe.uniforms.contourColor=this.highlightColor[$],fe.uniforms.contourTint=this.highlightTint[$]):(de===0||de-1===this.highlightLevel[$])&&(fe.uniforms.contourColor=this.contourColor[$],fe.uniforms.contourTint=this.contourTint[$]),this._contourCounts[$][de]&&(fe.uniforms.height=this.contourLevels[$][de],ne.draw(K.LINES,this._contourCounts[$][de],this._contourOffsets[$][de]));for($=0;$<3;++$)for(fe.uniforms.model=_e.projections[$],fe.uniforms.clipBounds=_e.clipBounds[$],de=0;de<3;++de)if(!!this.contourProject[$][de]){fe.uniforms.permutation=A[de],K.lineWidth(this.contourWidth[de]*this.pixelRatio);for(var ie=0;ie<this.contourLevels[de].length;++ie)ie===this.highlightLevel[de]?(fe.uniforms.contourColor=this.highlightColor[de],fe.uniforms.contourTint=this.highlightTint[de]):(ie===0||ie-1===this.highlightLevel[de])&&(fe.uniforms.contourColor=this.contourColor[de],fe.uniforms.contourTint=this.contourTint[de]),this._contourCounts[de][ie]&&(fe.uniforms.height=this.contourLevels[de][ie],ne.draw(K.LINES,this._contourCounts[de][ie],this._contourOffsets[de][ie]))}for(ne.unbind(),ne=this._dynamicVAO,ne.bind(),$=0;$<3;++$)if(this._dynamicCounts[$]!==0)for(fe.uniforms.model=W.model,fe.uniforms.clipBounds=W.clipBounds,fe.uniforms.permutation=A[$],K.lineWidth(this.dynamicWidth[$]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[$],fe.uniforms.contourTint=this.dynamicTint[$],fe.uniforms.height=this.dynamicLevel[$],ne.draw(K.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]),de=0;de<3;++de)!this.contourProject[de][$]||(fe.uniforms.model=_e.projections[de],fe.uniforms.clipBounds=_e.clipBounds[de],ne.draw(K.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]));ne.unbind()}}C.draw=function(X){return U.call(this,X,!1)},C.drawTransparent=function(X){return U.call(this,X,!0)};var O={model:r,view:r,projection:r,inverseModel:r,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};C.drawPick=function(X){X=X||{};var H=this.gl;H.disable(H.CULL_FACE);var K=O;K.model=X.model||r,K.view=X.view||r,K.projection=X.projection||r,K.shape=this._field[2].shape,K.pickId=this.pickId/255,K.lowerBound=this.bounds[0],K.upperBound=this.bounds[1],K.objectOffset=this.objectOffset,K.permutation=Q;for(var W=0;W<2;++W)for(var $=K.clipBounds[W],re=0;re<3;++re)$[re]=Math.min(Math.max(this.clipBounds[W][re],-1e8),1e8);var de=V(K,this);if(de.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=K,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),W=0;W<3;++W)!this.surfaceProject[W]||(this._pickShader.uniforms.model=de.projections[W],this._pickShader.uniforms.clipBounds=de.clipBounds[W],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var ve=this._contourPickShader;ve.bind(),ve.uniforms=K;var ue=this._contourVAO;for(ue.bind(),re=0;re<3;++re)for(H.lineWidth(this.contourWidth[re]*this.pixelRatio),ve.uniforms.permutation=A[re],W=0;W<this.contourLevels[re].length;++W)this._contourCounts[re][W]&&(ve.uniforms.height=this.contourLevels[re][W],ue.draw(H.LINES,this._contourCounts[re][W],this._contourOffsets[re][W]));for(W=0;W<3;++W)for(ve.uniforms.model=de.projections[W],ve.uniforms.clipBounds=de.clipBounds[W],re=0;re<3;++re)if(!!this.contourProject[W][re]){ve.uniforms.permutation=A[re],H.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var ce=0;ce<this.contourLevels[re].length;++ce)this._contourCounts[re][ce]&&(ve.uniforms.height=this.contourLevels[re][ce],ue.draw(H.LINES,this._contourCounts[re][ce],this._contourOffsets[re][ce]))}ue.unbind()}},C.pick=function(X){if(!X||X.id!==this.pickId)return null;var H=this._field[2].shape,K=this._pickResult,W=H[0]*(X.value[0]+(X.value[2]>>4)/16)/255,$=Math.floor(W),re=W-$,de=H[1]*(X.value[1]+(X.value[2]&15)/16)/255,ve=Math.floor(de),ue=de-ve;$+=1,ve+=1;var ce=K.position;ce[0]=ce[1]=ce[2]=0;for(var _e=0;_e<2;++_e)for(var fe=_e?re:1-re,ne=0;ne<2;++ne)for(var ie=ne?ue:1-ue,me=$+_e,we=ve+ne,be=fe*ie,Me=0;Me<3;++Me)ce[Me]+=this._field[Me].get(me,we)*be;for(var Ie=this._pickResult.level,Ke=0;Ke<3;++Ke)if(Ie[Ke]=n.le(this.contourLevels[Ke],ce[Ke]),Ie[Ke]<0)this.contourLevels[Ke].length>0&&(Ie[Ke]=0);else if(Ie[Ke]<this.contourLevels[Ke].length-1){var Oe=this.contourLevels[Ke][Ie[Ke]],We=this.contourLevels[Ke][Ie[Ke]+1];Math.abs(Oe-ce[Ke])>Math.abs(We-ce[Ke])&&(Ie[Ke]+=1)}for(K.index[0]=re<.5?$:$+1,K.index[1]=ue<.5?ve:ve+1,K.uv[0]=W/H[0],K.uv[1]=de/H[1],Me=0;Me<3;++Me)K.dataCoordinate[Me]=this._field[Me].get(K.index[0],K.index[1]);return K},C.padField=function(X,H){var K=H.shape.slice(),W=X.shape.slice();v.assign(X.lo(1,1).hi(K[0],K[1]),H),v.assign(X.lo(1).hi(K[0],1),H.hi(K[0],1)),v.assign(X.lo(1,W[1]-1).hi(K[0],1),H.lo(0,K[1]-1).hi(K[0],1)),v.assign(X.lo(0,1).hi(1,K[1]),H.hi(1)),v.assign(X.lo(W[0]-1,1).hi(1,K[1]),H.lo(K[0]-1)),X.set(0,0,H.get(0,0)),X.set(0,W[1]-1,H.get(0,K[1]-1)),X.set(W[0]-1,0,H.get(K[0]-1,0)),X.set(W[0]-1,W[1]-1,H.get(K[0]-1,K[1]-1))};function Z(X,H){return Array.isArray(X)?[H(X[0]),H(X[1]),H(X[2])]:[H(X),H(X),H(X)]}function B(X){return Array.isArray(X)?X.length===3?[X[0],X[1],X[2],1]:[X[0],X[1],X[2],X[3]]:[0,0,0,1]}function Y(X){if(Array.isArray(X)){if(Array.isArray(X))return[B(X[0]),B(X[1]),B(X[2])];var H=B(X);return[H.slice(),H.slice(),H.slice()]}}C.update=function(X){X=X||{},this.objectOffset=X.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in X&&(this.contourWidth=Z(X.contourWidth,Number)),"showContour"in X&&(this.showContour=Z(X.showContour,Boolean)),"showSurface"in X&&(this.showSurface=!!X.showSurface),"contourTint"in X&&(this.contourTint=Z(X.contourTint,Boolean)),"contourColor"in X&&(this.contourColor=Y(X.contourColor)),"contourProject"in X&&(this.contourProject=Z(X.contourProject,function(St){return Z(St,Boolean)})),"surfaceProject"in X&&(this.surfaceProject=X.surfaceProject),"dynamicColor"in X&&(this.dynamicColor=Y(X.dynamicColor)),"dynamicTint"in X&&(this.dynamicTint=Z(X.dynamicTint,Number)),"dynamicWidth"in X&&(this.dynamicWidth=Z(X.dynamicWidth,Number)),"opacity"in X&&(this.opacity=X.opacity),"opacityscale"in X&&(this.opacityscale=X.opacityscale),"colorBounds"in X&&(this.colorBounds=X.colorBounds),"vertexColor"in X&&(this.vertexColor=X.vertexColor?1:0),"colormap"in X&&this._colorMap.setPixels(this.genColormap(X.colormap,this.opacityscale));var H=X.field||X.coords&&X.coords[2]||null,K=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in X||"coords"in X){var W=(H.shape[0]+2)*(H.shape[1]+2);W>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(d.nextPow2(W))),this._field[2]=T(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var $=this.shape,re=0;re<2;++re)this._field[2].size>this._field[re].data.length&&(l.freeFloat(this._field[re].data),this._field[re].data=l.mallocFloat(this._field[2].size)),this._field[re]=T(this._field[re].data,[$[0]+2,$[1]+2]);if(X.coords){var de=X.coords;if(!Array.isArray(de)||de.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(re=0;re<2;++re){var ve=de[re];for(ne=0;ne<2;++ne)if(ve.shape[ne]!==$[ne])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[re],ve)}}else if(X.ticks){var ue=X.ticks;if(!Array.isArray(ue)||ue.length!==2)throw new Error("gl-surface: invalid ticks");for(re=0;re<2;++re){var ce=ue[re];if((Array.isArray(ce)||ce.length)&&(ce=T(ce)),ce.shape[0]!==$[re])throw new Error("gl-surface: invalid tick length");var _e=T(ce.data,$);_e.stride[re]=ce.stride[0],_e.stride[re^1]=0,this.padField(this._field[re],_e)}}else{for(re=0;re<2;++re){var fe=[0,0];fe[re]=1,this._field[re]=T(this._field[re].data,[$[0]+2,$[1]+2],fe,0)}this._field[0].set(0,0,0);for(var ne=0;ne<$[0];++ne)this._field[0].set(ne+1,0,ne);for(this._field[0].set($[0]+1,0,$[0]-1),this._field[1].set(0,0,0),ne=0;ne<$[1];++ne)this._field[1].set(0,ne+1,ne);this._field[1].set(0,$[1]+1,$[1]-1)}var ie=this._field,me=T(l.mallocFloat(ie[2].size*3*2),[3,$[0]+2,$[1]+2,2]);for(re=0;re<3;++re)a(me.pick(re),ie[re],"mirror");var we=T(l.mallocFloat(ie[2].size*3),[$[0]+2,$[1]+2,3]);for(re=0;re<$[0]+2;++re)for(ne=0;ne<$[1]+2;++ne){var be=me.get(0,re,ne,0),Me=me.get(0,re,ne,1),Ie=me.get(1,re,ne,0),Ke=me.get(1,re,ne,1),Oe=me.get(2,re,ne,0),We=me.get(2,re,ne,1),Fe=Ie*We-Ke*Oe,Ge=Oe*Me-We*be,Xe=be*Ke-Me*Ie,ut=Math.sqrt(Fe*Fe+Ge*Ge+Xe*Xe);ut<1e-8?(ut=Math.max(Math.abs(Fe),Math.abs(Ge),Math.abs(Xe)),ut<1e-8?(Xe=1,Ge=Fe=0,ut=1):ut=1/ut):ut=1/Math.sqrt(ut),we.set(re,ne,0,Fe*ut),we.set(re,ne,1,Ge*ut),we.set(re,ne,2,Xe*ut)}l.free(me.data);var rt=[1/0,1/0,1/0],dt=[-1/0,-1/0,-1/0],st=1/0,Ve=-1/0,Je=($[0]-1)*($[1]-1)*6,ke=l.mallocFloat(d.nextPow2(10*Je)),Le=0,Be=0;for(re=0;re<$[0]-1;++re){e:for(ne=0;ne<$[1]-1;++ne){for(var pe=0;pe<2;++pe)for(var Ae=0;Ae<2;++Ae)for(var Ce=0;Ce<3;++Ce){var Se=this._field[Ce].get(1+re+pe,1+ne+Ae);if(isNaN(Se)||!isFinite(Se))continue e}for(Ce=0;Ce<6;++Ce){var He=re+x[Ce][0],Ne=ne+x[Ce][1],qe=this._field[0].get(He+1,Ne+1),at=this._field[1].get(He+1,Ne+1);Se=this._field[2].get(He+1,Ne+1),Fe=we.get(He+1,Ne+1,0),Ge=we.get(He+1,Ne+1,1),Xe=we.get(He+1,Ne+1,2),X.intensity&&(nt=X.intensity.get(He,Ne));var nt=X.intensity?X.intensity.get(He,Ne):Se+this.objectOffset[2];ke[Le++]=He,ke[Le++]=Ne,ke[Le++]=qe,ke[Le++]=at,ke[Le++]=Se,ke[Le++]=0,ke[Le++]=nt,ke[Le++]=Fe,ke[Le++]=Ge,ke[Le++]=Xe,rt[0]=Math.min(rt[0],qe+this.objectOffset[0]),rt[1]=Math.min(rt[1],at+this.objectOffset[1]),rt[2]=Math.min(rt[2],Se+this.objectOffset[2]),st=Math.min(st,nt),dt[0]=Math.max(dt[0],qe+this.objectOffset[0]),dt[1]=Math.max(dt[1],at+this.objectOffset[1]),dt[2]=Math.max(dt[2],Se+this.objectOffset[2]),Ve=Math.max(Ve,nt),Be+=1}}}for(X.intensityBounds&&(st=+X.intensityBounds[0],Ve=+X.intensityBounds[1]),re=6;re<Le;re+=10)ke[re]=(ke[re]-st)/(Ve-st);this._vertexCount=Be,this._coordinateBuffer.update(ke.subarray(0,Le)),l.freeFloat(ke),l.free(we.data),this.bounds=[rt,dt],this.intensity=X.intensity||this._field[2],(this.intensityBounds[0]!==st||this.intensityBounds[1]!==Ve)&&(K=!0),this.intensityBounds=[st,Ve]}if("levels"in X){var Ze=X.levels;for(Array.isArray(Ze[0])?Ze=Ze.slice():Ze=[[],[],Ze],re=0;re<3;++re)Ze[re]=Ze[re].slice(),Ze[re].sort(function(St,Dt){return St-Dt});for(re=0;re<3;++re)for(ne=0;ne<Ze[re].length;++ne)Ze[re][ne]-=this.objectOffset[re];e:for(re=0;re<3;++re){if(Ze[re].length!==this.contourLevels[re].length){K=!0;break}for(ne=0;ne<Ze[re].length;++ne)if(Ze[re][ne]!==this.contourLevels[re][ne]){K=!0;break e}}this.contourLevels=Ze}if(K){ie=this._field,$=this.shape;for(var ht=[],kt=0;kt<3;++kt){var xt=this.contourLevels[kt],Bt=[],Zt=[],Gt=[0,0,0];for(re=0;re<xt.length;++re){var Rt=_(this._field[kt],xt[re]);Bt.push(ht.length/5|0),Be=0;e:for(ne=0;ne<Rt.cells.length;++ne){var Wt=Rt.cells[ne];for(Ce=0;Ce<2;++Ce){var It=Rt.positions[Wt[Ce]],vt=It[0],Yt=Math.floor(vt)|0,Ft=vt-Yt,ye=It[1],ge=Math.floor(ye)|0,Re=ye-ge,ze=!1;t:for(var Ue=0;Ue<3;++Ue){Gt[Ue]=0;var je=(kt+Ue+1)%3;for(pe=0;pe<2;++pe){var Ye=pe?Ft:1-Ft;for(He=Math.min(Math.max(Yt+pe,0),$[0])|0,Ae=0;Ae<2;++Ae){var et=Ae?Re:1-Re;if(Ne=Math.min(Math.max(ge+Ae,0),$[1])|0,Ue<2?Se=this._field[je].get(He,Ne):Se=(this.intensity.get(He,Ne)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Se)||isNaN(Se)){ze=!0;break t}var ot=Ye*et;Gt[Ue]+=ot*Se}}}if(!ze)ht.push(Gt[0],Gt[1],It[0],It[1],Gt[2]),Be+=1;else{if(Ce>0){for(var _t=0;_t<5;++_t)ht.pop();Be-=1}continue e}}}Zt.push(Be)}this._contourOffsets[kt]=Bt,this._contourCounts[kt]=Zt}var Mt=l.mallocFloat(ht.length);for(re=0;re<ht.length;++re)Mt[re]=ht[re];this._contourBuffer.update(Mt),l.freeFloat(Mt)}},C.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var X=0;X<3;++X)l.freeFloat(this._field[X].data)},C.highlight=function(X){var H;if(!X){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=X.level[H]:this.highlightLevel[H]=-1;var K;for(this.snapToData?K=X.dataCoordinate:K=X.position,H=0;H<3;++H)K[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||K[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||K[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||K[2]===this.dynamicLevel[2]))){for(var W=0,$=this.shape,re=l.mallocFloat(12*$[0]*$[1]),de=0;de<3;++de){if(!this.enableDynamic[de]){this.dynamicLevel[de]=NaN,this._dynamicCounts[de]=0;continue}this.dynamicLevel[de]=K[de];var ve=(de+1)%3,ue=(de+2)%3,ce=this._field[de],_e=this._field[ve],fe=this._field[ue],ne=_(ce,K[de]),ie=ne.cells,me=ne.positions;for(this._dynamicOffsets[de]=W,H=0;H<ie.length;++H)for(var we=ie[H],be=0;be<2;++be){var Me=me[we[be]],Ie=+Me[0],Ke=Ie|0,Oe=Math.min(Ke+1,$[0])|0,We=Ie-Ke,Fe=1-We,Ge=+Me[1],Xe=Ge|0,ut=Math.min(Xe+1,$[1])|0,rt=Ge-Xe,dt=1-rt,st=Fe*dt,Ve=Fe*rt,Je=We*dt,ke=We*rt,Le=st*_e.get(Ke,Xe)+Ve*_e.get(Ke,ut)+Je*_e.get(Oe,Xe)+ke*_e.get(Oe,ut),Be=st*fe.get(Ke,Xe)+Ve*fe.get(Ke,ut)+Je*fe.get(Oe,Xe)+ke*fe.get(Oe,ut);if(isNaN(Le)||isNaN(Be)){be&&(W-=1);break}re[2*W+0]=Le,re[2*W+1]=Be,W+=1}this._dynamicCounts[de]=W-this._dynamicOffsets[de]}this._dynamicBuffer.update(re.subarray(0,2*W)),l.freeFloat(re)}};function j(X){var H=X.gl,K=c(H),W=o(H),$=m(H),re=t(H),de=e(H),ve=u(H,[{buffer:de,size:4,stride:i,offset:0},{buffer:de,size:3,stride:i,offset:16},{buffer:de,size:3,stride:i,offset:28}]),ue=e(H),ce=u(H,[{buffer:ue,size:4,stride:20,offset:0},{buffer:ue,size:1,stride:20,offset:16}]),_e=e(H),fe=u(H,[{buffer:_e,size:2,type:H.FLOAT}]),ne=s(H,1,P,H.RGBA,H.UNSIGNED_BYTE);ne.minFilter=H.LINEAR,ne.magFilter=H.LINEAR;var ie=new S(H,[0,0],[[0,0,0],[0,0,0]],K,W,de,ve,ne,$,re,ue,ce,_e,fe,[0,0,0]),me={levels:[[],[],[]]};for(var we in X)me[we]=X[we];return me.colormap=me.colormap||"jet",ie.update(me),ie}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(p,w,k){"use strict";var d=p("ndarray"),e=p("ndarray-ops"),u=p("typedarray-pool");w.exports=t;var s=null,l=null,b=null;function v(i){s=[i.LINEAR,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_NEAREST],l=[i.NEAREST,i.LINEAR,i.NEAREST_MIPMAP_NEAREST,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_LINEAR],b=[i.REPEAT,i.CLAMP_TO_EDGE,i.MIRRORED_REPEAT]}function y(i){return typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement||typeof ImageData<"u"&&i instanceof ImageData}var T=function(i,r){e.muls(i,r,255)};function _(i,r,x){var A=i.gl,E=A.getParameter(A.MAX_TEXTURE_SIZE);if(r<0||r>E||x<0||x>E)throw new Error("gl-texture2d: Invalid texture size");return i._shape=[r,x],i.bind(),A.texImage2D(A.TEXTURE_2D,0,i.format,r,x,0,i.format,i.type,null),i._mipLevels=[0],i}function f(i,r,x,A,E,P){this.gl=i,this.handle=r,this.format=E,this.type=P,this._shape=[x,A],this._mipLevels=[0],this._magFilter=i.NEAREST,this._minFilter=i.NEAREST,this._wrapS=i.CLAMP_TO_EDGE,this._wrapT=i.CLAMP_TO_EDGE,this._anisoSamples=1;var S=this,C=[this._wrapS,this._wrapT];Object.defineProperties(C,[{get:function(){return S._wrapS},set:function(I){return S.wrapS=I}},{get:function(){return S._wrapT},set:function(I){return S.wrapT=I}}]),this._wrapVector=C;var M=[this._shape[0],this._shape[1]];Object.defineProperties(M,[{get:function(){return S._shape[0]},set:function(I){return S.width=I}},{get:function(){return S._shape[1]},set:function(I){return S.height=I}}]),this._shapeVector=M}var g=f.prototype;Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(i){this.bind();var r=this.gl;if(this.type===r.FLOAT&&s.indexOf(i)>=0&&(r.getExtension("OES_texture_float_linear")||(i=r.NEAREST)),l.indexOf(i)<0)throw new Error("gl-texture2d: Unknown filter mode "+i);return r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),this._minFilter=i}},magFilter:{get:function(){return this._magFilter},set:function(i){this.bind();var r=this.gl;if(this.type===r.FLOAT&&s.indexOf(i)>=0&&(r.getExtension("OES_texture_float_linear")||(i=r.NEAREST)),l.indexOf(i)<0)throw new Error("gl-texture2d: Unknown filter mode "+i);return r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i),this._magFilter=i}},mipSamples:{get:function(){return this._anisoSamples},set:function(i){var r=this._anisoSamples;if(this._anisoSamples=Math.max(i,1)|0,r!==this._anisoSamples){var x=this.gl.getExtension("EXT_texture_filter_anisotropic");x&&this.gl.texParameterf(this.gl.TEXTURE_2D,x.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(i){if(this.bind(),b.indexOf(i)<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i),this._wrapS=i}},wrapT:{get:function(){return this._wrapT},set:function(i){if(this.bind(),b.indexOf(i)<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i),this._wrapT=i}},wrap:{get:function(){return this._wrapVector},set:function(i){if(Array.isArray(i)||(i=[i,i]),i.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var r=0;r<2;++r)if(b.indexOf(i[r])<0)throw new Error("gl-texture2d: Unknown wrap mode "+i);this._wrapS=i[0],this._wrapT=i[1];var x=this.gl;return this.bind(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,this._wrapS),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,this._wrapT),i}},shape:{get:function(){return this._shapeVector},set:function(i){if(!Array.isArray(i))i=[i|0,i|0];else if(i.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return _(this,i[0]|0,i[1]|0),[i[0]|0,i[1]|0]}},width:{get:function(){return this._shape[0]},set:function(i){return i=i|0,_(this,i,this._shape[1]),i}},height:{get:function(){return this._shape[1]},set:function(i){return i=i|0,_(this,this._shape[0],i),i}}}),g.bind=function(i){var r=this.gl;return i!==void 0&&r.activeTexture(r.TEXTURE0+(i|0)),r.bindTexture(r.TEXTURE_2D,this.handle),i!==void 0?i|0:r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var i=Math.min(this._shape[0],this._shape[1]),r=0;i>0;++r,i>>>=1)this._mipLevels.indexOf(r)<0&&this._mipLevels.push(r)},g.setPixels=function(i,r,x,A){var E=this.gl;this.bind(),Array.isArray(r)?(A=x,x=r[1]|0,r=r[0]|0):(r=r||0,x=x||0),A=A||0;var P=y(i)?i:i.raw;if(P){var S=this._mipLevels.indexOf(A)<0;S?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(A)):E.texSubImage2D(E.TEXTURE_2D,A,r,x,this.format,this.type,P)}else if(i.shape&&i.stride&&i.data){if(i.shape.length<2||r+i.shape[1]>this._shape[1]>>>A||x+i.shape[0]>this._shape[0]>>>A||r<0||x<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");a(E,r,x,A,this.format,this.type,this._mipLevels,i)}else throw new Error("gl-texture2d: Unsupported data type")};function n(i,r){return i.length===3?r[2]===1&&r[1]===i[0]*i[2]&&r[0]===i[2]:r[0]===1&&r[1]===i[0]}function a(i,r,x,A,E,P,S,C){var M=C.dtype,I=C.shape.slice();if(I.length<2||I.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var G=0,V=0,q=n(I,C.stride.slice());M==="float32"?G=i.FLOAT:M==="float64"?(G=i.FLOAT,q=!1,M="float32"):M==="uint8"?G=i.UNSIGNED_BYTE:(G=i.UNSIGNED_BYTE,q=!1,M="uint8");var ee=1;if(I.length===2)V=i.LUMINANCE,I=[I[0],I[1],1],C=d(C.data,I,[C.stride[0],C.stride[1],1],C.offset);else if(I.length===3){if(I[2]===1)V=i.ALPHA;else if(I[2]===2)V=i.LUMINANCE_ALPHA;else if(I[2]===3)V=i.RGB;else if(I[2]===4)V=i.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=I[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((V===i.LUMINANCE||V===i.ALPHA)&&(E===i.LUMINANCE||E===i.ALPHA)&&(V=E),V!==E)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=C.size,U=S.indexOf(A)<0;if(U&&S.push(A),G===P&&q)C.offset===0&&C.data.length===Q?U?i.texImage2D(i.TEXTURE_2D,A,E,I[0],I[1],0,E,P,C.data):i.texSubImage2D(i.TEXTURE_2D,A,r,x,I[0],I[1],E,P,C.data):U?i.texImage2D(i.TEXTURE_2D,A,E,I[0],I[1],0,E,P,C.data.subarray(C.offset,C.offset+Q)):i.texSubImage2D(i.TEXTURE_2D,A,r,x,I[0],I[1],E,P,C.data.subarray(C.offset,C.offset+Q));else{var O;P===i.FLOAT?O=u.mallocFloat32(Q):O=u.mallocUint8(Q);var Z=d(O,I,[I[2],I[2]*I[0],1]);G===i.FLOAT&&P===i.UNSIGNED_BYTE?T(Z,C):e.assign(Z,C),U?i.texImage2D(i.TEXTURE_2D,A,E,I[0],I[1],0,E,P,O.subarray(0,Q)):i.texSubImage2D(i.TEXTURE_2D,A,r,x,I[0],I[1],E,P,O.subarray(0,Q)),P===i.FLOAT?u.freeFloat32(O):u.freeUint8(O)}}function h(i){var r=i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),r}function c(i,r,x,A,E){var P=i.getParameter(i.MAX_TEXTURE_SIZE);if(r<0||r>P||x<0||x>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===i.FLOAT&&!i.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var S=h(i);return i.texImage2D(i.TEXTURE_2D,0,A,r,x,0,A,E,null),new f(i,S,r,x,A,E)}function m(i,r,x,A,E,P){var S=h(i);return i.texImage2D(i.TEXTURE_2D,0,E,E,P,r),new f(i,S,x,A,E,P)}function o(i,r){var x=r.dtype,A=r.shape.slice(),E=i.getParameter(i.MAX_TEXTURE_SIZE);if(A[0]<0||A[0]>E||A[1]<0||A[1]>E)throw new Error("gl-texture2d: Invalid texture size");var P=n(A,r.stride.slice()),S=0;x==="float32"?S=i.FLOAT:x==="float64"?(S=i.FLOAT,P=!1,x="float32"):x==="uint8"?S=i.UNSIGNED_BYTE:(S=i.UNSIGNED_BYTE,P=!1,x="uint8");var C=0;if(A.length===2)C=i.LUMINANCE,A=[A[0],A[1],1],r=d(r.data,A,[r.stride[0],r.stride[1],1],r.offset);else if(A.length===3)if(A[2]===1)C=i.ALPHA;else if(A[2]===2)C=i.LUMINANCE_ALPHA;else if(A[2]===3)C=i.RGB;else if(A[2]===4)C=i.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");S===i.FLOAT&&!i.getExtension("OES_texture_float")&&(S=i.UNSIGNED_BYTE,P=!1);var M,I,G=r.size;if(P)r.offset===0&&r.data.length===G?M=r.data:M=r.data.subarray(r.offset,r.offset+G);else{var V=[A[2],A[2]*A[0],1];I=u.malloc(G,x);var q=d(I,A,V,0);(x==="float32"||x==="float64")&&S===i.UNSIGNED_BYTE?T(q,r):e.assign(q,r),M=I.subarray(0,G)}var ee=h(i);return i.texImage2D(i.TEXTURE_2D,0,C,A[0],A[1],0,C,S,M),P||u.free(I),new f(i,ee,A[0],A[1],C,S)}function t(i){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||v(i),typeof arguments[1]=="number")return c(i,arguments[1],arguments[2],arguments[3]||i.RGBA,arguments[4]||i.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return c(i,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var r=arguments[1],x=y(r)?r:r.raw;if(x)return m(i,x,r.width|0,r.height|0,arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if(r.shape&&r.data&&r.stride)return o(i,r)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(p,w,k){"use strict";function d(e,u,s){u?u.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(s){if(s.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var b=0;b<s.length;++b){var v=s[b];if(v.buffer){var y=v.buffer,T=v.size||4,_=v.type||e.FLOAT,f=!!v.normalized,g=v.stride||0,n=v.offset||0;y.bind(),e.enableVertexAttribArray(b),e.vertexAttribPointer(b,T,_,f,g,n)}else{if(typeof v=="number")e.vertexAttrib1f(b,v);else if(v.length===1)e.vertexAttrib1f(b,v[0]);else if(v.length===2)e.vertexAttrib2f(b,v[0],v[1]);else if(v.length===3)e.vertexAttrib3f(b,v[0],v[1],v[2]);else if(v.length===4)e.vertexAttrib4f(b,v[0],v[1],v[2],v[3]);else throw new Error("gl-vao: Invalid vertex attribute");e.disableVertexAttribArray(b)}}for(;b<l;++b)e.disableVertexAttribArray(b)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var b=0;b<l;++b)e.disableVertexAttribArray(b)}}w.exports=d},{}],148:[function(p,w,k){"use strict";var d=p("./do-bind.js");function e(s){this.gl=s,this._elements=null,this._attributes=null,this._elementsType=s.UNSIGNED_SHORT}e.prototype.bind=function(){d(this.gl,this._elements,this._attributes)},e.prototype.update=function(s,l,b){this._elements=l,this._attributes=s,this._elementsType=b||this.gl.UNSIGNED_SHORT},e.prototype.dispose=function(){},e.prototype.unbind=function(){},e.prototype.draw=function(s,l,b){b=b||0;var v=this.gl;this._elements?v.drawElements(s,l,this._elementsType,b):v.drawArrays(s,b,l)};function u(s){return new e(s)}w.exports=u},{"./do-bind.js":147}],149:[function(p,w,k){"use strict";var d=p("./do-bind.js");function e(l,b,v,y,T,_){this.location=l,this.dimension=b,this.a=v,this.b=y,this.c=T,this.d=_}e.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(l,b,v){this.gl=l,this._ext=b,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(l,b,v){if(this.bind(),d(this.gl,b,l),this.unbind(),this._attribs.length=0,l)for(var y=0;y<l.length;++y){var T=l[y];typeof T=="number"?this._attribs.push(new e(y,1,T)):Array.isArray(T)&&this._attribs.push(new e(y,T.length,T[0],T[1],T[2],T[3]))}this._useElements=!!b,this._elementsType=v||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(l,b,v){v=v||0;var y=this.gl;this._useElements?y.drawElements(l,b,this._elementsType,v):y.drawArrays(l,v,b)};function s(l,b){return new u(l,b,b.createVertexArrayOES())}w.exports=s},{"./do-bind.js":147}],150:[function(p,w,k){"use strict";var d=p("./lib/vao-native.js"),e=p("./lib/vao-emulated.js");function u(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}function s(l,b,v,y){var T=l.createVertexArray?new u(l):l.getExtension("OES_vertex_array_object"),_;return T?_=d(l,T):_=e(l),_.update(b,v,y),_}w.exports=s},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]+s[0],e[1]=u[1]+s[1],e[2]=u[2]+s[2],e}},{}],152:[function(p,w,k){w.exports=s;var d=p("./fromValues"),e=p("./normalize"),u=p("./dot");function s(l,b){var v=d(l[0],l[1],l[2]),y=d(b[0],b[1],b[2]);e(v,v),e(y,y);var T=u(v,y);return T>1?0:Math.acos(T)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=Math.ceil(u[0]),e[1]=Math.ceil(u[1]),e[2]=Math.ceil(u[2]),e}},{}],154:[function(p,w,k){w.exports=d;function d(e){var u=new Float32Array(3);return u[0]=e[0],u[1]=e[1],u[2]=e[2],u}},{}],155:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=u[0],e[1]=u[1],e[2]=u[2],e}},{}],156:[function(p,w,k){w.exports=d;function d(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=s[0],T=s[1],_=s[2];return e[0]=b*_-v*T,e[1]=v*y-l*_,e[2]=l*T-b*y,e}},{}],158:[function(p,w,k){w.exports=p("./distance")},{"./distance":159}],159:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0]-e[0],l=u[1]-e[1],b=u[2]-e[2];return Math.sqrt(s*s+l*l+b*b)}},{}],160:[function(p,w,k){w.exports=p("./divide")},{"./divide":161}],161:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]/s[0],e[1]=u[1]/s[1],e[2]=u[2]/s[2],e}},{}],162:[function(p,w,k){w.exports=d;function d(e,u){return e[0]*u[0]+e[1]*u[1]+e[2]*u[2]}},{}],163:[function(p,w,k){w.exports=1e-6},{}],164:[function(p,w,k){w.exports=e;var d=p("./epsilon");function e(u,s){var l=u[0],b=u[1],v=u[2],y=s[0],T=s[1],_=s[2];return Math.abs(l-y)<=d*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(b-T)<=d*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(v-_)<=d*Math.max(1,Math.abs(v),Math.abs(_))}},{"./epsilon":163}],165:[function(p,w,k){w.exports=d;function d(e,u){return e[0]===u[0]&&e[1]===u[1]&&e[2]===u[2]}},{}],166:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=Math.floor(u[0]),e[1]=Math.floor(u[1]),e[2]=Math.floor(u[2]),e}},{}],167:[function(p,w,k){w.exports=e;var d=p("./create")();function e(u,s,l,b,v,y){var T,_;for(s||(s=3),l||(l=0),b?_=Math.min(b*s+l,u.length):_=u.length,T=l;T<_;T+=s)d[0]=u[T],d[1]=u[T+1],d[2]=u[T+2],v(d,d,y),u[T]=d[0],u[T+1]=d[1],u[T+2]=d[2];return u}},{"./create":156}],168:[function(p,w,k){w.exports=d;function d(e,u,s){var l=new Float32Array(3);return l[0]=e,l[1]=u,l[2]=s,l}},{}],169:[function(p,w,k){w.exports={EPSILON:p("./epsilon"),create:p("./create"),clone:p("./clone"),angle:p("./angle"),fromValues:p("./fromValues"),copy:p("./copy"),set:p("./set"),equals:p("./equals"),exactEquals:p("./exactEquals"),add:p("./add"),subtract:p("./subtract"),sub:p("./sub"),multiply:p("./multiply"),mul:p("./mul"),divide:p("./divide"),div:p("./div"),min:p("./min"),max:p("./max"),floor:p("./floor"),ceil:p("./ceil"),round:p("./round"),scale:p("./scale"),scaleAndAdd:p("./scaleAndAdd"),distance:p("./distance"),dist:p("./dist"),squaredDistance:p("./squaredDistance"),sqrDist:p("./sqrDist"),length:p("./length"),len:p("./len"),squaredLength:p("./squaredLength"),sqrLen:p("./sqrLen"),negate:p("./negate"),inverse:p("./inverse"),normalize:p("./normalize"),dot:p("./dot"),cross:p("./cross"),lerp:p("./lerp"),random:p("./random"),transformMat4:p("./transformMat4"),transformMat3:p("./transformMat3"),transformQuat:p("./transformQuat"),rotateX:p("./rotateX"),rotateY:p("./rotateY"),rotateZ:p("./rotateZ"),forEach:p("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=1/u[0],e[1]=1/u[1],e[2]=1/u[2],e}},{}],171:[function(p,w,k){w.exports=p("./length")},{"./length":172}],172:[function(p,w,k){w.exports=d;function d(e){var u=e[0],s=e[1],l=e[2];return Math.sqrt(u*u+s*s+l*l)}},{}],173:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=u[0],v=u[1],y=u[2];return e[0]=b+l*(s[0]-b),e[1]=v+l*(s[1]-v),e[2]=y+l*(s[2]-y),e}},{}],174:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=Math.max(u[0],s[0]),e[1]=Math.max(u[1],s[1]),e[2]=Math.max(u[2],s[2]),e}},{}],175:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=Math.min(u[0],s[0]),e[1]=Math.min(u[1],s[1]),e[2]=Math.min(u[2],s[2]),e}},{}],176:[function(p,w,k){w.exports=p("./multiply")},{"./multiply":177}],177:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]*s[0],e[1]=u[1]*s[1],e[2]=u[2]*s[2],e}},{}],178:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=-u[0],e[1]=-u[1],e[2]=-u[2],e}},{}],179:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0],l=u[1],b=u[2],v=s*s+l*l+b*b;return v>0&&(v=1/Math.sqrt(v),e[0]=u[0]*v,e[1]=u[1]*v,e[2]=u[2]*v),e}},{}],180:[function(p,w,k){w.exports=d;function d(e,u){u=u||1;var s=Math.random()*2*Math.PI,l=Math.random()*2-1,b=Math.sqrt(1-l*l)*u;return e[0]=Math.cos(s)*b,e[1]=Math.sin(s)*b,e[2]=l*u,e}},{}],181:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=s[1],v=s[2],y=u[1]-b,T=u[2]-v,_=Math.sin(l),f=Math.cos(l);return e[0]=u[0],e[1]=b+y*f-T*_,e[2]=v+y*_+T*f,e}},{}],182:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=s[0],v=s[2],y=u[0]-b,T=u[2]-v,_=Math.sin(l),f=Math.cos(l);return e[0]=b+T*_+y*f,e[1]=u[1],e[2]=v+T*f-y*_,e}},{}],183:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=s[0],v=s[1],y=u[0]-b,T=u[1]-v,_=Math.sin(l),f=Math.cos(l);return e[0]=b+y*f-T*_,e[1]=v+y*_+T*f,e[2]=u[2],e}},{}],184:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=Math.round(u[0]),e[1]=Math.round(u[1]),e[2]=Math.round(u[2]),e}},{}],185:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]*s,e[1]=u[1]*s,e[2]=u[2]*s,e}},{}],186:[function(p,w,k){w.exports=d;function d(e,u,s,l){return e[0]=u[0]+s[0]*l,e[1]=u[1]+s[1]*l,e[2]=u[2]+s[2]*l,e}},{}],187:[function(p,w,k){w.exports=d;function d(e,u,s,l){return e[0]=u,e[1]=s,e[2]=l,e}},{}],188:[function(p,w,k){w.exports=p("./squaredDistance")},{"./squaredDistance":190}],189:[function(p,w,k){w.exports=p("./squaredLength")},{"./squaredLength":191}],190:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0]-e[0],l=u[1]-e[1],b=u[2]-e[2];return s*s+l*l+b*b}},{}],191:[function(p,w,k){w.exports=d;function d(e){var u=e[0],s=e[1],l=e[2];return u*u+s*s+l*l}},{}],192:[function(p,w,k){w.exports=p("./subtract")},{"./subtract":193}],193:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]-s[0],e[1]=u[1]-s[1],e[2]=u[2]-s[2],e}},{}],194:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2];return e[0]=l*s[0]+b*s[3]+v*s[6],e[1]=l*s[1]+b*s[4]+v*s[7],e[2]=l*s[2]+b*s[5]+v*s[8],e}},{}],195:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=s[3]*l+s[7]*b+s[11]*v+s[15];return y=y||1,e[0]=(s[0]*l+s[4]*b+s[8]*v+s[12])/y,e[1]=(s[1]*l+s[5]*b+s[9]*v+s[13])/y,e[2]=(s[2]*l+s[6]*b+s[10]*v+s[14])/y,e}},{}],196:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=s[0],T=s[1],_=s[2],f=s[3],g=f*l+T*v-_*b,n=f*b+_*l-y*v,a=f*v+y*b-T*l,h=-y*l-T*b-_*v;return e[0]=g*f+h*-y+n*-_-a*-T,e[1]=n*f+h*-T+a*-y-g*-_,e[2]=a*f+h*-_+g*-T-n*-y,e}},{}],197:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]+s[0],e[1]=u[1]+s[1],e[2]=u[2]+s[2],e[3]=u[3]+s[3],e}},{}],198:[function(p,w,k){w.exports=d;function d(e){var u=new Float32Array(4);return u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=e[3],u}},{}],199:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=u[0],e[1]=u[1],e[2]=u[2],e[3]=u[3],e}},{}],200:[function(p,w,k){w.exports=d;function d(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0]-e[0],l=u[1]-e[1],b=u[2]-e[2],v=u[3]-e[3];return Math.sqrt(s*s+l*l+b*b+v*v)}},{}],202:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]/s[0],e[1]=u[1]/s[1],e[2]=u[2]/s[2],e[3]=u[3]/s[3],e}},{}],203:[function(p,w,k){w.exports=d;function d(e,u){return e[0]*u[0]+e[1]*u[1]+e[2]*u[2]+e[3]*u[3]}},{}],204:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=new Float32Array(4);return b[0]=e,b[1]=u,b[2]=s,b[3]=l,b}},{}],205:[function(p,w,k){w.exports={create:p("./create"),clone:p("./clone"),fromValues:p("./fromValues"),copy:p("./copy"),set:p("./set"),add:p("./add"),subtract:p("./subtract"),multiply:p("./multiply"),divide:p("./divide"),min:p("./min"),max:p("./max"),scale:p("./scale"),scaleAndAdd:p("./scaleAndAdd"),distance:p("./distance"),squaredDistance:p("./squaredDistance"),length:p("./length"),squaredLength:p("./squaredLength"),negate:p("./negate"),inverse:p("./inverse"),normalize:p("./normalize"),dot:p("./dot"),lerp:p("./lerp"),random:p("./random"),transformMat4:p("./transformMat4"),transformQuat:p("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=1/u[0],e[1]=1/u[1],e[2]=1/u[2],e[3]=1/u[3],e}},{}],207:[function(p,w,k){w.exports=d;function d(e){var u=e[0],s=e[1],l=e[2],b=e[3];return Math.sqrt(u*u+s*s+l*l+b*b)}},{}],208:[function(p,w,k){w.exports=d;function d(e,u,s,l){var b=u[0],v=u[1],y=u[2],T=u[3];return e[0]=b+l*(s[0]-b),e[1]=v+l*(s[1]-v),e[2]=y+l*(s[2]-y),e[3]=T+l*(s[3]-T),e}},{}],209:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=Math.max(u[0],s[0]),e[1]=Math.max(u[1],s[1]),e[2]=Math.max(u[2],s[2]),e[3]=Math.max(u[3],s[3]),e}},{}],210:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=Math.min(u[0],s[0]),e[1]=Math.min(u[1],s[1]),e[2]=Math.min(u[2],s[2]),e[3]=Math.min(u[3],s[3]),e}},{}],211:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]*s[0],e[1]=u[1]*s[1],e[2]=u[2]*s[2],e[3]=u[3]*s[3],e}},{}],212:[function(p,w,k){w.exports=d;function d(e,u){return e[0]=-u[0],e[1]=-u[1],e[2]=-u[2],e[3]=-u[3],e}},{}],213:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0],l=u[1],b=u[2],v=u[3],y=s*s+l*l+b*b+v*v;return y>0&&(y=1/Math.sqrt(y),e[0]=s*y,e[1]=l*y,e[2]=b*y,e[3]=v*y),e}},{}],214:[function(p,w,k){var d=p("./normalize"),e=p("./scale");w.exports=u;function u(s,l){return l=l||1,s[0]=Math.random(),s[1]=Math.random(),s[2]=Math.random(),s[3]=Math.random(),d(s,s),e(s,s,l),s}},{"./normalize":213,"./scale":215}],215:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]*s,e[1]=u[1]*s,e[2]=u[2]*s,e[3]=u[3]*s,e}},{}],216:[function(p,w,k){w.exports=d;function d(e,u,s,l){return e[0]=u[0]+s[0]*l,e[1]=u[1]+s[1]*l,e[2]=u[2]+s[2]*l,e[3]=u[3]+s[3]*l,e}},{}],217:[function(p,w,k){w.exports=d;function d(e,u,s,l,b){return e[0]=u,e[1]=s,e[2]=l,e[3]=b,e}},{}],218:[function(p,w,k){w.exports=d;function d(e,u){var s=u[0]-e[0],l=u[1]-e[1],b=u[2]-e[2],v=u[3]-e[3];return s*s+l*l+b*b+v*v}},{}],219:[function(p,w,k){w.exports=d;function d(e){var u=e[0],s=e[1],l=e[2],b=e[3];return u*u+s*s+l*l+b*b}},{}],220:[function(p,w,k){w.exports=d;function d(e,u,s){return e[0]=u[0]-s[0],e[1]=u[1]-s[1],e[2]=u[2]-s[2],e[3]=u[3]-s[3],e}},{}],221:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=u[3];return e[0]=s[0]*l+s[4]*b+s[8]*v+s[12]*y,e[1]=s[1]*l+s[5]*b+s[9]*v+s[13]*y,e[2]=s[2]*l+s[6]*b+s[10]*v+s[14]*y,e[3]=s[3]*l+s[7]*b+s[11]*v+s[15]*y,e}},{}],222:[function(p,w,k){w.exports=d;function d(e,u,s){var l=u[0],b=u[1],v=u[2],y=s[0],T=s[1],_=s[2],f=s[3],g=f*l+T*v-_*b,n=f*b+_*l-y*v,a=f*v+y*b-T*l,h=-y*l-T*b-_*v;return e[0]=g*f+h*-y+n*-_-a*-T,e[1]=n*f+h*-T+a*-y-g*-_,e[2]=a*f+h*-_+g*-T-n*-y,e[3]=u[3],e}},{}],223:[function(p,w,k){var d=p("glsl-tokenizer"),e=p("atob-lite");w.exports=u;function u(s){for(var l=Array.isArray(s)?s:d(s),b=0;b<l.length;b++){var v=l[b];if(v.type==="preprocessor"){var y=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!y&&!!y[2]){var T=y[1],_=y[2];return(T?e(_):_).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(p,w,k){w.exports=r;var d=p("./lib/literals"),e=p("./lib/operators"),u=p("./lib/builtins"),s=p("./lib/literals-300es"),l=p("./lib/builtins-300es"),b=999,v=9999,y=0,T=1,_=2,f=3,g=4,n=5,a=6,h=7,c=8,m=9,o=10,t=11,i=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function r(x){var A=0,E=0,P=b,S,C,M=[],I=[],G=0,V=0,q=1,ee=0,Q=0,U=!1,O=!1,Z="",B;x=x||{};var Y=u,j=d;x.version==="300 es"&&(Y=l,j=s);for(var X={},H={},A=0;A<Y.length;A++)X[Y[A]]=!0;for(var A=0;A<j.length;A++)H[j[A]]=!0;return function(be){return I=[],be!==null?W(be):$()};function K(be){be.length&&I.push({type:i[P],data:be,position:Q,line:q,column:ee})}function W(be){A=0,be.toString&&(be=be.toString()),Z+=be.replace(/\r\n/g,`
`),B=Z.length;for(var Me;S=Z[A],A<B;){switch(Me=A,P){case y:A=ce();break;case T:A=ue();break;case _:A=ve();break;case f:A=_e();break;case g:A=ie();break;case t:A=ne();break;case n:A=me();break;case v:A=we();break;case m:A=de();break;case b:A=re();break}if(Me!==A)switch(Z[Me]){case`
`:ee=0,++q;break;default:++ee;break}}return E+=A,Z=Z.slice(A),I}function $(be){return M.length&&K(M.join("")),P=o,K("(eof)"),I}function re(){return M=M.length?[]:M,C==="/"&&S==="*"?(Q=E+A-1,P=y,C=S,A+1):C==="/"&&S==="/"?(Q=E+A-1,P=T,C=S,A+1):S==="#"?(P=_,Q=E+A,A):/\s/.test(S)?(P=m,Q=E+A,A):(U=/\d/.test(S),O=/[^\w_]/.test(S),Q=E+A,P=U?g:O?f:v,A)}function de(){return/[^\s]/g.test(S)?(K(M.join("")),P=b,A):(M.push(S),C=S,A+1)}function ve(){return(S==="\r"||S===`
`)&&C!=="\\"?(K(M.join("")),P=b,A):(M.push(S),C=S,A+1)}function ue(){return ve()}function ce(){return S==="/"&&C==="*"?(M.push(S),K(M.join("")),P=b,A+1):(M.push(S),C=S,A+1)}function _e(){if(C==="."&&/\d/.test(S))return P=n,A;if(C==="/"&&S==="*")return P=y,A;if(C==="/"&&S==="/")return P=T,A;if(S==="."&&M.length){for(;fe(M););return P=n,A}if(S===";"||S===")"||S==="("){if(M.length)for(;fe(M););return K(S),P=b,A+1}var be=M.length===2&&S!=="=";if(/[\w_\d\s]/.test(S)||be){for(;fe(M););return P=b,A}return M.push(S),C=S,A+1}function fe(be){var Me=0,Ie,Ke;do{if(Ie=e.indexOf(be.slice(0,be.length+Me).join("")),Ke=e[Ie],Ie===-1){if(Me--+be.length>0)continue;Ke=be.slice(0,1).join("")}return K(Ke),Q+=Ke.length,M=M.slice(Ke.length),M.length}while(1)}function ne(){return/[^a-fA-F0-9]/.test(S)?(K(M.join("")),P=b,A):(M.push(S),C=S,A+1)}function ie(){return S==="."||/[eE]/.test(S)?(M.push(S),P=n,C=S,A+1):S==="x"&&M.length===1&&M[0]==="0"?(P=t,M.push(S),C=S,A+1):/[^\d]/.test(S)?(K(M.join("")),P=b,A):(M.push(S),C=S,A+1)}function me(){return S==="f"&&(M.push(S),C=S,A+=1),/[eE]/.test(S)||(S==="-"||S==="+")&&/[eE]/.test(C)?(M.push(S),C=S,A+1):/[^\d]/.test(S)?(K(M.join("")),P=b,A):(M.push(S),C=S,A+1)}function we(){if(/[^\d\w_]/.test(S)){var be=M.join("");return H[be]?P=c:X[be]?P=h:P=a,K(M.join("")),P=b,A}return M.push(S),C=S,A+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(p,w,k){var d=p("./builtins");d=d.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),w.exports=d.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(p,w,k){w.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(p,w,k){var d=p("./literals");w.exports=d.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(p,w,k){w.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(p,w,k){w.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(p,w,k){var d=p("./index");w.exports=e;function e(u,s){var l=d(s),b=[];return b=b.concat(l(u)),b=b.concat(l(null)),b}},{"./index":224}],231:[function(p,w,k){w.exports=function(d){typeof d=="string"&&(d=[d]);for(var e=[].slice.call(arguments,1),u=[],s=0;s<d.length-1;s++)u.push(d[s],e[s]||"");return u.push(d[s]),u.join("")}},{}],232:[function(p,w,k){"use strict";var d=p("is-browser");function e(){var u=!1;try{var s=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch{u=!1}return u}w.exports=d&&e()},{"is-browser":236}],233:[function(p,w,k){"use strict";w.exports=f;var d=p("robust-orientation"),e=p("simplicial-complex").compareCells;function u(g,n,a){this.vertices=g,this.adjacent=n,this.boundary=a,this.lastVisited=-1}u.prototype.flip=function(){var g=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=g;var n=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=n};function s(g,n,a){this.vertices=g,this.cell=n,this.index=a}function l(g,n){return e(g.vertices,n.vertices)}function b(g){return function(){var n=this.tuple;return g.apply(this,n)}}function v(g){var n=d[g+1];return n||(n=d),b(n)}var y=[];function T(g,n,a){this.dimension=g,this.vertices=n,this.simplices=a,this.interior=a.filter(function(m){return!m.boundary}),this.tuple=new Array(g+1);for(var h=0;h<=g;++h)this.tuple[h]=this.vertices[h];var c=y[g];c||(c=y[g]=v(g)),this.orient=c}var _=T.prototype;_.handleBoundaryDegeneracy=function(g,n){var a=this.dimension,h=this.vertices.length-1,c=this.tuple,m=this.vertices,o=[g];for(g.lastVisited=-h;o.length>0;){g=o.pop();for(var t=g.adjacent,i=0;i<=a;++i){var r=t[i];if(!(!r.boundary||r.lastVisited<=-h)){for(var x=r.vertices,A=0;A<=a;++A){var E=x[A];E<0?c[A]=n:c[A]=m[E]}var P=this.orient();if(P>0)return r;r.lastVisited=-h,P===0&&o.push(r)}}}return null},_.walk=function(g,n){var a=this.vertices.length-1,h=this.dimension,c=this.vertices,m=this.tuple,o=n?this.interior.length*Math.random()|0:this.interior.length-1,t=this.interior[o];e:for(;!t.boundary;){for(var i=t.vertices,r=t.adjacent,x=0;x<=h;++x)m[x]=c[i[x]];t.lastVisited=a;for(var x=0;x<=h;++x){var A=r[x];if(!(A.lastVisited>=a)){var E=m[x];m[x]=g;var P=this.orient();if(m[x]=E,P<0){t=A;continue e}else A.boundary?A.lastVisited=-a:A.lastVisited=a}}return}return t},_.addPeaks=function(g,n){var a=this.vertices.length-1,h=this.dimension,c=this.vertices,m=this.tuple,o=this.interior,t=this.simplices,i=[n];n.lastVisited=a,n.vertices[n.vertices.indexOf(-1)]=a,n.boundary=!1,o.push(n);for(var r=[];i.length>0;){var n=i.pop(),x=n.vertices,A=n.adjacent,E=x.indexOf(a);if(!(E<0)){for(var P=0;P<=h;++P)if(P!==E){var S=A[P];if(!(!S.boundary||S.lastVisited>=a)){var C=S.vertices;if(S.lastVisited!==-a){for(var M=0,I=0;I<=h;++I)C[I]<0?(M=I,m[I]=g):m[I]=c[C[I]];var G=this.orient();if(G>0){C[M]=a,S.boundary=!1,o.push(S),i.push(S),S.lastVisited=a;continue}else S.lastVisited=-a}var V=S.adjacent,q=x.slice(),ee=A.slice(),Q=new u(q,ee,!0);t.push(Q);var U=V.indexOf(n);if(!(U<0)){V[U]=Q,ee[E]=S,q[P]=-1,ee[P]=n,A[P]=Q,Q.flip();for(var I=0;I<=h;++I){var O=q[I];if(!(O<0||O===a)){for(var Z=new Array(h-1),B=0,Y=0;Y<=h;++Y){var j=q[Y];j<0||Y===I||(Z[B++]=j)}r.push(new s(Z,Q,I))}}}}}}}r.sort(l);for(var P=0;P+1<r.length;P+=2){var X=r[P],H=r[P+1],K=X.index,W=H.index;K<0||W<0||(X.cell.adjacent[X.index]=H.cell,H.cell.adjacent[H.index]=X.cell)}},_.insert=function(g,n){var a=this.vertices;a.push(g);var h=this.walk(g,n);if(!!h){for(var c=this.dimension,m=this.tuple,o=0;o<=c;++o){var t=h.vertices[o];t<0?m[o]=g:m[o]=a[t]}var i=this.orient(m);i<0||i===0&&(h=this.handleBoundaryDegeneracy(h,g),!h)||this.addPeaks(g,h)}},_.boundary=function(){for(var g=this.dimension,n=[],a=this.simplices,h=a.length,c=0;c<h;++c){var m=a[c];if(m.boundary){for(var o=new Array(g),t=m.vertices,i=0,r=0,x=0;x<=g;++x)t[x]>=0?o[i++]=t[x]:r=x&1;if(r===(g&1)){var A=o[0];o[0]=o[1],o[1]=A}n.push(o)}}return n};function f(g,n){var a=g.length;if(a===0)throw new Error("Must have at least d+1 points");var h=g[0].length;if(a<=h)throw new Error("Must input at least d+1 points");var c=g.slice(0,h+1),m=d.apply(void 0,c);if(m===0)throw new Error("Input not in general position");for(var o=new Array(h+1),t=0;t<=h;++t)o[t]=t;m<0&&(o[0]=1,o[1]=0);for(var i=new u(o,new Array(h+1),!1),r=i.adjacent,x=new Array(h+2),t=0;t<=h;++t){for(var A=o.slice(),E=0;E<=h;++E)E===t&&(A[E]=-1);var P=A[0];A[0]=A[1],A[1]=P;var S=new u(A,new Array(h+1),!0);r[t]=S,x[t]=S}x[h+1]=i;for(var t=0;t<=h;++t)for(var A=r[t].vertices,C=r[t].adjacent,E=0;E<=h;++E){var M=A[E];if(M<0){C[E]=i;continue}for(var I=0;I<=h;++I)r[I].vertices.indexOf(M)<0&&(C[E]=r[I])}for(var G=new T(h,c,x),V=!!n,t=h+1;t<a;++t)G.insert(g[t],V);return G.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(p,w,k){"use strict";var d=p("binary-search-bounds"),e=0,u=1,s=2;w.exports=i;function l(r,x,A,E,P){this.mid=r,this.left=x,this.right=A,this.leftPoints=E,this.rightPoints=P,this.count=(x?x.count:0)+(A?A.count:0)+E.length}var b=l.prototype;function v(r,x){r.mid=x.mid,r.left=x.left,r.right=x.right,r.leftPoints=x.leftPoints,r.rightPoints=x.rightPoints,r.count=x.count}function y(r,x){var A=m(x);r.mid=A.mid,r.left=A.left,r.right=A.right,r.leftPoints=A.leftPoints,r.rightPoints=A.rightPoints,r.count=A.count}function T(r,x){var A=r.intervals([]);A.push(x),y(r,A)}function _(r,x){var A=r.intervals([]),E=A.indexOf(x);return E<0?e:(A.splice(E,1),y(r,A),u)}b.intervals=function(r){return r.push.apply(r,this.leftPoints),this.left&&this.left.intervals(r),this.right&&this.right.intervals(r),r},b.insert=function(r){var x=this.count-this.leftPoints.length;if(this.count+=1,r[1]<this.mid)this.left?4*(this.left.count+1)>3*(x+1)?T(this,r):this.left.insert(r):this.left=m([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(x+1)?T(this,r):this.right.insert(r):this.right=m([r]);else{var A=d.ge(this.leftPoints,r,h),E=d.ge(this.rightPoints,r,c);this.leftPoints.splice(A,0,r),this.rightPoints.splice(E,0,r)}},b.remove=function(r){var x=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return e;var A=this.right?this.right.count:0;if(4*A>3*(x-1))return _(this,r);var E=this.left.remove(r);return E===s?(this.left=null,this.count-=1,u):(E===u&&(this.count-=1),E)}else if(r[0]>this.mid){if(!this.right)return e;var P=this.left?this.left.count:0;if(4*P>3*(x-1))return _(this,r);var E=this.right.remove(r);return E===s?(this.right=null,this.count-=1,u):(E===u&&(this.count-=1),E)}else{if(this.count===1)return this.leftPoints[0]===r?s:e;if(this.leftPoints.length===1&&this.leftPoints[0]===r){if(this.left&&this.right){for(var S=this,C=this.left;C.right;)S=C,C=C.right;if(S===this)C.right=this.right;else{var M=this.left,E=this.right;S.count-=C.count,S.right=C.left,C.left=M,C.right=E}v(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?v(this,this.left):v(this,this.right);return u}for(var M=d.ge(this.leftPoints,r,h);M<this.leftPoints.length&&this.leftPoints[M][0]===r[0];++M)if(this.leftPoints[M]===r){this.count-=1,this.leftPoints.splice(M,1);for(var E=d.ge(this.rightPoints,r,c);E<this.rightPoints.length&&this.rightPoints[E][1]===r[1];++E)if(this.rightPoints[E]===r)return this.rightPoints.splice(E,1),u}return e}};function f(r,x,A){for(var E=0;E<r.length&&r[E][0]<=x;++E){var P=A(r[E]);if(P)return P}}function g(r,x,A){for(var E=r.length-1;E>=0&&r[E][1]>=x;--E){var P=A(r[E]);if(P)return P}}function n(r,x){for(var A=0;A<r.length;++A){var E=x(r[A]);if(E)return E}}b.queryPoint=function(r,x){if(r<this.mid){if(this.left){var A=this.left.queryPoint(r,x);if(A)return A}return f(this.leftPoints,r,x)}else if(r>this.mid){if(this.right){var A=this.right.queryPoint(r,x);if(A)return A}return g(this.rightPoints,r,x)}else return n(this.leftPoints,x)},b.queryInterval=function(r,x,A){if(r<this.mid&&this.left){var E=this.left.queryInterval(r,x,A);if(E)return E}if(x>this.mid&&this.right){var E=this.right.queryInterval(r,x,A);if(E)return E}return x<this.mid?f(this.leftPoints,x,A):r>this.mid?g(this.rightPoints,r,A):n(this.leftPoints,A)};function a(r,x){return r-x}function h(r,x){var A=r[0]-x[0];return A||r[1]-x[1]}function c(r,x){var A=r[1]-x[1];return A||r[0]-x[0]}function m(r){if(r.length===0)return null;for(var x=[],A=0;A<r.length;++A)x.push(r[A][0],r[A][1]);x.sort(a);for(var E=x[x.length>>1],P=[],S=[],C=[],A=0;A<r.length;++A){var M=r[A];M[1]<E?P.push(M):E<M[0]?S.push(M):C.push(M)}var I=C,G=C.slice();return I.sort(h),G.sort(c),new l(E,m(P),m(S),I,G)}function o(r){this.root=r}var t=o.prototype;t.insert=function(r){this.root?this.root.insert(r):this.root=new l(r[0],null,null,[r],[r])},t.remove=function(r){if(this.root){var x=this.root.remove(r);return x===s&&(this.root=null),x!==e}return!1},t.queryPoint=function(r,x){if(this.root)return this.root.queryPoint(r,x)},t.queryInterval=function(r,x,A){if(r<=x&&this.root)return this.root.queryInterval(r,x,A)},Object.defineProperty(t,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(t,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function i(r){return!r||r.length===0?new o(null):new o(m(r))}},{"binary-search-bounds":31}],235:[function(p,w,k){"use strict";function d(e){for(var u=new Array(e),s=0;s<e;++s)u[s]=s;return u}w.exports=d},{}],236:[function(p,w,k){w.exports=!0},{}],237:[function(p,w,k){w.exports=function(u){return u!=null&&(d(u)||e(u)||!!u._isBuffer)};function d(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function e(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&d(u.slice(0,0))}},{}],238:[function(p,w,k){"use strict";w.exports=u,w.exports.isMobile=u,w.exports.default=u;var d=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function u(s){s||(s={});var l=s.ua;if(!l&&typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var b=s.tablet?e.test(l):d.test(l);return!b&&s.tablet&&s.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(b=!0),b}},{}],239:[function(p,w,k){"use strict";w.exports=function(d){for(var e=d.length,u,s=0;s<e;s++)if(u=d.charCodeAt(s),(u<9||u>13)&&u!==32&&u!==133&&u!==160&&u!==5760&&u!==6158&&(u<8192||u>8205)&&u!==8232&&u!==8233&&u!==8239&&u!==8287&&u!==8288&&u!==12288&&u!==65279)return!1;return!0}},{}],240:[function(p,w,k){function d(e,u,s){return e*(1-s)+u*s}w.exports=d},{}],241:[function(p,w,k){var d=p("./normalize"),e=p("gl-mat4/create"),u=p("gl-mat4/clone"),s=p("gl-mat4/determinant"),l=p("gl-mat4/invert"),b=p("gl-mat4/transpose"),v={length:p("gl-vec3/length"),normalize:p("gl-vec3/normalize"),dot:p("gl-vec3/dot"),cross:p("gl-vec3/cross")},y=e(),T=e(),_=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];w.exports=function(m,o,t,i,r,x){if(o||(o=[0,0,0]),t||(t=[0,0,0]),i||(i=[0,0,0]),r||(r=[0,0,0,1]),x||(x=[0,0,0,1]),!d(y,m)||(u(T,y),T[3]=0,T[7]=0,T[11]=0,T[15]=1,Math.abs(s(T)<1e-8)))return!1;var A=y[3],E=y[7],P=y[11],S=y[12],C=y[13],M=y[14],I=y[15];if(A!==0||E!==0||P!==0){_[0]=A,_[1]=E,_[2]=P,_[3]=I;var G=l(T,T);if(!G)return!1;b(T,T),n(r,_,T)}else r[0]=r[1]=r[2]=0,r[3]=1;if(o[0]=S,o[1]=C,o[2]=M,a(f,y),t[0]=v.length(f[0]),v.normalize(f[0],f[0]),i[0]=v.dot(f[0],f[1]),h(f[1],f[1],f[0],1,-i[0]),t[1]=v.length(f[1]),v.normalize(f[1],f[1]),i[0]/=t[1],i[1]=v.dot(f[0],f[2]),h(f[2],f[2],f[0],1,-i[1]),i[2]=v.dot(f[1],f[2]),h(f[2],f[2],f[1],1,-i[2]),t[2]=v.length(f[2]),v.normalize(f[2],f[2]),i[1]/=t[2],i[2]/=t[2],v.cross(g,f[1],f[2]),v.dot(f[0],g)<0)for(var V=0;V<3;V++)t[V]*=-1,f[V][0]*=-1,f[V][1]*=-1,f[V][2]*=-1;return x[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),x[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),x[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),x[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(x[0]=-x[0]),f[0][2]>f[2][0]&&(x[1]=-x[1]),f[1][0]>f[0][1]&&(x[2]=-x[2]),!0};function n(c,m,o){var t=m[0],i=m[1],r=m[2],x=m[3];return c[0]=o[0]*t+o[4]*i+o[8]*r+o[12]*x,c[1]=o[1]*t+o[5]*i+o[9]*r+o[13]*x,c[2]=o[2]*t+o[6]*i+o[10]*r+o[14]*x,c[3]=o[3]*t+o[7]*i+o[11]*r+o[15]*x,c}function a(c,m){c[0][0]=m[0],c[0][1]=m[1],c[0][2]=m[2],c[1][0]=m[4],c[1][1]=m[5],c[1][2]=m[6],c[2][0]=m[8],c[2][1]=m[9],c[2][2]=m[10]}function h(c,m,o,t,i){c[0]=m[0]*t+o[0]*i,c[1]=m[1]*t+o[1]*i,c[2]=m[2]*t+o[2]*i}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(p,w,k){w.exports=function(e,u){var s=u[15];if(s===0)return!1;for(var l=1/s,b=0;b<16;b++)e[b]=u[b]*l;return!0}},{}],243:[function(p,w,k){var d=p("gl-vec3/lerp"),e=p("mat4-recompose"),u=p("mat4-decompose"),s=p("gl-mat4/determinant"),l=p("quat-slerp"),b=_(),v=_(),y=_();w.exports=T;function T(n,a,h,c){if(s(a)===0||s(h)===0)return!1;var m=u(a,b.translate,b.scale,b.skew,b.perspective,b.quaternion),o=u(h,v.translate,v.scale,v.skew,v.perspective,v.quaternion);return!m||!o?!1:(d(y.translate,b.translate,v.translate,c),d(y.skew,b.skew,v.skew,c),d(y.scale,b.scale,v.scale,c),d(y.perspective,b.perspective,v.perspective,c),l(y.quaternion,b.quaternion,v.quaternion,c),e(n,y.translate,y.scale,y.skew,y.perspective,y.quaternion),!0)}function _(){return{translate:f(),scale:f(1),skew:f(),perspective:g(),quaternion:g()}}function f(n){return[n||0,n||0,n||0]}function g(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(p,w,k){var d={identity:p("gl-mat4/identity"),translate:p("gl-mat4/translate"),multiply:p("gl-mat4/multiply"),create:p("gl-mat4/create"),scale:p("gl-mat4/scale"),fromRotationTranslation:p("gl-mat4/fromRotationTranslation")},e=d.create(),u=d.create();w.exports=function(l,b,v,y,T,_){return d.identity(l),d.fromRotationTranslation(l,_,b),l[3]=T[0],l[7]=T[1],l[11]=T[2],l[15]=T[3],d.identity(u),y[2]!==0&&(u[9]=y[2],d.multiply(l,l,u)),y[1]!==0&&(u[9]=0,u[8]=y[1],d.multiply(l,l,u)),y[0]!==0&&(u[8]=0,u[4]=y[0],d.multiply(l,l,u)),d.scale(l,l,v),l}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(p,w,k){"use strict";var d=p("binary-search-bounds"),e=p("mat4-interpolate"),u=p("gl-mat4/invert"),s=p("gl-mat4/rotateX"),l=p("gl-mat4/rotateY"),b=p("gl-mat4/rotateZ"),v=p("gl-mat4/lookAt"),y=p("gl-mat4/translate"),T=p("gl-mat4/scale"),_=p("gl-vec3/normalize"),f=[0,0,0];w.exports=h;function g(c){this._components=c.slice(),this._time=[0],this.prevMatrix=c.slice(),this.nextMatrix=c.slice(),this.computedMatrix=c.slice(),this.computedInverse=c.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var n=g.prototype;n.recalcMatrix=function(c){var m=this._time,o=d.le(m,c),t=this.computedMatrix;if(!(o<0)){var i=this._components;if(o===m.length-1)for(var r=16*o,x=0;x<16;++x)t[x]=i[r++];else{for(var A=m[o+1]-m[o],r=16*o,E=this.prevMatrix,P=!0,x=0;x<16;++x)E[x]=i[r++];for(var S=this.nextMatrix,x=0;x<16;++x)S[x]=i[r++],P=P&&E[x]===S[x];if(A<1e-6||P)for(var x=0;x<16;++x)t[x]=E[x];else e(t,E,S,(c-m[o])/A)}var C=this.computedUp;C[0]=t[1],C[1]=t[5],C[2]=t[9],_(C,C);var M=this.computedInverse;u(M,t);var I=this.computedEye,G=M[15];I[0]=M[12]/G,I[1]=M[13]/G,I[2]=M[14]/G;for(var V=this.computedCenter,q=Math.exp(this.computedRadius[0]),x=0;x<3;++x)V[x]=I[x]-t[2+4*x]*q}},n.idle=function(c){if(!(c<this.lastT())){for(var m=this._components,o=m.length-16,t=0;t<16;++t)m.push(m[o++]);this._time.push(c)}},n.flush=function(c){var m=d.gt(this._time,c)-2;m<0||(this._time.splice(0,m),this._components.splice(0,16*m))},n.lastT=function(){return this._time[this._time.length-1]},n.lookAt=function(c,m,o,t){this.recalcMatrix(c),m=m||this.computedEye,o=o||f,t=t||this.computedUp,this.setMatrix(c,v(this.computedMatrix,m,o,t));for(var i=0,r=0;r<3;++r)i+=Math.pow(o[r]-m[r],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},n.rotate=function(c,m,o,t){this.recalcMatrix(c);var i=this.computedInverse;m&&l(i,i,m),o&&s(i,i,o),t&&b(i,i,t),this.setMatrix(c,u(this.computedMatrix,i))};var a=[0,0,0];n.pan=function(c,m,o,t){a[0]=-(m||0),a[1]=-(o||0),a[2]=-(t||0),this.recalcMatrix(c);var i=this.computedInverse;y(i,i,a),this.setMatrix(c,u(i,i))},n.translate=function(c,m,o,t){a[0]=m||0,a[1]=o||0,a[2]=t||0,this.recalcMatrix(c);var i=this.computedMatrix;y(i,i,a),this.setMatrix(c,i)},n.setMatrix=function(c,m){if(!(c<this.lastT())){this._time.push(c);for(var o=0;o<16;++o)this._components.push(m[o])}},n.setDistance=function(c,m){this.computedRadius[0]=m},n.setDistanceLimits=function(c,m){var o=this._limits;o[0]=c,o[1]=m},n.getDistanceLimits=function(c){var m=this._limits;return c?(c[0]=m[0],c[1]=m[1],c):m};function h(c){c=c||{};var m=c.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new g(m)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(p,w,k){"use strict";w.exports=e;var d=p("robust-orientation")[3];function e(u){var s=u.length;if(s<3){for(var g=new Array(s),l=0;l<s;++l)g[l]=l;return s===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:g}for(var b=new Array(s),l=0;l<s;++l)b[l]=l;b.sort(function(c,m){var o=u[c][0]-u[m][0];return o||u[c][1]-u[m][1]});for(var v=[b[0],b[1]],y=[b[0],b[1]],l=2;l<s;++l){for(var T=b[l],_=u[T],f=v.length;f>1&&d(u[v[f-2]],u[v[f-1]],_)<=0;)f-=1,v.pop();for(v.push(T),f=y.length;f>1&&d(u[y[f-2]],u[y[f-1]],_)>=0;)f-=1,y.pop();y.push(T)}for(var g=new Array(y.length+v.length-2),n=0,l=0,a=v.length;l<a;++l)g[n++]=v[l];for(var h=y.length-2;h>0;--h)g[n++]=y[h];return g}},{"robust-orientation":284}],247:[function(p,w,k){"use strict";w.exports=e;var d=p("mouse-event");function e(u,s){s||(s=u,u=window);var l=0,b=0,v=0,y={shift:!1,alt:!1,control:!1,meta:!1},T=!1;function _(r){var x=!1;return"altKey"in r&&(x=x||r.altKey!==y.alt,y.alt=!!r.altKey),"shiftKey"in r&&(x=x||r.shiftKey!==y.shift,y.shift=!!r.shiftKey),"ctrlKey"in r&&(x=x||r.ctrlKey!==y.control,y.control=!!r.ctrlKey),"metaKey"in r&&(x=x||r.metaKey!==y.meta,y.meta=!!r.metaKey),x}function f(r,x){var A=d.x(x),E=d.y(x);"buttons"in x&&(r=x.buttons|0),(r!==l||A!==b||E!==v||_(x))&&(l=r|0,b=A||0,v=E||0,s&&s(l,b,v,y))}function g(r){f(0,r)}function n(){(l||b||v||y.shift||y.alt||y.meta||y.control)&&(b=v=0,l=0,y.shift=y.alt=y.control=y.meta=!1,s&&s(0,0,0,y))}function a(r){_(r)&&s&&s(l,b,v,y)}function h(r){d.buttons(r)===0?f(0,r):f(l,r)}function c(r){f(l|d.buttons(r),r)}function m(r){f(l&~d.buttons(r),r)}function o(){T||(T=!0,u.addEventListener("mousemove",h),u.addEventListener("mousedown",c),u.addEventListener("mouseup",m),u.addEventListener("mouseleave",g),u.addEventListener("mouseenter",g),u.addEventListener("mouseout",g),u.addEventListener("mouseover",g),u.addEventListener("blur",n),u.addEventListener("keyup",a),u.addEventListener("keydown",a),u.addEventListener("keypress",a),u!==window&&(window.addEventListener("blur",n),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}function t(){!T||(T=!1,u.removeEventListener("mousemove",h),u.removeEventListener("mousedown",c),u.removeEventListener("mouseup",m),u.removeEventListener("mouseleave",g),u.removeEventListener("mouseenter",g),u.removeEventListener("mouseout",g),u.removeEventListener("mouseover",g),u.removeEventListener("blur",n),u.removeEventListener("keyup",a),u.removeEventListener("keydown",a),u.removeEventListener("keypress",a),u!==window&&(window.removeEventListener("blur",n),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))}o();var i={element:u};return Object.defineProperties(i,{enabled:{get:function(){return T},set:function(r){r?o():t()},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return y},enumerable:!0}}),i}},{"mouse-event":249}],248:[function(p,w,k){var d={left:0,top:0};w.exports=e;function e(s,l,b){l=l||s.currentTarget||s.srcElement,Array.isArray(b)||(b=[0,0]);var v=s.clientX||0,y=s.clientY||0,T=u(l);return b[0]=v-T.left,b[1]=y-T.top,b}function u(s){return s===window||s===document||s===document.body?d:s.getBoundingClientRect()}},{}],249:[function(p,w,k){"use strict";function d(l){if(typeof l=="object"){if("buttons"in l)return l.buttons;if("which"in l){var b=l.which;if(b===2)return 4;if(b===3)return 2;if(b>0)return 1<<b-1}else if("button"in l){var b=l.button;if(b===1)return 4;if(b===2)return 2;if(b>=0)return 1<<b}}return 0}k.buttons=d;function e(l){return l.target||l.srcElement||window}k.element=e;function u(l){if(typeof l=="object"){if("offsetX"in l)return l.offsetX;var b=e(l),v=b.getBoundingClientRect();return l.clientX-v.left}return 0}k.x=u;function s(l){if(typeof l=="object"){if("offsetY"in l)return l.offsetY;var b=e(l),v=b.getBoundingClientRect();return l.clientY-v.top}return 0}k.y=s},{}],250:[function(p,w,k){"use strict";var d=p("to-px");w.exports=e;function e(u,s,l){typeof u=="function"&&(l=!!s,s=u,u=window);var b=d("ex",u),v=function(y){l&&y.preventDefault();var T=y.deltaX||0,_=y.deltaY||0,f=y.deltaZ||0,g=y.deltaMode,n=1;switch(g){case 1:n=b;break;case 2:n=window.innerHeight;break}if(T*=n,_*=n,f*=n,T||_||f)return s(T,_,f,y)};return u.addEventListener("wheel",v),v}},{"to-px":304}],251:[function(p,w,k){"use strict";var d=p("typedarray-pool");w.exports=s;var e={"false,0,1":function(b,v,y,T,_){return function(g,n,a,h){var c=g.shape[0]|0,m=g.shape[1]|0,o=g.data,t=g.offset|0,i=g.stride[0]|0,r=g.stride[1]|0,x=t,A,E=-i|0,P=0,S=-r|0,C=0,M=-i-r|0,I=0,G=i|0,V=r-i*c|0,q=0,ee=0,Q=0,U=2*c|0,O=T(U),Z=T(U),B=0,Y=0,j=-1,X=-1,H=0,K=-c|0,W=c|0,$=0,re=-c-1|0,de=c-1|0,ve=0,ue=0,ce=0;for(q=0;q<c;++q)O[B++]=y(o[x],n,a,h),x+=G;if(x+=V,m>0){if(ee=1,O[B++]=y(o[x],n,a,h),x+=G,c>0)for(q=1,A=o[x],Y=O[B]=y(A,n,a,h),H=O[B+j],$=O[B+K],ve=O[B+re],(Y!==H||Y!==$||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,H,$,ve,n,a,h),ue=Z[B]=Q++),B+=1,x+=G,q=2;q<c;++q)A=o[x],Y=O[B]=y(A,n,a,h),H=O[B+j],$=O[B+K],ve=O[B+re],(Y!==H||Y!==$||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,H,$,ve,n,a,h),ue=Z[B]=Q++,ve!==H&&v(Z[B+j],ue,I,P,ve,H,n,a,h)),B+=1,x+=G;for(x+=V,B=0,ce=j,j=X,X=ce,ce=K,K=W,W=ce,ce=re,re=de,de=ce,ee=2;ee<m;++ee){if(O[B++]=y(o[x],n,a,h),x+=G,c>0)for(q=1,A=o[x],Y=O[B]=y(A,n,a,h),H=O[B+j],$=O[B+K],ve=O[B+re],(Y!==H||Y!==$||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,H,$,ve,n,a,h),ue=Z[B]=Q++,ve!==$&&v(Z[B+K],ue,C,I,$,ve,n,a,h)),B+=1,x+=G,q=2;q<c;++q)A=o[x],Y=O[B]=y(A,n,a,h),H=O[B+j],$=O[B+K],ve=O[B+re],(Y!==H||Y!==$||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,H,$,ve,n,a,h),ue=Z[B]=Q++,ve!==$&&v(Z[B+K],ue,C,I,$,ve,n,a,h),ve!==H&&v(Z[B+j],ue,I,P,ve,H,n,a,h)),B+=1,x+=G;ee&1&&(B=0),ce=j,j=X,X=ce,ce=K,K=W,W=ce,ce=re,re=de,de=ce,x+=V}}_(Z),_(O)}},"false,1,0":function(b,v,y,T,_){return function(g,n,a,h){var c=g.shape[0]|0,m=g.shape[1]|0,o=g.data,t=g.offset|0,i=g.stride[0]|0,r=g.stride[1]|0,x=t,A,E=-i|0,P=0,S=-r|0,C=0,M=-i-r|0,I=0,G=r|0,V=i-r*m|0,q=0,ee=0,Q=0,U=2*m|0,O=T(U),Z=T(U),B=0,Y=0,j=-1,X=-1,H=0,K=-m|0,W=m|0,$=0,re=-m-1|0,de=m-1|0,ve=0,ue=0,ce=0;for(ee=0;ee<m;++ee)O[B++]=y(o[x],n,a,h),x+=G;if(x+=V,c>0){if(q=1,O[B++]=y(o[x],n,a,h),x+=G,m>0)for(ee=1,A=o[x],Y=O[B]=y(A,n,a,h),$=O[B+K],H=O[B+j],ve=O[B+re],(Y!==$||Y!==H||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,$,H,ve,n,a,h),ue=Z[B]=Q++),B+=1,x+=G,ee=2;ee<m;++ee)A=o[x],Y=O[B]=y(A,n,a,h),$=O[B+K],H=O[B+j],ve=O[B+re],(Y!==$||Y!==H||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,$,H,ve,n,a,h),ue=Z[B]=Q++,ve!==H&&v(Z[B+j],ue,C,I,H,ve,n,a,h)),B+=1,x+=G;for(x+=V,B=0,ce=K,K=W,W=ce,ce=j,j=X,X=ce,ce=re,re=de,de=ce,q=2;q<c;++q){if(O[B++]=y(o[x],n,a,h),x+=G,m>0)for(ee=1,A=o[x],Y=O[B]=y(A,n,a,h),$=O[B+K],H=O[B+j],ve=O[B+re],(Y!==$||Y!==H||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,$,H,ve,n,a,h),ue=Z[B]=Q++,ve!==$&&v(Z[B+K],ue,I,P,ve,$,n,a,h)),B+=1,x+=G,ee=2;ee<m;++ee)A=o[x],Y=O[B]=y(A,n,a,h),$=O[B+K],H=O[B+j],ve=O[B+re],(Y!==$||Y!==H||Y!==ve)&&(P=o[x+E],C=o[x+S],I=o[x+M],b(q,ee,A,P,C,I,Y,$,H,ve,n,a,h),ue=Z[B]=Q++,ve!==H&&v(Z[B+j],ue,C,I,H,ve,n,a,h),ve!==$&&v(Z[B+K],ue,I,P,ve,$,n,a,h)),B+=1,x+=G;q&1&&(B=0),ce=K,K=W,W=ce,ce=j,j=X,X=ce,ce=re,re=de,de=ce,x+=V}}_(Z),_(O)}}};function u(l,b,v,y,T,_){var f=[_,T].join(","),g=e[f];return g(l,b,v,d.mallocUint32,d.freeUint32)}function s(l){function b(n){throw new Error("ndarray-extract-contour: "+n)}typeof l!="object"&&b("Must specify arguments");var v=l.order;Array.isArray(v)||b("Must specify order");var y=l.arrayArguments||1;y<1&&b("Must have at least one array argument");var T=l.scalarArguments||0;T<0&&b("Scalar arg count must be > 0"),typeof l.vertex!="function"&&b("Must specify vertex creation function"),typeof l.cell!="function"&&b("Must specify cell creation function"),typeof l.phase!="function"&&b("Must specify phase function");for(var _=l.getters||[],f=new Array(y),g=0;g<y;++g)_.indexOf(g)>=0?f[g]=!0:f[g]=!1;return u(l.vertex,l.cell,l.phase,T,v,f)}},{"typedarray-pool":308}],252:[function(p,w,k){"use strict";var d=p("dup"),e={zero:function(h,c,m,o){var t=h[0],i=m[0];o|=0;var r=0,x=i;for(r=0;r<t;++r)c[o]=0,o+=x},fdTemplate1:function(h,c,m,o,t,i,r){var x=h[0],A=m[0],E=i[0],P=-1*A,S=A;o|=0,r|=0;var C=0,M=A,I=E;for(C=0;C<x;++C)t[r]=.5*(c[o+P]-c[o+S]),o+=M,r+=I},fdTemplate2:function(h,c,m,o,t,i,r,x,A,E){var P=h[0],S=h[1],C=m[0],M=m[1],I=i[0],G=i[1],V=A[0],q=A[1],ee=-1*C,Q=C,U=-1*M,O=M;o|=0,r|=0,E|=0;var Z=0,B=0,Y=M,j=C-S*M,X=G,H=I-S*G,K=q,W=V-S*q;for(B=0;B<P;++B){for(Z=0;Z<S;++Z)t[r]=.5*(c[o+ee]-c[o+Q]),x[E]=.5*(c[o+U]-c[o+O]),o+=Y,r+=X,E+=K;o+=j,r+=H,E+=W}}},u={cdiff:function(h){var c={};return function(o,t,i){var r=o.dtype,x=o.order,A=t.dtype,E=t.order,P=i.dtype,S=i.order,C=[r,x.join(),A,E.join(),P,S.join()].join(),M=c[C];return M||(c[C]=M=h([r,x,A,E,P,S])),M(o.shape.slice(0),o.data,o.stride,o.offset|0,t.data,t.stride,t.offset|0,i.data,i.stride,i.offset|0)}},zero:function(h){var c={};return function(o){var t=o.dtype,i=o.order,r=[t,i.join()].join(),x=c[r];return x||(c[r]=x=h([t,i])),x(o.shape.slice(0),o.data,o.stride,o.offset|0)}},fdTemplate1:function(h){var c={};return function(o,t){var i=o.dtype,r=o.order,x=t.dtype,A=t.order,E=[i,r.join(),x,A.join()].join(),P=c[E];return P||(c[E]=P=h([i,r,x,A])),P(o.shape.slice(0),o.data,o.stride,o.offset|0,t.data,t.stride,t.offset|0)}},fdTemplate2:function(h){var c={};return function(o,t,i){var r=o.dtype,x=o.order,A=t.dtype,E=t.order,P=i.dtype,S=i.order,C=[r,x.join(),A,E.join(),P,S.join()].join(),M=c[C];return M||(c[C]=M=h([r,x,A,E,P,S])),M(o.shape.slice(0),o.data,o.stride,o.offset|0,t.data,t.stride,t.offset|0,i.data,i.stride,i.offset|0)}}};function s(h){var c=u[h.funcName];return c(l.bind(void 0,h))}function l(h){return e[h.funcName]}function b(h){return s({funcName:h.funcName})}var v={},y={},T={body:"",args:[],thisVars:[],localVars:[]},_=b({funcName:"cdiff"}),f=b({funcName:"zero"});function g(h){return h in v?v[h]:v[h]=b({funcName:"fdTemplate"+h})}function n(h,c,m,o){return function(t,i){var r=i.shape.slice();return r[0]>2&&r[1]>2&&o(i.pick(-1,-1).lo(1,1).hi(r[0]-2,r[1]-2),t.pick(-1,-1,0).lo(1,1).hi(r[0]-2,r[1]-2),t.pick(-1,-1,1).lo(1,1).hi(r[0]-2,r[1]-2)),r[1]>2&&(m(i.pick(0,-1).lo(1).hi(r[1]-2),t.pick(0,-1,1).lo(1).hi(r[1]-2)),c(t.pick(0,-1,0).lo(1).hi(r[1]-2))),r[1]>2&&(m(i.pick(r[0]-1,-1).lo(1).hi(r[1]-2),t.pick(r[0]-1,-1,1).lo(1).hi(r[1]-2)),c(t.pick(r[0]-1,-1,0).lo(1).hi(r[1]-2))),r[0]>2&&(m(i.pick(-1,0).lo(1).hi(r[0]-2),t.pick(-1,0,0).lo(1).hi(r[0]-2)),c(t.pick(-1,0,1).lo(1).hi(r[0]-2))),r[0]>2&&(m(i.pick(-1,r[1]-1).lo(1).hi(r[0]-2),t.pick(-1,r[1]-1,0).lo(1).hi(r[0]-2)),c(t.pick(-1,r[1]-1,1).lo(1).hi(r[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(r[0]-1,0,0,0),t.set(r[0]-1,0,1,0),t.set(0,r[1]-1,0,0),t.set(0,r[1]-1,1,0),t.set(r[0]-1,r[1]-1,0,0),t.set(r[0]-1,r[1]-1,1,0),t}}function a(h){var c=h.join(),r=y[c];if(r)return r;for(var m=h.length,o=[_,f],t=1;t<=m;++t)o.push(g(t));var i=n,r=i.apply(void 0,o);return y[c]=r,r}w.exports=function(c,m,o){if(Array.isArray(o)||(typeof o=="string"?o=d(m.dimension,o):o=d(m.dimension,"clamp")),m.size===0)return c;if(m.dimension===0)return c.set(0),c;var t=a(o);return t(c,m)}},{dup:65}],253:[function(p,w,k){"use strict";function d(b,v){var y=Math.floor(v),T=v-y,_=0<=y&&y<b.shape[0],f=0<=y+1&&y+1<b.shape[0],g=_?+b.get(y):0,n=f?+b.get(y+1):0;return(1-T)*g+T*n}function e(b,v,y){var T=Math.floor(v),_=v-T,f=0<=T&&T<b.shape[0],g=0<=T+1&&T+1<b.shape[0],n=Math.floor(y),a=y-n,h=0<=n&&n<b.shape[1],c=0<=n+1&&n+1<b.shape[1],m=f&&h?b.get(T,n):0,o=f&&c?b.get(T,n+1):0,t=g&&h?b.get(T+1,n):0,i=g&&c?b.get(T+1,n+1):0;return(1-a)*((1-_)*m+_*t)+a*((1-_)*o+_*i)}function u(b,v,y,T){var _=Math.floor(v),f=v-_,g=0<=_&&_<b.shape[0],n=0<=_+1&&_+1<b.shape[0],a=Math.floor(y),h=y-a,c=0<=a&&a<b.shape[1],m=0<=a+1&&a+1<b.shape[1],o=Math.floor(T),t=T-o,i=0<=o&&o<b.shape[2],r=0<=o+1&&o+1<b.shape[2],x=g&&c&&i?b.get(_,a,o):0,A=g&&m&&i?b.get(_,a+1,o):0,E=n&&c&&i?b.get(_+1,a,o):0,P=n&&m&&i?b.get(_+1,a+1,o):0,S=g&&c&&r?b.get(_,a,o+1):0,C=g&&m&&r?b.get(_,a+1,o+1):0,M=n&&c&&r?b.get(_+1,a,o+1):0,I=n&&m&&r?b.get(_+1,a+1,o+1):0;return(1-t)*((1-h)*((1-f)*x+f*E)+h*((1-f)*A+f*P))+t*((1-h)*((1-f)*S+f*M)+h*((1-f)*C+f*I))}function s(b){var v=b.shape.length|0,y=new Array(v),T=new Array(v),_=new Array(v),f=new Array(v),g,n;for(g=0;g<v;++g)n=+arguments[g+1],y[g]=Math.floor(n),T[g]=n-y[g],_[g]=0<=y[g]&&y[g]<b.shape[g],f[g]=0<=y[g]+1&&y[g]+1<b.shape[g];var a=0,h,c,m;e:for(g=0;g<1<<v;++g){for(c=1,m=b.offset,h=0;h<v;++h)if(g&1<<h){if(!f[h])continue e;c*=T[h],m+=b.stride[h]*(y[h]+1)}else{if(!_[h])continue e;c*=1-T[h],m+=b.stride[h]*y[h]}a+=c*b.data[m]}return a}function l(b,v,y,T){switch(b.shape.length){case 0:return 0;case 1:return d(b,v);case 2:return e(b,v,y);case 3:return u(b,v,y,T);default:return s.apply(void 0,arguments)}}w.exports=l,w.exports.d1=d,w.exports.d2=e,w.exports.d3=u},{}],254:[function(p,w,k){"use strict";var d={"float64,2,1,0":function(){return function(T,_,f,g,n){var a=T[0],h=T[1],c=T[2],m=f[0],o=f[1],t=f[2];g|=0;var i=0,r=0,x=0,A=t,E=o-c*t,P=m-h*o;for(x=0;x<a;++x){for(r=0;r<h;++r){for(i=0;i<c;++i)_[g]/=n,g+=A;g+=E}g+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(T,_,f,g,n,a,h,c){var m=T[0],o=T[1],t=T[2],i=f[0],r=f[1],x=f[2],A=a[0],E=a[1],P=a[2];g|=0,h|=0;for(var S=g,C=h,M=T[0]|0;M>0;){M<64?(m=M,M=0):(m=64,M-=64);for(var I=T[1]|0;I>0;){I<64?(o=I,I=0):(o=64,I-=64),g=S+M*i+I*r,h=C+M*A+I*E;var G=0,V=0,q=0,ee=x,Q=i-t*x,U=r-m*i,O=P,Z=A-t*P,B=E-m*A;for(q=0;q<o;++q){for(V=0;V<m;++V){for(G=0;G<t;++G)_[g]=n[h]*c,g+=ee,h+=O;g+=Q,h+=Z}g+=U,h+=B}}}}},"float32,1,0,float32,1,0":function(){return function(T,_,f,g,n,a,h){var c=T[0],m=T[1],o=f[0],t=f[1],i=a[0],r=a[1];g|=0,h|=0;var x=0,A=0,E=t,P=o-m*t,S=r,C=i-m*r;for(A=0;A<c;++A){for(x=0;x<m;++x)_[g]=n[h],g+=E,h+=S;g+=P,h+=C}}},"float32,1,0,float32,0,1":function(){return function(T,_,f,g,n,a,h){var c=T[0],m=T[1],o=f[0],t=f[1],i=a[0],r=a[1];g|=0,h|=0;for(var x=g,A=h,E=T[1]|0;E>0;){E<64?(m=E,E=0):(m=64,E-=64);for(var P=T[0]|0;P>0;){P<64?(c=P,P=0):(c=64,P-=64),g=x+E*t+P*o,h=A+E*r+P*i;var S=0,C=0,M=t,I=o-m*t,G=r,V=i-m*r;for(C=0;C<c;++C){for(S=0;S<m;++S)_[g]=n[h],g+=M,h+=G;g+=I,h+=V}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(T,_,f,g,n,a,h){var c=T[0],m=T[1],o=T[2],t=f[0],i=f[1],r=f[2],x=a[0],A=a[1],E=a[2];g|=0,h|=0;for(var P=g,S=h,C=T[2]|0;C>0;){C<64?(o=C,C=0):(o=64,C-=64);for(var M=T[0]|0;M>0;){M<64?(c=M,M=0):(c=64,M-=64);for(var I=T[1]|0;I>0;){I<64?(m=I,I=0):(m=64,I-=64),g=P+C*r+M*t+I*i,h=S+C*E+M*x+I*A;var G=0,V=0,q=0,ee=r,Q=t-o*r,U=i-c*t,O=E,Z=x-o*E,B=A-c*x;for(q=0;q<m;++q){for(V=0;V<c;++V){for(G=0;G<o;++G)_[g]=n[h],g+=ee,h+=O;g+=Q,h+=Z}g+=U,h+=B}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(T,_,f,g,n,a,h){var c=T[0],m=T[1],o=T[2],t=f[0],i=f[1],r=f[2],x=a[0],A=a[1],E=a[2];g|=0,h|=0;var P=0,S=0,C=0,M=r,I=t-o*r,G=i-c*t,V=E,q=x-o*E,ee=A-c*x;for(C=0;C<m;++C){for(S=0;S<c;++S){for(P=0;P<o;++P)_[g]=n[h],g+=M,h+=V;g+=I,h+=q}g+=G,h+=ee}}}};function e(y,T){var _=T.join(","),f=d[_];return f()}var u=e,s={mul:function(y){var T={};return function(f,g,n){var a=f.dtype,h=f.order,c=g.dtype,m=g.order,o=n.dtype,t=n.order,i=[a,h.join(),c,m.join(),o,t.join()].join(),r=T[i];return r||(T[i]=r=y([a,h,c,m,o,t])),r(f.shape.slice(0),f.data,f.stride,f.offset|0,g.data,g.stride,g.offset|0,n.data,n.stride,n.offset|0)}},muls:function(y){var T={};return function(f,g,n){var a=f.dtype,h=f.order,c=g.dtype,m=g.order,o=[a,h.join(),c,m.join()].join(),t=T[o];return t||(T[o]=t=y([a,h,c,m])),t(f.shape.slice(0),f.data,f.stride,f.offset|0,g.data,g.stride,g.offset|0,n)}},mulseq:function(y){var T={};return function(f,g){var n=f.dtype,a=f.order,h=[n,a.join()].join(),c=T[h];return c||(T[h]=c=y([n,a])),c(f.shape.slice(0),f.data,f.stride,f.offset|0,g)}},div:function(y){var T={};return function(f,g,n){var a=f.dtype,h=f.order,c=g.dtype,m=g.order,o=n.dtype,t=n.order,i=[a,h.join(),c,m.join(),o,t.join()].join(),r=T[i];return r||(T[i]=r=y([a,h,c,m,o,t])),r(f.shape.slice(0),f.data,f.stride,f.offset|0,g.data,g.stride,g.offset|0,n.data,n.stride,n.offset|0)}},divs:function(y){var T={};return function(f,g,n){var a=f.dtype,h=f.order,c=g.dtype,m=g.order,o=[a,h.join(),c,m.join()].join(),t=T[o];return t||(T[o]=t=y([a,h,c,m])),t(f.shape.slice(0),f.data,f.stride,f.offset|0,g.data,g.stride,g.offset|0,n)}},divseq:function(y){var T={};return function(f,g){var n=f.dtype,a=f.order,h=[n,a.join()].join(),c=T[h];return c||(T[h]=c=y([n,a])),c(f.shape.slice(0),f.data,f.stride,f.offset|0,g)}},assign:function(y){var T={};return function(f,g){var n=f.dtype,a=f.order,h=g.dtype,c=g.order,m=[n,a.join(),h,c.join()].join(),o=T[m];return o||(T[m]=o=y([n,a,h,c])),o(f.shape.slice(0),f.data,f.stride,f.offset|0,g.data,g.stride,g.offset|0)}}};function l(y){var T=s[y.funcName];return T(u.bind(void 0,y))}function b(y){return l({funcName:y.funcName})}var v={mul:"*",div:"/"};(function(){for(var y in v)k[y]=b({funcName:y}),k[y+"s"]=b({funcName:y+"s"}),k[y+"seq"]=b({funcName:y+"seq"})})(),k.assign=b({funcName:"assign"})},{}],255:[function(p,w,k){"use strict";var d=p("ndarray"),e=p("./doConvert.js");w.exports=function(s,l){for(var b=[],v=s,y=1;Array.isArray(v);)b.push(v.length),y*=v.length,v=v[0];return b.length===0?d():(l||(l=d(new Float64Array(y),b)),e(l,s),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(p,w,k){"use strict";function d(){return function(v,y,T,_,f){var g=v[0],n=v[1],a=v[2],h=T[0],c=T[1],m=T[2],o=[0,0,0];_|=0;var t=0,i=0,r=0,x=m,A=c-a*m,E=h-n*c;for(r=0;r<g;++r){for(i=0;i<n;++i){for(t=0;t<a;++t){{var P=f,S;for(S=0;S<o.length-1;++S)P=P[o[S]];y[_]=P[o[o.length-1]]}_+=x,++o[2]}_+=A,o[2]-=a,++o[1]}_+=E,o[1]-=n,++o[0]}}}function e(){return d()}var u=e;function s(v){var y={};return function(_,f){var g=_.dtype,n=_.order,a=[g,n.join()].join(),h=y[a];return h||(y[a]=h=v([g,n])),h(_.shape.slice(0),_.data,_.stride,_.offset|0,f)}}function l(v){return s(u.bind(void 0,v))}function b(v){return l({funcName:v.funcName})}w.exports=b({funcName:"convert"})},{}],257:[function(p,w,k){"use strict";var d=p("typedarray-pool");function e(T){switch(T){case"uint32":return[d.mallocUint32,d.freeUint32];default:return null}}var u={"uint32,1,0":function(T,_){return function(g,n,a,h,c,m,o,t,i,r,x){var A,E,P,S=g*c+h,C,M=T(t),I,G,V,q;for(A=g+1;A<=n;++A){for(E=A,S+=c,P=S,I=0,G=S,C=0;C<t;++C)M[I++]=a[G],G+=i;e:for(;E-- >g;){I=0,G=P-c;t:for(C=0;C<t;++C){if(V=a[G],q=M[I],V<q)break e;if(V>q)break t;G+=r,I+=x}for(I=P,G=P-c,C=0;C<t;++C)a[I]=a[G],I+=i,G+=i;P-=c}for(I=P,G=0,C=0;C<t;++C)a[I]=M[G++],I+=i}_(M)}}};function s(T,_){var f=e(_),g=[_,T].join(","),n=u[g];return f?n(f[0],f[1]):n()}var l={"uint32,1,0":function(T,_,f){return function g(n,a,h,c,m,o,t,i,r,x,A){var E=(a-n+1)/6|0,P=n+E,S=a-E,C=n+a>>1,M=C-E,I=C+E,G=P,V=M,q=C,ee=I,Q=S,U=n+1,O=a-1,Z=!0,B,Y,j,X,H,K,W,$,re,de=0,ve=0,ue=0,ce,_e,fe,ne,ie,me,we,be,Me,Ie,Ke,Oe,We,Fe,Ge,Xe,ut=i,rt=_(ut),dt=_(ut);_e=m*G,fe=m*V,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=G,G=V,V=Y;break e}if(ue<0)break e;Xe+=x}_e=m*ee,fe=m*Q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=ee,ee=Q,Q=Y;break e}if(ue<0)break e;Xe+=x}_e=m*G,fe=m*q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=G,G=q,q=Y;break e}if(ue<0)break e;Xe+=x}_e=m*V,fe=m*q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=V,V=q,q=Y;break e}if(ue<0)break e;Xe+=x}_e=m*G,fe=m*ee,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=G,G=ee,ee=Y;break e}if(ue<0)break e;Xe+=x}_e=m*q,fe=m*ee,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=q,q=ee,ee=Y;break e}if(ue<0)break e;Xe+=x}_e=m*V,fe=m*Q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=V,V=Q,Q=Y;break e}if(ue<0)break e;Xe+=x}_e=m*V,fe=m*q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=V,V=q,q=Y;break e}if(ue<0)break e;Xe+=x}_e=m*ee,fe=m*Q,Xe=c;e:for(ce=0;ce<i;++ce){if(W=_e+Xe,$=fe+Xe,ue=h[W]-h[$],ue>0){Y=ee,ee=Q,Q=Y;break e}if(ue<0)break e;Xe+=x}for(_e=m*G,fe=m*V,ne=m*q,ie=m*ee,me=m*Q,we=m*P,be=m*C,Me=m*S,Ge=0,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,re=ne+Xe,Ie=ie+Xe,Ke=me+Xe,Oe=we+Xe,We=be+Xe,Fe=Me+Xe,rt[Ge]=h[$],dt[Ge]=h[Ie],Z=Z&&rt[Ge]===dt[Ge],j=h[W],X=h[re],H=h[Ke],h[Oe]=j,h[We]=X,h[Fe]=H,++Ge,Xe+=r;for(_e=m*M,fe=m*n,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,h[W]=h[$],Xe+=r;for(_e=m*I,fe=m*a,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,h[W]=h[$],Xe+=r;if(Z)for(K=U;K<=O;++K){W=c+K*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-rt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue!==0)if(ue<0){if(K!==U)for(_e=m*K,fe=m*U,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;++U}else for(;;){W=c+O*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-rt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue>0)O--;else if(ue<0){for(_e=m*K,fe=m*U,ne=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,re=ne+Xe,B=h[W],h[W]=h[$],h[$]=h[re],h[re]=B,Xe+=r;++U,--O;break}else{for(_e=m*K,fe=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;--O;break}}}else for(K=U;K<=O;++K){W=c+K*m,Ge=0;e:for(ce=0;ce<i;++ce){if(de=h[W]-rt[Ge],de!==0)break e;Ge+=A,W+=x}if(de<0){if(K!==U)for(_e=m*K,fe=m*U,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;++U}else{W=c+K*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ve=h[W]-dt[Ge],ve!==0)break e;Ge+=A,W+=x}if(ve>0)for(;;){W=c+O*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-dt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue>0){if(--O<K)break;continue}else{W=c+O*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-rt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue<0){for(_e=m*K,fe=m*U,ne=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,re=ne+Xe,B=h[W],h[W]=h[$],h[$]=h[re],h[re]=B,Xe+=r;++U,--O}else{for(_e=m*K,fe=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;--O}break}}}}for(_e=m*n,fe=m*(U-1),Ge=0,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,h[W]=h[$],h[$]=rt[Ge],++Ge,Xe+=r;for(_e=m*a,fe=m*(O+1),Ge=0,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,h[W]=h[$],h[$]=dt[Ge],++Ge,Xe+=r;if(U-2-n<=32?T(n,U-2,h,c,m,o,t,i,r,x,A):g(n,U-2,h,c,m,o,t,i,r,x,A),a-(O+2)<=32?T(O+2,a,h,c,m,o,t,i,r,x,A):g(O+2,a,h,c,m,o,t,i,r,x,A),Z){f(rt),f(dt);return}if(U<P&&O>S){e:for(;;){for(W=c+U*m,Ge=0,Xe=c,ce=0;ce<i;++ce){if(h[W]!==rt[Ge])break e;++Ge,W+=r}++U}e:for(;;){for(W=c+O*m,Ge=0,Xe=c,ce=0;ce<i;++ce){if(h[W]!==dt[Ge])break e;++Ge,W+=r}--O}for(K=U;K<=O;++K){W=c+K*m,Ge=0;e:for(ce=0;ce<i;++ce){if(de=h[W]-rt[Ge],de!==0)break e;Ge+=A,W+=x}if(de===0){if(K!==U)for(_e=m*K,fe=m*U,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;++U}else{W=c+K*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ve=h[W]-dt[Ge],ve!==0)break e;Ge+=A,W+=x}if(ve===0)for(;;){W=c+O*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-dt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue===0){if(--O<K)break;continue}else{W=c+O*m,Ge=0;e:for(ce=0;ce<i;++ce){if(ue=h[W]-rt[Ge],ue!==0)break e;Ge+=A,W+=x}if(ue<0){for(_e=m*K,fe=m*U,ne=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,re=ne+Xe,B=h[W],h[W]=h[$],h[$]=h[re],h[re]=B,Xe+=r;++U,--O}else{for(_e=m*K,fe=m*O,Xe=c,ce=0;ce<i;++ce)W=_e+Xe,$=fe+Xe,B=h[W],h[W]=h[$],h[$]=B,Xe+=r;--O}break}}}}}f(rt),f(dt),O-U<=32?T(U,O,h,c,m,o,t,i,r,x,A):g(U,O,h,c,m,o,t,i,r,x,A)}}};function b(T,_,f){var g=e(_),n=[_,T].join(","),a=l[n];return T.length>1&&g?a(f,g[0],g[1]):a(f)}var v={"uint32,1,0":function(T,_){return function(f){var g=f.data,n=f.offset|0,a=f.shape,h=f.stride,c=h[0]|0,m=a[0]|0,o=h[1]|0,t=a[1]|0,i=o,r=o,x=1;m<=32?T(0,m-1,g,n,c,o,m,t,i,r,x):_(0,m-1,g,n,c,o,m,t,i,r,x)}}};function y(T,_){var f=[_,T].join(","),g=v[f],n=s(T,_),a=b(T,_,n);return g(n,a)}w.exports=y},{"typedarray-pool":308}],258:[function(p,w,k){"use strict";var d=p("./lib/compile_sort.js"),e={};function u(s){var l=s.order,b=s.dtype,v=[l,b],y=v.join(":"),T=e[y];return T||(e[y]=T=d(l,b)),T(s),s}w.exports=u},{"./lib/compile_sort.js":257}],259:[function(p,w,k){var d=p("is-buffer"),e=typeof Float64Array<"u";function u(_,f){return _[0]-f[0]}function s(){var _=this.stride,f=new Array(_.length),g;for(g=0;g<f.length;++g)f[g]=[Math.abs(_[g]),g];f.sort(u);var n=new Array(f.length);for(g=0;g<n.length;++g)n[g]=f[g][1];return n}var l={T:function(_){function f(n){this.data=n}var g=f.prototype;return g.dtype=_,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new f(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(a){return new f(a)}},0:function(_,f){function g(a,h){this.data=a,this.offset=h}var n=g.prototype;return n.dtype=_,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new g(this.data,this.offset)},n.pick=function(){return f(this.data)},n.valueOf=n.get=function(){return _==="generic"?this.data.get(this.offset):this.data[this.offset]},n.set=function(h){return _==="generic"?this.data.set(this.offset,h):this.data[this.offset]=h},function(h,c,m,o){return new g(h,o)}},1:function(_,f,g){function n(h,c,m,o){this.data=h,this.shape=[c],this.stride=[m],this.offset=o|0}var a=n.prototype;return a.dtype=_,a.dimension=1,Object.defineProperty(a,"size",{get:function(){return this.shape[0]}}),a.order=[0],a.set=function(c,m){return _==="generic"?this.data.set(this.offset+this.stride[0]*c,m):this.data[this.offset+this.stride[0]*c]=m},a.get=function(c){return _==="generic"?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},a.index=function(c){return this.offset+this.stride[0]*c},a.hi=function(c){return new n(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,this.stride[0],this.offset)},a.lo=function(c){var m=this.offset,o=0,t=this.shape[0],i=this.stride[0];return typeof c=="number"&&c>=0&&(o=c|0,m+=i*o,t-=o),new n(this.data,t,i,m)},a.step=function(c){var m=this.shape[0],o=this.stride[0],t=this.offset,i=0,r=Math.ceil;return typeof c=="number"&&(i=c|0,i<0?(t+=o*(m-1),m=r(-m/i)):m=r(m/i),o*=i),new n(this.data,m,o,t)},a.transpose=function(c){c=c===void 0?0:c|0;var m=this.shape,o=this.stride;return new n(this.data,m[c],o[c],this.offset)},a.pick=function(c){var m=[],o=[],t=this.offset;typeof c=="number"&&c>=0?t=t+this.stride[0]*c|0:(m.push(this.shape[0]),o.push(this.stride[0]));var i=f[m.length+1];return i(this.data,m,o,t)},function(c,m,o,t){return new n(c,m[0],o[0],t)}},2:function(_,f,g){function n(h,c,m,o,t,i){this.data=h,this.shape=[c,m],this.stride=[o,t],this.offset=i|0}var a=n.prototype;return a.dtype=_,a.dimension=2,Object.defineProperty(a,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(a,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),a.set=function(c,m,o){return _==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*m,o):this.data[this.offset+this.stride[0]*c+this.stride[1]*m]=o},a.get=function(c,m){return _==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*m):this.data[this.offset+this.stride[0]*c+this.stride[1]*m]},a.index=function(c,m){return this.offset+this.stride[0]*c+this.stride[1]*m},a.hi=function(c,m){return new n(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof m!="number"||m<0?this.shape[1]:m|0,this.stride[0],this.stride[1],this.offset)},a.lo=function(c,m){var o=this.offset,t=0,i=this.shape[0],r=this.shape[1],x=this.stride[0],A=this.stride[1];return typeof c=="number"&&c>=0&&(t=c|0,o+=x*t,i-=t),typeof m=="number"&&m>=0&&(t=m|0,o+=A*t,r-=t),new n(this.data,i,r,x,A,o)},a.step=function(c,m){var o=this.shape[0],t=this.shape[1],i=this.stride[0],r=this.stride[1],x=this.offset,A=0,E=Math.ceil;return typeof c=="number"&&(A=c|0,A<0?(x+=i*(o-1),o=E(-o/A)):o=E(o/A),i*=A),typeof m=="number"&&(A=m|0,A<0?(x+=r*(t-1),t=E(-t/A)):t=E(t/A),r*=A),new n(this.data,o,t,i,r,x)},a.transpose=function(c,m){c=c===void 0?0:c|0,m=m===void 0?1:m|0;var o=this.shape,t=this.stride;return new n(this.data,o[c],o[m],t[c],t[m],this.offset)},a.pick=function(c,m){var o=[],t=[],i=this.offset;typeof c=="number"&&c>=0?i=i+this.stride[0]*c|0:(o.push(this.shape[0]),t.push(this.stride[0])),typeof m=="number"&&m>=0?i=i+this.stride[1]*m|0:(o.push(this.shape[1]),t.push(this.stride[1]));var r=f[o.length+1];return r(this.data,o,t,i)},function(c,m,o,t){return new n(c,m[0],m[1],o[0],o[1],t)}},3:function(_,f,g){function n(h,c,m,o,t,i,r,x){this.data=h,this.shape=[c,m,o],this.stride=[t,i,r],this.offset=x|0}var a=n.prototype;return a.dtype=_,a.dimension=3,Object.defineProperty(a,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(a,"order",{get:function(){var c=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),o=Math.abs(this.stride[2]);return c>m?m>o?[2,1,0]:c>o?[1,2,0]:[1,0,2]:c>o?[2,0,1]:o>m?[0,1,2]:[0,2,1]}}),a.set=function(c,m,o,t){return _==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o,t):this.data[this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o]=t},a.get=function(c,m,o){return _==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o):this.data[this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o]},a.index=function(c,m,o){return this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o},a.hi=function(c,m,o){return new n(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof m!="number"||m<0?this.shape[1]:m|0,typeof o!="number"||o<0?this.shape[2]:o|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},a.lo=function(c,m,o){var t=this.offset,i=0,r=this.shape[0],x=this.shape[1],A=this.shape[2],E=this.stride[0],P=this.stride[1],S=this.stride[2];return typeof c=="number"&&c>=0&&(i=c|0,t+=E*i,r-=i),typeof m=="number"&&m>=0&&(i=m|0,t+=P*i,x-=i),typeof o=="number"&&o>=0&&(i=o|0,t+=S*i,A-=i),new n(this.data,r,x,A,E,P,S,t)},a.step=function(c,m,o){var t=this.shape[0],i=this.shape[1],r=this.shape[2],x=this.stride[0],A=this.stride[1],E=this.stride[2],P=this.offset,S=0,C=Math.ceil;return typeof c=="number"&&(S=c|0,S<0?(P+=x*(t-1),t=C(-t/S)):t=C(t/S),x*=S),typeof m=="number"&&(S=m|0,S<0?(P+=A*(i-1),i=C(-i/S)):i=C(i/S),A*=S),typeof o=="number"&&(S=o|0,S<0?(P+=E*(r-1),r=C(-r/S)):r=C(r/S),E*=S),new n(this.data,t,i,r,x,A,E,P)},a.transpose=function(c,m,o){c=c===void 0?0:c|0,m=m===void 0?1:m|0,o=o===void 0?2:o|0;var t=this.shape,i=this.stride;return new n(this.data,t[c],t[m],t[o],i[c],i[m],i[o],this.offset)},a.pick=function(c,m,o){var t=[],i=[],r=this.offset;typeof c=="number"&&c>=0?r=r+this.stride[0]*c|0:(t.push(this.shape[0]),i.push(this.stride[0])),typeof m=="number"&&m>=0?r=r+this.stride[1]*m|0:(t.push(this.shape[1]),i.push(this.stride[1])),typeof o=="number"&&o>=0?r=r+this.stride[2]*o|0:(t.push(this.shape[2]),i.push(this.stride[2]));var x=f[t.length+1];return x(this.data,t,i,r)},function(c,m,o,t){return new n(c,m[0],m[1],m[2],o[0],o[1],o[2],t)}},4:function(_,f,g){function n(h,c,m,o,t,i,r,x,A,E){this.data=h,this.shape=[c,m,o,t],this.stride=[i,r,x,A],this.offset=E|0}var a=n.prototype;return a.dtype=_,a.dimension=4,Object.defineProperty(a,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(a,"order",{get:g}),a.set=function(c,m,o,t,i){return _==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o+this.stride[3]*t,i):this.data[this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o+this.stride[3]*t]=i},a.get=function(c,m,o,t){return _==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o+this.stride[3]*t):this.data[this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o+this.stride[3]*t]},a.index=function(c,m,o,t){return this.offset+this.stride[0]*c+this.stride[1]*m+this.stride[2]*o+this.stride[3]*t},a.hi=function(c,m,o,t){return new n(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof m!="number"||m<0?this.shape[1]:m|0,typeof o!="number"||o<0?this.shape[2]:o|0,typeof t!="number"||t<0?this.shape[3]:t|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},a.lo=function(c,m,o,t){var i=this.offset,r=0,x=this.shape[0],A=this.shape[1],E=this.shape[2],P=this.shape[3],S=this.stride[0],C=this.stride[1],M=this.stride[2],I=this.stride[3];return typeof c=="number"&&c>=0&&(r=c|0,i+=S*r,x-=r),typeof m=="number"&&m>=0&&(r=m|0,i+=C*r,A-=r),typeof o=="number"&&o>=0&&(r=o|0,i+=M*r,E-=r),typeof t=="number"&&t>=0&&(r=t|0,i+=I*r,P-=r),new n(this.data,x,A,E,P,S,C,M,I,i)},a.step=function(c,m,o,t){var i=this.shape[0],r=this.shape[1],x=this.shape[2],A=this.shape[3],E=this.stride[0],P=this.stride[1],S=this.stride[2],C=this.stride[3],M=this.offset,I=0,G=Math.ceil;return typeof c=="number"&&(I=c|0,I<0?(M+=E*(i-1),i=G(-i/I)):i=G(i/I),E*=I),typeof m=="number"&&(I=m|0,I<0?(M+=P*(r-1),r=G(-r/I)):r=G(r/I),P*=I),typeof o=="number"&&(I=o|0,I<0?(M+=S*(x-1),x=G(-x/I)):x=G(x/I),S*=I),typeof t=="number"&&(I=t|0,I<0?(M+=C*(A-1),A=G(-A/I)):A=G(A/I),C*=I),new n(this.data,i,r,x,A,E,P,S,C,M)},a.transpose=function(c,m,o,t){c=c===void 0?0:c|0,m=m===void 0?1:m|0,o=o===void 0?2:o|0,t=t===void 0?3:t|0;var i=this.shape,r=this.stride;return new n(this.data,i[c],i[m],i[o],i[t],r[c],r[m],r[o],r[t],this.offset)},a.pick=function(c,m,o,t){var i=[],r=[],x=this.offset;typeof c=="number"&&c>=0?x=x+this.stride[0]*c|0:(i.push(this.shape[0]),r.push(this.stride[0])),typeof m=="number"&&m>=0?x=x+this.stride[1]*m|0:(i.push(this.shape[1]),r.push(this.stride[1])),typeof o=="number"&&o>=0?x=x+this.stride[2]*o|0:(i.push(this.shape[2]),r.push(this.stride[2])),typeof t=="number"&&t>=0?x=x+this.stride[3]*t|0:(i.push(this.shape[3]),r.push(this.stride[3]));var A=f[i.length+1];return A(this.data,i,r,x)},function(c,m,o,t){return new n(c,m[0],m[1],m[2],m[3],o[0],o[1],o[2],o[3],t)}},5:function(f,g,n){function a(c,m,o,t,i,r,x,A,E,P,S,C){this.data=c,this.shape=[m,o,t,i,r],this.stride=[x,A,E,P,S],this.offset=C|0}var h=a.prototype;return h.dtype=f,h.dimension=5,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(h,"order",{get:n}),h.set=function(m,o,t,i,r,x){return f==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*o+this.stride[2]*t+this.stride[3]*i+this.stride[4]*r,x):this.data[this.offset+this.stride[0]*m+this.stride[1]*o+this.stride[2]*t+this.stride[3]*i+this.stride[4]*r]=x},h.get=function(m,o,t,i,r){return f==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*o+this.stride[2]*t+this.stride[3]*i+this.stride[4]*r):this.data[this.offset+this.stride[0]*m+this.stride[1]*o+this.stride[2]*t+this.stride[3]*i+this.stride[4]*r]},h.index=function(m,o,t,i,r){return this.offset+this.stride[0]*m+this.stride[1]*o+this.stride[2]*t+this.stride[3]*i+this.stride[4]*r},h.hi=function(m,o,t,i,r){return new a(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof o!="number"||o<0?this.shape[1]:o|0,typeof t!="number"||t<0?this.shape[2]:t|0,typeof i!="number"||i<0?this.shape[3]:i|0,typeof r!="number"||r<0?this.shape[4]:r|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},h.lo=function(m,o,t,i,r){var x=this.offset,A=0,E=this.shape[0],P=this.shape[1],S=this.shape[2],C=this.shape[3],M=this.shape[4],I=this.stride[0],G=this.stride[1],V=this.stride[2],q=this.stride[3],ee=this.stride[4];return typeof m=="number"&&m>=0&&(A=m|0,x+=I*A,E-=A),typeof o=="number"&&o>=0&&(A=o|0,x+=G*A,P-=A),typeof t=="number"&&t>=0&&(A=t|0,x+=V*A,S-=A),typeof i=="number"&&i>=0&&(A=i|0,x+=q*A,C-=A),typeof r=="number"&&r>=0&&(A=r|0,x+=ee*A,M-=A),new a(this.data,E,P,S,C,M,I,G,V,q,ee,x)},h.step=function(m,o,t,i,r){var x=this.shape[0],A=this.shape[1],E=this.shape[2],P=this.shape[3],S=this.shape[4],C=this.stride[0],M=this.stride[1],I=this.stride[2],G=this.stride[3],V=this.stride[4],q=this.offset,ee=0,Q=Math.ceil;return typeof m=="number"&&(ee=m|0,ee<0?(q+=C*(x-1),x=Q(-x/ee)):x=Q(x/ee),C*=ee),typeof o=="number"&&(ee=o|0,ee<0?(q+=M*(A-1),A=Q(-A/ee)):A=Q(A/ee),M*=ee),typeof t=="number"&&(ee=t|0,ee<0?(q+=I*(E-1),E=Q(-E/ee)):E=Q(E/ee),I*=ee),typeof i=="number"&&(ee=i|0,ee<0?(q+=G*(P-1),P=Q(-P/ee)):P=Q(P/ee),G*=ee),typeof r=="number"&&(ee=r|0,ee<0?(q+=V*(S-1),S=Q(-S/ee)):S=Q(S/ee),V*=ee),new a(this.data,x,A,E,P,S,C,M,I,G,V,q)},h.transpose=function(m,o,t,i,r){m=m===void 0?0:m|0,o=o===void 0?1:o|0,t=t===void 0?2:t|0,i=i===void 0?3:i|0,r=r===void 0?4:r|0;var x=this.shape,A=this.stride;return new a(this.data,x[m],x[o],x[t],x[i],x[r],A[m],A[o],A[t],A[i],A[r],this.offset)},h.pick=function(m,o,t,i,r){var x=[],A=[],E=this.offset;typeof m=="number"&&m>=0?E=E+this.stride[0]*m|0:(x.push(this.shape[0]),A.push(this.stride[0])),typeof o=="number"&&o>=0?E=E+this.stride[1]*o|0:(x.push(this.shape[1]),A.push(this.stride[1])),typeof t=="number"&&t>=0?E=E+this.stride[2]*t|0:(x.push(this.shape[2]),A.push(this.stride[2])),typeof i=="number"&&i>=0?E=E+this.stride[3]*i|0:(x.push(this.shape[3]),A.push(this.stride[3])),typeof r=="number"&&r>=0?E=E+this.stride[4]*r|0:(x.push(this.shape[4]),A.push(this.stride[4]));var P=g[x.length+1];return P(this.data,x,A,E)},function(m,o,t,i){return new a(m,o[0],o[1],o[2],o[3],o[4],t[0],t[1],t[2],t[3],t[4],i)}}};function b(_,f){var g=f===-1?"T":String(f),n=l[g];return f===-1?n(_):f===0?n(_,y[_][0]):n(_,y[_],s)}function v(_){if(d(_))return"buffer";if(e)switch(Object.prototype.toString.call(_)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(_)?"array":"generic"}var y={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function T(_,f,g,n){if(_===void 0){var t=y.array[0];return t([])}else typeof _=="number"&&(_=[_]);f===void 0&&(f=[_.length]);var a=f.length;if(g===void 0){g=new Array(a);for(var h=a-1,c=1;h>=0;--h)g[h]=c,c*=f[h]}if(n===void 0){n=0;for(var h=0;h<a;++h)g[h]<0&&(n-=(f[h]-1)*g[h])}for(var m=v(_),o=y[m];o.length<=a+1;)o.push(b(m,o.length-1));var t=o[a+1];return t(_,f,g,n)}w.exports=T},{"is-buffer":237}],260:[function(p,w,k){"use strict";var d=p("double-bits"),e=Math.pow(2,-1074),u=-1>>>0;w.exports=s;function s(l,b){if(isNaN(l)||isNaN(b))return NaN;if(l===b)return l;if(l===0)return b<0?-e:e;var v=d.hi(l),y=d.lo(l);return b>l==l>0?y===u?(v+=1,y=0):y+=1:y===0?(y=u,v-=1):y-=1,d.pack(y,v)}},{"double-bits":64}],261:[function(p,w,k){var d=1e-6,e=1e-6;k.vertexNormals=function(u,s,l){for(var b=s.length,v=new Array(b),y=l===void 0?d:l,T=0;T<b;++T)v[T]=[0,0,0];for(var T=0;T<u.length;++T)for(var _=u[T],f=0,g=_[_.length-1],n=_[0],a=0;a<_.length;++a){f=g,g=n,n=_[(a+1)%_.length];for(var h=s[f],c=s[g],m=s[n],o=new Array(3),t=0,i=new Array(3),r=0,x=0;x<3;++x)o[x]=h[x]-c[x],t+=o[x]*o[x],i[x]=m[x]-c[x],r+=i[x]*i[x];if(t*r>y)for(var A=v[g],E=1/Math.sqrt(t*r),x=0;x<3;++x){var P=(x+1)%3,S=(x+2)%3;A[x]+=E*(i[P]*o[S]-i[S]*o[P])}}for(var T=0;T<b;++T){for(var A=v[T],C=0,x=0;x<3;++x)C+=A[x]*A[x];if(C>y)for(var E=1/Math.sqrt(C),x=0;x<3;++x)A[x]*=E;else for(var x=0;x<3;++x)A[x]=0}return v},k.faceNormals=function(u,s,l){for(var b=u.length,v=new Array(b),y=l===void 0?e:l,T=0;T<b;++T){for(var _=u[T],f=new Array(3),g=0;g<3;++g)f[g]=s[_[g]];for(var n=new Array(3),a=new Array(3),g=0;g<3;++g)n[g]=f[1][g]-f[0][g],a[g]=f[2][g]-f[0][g];for(var h=new Array(3),c=0,g=0;g<3;++g){var m=(g+1)%3,o=(g+2)%3;h[g]=n[m]*a[o]-n[o]*a[m],c+=h[g]*h[g]}c>y?c=1/Math.sqrt(c):c=0;for(var g=0;g<3;++g)h[g]*=c;v[T]=h}return v}},{}],262:[function(p,w,k){"use strict";w.exports=d;function d(e,u,s,l,b,v,y,T,_,f){var g=u+v+f;if(n>0){var n=Math.sqrt(g+1);e[0]=.5*(y-_)/n,e[1]=.5*(T-l)/n,e[2]=.5*(s-v)/n,e[3]=.5*n}else{var a=Math.max(u,v,f),n=Math.sqrt(2*a-g+1);u>=a?(e[0]=.5*n,e[1]=.5*(b+s)/n,e[2]=.5*(T+l)/n,e[3]=.5*(y-_)/n):v>=a?(e[0]=.5*(s+b)/n,e[1]=.5*n,e[2]=.5*(_+y)/n,e[3]=.5*(T-l)/n):(e[0]=.5*(l+T)/n,e[1]=.5*(y+_)/n,e[2]=.5*n,e[3]=.5*(s-b)/n)}return e}},{}],263:[function(p,w,k){"use strict";w.exports=f;var d=p("filtered-vector"),e=p("gl-mat4/lookAt"),u=p("gl-mat4/fromQuat"),s=p("gl-mat4/invert"),l=p("./lib/quatFromFrame");function b(g,n,a){return Math.sqrt(Math.pow(g,2)+Math.pow(n,2)+Math.pow(a,2))}function v(g,n,a,h){return Math.sqrt(Math.pow(g,2)+Math.pow(n,2)+Math.pow(a,2)+Math.pow(h,2))}function y(g,n){var a=n[0],h=n[1],c=n[2],m=n[3],o=v(a,h,c,m);o>1e-6?(g[0]=a/o,g[1]=h/o,g[2]=c/o,g[3]=m/o):(g[0]=g[1]=g[2]=0,g[3]=1)}function T(g,n,a){this.radius=d([a]),this.center=d(n),this.rotation=d(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var _=T.prototype;_.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},_.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var n=this.computedRotation;y(n,n);var a=this.computedMatrix;u(a,n);var h=this.computedCenter,c=this.computedEye,m=this.computedUp,o=Math.exp(this.computedRadius[0]);c[0]=h[0]+o*a[2],c[1]=h[1]+o*a[6],c[2]=h[2]+o*a[10],m[0]=a[1],m[1]=a[5],m[2]=a[9];for(var t=0;t<3;++t){for(var i=0,r=0;r<3;++r)i+=a[t+4*r]*c[r];a[12+t]=-i}},_.getMatrix=function(g,n){this.recalcMatrix(g);var a=this.computedMatrix;if(n){for(var h=0;h<16;++h)n[h]=a[h];return n}return a},_.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},_.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},_.pan=function(g,n,a,h){n=n||0,a=a||0,h=h||0,this.recalcMatrix(g);var c=this.computedMatrix,m=c[1],o=c[5],t=c[9],i=b(m,o,t);m/=i,o/=i,t/=i;var r=c[0],x=c[4],A=c[8],E=r*m+x*o+A*t;r-=m*E,x-=o*E,A-=t*E;var P=b(r,x,A);r/=P,x/=P,A/=P;var S=c[2],C=c[6],M=c[10],I=S*m+C*o+M*t,G=S*r+C*x+M*A;S-=I*m+G*r,C-=I*o+G*x,M-=I*t+G*A;var V=b(S,C,M);S/=V,C/=V,M/=V;var q=r*n+m*a,ee=x*n+o*a,Q=A*n+t*a;this.center.move(g,q,ee,Q);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+h),this.radius.set(g,Math.log(U))},_.rotate=function(g,n,a,h){this.recalcMatrix(g),n=n||0,a=a||0;var c=this.computedMatrix,m=c[0],o=c[4],t=c[8],i=c[1],r=c[5],x=c[9],A=c[2],E=c[6],P=c[10],S=n*m+a*i,C=n*o+a*r,M=n*t+a*x,I=-(E*M-P*C),G=-(P*S-A*M),V=-(A*C-E*S),q=Math.sqrt(Math.max(0,1-Math.pow(I,2)-Math.pow(G,2)-Math.pow(V,2))),ee=v(I,G,V,q);ee>1e-6?(I/=ee,G/=ee,V/=ee,q/=ee):(I=G=V=0,q=1);var Q=this.computedRotation,U=Q[0],O=Q[1],Z=Q[2],B=Q[3],Y=U*q+B*I+O*V-Z*G,j=O*q+B*G+Z*I-U*V,X=Z*q+B*V+U*G-O*I,H=B*q-U*I-O*G-Z*V;if(h){I=A,G=E,V=P;var K=Math.sin(h)/b(I,G,V);I*=K,G*=K,V*=K,q=Math.cos(n),Y=Y*q+H*I+j*V-X*G,j=j*q+H*G+X*I-Y*V,X=X*q+H*V+Y*G-j*I,H=H*q-Y*I-j*G-X*V}var W=v(Y,j,X,H);W>1e-6?(Y/=W,j/=W,X/=W,H/=W):(Y=j=X=0,H=1),this.rotation.set(g,Y,j,X,H)},_.lookAt=function(g,n,a,h){this.recalcMatrix(g),a=a||this.computedCenter,n=n||this.computedEye,h=h||this.computedUp;var c=this.computedMatrix;e(c,n,a,h);var m=this.computedRotation;l(m,c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]),y(m,m),this.rotation.set(g,m[0],m[1],m[2],m[3]);for(var o=0,t=0;t<3;++t)o+=Math.pow(a[t]-n[t],2);this.radius.set(g,.5*Math.log(Math.max(o,1e-6))),this.center.set(g,a[0],a[1],a[2])},_.translate=function(g,n,a,h){this.center.move(g,n||0,a||0,h||0)},_.setMatrix=function(g,n){var a=this.computedRotation;l(a,n[0],n[1],n[2],n[4],n[5],n[6],n[8],n[9],n[10]),y(a,a),this.rotation.set(g,a[0],a[1],a[2],a[3]);var h=this.computedMatrix;s(h,n);var c=h[15];if(Math.abs(c)>1e-6){var m=h[12]/c,o=h[13]/c,t=h[14]/c;this.recalcMatrix(g);var i=Math.exp(this.computedRadius[0]);this.center.set(g,m-h[2]*i,o-h[6]*i,t-h[10]*i),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},_.setDistance=function(g,n){n>0&&this.radius.set(g,Math.log(n))},_.setDistanceLimits=function(g,n){g>0?g=Math.log(g):g=-1/0,n>0?n=Math.log(n):n=1/0,n=Math.max(n,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=n},_.getDistanceLimits=function(g){var n=this.radius.bounds;return g?(g[0]=Math.exp(n[0][0]),g[1]=Math.exp(n[1][0]),g):[Math.exp(n[0][0]),Math.exp(n[1][0])]},_.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},_.fromJSON=function(g){var n=this.lastT(),a=g.center;a&&this.center.set(n,a[0],a[1],a[2]);var h=g.rotation;h&&this.rotation.set(n,h[0],h[1],h[2],h[3]);var c=g.distance;c&&c>0&&this.radius.set(n,Math.log(c)),this.setDistanceLimits(g.zoomMin,g.zoomMax)};function f(g){g=g||{};var n=g.center||[0,0,0],a=g.rotation||[0,0,0,1],h=g.radius||1;n=[].slice.call(n,0,3),a=[].slice.call(a,0,4),y(a,a);var c=new T(a,n,Math.log(h));return c.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&c.lookAt(0,g.eye,g.center,g.up),c}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(p,w,k){"use strict";var d=p("repeat-string");w.exports=function(u,s,l){return l=typeof l<"u"?l+"":" ",d(l,s)+u}},{"repeat-string":277}],265:[function(p,w,k){w.exports=function(e,u){u||(u=[0,""]),e=String(e);var s=parseFloat(e,10);return u[0]=s,u[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",u}},{}],266:[function(p,w,k){"use strict";w.exports=e;var d=p("compare-angle");function e(u,s){for(var l=s.length|0,b=u.length,v=[new Array(l),new Array(l)],y=0;y<l;++y)v[0][y]=[],v[1][y]=[];for(var y=0;y<b;++y){var T=u[y];v[0][T[0]].push(T),v[1][T[1]].push(T)}for(var _=[],y=0;y<l;++y)v[0][y].length+v[1][y].length===0&&_.push([y]);function f(t,i){var r=v[i][t[i]];r.splice(r.indexOf(t),1)}function g(t,i,r){for(var x,A,E,P=0;P<2;++P)if(v[P][i].length>0){x=v[P][i][0],E=P;break}A=x[E^1];for(var S=0;S<2;++S)for(var C=v[S][i],M=0;M<C.length;++M){var I=C[M],G=I[S^1],V=d(s[t],s[i],s[A],s[G]);V>0&&(x=I,A=G,E=S)}return r||x&&f(x,E),A}function n(t,i){var r=v[i][t][0],x=[t];f(r,i);for(var A=r[i^1],E=i;;){for(;A!==t;)x.push(A),A=g(x[x.length-2],A,!1);if(v[0][t].length+v[1][t].length===0)break;var P=x[x.length-1],S=t,C=x[1],M=g(P,S,!0);if(d(s[P],s[S],s[C],s[M])<0)break;x.push(t),A=g(P,S)}return x}function a(t,i){return i[1]===i[i.length-1]}for(var y=0;y<l;++y)for(var h=0;h<2;++h){for(var c=[];v[h][y].length>0;){var m=v[0][y].length,o=n(y,h);a(c,o)?c.push.apply(c,o):(c.length>0&&_.push(c),c=o)}c.length>0&&_.push(c)}return _}},{"compare-angle":54}],267:[function(p,w,k){"use strict";w.exports=e;var d=p("edges-to-adjacency-list");function e(u,s){for(var l=d(u,s.length),b=new Array(s.length),v=new Array(s.length),y=[],T=0;T<s.length;++T){var _=l[T].length;v[T]=_,b[T]=!0,_<=1&&y.push(T)}for(;y.length>0;){var f=y.pop();b[f]=!1;for(var g=l[f],T=0;T<g.length;++T){var n=g[T];--v[n]===0&&y.push(n)}}for(var a=new Array(s.length),h=[],T=0;T<s.length;++T)if(b[T]){var f=h.length;a[T]=f,h.push(s[T])}else a[T]=-1;for(var c=[],T=0;T<u.length;++T){var m=u[T];b[m[0]]&&b[m[1]]&&c.push([a[m[0]],a[m[1]]])}return[c,h]}},{"edges-to-adjacency-list":66}],268:[function(p,w,k){"use strict";w.exports=_;var d=p("edges-to-adjacency-list"),e=p("planar-dual"),u=p("point-in-big-polygon"),s=p("two-product"),l=p("robust-sum"),b=p("uniq"),v=p("./lib/trim-leaves");function y(f,g){for(var n=new Array(f),a=0;a<f;++a)n[a]=g;return n}function T(f){for(var g=new Array(f),n=0;n<f;++n)g[n]=[];return g}function _(f,g){var K=v(f,g);f=K[0],g=K[1];for(var n=g.length,a=f.length,h=d(f,g.length),c=0;c<n;++c)if(h[c].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var m=e(f,g);function o(ce){for(var _e=ce.length,fe=[0],ne=0;ne<_e;++ne){var ie=g[ce[ne]],me=g[ce[(ne+1)%_e]],we=s(-ie[0],ie[1]),be=s(-ie[0],me[1]),Me=s(me[0],ie[1]),Ie=s(me[0],me[1]);fe=l(fe,l(l(we,be),l(Me,Ie)))}return fe[fe.length-1]>0}m=m.filter(o);for(var t=m.length,i=new Array(t),r=new Array(t),c=0;c<t;++c){i[c]=c;var x=new Array(t),A=m[c].map(function(_e){return g[_e]}),E=u([A]),P=0;e:for(var S=0;S<t;++S)if(x[S]=0,c!==S){for(var C=m[S],M=C.length,I=0;I<M;++I){var G=E(g[C[I]]);if(G!==0){G<0&&(x[S]=1,P+=1);continue e}}x[S]=1,P+=1}r[c]=[P,c,x]}r.sort(function(ce,_e){return _e[0]-ce[0]});for(var c=0;c<t;++c)for(var x=r[c],V=x[1],q=x[2],S=0;S<t;++S)q[S]&&(i[S]=V);for(var ee=T(t),c=0;c<t;++c)ee[c].push(i[c]),ee[i[c]].push(c);for(var Q={},U=y(n,!1),c=0;c<t;++c)for(var C=m[c],M=C.length,S=0;S<M;++S){var O=C[S],Z=C[(S+1)%M],B=Math.min(O,Z)+":"+Math.max(O,Z);if(B in Q){var Y=Q[B];ee[Y].push(c),ee[c].push(Y),U[O]=U[Z]=!0}else Q[B]=c}function j(ce){for(var _e=ce.length,fe=0;fe<_e;++fe)if(!U[ce[fe]])return!1;return!0}for(var X=[],H=y(t,-1),c=0;c<t;++c)i[c]===c&&!j(m[c])?(X.push(c),H[c]=0):H[c]=-1;for(var K=[];X.length>0;){var W=X.pop(),$=ee[W];b($,function(ce,_e){return ce-_e});var re=$.length,de=H[W],ve;if(de===0){var C=m[W];ve=[C]}for(var c=0;c<re;++c){var ue=$[c];if(!(H[ue]>=0)&&(H[ue]=de^1,X.push(ue),de===0)){var C=m[ue];j(C)||(C.reverse(),ve.push(C))}}de===0&&K.push(ve)}return K}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(p,w,k){w.exports=g;var d=p("robust-orientation")[3],e=p("slab-decomposition"),u=p("interval-tree-1d"),s=p("binary-search-bounds");function l(){return!0}function b(n){return function(a,h){var c=n[a];return c?!!c.queryPoint(h,l):!1}}function v(n){for(var a={},h=0;h<n.length;++h){var c=n[h],m=c[0][0],o=c[0][1],t=c[1][1],i=[Math.min(o,t),Math.max(o,t)];m in a?a[m].push(i):a[m]=[i]}for(var r={},x=Object.keys(a),h=0;h<x.length;++h){var A=a[x[h]];r[x[h]]=u(A)}return b(r)}function y(n,a){return function(h){var c=s.le(a,h[0]);if(c<0)return 1;var m=n[c];if(!m)if(c>0&&a[c]===h[0])m=n[c-1];else return 1;for(var o=1;m;){var t=m.key,i=d(h,t[0],t[1]);if(t[0][0]<t[1][0])if(i<0)m=m.left;else if(i>0)o=-1,m=m.right;else return 0;else if(i>0)m=m.left;else if(i<0)o=1,m=m.right;else return 0}return o}}function T(n){return 1}function _(n){return function(h){return n(h[0],h[1])?0:1}}function f(n,a){return function(c){return n(c[0],c[1])?0:a(c)}}function g(n){for(var a=n.length,h=[],c=[],m=0,o=0;o<a;++o)for(var t=n[o],i=t.length,r=i-1,x=0;x<i;r=x++){var A=t[r],E=t[x];A[0]===E[0]?c.push([A,E]):h.push([A,E])}if(h.length===0)return c.length===0?T:_(v(c));var P=e(h),S=y(P.slabs,P.coordinates);return c.length===0?S:f(v(c),S)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(p,w,k){"use strict";var d=new Float64Array(4),e=new Float64Array(4),u=new Float64Array(4);function s(l,b,v,y,T){d.length<y.length&&(d=new Float64Array(y.length),e=new Float64Array(y.length),u=new Float64Array(y.length));for(var _=0;_<y.length;++_)d[_]=l[_]-y[_],e[_]=b[_]-l[_],u[_]=v[_]-l[_];for(var f=0,g=0,n=0,a=0,h=0,c=0,_=0;_<y.length;++_){var m=e[_],o=u[_],t=d[_];f+=m*m,g+=m*o,n+=o*o,a+=t*m,h+=t*o,c+=t*t}var i=Math.abs(f*n-g*g),r=g*h-n*a,x=g*a-f*h,A;if(r+x<=i)if(r<0)x<0&&a<0?(x=0,-a>=f?(r=1,A=f+2*a+c):(r=-a/f,A=a*r+c)):(r=0,h>=0?(x=0,A=c):-h>=n?(x=1,A=n+2*h+c):(x=-h/n,A=h*x+c));else if(x<0)x=0,a>=0?(r=0,A=c):-a>=f?(r=1,A=f+2*a+c):(r=-a/f,A=a*r+c);else{var E=1/i;r*=E,x*=E,A=r*(f*r+g*x+2*a)+x*(g*r+n*x+2*h)+c}else{var P,S,C,M;r<0?(P=g+a,S=n+h,S>P?(C=S-P,M=f-2*g+n,C>=M?(r=1,x=0,A=f+2*a+c):(r=C/M,x=1-r,A=r*(f*r+g*x+2*a)+x*(g*r+n*x+2*h)+c)):(r=0,S<=0?(x=1,A=n+2*h+c):h>=0?(x=0,A=c):(x=-h/n,A=h*x+c))):x<0?(P=g+h,S=f+a,S>P?(C=S-P,M=f-2*g+n,C>=M?(x=1,r=0,A=n+2*h+c):(x=C/M,r=1-x,A=r*(f*r+g*x+2*a)+x*(g*r+n*x+2*h)+c)):(x=0,S<=0?(r=1,A=f+2*a+c):a>=0?(r=0,A=c):(r=-a/f,A=a*r+c))):(C=n+h-g-a,C<=0?(r=0,x=1,A=n+2*h+c):(M=f-2*g+n,C>=M?(r=1,x=0,A=f+2*a+c):(r=C/M,x=1-r,A=r*(f*r+g*x+2*a)+x*(g*r+n*x+2*h)+c)))}for(var I=1-r-x,_=0;_<y.length;++_)T[_]=I*l[_]+r*b[_]+x*v[_];return A<0?0:A}w.exports=s},{}],271:[function(p,w,k){w.exports=p("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(p,w,k){"use strict";var d=p("big-rat/add");w.exports=e;function e(u,s){for(var l=u.length,b=new Array(l),v=0;v<l;++v)b[v]=d(u[v],s[v]);return b}},{"big-rat/add":15}],273:[function(p,w,k){"use strict";w.exports=e;var d=p("big-rat");function e(u){for(var s=new Array(u.length),l=0;l<u.length;++l)s[l]=d(u[l]);return s}},{"big-rat":18}],274:[function(p,w,k){"use strict";var d=p("big-rat"),e=p("big-rat/mul");w.exports=u;function u(s,l){for(var b=d(l),v=s.length,y=new Array(v),T=0;T<v;++T)y[T]=e(s[T],b);return y}},{"big-rat":18,"big-rat/mul":27}],275:[function(p,w,k){"use strict";var d=p("big-rat/sub");w.exports=e;function e(u,s){for(var l=u.length,b=new Array(l),v=0;v<l;++v)b[v]=d(u[v],s[v]);return b}},{"big-rat/sub":29}],276:[function(p,w,k){"use strict";var d=p("compare-cell"),e=p("compare-oriented-cell"),u=p("cell-orientation");w.exports=s;function s(l){l.sort(e);for(var b=l.length,v=0,y=0;y<b;++y){var T=l[y],_=u(T);if(_!==0){if(v>0){var f=l[v-1];if(d(T,f)===0&&u(f)!==_){v-=1;continue}}l[v++]=T}}return l.length=v,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(p,w,k){"use strict";var d="",e;w.exports=u;function u(s,l){if(typeof s!="string")throw new TypeError("expected a string");if(l===1)return s;if(l===2)return s+s;var b=s.length*l;if(e!==s||typeof e>"u")e=s,d="";else if(d.length>=b)return d.substr(0,b);for(;b>d.length&&l>1;)l&1&&(d+=s),l>>=1,s+=s;return d+=s,d=d.substr(0,b),d}},{}],278:[function(p,w,k){(function(d){(function(){w.exports=d.performance&&d.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(p,w,k){"use strict";w.exports=d;function d(e){for(var u=e.length,s=e[e.length-1],l=u,b=u-2;b>=0;--b){var v=s,y=e[b];s=v+y;var T=s-v,_=y-T;_&&(e[--l]=s,s=_)}for(var f=0,b=l;b<u;++b){var v=e[b],y=s;s=v+y;var T=s-v,_=y-T;_&&(e[f++]=_)}return e[f++]=s,e.length=f,e}},{}],280:[function(p,w,k){"use strict";var d=p("two-product"),e=p("robust-sum"),u=p("robust-scale"),s=p("robust-compress"),l=6;function b(a,h,c,m){return function(t){return m(a(c(t[0][0],t[1][1]),c(-t[0][1],t[1][0])))}}function v(a,h,c,m){return function(t){return m(a(h(a(c(t[1][1],t[2][2]),c(-t[1][2],t[2][1])),t[0][0]),a(h(a(c(t[1][0],t[2][2]),c(-t[1][2],t[2][0])),-t[0][1]),h(a(c(t[1][0],t[2][1]),c(-t[1][1],t[2][0])),t[0][2]))))}}function y(a,h,c,m){return function(t){return m(a(a(h(a(h(a(c(t[2][2],t[3][3]),c(-t[2][3],t[3][2])),t[1][1]),a(h(a(c(t[2][1],t[3][3]),c(-t[2][3],t[3][1])),-t[1][2]),h(a(c(t[2][1],t[3][2]),c(-t[2][2],t[3][1])),t[1][3]))),t[0][0]),h(a(h(a(c(t[2][2],t[3][3]),c(-t[2][3],t[3][2])),t[1][0]),a(h(a(c(t[2][0],t[3][3]),c(-t[2][3],t[3][0])),-t[1][2]),h(a(c(t[2][0],t[3][2]),c(-t[2][2],t[3][0])),t[1][3]))),-t[0][1])),a(h(a(h(a(c(t[2][1],t[3][3]),c(-t[2][3],t[3][1])),t[1][0]),a(h(a(c(t[2][0],t[3][3]),c(-t[2][3],t[3][0])),-t[1][1]),h(a(c(t[2][0],t[3][1]),c(-t[2][1],t[3][0])),t[1][3]))),t[0][2]),h(a(h(a(c(t[2][1],t[3][2]),c(-t[2][2],t[3][1])),t[1][0]),a(h(a(c(t[2][0],t[3][2]),c(-t[2][2],t[3][0])),-t[1][1]),h(a(c(t[2][0],t[3][1]),c(-t[2][1],t[3][0])),t[1][2]))),-t[0][3]))))}}function T(a,h,c,m){return function(t){return m(a(a(h(a(a(h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][2]),a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),-t[2][3]),h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][4]))),t[1][1]),h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][1]),a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),-t[2][3]),h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),t[2][4]))),-t[1][2])),a(h(a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),t[2][1]),a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),-t[2][2]),h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][4]))),t[1][3]),h(a(h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][1]),a(h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),-t[2][2]),h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][3]))),-t[1][4]))),t[0][0]),h(a(a(h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][2]),a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),-t[2][3]),h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][4]))),t[1][0]),h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][3]),h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),t[2][4]))),-t[1][2])),a(h(a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][2]),h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),t[2][4]))),t[1][3]),h(a(h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][0]),a(h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),-t[2][2]),h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),t[2][3]))),-t[1][4]))),-t[0][1])),a(h(a(a(h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][1]),a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),-t[2][3]),h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),t[2][4]))),t[1][0]),h(a(h(a(c(t[3][3],t[4][4]),c(-t[3][4],t[4][3])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][3]),h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),t[2][4]))),-t[1][1])),a(h(a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][4]))),t[1][3]),h(a(h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][3]))),-t[1][4]))),t[0][2]),a(h(a(a(h(a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),t[2][1]),a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),-t[2][2]),h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][4]))),t[1][0]),h(a(h(a(c(t[3][2],t[4][4]),c(-t[3][4],t[4][2])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][2]),h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),t[2][4]))),-t[1][1])),a(h(a(h(a(c(t[3][1],t[4][4]),c(-t[3][4],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][4]),c(-t[3][4],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][4]))),t[1][2]),h(a(h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][2]))),-t[1][4]))),-t[0][3]),h(a(a(h(a(h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][1]),a(h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),-t[2][2]),h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][3]))),t[1][0]),h(a(h(a(c(t[3][2],t[4][3]),c(-t[3][3],t[4][2])),t[2][0]),a(h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),-t[2][2]),h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),t[2][3]))),-t[1][1])),a(h(a(h(a(c(t[3][1],t[4][3]),c(-t[3][3],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][3]),c(-t[3][3],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][3]))),t[1][2]),h(a(h(a(c(t[3][1],t[4][2]),c(-t[3][2],t[4][1])),t[2][0]),a(h(a(c(t[3][0],t[4][2]),c(-t[3][2],t[4][0])),-t[2][1]),h(a(c(t[3][0],t[4][1]),c(-t[3][1],t[4][0])),t[2][2]))),-t[1][3]))),t[0][4])))))}}function _(a){var h=a===2?b:a===3?v:a===4?y:a===5?T:void 0;return h(e,u,d,s)}var f=[function(){return[0]},function(h){return[h[0][0]]}];function g(a,h,c,m,o,t,i,r){return function(A){switch(A.length){case 0:return a(A);case 1:return h(A);case 2:return c(A);case 3:return m(A);case 4:return o(A);case 5:return t(A)}var E=i[A.length];return E||(E=i[A.length]=r(A.length)),E(A)}}function n(){for(;f.length<l;)f.push(_(f.length));w.exports=g.apply(void 0,f.concat([f,_]));for(var a=0;a<f.length;++a)w.exports[a]=f[a]}n()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(p,w,k){"use strict";var d=p("two-product"),e=p("robust-sum");w.exports=u;function u(s,l){for(var b=d(s[0],l[0]),v=1;v<s.length;++v)b=e(b,d(s[v],l[v]));return b}},{"robust-sum":289,"two-product":306}],282:[function(p,w,k){"use strict";var d=p("two-product"),e=p("robust-sum"),u=p("robust-subtract"),s=p("robust-scale"),l=6;function b(o){var t=o===3?_:o===4?f:o===5?g:n;return t(e,u,d,s)}function v(){return 0}function y(){return 0}function T(){return 0}function _(o,t,i,r){function x(A,E,P){var S=i(A[0],A[0]),C=r(S,E[0]),M=r(S,P[0]),I=i(E[0],E[0]),G=r(I,A[0]),V=r(I,P[0]),q=i(P[0],P[0]),ee=r(q,A[0]),Q=r(q,E[0]),U=o(t(Q,V),t(G,C)),O=t(ee,M),Z=t(U,O);return Z[Z.length-1]}return x}function f(o,t,i,r){function x(A,E,P,S){var C=o(i(A[0],A[0]),i(A[1],A[1])),M=r(C,E[0]),I=r(C,P[0]),G=r(C,S[0]),V=o(i(E[0],E[0]),i(E[1],E[1])),q=r(V,A[0]),ee=r(V,P[0]),Q=r(V,S[0]),U=o(i(P[0],P[0]),i(P[1],P[1])),O=r(U,A[0]),Z=r(U,E[0]),B=r(U,S[0]),Y=o(i(S[0],S[0]),i(S[1],S[1])),j=r(Y,A[0]),X=r(Y,E[0]),H=r(Y,P[0]),K=o(o(r(t(H,B),E[1]),o(r(t(X,Q),-P[1]),r(t(Z,ee),S[1]))),o(r(t(X,Q),A[1]),o(r(t(j,G),-E[1]),r(t(q,M),S[1])))),W=o(o(r(t(H,B),A[1]),o(r(t(j,G),-P[1]),r(t(O,I),S[1]))),o(r(t(Z,ee),A[1]),o(r(t(O,I),-E[1]),r(t(q,M),P[1])))),$=t(K,W);return $[$.length-1]}return x}function g(o,t,i,r){function x(A,E,P,S,C){var M=o(i(A[0],A[0]),o(i(A[1],A[1]),i(A[2],A[2]))),I=r(M,E[0]),G=r(M,P[0]),V=r(M,S[0]),q=r(M,C[0]),ee=o(i(E[0],E[0]),o(i(E[1],E[1]),i(E[2],E[2]))),Q=r(ee,A[0]),U=r(ee,P[0]),O=r(ee,S[0]),Z=r(ee,C[0]),B=o(i(P[0],P[0]),o(i(P[1],P[1]),i(P[2],P[2]))),Y=r(B,A[0]),j=r(B,E[0]),X=r(B,S[0]),H=r(B,C[0]),K=o(i(S[0],S[0]),o(i(S[1],S[1]),i(S[2],S[2]))),W=r(K,A[0]),$=r(K,E[0]),re=r(K,P[0]),de=r(K,C[0]),ve=o(i(C[0],C[0]),o(i(C[1],C[1]),i(C[2],C[2]))),ue=r(ve,A[0]),ce=r(ve,E[0]),_e=r(ve,P[0]),fe=r(ve,S[0]),ne=o(o(o(r(o(r(t(fe,de),P[1]),o(r(t(_e,H),-S[1]),r(t(re,X),C[1]))),E[2]),o(r(o(r(t(fe,de),E[1]),o(r(t(ce,Z),-S[1]),r(t($,O),C[1]))),-P[2]),r(o(r(t(_e,H),E[1]),o(r(t(ce,Z),-P[1]),r(t(j,U),C[1]))),S[2]))),o(r(o(r(t(re,X),E[1]),o(r(t($,O),-P[1]),r(t(j,U),S[1]))),-C[2]),o(r(o(r(t(fe,de),E[1]),o(r(t(ce,Z),-S[1]),r(t($,O),C[1]))),A[2]),r(o(r(t(fe,de),A[1]),o(r(t(ue,q),-S[1]),r(t(W,V),C[1]))),-E[2])))),o(o(r(o(r(t(ce,Z),A[1]),o(r(t(ue,q),-E[1]),r(t(Q,I),C[1]))),S[2]),o(r(o(r(t($,O),A[1]),o(r(t(W,V),-E[1]),r(t(Q,I),S[1]))),-C[2]),r(o(r(t(re,X),E[1]),o(r(t($,O),-P[1]),r(t(j,U),S[1]))),A[2]))),o(r(o(r(t(re,X),A[1]),o(r(t(W,V),-P[1]),r(t(Y,G),S[1]))),-E[2]),o(r(o(r(t($,O),A[1]),o(r(t(W,V),-E[1]),r(t(Q,I),S[1]))),P[2]),r(o(r(t(j,U),A[1]),o(r(t(Y,G),-E[1]),r(t(Q,I),P[1]))),-S[2]))))),ie=o(o(o(r(o(r(t(fe,de),P[1]),o(r(t(_e,H),-S[1]),r(t(re,X),C[1]))),A[2]),r(o(r(t(fe,de),A[1]),o(r(t(ue,q),-S[1]),r(t(W,V),C[1]))),-P[2])),o(r(o(r(t(_e,H),A[1]),o(r(t(ue,q),-P[1]),r(t(Y,G),C[1]))),S[2]),r(o(r(t(re,X),A[1]),o(r(t(W,V),-P[1]),r(t(Y,G),S[1]))),-C[2]))),o(o(r(o(r(t(_e,H),E[1]),o(r(t(ce,Z),-P[1]),r(t(j,U),C[1]))),A[2]),r(o(r(t(_e,H),A[1]),o(r(t(ue,q),-P[1]),r(t(Y,G),C[1]))),-E[2])),o(r(o(r(t(ce,Z),A[1]),o(r(t(ue,q),-E[1]),r(t(Q,I),C[1]))),P[2]),r(o(r(t(j,U),A[1]),o(r(t(Y,G),-E[1]),r(t(Q,I),P[1]))),-C[2])))),me=t(ne,ie);return me[me.length-1]}return x}function n(o,t,i,r){function x(A,E,P,S,C,M){var I=o(o(i(A[0],A[0]),i(A[1],A[1])),o(i(A[2],A[2]),i(A[3],A[3]))),G=r(I,E[0]),V=r(I,P[0]),q=r(I,S[0]),ee=r(I,C[0]),Q=r(I,M[0]),U=o(o(i(E[0],E[0]),i(E[1],E[1])),o(i(E[2],E[2]),i(E[3],E[3]))),O=r(U,A[0]),Z=r(U,P[0]),B=r(U,S[0]),Y=r(U,C[0]),j=r(U,M[0]),X=o(o(i(P[0],P[0]),i(P[1],P[1])),o(i(P[2],P[2]),i(P[3],P[3]))),H=r(X,A[0]),K=r(X,E[0]),W=r(X,S[0]),$=r(X,C[0]),re=r(X,M[0]),de=o(o(i(S[0],S[0]),i(S[1],S[1])),o(i(S[2],S[2]),i(S[3],S[3]))),ve=r(de,A[0]),ue=r(de,E[0]),ce=r(de,P[0]),_e=r(de,C[0]),fe=r(de,M[0]),ne=o(o(i(C[0],C[0]),i(C[1],C[1])),o(i(C[2],C[2]),i(C[3],C[3]))),ie=r(ne,A[0]),me=r(ne,E[0]),we=r(ne,P[0]),be=r(ne,S[0]),Me=r(ne,M[0]),Ie=o(o(i(M[0],M[0]),i(M[1],M[1])),o(i(M[2],M[2]),i(M[3],M[3]))),Ke=r(Ie,A[0]),Oe=r(Ie,E[0]),We=r(Ie,P[0]),Fe=r(Ie,S[0]),Ge=r(Ie,C[0]),Xe=o(o(o(r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),P[2]),r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),C[2]),r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),-M[2]))),E[3]),o(r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),E[2]),r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),C[2]),r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),-M[2]))),-P[3]),r(o(o(r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),E[2]),r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),-P[2])),o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),C[2]),r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),-M[2]))),S[3]))),o(o(r(o(o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),E[2]),r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),-P[2])),o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),S[2]),r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),-M[2]))),-C[3]),r(o(o(r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),E[2]),r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),-P[2])),o(r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),S[2]),r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),-C[2]))),M[3])),o(r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),E[2]),r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),C[2]),r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),-M[2]))),A[3]),r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),C[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-M[2]))),-E[3])))),o(o(o(r(o(o(r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),C[2]),r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),-M[2]))),S[3]),r(o(o(r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),A[2]),r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),S[2]),r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),-M[2]))),-C[3])),o(r(o(o(r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),A[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-E[2])),o(r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),S[2]),r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),-C[2]))),M[3]),r(o(o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),E[2]),r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),-P[2])),o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),S[2]),r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),-M[2]))),A[3]))),o(o(r(o(o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),A[2]),r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),-P[2])),o(r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),S[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-M[2]))),-E[3]),r(o(o(r(o(r(t(Fe,fe),E[1]),o(r(t(Oe,j),-S[1]),r(t(ue,B),M[1]))),A[2]),r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),S[2]),r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),-M[2]))),P[3])),o(r(o(o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),A[2]),r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-M[2]))),-S[3]),r(o(o(r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),A[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-E[2])),o(r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-S[2]))),M[3]))))),ut=o(o(o(r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),P[2]),r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),C[2]),r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),-M[2]))),A[3]),o(r(o(o(r(o(r(t(Ge,Me),S[1]),o(r(t(Fe,fe),-C[1]),r(t(be,_e),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-S[2])),o(r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),C[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-M[2]))),-P[3]),r(o(o(r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-P[2])),o(r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),C[2]),r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),-M[2]))),S[3]))),o(o(r(o(o(r(o(r(t(Fe,fe),P[1]),o(r(t(We,re),-S[1]),r(t(ce,W),M[1]))),A[2]),r(o(r(t(Fe,fe),A[1]),o(r(t(Ke,Q),-S[1]),r(t(ve,q),M[1]))),-P[2])),o(r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),S[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-M[2]))),-C[3]),r(o(o(r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),A[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-P[2])),o(r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),S[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-C[2]))),M[3])),o(r(o(o(r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),E[2]),r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),-P[2])),o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),C[2]),r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),-M[2]))),A[3]),r(o(o(r(o(r(t(Ge,Me),P[1]),o(r(t(We,re),-C[1]),r(t(we,$),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-P[2])),o(r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),C[2]),r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),-M[2]))),-E[3])))),o(o(o(r(o(o(r(o(r(t(Ge,Me),E[1]),o(r(t(Oe,j),-C[1]),r(t(me,Y),M[1]))),A[2]),r(o(r(t(Ge,Me),A[1]),o(r(t(Ke,Q),-C[1]),r(t(ie,ee),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),C[2]),r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),-M[2]))),P[3]),r(o(o(r(o(r(t(We,re),E[1]),o(r(t(Oe,j),-P[1]),r(t(K,Z),M[1]))),A[2]),r(o(r(t(We,re),A[1]),o(r(t(Ke,Q),-P[1]),r(t(H,V),M[1]))),-E[2])),o(r(o(r(t(Oe,j),A[1]),o(r(t(Ke,Q),-E[1]),r(t(O,G),M[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-M[2]))),-C[3])),o(r(o(o(r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),A[2]),r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),-E[2])),o(r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-C[2]))),M[3]),r(o(o(r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),E[2]),r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),-P[2])),o(r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),S[2]),r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),-C[2]))),A[3]))),o(o(r(o(o(r(o(r(t(be,_e),P[1]),o(r(t(we,$),-S[1]),r(t(ce,W),C[1]))),A[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-P[2])),o(r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),S[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-C[2]))),-E[3]),r(o(o(r(o(r(t(be,_e),E[1]),o(r(t(me,Y),-S[1]),r(t(ue,B),C[1]))),A[2]),r(o(r(t(be,_e),A[1]),o(r(t(ie,ee),-S[1]),r(t(ve,q),C[1]))),-E[2])),o(r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),S[2]),r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),-C[2]))),P[3])),o(r(o(o(r(o(r(t(we,$),E[1]),o(r(t(me,Y),-P[1]),r(t(K,Z),C[1]))),A[2]),r(o(r(t(we,$),A[1]),o(r(t(ie,ee),-P[1]),r(t(H,V),C[1]))),-E[2])),o(r(o(r(t(me,Y),A[1]),o(r(t(ie,ee),-E[1]),r(t(O,G),C[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-C[2]))),-S[3]),r(o(o(r(o(r(t(ce,W),E[1]),o(r(t(ue,B),-P[1]),r(t(K,Z),S[1]))),A[2]),r(o(r(t(ce,W),A[1]),o(r(t(ve,q),-P[1]),r(t(H,V),S[1]))),-E[2])),o(r(o(r(t(ue,B),A[1]),o(r(t(ve,q),-E[1]),r(t(O,G),S[1]))),P[2]),r(o(r(t(K,Z),A[1]),o(r(t(H,V),-E[1]),r(t(O,G),P[1]))),-S[2]))),C[3]))))),rt=t(Xe,ut);return rt[rt.length-1]}return x}var a=[v,y,T];function h(o){var t=a[o.length];return t||(t=a[o.length]=b(o.length)),t.apply(void 0,o)}function c(o,t,i,r,x,A,E,P){function S(C,M,I,G,V,q){switch(arguments.length){case 0:case 1:return 0;case 2:return r(C,M);case 3:return x(C,M,I);case 4:return A(C,M,I,G);case 5:return E(C,M,I,G,V);case 6:return P(C,M,I,G,V,q)}for(var ee=new Array(arguments.length),Q=0;Q<arguments.length;++Q)ee[Q]=arguments[Q];return o(ee)}return S}function m(){for(;a.length<=l;)a.push(b(a.length));w.exports=c.apply(void 0,[h].concat(a));for(var o=0;o<=l;++o)w.exports[o]=a[o]}m()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(p,w,k){"use strict";var d=p("robust-determinant"),e=6;function u(a){var h=a===2?b:a===3?v:a===4?y:a===5?T:_;return a<6?h(d[a]):h(d)}function s(){return[[0]]}function l(a,h){return[[h[0]],[a[0][0]]]}function b(a){return function(c,m){return[a([[+m[0],+c[0][1]],[+m[1],+c[1][1]]]),a([[+c[0][0],+m[0]],[+c[1][0],+m[1]]]),a(c)]}}function v(a){return function(c,m){return[a([[+m[0],+c[0][1],+c[0][2]],[+m[1],+c[1][1],+c[1][2]],[+m[2],+c[2][1],+c[2][2]]]),a([[+c[0][0],+m[0],+c[0][2]],[+c[1][0],+m[1],+c[1][2]],[+c[2][0],+m[2],+c[2][2]]]),a([[+c[0][0],+c[0][1],+m[0]],[+c[1][0],+c[1][1],+m[1]],[+c[2][0],+c[2][1],+m[2]]]),a(c)]}}function y(a){return function(c,m){return[a([[+m[0],+c[0][1],+c[0][2],+c[0][3]],[+m[1],+c[1][1],+c[1][2],+c[1][3]],[+m[2],+c[2][1],+c[2][2],+c[2][3]],[+m[3],+c[3][1],+c[3][2],+c[3][3]]]),a([[+c[0][0],+m[0],+c[0][2],+c[0][3]],[+c[1][0],+m[1],+c[1][2],+c[1][3]],[+c[2][0],+m[2],+c[2][2],+c[2][3]],[+c[3][0],+m[3],+c[3][2],+c[3][3]]]),a([[+c[0][0],+c[0][1],+m[0],+c[0][3]],[+c[1][0],+c[1][1],+m[1],+c[1][3]],[+c[2][0],+c[2][1],+m[2],+c[2][3]],[+c[3][0],+c[3][1],+m[3],+c[3][3]]]),a([[+c[0][0],+c[0][1],+c[0][2],+m[0]],[+c[1][0],+c[1][1],+c[1][2],+m[1]],[+c[2][0],+c[2][1],+c[2][2],+m[2]],[+c[3][0],+c[3][1],+c[3][2],+m[3]]]),a(c)]}}function T(a){return function(c,m){return[a([[+m[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4]],[+m[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4]],[+m[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4]],[+m[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4]],[+m[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4]]]),a([[+c[0][0],+m[0],+c[0][2],+c[0][3],+c[0][4]],[+c[1][0],+m[1],+c[1][2],+c[1][3],+c[1][4]],[+c[2][0],+m[2],+c[2][2],+c[2][3],+c[2][4]],[+c[3][0],+m[3],+c[3][2],+c[3][3],+c[3][4]],[+c[4][0],+m[4],+c[4][2],+c[4][3],+c[4][4]]]),a([[+c[0][0],+c[0][1],+m[0],+c[0][3],+c[0][4]],[+c[1][0],+c[1][1],+m[1],+c[1][3],+c[1][4]],[+c[2][0],+c[2][1],+m[2],+c[2][3],+c[2][4]],[+c[3][0],+c[3][1],+m[3],+c[3][3],+c[3][4]],[+c[4][0],+c[4][1],+m[4],+c[4][3],+c[4][4]]]),a([[+c[0][0],+c[0][1],+c[0][2],+m[0],+c[0][4]],[+c[1][0],+c[1][1],+c[1][2],+m[1],+c[1][4]],[+c[2][0],+c[2][1],+c[2][2],+m[2],+c[2][4]],[+c[3][0],+c[3][1],+c[3][2],+m[3],+c[3][4]],[+c[4][0],+c[4][1],+c[4][2],+m[4],+c[4][4]]]),a([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+m[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+m[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+m[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+m[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+m[4]]]),a(c)]}}function _(a){return function(c,m){return[a([[+m[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+m[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+m[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+m[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+m[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+m[5],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),a([[+c[0][0],+m[0],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+m[1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+m[2],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+m[3],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+m[4],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+m[5],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),a([[+c[0][0],+c[0][1],+m[0],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+m[1],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+m[2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+m[3],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+m[4],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+m[5],+c[5][3],+c[5][4],+c[5][5]]]),a([[+c[0][0],+c[0][1],+c[0][2],+m[0],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+m[1],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+m[2],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+m[3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+m[4],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+m[5],+c[5][4],+c[5][5]]]),a([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+m[0],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+m[1],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+m[2],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+m[3],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+m[4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+m[5],+c[5][5]]]),a([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+m[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+m[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+m[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+m[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+m[4]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+m[5]]]),a(c)]}}var f=[s,l];function g(a,h,c,m,o,t,i,r){return function(A,E){switch(A.length){case 0:return a(A,E);case 1:return h(A,E);case 2:return c(A,E);case 3:return m(A,E);case 4:return o(A,E);case 5:return t(A,E)}var P=i[A.length];return P||(P=i[A.length]=r(A.length)),P(A,E)}}function n(){for(;f.length<e;)f.push(u(f.length));w.exports=g.apply(void 0,f.concat([f,u]));for(var a=0;a<e;++a)w.exports[a]=f[a]}n()},{"robust-determinant":280}],284:[function(p,w,k){"use strict";var d=p("two-product"),e=p("robust-sum"),u=p("robust-scale"),s=p("robust-subtract"),l=5,b=11102230246251565e-32,v=(3+16*b)*b,y=(7+56*b)*b;function T(t,i,r,x){return function(E,P,S){var C=t(t(i(P[1],S[0]),i(-S[1],P[0])),t(i(E[1],P[0]),i(-P[1],E[0]))),M=t(i(E[1],S[0]),i(-S[1],E[0])),I=x(C,M);return I[I.length-1]}}function _(t,i,r,x){return function(E,P,S,C){var M=t(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),P[2]),t(r(t(i(P[1],C[0]),i(-C[1],P[0])),-S[2]),r(t(i(P[1],S[0]),i(-S[1],P[0])),C[2]))),t(r(t(i(P[1],C[0]),i(-C[1],P[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),C[2])))),I=t(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-S[2]),r(t(i(E[1],S[0]),i(-S[1],E[0])),C[2]))),t(r(t(i(P[1],S[0]),i(-S[1],P[0])),E[2]),t(r(t(i(E[1],S[0]),i(-S[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),S[2])))),G=x(M,I);return G[G.length-1]}}function f(t,i,r,x){return function(E,P,S,C,M){var I=t(t(t(r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),S[2]),t(r(t(i(S[1],M[0]),i(-M[1],S[0])),-C[2]),r(t(i(S[1],C[0]),i(-C[1],S[0])),M[2]))),P[3]),t(r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),P[2]),t(r(t(i(P[1],M[0]),i(-M[1],P[0])),-C[2]),r(t(i(P[1],C[0]),i(-C[1],P[0])),M[2]))),-S[3]),r(t(r(t(i(S[1],M[0]),i(-M[1],S[0])),P[2]),t(r(t(i(P[1],M[0]),i(-M[1],P[0])),-S[2]),r(t(i(P[1],S[0]),i(-S[1],P[0])),M[2]))),C[3]))),t(r(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),P[2]),t(r(t(i(P[1],C[0]),i(-C[1],P[0])),-S[2]),r(t(i(P[1],S[0]),i(-S[1],P[0])),C[2]))),-M[3]),t(r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),P[2]),t(r(t(i(P[1],M[0]),i(-M[1],P[0])),-C[2]),r(t(i(P[1],C[0]),i(-C[1],P[0])),M[2]))),E[3]),r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-C[2]),r(t(i(E[1],C[0]),i(-C[1],E[0])),M[2]))),-P[3])))),t(t(r(t(r(t(i(P[1],M[0]),i(-M[1],P[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),M[2]))),C[3]),t(r(t(r(t(i(P[1],C[0]),i(-C[1],P[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),C[2]))),-M[3]),r(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),P[2]),t(r(t(i(P[1],C[0]),i(-C[1],P[0])),-S[2]),r(t(i(P[1],S[0]),i(-S[1],P[0])),C[2]))),E[3]))),t(r(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-S[2]),r(t(i(E[1],S[0]),i(-S[1],E[0])),C[2]))),-P[3]),t(r(t(r(t(i(P[1],C[0]),i(-C[1],P[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),C[2]))),S[3]),r(t(r(t(i(P[1],S[0]),i(-S[1],P[0])),E[2]),t(r(t(i(E[1],S[0]),i(-S[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),S[2]))),-C[3]))))),G=t(t(t(r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),S[2]),t(r(t(i(S[1],M[0]),i(-M[1],S[0])),-C[2]),r(t(i(S[1],C[0]),i(-C[1],S[0])),M[2]))),E[3]),r(t(r(t(i(C[1],M[0]),i(-M[1],C[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-C[2]),r(t(i(E[1],C[0]),i(-C[1],E[0])),M[2]))),-S[3])),t(r(t(r(t(i(S[1],M[0]),i(-M[1],S[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-S[2]),r(t(i(E[1],S[0]),i(-S[1],E[0])),M[2]))),C[3]),r(t(r(t(i(S[1],C[0]),i(-C[1],S[0])),E[2]),t(r(t(i(E[1],C[0]),i(-C[1],E[0])),-S[2]),r(t(i(E[1],S[0]),i(-S[1],E[0])),C[2]))),-M[3]))),t(t(r(t(r(t(i(S[1],M[0]),i(-M[1],S[0])),P[2]),t(r(t(i(P[1],M[0]),i(-M[1],P[0])),-S[2]),r(t(i(P[1],S[0]),i(-S[1],P[0])),M[2]))),E[3]),r(t(r(t(i(S[1],M[0]),i(-M[1],S[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-S[2]),r(t(i(E[1],S[0]),i(-S[1],E[0])),M[2]))),-P[3])),t(r(t(r(t(i(P[1],M[0]),i(-M[1],P[0])),E[2]),t(r(t(i(E[1],M[0]),i(-M[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),M[2]))),S[3]),r(t(r(t(i(P[1],S[0]),i(-S[1],P[0])),E[2]),t(r(t(i(E[1],S[0]),i(-S[1],E[0])),-P[2]),r(t(i(E[1],P[0]),i(-P[1],E[0])),S[2]))),-M[3])))),V=x(I,G);return V[V.length-1]}}function g(t){var i=t===3?T:t===4?_:f;return i(e,d,u,s)}var n=g(3),a=g(4),h=[function(){return 0},function(){return 0},function(i,r){return r[0]-i[0]},function(i,r,x){var A=(i[1]-x[1])*(r[0]-x[0]),E=(i[0]-x[0])*(r[1]-x[1]),P=A-E,S;if(A>0){if(E<=0)return P;S=A+E}else if(A<0){if(E>=0)return P;S=-(A+E)}else return P;var C=v*S;return P>=C||P<=-C?P:n(i,r,x)},function(i,r,x,A){var E=i[0]-A[0],P=r[0]-A[0],S=x[0]-A[0],C=i[1]-A[1],M=r[1]-A[1],I=x[1]-A[1],G=i[2]-A[2],V=r[2]-A[2],q=x[2]-A[2],ee=P*I,Q=S*M,U=S*C,O=E*I,Z=E*M,B=P*C,Y=G*(ee-Q)+V*(U-O)+q*(Z-B),j=(Math.abs(ee)+Math.abs(Q))*Math.abs(G)+(Math.abs(U)+Math.abs(O))*Math.abs(V)+(Math.abs(Z)+Math.abs(B))*Math.abs(q),X=y*j;return Y>X||-Y>X?Y:a(i,r,x,A)}];function c(t){var i=h[t.length];return i||(i=h[t.length]=g(t.length)),i.apply(void 0,t)}function m(t,i,r,x,A,E,P){return function(C,M,I,G,V){switch(arguments.length){case 0:case 1:return 0;case 2:return x(C,M);case 3:return A(C,M,I);case 4:return E(C,M,I,G);case 5:return P(C,M,I,G,V)}for(var q=new Array(arguments.length),ee=0;ee<arguments.length;++ee)q[ee]=arguments[ee];return t(q)}}function o(){for(;h.length<=l;)h.push(g(h.length));w.exports=m.apply(void 0,[c].concat(h));for(var t=0;t<=l;++t)w.exports[t]=h[t]}o()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(p,w,k){"use strict";var d=p("robust-sum"),e=p("robust-scale");w.exports=u;function u(s,l){if(s.length===1)return e(l,s[0]);if(l.length===1)return e(s,l[0]);if(s.length===0||l.length===0)return[0];var b=[0];if(s.length<l.length)for(var v=0;v<s.length;++v)b=d(b,e(l,s[v]));else for(var v=0;v<l.length;++v)b=d(b,e(s,l[v]));return b}},{"robust-scale":286,"robust-sum":289}],286:[function(p,w,k){"use strict";var d=p("two-product"),e=p("two-sum");w.exports=u;function u(s,l){var b=s.length;if(b===1){var v=d(s[0],l);return v[0]?v:[v[1]]}var y=new Array(2*b),T=[.1,.1],_=[.1,.1],f=0;d(s[0],l,T),T[0]&&(y[f++]=T[0]);for(var g=1;g<b;++g){d(s[g],l,_);var n=T[1];e(n,_[0],T),T[0]&&(y[f++]=T[0]);var a=_[1],h=T[1],c=a+h,m=c-a,o=h-m;T[1]=c,o&&(y[f++]=o)}return T[1]&&(y[f++]=T[1]),f===0&&(y[f++]=0),y.length=f,y}},{"two-product":306,"two-sum":307}],287:[function(p,w,k){"use strict";w.exports=u;var d=p("robust-orientation")[3];function e(s,l,b,v){for(var y=0;y<2;++y){var T=s[y],_=l[y],f=Math.min(T,_),g=Math.max(T,_),n=b[y],a=v[y],h=Math.min(n,a),c=Math.max(n,a);if(c<f||g<h)return!1}return!0}function u(s,l,b,v){var y=d(s,b,v),T=d(l,b,v);if(y>0&&T>0||y<0&&T<0)return!1;var _=d(b,s,l),f=d(v,s,l);return _>0&&f>0||_<0&&f<0?!1:y===0&&T===0&&_===0&&f===0?e(s,l,b,v):!0}},{"robust-orientation":284}],288:[function(p,w,k){"use strict";w.exports=e;function d(u,s){var l=u+s,b=l-u,v=l-b,y=s-b,T=u-v,_=T+y;return _?[_,l]:[l]}function e(u,s){var l=u.length|0,b=s.length|0;if(l===1&&b===1)return d(u[0],-s[0]);var v=l+b,y=new Array(v),T=0,_=0,f=0,g=Math.abs,n=u[_],a=g(n),h=-s[f],c=g(h),m,o;a<c?(o=n,_+=1,_<l&&(n=u[_],a=g(n))):(o=h,f+=1,f<b&&(h=-s[f],c=g(h))),_<l&&a<c||f>=b?(m=n,_+=1,_<l&&(n=u[_],a=g(n))):(m=h,f+=1,f<b&&(h=-s[f],c=g(h)));for(var t=m+o,i=t-m,r=o-i,x=r,A=t,E,P,S,C,M;_<l&&f<b;)a<c?(m=n,_+=1,_<l&&(n=u[_],a=g(n))):(m=h,f+=1,f<b&&(h=-s[f],c=g(h))),o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E;for(;_<l;)m=n,o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E,_+=1,_<l&&(n=u[_]);for(;f<b;)m=h,o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E,f+=1,f<b&&(h=-s[f]);return x&&(y[T++]=x),A&&(y[T++]=A),T||(y[T++]=0),y.length=T,y}},{}],289:[function(p,w,k){"use strict";w.exports=e;function d(u,s){var l=u+s,b=l-u,v=l-b,y=s-b,T=u-v,_=T+y;return _?[_,l]:[l]}function e(u,s){var l=u.length|0,b=s.length|0;if(l===1&&b===1)return d(u[0],s[0]);var v=l+b,y=new Array(v),T=0,_=0,f=0,g=Math.abs,n=u[_],a=g(n),h=s[f],c=g(h),m,o;a<c?(o=n,_+=1,_<l&&(n=u[_],a=g(n))):(o=h,f+=1,f<b&&(h=s[f],c=g(h))),_<l&&a<c||f>=b?(m=n,_+=1,_<l&&(n=u[_],a=g(n))):(m=h,f+=1,f<b&&(h=s[f],c=g(h)));for(var t=m+o,i=t-m,r=o-i,x=r,A=t,E,P,S,C,M;_<l&&f<b;)a<c?(m=n,_+=1,_<l&&(n=u[_],a=g(n))):(m=h,f+=1,f<b&&(h=s[f],c=g(h))),o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E;for(;_<l;)m=n,o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E,_+=1,_<l&&(n=u[_]);for(;f<b;)m=h,o=x,t=m+o,i=t-m,r=o-i,r&&(y[T++]=r),E=A+t,P=E-A,S=E-P,C=t-P,M=A-S,x=M+C,A=E,f+=1,f<b&&(h=s[f]);return x&&(y[T++]=x),A&&(y[T++]=A),T||(y[T++]=0),y.length=T,y}},{}],290:[function(p,w,k){"use strict";w.exports=u;var d=p("boundary-cells"),e=p("reduce-simplicial-complex");function u(s){return e(d(s))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(p,w,k){"use strict";w.exports=f;var d=p("ndarray"),e=p("typedarray-pool"),u=p("ndarray-sort"),s=p("./lib/codegen");function l(g){for(var n=g.length,a=0,h=0;h<n;++h)a=Math.max(a,g[h].length)|0;return a-1}function b(g,n){for(var a=g.length,h=e.mallocUint8(a),c=0;c<a;++c)h[c]=g[c]<n|0;return h}function v(g,n){for(var a=g.length,h=n*(n+1)/2*a|0,c=e.mallocUint32(h*2),m=0,o=0;o<a;++o)for(var t=g[o],n=t.length,i=0;i<n;++i)for(var r=0;r<i;++r){var x=t[r],A=t[i];c[m++]=Math.min(x,A)|0,c[m++]=Math.max(x,A)|0}var E=m/2|0;u(d(c,[E,2]));for(var P=2,o=2;o<m;o+=2)c[o-2]===c[o]&&c[o-1]===c[o+1]||(c[P++]=c[o],c[P++]=c[o+1]);return d(c,[P/2|0,2])}function y(g,n,a,h){for(var c=g.data,m=g.shape[0],o=e.mallocDouble(m),t=0,i=0;i<m;++i){var r=c[2*i],x=c[2*i+1];if(a[r]!==a[x]){var A=n[r],E=n[x];c[2*t]=r,c[2*t+1]=x,o[t++]=(E-h)/(E-A)}}return g.shape[0]=t,d(o,[t])}function T(g,n){var a=e.mallocInt32(n*2),h=g.shape[0],c=g.data;a[0]=0;for(var m=0,o=0;o<h;++o){var t=c[2*o];if(t!==m){for(a[2*m+1]=o;++m<t;)a[2*m]=o,a[2*m+1]=o;a[2*m]=o}}for(a[2*m+1]=h;++m<n;)a[2*m]=a[2*m+1]=h;return a}function _(g){for(var n=g.shape[0]|0,a=g.data,h=new Array(n),c=0;c<n;++c)h[c]=[a[2*c],a[2*c+1]];return h}function f(g,n,a,h){a=a||0,typeof h>"u"&&(h=l(g));var c=g.length;if(c===0||h<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=b(n,+a),o=v(g,h),t=y(o,n,m,+a),i=T(o,n.length|0),r=s(h)(g,o.data,i,m),x=_(o),A=[].slice.call(t.data,0,t.shape[0]);return e.free(m),e.free(o.data),e.free(t.data),e.free(i),{cells:r,vertexIds:x,vertexWeights:A}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(p,w,k){"use strict";w.exports=e;var d=[function(){function s(b,v,y,T){for(var _=Math.min(y,T)|0,f=Math.max(y,T)|0,g=b[2*_],n=b[2*_+1];g<n;){var a=g+n>>1,h=v[2*a+1];if(h===f)return a;f<h?n=a:g=a+1}return g}function l(b,v,y,T){for(var _=b.length,f=[],g=0;g<_;++g)var n=b[g],a=n.length;return f}return l},function(){function s(b,v,y,T){for(var _=Math.min(y,T)|0,f=Math.max(y,T)|0,g=b[2*_],n=b[2*_+1];g<n;){var a=g+n>>1,h=v[2*a+1];if(h===f)return a;f<h?n=a:g=a+1}return g}function l(b,v,y,T){for(var _=b.length,f=[],g=0;g<_;++g){var n=b[g],a=n.length;if(a===2){var h=(T[n[0]]<<0)+(T[n[1]]<<1);if(h===0||h===3)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[1])]);break;case 2:f.push([s(y,v,n[1],n[0])]);break;case 3:break}}}return f}return l},function(){function s(b,v,y,T){for(var _=Math.min(y,T)|0,f=Math.max(y,T)|0,g=b[2*_],n=b[2*_+1];g<n;){var a=g+n>>1,h=v[2*a+1];if(h===f)return a;f<h?n=a:g=a+1}return g}function l(b,v,y,T){for(var _=b.length,f=[],g=0;g<_;++g){var n=b[g],a=n.length;if(a===3){var h=(T[n[0]]<<0)+(T[n[1]]<<1)+(T[n[2]]<<2);if(h===0||h===7)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[2]),s(y,v,n[0],n[1])]);break;case 2:f.push([s(y,v,n[1],n[0]),s(y,v,n[1],n[2])]);break;case 3:f.push([s(y,v,n[0],n[2]),s(y,v,n[1],n[2])]);break;case 4:f.push([s(y,v,n[2],n[1]),s(y,v,n[2],n[0])]);break;case 5:f.push([s(y,v,n[2],n[1]),s(y,v,n[0],n[1])]);break;case 6:f.push([s(y,v,n[1],n[0]),s(y,v,n[2],n[0])]);break;case 7:break}}else if(a===2){var h=(T[n[0]]<<0)+(T[n[1]]<<1);if(h===0||h===3)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[1])]);break;case 2:f.push([s(y,v,n[1],n[0])]);break;case 3:break}}}return f}return l},function(){function s(b,v,y,T){for(var _=Math.min(y,T)|0,f=Math.max(y,T)|0,g=b[2*_],n=b[2*_+1];g<n;){var a=g+n>>1,h=v[2*a+1];if(h===f)return a;f<h?n=a:g=a+1}return g}function l(b,v,y,T){for(var _=b.length,f=[],g=0;g<_;++g){var n=b[g],a=n.length;if(a===4){var h=(T[n[0]]<<0)+(T[n[1]]<<1)+(T[n[2]]<<2)+(T[n[3]]<<3);if(h===0||h===15)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[1]),s(y,v,n[0],n[2]),s(y,v,n[0],n[3])]);break;case 2:f.push([s(y,v,n[1],n[2]),s(y,v,n[1],n[0]),s(y,v,n[1],n[3])]);break;case 3:f.push([s(y,v,n[1],n[2]),s(y,v,n[0],n[2]),s(y,v,n[0],n[3])],[s(y,v,n[1],n[3]),s(y,v,n[1],n[2]),s(y,v,n[0],n[3])]);break;case 4:f.push([s(y,v,n[2],n[0]),s(y,v,n[2],n[1]),s(y,v,n[2],n[3])]);break;case 5:f.push([s(y,v,n[0],n[1]),s(y,v,n[2],n[1]),s(y,v,n[0],n[3])],[s(y,v,n[2],n[1]),s(y,v,n[2],n[3]),s(y,v,n[0],n[3])]);break;case 6:f.push([s(y,v,n[2],n[0]),s(y,v,n[1],n[0]),s(y,v,n[1],n[3])],[s(y,v,n[2],n[3]),s(y,v,n[2],n[0]),s(y,v,n[1],n[3])]);break;case 7:f.push([s(y,v,n[0],n[3]),s(y,v,n[1],n[3]),s(y,v,n[2],n[3])]);break;case 8:f.push([s(y,v,n[3],n[1]),s(y,v,n[3],n[0]),s(y,v,n[3],n[2])]);break;case 9:f.push([s(y,v,n[3],n[1]),s(y,v,n[0],n[1]),s(y,v,n[0],n[2])],[s(y,v,n[3],n[2]),s(y,v,n[3],n[1]),s(y,v,n[0],n[2])]);break;case 10:f.push([s(y,v,n[1],n[0]),s(y,v,n[3],n[0]),s(y,v,n[1],n[2])],[s(y,v,n[3],n[0]),s(y,v,n[3],n[2]),s(y,v,n[1],n[2])]);break;case 11:f.push([s(y,v,n[1],n[2]),s(y,v,n[0],n[2]),s(y,v,n[3],n[2])]);break;case 12:f.push([s(y,v,n[3],n[0]),s(y,v,n[2],n[0]),s(y,v,n[2],n[1])],[s(y,v,n[3],n[1]),s(y,v,n[3],n[0]),s(y,v,n[2],n[1])]);break;case 13:f.push([s(y,v,n[0],n[1]),s(y,v,n[2],n[1]),s(y,v,n[3],n[1])]);break;case 14:f.push([s(y,v,n[2],n[0]),s(y,v,n[1],n[0]),s(y,v,n[3],n[0])]);break;case 15:break}}else if(a===3){var h=(T[n[0]]<<0)+(T[n[1]]<<1)+(T[n[2]]<<2);if(h===0||h===7)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[2]),s(y,v,n[0],n[1])]);break;case 2:f.push([s(y,v,n[1],n[0]),s(y,v,n[1],n[2])]);break;case 3:f.push([s(y,v,n[0],n[2]),s(y,v,n[1],n[2])]);break;case 4:f.push([s(y,v,n[2],n[1]),s(y,v,n[2],n[0])]);break;case 5:f.push([s(y,v,n[2],n[1]),s(y,v,n[0],n[1])]);break;case 6:f.push([s(y,v,n[1],n[0]),s(y,v,n[2],n[0])]);break;case 7:break}}else if(a===2){var h=(T[n[0]]<<0)+(T[n[1]]<<1);if(h===0||h===3)continue;switch(h){case 0:break;case 1:f.push([s(y,v,n[0],n[1])]);break;case 2:f.push([s(y,v,n[1],n[0])]);break;case 3:break}}}return f}return l}];function e(u){return d[u]()}},{}],293:[function(p,w,k){"use strict";var d=p("bit-twiddle"),e=p("union-find");function u(t){for(var i=0,r=Math.max,x=0,A=t.length;x<A;++x)i=r(i,t[x].length);return i-1}k.dimension=u;function s(t){for(var i=-1,r=Math.max,x=0,A=t.length;x<A;++x)for(var E=t[x],P=0,S=E.length;P<S;++P)i=r(i,E[P]);return i+1}k.countVertices=s;function l(t){for(var i=new Array(t.length),r=0,x=t.length;r<x;++r)i[r]=t[r].slice(0);return i}k.cloneCells=l;function b(t,i){var r=t.length,x=t.length-i.length,A=Math.min;if(x)return x;switch(r){case 0:return 0;case 1:return t[0]-i[0];case 2:var M=t[0]+t[1]-i[0]-i[1];return M||A(t[0],t[1])-A(i[0],i[1]);case 3:var E=t[0]+t[1],P=i[0]+i[1];if(M=E+t[2]-(P+i[2]),M)return M;var S=A(t[0],t[1]),C=A(i[0],i[1]),M=A(S,t[2])-A(C,i[2]);return M||A(S+t[2],E)-A(C+i[2],P);default:var I=t.slice(0);I.sort();var G=i.slice(0);G.sort();for(var V=0;V<r;++V)if(x=I[V]-G[V],x)return x;return 0}}k.compareCells=b;function v(t,i){return b(t[0],i[0])}function y(t,i){if(i){for(var r=t.length,x=new Array(r),A=0;A<r;++A)x[A]=[t[A],i[A]];x.sort(v);for(var A=0;A<r;++A)t[A]=x[A][0],i[A]=x[A][1];return t}else return t.sort(b),t}k.normalize=y;function T(t){if(t.length===0)return[];for(var i=1,r=t.length,x=1;x<r;++x){var A=t[x];if(b(A,t[x-1])){if(x===i){i++;continue}t[i++]=A}}return t.length=i,t}k.unique=T;function _(t,i){for(var r=0,x=t.length-1,A=-1;r<=x;){var E=r+x>>1,P=b(t[E],i);P<=0?(P===0&&(A=E),r=E+1):P>0&&(x=E-1)}return A}k.findCell=_;function f(t,i){for(var r=new Array(t.length),x=0,A=r.length;x<A;++x)r[x]=[];for(var E=[],x=0,P=i.length;x<P;++x)for(var S=i[x],C=S.length,M=1,I=1<<C;M<I;++M){E.length=d.popCount(M);for(var G=0,V=0;V<C;++V)M&1<<V&&(E[G++]=S[V]);var q=_(t,E);if(!(q<0))for(;r[q++].push(x),!(q>=t.length||b(t[q],E)!==0););}return r}k.incidence=f;function g(t,i){if(!i)return f(T(a(t,0)),t,0);for(var r=new Array(i),x=0;x<i;++x)r[x]=[];for(var x=0,A=t.length;x<A;++x)for(var E=t[x],P=0,S=E.length;P<S;++P)r[E[P]].push(x);return r}k.dual=g;function n(t){for(var i=[],r=0,x=t.length;r<x;++r)for(var A=t[r],E=A.length|0,P=1,S=1<<E;P<S;++P){for(var C=[],M=0;M<E;++M)P>>>M&1&&C.push(A[M]);i.push(C)}return y(i)}k.explode=n;function a(t,i){if(i<0)return[];for(var r=[],x=(1<<i+1)-1,A=0;A<t.length;++A)for(var E=t[A],P=x;P<1<<E.length;P=d.nextCombination(P)){for(var S=new Array(i+1),C=0,M=0;M<E.length;++M)P&1<<M&&(S[C++]=E[M]);r.push(S)}return y(r)}k.skeleton=a;function h(t){for(var i=[],r=0,x=t.length;r<x;++r)for(var A=t[r],E=0,P=A.length;E<P;++E){for(var S=new Array(A.length-1),C=0,M=0;C<P;++C)C!==E&&(S[M++]=A[C]);i.push(S)}return y(i)}k.boundary=h;function c(t,i){for(var r=new e(i),x=0;x<t.length;++x)for(var A=t[x],E=0;E<A.length;++E)for(var P=E+1;P<A.length;++P)r.link(A[E],A[P]);for(var S=[],C=r.ranks,x=0;x<C.length;++x)C[x]=-1;for(var x=0;x<t.length;++x){var M=r.find(t[x][0]);C[M]<0?(C[M]=S.length,S.push([t[x].slice(0)])):S[C[M]].push(t[x].slice(0))}return S}function m(t){for(var i=T(y(a(t,0))),r=new e(i.length),x=0;x<t.length;++x)for(var A=t[x],E=0;E<A.length;++E)for(var P=_(i,[A[E]]),S=E+1;S<A.length;++S)r.link(P,_(i,[A[S]]));for(var C=[],M=r.ranks,x=0;x<M.length;++x)M[x]=-1;for(var x=0;x<t.length;++x){var I=r.find(_(i,[t[x][0]]));M[I]<0?(M[I]=C.length,C.push([t[x].slice(0)])):C[M[I]].push(t[x].slice(0))}return C}function o(t,i){return i?c(t,i):m(t)}k.connectedComponents=o},{"bit-twiddle":32,"union-find":309}],294:[function(p,w,k){arguments[4][32][0].apply(k,arguments)},{dup:32}],295:[function(p,w,k){arguments[4][293][0].apply(k,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(p,w,k){"use strict";w.exports=d;function d(e){this.roots=new Array(e),this.ranks=new Array(e);for(var u=0;u<e;++u)this.roots[u]=u,this.ranks[u]=0}d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},d.prototype.find=function(e){for(var u=this.roots;u[e]!==e;){var s=u[e];u[e]=u[s],e=s}return e},d.prototype.link=function(e,u){var s=this.find(e),l=this.find(u);if(s!==l){var b=this.ranks,v=this.roots,y=b[s],T=b[l];y<T?v[s]=l:T<y?v[l]=s:(v[l]=s,++b[s])}}},{}],297:[function(p,w,k){"use strict";w.exports=s;var d=p("robust-orientation"),e=p("simplicial-complex");function u(l,b,v){var y=Math.abs(d(l,b,v)),T=Math.sqrt(Math.pow(b[0]-v[0],2)+Math.pow(b[1]-v[1],2));return y/T}function s(l,b,v){for(var y=b.length,T=l.length,_=new Array(y),f=new Array(y),g=new Array(y),n=new Array(y),a=0;a<y;++a)_[a]=f[a]=-1,g[a]=1/0,n[a]=!1;for(var a=0;a<T;++a){var h=l[a];if(h.length!==2)throw new Error("Input must be a graph");var c=h[1],m=h[0];f[m]!==-1?f[m]=-2:f[m]=c,_[c]!==-1?_[c]=-2:_[c]=m}function o(O){if(n[O])return 1/0;var Z=_[O],B=f[O];return Z<0||B<0?1/0:u(b[O],b[Z],b[B])}function t(O,Z){var B=C[O],Y=C[Z];C[O]=Y,C[Z]=B,M[B]=Z,M[Y]=O}function i(O){return g[C[O]]}function r(O){return O&1?O-1>>1:(O>>1)-1}function x(O){for(var Z=i(O);;){var B=Z,Y=2*O+1,j=2*(O+1),X=O;if(Y<G){var H=i(Y);H<B&&(X=Y,B=H)}if(j<G){var K=i(j);K<B&&(X=j)}if(X===O)return O;t(O,X),O=X}}function A(O){for(var Z=i(O);O>0;){var B=r(O);if(B>=0){var Y=i(B);if(Z<Y){t(O,B),O=B;continue}}return O}}function E(){if(G>0){var O=C[0];return t(0,G-1),G-=1,x(0),O}return-1}function P(O,Z){var B=C[O];return g[B]===Z?O:(g[B]=-1/0,A(O),E(),g[B]=Z,G+=1,A(G-1))}function S(O){if(!n[O]){n[O]=!0;var Z=_[O],B=f[O];_[B]>=0&&(_[B]=Z),f[Z]>=0&&(f[Z]=B),M[Z]>=0&&P(M[Z],o(Z)),M[B]>=0&&P(M[B],o(B))}}for(var C=[],M=new Array(y),a=0;a<y;++a){var I=g[a]=o(a);I<1/0?(M[a]=C.length,C.push(a)):M[a]=-1}for(var G=C.length,a=G>>1;a>=0;--a)x(a);for(;;){var V=E();if(V<0||g[V]>v)break;S(V)}for(var q=[],a=0;a<y;++a)n[a]||(M[a]=q.length,q.push(b[a].slice()));var ee=q.length;function Q(O,Z){if(O[Z]<0)return Z;var B=Z,Y=Z;do{var j=O[Y];if(!n[Y]||j<0||j===Y||(Y=j,j=O[Y],!n[Y]||j<0||j===Y))break;Y=j,B=O[B]}while(B!==Y);for(var X=Z;X!==Y;X=O[X])O[X]=Y;return Y}var U=[];return l.forEach(function(O){var Z=Q(_,O[0]),B=Q(f,O[1]);if(Z>=0&&B>=0&&Z!==B){var Y=M[Z],j=M[B];Y!==j&&U.push([Y,j])}}),e.unique(e.normalize(U)),{positions:q,edges:U}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(p,w,k){"use strict";w.exports=u;var d=p("robust-orientation");function e(s,l){var b,v;if(l[0][0]<l[1][0])b=l[0],v=l[1];else if(l[0][0]>l[1][0])b=l[1],v=l[0];else{var y=Math.min(s[0][1],s[1][1]),T=Math.max(s[0][1],s[1][1]),_=Math.min(l[0][1],l[1][1]),f=Math.max(l[0][1],l[1][1]);return T<_?T-_:y>f?y-f:T-f}var g,n;s[0][1]<s[1][1]?(g=s[0],n=s[1]):(g=s[1],n=s[0]);var a=d(v,b,g);return a||(a=d(v,b,n),a)?a:n-v}function u(s,l){var b,v;if(l[0][0]<l[1][0])b=l[0],v=l[1];else if(l[0][0]>l[1][0])b=l[1],v=l[0];else return e(l,s);var y,T;if(s[0][0]<s[1][0])y=s[0],T=s[1];else if(s[0][0]>s[1][0])y=s[1],T=s[0];else return-e(s,l);var _=d(b,v,T),f=d(b,v,y);if(_<0){if(f<=0)return _}else if(_>0){if(f>=0)return _}else if(f)return f;if(_=d(T,y,v),f=d(T,y,b),_<0){if(f<=0)return _}else if(_>0){if(f>=0)return _}else if(f)return f;return v[0]-T[0]}},{"robust-orientation":284}],299:[function(p,w,k){"use strict";w.exports=f;var d=p("binary-search-bounds"),e=p("functional-red-black-tree"),u=p("robust-orientation"),s=p("./lib/order-segments");function l(g,n,a){this.slabs=g,this.coordinates=n,this.horizontal=a}var b=l.prototype;function v(g,n){return g.y-n}function y(g,n){for(var a=null;g;){var h=g.key,c,m;h[0][0]<h[1][0]?(c=h[0],m=h[1]):(c=h[1],m=h[0]);var o=u(c,m,n);if(o<0)g=g.left;else if(o>0)if(n[0]!==h[1][0])a=g,g=g.right;else{var t=y(g.right,n);if(t)return t;g=g.left}else{if(n[0]!==h[1][0])return g;var t=y(g.right,n);if(t)return t;g=g.left}}return a}b.castUp=function(g){var n=d.le(this.coordinates,g[0]);if(n<0)return-1;var a=this.slabs[n],h=y(this.slabs[n],g),c=-1;if(h&&(c=h.value),this.coordinates[n]===g[0]){var m=null;if(h&&(m=h.key),n>0){var o=y(this.slabs[n-1],g);o&&(m?s(o.key,m)>0&&(m=o.key,c=o.value):(c=o.value,m=o.key))}var t=this.horizontal[n];if(t.length>0){var i=d.ge(t,g[1],v);if(i<t.length){var r=t[i];if(g[1]===r.y){if(r.closed)return r.index;for(;i<t.length-1&&t[i+1].y===g[1];)if(i=i+1,r=t[i],r.closed)return r.index;if(r.y===g[1]&&!r.start){if(i=i+1,i>=t.length)return c;r=t[i]}}if(r.start)if(m){var x=u(m[0],m[1],[g[0],r.y]);m[0][0]>m[1][0]&&(x=-x),x>0&&(c=r.index)}else c=r.index;else r.y!==g[1]&&(c=r.index)}}}return c};function T(g,n,a,h){this.y=g,this.index=n,this.start=a,this.closed=h}function _(g,n,a,h){this.x=g,this.segment=n,this.create=a,this.index=h}function f(g){for(var n=g.length,a=2*n,h=new Array(a),c=0;c<n;++c){var m=g[c],o=m[0][0]<m[1][0];h[2*c]=new _(m[0][0],m,o,c),h[2*c+1]=new _(m[1][0],m,!o,c)}h.sort(function(C,M){var I=C.x-M.x;return I||(I=C.create-M.create,I)?I:Math.min(C.segment[0][1],C.segment[1][1])-Math.min(M.segment[0][1],M.segment[1][1])});for(var t=e(s),i=[],r=[],x=[],A=-1/0,c=0;c<a;){for(var E=h[c].x,P=[];c<a;){var S=h[c];if(S.x!==E)break;c+=1,S.segment[0][0]===S.x&&S.segment[1][0]===S.x?S.create&&(S.segment[0][1]<S.segment[1][1]?(P.push(new T(S.segment[0][1],S.index,!0,!0)),P.push(new T(S.segment[1][1],S.index,!1,!1))):(P.push(new T(S.segment[1][1],S.index,!0,!1)),P.push(new T(S.segment[0][1],S.index,!1,!0)))):S.create?t=t.insert(S.segment,S.index):t=t.remove(S.segment)}i.push(t.root),r.push(E),x.push(P)}return new l(i,r,x)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(p,w,k){"use strict";var d=p("robust-dot-product"),e=p("robust-sum");w.exports=l,w.exports.positive=b,w.exports.negative=v;function u(y,T){var _=e(d(y,T),[T[T.length-1]]);return _[_.length-1]}function s(y,T,_,f){var g=f-T,n=-T/g;n<0?n=0:n>1&&(n=1);for(var a=1-n,h=y.length,c=new Array(h),m=0;m<h;++m)c[m]=n*y[m]+a*_[m];return c}function l(y,T){for(var _=[],f=[],g=u(y[y.length-1],T),n=y[y.length-1],a=y[0],h=0;h<y.length;++h,n=a){a=y[h];var c=u(a,T);if(g<0&&c>0||g>0&&c<0){var m=s(n,c,a,g);_.push(m),f.push(m.slice())}c<0?f.push(a.slice()):c>0?_.push(a.slice()):(_.push(a.slice()),f.push(a.slice())),g=c}return{positive:_,negative:f}}function b(y,T){for(var _=[],f=u(y[y.length-1],T),g=y[y.length-1],n=y[0],a=0;a<y.length;++a,g=n){n=y[a];var h=u(n,T);(f<0&&h>0||f>0&&h<0)&&_.push(s(g,h,n,f)),h>=0&&_.push(n.slice()),f=h}return _}function v(y,T){for(var _=[],f=u(y[y.length-1],T),g=y[y.length-1],n=y[0],a=0;a<y.length;++a,g=n){n=y[a];var h=u(n,T);(f<0&&h>0||f>0&&h<0)&&_.push(s(g,h,n,f)),h<=0&&_.push(n.slice()),f=h}return _}},{"robust-dot-product":281,"robust-sum":289}],301:[function(p,w,k){(function(){"use strict";var d={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(v){return s(b(v),arguments)}function u(v,y){return e.apply(null,[v].concat(y||[]))}function s(v,y){var T=1,_=v.length,f,g="",n,a,h,c,m,o,t,i;for(n=0;n<_;n++)if(typeof v[n]=="string")g+=v[n];else if(typeof v[n]=="object"){if(h=v[n],h.keys)for(f=y[T],a=0;a<h.keys.length;a++){if(f==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[a],h.keys[a-1]));f=f[h.keys[a]]}else h.param_no?f=y[h.param_no]:f=y[T++];if(d.not_type.test(h.type)&&d.not_primitive.test(h.type)&&f instanceof Function&&(f=f()),d.numeric_arg.test(h.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(e("[sprintf] expecting number but found %T",f));switch(d.number.test(h.type)&&(t=f>=0),h.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,h.width?parseInt(h.width):0);break;case"e":f=h.precision?parseFloat(f).toExponential(h.precision):parseFloat(f).toExponential();break;case"f":f=h.precision?parseFloat(f).toFixed(h.precision):parseFloat(f);break;case"g":f=h.precision?String(Number(f.toPrecision(h.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=h.precision?f.substring(0,h.precision):f;break;case"t":f=String(!!f),f=h.precision?f.substring(0,h.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=h.precision?f.substring(0,h.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=h.precision?f.substring(0,h.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}d.json.test(h.type)?g+=f:(d.number.test(h.type)&&(!t||h.sign)?(i=t?"+":"-",f=f.toString().replace(d.sign,"")):i="",m=h.pad_char?h.pad_char==="0"?"0":h.pad_char.charAt(1):" ",o=h.width-(i+f).length,c=h.width&&o>0?m.repeat(o):"",g+=h.align?i+f+c:m==="0"?i+c+f:c+i+f)}return g}var l=Object.create(null);function b(v){if(l[v])return l[v];for(var y=v,T,_=[],f=0;y;){if((T=d.text.exec(y))!==null)_.push(T[0]);else if((T=d.modulo.exec(y))!==null)_.push("%");else if((T=d.placeholder.exec(y))!==null){if(T[2]){f|=1;var g=[],n=T[2],a=[];if((a=d.key.exec(n))!==null)for(g.push(a[1]);(n=n.substring(a[0].length))!=="";)if((a=d.key_access.exec(n))!==null)g.push(a[1]);else if((a=d.index_access.exec(n))!==null)g.push(a[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");T[2]=g}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");_.push({placeholder:T[0],param_no:T[1],keys:T[2],sign:T[3],pad_char:T[4],align:T[5],width:T[6],precision:T[7],type:T[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");y=y.substring(T[0].length)}return l[v]=_}typeof k<"u"&&(k.sprintf=e,k.vsprintf=u),typeof window<"u"&&(window.sprintf=e,window.vsprintf=u,typeof L=="function"&&L.amd&&L(function(){return{sprintf:e,vsprintf:u}}))})()},{}],302:[function(p,w,k){"use strict";w.exports=v;var d=p("ndarray-extract-contour"),e=p("zero-crossings"),u={"2d":function(y,T,_){var f=y({order:T,scalarArguments:3,getters:_==="generic"?[0]:void 0,phase:function(n,a,h,c){return n>c|0},vertex:function(n,a,h,c,m,o,t,i,r,x,A,E,P){var S=(t<<0)+(i<<1)+(r<<2)+(x<<3)|0;if(!(S===0||S===15))switch(S){case 0:A.push([n-.5,a-.5]);break;case 1:A.push([n-.25-.25*(c+h-2*P)/(h-c),a-.25-.25*(m+h-2*P)/(h-m)]);break;case 2:A.push([n-.75-.25*(-c-h+2*P)/(c-h),a-.25-.25*(o+c-2*P)/(c-o)]);break;case 3:A.push([n-.5,a-.5-.5*(m+h+o+c-4*P)/(h-m+c-o)]);break;case 4:A.push([n-.25-.25*(o+m-2*P)/(m-o),a-.75-.25*(-m-h+2*P)/(m-h)]);break;case 5:A.push([n-.5-.5*(c+h+o+m-4*P)/(h-c+m-o),a-.5]);break;case 6:A.push([n-.5-.25*(-c-h+o+m)/(c-h+m-o),a-.5-.25*(-m-h+o+c)/(m-h+c-o)]);break;case 7:A.push([n-.75-.25*(o+m-2*P)/(m-o),a-.75-.25*(o+c-2*P)/(c-o)]);break;case 8:A.push([n-.75-.25*(-o-m+2*P)/(o-m),a-.75-.25*(-o-c+2*P)/(o-c)]);break;case 9:A.push([n-.5-.25*(c+h+-o-m)/(h-c+o-m),a-.5-.25*(m+h+-o-c)/(h-m+o-c)]);break;case 10:A.push([n-.5-.5*(-c-h+-o-m+4*P)/(c-h+o-m),a-.5]);break;case 11:A.push([n-.25-.25*(-o-m+2*P)/(o-m),a-.75-.25*(m+h-2*P)/(h-m)]);break;case 12:A.push([n-.5,a-.5-.5*(-m-h+-o-c+4*P)/(m-h+o-c)]);break;case 13:A.push([n-.75-.25*(c+h-2*P)/(h-c),a-.25-.25*(-o-c+2*P)/(o-c)]);break;case 14:A.push([n-.25-.25*(-c-h+2*P)/(c-h),a-.25-.25*(-m-h+2*P)/(m-h)]);break;case 15:A.push([n-.5,a-.5]);break}},cell:function(n,a,h,c,m,o,t,i,r){m?i.push([n,a]):i.push([a,n])}});return function(g,n){var a=[],h=[];return f(g,a,h,n),{positions:a,cells:h}}}};function s(y,T){var _=y.length+"d",f=u[_];if(f)return f(d,y,T)}function l(y,T){for(var _=e(y,T),f=_.length,g=new Array(f),n=new Array(f),a=0;a<f;++a)g[a]=[_[a]],n[a]=[a];return{positions:g,cells:n}}var b={};function v(y,g){if(y.dimension<=0)return{positions:[],cells:[]};if(y.dimension===1)return l(y,g);var _=y.order.join()+"-"+y.dtype,f=b[_],g=+g||0;return f||(f=b[_]=s(y.order,y.dtype)),f(y,g)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(p,w,k){(function(d){(function(){"use strict";w.exports=b;var e=p("vectorize-text"),u=window||d.global||{},s=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};function l(v){for(var y=v.cells,T=v.positions,_=new Float32Array(y.length*6),f=0,g=0,n=0;n<y.length;++n)for(var a=y[n],h=0;h<3;++h){var c=T[a[h]];_[f++]=c[0],_[f++]=c[1]+1.4,g=Math.max(c[0],g)}return{data:_,shape:g}}function b(v,y,_){var _=_||{},f=s[v];f||(f=s[v]={" ":{data:new Float32Array(0),shape:.2}});var g=f[y];if(!g)if(y.length<=1||!/\d/.test(y))g=f[y]=l(e(y,{triangles:!0,font:v,textAlign:_.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var n=y.split(/(\d|\s)/),a=new Array(n.length),h=0,c=0,m=0;m<n.length;++m)a[m]=b(v,n[m]),h+=a[m].data.length,c+=a[m].shape,m>0&&(c+=.02);for(var o=new Float32Array(h),t=0,i=-.5*c,m=0;m<a.length;++m){for(var r=a[m].data,x=0;x<r.length;x+=2)o[t++]=r[x]+i,o[t++]=r[x+1];i+=a[m].shape+.02}g=f[y]={data:o,shape:c}}return g}}).call(this)}).call(this,p("_process"))},{_process:5,"vectorize-text":311}],304:[function(p,w,k){"use strict";var d=p("parse-unit");w.exports=l;var e=96;function u(b,v){var y=d(getComputedStyle(b).getPropertyValue(v));return y[0]*l(y[1],b)}function s(b,v){var y=document.createElement("div");y.style["font-size"]="128"+b,v.appendChild(y);var T=u(y,"font-size")/128;return v.removeChild(y),T}function l(b,v){switch(v=v||document.body,b=(b||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),b){case"%":return v.clientHeight/100;case"ch":case"ex":return s(b,v);case"em":return u(v,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return e;case"cm":return e/2.54;case"mm":return e/25.4;case"pt":return e/72;case"pc":return e/6}return 1}},{"parse-unit":265}],305:[function(p,w,k){"use strict";w.exports=n;var d=p("filtered-vector"),e=p("gl-mat4/invert"),u=p("gl-mat4/rotate"),s=p("gl-vec3/cross"),l=p("gl-vec3/normalize"),b=p("gl-vec3/dot");function v(a,h,c){return Math.sqrt(Math.pow(a,2)+Math.pow(h,2)+Math.pow(c,2))}function y(a){return Math.min(1,Math.max(-1,a))}function T(a){var h=Math.abs(a[0]),c=Math.abs(a[1]),m=Math.abs(a[2]),o=[0,0,0];h>Math.max(c,m)?o[2]=1:c>Math.max(h,m)?o[0]=1:o[1]=1;for(var t=0,i=0,r=0;r<3;++r)t+=a[r]*a[r],i+=o[r]*a[r];for(var r=0;r<3;++r)o[r]-=i/t*a[r];return l(o,o),o}function _(a,h,c,m,o,t,i,r){this.center=d(c),this.up=d(m),this.right=d(o),this.radius=d([t]),this.angle=d([i,r]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(a,h),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var x=0;x<16;++x)this.computedMatrix[x]=.5;this.recalcMatrix(0)}var f=_.prototype;f.setDistanceLimits=function(a,h){a>0?a=Math.log(a):a=-1/0,h>0?h=Math.log(h):h=1/0,h=Math.max(h,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=h},f.getDistanceLimits=function(a){var h=this.radius.bounds[0];return a?(a[0]=Math.exp(h[0][0]),a[1]=Math.exp(h[1][0]),a):[Math.exp(h[0][0]),Math.exp(h[1][0])]},f.recalcMatrix=function(a){this.center.curve(a),this.up.curve(a),this.right.curve(a),this.radius.curve(a),this.angle.curve(a);for(var h=this.computedUp,c=this.computedRight,m=0,o=0,t=0;t<3;++t)o+=h[t]*c[t],m+=h[t]*h[t];for(var i=Math.sqrt(m),r=0,t=0;t<3;++t)c[t]-=h[t]*o/m,r+=c[t]*c[t],h[t]/=i;for(var x=Math.sqrt(r),t=0;t<3;++t)c[t]/=x;var A=this.computedToward;s(A,h,c),l(A,A);for(var E=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],C=Math.cos(P),M=Math.sin(P),I=Math.cos(S),G=Math.sin(S),V=this.computedCenter,q=C*I,ee=M*I,Q=G,U=-C*G,O=-M*G,Z=I,B=this.computedEye,Y=this.computedMatrix,t=0;t<3;++t){var j=q*c[t]+ee*A[t]+Q*h[t];Y[4*t+1]=U*c[t]+O*A[t]+Z*h[t],Y[4*t+2]=j,Y[4*t+3]=0}var X=Y[1],H=Y[5],K=Y[9],W=Y[2],$=Y[6],re=Y[10],de=H*re-K*$,ve=K*W-X*re,ue=X*$-H*W,ce=v(de,ve,ue);de/=ce,ve/=ce,ue/=ce,Y[0]=de,Y[4]=ve,Y[8]=ue;for(var t=0;t<3;++t)B[t]=V[t]+Y[2+4*t]*E;for(var t=0;t<3;++t){for(var r=0,_e=0;_e<3;++_e)r+=Y[t+4*_e]*B[_e];Y[12+t]=-r}Y[15]=1},f.getMatrix=function(a,h){this.recalcMatrix(a);var c=this.computedMatrix;if(h){for(var m=0;m<16;++m)h[m]=c[m];return h}return c};var g=[0,0,0];f.rotate=function(a,h,c,m){if(this.angle.move(a,h,c),m){this.recalcMatrix(a);var o=this.computedMatrix;g[0]=o[2],g[1]=o[6],g[2]=o[10];for(var t=this.computedUp,i=this.computedRight,r=this.computedToward,x=0;x<3;++x)o[4*x]=t[x],o[4*x+1]=i[x],o[4*x+2]=r[x];u(o,o,m,g);for(var x=0;x<3;++x)t[x]=o[4*x],i[x]=o[4*x+1];this.up.set(a,t[0],t[1],t[2]),this.right.set(a,i[0],i[1],i[2])}},f.pan=function(a,h,c,m){h=h||0,c=c||0,m=m||0,this.recalcMatrix(a);var o=this.computedMatrix,t=Math.exp(this.computedRadius[0]),i=o[1],r=o[5],x=o[9],A=v(i,r,x);i/=A,r/=A,x/=A;var E=o[0],P=o[4],S=o[8],C=E*i+P*r+S*x;E-=i*C,P-=r*C,S-=x*C;var M=v(E,P,S);E/=M,P/=M,S/=M;var I=E*h+i*c,G=P*h+r*c,V=S*h+x*c;this.center.move(a,I,G,V);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+m),this.radius.set(a,Math.log(q))},f.translate=function(a,h,c,m){this.center.move(a,h||0,c||0,m||0)},f.setMatrix=function(a,h,c,m){var o=1;typeof c=="number"&&(o=c|0),(o<0||o>3)&&(o=1);var t=(o+2)%3,i=(o+1)%3;h||(this.recalcMatrix(a),h=this.computedMatrix);var r=h[o],x=h[o+4],A=h[o+8];if(m){var P=Math.abs(r),S=Math.abs(x),C=Math.abs(A),M=Math.max(P,S,C);P===M?(r=r<0?-1:1,x=A=0):C===M?(A=A<0?-1:1,r=x=0):(x=x<0?-1:1,r=A=0)}else{var E=v(r,x,A);r/=E,x/=E,A/=E}var I=h[t],G=h[t+4],V=h[t+8],q=I*r+G*x+V*A;I-=r*q,G-=x*q,V-=A*q;var ee=v(I,G,V);I/=ee,G/=ee,V/=ee;var Q=x*V-A*G,U=A*I-r*V,O=r*G-x*I,Z=v(Q,U,O);Q/=Z,U/=Z,O/=Z,this.center.jump(a,we,be,Me),this.radius.idle(a),this.up.jump(a,r,x,A),this.right.jump(a,I,G,V);var B,Y;if(o===2){var j=h[1],X=h[5],H=h[9],K=j*I+X*G+H*V,W=j*Q+X*U+H*O;ve<0?B=-Math.PI/2:B=Math.PI/2,Y=Math.atan2(W,K)}else{var $=h[2],re=h[6],de=h[10],ve=$*r+re*x+de*A,ue=$*I+re*G+de*V,ce=$*Q+re*U+de*O;B=Math.asin(y(ve)),Y=Math.atan2(ce,ue)}this.angle.jump(a,Y,B),this.recalcMatrix(a);var _e=h[2],fe=h[6],ne=h[10],ie=this.computedMatrix;e(ie,h);var me=ie[15],we=ie[12]/me,be=ie[13]/me,Me=ie[14]/me,Ie=Math.exp(this.computedRadius[0]);this.center.jump(a,we-_e*Ie,be-fe*Ie,Me-ne*Ie)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(a){this.center.idle(a),this.up.idle(a),this.right.idle(a),this.radius.idle(a),this.angle.idle(a)},f.flush=function(a){this.center.flush(a),this.up.flush(a),this.right.flush(a),this.radius.flush(a),this.angle.flush(a)},f.setDistance=function(a,h){h>0&&this.radius.set(a,Math.log(h))},f.lookAt=function(a,h,c,m){this.recalcMatrix(a),h=h||this.computedEye,c=c||this.computedCenter,m=m||this.computedUp;var o=m[0],t=m[1],i=m[2],r=v(o,t,i);if(!(r<1e-6)){o/=r,t/=r,i/=r;var x=h[0]-c[0],A=h[1]-c[1],E=h[2]-c[2],P=v(x,A,E);if(!(P<1e-6)){x/=P,A/=P,E/=P;var S=this.computedRight,C=S[0],M=S[1],I=S[2],G=o*C+t*M+i*I;C-=G*o,M-=G*t,I-=G*i;var V=v(C,M,I);if(!(V<.01&&(C=t*E-i*A,M=i*x-o*E,I=o*A-t*x,V=v(C,M,I),V<1e-6))){C/=V,M/=V,I/=V,this.up.set(a,o,t,i),this.right.set(a,C,M,I),this.center.set(a,c[0],c[1],c[2]),this.radius.set(a,Math.log(P));var q=t*I-i*M,ee=i*C-o*I,Q=o*M-t*C,U=v(q,ee,Q);q/=U,ee/=U,Q/=U;var O=o*x+t*A+i*E,Z=C*x+M*A+I*E,B=q*x+ee*A+Q*E,Y=Math.asin(y(O)),j=Math.atan2(B,Z),X=this.angle._state,H=X[X.length-1],K=X[X.length-2];H=H%(2*Math.PI);var W=Math.abs(H+2*Math.PI-j),$=Math.abs(H-j),re=Math.abs(H-2*Math.PI-j);W<$&&(H+=2*Math.PI),re<$&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,K),this.angle.set(a,j,Y)}}}};function n(a){a=a||{};var h=a.center||[0,0,0],c=a.up||[0,1,0],m=a.right||T(c),o=a.radius||1,t=a.theta||0,i=a.phi||0;if(h=[].slice.call(h,0,3),c=[].slice.call(c,0,3),l(c,c),m=[].slice.call(m,0,3),l(m,m),"eye"in a){var r=a.eye,x=[r[0]-h[0],r[1]-h[1],r[2]-h[2]];s(m,x,c),v(m[0],m[1],m[2])<1e-6?m=T(c):l(m,m),o=v(x[0],x[1],x[2]);var A=b(c,x)/o,E=b(m,x)/o;i=Math.acos(A),t=Math.acos(E)}return o=Math.log(o),new _(a.zoomMin,a.zoomMax,h,c,m,o,t,i)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(p,w,k){"use strict";w.exports=e;var d=+(Math.pow(2,27)+1);function e(u,s,l){var b=u*s,v=d*u,y=v-u,T=v-y,_=u-T,f=d*s,g=f-s,n=f-g,a=s-n,h=b-T*n,c=h-_*n,m=c-T*a,o=_*a-m;return l?(l[0]=o,l[1]=b,l):[o,b]}},{}],307:[function(p,w,k){"use strict";w.exports=d;function d(e,u,s){var l=e+u,b=l-e,v=l-b,y=u-b,T=e-v;return s?(s[0]=T+y,s[1]=l,s):[T+y,l]}},{}],308:[function(p,w,k){(function(d){(function(){"use strict";var e=p("bit-twiddle"),u=p("dup"),s=p("buffer").Buffer;d.__TYPEDARRAY_POOL||(d.__TYPEDARRAY_POOL={UINT8:u([32,0]),UINT16:u([32,0]),UINT32:u([32,0]),BIGUINT64:u([32,0]),INT8:u([32,0]),INT16:u([32,0]),INT32:u([32,0]),BIGINT64:u([32,0]),FLOAT:u([32,0]),DOUBLE:u([32,0]),DATA:u([32,0]),UINT8C:u([32,0]),BUFFER:u([32,0])});var l=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",y=d.__TYPEDARRAY_POOL;y.UINT8C||(y.UINT8C=u([32,0])),y.BIGUINT64||(y.BIGUINT64=u([32,0])),y.BIGINT64||(y.BIGINT64=u([32,0])),y.BUFFER||(y.BUFFER=u([32,0]));var T=y.DATA,_=y.BUFFER;k.free=function(M){if(s.isBuffer(M))_[e.log2(M.length)].push(M);else{if(Object.prototype.toString.call(M)!=="[object ArrayBuffer]"&&(M=M.buffer),!M)return;var I=M.length||M.byteLength,G=e.log2(I)|0;T[G].push(M)}};function f(C){if(!!C){var M=C.length||C.byteLength,I=e.log2(M);T[I].push(C)}}function g(C){f(C.buffer)}k.freeUint8=k.freeUint16=k.freeUint32=k.freeBigUint64=k.freeInt8=k.freeInt16=k.freeInt32=k.freeBigInt64=k.freeFloat32=k.freeFloat=k.freeFloat64=k.freeDouble=k.freeUint8Clamped=k.freeDataView=g,k.freeArrayBuffer=f,k.freeBuffer=function(M){_[e.log2(M.length)].push(M)},k.malloc=function(M,I){if(I===void 0||I==="arraybuffer")return n(M);switch(I){case"uint8":return a(M);case"uint16":return h(M);case"uint32":return c(M);case"int8":return m(M);case"int16":return o(M);case"int32":return t(M);case"float":case"float32":return i(M);case"double":case"float64":return r(M);case"uint8_clamped":return x(M);case"bigint64":return E(M);case"biguint64":return A(M);case"buffer":return S(M);case"data":case"dataview":return P(M);default:return null}return null};function n(M){var M=e.nextPow2(M),I=e.log2(M),G=T[I];return G.length>0?G.pop():new ArrayBuffer(M)}k.mallocArrayBuffer=n;function a(C){return new Uint8Array(n(C),0,C)}k.mallocUint8=a;function h(C){return new Uint16Array(n(2*C),0,C)}k.mallocUint16=h;function c(C){return new Uint32Array(n(4*C),0,C)}k.mallocUint32=c;function m(C){return new Int8Array(n(C),0,C)}k.mallocInt8=m;function o(C){return new Int16Array(n(2*C),0,C)}k.mallocInt16=o;function t(C){return new Int32Array(n(4*C),0,C)}k.mallocInt32=t;function i(C){return new Float32Array(n(4*C),0,C)}k.mallocFloat32=k.mallocFloat=i;function r(C){return new Float64Array(n(8*C),0,C)}k.mallocFloat64=k.mallocDouble=r;function x(C){return l?new Uint8ClampedArray(n(C),0,C):a(C)}k.mallocUint8Clamped=x;function A(C){return b?new BigUint64Array(n(8*C),0,C):null}k.mallocBigUint64=A;function E(C){return v?new BigInt64Array(n(8*C),0,C):null}k.mallocBigInt64=E;function P(C){return new DataView(n(C),0,C)}k.mallocDataView=P;function S(C){C=e.nextPow2(C);var M=e.log2(C),I=_[M];return I.length>0?I.pop():new s(C)}k.mallocBuffer=S,k.clearCache=function(){for(var M=0;M<32;++M)y.UINT8[M].length=0,y.UINT16[M].length=0,y.UINT32[M].length=0,y.INT8[M].length=0,y.INT16[M].length=0,y.INT32[M].length=0,y.FLOAT[M].length=0,y.DOUBLE[M].length=0,y.BIGUINT64[M].length=0,y.BIGINT64[M].length=0,y.UINT8C[M].length=0,T[M].length=0,_[M].length=0}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(p,w,k){"use strict";w.exports=d;function d(u){this.roots=new Array(u),this.ranks=new Array(u);for(var s=0;s<u;++s)this.roots[s]=s,this.ranks[s]=0}var e=d.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var u=this.roots.length;return this.roots.push(u),this.ranks.push(0),u},e.find=function(u){for(var s=u,l=this.roots;l[u]!==u;)u=l[u];for(;l[s]!==u;){var b=l[s];l[s]=u,s=b}return u},e.link=function(u,s){var l=this.find(u),b=this.find(s);if(l!==b){var v=this.ranks,y=this.roots,T=v[l],_=v[b];T<_?y[l]=b:_<T?y[b]=l:(y[b]=l,++v[l])}}},{}],310:[function(p,w,k){"use strict";function d(s,l){for(var b=1,v=s.length,y=s[0],T=s[0],_=1;_<v;++_)if(T=y,y=s[_],l(y,T)){if(_===b){b++;continue}s[b++]=y}return s.length=b,s}function e(s){for(var l=1,b=s.length,v=s[0],y=s[0],T=1;T<b;++T,y=v)if(y=v,v=s[T],v!==y){if(T===l){l++;continue}s[l++]=v}return s.length=l,s}function u(s,l,b){return s.length===0?s:l?(b||s.sort(l),d(s,l)):(b||s.sort(),e(s))}w.exports=u},{}],311:[function(p,w,k){"use strict";w.exports=s;var d=p("./lib/vtext"),e=null,u=null;typeof document<"u"&&(e=document.createElement("canvas"),e.width=8192,e.height=1024,u=e.getContext("2d"));function s(l,b){return(typeof b!="object"||b===null)&&(b={}),d(l,b.canvas||e,b.context||u,b)}},{"./lib/vtext":312}],312:[function(p,w,k){w.exports=A,w.exports.processPixels=x;var d=p("surface-nets"),e=p("ndarray"),u=p("simplify-planar-graph"),s=p("clean-pslg"),l=p("cdt2d"),b=p("planar-graph-to-polyline"),v="b",y="b|",T="i",_="i|",f="sup",g="+",n="+1",a="sub",h="-",c="-1";function m(E,P,S,C){for(var M="<"+E+">",I="</"+E+">",G=M.length,V=I.length,q=P[0]===g||P[0]===h,ee=0,Q=-V;ee>-1&&(ee=S.indexOf(M,ee),!(ee===-1||(Q=S.indexOf(I,ee+G),Q===-1)||Q<=ee));){for(var U=ee;U<Q+V;++U)if(U<ee+G||U>=Q)C[U]=null,S=S.substr(0,U)+" "+S.substr(U+1);else if(C[U]!==null){var O=C[U].indexOf(P[0]);O===-1?C[U]+=P:q&&(C[U]=C[U].substr(0,O+1)+(1+parseInt(C[U][O+1]))+C[U].substr(O+2))}var Z=ee+G,B=S.substr(Z,Q-Z),Y=B.indexOf(M);Y!==-1?ee=Y:ee=Q+V}return C}function o(E,P,S){for(var C=P.textAlign||"start",M=P.textBaseline||"alphabetic",I=[1<<30,1<<30],G=[0,0],V=E.length,q=0;q<V;++q)for(var ee=E[q],Q=0;Q<2;++Q)I[Q]=Math.min(I[Q],ee[Q])|0,G[Q]=Math.max(G[Q],ee[Q])|0;var U=0;switch(C){case"center":U=-.5*(I[0]+G[0]);break;case"right":case"end":U=-G[0];break;case"left":case"start":U=-I[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+C+"'")}var O=0;switch(M){case"hanging":case"top":O=-I[1];break;case"middle":O=-.5*(I[1]+G[1]);break;case"alphabetic":case"ideographic":O=-3*S;break;case"bottom":O=-G[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+M+"'")}var Z=1/S;return"lineHeight"in P?Z*=+P.lineHeight:"width"in P?Z=P.width/(G[0]-I[0]):"height"in P&&(Z=P.height/(G[1]-I[1])),E.map(function(B){return[Z*(B[0]+U),Z*(B[1]+O)]})}function t(E,P,S,C,M,I){S=S.replace(/\n/g,""),I.breaklines===!0?S=S.replace(/\<br\>/g,`
`):S=S.replace(/\<br\>/g," ");var G="",V=[];for(H=0;H<S.length;++H)V[H]=G;I.bolds===!0&&(V=m(v,y,S,V)),I.italics===!0&&(V=m(T,_,S,V)),I.superscripts===!0&&(V=m(f,n,S,V)),I.subscripts===!0&&(V=m(a,c,S,V));var q=[],ee="";for(H=0;H<S.length;++H)V[H]!==null&&(ee+=S[H],q.push(V[H]));var Q=ee.split(`
`),U=Q.length,O=Math.round(M*C),Z=C,B=C*2,Y=0,j=U*O+B;E.height<j&&(E.height=j),P.fillStyle="#000",P.fillRect(0,0,E.width,E.height),P.fillStyle="#fff";var X,H,K,W,$,re=0,de="";function ve(){if(de!==""){var be=P.measureText(de).width;P.fillText(de,Z+K,B+W),K+=be}}function ue(){return""+Math.round($)+"px "}function ce(be,Me){var Ie=""+P.font;if(I.subscripts===!0){var Ke=be.indexOf(h),Oe=Me.indexOf(h),We=Ke>-1?parseInt(be[1+Ke]):0,Fe=Oe>-1?parseInt(Me[1+Oe]):0;We!==Fe&&(Ie=Ie.replace(ue(),"?px "),$*=Math.pow(.75,Fe-We),Ie=Ie.replace("?px ",ue())),W+=.25*O*(Fe-We)}if(I.superscripts===!0){var Ge=be.indexOf(g),Xe=Me.indexOf(g),ut=Ge>-1?parseInt(be[1+Ge]):0,rt=Xe>-1?parseInt(Me[1+Xe]):0;ut!==rt&&(Ie=Ie.replace(ue(),"?px "),$*=Math.pow(.75,rt-ut),Ie=Ie.replace("?px ",ue())),W-=.25*O*(rt-ut)}if(I.bolds===!0){var dt=be.indexOf(y)>-1,st=Me.indexOf(y)>-1;!dt&&st&&(Ve?Ie=Ie.replace("italic ","italic bold "):Ie="bold "+Ie),dt&&!st&&(Ie=Ie.replace("bold ",""))}if(I.italics===!0){var Ve=be.indexOf(_)>-1,Je=Me.indexOf(_)>-1;!Ve&&Je&&(Ie="italic "+Ie),Ve&&!Je&&(Ie=Ie.replace("italic ",""))}P.font=Ie}for(X=0;X<U;++X){var _e=Q[X]+`
`;for(K=0,W=X*O,$=C,de="",H=0;H<_e.length;++H){var fe=H+re<q.length?q[H+re]:q[q.length-1];G===fe?de+=_e[H]:(ve(),de=_e[H],fe!==void 0&&(ce(G,fe),G=fe))}ve(),re+=_e.length;var ne=Math.round(K+2*Z)|0;Y<ne&&(Y=ne)}var ie=Y,me=B+O*U,we=e(P.getImageData(0,0,ie,me).data,[me,ie,4]);return we.pick(-1,-1,0).transpose(1,0)}function i(E,P){var S=d(E,128);return P?u(S.cells,S.positions,.25):{edges:S.cells,positions:S.positions}}function r(E,P,S,C){var M=i(E,C),I=o(M.positions,P,S),G=M.edges,V=P.orientation==="ccw";if(s(I,G),P.polygons||P.polygon||P.polyline){for(var q=b(G,I),ee=new Array(q.length),Q=0;Q<q.length;++Q){for(var U=q[Q],O=new Array(U.length),Z=0;Z<U.length;++Z){for(var B=U[Z],Y=new Array(B.length),j=0;j<B.length;++j)Y[j]=I[B[j]].slice();V&&Y.reverse(),O[Z]=Y}ee[Q]=O}return ee}else return P.triangles||P.triangulate||P.triangle?{cells:l(I,G,{delaunay:!1,exterior:!1,interior:!0}),positions:I}:{edges:G,positions:I}}function x(E,P,S){try{return r(E,P,S,!0)}catch{}try{return r(E,P,S,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function A(E,P,S,C){var M=64,I=1.25,G={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};C&&(C.size&&C.size>0&&(M=C.size),C.lineSpacing&&C.lineSpacing>0&&(I=C.lineSpacing),C.styletags&&C.styletags.breaklines&&(G.breaklines=!!C.styletags.breaklines),C.styletags&&C.styletags.bolds&&(G.bolds=!!C.styletags.bolds),C.styletags&&C.styletags.italics&&(G.italics=!!C.styletags.italics),C.styletags&&C.styletags.subscripts&&(G.subscripts=!!C.styletags.subscripts),C.styletags&&C.styletags.superscripts&&(G.superscripts=!!C.styletags.superscripts)),S.font=[C.fontStyle,C.fontVariant,C.fontWeight,M+"px",C.font].filter(function(q){return q}).join(" "),S.textAlign="start",S.textBaseline="alphabetic",S.direction="ltr";var V=t(P,S,E,M,I,G);return x(V,C,M)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(p,w,k){(function(){"use strict";if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function e(A){A.permitHostObjects___&&A.permitHostObjects___(e)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=e);var u=!1;if(typeof WeakMap=="function"){var s=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var l=new s,b=Object.freeze({});if(l.set(b,1),l.get(b)!==1)u=!0;else{w.exports=WeakMap;return}}}var v=Object.prototype.hasOwnProperty,y=Object.getOwnPropertyNames,T=Object.defineProperty,_=Object.isExtensible,f="weakmap:",g=f+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var n=new ArrayBuffer(25),a=new Uint8Array(n);crypto.getRandomValues(a),g=f+"rand:"+Array.prototype.map.call(a,function(A){return(A%36).toString(36)}).join("")+"___"}function h(A){return!(A.substr(0,f.length)==f&&A.substr(A.length-3)==="___")}if(T(Object,"getOwnPropertyNames",{value:function(E){return y(E).filter(h)}}),"getPropertyNames"in Object){var c=Object.getPropertyNames;T(Object,"getPropertyNames",{value:function(E){return c(E).filter(h)}})}function m(A){if(A!==Object(A))throw new TypeError("Not an object: "+A);var E=A[g];if(E&&E.key===A)return E;if(!!_(A)){E={key:A};try{return T(A,g,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}(function(){var A=Object.freeze;T(Object,"freeze",{value:function(C){return m(C),A(C)}});var E=Object.seal;T(Object,"seal",{value:function(C){return m(C),E(C)}});var P=Object.preventExtensions;T(Object,"preventExtensions",{value:function(C){return m(C),P(C)}})})();function o(A){return A.prototype=null,Object.freeze(A)}var t=!1;function i(){!t&&typeof console<"u"&&(t=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var r=0,x=function(){this instanceof x||i();var A=[],E=[],P=r++;function S(G,V){var q,ee=m(G);return ee?P in ee?ee[P]:V:(q=A.indexOf(G),q>=0?E[q]:V)}function C(G){var V=m(G);return V?P in V:A.indexOf(G)>=0}function M(G,V){var q,ee=m(G);return ee?ee[P]=V:(q=A.indexOf(G),q>=0?E[q]=V:(q=A.length,E[q]=V,A[q]=G)),this}function I(G){var V=m(G),q,ee;return V?P in V&&delete V[P]:(q=A.indexOf(G),q<0?!1:(ee=A.length-1,A[q]=void 0,E[q]=E[ee],A[q]=A[ee],A.length=ee,E.length=ee,!0))}return Object.create(x.prototype,{get___:{value:o(S)},has___:{value:o(C)},set___:{value:o(M)},delete___:{value:o(I)}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof s=="function"?function(){u&&typeof Proxy<"u"&&(Proxy=void 0);function A(){this instanceof x||i();var E=new s,P=void 0,S=!1;function C(V,q){return P?E.has(V)?E.get(V):P.get___(V,q):E.get(V,q)}function M(V){return E.has(V)||(P?P.has___(V):!1)}var I;u?I=function(V,q){return E.set(V,q),E.has(V)||(P||(P=new x),P.set(V,q)),this}:I=function(V,q){if(S)try{E.set(V,q)}catch{P||(P=new x),P.set___(V,q)}else E.set(V,q);return this};function G(V){var q=!!E.delete(V);return P&&P.delete___(V)||q}return Object.create(x.prototype,{get___:{value:o(C)},has___:{value:o(M)},set___:{value:o(I)},delete___:{value:o(G)},permitHostObjects___:{value:o(function(V){if(V===e)S=!0;else throw new Error("bogus call to permitHostObjects___")})}})}A.prototype=x.prototype,w.exports=A,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),w.exports=x)})()},{}],314:[function(p,w,k){var d=p("./hidden-store.js");w.exports=e;function e(){var u={};return function(s){if((typeof s!="object"||s===null)&&typeof s!="function")throw new Error("Weakmap-shim: Key must be object");var l=s.valueOf(u);return l&&l.identity===u?l:d(s,u)}}},{"./hidden-store.js":315}],315:[function(p,w,k){w.exports=d;function d(e,u){var s={identity:u},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(b){return b!==u?l.apply(this,arguments):s},writable:!0}),s}},{}],316:[function(p,w,k){var d=p("./create-store.js");w.exports=e;function e(){var u=d();return{get:function(s,l){var b=u(s);return b.hasOwnProperty("value")?b.value:l},set:function(s,l){return u(s).value=l,this},has:function(s){return"value"in u(s)},delete:function(s){return delete u(s).value}}}},{"./create-store.js":314}],317:[function(p,w,k){"use strict";function d(){return function(v,y,T,_,f,g){var n=v[0],a=T[0],h=[0],c=a;_|=0;var m=0,o=a;for(m=0;m<n;++m){{var t=y[_]-g,i=y[_+c]-g;t>=0!=i>=0&&f.push(h[0]+.5+.5*(t+i)/(t-i))}_+=o,++h[0]}}}function e(){return d()}var u=e;function s(v){var y={};return function(_,f,g){var n=_.dtype,a=_.order,h=[n,a.join()].join(),c=y[h];return c||(y[h]=c=v([n,a])),c(_.shape.slice(0),_.data,_.stride,_.offset|0,f,g)}}function l(v){return s(u.bind(void 0,v))}function b(v){return l({funcName:v.funcName})}w.exports=b({funcName:"zeroCrossings"})},{}],318:[function(p,w,k){"use strict";w.exports=e;var d=p("./lib/zc-core");function e(u,s){var l=[];return s=+s||0,d(u.hi(u.shape[0]-1),l,s),l}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[8])(8)})});var _a=Ys(Di());var yn={RED:(bt=.8)=>`rgba(255,65,54,${bt})`,GREEN:(bt=.8)=>`rgba(46,204,64,${bt})`,BLUE:(bt=.8)=>`rgba(0,116,217,${bt})`,GOLD:(bt=.8)=>`rgba(238,170,0,${bt})`,PURPLE:(bt=.8)=>`rgba(102,51,102,${bt})`,BLACK:(bt=.8)=>`rgba(0,0,0,${bt})`};var yr=Math.sqrt,Pi=[{fns:[(bt,Tt,Xt)=>({x:bt,y:16*yr(2*bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:yr(2*bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:2-bt})],aabb:[{x:0,y:0,z:0},{x:2,y:32,z:2}],isInside:({x:bt,y:Tt,z:Xt})=>bt>=0&&bt<=2&&Xt>=0&&Xt<=2-bt&&Tt>=yr(2*bt)&&Tt<=16*yr(2*bt)},{fns:[(bt,Tt,Xt)=>({x:bt,y:5*yr(bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:5*bt/3,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:5+5*yr(bt)/3})],aabb:[{x:0,y:0,z:0},{x:9,y:15,z:9}],isInside:({x:bt,y:Tt,z:Xt})=>Xt>=0&&Xt<=5+5*yr(bt)/3&&Tt>=5*bt/3&&Tt<=5*yr(bt)&&bt>=0&&bt<=9},{fns:[(bt,Tt,Xt)=>({x:19*yr(2*Tt),y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:4*yr(2*Tt),y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:2-Tt})],aabb:[{x:0,y:0,z:0},{x:38,y:2,z:2}],isInside:({x:bt,y:Tt,z:Xt})=>Tt>=0&&Tt<=2&&bt>=4*yr(2*Tt)&&bt<=19*yr(2*Tt)&&Xt>=0&&Xt<=2-Tt},{fns:[(bt,Tt,Xt)=>({x:bt,y:2-bt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:yr(bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:12*Tt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0})],aabb:[{x:0,y:0,z:0},{x:2,y:2,z:24}],isInside:({x:bt,y:Tt,z:Xt})=>bt>=0&&bt<=2&&Tt<=2-bt&&Tt<=yr(bt)&&Xt>=0&&Xt<=12*Tt},{fns:[(bt,Tt,Xt)=>({x:20*yr(2*Tt),y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:5*yr(2*Tt),y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:.5-Tt})],aabb:[{x:0,y:0,z:0},{x:20,y:.5,z:.5}],isInside:({x:bt,y:Tt,z:Xt})=>Tt>=0&&Tt<=2&&bt>=5*yr(2*Tt)&&bt<=20*yr(2*Tt)&&Xt>=0&&Xt<=.5-Tt},{fns:[(bt,Tt,Xt)=>({x:5*yr(Tt)/2,y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:5*Tt/6,y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:5*(3+yr(Tt))/6})],aabb:[{x:0,y:0,z:0},{x:7.5,y:9,z:5}],isInside:({x:bt,y:Tt,z:Xt})=>Tt>=0&&Tt<=9&&bt<=5*yr(Tt)/2&&bt>=5*Tt/6&&Xt>=0&&Xt<=5*(3+yr(Tt))/6},{fns:[(bt,Tt,Xt)=>({x:5*yr(Tt)/6,y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:5*Tt/18,y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:5*(3+yr(Tt))/18})],aabb:[{x:0,y:0,z:0},{x:2.5,y:9,z:5/3}],isInside:({x:bt,y:Tt,z:Xt})=>Tt>=0&&Tt<=9&&bt<=5*yr(Tt)/6&&bt>=5*Tt/18&&Xt>=0&&Xt<=5*(3+yr(Tt))/18},{fns:[(bt,Tt,Xt)=>({x:2-Tt,y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:yr(Tt),y:Tt,z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:12*bt/5}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0})],aabb:[{x:0,y:0,z:0},{x:2,y:2,z:24/5}],isInside:({x:bt,y:Tt,z:Xt})=>Tt>=0&&Tt<=2&&bt<=2-Tt&&bt<=yr(Tt)&&Xt>=0&&Xt<=12*bt/5},{fns:[(bt,Tt,Xt)=>({x:bt,y:17*yr(2*bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:2*yr(2*bt),z:Xt}),(bt,Tt,Xt)=>({x:bt,y:Tt,z:0}),(bt,Tt,Xt)=>({x:.5-Xt,y:Tt,z:Xt})],aabb:[{x:0,y:0,z:0},{x:.5,y:17,z:.5}],isInside:({x:bt,y:Tt,z:Xt})=>bt>=0&&bt<=.5&&Xt>=0&&Xt<=.5-bt&&Tt>=2*yr(2*bt)&&Tt<=17*yr(2*bt)}];var Xn=(bt,Tt=document)=>Tt.querySelector(bt),xa=(bt,Tt,Xt,z)=>bt.addEventListener(Tt,Xt,!!z);var fn=(bt,Tt)=>bt.map(Xt=>Xt[Tt]),Ii=bt=>bt.toFixed(3),ba=(bt,Tt)=>Math.random()*(Tt-bt)+bt,Ws=(bt,Tt)=>({x:ba(bt.x,Tt.x),y:ba(bt.y,Tt.y),z:ba(bt.z,Tt.z)});var Fi=bt=>{let[Tt,Xt]=bt;return(Xt.x-Tt.x)*(Xt.y-Tt.y)*(Xt.z-Tt.z)};function Ni(bt,Tt,Xt,z){let le=(Tt.x-bt.x)/Xt,ae=(Tt.y-bt.y)/Xt,R=(Tt.z-bt.z)/Xt,L=[];for(let N=bt.x;N<=Tt.x;N+=le)for(let D=bt.y;D<=Tt.y;D+=ae)for(let p=bt.z;p<=Tt.z;p+=R)L.push(z(N,D,p));return L}function zi(bt,Tt,Xt){let z=Array(Xt);for(let le=0;le<Xt;le++)z[le]=Ws(bt,Tt);return z}var Cn=100,Oi=0;function wa(){let bt=Pi[Oi],[Tt,Xt]=bt.aabb,z=()=>bt.fns.map(d=>Ni(Tt,Xt,10,d)),le=[],ae=z(),R=[yn.BLUE(),yn.RED(),yn.GREEN(),yn.BLACK()];for(let d=0;d<ae.length;d++){let e=ae[d];le.push({x:fn(e,"x"),y:fn(e,"y"),z:fn(e,"z"),type:"scatter3d",mode:"markers",marker:{size:2,color:R[d]}})}let N=zi(Tt,Xt,Cn).filter(d=>bt.isInside(d)),D=N.length,p=[{x:fn(N,"x"),y:fn(N,"y"),z:fn(N,"z"),type:"scatter3d",mode:"markers",marker:{size:2,color:yn.PURPLE()}}],w={showlegend:!1,width:800,height:800};_a.default.newPlot("surfaces",le,w),_a.default.newPlot("volume",p,w);let k=Fi(bt.aabb);Xn("#result").textContent=`\u0422\u043E\u0447\u0435\u043A \u0432 \u0444\u0438\u0433\u0443\u0440\u0435: ${D} \u0438\u0437 ${Cn} (${Ii(100*D/Cn)}%), \u043E\u0431\u044A\u0451\u043C: ${k*D/Cn} \u0438\u0437 ${k}`}wa();xa(Xn("#variant"),"change",bt=>{let Tt=bt.target;Oi=+Tt.options[Tt.selectedIndex].value,wa()});xa(Xn("#points"),"change",bt=>{let Tt=bt.target;Cn=+Tt.options[Tt.selectedIndex].value,wa()});})();
/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
